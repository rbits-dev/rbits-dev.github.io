var Gy=Object.defineProperty;var Ny=(s,t,i)=>t in s?Gy(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var $=(s,t,i)=>(Ny(s,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))f(C);new MutationObserver(C=>{for(const w of C)if(w.type==="childList")for(const a of w.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&f(a)}).observe(document,{childList:!0,subtree:!0});function i(C){const w={};return C.integrity&&(w.integrity=C.integrity),C.referrerpolicy&&(w.referrerPolicy=C.referrerpolicy),C.crossorigin==="use-credentials"?w.credentials="include":C.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function f(C){if(C.ep)return;C.ep=!0;const w=i(C);fetch(C.href,w)}})();var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ky(s){var t=s.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(s).forEach(function(f){var C=Object.getOwnPropertyDescriptor(s,f);Object.defineProperty(i,f,C.get?C:{enumerable:!0,get:function(){return s[f]}})}),i}var Nn={exports:{}};(function(s,t){(function(f,C){s.exports=C()})(Su,()=>(()=>{var i={6659:a=>{var T=Object.prototype.hasOwnProperty,e="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(e=!1));function y(r,n,v){this.fn=r,this.context=n,this.once=v||!1}function d(r,n,v,o,c){if(typeof v!="function")throw new TypeError("The listener must be a function");var m=new y(v,o||r,c),p=e?e+n:n;return r._events[p]?r._events[p].fn?r._events[p]=[r._events[p],m]:r._events[p].push(m):(r._events[p]=m,r._eventsCount++),r}function l(r,n){--r._eventsCount===0?r._events=new u:delete r._events[n]}function h(){this._events=new u,this._eventsCount=0}h.prototype.eventNames=function(){var n=[],v,o;if(this._eventsCount===0)return n;for(o in v=this._events)T.call(v,o)&&n.push(e?o.slice(1):o);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(v)):n},h.prototype.listeners=function(n){var v=e?e+n:n,o=this._events[v];if(!o)return[];if(o.fn)return[o.fn];for(var c=0,m=o.length,p=new Array(m);c<m;c++)p[c]=o[c].fn;return p},h.prototype.listenerCount=function(n){var v=e?e+n:n,o=this._events[v];return o?o.fn?1:o.length:0},h.prototype.emit=function(n,v,o,c,m,p){var g=e?e+n:n;if(!this._events[g])return!1;var x=this._events[g],E=arguments.length,P,S;if(x.fn){switch(x.once&&this.removeListener(n,x.fn,void 0,!0),E){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,v),!0;case 3:return x.fn.call(x.context,v,o),!0;case 4:return x.fn.call(x.context,v,o,c),!0;case 5:return x.fn.call(x.context,v,o,c,m),!0;case 6:return x.fn.call(x.context,v,o,c,m,p),!0}for(S=1,P=new Array(E-1);S<E;S++)P[S-1]=arguments[S];x.fn.apply(x.context,P)}else{var M=x.length,b;for(S=0;S<M;S++)switch(x[S].once&&this.removeListener(n,x[S].fn,void 0,!0),E){case 1:x[S].fn.call(x[S].context);break;case 2:x[S].fn.call(x[S].context,v);break;case 3:x[S].fn.call(x[S].context,v,o);break;case 4:x[S].fn.call(x[S].context,v,o,c);break;default:if(!P)for(b=1,P=new Array(E-1);b<E;b++)P[b-1]=arguments[b];x[S].fn.apply(x[S].context,P)}}return!0},h.prototype.on=function(n,v,o){return d(this,n,v,o,!1)},h.prototype.once=function(n,v,o){return d(this,n,v,o,!0)},h.prototype.removeListener=function(n,v,o,c){var m=e?e+n:n;if(!this._events[m])return this;if(!v)return l(this,m),this;var p=this._events[m];if(p.fn)p.fn===v&&(!c||p.once)&&(!o||p.context===o)&&l(this,m);else{for(var g=0,x=[],E=p.length;g<E;g++)(p[g].fn!==v||c&&!p[g].once||o&&p[g].context!==o)&&x.push(p[g]);x.length?this._events[m]=x.length===1?x[0]:x:l(this,m)}return this},h.prototype.removeAllListeners=function(n){var v;return n?(v=e?e+n:n,this._events[v]&&l(this,v)):(this._events=new u,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,a.exports=h},62270:(a,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82590),y=function(d,l,h,r){for(var n=d[0],v=1;v<d.length;v++){var o=d[v];u(o,n,l,h,r),n=o}return d};a.exports=y},61148:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"angle",l,h,r,n)};a.exports=y},22015:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){for(var d=0;d<e.length;d++){var l=e[d];u.call(y,l)}return e};a.exports=T},31060:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){y===void 0&&(y=0);for(var d=y;d<e.length;d++){var l=e[d],h=!0;for(var r in u)l[r]!==u[r]&&(h=!1);if(h)return l}return null};a.exports=T},52367:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){y===void 0&&(y=0);for(var d=y;d<e.length;d++){var l=e[d],h=!0;for(var r in u)l[r]!==u[r]&&(h=!1);if(h)return l}return null};a.exports=T},12673:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40327),y=e(84093),d=e(72632),l=e(72283),h=e(71030),r=new h({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1).setOrigin(0,0),n=function(v,o){o===void 0&&(o={});var c=o.hasOwnProperty("width"),m=o.hasOwnProperty("height"),p=d(o,"width",-1),g=d(o,"height",-1),x=d(o,"cellWidth",1),E=d(o,"cellHeight",x),P=d(o,"position",y.TOP_LEFT),S=d(o,"x",0),M=d(o,"y",0),b=0,A=0,L=p*x,R=g*E;r.setPosition(S,M),r.setSize(x,E);for(var O=0;O<v.length;O++)if(u(v[O],r,P),c&&p===-1)r.x+=x;else if(m&&g===-1)r.y+=E;else if(m&&!c){if(A+=E,r.y+=E,A===R&&(A=0,b+=x,r.y=M,r.x+=x,b===L))break}else if(b+=x,r.x+=x,b===L&&(b=0,A+=E,r.x=S,r.y+=E,A===R))break;return v};a.exports=n},691:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"alpha",l,h,r,n)};a.exports=y},3877:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"x",l,h,r,n)};a.exports=y},71020:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n,v,o){return h==null&&(h=l),u(d,"x",l,r,v,o),u(d,"y",h,n,v,o)};a.exports=y},28970:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"y",l,h,r,n)};a.exports=y},82249:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y===void 0&&(y=0),d===void 0&&(d=6.28);for(var l=y,h=(d-y)/e.length,r=u.x,n=u.y,v=u.radius,o=0;o<e.length;o++)e[o].x=r+v*Math.cos(l),e[o].y=n+v*Math.sin(l),l+=h;return e};a.exports=T},30285:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y===void 0&&(y=0),d===void 0&&(d=6.28);for(var l=y,h=(d-y)/e.length,r=u.width/2,n=u.height/2,v=0;v<e.length;v++)e[v].x=u.x+r*Math.cos(l),e[v].y=u.y+n*Math.sin(l),l+=h;return e};a.exports=T},61557:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8570),y=function(d,l){for(var h=u(l,d.length),r=0;r<d.length;r++){var n=d[r],v=h[r];n.x=v.x,n.y=v.y}return d};a.exports=y},63549:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40053),y=e(77640),d=e(38487),l=function(h,r,n){n===void 0&&(n=0);var v=u(r,!1,h.length);n>0?y(v,n):n<0&&d(v,Math.abs(n));for(var o=0;o<h.length;o++)h[o].x=v[o].x,h[o].y=v[o].y;return h};a.exports=l},51629:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(58813),y=function(d,l,h){var r=u({x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2},h),n=u({x1:l.x2,y1:l.y2,x2:l.x3,y2:l.y3},h),v=u({x1:l.x3,y1:l.y3,x2:l.x1,y2:l.y1},h);r.pop(),n.pop(),v.pop(),r=r.concat(n,v);for(var o=r.length/d.length,c=0,m=0;m<d.length;m++){var p=d[m],g=r[Math.floor(c)];p.x=g.x,p.y=g.y,c+=o}return d};a.exports=y},1045:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){for(var d=0;d<e.length;d++){var l=e[d];l.anims&&l.anims.play(u,y)}return e};a.exports=T},6124:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l,h){d===void 0&&(d=0),l===void 0&&(l=0),h===void 0&&(h=1);var r,n=0,v=e.length;if(h===1)for(r=l;r<v;r++)e[r][u]+=y+n*d,n++;else for(r=l;r>=0;r--)e[r][u]+=y+n*d,n++;return e};a.exports=T},23646:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l,h){d===void 0&&(d=0),l===void 0&&(l=0),h===void 0&&(h=1);var r,n=0,v=e.length;if(h===1)for(r=l;r<v;r++)e[r][u]=y+n*d,n++;else for(r=l;r>=0;r--)e[r][u]=y+n*d,n++;return e};a.exports=T},4392:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(30977),y=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};a.exports=y},94985:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72006),y=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};a.exports=y},63305:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74077),y=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};a.exports=y},90739:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(30001),y=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};a.exports=y},91417:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99761),y=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};a.exports=y},26182:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"rotation",l,h,r,n)};a.exports=y},87299:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72395),y=e(53996),d=function(l,h,r){for(var n=h.x,v=h.y,o=0;o<l.length;o++){var c=l[o];u(c,n,v,r,Math.max(1,y(c.x,c.y,n,v)))}return l};a.exports=d},92194:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72395),y=function(d,l,h,r){var n=l.x,v=l.y;if(r===0)return d;for(var o=0;o<d.length;o++)u(d[o],n,v,h,r);return d};a.exports=y},30363:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"scaleX",l,h,r,n)};a.exports=y},51449:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n,v,o){return h==null&&(h=l),u(d,"scaleX",l,r,v,o),u(d,"scaleY",h,n,v,o)};a.exports=y},64895:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),y=function(d,l,h,r,n){return u(d,"scaleY",l,h,r,n)};a.exports=y},30329:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"alpha",l,h,r,n)};a.exports=y},43954:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r){return u(d,"blendMode",l,0,h,r)};a.exports=y},70688:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"depth",l,h,r,n)};a.exports=y},8314:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){for(var d=0;d<e.length;d++)e[d].setInteractive(u,y);return e};a.exports=T},12894:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n,v,o){return h==null&&(h=l),u(d,"originX",l,r,v,o),u(d,"originY",h,n,v,o),d.forEach(function(c){c.updateDisplayOrigin()}),d};a.exports=y},38767:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"rotation",l,h,r,n)};a.exports=y},18584:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n,v,o){return h==null&&(h=l),u(d,"scaleX",l,r,v,o),u(d,"scaleY",h,n,v,o)};a.exports=y},17381:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"scaleX",l,h,r,n)};a.exports=y},74370:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"scaleY",l,h,r,n)};a.exports=y},27773:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n,v,o){return h==null&&(h=l),u(d,"scrollFactorX",l,r,v,o),u(d,"scrollFactorY",h,n,v,o)};a.exports=y},75257:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"scrollFactorX",l,h,r,n)};a.exports=y},54512:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"scrollFactorY",l,h,r,n)};a.exports=y},69423:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){for(var h=0;h<e.length;h++)e[h].setTint(u,y,d,l);return e};a.exports=T},58291:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r){return u(d,"visible",l,0,h,r)};a.exports=y},94833:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"x",l,h,r,n)};a.exports=y},14284:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n,v,o){return h==null&&(h=l),u(d,"x",l,r,v,o),u(d,"y",h,n,v,o)};a.exports=y},96574:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),y=function(d,l,h,r,n){return u(d,"y",l,h,r,n)};a.exports=y},74086:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n){r===void 0&&(r=0),n===void 0&&(n=new u);var v,o,c=d.length;if(c===1)v=d[0].x,o=d[0].y,d[0].x=l,d[0].y=h;else{var m=1,p=0;r===0&&(p=c-1,m=c-2),v=d[p].x,o=d[p].y,d[p].x=l,d[p].y=h;for(var g=0;g<c;g++)if(!(m>=c||m===-1)){var x=d[m],E=x.x,P=x.y;x.x=v,x.y=o,v=E,o=P,r===0?m--:m++}}return n.x=v,n.y=o,n};a.exports=y},86347:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18592),y=function(d){return u(d)};a.exports=y},1558:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(5514),y=function(d,l,h,r,n){n===void 0&&(n=!1);var v=Math.abs(r-h)/d.length,o;if(n)for(o=0;o<d.length;o++)d[o][l]+=u(o*v,h,r);else for(o=0;o<d.length;o++)d[o][l]=u(o*v,h,r);return d};a.exports=y},9938:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(87736),y=function(d,l,h,r,n){n===void 0&&(n=!1);var v=Math.abs(r-h)/d.length,o;if(n)for(o=0;o<d.length;o++)d[o][l]+=u(o*v,h,r);else for(o=0;o<d.length;o++)d[o][l]=u(o*v,h,r);return d};a.exports=y},71060:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){if(l===void 0&&(l=!1),e.length===0)return e;if(e.length===1)return l?e[0][u]+=(d+y)/2:e[0][u]=(d+y)/2,e;var h=Math.abs(d-y)/(e.length-1),r;if(l)for(r=0;r<e.length;r++)e[r][u]+=r*h+y;else for(r=0;r<e.length;r++)e[r][u]=r*h+y;return e};a.exports=T},11207:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var u=0;u<e.length;u++)e[u].visible=!e[u].visible;return e};a.exports=T},24404:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1071),y=function(d,l,h){h===void 0&&(h=0);for(var r=0;r<d.length;r++){var n=d[r];n.x=u(n.x,l.left-h,l.right+h),n.y=u(n.y,l.top-h,l.bottom+h)}return d};a.exports=y},83979:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(16938),l=e(2406),h=e(71519),r=e(10850),n=e(28834),v=new y({initialize:function(c,m,p){this.manager=c,this.key=m,this.type="frame",this.frames=this.getFrames(c.textureManager,r(p,"frames",[]),r(p,"defaultTextureKey",null),r(p,"sortFrames",!0)),this.frameRate=r(p,"frameRate",null),this.duration=r(p,"duration",null),this.msPerFrame,this.skipMissedFrames=r(p,"skipMissedFrames",!0),this.delay=r(p,"delay",0),this.repeat=r(p,"repeat",0),this.repeatDelay=r(p,"repeatDelay",0),this.yoyo=r(p,"yoyo",!1),this.showBeforeDelay=r(p,"showBeforeDelay",!1),this.showOnStart=r(p,"showOnStart",!1),this.hideOnComplete=r(p,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(d.PAUSE_ALL,this.pause,this),this.manager.on(d.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(o,c,m,p){m===null&&p===null?(o.frameRate=24,o.duration=24/c*1e3):m&&p===null?(o.duration=m,o.frameRate=c/(m/1e3)):(o.frameRate=p,o.duration=c/p*1e3),o.msPerFrame=1e3/o.frameRate},addFrame:function(o){return this.addFrameAt(this.frames.length,o)},addFrameAt:function(o,c){var m=this.getFrames(this.manager.textureManager,c);if(m.length>0){if(o===0)this.frames=m.concat(this.frames);else if(o===this.frames.length)this.frames=this.frames.concat(m);else{var p=this.frames.slice(0,o),g=this.frames.slice(o);this.frames=p.concat(m,g)}this.updateFrameSequence()}return this},checkFrame:function(o){return o>=0&&o<this.frames.length},getFirstTick:function(o){o.accumulator=0,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameAt:function(o){return this.frames[o]},getFrames:function(o,c,m,p){p===void 0&&(p=!0);var g=[],x,E,P=1,S,M;if(typeof c=="string"){if(M=c,!o.exists(M))return console.warn('Texture "%s" not found',M),g;var b=o.get(M),A=b.getFrameNames();p&&n(A),c=[],A.forEach(function(G){c.push({key:M,frame:G})})}if(!Array.isArray(c)||c.length===0)return g;for(S=0;S<c.length;S++){var L=c[S],R=r(L,"key",m);if(!!R){var O=r(L,"frame",0),D=o.getFrame(R,O);if(!D){console.warn('Texture "%s" not found',R);continue}E=new h(R,O,P,D),E.duration=r(L,"duration",0),E.isFirst=!x,x&&(x.nextFrame=E,E.prevFrame=x),g.push(E),x=E,P++}}if(g.length>0){E.isLast=!0,E.nextFrame=g[0],g[0].prevFrame=E;var B=1/(g.length-1);for(S=0;S<g.length;S++)g[S].progress=S*B}return g},getNextTick:function(o){o.accumulator-=o.nextTick,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameByProgress:function(o){return o=u(o,0,1),l(o,this.frames,"progress")},nextFrame:function(o){var c=o.currentFrame;c.isLast?o.yoyo?this.handleYoyoFrame(o,!1):o.repeatCounter>0?o.inReverse&&o.forward?o.forward=!1:this.repeatAnimation(o):o.complete():this.updateAndGetNextTick(o,c.nextFrame)},handleYoyoFrame:function(o,c){if(c||(c=!1),o.inReverse===!c&&o.repeatCounter>0){(o.repeatDelay===0||o.pendingRepeat)&&(o.forward=c),this.repeatAnimation(o);return}if(o.inReverse!==c&&o.repeatCounter===0){o.complete();return}o.forward=c;var m=c?o.currentFrame.nextFrame:o.currentFrame.prevFrame;this.updateAndGetNextTick(o,m)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(o){var c=o.currentFrame;c.isFirst?o.yoyo?this.handleYoyoFrame(o,!0):o.repeatCounter>0?o.inReverse&&!o.forward?this.repeatAnimation(o):(o.forward=!0,this.repeatAnimation(o)):o.complete():this.updateAndGetNextTick(o,c.prevFrame)},updateAndGetNextTick:function(o,c){o.setCurrentFrame(c),this.getNextTick(o)},removeFrame:function(o){var c=this.frames.indexOf(o);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(o){return this.frames.splice(o,1),this.updateFrameSequence(),this},repeatAnimation:function(o){if(o._pendingStop===2){if(o._pendingStopValue===0)return o.stop();o._pendingStopValue--}o.repeatDelay>0&&!o.pendingRepeat?(o.pendingRepeat=!0,o.accumulator-=o.nextTick,o.nextTick+=o.repeatDelay):(o.repeatCounter--,o.forward?o.setCurrentFrame(o.currentFrame.nextFrame):o.setCurrentFrame(o.currentFrame.prevFrame),o.isPlaying&&(this.getNextTick(o),o.handleRepeat()))},toJSON:function(){var o={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){o.frames.push(c.toJSON())}),o},updateFrameSequence:function(){for(var o=this.frames.length,c=1/(o-1),m,p=0;p<o;p++)m=this.frames[p],m.index=p+1,m.isFirst=!1,m.isLast=!1,m.progress=p*c,p===0?(m.isFirst=!0,o===1?(m.isLast=!0,m.nextFrame=m,m.prevFrame=m):(m.isLast=!1,m.prevFrame=this.frames[o-1],m.nextFrame=this.frames[p+1])):p===o-1&&o>1?(m.isLast=!0,m.prevFrame=this.frames[o-2],m.nextFrame=this.frames[0]):o>1&&(m.prevFrame=this.frames[p-1],m.nextFrame=this.frames[p+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(d.PAUSE_ALL,this.pause,this),this.manager.off(d.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var o=0;o<this.frames.length;o++)this.frames[o].destroy();this.frames=[],this.manager=null}});a.exports=v},71519:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r,n,v){v===void 0&&(v=!1),this.textureKey=l,this.textureFrame=h,this.index=r,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});a.exports=y},90249:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85463),y=e(56694),d=e(33885),l=e(6659),h=e(16938),r=e(97081),n=e(72632),v=e(10850),o=e(83392),c=e(13401),m=e(76400),p=new y({Extends:l,initialize:function(x){l.call(this),this.game=x,this.textureManager=null,this.globalTimeScale=1,this.anims=new d,this.mixes=new d,this.paused=!1,this.name="AnimationManager",x.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(g,x,E){var P=this.anims,S=this.mixes,M=typeof g=="string"?g:g.key,b=typeof x=="string"?x:x.key;if(P.has(M)&&P.has(b)){var A=S.get(M);A||(A={}),A[b]=E,S.set(M,A)}return this},removeMix:function(g,x){var E=this.mixes,P=typeof g=="string"?g:g.key,S=E.get(P);if(S)if(x){var M=typeof x=="string"?x:x.key;S.hasOwnProperty(M)&&delete S[M]}else x||E.delete(P);return this},getMix:function(g,x){var E=this.mixes,P=typeof g=="string"?g:g.key,S=typeof x=="string"?x:x.key,M=E.get(P);return M&&M.hasOwnProperty(S)?M[S]:0},add:function(g,x){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(x.key=g,this.anims.set(g,x),this.emit(h.ADD_ANIMATION,g,x),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,x,E){var P=[],S=this.game.cache.json.get(g);if(!S)return P;var M=this,b=v(S,"meta",null),A=v(S,"frames",null);if(b&&A){var L=v(b,"frameTags",[]);L.forEach(function(R){var O=[],D=n(R,"name",null),B=n(R,"from",0),G=n(R,"to",0),z=n(R,"direction","forward");if(!!D&&(!x||x&&x.indexOf(D)>-1)){for(var X=0,U=B;U<=G;U++){var V=U.toString(),N=A[V];if(N){var W=n(N,"duration",o.MAX_SAFE_INTEGER);O.push({key:g,frame:V,duration:W}),X+=W}}var F=X/O.length;O.forEach(function(Y){Y.duration-=F}),z==="reverse"&&(O=O.reverse());var I={key:D,frames:O,duration:X,yoyo:z==="pingpong"},k;E?E.anims&&(k=E.anims.create(I)):k=M.create(I),k&&P.push(k)}})}return P},create:function(g){var x=g.key,E=!1;return x&&(E=this.get(x),E||(E=new u(this,x,g),this.anims.set(x,E),this.emit(h.ADD_ANIMATION,x,E))),E},fromJSON:function(g,x){x===void 0&&(x=!1),x&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var E=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var P=0;P<g.anims.length;P++)E.push(this.create(g.anims[P]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&E.push(this.create(g));return E},generateFrameNames:function(g,x){var E=v(x,"prefix",""),P=v(x,"start",0),S=v(x,"end",0),M=v(x,"suffix",""),b=v(x,"zeroPad",0),A=v(x,"outputArray",[]),L=v(x,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),A;var R=this.textureManager.get(g);if(!R)return A;var O;if(x)for(L||(L=c(P,S)),O=0;O<L.length;O++){var D=E+m(L[O],b,"0",1)+M;R.has(D)?A.push({key:g,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,g)}else for(L=R.getFrameNames(),O=0;O<L.length;O++)A.push({key:g,frame:L[O]});return A},generateFrameNumbers:function(g,x){var E=v(x,"start",0),P=v(x,"end",-1),S=v(x,"first",!1),M=v(x,"outputArray",[]),b=v(x,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),M;var A=this.textureManager.get(g);if(!A)return M;S&&A.has(S)&&M.push({key:g,frame:S}),b||(P===-1&&(P=A.frameTotal-2),b=c(E,P));for(var L=0;L<b.length;L++){var R=b[L];A.has(R)?M.push({key:g,frame:R}):console.warn('Frame "%s" not found in texture "%s"',R,g)}return M},get:function(g){return this.anims.get(g)},getAnimsFromTexture:function(g){for(var x=this.textureManager.get(g),E=x.key,P=this.anims.getArray(),S=[],M=0;M<P.length;M++)for(var b=P[M],A=b.frames,L=0;L<A.length;L++)if(A[L].textureKey===E){S.push(b.key);break}return S},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(g,x){Array.isArray(x)||(x=[x]);for(var E=0;E<x.length;E++)x[E].anims.play(g);return this},staggerPlay:function(g,x,E,P){E===void 0&&(E=0),P===void 0&&(P=!0),Array.isArray(x)||(x=[x]);var S=x.length;P||S--;for(var M=0;M<x.length;M++){var b=E<0?Math.abs(E)*(S-M):E*M;x[M].anims.playAfterDelay(g,b)}return this},remove:function(g){var x=this.get(g);return x&&(this.emit(h.REMOVE_ANIMATION,g,x),this.anims.delete(g),this.removeMix(g)),x},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(g){var x={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?x.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(E,P){x.anims.push(P.toJSON())}),x},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});a.exports=p},16569:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(33885),d=e(72632),l=e(16938),h=e(85463),r=new u({initialize:function(v){this.parent=v,this.animationManager=v.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(n){var v=this.parent;if(n===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,v;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var c=n[o];this.nextAnim?this.nextAnimsQueue.push(c):this.nextAnim=c}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(n){this.isPlaying&&this.stop();var v=this.animationManager,o=typeof n=="string"?n:d(n,"key",null),c=this.exists(o)?this.get(o):v.get(o);if(!c)console.warn("Missing animation: "+o);else{this.currentAnim=c;var m=c.getTotalFrames(),p=d(n,"frameRate",c.frameRate),g=d(n,"duration",c.duration);c.calculateDuration(this,m,g,p),this.delay=d(n,"delay",c.delay),this.repeat=d(n,"repeat",c.repeat),this.repeatDelay=d(n,"repeatDelay",c.repeatDelay),this.yoyo=d(n,"yoyo",c.yoyo),this.showBeforeDelay=d(n,"showBeforeDelay",c.showBeforeDelay),this.showOnStart=d(n,"showOnStart",c.showOnStart),this.hideOnComplete=d(n,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=d(n,"skipMissedFrames",c.skipMissedFrames),this.timeScale=d(n,"timeScale",this.timeScale);var x=d(n,"startFrame",0);x>c.getTotalFrames()&&(x=0);var E=c.frames[x];x===0&&!this.forward&&(E=c.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(n){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),n!==void 0&&this.setCurrentFrame(n),this.parent},resume:function(n){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),n!==void 0&&this.setCurrentFrame(n),this.parent},playAfterDelay:function(n,v){if(!this.isPlaying)this.delayCounter=v,this.play(n,!0);else{var o=this.nextAnim,c=this.nextAnimsQueue;o&&c.unshift(o),this.nextAnim=n,this._pendingStop=1,this._pendingStopValue=v}return this.parent},playAfterRepeat:function(n,v){if(v===void 0&&(v=1),!this.isPlaying)this.play(n);else{var o=this.nextAnim,c=this.nextAnimsQueue;o&&c.unshift(o),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this.nextAnim=n,this._pendingStop=2,this._pendingStopValue=v}return this.parent},play:function(n,v){v===void 0&&(v=!1);var o=this.currentAnim,c=this.parent,m=typeof n=="string"?n:n.key;if(v&&this.isPlaying&&o.key===m)return c;if(o&&this.isPlaying){var p=this.animationManager.getMix(o.key,n);if(p>0)return this.playAfterDelay(n,p)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n)},playReverse:function(n,v){v===void 0&&(v=!1);var o=typeof n=="string"?n:n.key;return v&&this.isPlaying&&this.currentAnim.key===o?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n))},startAnimation:function(n){this.load(n);var v=this.currentAnim,o=this.parent;return v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,v.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),o},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(n,v){var o=this.currentAnim;if(o){var c=this.currentFrame,m=this.parent,p=c.textureFrame;m.emit(n,o,c,m,p),v&&m.emit(v+o.key,o,c,m,p)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var n=this.currentFrame;if(!n)return 0;var v=n.progress;return this.inReverse&&(v*=-1),v},setProgress:function(n){return this.forward||(n=1-n),this.setCurrentFrame(this.currentAnim.getFrameByProgress(n)),this.parent},setRepeat:function(n){return this.repeatCounter=n===-1?Number.MAX_VALUE:n,this.parent},globalRemove:function(n,v){v===void 0&&(v=this.currentAnim),this.isPlaying&&v.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(n,v){n===void 0&&(n=!1),v===void 0&&(v=!1);var o=this.currentAnim,c=this.parent;return o?(v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),o.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!n,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(o.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(n)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(n)}return this.parent},stopAfterDelay:function(n){return this._pendingStop=1,this._pendingStopValue=n,this.parent},stopAfterRepeat:function(n){return n===void 0&&(n=1),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=n,this.parent},stopOnFrame:function(n){return this._pendingStop=3,this._pendingStopValue=n,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(n,v){var o=this.currentAnim;if(!(!this.isPlaying||!o||o.paused)){if(this.accumulator+=v*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=v,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?o.nextFrame(this):o.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?o.nextFrame(this):o.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(n){var v=this.parent;return this.currentFrame=n,v.texture=n.frame.texture,v.frame=n.frame,v.isCropped&&v.frame.updateCropUVs(v._crop,v.flipX,v.flipY),n.setAlpha&&(v.alpha=n.alpha),v.setSizeToFrame(),v._originComponent&&(n.frame.customPivot?v.setOrigin(n.frame.pivotX,n.frame.pivotY):v.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===n&&this.stop()),v},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(n){return this.anims?this.anims.get(n):null},exists:function(n){return this.anims?this.anims.has(n):!1},create:function(n){var v=n.key,o=!1;return v&&(o=this.get(v),o||(o=new h(this,v,n),this.anims||(this.anims=new y),this.anims.set(v,o))),o},createFromAseprite:function(n,v){return this.animationManager.createFromAseprite(n,v,this.parent)},generateFrameNames:function(n,v){return this.animationManager.generateFrameNames(n,v)},generateFrameNumbers:function(n,v){return this.animationManager.generateFrameNumbers(n,v)},remove:function(n){var v=this.get(n);return v&&(this.currentAnim===v&&this.stop(),this.anims.delete(n)),v},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});a.exports=r},44509:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="add"},84563:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationcomplete"},61586:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationcomplete-"},72175:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationrepeat"},568:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationrestart"},37690:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationstart"},58525:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationstop"},5243:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="animationupdate"},10598:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pauseall"},4860:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="remove"},31865:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resumeall"},16938:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(33885),d=e(6659),l=e(69773),h=new u({initialize:function(){this.entries=new y,this.events=new d},add:function(r,n){return this.entries.set(r,n),this.events.emit(l.ADD,this,r,n),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var n=this.get(r);return n&&(this.entries.delete(r),this.events.emit(l.REMOVE,this,r,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});a.exports=h},43474:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23740),y=e(56694),d=e(97081),l=new y({initialize:function(r){this.game=r,this.binary=new u,this.bitmapFont=new u,this.json=new u,this.physics=new u,this.shader=new u,this.audio=new u,this.video=new u,this.text=new u,this.html=new u,this.obj=new u,this.tilemap=new u,this.xml=new u,this.custom={},this.game.events.once(d.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new u),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<h.length;r++)this[h[r]].destroy(),this[h[r]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});a.exports=l},94762:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="add"},75968:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="remove"},69773:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(75606),l=e(6659),h=e(89787),r=e(74118),n=e(69360),v=e(93222),o=e(93736),c=new u({Extends:l,Mixins:[y.AlphaSingle,y.Visible],initialize:function(p,g,x,E){p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),E===void 0&&(E=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=p,this._y=g,this._width=x,this._height=E,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new o(x/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(m){this.renderList.push(m)},setOrigin:function(m,p){return m===void 0&&(m=.5),p===void 0&&(p=m),this.originX=m,this.originY=p,this},getScroll:function(m,p,g){g===void 0&&(g=new o);var x=this.width*.5,E=this.height*.5;return g.x=m-x,g.y=p-E,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(m){var p=this.width*.5;return this.midPoint.x=m,this.scrollX=m-p,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(m){var p=this.height*.5;return this.midPoint.y=m,this.scrollY=m-p,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(m,p){return this.centerOnX(m),this.centerOnY(p),this},centerToBounds:function(){if(this.useBounds){var m=this._bounds,p=this.width*.5,g=this.height*.5;this.midPoint.set(m.centerX,m.centerY),this.scrollX=m.centerX-p,this.scrollY=m.centerY-g}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(m){if(this.disableCull)return m;var p=this.matrix.matrix,g=p[0],x=p[1],E=p[2],P=p[3],S=g*P-x*E;if(!S)return m;var M=p[4],b=p[5],A=this.scrollX,L=this.scrollY,R=this.width,O=this.height,D=this.y,B=D+O,G=this.x,z=G+R,X=this.culledObjects,U=m.length;S=1/S,X.length=0;for(var V=0;V<U;++V){var N=m[V];if(!N.hasOwnProperty("width")||N.parentContainer){X.push(N);continue}var W=N.width,F=N.height,I=N.x-A*N.scrollFactorX-W*N.originX,k=N.y-L*N.scrollFactorY-F*N.originY,Y=I*g+k*E+M,H=I*x+k*P+b,K=(I+W)*g+(k+F)*E+M,j=(I+W)*x+(k+F)*P+b;K>G&&Y<z&&j>D&&H<B&&X.push(N)}return X},getWorldPoint:function(m,p,g){g===void 0&&(g=new o);var x=this.matrix.matrix,E=x[0],P=x[1],S=x[2],M=x[3],b=x[4],A=x[5],L=E*M-P*S;if(!L)return g.x=m,g.y=p,g;L=1/L;var R=M*L,O=-P*L,D=-S*L,B=E*L,G=(S*A-M*b)*L,z=(P*b-E*A)*L,X=Math.cos(this.rotation),U=Math.sin(this.rotation),V=this.zoomX,N=this.zoomY,W=this.scrollX,F=this.scrollY,I=m+(W*X-F*U)*V,k=p+(W*U+F*X)*N;return g.x=I*R+k*D+G,g.y=I*O+k*B+z,g},ignore:function(m){var p=this.id;Array.isArray(m)||(m=[m]);for(var g=0;g<m.length;g++){var x=m[g];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=p}return this},preRender:function(){this.renderList.length=0;var m=this.width,p=this.height,g=m*.5,x=p*.5,E=this.zoomX,P=this.zoomY,S=this.matrix,M=m*this.originX,b=p*this.originY,A=this.scrollX,L=this.scrollY;this.useBounds&&(A=this.clampX(A),L=this.clampY(L)),this.roundPixels&&(M=Math.round(M),b=Math.round(b)),this.scrollX=A,this.scrollY=L;var R=A+g,O=L+x;this.midPoint.set(R,O);var D=m/E,B=p/P;this.worldView.setTo(R-D/2,O-B/2,D,B),S.applyITRS(this.x+M,this.y+b,this.rotation,E,P),S.translate(-M,-b)},clampX:function(m){var p=this._bounds,g=this.displayWidth,x=p.x+(g-this.width)/2,E=Math.max(x,x+p.width-g);return m<x?m=x:m>E&&(m=E),m},clampY:function(m){var p=this._bounds,g=this.displayHeight,x=p.y+(g-this.height)/2,E=Math.max(x,x+p.height-g);return m<x?m=x:m>E&&(m=E),m},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(m){return m===void 0&&(m=0),this.rotation=d(m),this},setBackgroundColor:function(m){return m===void 0&&(m="rgba(0,0,0,0)"),this.backgroundColor=v(m),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(m,p,g,x,E){return E===void 0&&(E=!1),this._bounds.setTo(m,p,g,x),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(m){m===void 0&&(m=new r);var p=this._bounds;return m.setTo(p.x,p.y,p.width,p.height),m},setName:function(m){return m===void 0&&(m=""),this.name=m,this},setPosition:function(m,p){return p===void 0&&(p=m),this.x=m,this.y=p,this},setRotation:function(m){return m===void 0&&(m=0),this.rotation=m,this},setRoundPixels:function(m){return this.roundPixels=m,this},setScene:function(m,p){p===void 0&&(p=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=m,this.isSceneCamera=p;var g=m.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(m,p){return p===void 0&&(p=m),this.scrollX=m,this.scrollY=p,this},setSize:function(m,p){return p===void 0&&(p=m),this.width=m,this.height=p,this},setViewport:function(m,p,g,x){return this.x=m,this.y=p,this.width=g,this.height=x,this},setZoom:function(m,p){return m===void 0&&(m=1),p===void 0&&(p=m),m===0&&(m=.001),p===0&&(p=.001),this.zoomX=m,this.zoomY=p,this},setMask:function(m,p){return p===void 0&&(p=!0),this.mask=m,this._maskCamera=p?this.cameraManager.default:this,this},clearMask:function(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var m={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(m.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),m},update:function(){},setIsSceneCamera:function(m){return this.isSceneCamera=m,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var m=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,p=this.sceneManager;m&&!this._customViewport?p.customViewports++:!m&&this._customViewport&&p.customViewports--,this.dirty=!0,this._customViewport=m}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(m){this._x=m,this.updateSystem()}},y:{get:function(){return this._y},set:function(m){this._y=m,this.updateSystem()}},width:{get:function(){return this._width},set:function(m){this._width=m,this.updateSystem()}},height:{get:function(){return this._height},set:function(m){this._height=m,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(m){m!==this._scrollX&&(this._scrollX=m,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(m){m!==this._scrollY&&(this._scrollY=m,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(m){this._zoomX=m,this._zoomY=m,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(m){this._zoomX=m,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(m){this._zoomY=m,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});a.exports=c},47751:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(51052),y=e(79993),d=e(82897),l=e(56694),h=e(64937),r=e(53030),n=e(89787),v=e(42798),o=e(74118),c=e(93736),m=new l({Extends:u,Mixins:[h.PostPipeline],initialize:function(g,x,E,P){u.call(this,g,x,E,P),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null},setDeadzone:function(p,g){if(p===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=p,this.deadzone.height=g):this.deadzone=new o(0,0,p,g),this._follow){var x=this.width/2,E=this.height/2,P=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(P,S),this.scrollX=P-x,this.scrollY=S-E}y(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(p,g,x,E,P,S){return this.fadeEffect.start(!1,p,g,x,E,!0,P,S)},fadeOut:function(p,g,x,E,P,S){return this.fadeEffect.start(!0,p,g,x,E,!0,P,S)},fadeFrom:function(p,g,x,E,P,S,M){return this.fadeEffect.start(!1,p,g,x,E,P,S,M)},fade:function(p,g,x,E,P,S,M){return this.fadeEffect.start(!0,p,g,x,E,P,S,M)},flash:function(p,g,x,E,P,S,M){return this.flashEffect.start(p,g,x,E,P,S,M)},shake:function(p,g,x,E,P){return this.shakeEffect.start(p,g,x,E,P)},pan:function(p,g,x,E,P,S,M){return this.panEffect.start(p,g,x,E,P,S,M)},rotateTo:function(p,g,x,E,P,S,M){return this.rotateToEffect.start(p,g,x,E,P,S,M)},zoomTo:function(p,g,x,E,P,S){return this.zoomEffect.start(p,g,x,E,P,S)},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,x=p*.5,E=g*.5,P=this.zoom,S=this.matrix,M=p*this.originX,b=g*this.originY,A=this._follow,L=this.deadzone,R=this.scrollX,O=this.scrollY;L&&y(L,this.midPoint.x,this.midPoint.y);var D=!1;if(this.roundPixels&&(M=Math.floor(M),b=Math.floor(b)),A&&!this.panEffect.isRunning){var B=this.lerp,G=A.x-this.followOffset.x,z=A.y-this.followOffset.y;this.roundPixels&&(G=Math.floor(G),z=Math.floor(z)),L?(G<L.x?R=v(R,R-(L.x-G),B.x):G>L.right&&(R=v(R,R+(G-L.right),B.x)),z<L.y?O=v(O,O-(L.y-z),B.y):z>L.bottom&&(O=v(O,O+(z-L.bottom),B.y))):(R=v(R,G-M,B.x),O=v(O,z-b,B.y)),D=!0}this.useBounds&&(R=this.clampX(R),O=this.clampY(O)),this.roundPixels&&(R=Math.floor(R),O=Math.floor(O)),this.scrollX=R,this.scrollY=O;var X=R+x,U=O+E;this.midPoint.set(X,U);var V=p/P,N=g/P,W=X-V/2,F=U-N/2;this.roundPixels&&(W=Math.floor(W),F=Math.floor(F)),this.worldView.setTo(W,F,V,N),S.applyITRS(Math.floor(this.x+M),Math.floor(this.y+b),this.rotation,P,P),S.translate(-M,-b),this.shakeEffect.preRender(),D&&this.emit(n.FOLLOW_UPDATE,this,A)},setLerp:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),this.lerp.set(p,g),this},setFollowOffset:function(p,g){return p===void 0&&(p=0),g===void 0&&(g=0),this.followOffset.set(p,g),this},startFollow:function(p,g,x,E,P,S){g===void 0&&(g=!1),x===void 0&&(x=1),E===void 0&&(E=x),P===void 0&&(P=0),S===void 0&&(S=P),this._follow=p,this.roundPixels=g,x=d(x,0,1),E=d(E,0,1),this.lerp.set(x,E),this.followOffset.set(P,S);var M=this.width/2,b=this.height/2,A=p.x-P,L=p.y-S;return this.midPoint.set(A,L),this.scrollX=A-M,this.scrollY=L-b,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(p,g){this.visible&&(this.rotateToEffect.update(p,g),this.panEffect.update(p,g),this.zoomEffect.update(p,g),this.shakeEffect.update(p,g),this.flashEffect.update(p,g),this.fadeEffect.update(p,g))},destroy:function(){this.resetFX(),u.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});a.exports=m},62382:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47751),y=e(56694),d=e(72632),l=e(91963),h=e(94287),r=e(40444),n=e(7599),v=new y({initialize:function(c){this.scene=c,this.systems=c.sys,this.roundPixels=c.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,c.sys.events.once(n.BOOT,this.boot,this),c.sys.events.on(n.START,this.start,this)},boot:function(){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new u(0,0,o.scale.width,o.scale.height).setScene(this.scene),o.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0]}var c=this.systems.events;c.on(n.UPDATE,this.update,this),c.once(n.SHUTDOWN,this.shutdown,this)},add:function(o,c,m,p,g,x){o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),g===void 0&&(g=!1),x===void 0&&(x="");var E=new u(o,c,m,p);return E.setName(x),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),g&&(this.main=E),E},addExisting:function(o,c){c===void 0&&(c=!1);var m=this.cameras.indexOf(o);return m===-1?(o.id=this.getNextID(),o.setRoundPixels(this.roundPixels),this.cameras.push(o),c&&(this.main=o),o):null},getNextID:function(){for(var o=this.cameras,c=1,m=0;m<32;m++){for(var p=!1,g=0;g<o.length;g++){var x=o[g];if(x&&x.id===c){p=!0;continue}}if(p)c=c<<1;else return c}return 0},getTotal:function(o){o===void 0&&(o=!1);for(var c=0,m=this.cameras,p=0;p<m.length;p++){var g=m[p];(!o||o&&g.visible)&&c++}return c},fromJSON:function(o){Array.isArray(o)||(o=[o]);for(var c=this.scene.sys.scale.width,m=this.scene.sys.scale.height,p=0;p<o.length;p++){var g=o[p],x=d(g,"x",0),E=d(g,"y",0),P=d(g,"width",c),S=d(g,"height",m),M=this.add(x,E,P,S);M.name=d(g,"name",""),M.zoom=d(g,"zoom",1),M.rotation=d(g,"rotation",0),M.scrollX=d(g,"scrollX",0),M.scrollY=d(g,"scrollY",0),M.roundPixels=d(g,"roundPixels",!1),M.visible=d(g,"visible",!0);var b=d(g,"backgroundColor",!1);b&&M.setBackgroundColor(b);var A=d(g,"bounds",null);if(A){var L=d(A,"x",0),R=d(A,"y",0),O=d(A,"width",c),D=d(A,"height",m);M.setBounds(L,R,O,D)}}return this},getCamera:function(o){for(var c=this.cameras,m=0;m<c.length;m++)if(c[m].name===o)return c[m];return null},getCamerasBelowPointer:function(o){for(var c=this.cameras,m=o.x,p=o.y,g=[],x=0;x<c.length;x++){var E=c[x];E.visible&&E.inputEnabled&&h(E,m,p)&&g.unshift(E)}return g},remove:function(o,c){c===void 0&&(c=!0),Array.isArray(o)||(o=[o]);for(var m=0,p=this.cameras,g=0;g<o.length;g++){var x=p.indexOf(o[g]);x!==-1&&(c?p[x].destroy():p[x].renderList=[],p.splice(x,1),m++)}return!this.main&&p[0]&&(this.main=p[0]),m},render:function(o,c){for(var m=this.scene,p=this.cameras,g=0;g<p.length;g++){var x=p[g];if(x.visible&&x.alpha>0){x.preRender();var E=this.getVisibleChildren(c.getChildren(),x);o.render(m,E,x)}}},getVisibleChildren:function(o,c){return o.filter(function(m){return m.willRender(c)})},resetAll:function(){for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(o,c){for(var m=0;m<this.cameras.length;m++)this.cameras[m].update(o,c)},onResize:function(o,c,m,p,g){for(var x=0;x<this.cameras.length;x++){var E=this.cameras[x];E._x===0&&E._y===0&&E._width===p&&E._height===g&&E.setSize(c.width,c.height)}},resize:function(o,c){for(var m=0;m<this.cameras.length;m++)this.cameras[m].setSize(o,c)},shutdown:function(){this.main=void 0;for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();this.cameras=[];var c=this.systems.events;c.off(n.UPDATE,this.update,this),c.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(n.START,this.start,this),this.systems.events.off(n.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});l.register("CameraManager",v,"cameras"),a.exports=v},92522:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(89787),l=new y({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,n,v,o,c,m,p){if(h===void 0&&(h=!0),r===void 0&&(r=1e3),n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=!1),m===void 0&&(m=null),p===void 0&&(p=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=h,this.progress=0,this.red=n,this.green=v,this.blue=o,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=p;var g=h?d.FADE_OUT_START:d.FADE_IN_START;return this.camera.emit(g,this.camera,this,r,n,v,o),this.camera},update:function(h,r){!this.isRunning||(this._elapsed+=r,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,v=this.red/255,o=this.green/255,c=this.blue/255;return h.drawFillRect(n.x,n.y,n.width,n.height,r(c,o,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?d.FADE_OUT_COMPLETE:d.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});a.exports=l},22151:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(89787),l=new y({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,r,n,v,o,c,m){return h===void 0&&(h=250),r===void 0&&(r=255),n===void 0&&(n=255),v===void 0&&(v=255),o===void 0&&(o=!1),c===void 0&&(c=null),m===void 0&&(m=this.camera.scene),!o&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=r,this.green=n,this.blue=v,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=m,this.camera.emit(d.FLASH_START,this.camera,this,h,r,n,v),this.camera)},update:function(h,r){!this.isRunning||(this._elapsed+=r,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning)return!1;var n=this.camera,v=this.red/255,o=this.green/255,c=this.blue/255;return h.drawFillRect(n.x,n.y,n.width,n.height,r(c,o,v,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});a.exports=l},37551:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(35060),l=e(89787),h=e(93736),r=new y({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,v,o,c,m,p,g){o===void 0&&(o=1e3),c===void 0&&(c=d.Linear),m===void 0&&(m=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene);var x=this.camera;return!m&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(n,v),x.getScroll(n,v,this.current),typeof c=="string"&&d.hasOwnProperty(c)?this.ease=d[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.camera.emit(l.PAN_START,this.camera,this,o,n,v)),x},update:function(n,v){if(!!this.isRunning){this._elapsed+=v;var o=u(this._elapsed/this.duration,0,1);this.progress=o;var c=this.camera;if(this._elapsed<this.duration){var m=this.ease(o);c.getScroll(this.destination.x,this.destination.y,this.current);var p=this.source.x+(this.current.x-this.source.x)*m,g=this.source.y+(this.current.y-this.source.y)*m;c.setScroll(p,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,o,p,g)}else c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,o,c.scrollX,c.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});a.exports=r},1771:(a,T,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var u=e(82897),y=e(56694),d=e(89787),l=e(35060),h=new y({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,n,v,o,c,m,p){v===void 0&&(v=1e3),o===void 0&&(o=l.Linear),c===void 0&&(c=!1),m===void 0&&(m=null),p===void 0&&(p=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var g=r;r<0?(g=-1*r,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;g=g-Math.floor(g/x)*x;var E=this.camera;if(!c&&this.isRunning)return E;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=E.rotation,this.destination=g,typeof o=="string"&&l.hasOwnProperty(o)?this.ease=l[o]:typeof o=="function"&&(this.ease=o),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=p,this.shortestPath){var P=0,S=0;this.destination>this.source?P=Math.abs(this.destination-this.source):P=Math.abs(this.destination+x)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+x)-this.destination,P<S?this.clockwise=!0:P>S&&(this.clockwise=!1)}return this.camera.emit(d.ROTATE_START,this.camera,this,v,g),E},update:function(r,n){if(!!this.isRunning){this._elapsed+=n;var v=u(this._elapsed/this.duration,0,1);this.progress=v;var o=this.camera;if(this._elapsed<this.duration){var c=this.ease(v);this.current=o.rotation;var m=0,p=360*Math.PI/180,g=this.destination,x=this.current;this.clockwise===!1&&(g=this.current,x=this.destination),g>=x?m=Math.abs(g-x):m=Math.abs(g+p)-x;var E=0;this.clockwise?E=o.rotation+m*c:E=o.rotation-m*c,o.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,v,E)}else o.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});a.exports=h},3241:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(89787),l=e(93736),h=new y({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,n,v,o,c){return r===void 0&&(r=100),n===void 0&&(n=.05),v===void 0&&(v=!1),o===void 0&&(o=null),c===void 0&&(c=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=c,this.camera.emit(d.SHAKE_START,this.camera,this,r,n),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,n){if(!!this.isRunning)if(this._elapsed+=n,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,o=this.camera.width,c=this.camera.height,m=this.camera.zoom;this._offsetX=(Math.random()*v.x*o*2-v.x*o)*m,this._offsetY=(Math.random()*v.y*c*2-v.y*c)*m,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});a.exports=h},13383:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(35060),l=e(89787),h=new y({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,n,v,o,c,m){n===void 0&&(n=1e3),v===void 0&&(v=d.Linear),o===void 0&&(o=!1),c===void 0&&(c=null),m===void 0&&(m=this.camera.scene);var p=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=p.zoom,this.destination=r,typeof v=="string"&&d.hasOwnProperty(v)?this.ease=d[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=m,this.camera.emit(l.ZOOM_START,this.camera,this,n,r)),p},update:function(r,n){!this.isRunning||(this._elapsed+=n,this.progress=u(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});a.exports=h},53030:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="cameradestroy"},85373:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeincomplete"},92057:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeinstart"},1903:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeoutcomplete"},96131:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerafadeoutstart"},85409:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="cameraflashcomplete"},25500:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="cameraflashstart"},44071:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="followupdate"},19818:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerapancomplete"},80002:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerapanstart"},87966:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postrender"},74217:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},34805:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerarotatecomplete"},30408:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerarotatestart"},49856:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerashakecomplete"},69189:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerashakestart"},67657:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerazoomcomplete"},14229:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="camerazoomstart"},89787:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(10850),d=new u({initialize:function(h){this.camera=y(h,"camera",null),this.left=y(h,"left",null),this.right=y(h,"right",null),this.up=y(h,"up",null),this.down=y(h,"down",null),this.zoomIn=y(h,"zoomIn",null),this.zoomOut=y(h,"zoomOut",null),this.zoomSpeed=y(h,"zoomSpeed",.01),this.minZoom=y(h,"minZoom",.001),this.maxZoom=y(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=y(h,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=y(h,"speed.x",0),this.speedY=y(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(!!this.active){l===void 0&&(l=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});a.exports=d},69370:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(10850),d=new u({initialize:function(h){this.camera=y(h,"camera",null),this.left=y(h,"left",null),this.right=y(h,"right",null),this.up=y(h,"up",null),this.down=y(h,"down",null),this.zoomIn=y(h,"zoomIn",null),this.zoomOut=y(h,"zoomOut",null),this.zoomSpeed=y(h,"zoomSpeed",.01),this.minZoom=y(h,"minZoom",.001),this.maxZoom=y(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=y(h,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=y(h,"acceleration.x",0),this.accelY=y(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=y(h,"drag",null);typeof n=="number"?(this.dragX=n,this.dragY=n):(this.dragX=y(h,"drag.x",0),this.dragY=y(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=y(h,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=y(h,"maxSpeed.x",0),this.maxSpeedY=y(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(!!this.active){l===void 0&&(l=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*l|0),this._speedY!==0&&(h.scrollY-=this._speedY*l|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});a.exports=d},6524:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={VERSION:"3.60.0-beta.21",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};a.exports=u},14033:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(86459),d=e(18360),l=e(77290),h=e(72632),r=e(10850),n=e(42911),v=e(72283),o=e(5923),c=e(65641),m=e(93222),p=new u({initialize:function(x){x===void 0&&(x={});var E=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],P="#ffffff",S=r(x,"scale",null);this.width=r(S,"width",1024,x),this.height=r(S,"height",768,x),this.zoom=r(S,"zoom",1,x),this.parent=r(S,"parent",void 0,x),this.scaleMode=r(S,S?"mode":"scaleMode",0,x),this.expandParent=r(S,"expandParent",!0,x),this.autoRound=r(S,"autoRound",!1,x),this.autoCenter=r(S,"autoCenter",0,x),this.resizeInterval=r(S,"resizeInterval",500,x),this.fullscreenTarget=r(S,"fullscreenTarget",null,x),this.minWidth=r(S,"minWidth",0,x),this.maxWidth=r(S,"maxWidth",0,x),this.minHeight=r(S,"minHeight",0,x),this.maxHeight=r(S,"maxHeight",0,x),this.renderType=r(x,"type",y.AUTO),this.canvas=r(x,"canvas",null),this.context=r(x,"context",null),this.canvasStyle=r(x,"canvasStyle",null),this.customEnvironment=r(x,"customEnvironment",!1),this.sceneConfig=r(x,"scene",null),this.seed=r(x,"seed",[(Date.now()*Math.random()).toString()]),o.RND=new o.RandomDataGenerator(this.seed),this.gameTitle=r(x,"title",""),this.gameURL=r(x,"url","https://phaser.io"),this.gameVersion=r(x,"version",""),this.autoFocus=r(x,"autoFocus",!0),this.stableSort=r(x,"stableSort",-1),this.stableSort===-1&&(this.stableSort=l.browser.es2019?1:0),l.features.stableSort=this.stableSort,this.domCreateContainer=r(x,"dom.createContainer",!1),this.domPointerEvents=r(x,"dom.pointerEvents","none"),this.inputKeyboard=r(x,"input.keyboard",!0),this.inputKeyboardEventTarget=r(x,"input.keyboard.target",window),this.inputKeyboardCapture=r(x,"input.keyboard.capture",[]),this.inputMouse=r(x,"input.mouse",!0),this.inputMouseEventTarget=r(x,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(x,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(x,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(x,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(x,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(x,"input.touch",l.input.touch),this.inputTouchEventTarget=r(x,"input.touch.target",null),this.inputTouchCapture=r(x,"input.touch.capture",!0),this.inputActivePointers=r(x,"input.activePointers",1),this.inputSmoothFactor=r(x,"input.smoothFactor",0),this.inputWindowEvents=r(x,"input.windowEvents",!0),this.inputGamepad=r(x,"input.gamepad",!1),this.inputGamepadEventTarget=r(x,"input.gamepad.target",window),this.disableContextMenu=r(x,"disableContextMenu",!1),this.audio=r(x,"audio",{}),this.hideBanner=r(x,"banner",null)===!1,this.hidePhaser=r(x,"banner.hidePhaser",!1),this.bannerTextColor=r(x,"banner.text",P),this.bannerBackgroundColor=r(x,"banner.background",E),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(x,"fps",null);var M=r(x,"render",null);this.pipeline=r(M,"pipeline",null,x),this.autoMobilePipeline=r(M,"autoMobilePipeline",!0,x),this.defaultPipeline=r(M,"defaultPipeline",c.MULTI_PIPELINE,x),this.antialias=r(M,"antialias",!0,x),this.antialiasGL=r(M,"antialiasGL",!0,x),this.mipmapFilter=r(M,"mipmapFilter","",x),this.desynchronized=r(M,"desynchronized",!1,x),this.roundPixels=r(M,"roundPixels",!1,x),this.pixelArt=r(M,"pixelArt",this.zoom!==1,x),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(M,"transparent",!1,x),this.clearBeforeRender=r(M,"clearBeforeRender",!0,x),this.preserveDrawingBuffer=r(M,"preserveDrawingBuffer",!1,x),this.premultipliedAlpha=r(M,"premultipliedAlpha",!0,x),this.failIfMajorPerformanceCaveat=r(M,"failIfMajorPerformanceCaveat",!1,x),this.powerPreference=r(M,"powerPreference","default",x),this.batchSize=r(M,"batchSize",4096,x),this.maxTextures=r(M,"maxTextures",-1,x),this.maxLights=r(M,"maxLights",10,x);var b=r(x,"backgroundColor",0);this.backgroundColor=m(b),this.transparent&&(this.backgroundColor=m(0),this.backgroundColor.alpha=0),this.preBoot=r(x,"callbacks.preBoot",v),this.postBoot=r(x,"callbacks.postBoot",v),this.physics=r(x,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(x,"loader.baseURL",""),this.loaderPath=r(x,"loader.path",""),this.loaderMaxParallelDownloads=r(x,"loader.maxParallelDownloads",l.os.android?6:32),this.loaderCrossOrigin=r(x,"loader.crossOrigin",void 0),this.loaderResponseType=r(x,"loader.responseType",""),this.loaderAsync=r(x,"loader.async",!0),this.loaderUser=r(x,"loader.user",""),this.loaderPassword=r(x,"loader.password",""),this.loaderTimeout=r(x,"loader.timeout",0),this.loaderWithCredentials=r(x,"loader.withCredentials",!1),this.loaderImageLoadType=r(x,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(x,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(x,"fx.glow.quality",.1),this.glowFXDistance=r(x,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=r(x,"plugins",null),L=d.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:n(A)&&(this.installGlobalPlugins=h(A,"global",[]),this.installScenePlugins=h(A,"scene",[]),Array.isArray(A.default)?L=A.default:Array.isArray(A.defaultMerge)&&(L=L.concat(A.defaultMerge)))),this.defaultPlugins=L;var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(x,"images.default",R+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(x,"images.missing",R+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(x,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=y.WEBGL:window.FORCE_CANVAS&&(this.renderType=y.CANVAS))}});a.exports=p},50150:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70616),y=e(61068),d=e(86459),l=e(90185),h=function(r){var n=r.config;if((n.customEnvironment||n.canvas)&&n.renderType===d.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!n.customEnvironment&&!n.canvas&&n.renderType!==d.HEADLESS)if(n.renderType===d.AUTO&&(n.renderType=l.webGL?d.WEBGL:d.CANVAS),n.renderType===d.WEBGL){if(!l.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(n.renderType===d.CANVAS){if(!l.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+n.renderType);n.antialias||y.disableSmoothing();var v=r.scale.baseSize,o=v.width,c=v.height;if(n.canvas?(r.canvas=n.canvas,r.canvas.width=o,r.canvas.height=c):r.canvas=y.create(r,o,c,n.renderType),n.canvasStyle&&(r.canvas.style=n.canvasStyle),n.antialias||u.setCrisp(r.canvas),n.renderType!==d.HEADLESS){var m,p;m=e(91135),p=e(11857),n.renderType===d.WEBGL?r.renderer=new p(r):(r.renderer=new m(r),r.context=r.renderer.gameContext)}};a.exports=h},77291:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86459),y=function(d){var l=d.config;if(!l.hideBanner){var h="WebGL";l.renderType===u.CANVAS?h="Canvas":l.renderType===u.HEADLESS&&(h="Headless");var r=l.audio,n=d.device.audio,v;if(n.webAudio&&!r.disableWebAudio?v="Web Audio":r.noAudio||!n.webAudio&&!n.audioData?v="No Audio":v="HTML5 Audio",d.device.browser.ie)window.console&&console.log("Phaser v"+u.VERSION+" / https://phaser.io");else{var o="",c=[o];if(Array.isArray(l.bannerBackgroundColor)){var m;l.bannerBackgroundColor.forEach(function(g){o=o.concat("%c "),c.push("background: "+g),m=g}),c[c.length-1]="color: "+l.bannerTextColor+"; background: "+m}else o=o.concat("%c "),c.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor);c.push("background: transparent"),l.gameTitle&&(o=o.concat(l.gameTitle),l.gameVersion&&(o=o.concat(" v"+l.gameVersion)),l.hidePhaser||(o=o.concat(" / ")));var p="";l.hidePhaser||(o=o.concat("Phaser v"+u.VERSION+p+" ("+h+" | "+v+")")),o=o.concat(" %c "+l.gameURL),c[0]=o,console.log.apply(console,c)}}};a.exports=y},15213:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99584),y=e(90249),d=e(43474),l=e(61068),h=e(56694),r=e(14033),n=e(85178),v=e(50150),o=e(81078),c=e(77291),m=e(77290),p=e(21546),g=e(6659),x=e(97081),E=e(69898),P=e(91963),S=e(49274),M=e(756),b=e(13553),A=e(38203),L=e(6237),R=e(26617),O=e(26493),D=e(84191),B=new h({initialize:function(z){this.config=new r(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new y(this),this.textures=new L(this),this.cache=new d(this),this.registry=new o(this,new g),this.input=new E(this,this.config),this.scene=new b(this,this.config.sceneConfig),this.device=m,this.scale=new M(this,this.config),this.sound=null,this.sound=D.create(this),this.loop=new R(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,p(this.boot.bind(this))},boot:function(){if(!P.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),n(this),c(this),u(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),O(this);var G=this.events;G.on(x.HIDDEN,this.onHidden,this),G.on(x.VISIBLE,this.onVisible,this),G.on(x.BLUR,this.onBlur,this),G.on(x.FOCUS,this.onFocus,this)},step:function(G,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(x.PRE_STEP,G,z),X.emit(x.STEP,G,z),this.scene.update(G,z),X.emit(x.POST_STEP,G,z);var U=this.renderer;U.preRender(),X.emit(x.PRE_RENDER,U,G,z),this.scene.render(U),U.postRender(),X.emit(x.POST_RENDER,U,G,z)}},headlessStep:function(G,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(x.PRE_STEP,G,z),X.emit(x.STEP,G,z),this.scene.update(G,z),X.emit(x.POST_STEP,G,z),this.scene.isProcessing=!1,X.emit(x.PRE_RENDER,null,G,z),X.emit(x.POST_RENDER,null,G,z)}},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},pause:function(){var G=this.isPaused;this.isPaused=!0,G||this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},resume:function(){var G=this.isPaused;this.isPaused=!1,G&&this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(G,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=G,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});a.exports=B},26617:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(10850),d=e(72283),l=e(27385),h=new u({initialize:function(n,v){this.game=n,this.raf=new l,this.started=!1,this.running=!1,this.minFps=y(v,"min",5),this.targetFps=y(v,"target",60),this.fpsLimit=y(v,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=d,this.forceSetTimeOut=y(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=y(v,"deltaHistory",10),this.panicMax=y(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=y(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var n=this.deltaIndex,v=this.deltaHistory,o=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=v[n],r=Math.min(r,this._min)),v[n]=r,this.deltaIndex++,this.deltaIndex>=o&&(this.deltaIndex=0);for(var c=0,m=0;m<o;m++)c+=v[m];return c/=o,c},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var n=Math.max(0,r-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta+=n,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var n=Math.max(0,r-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta=n,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,n),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var n=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+n));var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});a.exports=h},26493:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97081),y=function(d){var l,h=d.events;if(document.hidden!==void 0)l="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},l=v+"visibilitychange")})}var n=function(v){document.hidden||v.type==="pause"?h.emit(u.HIDDEN):h.emit(u.VISIBLE)};l&&document.addEventListener(l,n,!1),window.onblur=function(){h.emit(u.BLUR)},window.onfocus=function(){h.emit(u.FOCUS)},window.focus&&d.config.autoFocus&&window.focus()};a.exports=y},41651:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="blur"},5520:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},51673:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="contextlost"},25055:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},23767:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="focus"},57564:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="hidden"},38327:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},43807:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postrender"},73652:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="poststep"},780:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},13781:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prestep"},38247:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="ready"},29129:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},34994:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="step"},98704:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="visible"},97081:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(81543),y=e(61068),d=e(10850),l=function(h){var r=d(h,"data",[]),n=d(h,"canvas",null),v=d(h,"palette",u),o=d(h,"pixelWidth",1),c=d(h,"pixelHeight",o),m=d(h,"resizeCanvas",!0),p=d(h,"clearCanvas",!0),g=d(h,"preRender",null),x=d(h,"postRender",null),E=Math.floor(Math.abs(r[0].length*o)),P=Math.floor(Math.abs(r.length*c));n||(n=y.create2D(this,E,P),m=!1,p=!1),m&&(n.width=E,n.height=P);var S=n.getContext("2d",{willReadFrequently:!0});p&&S.clearRect(0,0,E,P),g&&g(n,S);for(var M=0;M<r.length;M++)for(var b=r[M],A=0;A<b.length;A++){var L=b[A];L!=="."&&L!==" "&&(S.fillStyle=v[L],S.fillRect(A*o,M*c,o,c))}return x&&x(n,S),n};a.exports=l},84106:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(34631),d=e(38517),l=e(93736),h=new u({Extends:d,initialize:function(n,v,o,c){d.call(this,"CubicBezierCurve"),Array.isArray(n)&&(c=new l(n[6],n[7]),o=new l(n[4],n[5]),v=new l(n[2],n[3]),n=new l(n[0],n[1])),this.p0=n,this.p1=v,this.p2=o,this.p3=c},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,n){n===void 0&&(n=new l);var v=this.p0,o=this.p1,c=this.p2,m=this.p3;return n.set(y(r,v.x,o.x,c.x,m.x),y(r,v.y,o.y,c.y,m.y))},draw:function(r,n){n===void 0&&(n=32);var v=this.getPoints(n);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var o=1;o<v.length;o++)r.lineTo(v[o].x,v[o].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(r){var n=r.points,v=new l(n[0],n[1]),o=new l(n[2],n[3]),c=new l(n[4],n[5]),m=new l(n[6],n[7]);return new h(v,o,c,m)},a.exports=h},38517:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(80222),d=e(74118),l=e(93736),h=new u({initialize:function(n){this.type=n,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(r,n){return n===void 0&&(n=32),r.strokePoints(this.getPoints(n))},getBounds:function(r,n){r||(r=new d),n===void 0&&(n=16);var v=this.getLength();n>v&&(n=v/2);var o=Math.max(1,Math.round(v/n));return y(this.getSpacedPoints(o),r)},getDistancePoints:function(r){var n=this.getLength(),v=Math.max(1,n/r);return this.getSpacedPoints(v)},getEndPoint:function(r){return r===void 0&&(r=new l),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],v,o=this.getPoint(0,this._tmpVec2A),c=0;n.push(0);for(var m=1;m<=r;m++)v=this.getPoint(m/r,this._tmpVec2B),c+=v.distance(o),n.push(c),o.copy(v);return this.cacheArcLengths=n,n},getPointAt:function(r,n){var v=this.getUtoTmapping(r);return this.getPoint(v,n)},getPoints:function(r,n,v){v===void 0&&(v=[]),r||(n?r=this.getLength()/n:r=this.defaultDivisions);for(var o=0;o<=r;o++)v.push(this.getPoint(o/r));return v},getRandomPoint:function(r){return r===void 0&&(r=new l),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,n,v){v===void 0&&(v=[]),r||(n?r=this.getLength()/n:r=this.defaultDivisions);for(var o=0;o<=r;o++){var c=this.getUtoTmapping(o/r,null,r);v.push(this.getPoint(c))}return v},getStartPoint:function(r){return r===void 0&&(r=new l),this.getPointAt(0,r)},getTangent:function(r,n){n===void 0&&(n=new l);var v=1e-4,o=r-v,c=r+v;return o<0&&(o=0),c>1&&(c=1),this.getPoint(o,this._tmpVec2A),this.getPoint(c,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,n){var v=this.getUtoTmapping(r);return this.getTangent(v,n)},getTFromDistance:function(r,n){return r<=0?0:this.getUtoTmapping(0,r,n)},getUtoTmapping:function(r,n,v){var o=this.getLengths(v),c=0,m=o.length,p;n?p=Math.min(n,o[m-1]):p=r*o[m-1];for(var g=0,x=m-1,E;g<=x;)if(c=Math.floor(g+(x-g)/2),E=o[c]-p,E<0)g=c+1;else if(E>0)x=c-1;else{x=c;break}if(c=x,o[c]===p)return c/(m-1);var P=o[c],S=o[c+1],M=S-P,b=(p-P)/M;return(c+b)/(m-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});a.exports=h},48835:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(38517),d=e(75606),l=e(10850),h=e(23701),r=e(93736),n=new u({Extends:y,initialize:function(o,c,m,p,g,x,E,P){if(typeof o=="object"){var S=o;o=l(S,"x",0),c=l(S,"y",0),m=l(S,"xRadius",0),p=l(S,"yRadius",m),g=l(S,"startAngle",0),x=l(S,"endAngle",360),E=l(S,"clockwise",!1),P=l(S,"rotation",0)}else p===void 0&&(p=m),g===void 0&&(g=0),x===void 0&&(x=360),E===void 0&&(E=!1),P===void 0&&(P=0);y.call(this,"EllipseCurve"),this.p0=new r(o,c),this._xRadius=m,this._yRadius=p,this._startAngle=d(g),this._endAngle=d(x),this._clockwise=E,this._rotation=d(P)},getStartPoint:function(v){return v===void 0&&(v=new r),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,o){o===void 0&&(o=new r);for(var c=Math.PI*2,m=this._endAngle-this._startAngle,p=Math.abs(m)<Number.EPSILON;m<0;)m+=c;for(;m>c;)m-=c;m<Number.EPSILON&&(p?m=0:m=c),this._clockwise&&!p&&(m===c?m=-c:m=m-c);var g=this._startAngle+v*m,x=this.p0.x+this._xRadius*Math.cos(g),E=this.p0.y+this._yRadius*Math.sin(g);if(this._rotation!==0){var P=Math.cos(this._rotation),S=Math.sin(this._rotation),M=x-this.p0.x,b=E-this.p0.y;x=M*P-b*S+this.p0.x,E=M*S+b*P+this.p0.y}return o.set(x,E)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return h(this._startAngle)},set:function(v){this._startAngle=d(v)}},endAngle:{get:function(){return h(this._endAngle)},set:function(v){this._endAngle=d(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return h(this._rotation)},set:function(v){this._rotation=d(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});n.fromJSON=function(v){return new n(v)},a.exports=n},58084:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(38517),d=e(80222),l=e(74118),h=e(93736),r=new u({Extends:y,initialize:function(v,o){y.call(this,"LineCurve"),Array.isArray(v)&&(o=new h(v[2],v[3]),v=new h(v[0],v[1])),this.p0=v,this.p1=o,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new l),d([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,v){return v===void 0&&(v=new h),n===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),v)},getPointAt:function(n,v){return this.getPoint(n,v)},getTangent:function(n,v){return v===void 0&&(v=new h),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(n,v,o){var c;if(v){var m=this.getLengths(o),p=m[m.length-1],g=Math.min(v,p);c=g/p}else c=n;return c},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(n){var v=n.points,o=new h(v[0],v[1]),c=new h(v[2],v[3]);return new r(o,c)},a.exports=r},64761:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(38517),d=e(16252),l=e(93736),h=new u({Extends:y,initialize:function(n,v,o){y.call(this,"QuadraticBezierCurve"),Array.isArray(n)&&(o=new l(n[4],n[5]),v=new l(n[2],n[3]),n=new l(n[0],n[1])),this.p0=n,this.p1=v,this.p2=o},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,n){n===void 0&&(n=new l);var v=this.p0,o=this.p1,c=this.p2;return n.set(d(r,v.x,o.x,c.x),d(r,v.y,o.y,c.y))},draw:function(r,n){n===void 0&&(n=32);var v=this.getPoints(n);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var o=1;o<v.length;o++)r.lineTo(v[o].x,v[o].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(r){var n=r.points,v=new l(n[0],n[1]),o=new l(n[2],n[3]),c=new l(n[4],n[5]);return new h(v,o,c)},a.exports=h},11956:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14976),y=e(56694),d=e(38517),l=e(93736),h=new y({Extends:d,initialize:function(n){n===void 0&&(n=[]),d.call(this,"SplineCurve"),this.points=[],this.addPoints(n)},addPoints:function(r){for(var n=0;n<r.length;n++){var v=new l;typeof r[n]=="number"?(v.x=r[n],v.y=r[n+1],n++):Array.isArray(r[n])?(v.x=r[n][0],v.y=r[n][1]):(v.x=r[n].x,v.y=r[n].y),this.points.push(v)}return this},addPoint:function(r,n){var v=new l(r,n);return this.points.push(v),v},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,n){n===void 0&&(n=new l);var v=this.points,o=(v.length-1)*r,c=Math.floor(o),m=o-c,p=v[c===0?c:c-1],g=v[c],x=v[c>v.length-2?v.length-1:c+1],E=v[c>v.length-3?v.length-1:c+2];return n.set(u(m,p.x,g.x,x.x,E.x),u(m,p.y,g.y,x.y,E.y))},toJSON:function(){for(var r=[],n=0;n<this.points.length;n++)r.push(this.points[n].x),r.push(this.points[n].y);return{type:this.type,points:r}}});h.fromJSON=function(r){return new h(r.points)},a.exports=h},73962:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(93736),d=new u({initialize:function(h,r){this.active=!1,this.p0=new y(h,r)},getPoint:function(l,h){return h===void 0&&(h=new y),h.copy(this.p0)},getPointAt:function(l,h){return this.getPoint(l,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});a.exports=d},12822:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(63120),d=e(48835),l=e(61286),h=e(58084),r=e(53639),n=e(64761),v=e(74118),o=e(11956),c=e(93736),m=e(83392),p=new u({initialize:function(x,E){x===void 0&&(x=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,E)},add:function(g){return this.curves.push(g),this},circleTo:function(g,x,E){return x===void 0&&(x=!1),this.ellipseTo(g,g,0,360,x,E)},closePath:function(){var g=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return g.equals(x)||this.curves.push(new h(x,g)),this},cubicBezierTo:function(g,x,E,P,S,M){var b=this.getEndPoint(),A,L,R;return g instanceof c?(A=g,L=x,R=E):(A=new c(E,P),L=new c(S,M),R=new c(g,x)),this.add(new y(b,A,L,R))},quadraticBezierTo:function(g,x,E,P){var S=this.getEndPoint(),M,b;return g instanceof c?(M=g,b=x):(M=new c(E,P),b=new c(g,x)),this.add(new n(S,M,b))},draw:function(g,x){for(var E=0;E<this.curves.length;E++){var P=this.curves[E];!P.active||P.draw(g,x)}return g},ellipseTo:function(g,x,E,P,S,M){var b=new d(0,0,g,x,E,P,S,M),A=this.getEndPoint(this._tmpVec2A),L=b.getStartPoint(this._tmpVec2B);return A.subtract(L),b.x=A.x,b.y=A.y,this.add(b)},fromJSON:function(g){this.curves=[],this.cacheLengths=[],this.startPoint.set(g.x,g.y),this.autoClose=g.autoClose;for(var x=0;x<g.curves.length;x++){var E=g.curves[x];switch(E.type){case"LineCurve":this.add(h.fromJSON(E));break;case"EllipseCurve":this.add(d.fromJSON(E));break;case"SplineCurve":this.add(o.fromJSON(E));break;case"CubicBezierCurve":this.add(y.fromJSON(E));break;case"QuadraticBezierCurve":this.add(n.fromJSON(E));break}}return this},getBounds:function(g,x){g===void 0&&(g=new v),x===void 0&&(x=16),g.x=Number.MAX_VALUE,g.y=Number.MAX_VALUE;for(var E=new v,P=m.MIN_SAFE_INTEGER,S=m.MIN_SAFE_INTEGER,M=0;M<this.curves.length;M++){var b=this.curves[M];!b.active||(b.getBounds(E,x),g.x=Math.min(g.x,E.x),g.y=Math.min(g.y,E.y),P=Math.max(P,E.right),S=Math.max(S,E.bottom))}return g.right=P,g.bottom=S,g},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var g=[],x=0,E=0;E<this.curves.length;E++)x+=this.curves[E].getLength(),g.push(x);return this.cacheLengths=g,g},getCurveAt:function(g){for(var x=g*this.getLength(),E=this.getCurveLengths(),P=0;P<E.length;){if(E[P]>=x)return this.curves[P];P++}return null},getEndPoint:function(g){return g===void 0&&(g=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,g):g.copy(this.startPoint),g},getLength:function(){var g=this.getCurveLengths();return g[g.length-1]},getPoint:function(g,x){x===void 0&&(x=new c);for(var E=g*this.getLength(),P=this.getCurveLengths(),S=0;S<P.length;){if(P[S]>=E){var M=P[S]-E,b=this.curves[S],A=b.getLength(),L=A===0?0:1-M/A;return b.getPointAt(L,x)}S++}return null},getPoints:function(g){g===void 0&&(g=12);for(var x=[],E,P=0;P<this.curves.length;P++){var S=this.curves[P];if(!!S.active)for(var M=S.getResolution(g),b=S.getPoints(M),A=0;A<b.length;A++){var L=b[A];E&&E.equals(L)||(x.push(L),E=L)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(g){return g===void 0&&(g=new c),this.getPoint(Math.random(),g)},getSpacedPoints:function(g){g===void 0&&(g=40);for(var x=[],E=0;E<=g;E++)x.push(this.getPoint(E/g));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(g){return g===void 0&&(g=new c),g.copy(this.startPoint)},getTangent:function(g,x){x===void 0&&(x=new c);for(var E=g*this.getLength(),P=this.getCurveLengths(),S=0;S<P.length;){if(P[S]>=E){var M=P[S]-E,b=this.curves[S],A=b.getLength(),L=A===0?0:1-M/A;return b.getTangentAt(L,x)}S++}return null},lineTo:function(g,x){g instanceof c?this._tmpVec2B.copy(g):this._tmpVec2B.set(g,x);var E=this.getEndPoint(this._tmpVec2A);return this.add(new h([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(g){return g.unshift(this.getEndPoint()),this.add(new o(g))},moveTo:function(g,x){return g instanceof c?this.add(new r(g.x,g.y)):this.add(new r(g,x))},toJSON:function(){for(var g=[],x=0;x<this.curves.length;x++)g.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:g}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(g,x){return new p(g,x)}),a.exports=p},81078:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(35026),d=new u({initialize:function(h,r){this.parent=h,this.events=r,r||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(y.DESTROY,this.destroy,this)},get:function(l){var h=this.list;if(Array.isArray(l)){for(var r=[],n=0;n<l.length;n++)r.push(h[l[n]]);return r}else return h[l]},getAll:function(){var l={};for(var h in this.list)this.list.hasOwnProperty(h)&&(l[h]=this.list[h]);return l},query:function(l){var h={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(l)&&(h[r]=this.list[r]);return h},set:function(l,h){if(this._frozen)return this;if(typeof l=="string")return this.setValue(l,h);for(var r in l)this.setValue(r,l[r]);return this},inc:function(l,h){if(this._frozen)return this;h===void 0&&(h=1);var r=this.get(l);return r===void 0&&(r=0),this.set(l,r+h),this},toggle:function(l){return this._frozen?this:(this.set(l,!this.get(l)),this)},setValue:function(l,h){if(this._frozen)return this;if(this.has(l))this.values[l]=h;else{var r=this,n=this.list,v=this.events,o=this.parent;Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return n[l]},set:function(c){if(!r._frozen){var m=n[l];n[l]=c,v.emit(y.CHANGE_DATA,o,l,c,m),v.emit(y.CHANGE_DATA_KEY+l,o,c,m)}}}),n[l]=h,v.emit(y.SET_DATA,o,l,h)}return this},each:function(l,h){for(var r=[this.parent,null,void 0],n=1;n<arguments.length;n++)r.push(arguments[n]);for(var v in this.list)r[1]=v,r[2]=this.list[v],l.apply(h,r);return this},merge:function(l,h){h===void 0&&(h=!0);for(var r in l)l.hasOwnProperty(r)&&(h||!h&&!this.has(r))&&this.setValue(r,l[r]);return this},remove:function(l){if(this._frozen)return this;if(Array.isArray(l))for(var h=0;h<l.length;h++)this.removeValue(l[h]);else return this.removeValue(l);return this},removeValue:function(l){if(this.has(l)){var h=this.list[l];delete this.list[l],delete this.values[l],this.events.emit(y.REMOVE_DATA,this.parent,l,h)}return this},pop:function(l){var h=void 0;return!this._frozen&&this.has(l)&&(h=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(y.REMOVE_DATA,this.parent,l,h)),h},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(y.CHANGE_DATA),this.events.off(y.SET_DATA),this.events.off(y.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var h in this.list)this.list[h]!==void 0&&l++;return l}}});a.exports=d},76508:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(81078),d=e(91963),l=e(7599),h=new u({Extends:y,initialize:function(n){y.call(this,n,n.sys.events),this.scene=n,this.systems=n.sys,n.sys.events.once(l.BOOT,this.boot,this),n.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){y.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});d.register("DataManagerPlugin",h,"data"),a.exports=h},73569:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="changedata"},15590:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="changedata-"},37669:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},87090:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removedata"},90142:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="setdata"},35026:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1350),y={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function d(){if(typeof importScripts=="function")return y;y.audioData=!!window.Audio,y.webAudio=!!(window.AudioContext||window.webkitAudioContext);var l=document.createElement("audio"),h=!!l.canPlayType;try{if(h){var r=function(o,c){var m=l.canPlayType("audio/"+o).replace(/^no$/,"");return Boolean(c?m||l.canPlayType("audio/"+c).replace(/^no$/,""):m)};if(y.ogg=r('ogg; codecs="vorbis"'),y.opus=r('ogg; codecs="opus"',"opus"),y.mp3=r("mpeg"),y.wav=r("wav"),y.m4a=r("x-m4a"),y.aac=r("aac"),y.flac=r("flac","x-flac"),y.webm=r('webm; codecs="vorbis"'),l.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(u.edge)y.dolby=!0;else if(u.safari&&u.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),v=parseInt(RegExp.$2,10);(n===10&&v>=11||n>10)&&(y.dolby=!0)}}}}catch{}return y}a.exports=d()},1350:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36580),y={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function d(){var l=navigator.userAgent;return/Edg\/\d+/.test(l)?(y.edge=!0,y.es2019=!0):/OPR/.test(l)?(y.opera=!0,y.es2019=!0):/Chrome\/(\d+)/.test(l)&&!u.windowsPhone?(y.chrome=!0,y.chromeVersion=parseInt(RegExp.$1,10),y.es2019=y.chromeVersion>69):/Firefox\D+(\d+)/.test(l)?(y.firefox=!0,y.firefoxVersion=parseInt(RegExp.$1,10),y.es2019=y.firefoxVersion>10):/AppleWebKit/.test(l)&&u.iOS?y.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(l)?(y.ie=!0,y.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(l)&&!u.windowsPhone?(y.safari=!0,y.safariVersion=parseInt(RegExp.$1,10),y.es2019=y.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(l)&&(y.ie=!0,y.trident=!0,y.tridentVersion=parseInt(RegExp.$1,10),y.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(l)&&(y.silk=!0),y}a.exports=d()},98581:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y={supportInverseAlpha:!1,supportNewBlendModes:!1};function d(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var o=new Image;o.onload=function(){var c=u.create2D(o,6),m=c.getContext("2d",{willReadFrequently:!0});if(m.globalCompositeOperation="multiply",m.drawImage(v,0,0),m.drawImage(o,2,0),!m.getImageData(2,0,1,1))return!1;var p=m.getImageData(2,0,1,1).data;u.remove(o),y.supportNewBlendModes=p[0]===255&&p[1]===0&&p[2]===0},o.src=r+"/wCKxvRF"+n},v.src=r+"AP804Oa6"+n,!1}function l(){var r=u.create2D(this,2),n=r.getContext("2d",{willReadFrequently:!0});n.fillStyle="rgba(10, 20, 30, 0.5)",n.fillRect(0,0,1,1);var v=n.getImageData(0,0,1,1);if(v===null)return!1;n.putImageData(v,1,0);var o=n.getImageData(1,0,1,1),c=o.data[0]===v.data[0]&&o.data[1]===v.data[1]&&o.data[2]===v.data[2]&&o.data[3]===v.data[3];return u.remove(this),c}function h(){return typeof importScripts!="function"&&document!==void 0&&(y.supportNewBlendModes=d(),y.supportInverseAlpha=l()),y}a.exports=h()},90185:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36580),y=e(1350),d=e(61068),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var n=new ArrayBuffer(4),v=new Uint8Array(n),o=new Uint32Array(n);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,o[0]===3569595041?!0:o[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,l.fileSystem=!!window.requestFileSystem;var n=!1,v=function(){if(window.WebGLRenderingContext)try{var o=d.createWebGL(this),c=o.getContext("webgl")||o.getContext("experimental-webgl"),m=d.create2D(this),p=m.getContext("2d",{willReadFrequently:!0}),g=p.createImageData(1,1);return n=g.data instanceof Uint8ClampedArray,d.remove(o),d.remove(m),!!c}catch{return!1}return!1};return l.webGL=v(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,y.firefox&&y.firefoxVersion<21&&(l.getUserMedia=!1),!u.iOS&&(y.ie||y.firefox||y.chrome)&&(l.canvasBitBltShift=!0),(y.safari||y.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=h()),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&l.littleEndian!==null&&n,l}a.exports=r()},33553:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return T;var u,y="Fullscreen",d="FullScreen",l=["request"+y,"request"+d,"webkitRequest"+y,"webkitRequest"+d,"msRequest"+y,"msRequest"+d,"mozRequest"+d,"mozRequest"+y];for(u=0;u<l.length;u++)if(document.documentElement[l[u]]){T.available=!0,T.request=l[u];break}var h=["cancel"+d,"exit"+y,"webkitCancel"+d,"webkitExit"+y,"msCancel"+d,"msExit"+y,"mozCancel"+d,"mozExit"+y];if(T.available){for(u=0;u<h.length;u++)if(document[h[u]]){T.cancel=h[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}a.exports=e()},95872:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1350),y={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function d(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(y.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(y.mspointer=!0),navigator.getGamepads&&(y.gamepads=!0),"onwheel"in window||u.ie&&"WheelEvent"in window?y.wheelEvent="wheel":"onmousewheel"in window?y.wheelEvent="mousewheel":u.firefox&&"MouseScrollEvent"in window&&(y.wheelEvent="DOMMouseScroll")),y}a.exports=d()},36580:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return T;var u=navigator.userAgent;/Windows/.test(u)?T.windows=!0:/Mac OS/.test(u)&&!/like Mac OS/.test(u)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(u)?T.android=!0:/Linux/.test(u)?T.linux=!0:/iP[ao]d|iPhone/i.test(u)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=u.toLowerCase().indexOf("iphone")!==-1,T.iPad=u.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(u)||/\bKF[A-Z][A-Z]+/.test(u)||/Silk.*Mobile Safari/.test(u)?T.kindle=!0:/CrOS/.test(u)&&(T.chromeOS=!0),(/Windows Phone/i.test(u)||/IEMobile/i.test(u))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var y=/Silk/.test(u);return(T.windows||T.macOS||T.linux&&!y||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(u)&&/Touch/i.test(u))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(u)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}a.exports=e()},53861:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1};function e(){if(typeof importScripts=="function")return T;var u=document.createElement("video"),y=!!u.canPlayType,d=/^no$/;try{y&&(u.canPlayType('video/ogg; codecs="theora"').replace(d,"")&&(T.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(d,"")&&(T.h264=!0,T.mp4=!0),u.canPlayType("video/x-m4v").replace(d,"")&&(T.m4v=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(d,"")&&(T.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(d,"")&&(T.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(d,"")&&(T.hls=!0))}catch{}return T}a.exports=e()},77290:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new Float32Array(20),d=new u({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(l){return this._matrix.set(l),this._dirty=!0,this},reset:function(){var l=this._matrix;return l.fill(0),l[0]=1,l[6]=1,l[12]=1,l[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var l=this._data;return this._dirty&&(l.set(this._matrix),l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,this._dirty=!1),l},brightness:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],h)},saturate:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l*2/3+1,n=(r-1)*-.5;return this.multiply([r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0],h)},desaturate:function(l){return l===void 0&&(l=!1),this.saturate(-1,l)},hue:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1),l=l/180*Math.PI;var r=Math.cos(l),n=Math.sin(l),v=.213,o=.715,c=.072;return this.multiply([v+r*(1-v)+n*-v,o+r*-o+n*-o,c+r*-c+n*(1-c),0,0,v+r*-v+n*.143,o+r*(1-o)+n*.14,c+r*-c+n*-.283,0,0,v+r*-v+n*-(1-v),o+r*-o+n*o,c+r*(1-c)+n*c,0,0,0,0,0,1,0],h)},grayscale:function(l,h){return l===void 0&&(l=1),h===void 0&&(h=!1),this.saturate(-l,h)},blackWhite:function(l){return l===void 0&&(l=!1),this.multiply(d.BLACK_WHITE,l)},contrast:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l+1,n=-.5*(r-1);return this.multiply([r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0],h)},negative:function(l){return l===void 0&&(l=!1),this.multiply(d.NEGATIVE,l)},desaturateLuminance:function(l){return l===void 0&&(l=!1),this.multiply(d.DESATURATE_LUMINANCE,l)},sepia:function(l){return l===void 0&&(l=!1),this.multiply(d.SEPIA,l)},night:function(l,h){return l===void 0&&(l=.1),h===void 0&&(h=!1),this.multiply([l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0],h)},lsd:function(l){return l===void 0&&(l=!1),this.multiply(d.LSD,l)},brown:function(l){return l===void 0&&(l=!1),this.multiply(d.BROWN,l)},vintagePinhole:function(l){return l===void 0&&(l=!1),this.multiply(d.VINTAGE,l)},kodachrome:function(l){return l===void 0&&(l=!1),this.multiply(d.KODACHROME,l)},technicolor:function(l){return l===void 0&&(l=!1),this.multiply(d.TECHNICOLOR,l)},polaroid:function(l){return l===void 0&&(l=!1),this.multiply(d.POLAROID,l)},shiftToBGR:function(l){return l===void 0&&(l=!1),this.multiply(d.SHIFT_BGR,l)},multiply:function(l,h){h===void 0&&(h=!1),h||this.reset();var r=this._matrix,n=y;return n.set(r),r.set([n[0]*l[0]+n[1]*l[5]+n[2]*l[10]+n[3]*l[15],n[0]*l[1]+n[1]*l[6]+n[2]*l[11]+n[3]*l[16],n[0]*l[2]+n[1]*l[7]+n[2]*l[12]+n[3]*l[17],n[0]*l[3]+n[1]*l[8]+n[2]*l[13]+n[3]*l[18],n[0]*l[4]+n[1]*l[9]+n[2]*l[14]+n[3]*l[19]+n[4],n[5]*l[0]+n[6]*l[5]+n[7]*l[10]+n[8]*l[15],n[5]*l[1]+n[6]*l[6]+n[7]*l[11]+n[8]*l[16],n[5]*l[2]+n[6]*l[7]+n[7]*l[12]+n[8]*l[17],n[5]*l[3]+n[6]*l[8]+n[7]*l[13]+n[8]*l[18],n[5]*l[4]+n[6]*l[9]+n[7]*l[14]+n[8]*l[19]+n[9],n[10]*l[0]+n[11]*l[5]+n[12]*l[10]+n[13]*l[15],n[10]*l[1]+n[11]*l[6]+n[12]*l[11]+n[13]*l[16],n[10]*l[2]+n[11]*l[7]+n[12]*l[12]+n[13]*l[17],n[10]*l[3]+n[11]*l[8]+n[12]*l[13]+n[13]*l[18],n[10]*l[4]+n[11]*l[9]+n[12]*l[14]+n[13]*l[19]+n[14],n[15]*l[0]+n[16]*l[5]+n[17]*l[10]+n[18]*l[15],n[15]*l[1]+n[16]*l[6]+n[17]*l[11]+n[18]*l[16],n[15]*l[2]+n[16]*l[7]+n[17]*l[12]+n[18]*l[17],n[15]*l[3]+n[16]*l[8]+n[17]*l[13]+n[18]*l[18],n[15]*l[4]+n[16]*l[9]+n[17]*l[14]+n[18]*l[19]+n[19]]),this._dirty=!0,this}});d.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],d.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],d.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],d.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],d.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],d.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],d.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],d.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],d.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],d.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],d.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a.exports=d},39298:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72283),d=new u({initialize:function(h,r,n){this._rgb=[0,0,0],this.onChangeCallback=y,this.dirty=!1,this.set(h,r,n)},set:function(l,h,r){return l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=0),this._rgb=[l,h,r],this.onChange(),this},equals:function(l,h,r){var n=this._rgb;return n[0]===l&&n[1]===h&&n[2]===r},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});a.exports=d},84093:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};a.exports=T},32058:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(59994),d=e(73174),l=e(28417),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)+v),d(r,u(n)+o),r};a.exports=h},85535:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(40163),d=e(73174),l=e(74465),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)-v),d(r,u(n)+o),r};a.exports=h},9605:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(70271),d=e(73174),l=e(19298),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)+v),d(r,u(n)+o),r};a.exports=h},22529:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(21843),y=e(59994),d=e(29568),l=function(h,r,n,v){return n===void 0&&(n=0),v===void 0&&(v=0),u(h,y(r)+n,d(r)+v),h};a.exports=l},5739:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),y=e(40163),d=e(81711),l=e(74465),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)-v),d(r,u(n)+o),r};a.exports=h},40327:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),y=[];y[u.BOTTOM_CENTER]=e(32058),y[u.BOTTOM_LEFT]=e(85535),y[u.BOTTOM_RIGHT]=e(9605),y[u.CENTER]=e(22529),y[u.LEFT_CENTER]=e(5739),y[u.RIGHT_CENTER]=e(27683),y[u.TOP_CENTER]=e(96439),y[u.TOP_LEFT]=e(81447),y[u.TOP_RIGHT]=e(47888),y[u.LEFT_BOTTOM]=y[u.BOTTOM_LEFT],y[u.LEFT_TOP]=y[u.TOP_LEFT],y[u.RIGHT_BOTTOM]=y[u.BOTTOM_RIGHT],y[u.RIGHT_TOP]=y[u.TOP_RIGHT];var d=function(l,h,r,n,v){return y[r](l,h,n,v)};a.exports=d},27683:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),y=e(70271),d=e(81711),l=e(19298),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)+v),d(r,u(n)+o),r};a.exports=h},96439:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59994),y=e(47196),d=e(28417),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,u(n)+v),l(r,y(n)-o),r};a.exports=h},81447:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40163),y=e(47196),d=e(74465),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,u(n)-v),l(r,y(n)-o),r};a.exports=h},47888:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70271),y=e(47196),d=e(19298),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,u(n)+v),l(r,y(n)-o),r};a.exports=h},46997:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),y=e(98611),d={In:e(46997),To:e(86639)};d=y(!1,d,u),a.exports=d},27118:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(59994),d=e(28417),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,y(n)+v),l(r,u(n)+o),r};a.exports=h},84469:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(40163),d=e(74465),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,y(n)-v),l(r,u(n)+o),r};a.exports=h},51577:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(70271),d=e(19298),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,y(n)+v),l(r,u(n)+o),r};a.exports=h},90271:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(40163),d=e(73174),l=e(19298),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)-v),d(r,u(n)+o),r};a.exports=h},30466:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),y=e(40163),d=e(81711),l=e(19298),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)-v),d(r,u(n)+o),r};a.exports=h},50087:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40163),y=e(47196),d=e(19298),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,u(n)-v),l(r,y(n)-o),r};a.exports=h},82590:(a,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),y=[];y[u.BOTTOM_CENTER]=e(27118),y[u.BOTTOM_LEFT]=e(84469),y[u.BOTTOM_RIGHT]=e(51577),y[u.LEFT_BOTTOM]=e(90271),y[u.LEFT_CENTER]=e(30466),y[u.LEFT_TOP]=e(50087),y[u.RIGHT_BOTTOM]=e(13555),y[u.RIGHT_CENTER]=e(99049),y[u.RIGHT_TOP]=e(67788),y[u.TOP_CENTER]=e(78170),y[u.TOP_LEFT]=e(54145),y[u.TOP_RIGHT]=e(75548);var d=function(l,h,r,n,v){return y[r](l,h,n,v)};a.exports=d},13555:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(70271),d=e(73174),l=e(74465),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)+v),d(r,u(n)+o),r};a.exports=h},99049:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),y=e(70271),d=e(81711),l=e(74465),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,y(n)+v),d(r,u(n)+o),r};a.exports=h},67788:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70271),y=e(47196),d=e(74465),l=e(84349),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),d(r,u(n)+v),l(r,y(n)-o),r};a.exports=h},78170:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59994),y=e(47196),d=e(73174),l=e(28417),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,u(n)+v),d(r,y(n)-o),r};a.exports=h},54145:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40163),y=e(47196),d=e(73174),l=e(74465),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,u(n)-v),d(r,y(n)-o),r};a.exports=h},75548:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70271),y=e(47196),d=e(73174),l=e(19298),h=function(r,n,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),l(r,u(n)+v),d(r,y(n)-o),r};a.exports=h},86639:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28417),y=e(81711),d=function(l,h,r){return u(l,h),y(l,r)};a.exports=d},97328:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y+e.height-e.height*e.originY};a.exports=T},7126:(a,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),y=e(40163),d=e(70271),l=e(47196),h=function(r,n){n===void 0&&(n={});var v=y(r),o=l(r);return n.x=v,n.y=o,n.width=d(r)-v,n.height=u(r)-o,n};a.exports=h},59994:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX+e.width*.5};a.exports=T},29568:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY+e.height*.5};a.exports=T},40163:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX};a.exports=T},52088:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.originX};a.exports=T},23379:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height*e.originY};a.exports=T},70271:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x+e.width-e.width*e.originX};a.exports=T},47196:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY};a.exports=T},73174:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.y=u-e.height+e.height*e.originY,e};a.exports=T},28417:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.width*e.originX;return e.x=u+y-e.width*.5,e};a.exports=T},81711:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.height*e.originY;return e.y=u+y-e.height*.5,e};a.exports=T},74465:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x=u+e.width*e.originX,e};a.exports=T},19298:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x=u-e.width+e.width*e.originX,e};a.exports=T},84349:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.y=u+e.height*e.originY,e};a.exports=T},15252:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCrisp:function(e){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(y){e.style["image-rendering"]=y}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};a.exports=T},61068:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86459),y=e(8213),d=[],l=!1,h=function(){var r=function(E,P,S,M,b){P===void 0&&(P=1),S===void 0&&(S=1),M===void 0&&(M=u.CANVAS),b===void 0&&(b=!1);var A,L=o(M);return L===null?(L={parent:E,canvas:document.createElement("canvas"),type:M},M===u.CANVAS&&d.push(L),A=L.canvas):(L.parent=E,A=L.canvas),b&&(L.parent=A),A.width=P,A.height=S,l&&M===u.CANVAS&&y.disable(A.getContext("2d",{willReadFrequently:!1})),A},n=function(E,P,S){return r(E,P,S,u.CANVAS)},v=function(E,P,S){return r(E,P,S,u.WEBGL)},o=function(E){if(E===void 0&&(E=u.CANVAS),E===u.WEBGL)return null;for(var P=0;P<d.length;P++){var S=d[P];if(!S.parent&&S.type===E)return S}return null},c=function(E){var P=E instanceof HTMLCanvasElement;d.forEach(function(S){(P&&S.canvas===E||!P&&S.parent===E)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},m=function(){var E=0;return d.forEach(function(P){P.parent&&E++}),E},p=function(){return d.length-m()},g=function(){l=!0},x=function(){l=!1};return{create2D:n,create:r,createWebGL:v,disableSmoothing:g,enableSmoothing:x,first:o,free:p,pool:d,remove:c,total:m}};a.exports=h()},8213:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="",e=function(){var u=function(h){for(var r=["i","webkitI","msI","mozI","oI"],n=0;n<r.length;n++){var v=r[n]+"mageSmoothingEnabled";if(v in h)return v}return null},y=function(h){return T===""&&(T=u(h)),T&&(h[T]=!0),h},d=function(h){return T===""&&(T=u(h)),T&&(h[T]=!1),h},l=function(h){return T!==null?h[T]:null};return{disable:d,enable:y,getPrefix:u,isEnabled:l}};a.exports=e()},59271:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u="none"),e.style.msTouchAction=u,e.style["ms-touch-action"]=u,e.style["touch-action"]=u,e};a.exports=T},36505:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u="none");var y=["-webkit-","-khtml-","-moz-","-ms-",""];return y.forEach(function(d){e.style[d+"user-select"]=u}),e.style["-webkit-touch-callout"]=u,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};a.exports=T},23514:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(22946),d=e(5657),l=e(24650),h=e(68033),r=new u({initialize:function(v,o,c,m){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,o,c,m)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,v,o,c,m){return c===void 0&&(c=255),m===void 0&&(m=!0),this._locked=!0,this.red=n,this.green=v,this.blue=o,this.alpha=c,this._locked=!1,this.update(m)},setGLTo:function(n,v,o,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=n,this.greenGL=v,this.blueGL=o,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,v,o){return l(n,v,o,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var v=this.r,o=this.g,c=this.b,m=this.a;return this._color=y(v,o,c),this._color32=d(v,o,c,m),this._rgba="rgba("+v+","+o+","+c+","+m/255+")",n&&h(v,o,c,this),this},updateHSV:function(){var n=this.r,v=this.g,o=this.b;return h(n,v,o,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,v){n===void 0&&(n=0),v===void 0&&(v=255);var o=Math.floor(n+Math.random()*(v-n)),c=Math.floor(n+Math.random()*(v-n)),m=Math.floor(n+Math.random()*(v-n));return this.setTo(o,c,m)},randomGray:function(n,v){n===void 0&&(n=0),v===void 0&&(v=255);var o=Math.floor(n+Math.random()*(v-n));return this.setTo(o,o,o)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var v=this.r,o=this.g,c=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(n/100)))),o=Math.max(0,Math.min(255,o-Math.round(255*-(n/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(n/100)))),this.setTo(v,o,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,l(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,l(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,l(this._h,this._s,n,this)}}});a.exports=r},30245:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22946),y=function(d){d===void 0&&(d=1024);var l=[],h=255,r,n=255,v=0,o=0;for(r=0;r<=h;r++)l.push({r:n,g:r,b:o,color:u(n,r,o)});for(v=255,r=h;r>=0;r--)l.push({r,g:v,b:o,color:u(r,v,o)});for(n=0,r=0;r<=h;r++,v--)l.push({r:n,g:v,b:r,color:u(n,v,r)});for(v=0,o=255,r=0;r<=h;r++,o--,n++)l.push({r:n,g:v,b:o,color:u(n,v,o)});if(d===1024)return l;var c=[],m=0,p=1024/d;for(r=0;r<d;r++)c.push(l[Math.floor(m)]),m+=p;return c};a.exports=y},86672:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(u.a=e>>>24),u};a.exports=T},25409:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=e.toString(16);return u.length===1?"0"+u:u};a.exports=T},22946:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e<<16|u<<8|y};a.exports=T},5657:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return d<<24|e<<16|u<<8|y};a.exports=T},74777:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),y=e(59998),d=function(l,h,r){var n=r,v=r,o=r;if(h!==0){var c=r<.5?r*(1+h):r+h-r*h,m=2*r-c;n=y(m,c,l+1/3),v=y(m,c,l),o=y(m,c,l-1/3)}var p=new u;return p.setGLTo(n,v,o,1)};a.exports=d},89263:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(24650),y=function(d,l){d===void 0&&(d=1),l===void 0&&(l=1);for(var h=[],r=0;r<=359;r++)h.push(u(r/359,d,l));return h};a.exports=y},24650:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22946);function y(l,h,r,n){var v=(l+h*6)%6,o=Math.min(v,4-v,1);return Math.round(255*(n-n*r*Math.max(0,o)))}var d=function(l,h,r,n){h===void 0&&(h=1),r===void 0&&(r=1);var v=y(5,l,h,r),o=y(3,l,h,r),c=y(1,l,h,r);return n?n.setTo?n.setTo(v,o,c,n.alpha,!0):(n.r=v,n.g=o,n.b=c,n.color=u(v,o,c),n):{r:v,g:o,b:c,color:u(v,o,c)}};a.exports=d},91487:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),y=function(d){var l=new u;d=d.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,c,m,p){return c+c+m+m+p+p});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);if(h){var r=parseInt(h[1],16),n=parseInt(h[2],16),v=parseInt(h[3],16);l.setTo(r,n,v)}return l};a.exports=y},59998:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?e+(u-e)*6*y:y<.5?u:y<.6666666666666666?e+(u-e)*(.6666666666666666-y)*6:e};a.exports=T},74853:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),y=e(15978),d=function(l){var h=y(l);return new u(h.r,h.g,h.b,h.a)};a.exports=d},15978:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};a.exports=T},53756:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(42798),y=function(h,r,n,v,o,c,m,p){m===void 0&&(m=100),p===void 0&&(p=0);var g=p/m;return{r:u(h,v,g),g:u(r,o,g),b:u(n,c,g)}},d=function(h,r,n,v){return n===void 0&&(n=100),v===void 0&&(v=0),y(h.r,h.g,h.b,r.r,r.g,r.b,n,v)},l=function(h,r,n,v,o,c){return o===void 0&&(o=100),c===void 0&&(c=0),y(h.r,h.g,h.b,r,n,v,o,c)};a.exports={RGBWithRGB:y,ColorWithRGB:l,ColorWithColor:d}},73904:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),y=function(d){return new u(d.r,d.g,d.b,d.a)};a.exports=y},26841:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),y=function(d){var l=new u,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(d.toLowerCase());if(h){var r=parseInt(h[1],10),n=parseInt(h[2],10),v=parseInt(h[3],10),o=h[4]!==void 0?parseFloat(h[4]):1;l.setTo(r,n,v,o*255)}return l};a.exports=y},68033:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){d===void 0&&(d={h:0,s:0,v:0}),e/=255,u/=255,y/=255;var l=Math.min(e,u,y),h=Math.max(e,u,y),r=h-l,n=0,v=h===0?0:r/h,o=h;return h!==l&&(h===e?n=(u-y)/r+(u<y?6:0):h===u?n=(y-e)/r+2:h===y&&(n=(e-u)/r+4),n/=6),d.hasOwnProperty("_h")?(d._h=n,d._s=v,d._v=o):(d.h=n,d.s=v,d.v=o),d};a.exports=T},4880:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25409),y=function(d,l,h,r,n){return r===void 0&&(r=255),n===void 0&&(n="#"),n==="#"?"#"+((1<<24)+(d<<16)+(l<<8)+h).toString(16).slice(1,7):"0x"+u(r)+u(d)+u(l)+u(h)};a.exports=y},37243:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),y=e(27119),d=function(l,h){return l===void 0&&(l=0),h===void 0&&(h=255),new y(u(l,h),u(l,h),u(l,h))};a.exports=d},93222:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(91487),y=e(74853),d=e(73904),l=e(26841),h=function(r){var n=typeof r;switch(n){case"string":return r.substr(0,3).toLowerCase()==="rgb"?l(r):u(r);case"number":return y(r);case"object":return d(r)}};a.exports=h},95509:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119);u.ColorSpectrum=e(30245),u.ColorToRGBA=e(86672),u.ComponentToHex=e(25409),u.GetColor=e(22946),u.GetColor32=e(5657),u.HexStringToColor=e(91487),u.HSLToColor=e(74777),u.HSVColorWheel=e(89263),u.HSVToRGB=e(24650),u.HueToComponent=e(59998),u.IntegerToColor=e(74853),u.IntegerToRGB=e(15978),u.Interpolate=e(53756),u.ObjectToColor=e(73904),u.RandomRGB=e(37243),u.RGBStringToColor=e(26841),u.RGBToHSV=e(68033),u.RGBToString=e(4880),u.ValueToColor=e(93222),a.exports=u},24816:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(61286),d=new u({initialize:function(h,r,n,v,o,c){r||(r=h.sys.make.image({x:n,y:v,key:o,frame:c,add:!1})),this.bitmapMask=r,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,h,r){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,r)},postRenderWebGL:function(l,h,r){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});y.register("bitmapMask",function(l,h,r,n,v){return new d(this.scene,l,h,r,n,v)}),a.exports=d},63037:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(d){return this.geometryMask=d,this},setInvertAlpha:function(d){return d===void 0&&(d=!0),this.invertAlpha=d,this},preRenderWebGL:function(d,l,h){var r=d.gl;d.flush(),d.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),d.maskCount=0),d.currentCameraMask.mask!==this&&(d.currentMask.mask=this),d.maskStack.push({mask:this,camera:h}),this.applyStencil(d,h,!0),d.maskCount++},applyStencil:function(d,l,h){var r=d.gl,n=this.geometryMask,v=d.maskCount,o=255;r.colorMask(!1,!1,!1,!1),h?(r.stencilFunc(r.EQUAL,v,o),r.stencilOp(r.KEEP,r.KEEP,r.INCR),v++):(r.stencilFunc(r.EQUAL,v+1,o),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=v,n.renderWebGL(d,n,l),d.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,v,o):r.stencilFunc(r.EQUAL,v,o)},postRenderWebGL:function(d){var l=d.gl;d.maskStack.pop(),d.maskCount--,d.flush();var h=d.currentMask;if(d.maskStack.length===0)h.mask=null,l.disable(l.STENCIL_TEST);else{var r=d.maskStack[d.maskStack.length-1];r.mask.applyStencil(d,r.camera,!1),d.currentCameraMask.mask!==r.mask?(h.mask=r.mask,h.camera=r.camera):h.mask=null}},preRenderCanvas:function(d,l,h){var r=this.geometryMask;d.currentContext.save(),r.renderCanvas(d,r,h,null,null,!0),d.currentContext.clip()},postRenderCanvas:function(d){d.currentContext.restore()},destroy:function(){this.geometryMask=null}});a.exports=y},93310:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r,n){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),n===void 0&&(n=null),this.key=l,this.fragmentSrc=h,this.vertexSrc=r,this.uniforms=n}});a.exports=y},99584:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y;if(u)typeof u=="string"?y=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(y=u);else if(e.parentElement||u===null)return e;return y||(y=document.body),y.appendChild(e),e};a.exports=T},85178:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99584),y=function(d){var l=d.config;if(!(!l.parent||!l.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+d.scale.width+"px;","height: "+d.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),d.domContainer=h,u(h,l.parent)}};a.exports=y},21546:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36580),y=function(d){if(document.readyState==="complete"||document.readyState==="interactive"){d();return}var l=function(){document.removeEventListener("deviceready",l,!0),document.removeEventListener("DOMContentLoaded",l,!0),window.removeEventListener("load",l,!0),d()};document.body?u.cordova?document.addEventListener("deviceready",l,!1):(document.addEventListener("DOMContentLoaded",l,!0),window.addEventListener("load",l,!0)):window.setTimeout(l,20)};a.exports=y},74181:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e)return window.innerHeight;var u=Math.abs(window.orientation),y={w:0,h:0},d=document.createElement("div");return d.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(d),y.w=u===90?d.offsetHeight:window.innerWidth,y.h=u===90?window.innerWidth:d.offsetHeight,document.documentElement.removeChild(d),d=null,Math.abs(window.orientation)!==90?y.h:y.w};a.exports=T},9229:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(55301),y=function(d,l){var h=window.screen,r=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return u.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return u.ORIENTATION.LANDSCAPE}else return l>d?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE};a.exports=y},2893:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u;return e!==""&&(typeof e=="string"?u=document.getElementById(e):e&&e.nodeType===1&&(u=e)),u||(u=document.body),u};a.exports=T},89200:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u="";try{if(window.DOMParser){var y=new DOMParser;u=y.parseFromString(e,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(e)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};a.exports=T},55638:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){e.parentNode&&e.parentNode.removeChild(e)};a.exports=T},27385:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72283),d=new u({initialize:function(){this.isRunning=!1,this.callback=y,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function r(n){h.callback(n),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(r))},this.stepTimeout=function r(){h.isRunning&&(h.timeOutID=window.setTimeout(r,h.delay)),h.callback(window.performance.now())}},start:function(l,h,r){this.isRunning||(this.callback=l,this.isSetTimeOut=h,this.delay=r,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=y}});a.exports=d},3590:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};a.exports=u},78491:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(91963),l=new u({Extends:y,initialize:function(){y.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});d.register("EventEmitter",l,"events"),a.exports=l},95146:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={EventEmitter:e(78491)}},20170:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n){n===void 0&&(n=1),y.call(this,d.BARREL,r),this.amount=n}});a.exports=l},51182:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c,m,p){v===void 0&&(v=1),o===void 0&&(o=1),c===void 0&&(c=1),m===void 0&&(m=1),p===void 0&&(p=4),y.call(this,d.BLOOM,r),this.steps=p,this.offsetX=v,this.offsetY=o,this.blurStrength=c,this.strength=m,this.glcolor=[1,1,1],n!=null&&(this.color=n)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});a.exports=l},51498:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c,m,p){v===void 0&&(v=2),o===void 0&&(o=2),c===void 0&&(c=1),p===void 0&&(p=4),y.call(this,d.BLUR,r),this.quality=0,this.x=v,this.y=o,this.steps=p,this.strength=c,this.glcolor=[1,1,1],m!=null&&(this.color=m)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});a.exports=l},12042:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c,m,p,g){n===void 0&&(n=.5),v===void 0&&(v=1),o===void 0&&(o=.2),c===void 0&&(c=!1),m===void 0&&(m=1),p===void 0&&(p=1),g===void 0&&(g=1),y.call(this,d.BOKEH,r),this.radius=n,this.amount=v,this.contrast=o,this.isTiltShift=c,this.strength=g,this.blurX=m,this.blurY=p}});a.exports=l},69900:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c,m){n===void 0&&(n=8),c===void 0&&(c=1),m===void 0&&(m=.005),y.call(this,d.CIRCLE,r),this.scale=c,this.feather=m,this.thickness=n,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],v!=null&&(this.color=v),o!=null&&(this.backgroundColor=o)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor2;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});a.exports=l},48991:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(65246),d=e(47406),l=new u({Extends:y,initialize:function(r){y.call(this),this.type=d.COLOR_MATRIX,this.gameObject=r,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});a.exports=l},47551:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h){this.type=l,this.gameObject=h,this.active=!0},destroy:function(){this.gameObject=null,this.active=!1}});a.exports=y},47909:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o){n===void 0&&(n="__WHITE"),v===void 0&&(v=.005),o===void 0&&(o=.005),y.call(this,d.DISPLACEMENT,r),this.x=v,this.y=o,this.glTexture,this.setTexture(n)},setTexture:function(h){var r=this.gameObject.scene.sys.textures.getFrame(h);return r&&(this.glTexture=r.glTexture),this}});a.exports=l},18919:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c){v===void 0&&(v=4),o===void 0&&(o=0),c===void 0&&(c=!1),y.call(this,d.GLOW,r),this.outerStrength=v,this.innerStrength=o,this.knockout=c,this.glcolor=[1,1,1,1],n!==void 0&&(this.color=n)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});a.exports=l},62494:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c,m,p,g,x){o===void 0&&(o=.2),c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=1),x===void 0&&(x=0),y.call(this,d.GRADIENT,r),this.alpha=o,this.size=x,this.fromX=c,this.fromY=m,this.toX=p,this.toY=g,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],n!=null&&(this.color1=n),v!=null&&(this.color2=v)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var r=this.glcolor1;r[0]=h>>16&255,r[1]=h>>8&255,r[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var r=this.glcolor2;r[0]=h>>16&255,r[1]=h>>8&255,r[2]=h&255}}});a.exports=l},68897:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n){n===void 0&&(n=1),y.call(this,d.PIXELATE,r),this.amount=n}});a.exports=l},58575:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c,m,p,g){n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=.1),c===void 0&&(c=1),p===void 0&&(p=6),g===void 0&&(g=1),y.call(this,d.SHADOW,r),this.x=n,this.y=v,this.decay=o,this.power=c,this.glcolor=[0,0,0,1],this.samples=p,this.intensity=g,m!==void 0&&(this.color=m)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});a.exports=l},33755:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c){n===void 0&&(n=.5),v===void 0&&(v=.5),o===void 0&&(o=3),c===void 0&&(c=!1),y.call(this,d.SHINE,r),this.speed=n,this.lineWidth=v,this.gradient=o,this.reveal=c}});a.exports=l},24949:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c){n===void 0&&(n=.5),v===void 0&&(v=.5),o===void 0&&(o=.5),c===void 0&&(c=.5),y.call(this,d.VIGNETTE,r),this.x=n,this.y=v,this.radius=o,this.strength=c}});a.exports=l},66241:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47551),d=e(47406),l=new u({Extends:y,initialize:function(r,n,v,o,c){n===void 0&&(n=.1),v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=!1),y.call(this,d.WIPE,r),this.progress=0,this.wipeWidth=n,this.direction=v,this.axis=o,this.reveal=c}});a.exports=l},47406:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};a.exports=T},96910:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),y=e(47406),d={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};d=u(!1,d,y),a.exports=d},88933:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y=e(20494),d=function(l,h,r){h.x=y(r,"x",0),h.y=y(r,"y",0),h.depth=y(r,"depth",0),h.flipX=y(r,"flipX",!1),h.flipY=y(r,"flipY",!1);var n=y(r,"scale",null);typeof n=="number"?h.setScale(n):n!==null&&(h.scaleX=y(n,"x",1),h.scaleY=y(n,"y",1));var v=y(r,"scrollFactor",null);typeof v=="number"?h.setScrollFactor(v):v!==null&&(h.scrollFactorX=y(v,"x",1),h.scrollFactorY=y(v,"y",1)),h.rotation=y(r,"rotation",0);var o=y(r,"angle",null);o!==null&&(h.angle=o),h.alpha=y(r,"alpha",1);var c=y(r,"origin",null);if(typeof c=="number")h.setOrigin(c);else if(c!==null){var m=y(c,"x",.5),p=y(c,"y",.5);h.setOrigin(m,p)}h.blendMode=y(r,"blendMode",u.NORMAL),h.visible=y(r,"visible",!0);var g=y(r,"add",!0);return g&&l.sys.displayList.add(h),h.preUpdate&&l.sys.updateList.add(h),h};a.exports=d},32291:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(20494),y=function(d,l){var h=u(l,"anims",null);if(h===null)return d;if(typeof h=="string")d.anims.play(h);else if(typeof h=="object"){var r=d.anims,n=u(h,"key",void 0);if(n){var v=u(h,"startFrame",void 0),o=u(h,"delay",0),c=u(h,"repeat",0),m=u(h,"repeatDelay",0),p=u(h,"yoyo",!1),g=u(h,"play",!1),x=u(h,"delayedPlay",0),E={key:n,delay:o,repeat:c,repeatDelay:m,yoyo:p,startFrame:v};g?r.play(E):x>0?r.playAfterDelay(E,x):r.load(E)}}return d};a.exports=y},91713:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(71207),d=e(91963),l=e(56631),h=e(7599),r=e(17922),n=new u({Extends:y,initialize:function(o){y.call(this,o),this.sortChildrenFlag=!1,this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.parentContainer&&v.parentContainer.remove(v),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(l.ADDED_TO_SCENE,v,this.scene),this.events.emit(h.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(l.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,o){return v._depth-o._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list;v.length;)v[0].destroy(!0);this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});d.register("DisplayList",n,"displayList"),a.exports=n},89980:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(48129),d=e(81078),l=e(6659),h=e(56631),r=e(7599),n=new u({Extends:l,initialize:function(o,c){l.call(this),this.scene=o,this.displayList=null,this.type=c,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),o.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new d(this)),this},setData:function(v,o){return this.data||(this.data=new d(this)),this.data.set(v,o),this},incData:function(v,o){return this.data||(this.data=new d(this)),this.data.inc(v,o),this},toggleData:function(v){return this.data||(this.data=new d(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new d(this)),this.data.get(v)},setInteractive:function(v,o,c){return this.scene.sys.input.enable(this,v,o,c),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return y(this)},willRender:function(v){var o=this.displayList&&this.displayList.active?this.displayList.willRender(v):!0;return!(!o||n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,o=this.parentContainer,c=[];o&&(c.unshift(o.getIndex(v)),v=o,o.parentContainer);)o=o.parentContainer;return this.displayList?c.unshift(this.displayList.getIndex(v)):c.unshift(this.scene.sys.displayList.getIndex(v)),c},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),v.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v&&v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,a.exports=n},99325:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(91963),d=e(7599),l=new u({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,r){l.prototype.hasOwnProperty(h)||(l.prototype[h]=r)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},y.register("GameObjectCreator",l,"make"),a.exports=l},61286:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(91963),d=e(7599),l=new u({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,r){l.prototype.hasOwnProperty(h)||(l.prototype[h]=r)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},y.register("GameObjectFactory",l,"add"),a.exports=l},73329:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(69360),y=new u,d=new u,l=new u,h={camera:y,sprite:d,calc:l},r=function(n,v,o){var c=y,m=d,p=l;return m.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),c.copyFrom(v.matrix),o?(c.multiplyWithOffset(o,-v.scrollX*n.scrollFactorX,-v.scrollY*n.scrollFactorY),m.e=n.x,m.f=n.y):(m.e-=v.scrollX*n.scrollFactorX,m.f-=v.scrollY*n.scrollFactorY),c.multiply(m,p),h};a.exports=r},92034:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(74623),d=e(91963),l=e(7599),h=new u({Extends:y,initialize:function(n){y.call(this),this.checkQueue=!0,this.scene=n,this.systems=n.sys,n.sys.events.once(l.BOOT,this.boot,this),n.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(l.PRE_UPDATE,this.update,this),r.on(l.UPDATE,this.sceneUpdate,this),r.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,n){for(var v=this._active,o=v.length,c=0;c<o;c++){var m=v[c];m.active&&m.preUpdate.call(m,r,n)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(l.PRE_UPDATE,this.update,this),n.off(l.UPDATE,this.sceneUpdate,this),n.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});d.register("UpdateList",h,"updateList"),a.exports=h},8810:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l,h,r,n,v,o,c,m,p,g,x){var E=y.x-u.displayOriginX+l,P=y.y-u.displayOriginY+h,S=E+y.w,M=P+y.h,b=r.getXRound(E,P,n),A=r.getYRound(E,P,n),L=r.getXRound(E,M,n),R=r.getYRound(E,M,n),O=r.getXRound(S,M,n),D=r.getYRound(S,M,n),B=r.getXRound(S,P,n),G=r.getYRound(S,P,n);e.batchQuad(u,b,A,L,R,O,D,B,G,d.u0,d.v0,d.u1,d.v1,v,o,c,m,p,g,x)};a.exports=T},82173:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){if(y===void 0&&(y=!1),d===void 0)return d={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},d;var l=e.text,h=l.length,r=e.maxWidth,n=e.wordWrapCharCode,v=Number.MAX_VALUE,o=Number.MAX_VALUE,c=0,m=0,p=e.fontData.chars,g=e.fontData.lineHeight,x=e.letterSpacing,E=e.lineSpacing,P=0,S=0,M=0,b=null,A=e._align,L=0,R=0,O=e.fontSize/e.fontData.size,D=O*e.scaleX,B=O*e.scaleY,G=null,z=0,X=[],U=Number.MAX_VALUE,V=0,N=0,W=0,F,I=[],k=[],Y=null;if(r>0){for(F=0;F<h;F++){if(M=l.charCodeAt(F),M===10){Y!==null&&(I.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*B,w:Y.w*D,h:Y.h*B,cr:!0}),Y=null),P=0,S+=g+E,G=null;continue}if(b=p[M],!!b){if(G!==null)var H=b.kerning[z];M===n?Y!==null&&(I.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*B,w:Y.w*D,h:Y.h*B,cr:!1}),Y=null):(Y===null&&(Y={word:"",i:F,x:P,y:S,w:0,h:g,cr:!1}),Y.word=Y.word.concat(l[F]),Y.w+=b.xOffset+b.xAdvance+(H!==void 0?H:0)),P+=b.xAdvance+x,G=b,z=M}}Y!==null&&I.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*B,w:Y.w*D,h:Y.h*B,cr:!1}),P=0,S=0,G=null,z=0;var K,j=0,J=[];for(F=0;F<I.length;F++){var Q=I[F],Z=Q.x,q=Q.x+Q.w;if(K){var et=Z-(K.x+K.w);j=Z-(et+K.w),K=null}var tt=Z-j,it=q-j;tt>r||it>r?(J.push(Q.i-1),Q.cr?(J.push(Q.i+Q.word.length),j=0,K=null):K=Q):Q.cr&&(J.push(Q.i+Q.word.length),j=0,K=null)}var ut=function(xt,Tt,zt){return xt.substr(0,Tt)+zt+xt.substr(Tt+1)};for(F=J.length-1;F>=0;F--)l=ut(l,J[F],`
`);d.wrappedText=l,h=l.length,I=[],Y=null}var ot=0;for(F=0;F<h;F++){if(M=l.charCodeAt(F),M===10){Y!==null&&(I.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*B,w:Y.w*D,h:Y.h*B}),Y=null),P=0,S+=g+E,G=null,X[N]=W,W>V&&(V=W),W<U&&(U=W),N++,W=0;continue}if(b=p[M],!!b){if(L=P,R=S,G!==null){var ht=b.kerning[z];L+=ht!==void 0?ht:0}v>L&&(v=L),o>R&&(o=R);var st=L+b.xAdvance,at=R+g;c<st&&(c=st),m<at&&(m=at);var nt=b.xOffset+b.xAdvance+(ht!==void 0?ht:0);M===n?Y!==null&&(I.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*B,w:Y.w*D,h:Y.h*B}),Y=null):(Y===null&&(Y={word:"",i:ot,x:P,y:S,w:0,h:g}),Y.word=Y.word.concat(l[F]),Y.w+=nt),k.push({i:ot,idx:F,char:l[F],code:M,x:(b.xOffset+L)*O,y:(b.yOffset+S)*O,w:b.width*O,h:b.height*O,t:S*O,r:st*O,b:g*O,line:N,glyph:b}),P+=b.xAdvance+x+(ht!==void 0?ht:0),G=b,z=M,W=st*O,ot++}}if(Y!==null&&I.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*B,w:Y.w*D,h:Y.h*B}),X[N]=W,W>V&&(V=W),W<U&&(U=W),A>0)for(var gt=0;gt<k.length;gt++){var dt=k[gt];if(A===1){var mt=(V-X[dt.line])/2;dt.x+=mt,dt.r+=mt}else if(A===2){var Ft=V-X[dt.line];dt.x+=Ft,dt.r+=Ft}}var pt=d.local,ft=d.global,Mt=d.lines;return pt.x=v*O,pt.y=o*O,pt.width=c*O,pt.height=m*O,ft.x=e.x-e._displayOriginX+v*D,ft.y=e.y-e._displayOriginY+o*B,ft.width=c*D,ft.height=m*B,Mt.shortest=U,Mt.longest=V,Mt.lengths=X,u&&(pt.x=Math.ceil(pt.x),pt.y=Math.ceil(pt.y),pt.width=Math.ceil(pt.width),pt.height=Math.ceil(pt.height),ft.x=Math.ceil(ft.x),ft.y=Math.ceil(ft.y),ft.width=Math.ceil(ft.width),ft.height=Math.ceil(ft.height),Mt.shortest=Math.ceil(U),Mt.longest=Math.ceil(V)),y&&(e._displayOriginX=e.originX*pt.width,e._displayOriginY=e.originY*pt.height,ft.x=e.x-e._displayOriginX*e.scaleX,ft.y=e.y-e._displayOriginY*e.scaleY,u&&(ft.x=Math.ceil(ft.x),ft.y=Math.ceil(ft.y))),d.words=I,d.characters=k,d.lines.height=g,d.scale=O,d.scaleX=e.scaleX,d.scaleY=e.scaleY,d};a.exports=T},68298:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(31476),y=function(d,l,h,r,n,v,o){var c=d.sys.textures.get(h),m=c.get(r),p=d.sys.cache.xml.get(n);if(m&&p){var g=u(p,m,v,o,c);return d.sys.cache.bitmapFont.add(l,{data:g,texture:h,frame:r,fromAtlas:!0}),!0}else return!1};a.exports=y},39860:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),y=function(d,l){var h=l.width,r=l.height,n=Math.floor(h/2),v=Math.floor(r/2),o=u(l,"chars","");if(o!==""){var c=u(l,"image",""),m=d.sys.textures.getFrame(c),p=m.cutX,g=m.cutY,x=m.source.width,E=m.source.height,P=u(l,"offset.x",0),S=u(l,"offset.y",0),M=u(l,"spacing.x",0),b=u(l,"spacing.y",0),A=u(l,"lineSpacing",0),L=u(l,"charsPerRow",null);L===null&&(L=x/h,L>o.length&&(L=o.length));for(var R=P,O=S,D={retroFont:!0,font:c,size:h,lineHeight:r+A,chars:{}},B=0,G=0;G<o.length;G++){var z=o.charCodeAt(G),X=(p+R)/x,U=(g+O)/E,V=(p+R+h)/x,N=(g+O+r)/E;D.chars[z]={x:R,y:O,width:h,height:r,centerX:n,centerY:v,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:X,v0:U,u1:V,v1:N},B++,B===L?(B=0,R=P,O+=r+b):R+=h+M}var W={data:D,frame:null,texture:c};return W}};a.exports=y},31476:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(u,y){return parseInt(u.getAttribute(y),10)}var e=function(u,y,d,l,h){d===void 0&&(d=0),l===void 0&&(l=0);var r=y.cutX,n=y.cutY,v=y.source.width,o=y.source.height,c=y.sourceIndex,m={},p=u.getElementsByTagName("info")[0],g=u.getElementsByTagName("common")[0];m.font=p.getAttribute("face"),m.size=T(p,"size"),m.lineHeight=T(g,"lineHeight")+l,m.chars={};var x=u.getElementsByTagName("char"),E=y!==void 0&&y.trimmed;if(E)var P=y.height,S=y.width;for(var M=0;M<x.length;M++){var b=x[M],A=T(b,"id"),L=String.fromCharCode(A),R=T(b,"x"),O=T(b,"y"),D=T(b,"width"),B=T(b,"height");E&&(R<S&&(S=R),O<P&&(P=O)),E&&P!==0&&S!==0&&(R-=y.x,O-=y.y);var G=(r+R)/v,z=(n+O)/o,X=(r+R+D)/v,U=(n+O+B)/o;if(m.chars[A]={x:R,y:O,width:D,height:B,centerX:Math.floor(D/2),centerY:Math.floor(B/2),xOffset:T(b,"xoffset"),yOffset:T(b,"yoffset"),xAdvance:T(b,"xadvance")+d,data:{},kerning:{},u0:G,v0:z,u1:X,v1:U},h&&D!==0&&B!==0){var V=h.add(L,c,R,O,D,B);V&&V.setUVs(D,B,G,z,X,U)}}var N=u.getElementsByTagName("kerning");for(M=0;M<N.length;M++){var W=N[M],F=T(W,"first"),I=T(W,"second"),k=T(W,"amount");m.chars[I].kerning[F]=k}return m};a.exports=e},55873:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66863),y=e(98611),d={Parse:e(39860)};d=y(!1,d,u),a.exports=d},66863:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};a.exports=T},13468:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44616),y=e(56694),d=e(88899),l=new y({Extends:u,Mixins:[d],initialize:function(r,n,v,o,c,m,p){u.call(this,r,n,v,o,c,m,p),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,r){return this.cropWidth=h,this.cropHeight=r,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});a.exports=l},93438:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(49584),y=function(d,l,h,r){var n=l._text,v=n.length,o=d.currentContext;if(!(v===0||!u(d,o,l,h,r))){h.addToRenderList(l);var c=l.fromAtlas?l.frame:l.texture.frames.__BASE,m=l.displayCallback,p=l.callbackData,g=l.fontData.chars,x=l.fontData.lineHeight,E=l._letterSpacing,P=0,S=0,M=0,b=null,A=0,L=0,R=0,O=0,D=0,B=0,G=null,z=0,X=l.frame.source.image,U=c.cutX,V=c.cutY,N=0,W=0,F=l._fontSize/l.fontData.size,I=l._align,k=0,Y=0;l.getTextBounds(!1);var H=l._bounds.lines;I===1?Y=(H.longest-H.lengths[0])/2:I===2&&(Y=H.longest-H.lengths[0]),o.translate(-l.displayOriginX,-l.displayOriginY);var K=h.roundPixels;l.cropWidth>0&&l.cropHeight>0&&(o.beginPath(),o.rect(0,0,l.cropWidth,l.cropHeight),o.clip());for(var j=0;j<v;j++){if(W=F,N=0,M=n.charCodeAt(j),M===10){k++,I===1?Y=(H.longest-H.lengths[k])/2:I===2&&(Y=H.longest-H.lengths[k]),P=0,S+=x,G=null;continue}if(b=g[M],!!b){if(A=U+b.x,L=V+b.y,R=b.width,O=b.height,D=b.xOffset+P-l.scrollX,B=b.yOffset+S-l.scrollY,G!==null){var J=b.kerning[z];D+=J!==void 0?J:0}if(m){p.index=j,p.charCode=M,p.x=D,p.y=B,p.scale=W,p.rotation=N,p.data=b.data;var Q=m(p);D=Q.x,B=Q.y,W=Q.scale,N=Q.rotation}D*=W,B*=W,D+=Y,P+=b.xAdvance+E+(J!==void 0?J:0),G=b,z=M,!(R===0||O===0||M===32)&&(K&&(D=Math.round(D),B=Math.round(B)),o.save(),o.translate(D,B),o.rotate(N),o.scale(W,W),o.drawImage(X,A,L,R,O,0,0,R,O),o.restore())}}o.restore()}};a.exports=y},67513:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(13468),y=e(88933),d=e(99325),l=e(20494);d.register("dynamicBitmapText",function(h,r){h===void 0&&(h={});var n=l(h,"font",""),v=l(h,"text",""),o=l(h,"size",!1),c=new u(this.scene,0,0,n,v,o);return r!==void 0&&(h.add=r),y(this.scene,c,h),c})},94145:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(13468),y=e(61286);y.register("dynamicBitmapText",function(d,l,h,r,n){return this.displayList.add(new u(this.scene,d,l,h,r,n))})},88899:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(16873),d=e(93438),a.exports={renderWebGL:y,renderCanvas:d}},16873:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(69360),d=e(75512),l=new y,h=function(r,n,v,o){var c=n.text,m=c.length;if(m!==0){v.addToRenderList(n);var p=r.pipelines.set(n.pipeline,n),g=u(n,v,o);r.pipelines.preBatch(n);var x=g.sprite,E=g.calc,P=l,S=n.cropWidth>0||n.cropHeight>0;S&&(p.flush(),r.pushScissor(E.tx,E.ty,n.cropWidth*E.scaleX,n.cropHeight*E.scaleY));var M=n.frame,b=M.glTexture,A=n.tintFill,L=d.getTintAppendFloatAlpha(n.tintTopLeft,v.alpha*n._alphaTL),R=d.getTintAppendFloatAlpha(n.tintTopRight,v.alpha*n._alphaTR),O=d.getTintAppendFloatAlpha(n.tintBottomLeft,v.alpha*n._alphaBL),D=d.getTintAppendFloatAlpha(n.tintBottomRight,v.alpha*n._alphaBR),B=p.setGameObject(n),G=0,z=0,X=0,U=0,V=n.letterSpacing,N,W=0,F=0,I,k=n.scrollX,Y=n.scrollY,H=n.fontData,K=H.chars,j=H.lineHeight,J=n.fontSize/H.size,Q=0,Z=n._align,q=0,et=0,tt=n.getTextBounds(!1);n.maxWidth>0&&(c=tt.wrappedText,m=c.length);var it=n._bounds.lines;Z===1?et=(it.longest-it.lengths[0])/2:Z===2&&(et=it.longest-it.lengths[0]);for(var ut=v.roundPixels,ot=n.displayCallback,ht=n.callbackData,st=0;st<m;st++){if(X=c.charCodeAt(st),X===10){q++,Z===1?et=(it.longest-it.lengths[q])/2:Z===2&&(et=it.longest-it.lengths[q]),G=0,z+=j,I=null;continue}if(N=K[X],!!N){W=N.width,F=N.height;var at=N.xOffset+G-k,nt=N.yOffset+z-Y;if(I!==null){var gt=N.kerning[U];at+=gt!==void 0?gt:0}if(G+=N.xAdvance+V,I=N,U=X,!(W===0||F===0||X===32)){if(J=n.fontSize/n.fontData.size,Q=0,ot){ht.color=0,ht.tint.topLeft=L,ht.tint.topRight=R,ht.tint.bottomLeft=O,ht.tint.bottomRight=D,ht.index=st,ht.charCode=X,ht.x=at,ht.y=nt,ht.scale=J,ht.rotation=Q,ht.data=N.data;var dt=ot(ht);at=dt.x,nt=dt.y,J=dt.scale,Q=dt.rotation,dt.color?(L=dt.color,R=dt.color,O=dt.color,D=dt.color):(L=dt.tint.topLeft,R=dt.tint.topRight,O=dt.tint.bottomLeft,D=dt.tint.bottomRight),L=d.getTintAppendFloatAlpha(L,v.alpha*n._alphaTL),R=d.getTintAppendFloatAlpha(R,v.alpha*n._alphaTR),O=d.getTintAppendFloatAlpha(O,v.alpha*n._alphaBL),D=d.getTintAppendFloatAlpha(D,v.alpha*n._alphaBR)}at*=J,nt*=J,at-=n.displayOriginX,nt-=n.displayOriginY,at+=et,P.applyITRS(at,nt,Q,J,J),E.multiply(P,x);var mt=N.u0,Ft=N.v0,pt=N.u1,ft=N.v1,Mt=W,xt=F,Tt=x.e,zt=x.f,Ct=xt*x.c+x.e,At=xt*x.d+x.f,Le=Mt*x.a+xt*x.c+x.e,Rt=Mt*x.b+xt*x.d+x.f,Ot=Mt*x.a+x.e,Fe=Mt*x.b+x.f;ut&&(Tt=Math.round(Tt),zt=Math.round(zt),Ct=Math.round(Ct),At=Math.round(At),Le=Math.round(Le),Rt=Math.round(Rt),Ot=Math.round(Ot),Fe=Math.round(Fe)),p.batchQuad(n,Tt,zt,Ct,At,Le,Rt,Ot,Fe,mt,Ft,pt,ft,L,R,O,D,A,b,B)}}}S&&(p.flush(),r.popScissor()),r.pipelines.postBatch(n)}};a.exports=h},44616:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(82897),d=e(64937),l=e(89980),h=e(82173),r=e(68298),n=e(31476),v=e(74118),o=e(84557),c=new u({Extends:l,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Texture,d.Tint,d.Transform,d.Visible,o],initialize:function(p,g,x,E,P,S,M){P===void 0&&(P=""),M===void 0&&(M=0),l.call(this,p,"BitmapText"),this.font=E;var b=this.scene.sys.cache.bitmapFont.get(E);b||console.warn("Invalid BitmapText key: "+E),this.fontData=b.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=b.fromAtlas,this.setTexture(b.texture,b.frame),this.setPosition(g,x),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(P)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(m){return this._fontSize=m,this._dirty=!0,this},setLetterSpacing:function(m){return m===void 0&&(m=0),this._letterSpacing=m,this._dirty=!0,this},setLineSpacing:function(m){return m===void 0&&(m=0),this.lineSpacing=m,this},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this.text&&(this._text=m.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(m,p,g,x){return m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=.5),this.dropShadowX=m,this.dropShadowY=p,this.dropShadowColor=g,this.dropShadowAlpha=x,this},setCharacterTint:function(m,p,g,x,E,P,S){m===void 0&&(m=0),p===void 0&&(p=1),g===void 0&&(g=!1),x===void 0&&(x=-1),E===void 0&&(E=x,P=x,S=x);var M=this.text.length;p===-1&&(p=M),m<0&&(m=M+m),m=y(m,0,M-1);for(var b=y(m+p,m,M),A=this.charColors,L=m;L<b;L++){var R=A[L];if(x===-1)A[L]=null;else{var O=g?1:0;R?(R.tintEffect=O,R.tintTL=x,R.tintTR=E,R.tintBL=P,R.tintBR=S):A[L]={tintEffect:O,tintTL:x,tintTR:E,tintBL:P,tintBR:S}}}return this},setWordTint:function(m,p,g,x,E,P,S){p===void 0&&(p=1);for(var M=this.getTextBounds(),b=M.words,A=typeof m=="number",L=0,R=0;R<b.length;R++){var O=b[R];if((A&&R===m||!A&&O.word===m)&&(this.setCharacterTint(O.i,O.word.length,g,x,E,P,S),L++,L===p))return this}return this},getTextBounds:function(m){var p=this._bounds;return(this._dirty||m||this.scaleX!==p.scaleX||this.scaleY!==p.scaleY)&&(h(this,m,!0,p),this._dirty=!1),p},getCharacterAt:function(m,p,g){for(var x=this.getLocalPoint(m,p,null,g),E=this.getTextBounds(),P=E.characters,S=new v,M=0;M<P.length;M++){var b=P[M];if(S.setTo(b.x,b.t,b.r-b.x,b.b),S.contains(x.x,x.y))return b}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(m,p,g){if(p===void 0&&(p=this._fontSize),g===void 0&&(g=this._align),m!==this.font){var x=this.scene.sys.cache.bitmapFont.get(m);x&&(this.font=m,this.fontData=x.data,this._fontSize=p,this._align=g,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(m,p){return this._maxWidth=m,this._dirty=!0,p!==void 0&&(this.wordWrapCharCode=p),this},align:{set:function(m){this._align=m,this._dirty=!0},get:function(){return this._align}},text:{set:function(m){this.setText(m)},get:function(){return this._text}},fontSize:{set:function(m){this._fontSize=m,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(m){this._letterSpacing=m,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(m){this._lineSpacing=m,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(m){this._maxWidth=m,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var m=d.ToJSON(this),p={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return m.data=p,m},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=r,c.ParseXMLBitmapFont=n,a.exports=c},97545:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(49584),y=function(d,l,h,r){var n=l._text,v=n.length,o=d.currentContext;if(!(v===0||!u(d,o,l,h,r))){h.addToRenderList(l);var c=l.fromAtlas?l.frame:l.texture.frames.__BASE,m=l.fontData.chars,p=l.fontData.lineHeight,g=l._letterSpacing,x=l._lineSpacing,E=0,P=0,S=0,M=null,b=0,A=0,L=0,R=0,O=0,D=0,B=null,G=0,z=c.source.image,X=c.cutX,U=c.cutY,V=l._fontSize/l.fontData.size,N=l._align,W=0,F=0,I=l.getTextBounds(!1);l.maxWidth>0&&(n=I.wrappedText,v=n.length);var k=l._bounds.lines;N===1?F=(k.longest-k.lengths[0])/2:N===2&&(F=k.longest-k.lengths[0]),o.translate(-l.displayOriginX,-l.displayOriginY);for(var Y=h.roundPixels,H=0;H<v;H++){if(S=n.charCodeAt(H),S===10){W++,N===1?F=(k.longest-k.lengths[W])/2:N===2&&(F=k.longest-k.lengths[W]),E=0,P+=p+x,B=null;continue}if(M=m[S],!!M){if(b=X+M.x,A=U+M.y,L=M.width,R=M.height,O=M.xOffset+E,D=M.yOffset+P,B!==null){var K=M.kerning[G];O+=K!==void 0?K:0}O*=V,D*=V,O+=F,E+=M.xAdvance+g+(K!==void 0?K:0),B=M,G=S,!(L===0||R===0||S===32)&&(Y&&(O=Math.round(O),D=Math.round(D)),o.save(),o.translate(O,D),o.scale(V,V),o.drawImage(z,b,A,L,R,0,0,L,R),o.restore())}}o.restore()}};a.exports=y},95499:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44616),y=e(88933),d=e(99325),l=e(20494),h=e(10850);d.register("bitmapText",function(r,n){r===void 0&&(r={});var v=h(r,"font",""),o=l(r,"text",""),c=l(r,"size",!1),m=h(r,"align",0),p=new u(this.scene,0,0,v,o,c,m);return n!==void 0&&(r.add=n),y(this.scene,p,r),p})},21797:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44616),y=e(61286);y.register("bitmapText",function(d,l,h,r,n,v){return this.displayList.add(new u(this.scene,d,l,h,r,n,v))})},84557:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(26372),d=e(97545),a.exports={renderWebGL:y,renderCanvas:d}},26372:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8810),y=e(73329),d=e(75512),l=function(h,r,n,v){var o=r._text,c=o.length;if(c!==0){n.addToRenderList(r);var m=h.pipelines.set(r.pipeline,r),p=y(r,n,v).calc;h.pipelines.preBatch(r);var g=n.roundPixels,x=n.alpha,E=r.charColors,P=r.tintFill,S=d.getTintAppendFloatAlpha,M=S(r.tintTopLeft,x*r._alphaTL),b=S(r.tintTopRight,x*r._alphaTR),A=S(r.tintBottomLeft,x*r._alphaBL),L=S(r.tintBottomRight,x*r._alphaBR),R=r.frame.glTexture,O=m.setGameObject(r),D=r.getTextBounds(!1),B,G,z,X=D.characters,U=r.dropShadowX,V=r.dropShadowY,N=U!==0||V!==0;if(N){var W=r.dropShadowColor,F=r.dropShadowAlpha,I=S(W,x*F*r._alphaTL),k=S(W,x*F*r._alphaTR),Y=S(W,x*F*r._alphaBL),H=S(W,x*F*r._alphaBR);for(B=0;B<X.length;B++)G=X[B],z=G.glyph,!(G.code===32||z.width===0||z.height===0)&&u(m,r,G,z,U,V,p,g,I,k,Y,H,1,R,O)}for(B=0;B<X.length;B++)if(G=X[B],z=G.glyph,!(G.code===32||z.width===0||z.height===0))if(E[G.i]){var K=E[G.i],j=K.tintEffect,J=S(K.tintTL,x*r._alphaTL),Q=S(K.tintTR,x*r._alphaTR),Z=S(K.tintBL,x*r._alphaBL),q=S(K.tintBR,x*r._alphaBR);u(m,r,G,z,0,0,p,g,J,Q,Z,q,j,R,O)}else u(m,r,G,z,0,0,p,g,M,b,A,L,P,R,O);h.pipelines.postBatch(r)}};a.exports=l},52816:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92246),y=e(41664),d=e(56694),l=e(64937),h=e(82047),r=e(89980),n=e(71207),v=new d({Extends:r,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,u],initialize:function(c,m,p,g,x){r.call(this,c,"Blitter"),this.setTexture(g,x),this.setPosition(m,p),this.initPipeline(),this.initPostPipeline(),this.children=new n,this.renderList=[],this.dirty=!1},create:function(o,c,m,p,g){p===void 0&&(p=!0),g===void 0&&(g=this.children.length),m===void 0?m=this.frame:m instanceof h||(m=this.texture.get(m));var x=new y(this,o,c,m,p);return this.children.addAt(x,g,!1),this.dirty=!0,x},createFromCallback:function(o,c,m,p){for(var g=this.createMultiple(c,m,p),x=0;x<g.length;x++){var E=g[x];o.call(this,E,x)}return g},createMultiple:function(o,c,m){c===void 0&&(c=this.frame.name),m===void 0&&(m=!0),Array.isArray(c)||(c=[c]);var p=[],g=this;return c.forEach(function(x){for(var E=0;E<o;E++)p.push(g.create(0,0,x,m))}),p},childCanRender:function(o){return o.visible&&o.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});a.exports=v},33177:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=u.getRenderList();if(l.length!==0){var h=e.currentContext,r=y.alpha*u.alpha;if(r!==0){y.addToRenderList(u),h.globalCompositeOperation=e.blendModes[u.blendMode],h.imageSmoothingEnabled=!u.frame.source.scaleMode;var n=u.x-y.scrollX*u.scrollFactorX,v=u.y-y.scrollY*u.scrollFactorY;h.save(),d&&d.copyToContext(h);for(var o=y.roundPixels,c=0;c<l.length;c++){var m=l[c],p=m.flipX||m.flipY,g=m.frame,x=g.canvasData,E=g.x,P=g.y,S=1,M=1,b=m.alpha*r;b!==0&&(h.globalAlpha=b,p?(m.flipX&&(S=-1,E-=x.width),m.flipY&&(M=-1,P-=x.height),x.width>0&&x.height>0&&(h.save(),h.translate(m.x+n,m.y+v),h.scale(S,M),h.drawImage(g.source.image,x.x,x.y,x.width,x.height,E,P,x.width,x.height),h.restore())):(o&&(E=Math.round(E),P=Math.round(P)),x.width>0&&x.height>0&&h.drawImage(g.source.image,x.x,x.y,x.width,x.height,E+m.x+n,P+m.y+v,x.width,x.height)))}h.restore()}}};a.exports=T},68452:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(52816),y=e(88933),d=e(99325),l=e(20494);d.register("blitter",function(h,r){h===void 0&&(h={});var n=l(h,"key",null),v=l(h,"frame",null),o=new u(this.scene,0,0,n,v);return r!==void 0&&(h.add=r),y(this.scene,o,h),o})},38906:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(52816),y=e(61286);y.register("blitter",function(d,l,h,r){return this.displayList.add(new u(this.scene,d,l,h,r))})},92246:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(89165),d=e(33177),a.exports={renderWebGL:y,renderCanvas:d}},89165:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(69360),y=e(75512),d=new u,l=function(h,r,n,v){var o=r.getRenderList(),c=n.alpha*r.alpha;if(!(o.length===0||c===0)){n.addToRenderList(r);var m=h.pipelines.set(this.pipeline,r),p=n.scrollX*r.scrollFactorX,g=n.scrollY*r.scrollFactorY,x=d.copyFrom(n.matrix);v&&(x.multiplyWithOffset(v,-p,-g),p=0,g=0);var E=r.x-p,P=r.y-g,S=-1,M=!1,b=n.roundPixels;h.pipelines.preBatch(r);for(var A=0;A<o.length;A++){var L=o[A],R=L.frame,O=L.alpha*c;if(O!==0){var D=R.width,B=R.height,G=E+L.x+R.x,z=P+L.y+R.y;L.flipX&&(D*=-1,G+=R.width),L.flipY&&(B*=-1,z+=R.height);var X=x.setQuad(G,z,G+D,z+B,b),U=y.getTintAppendFloatAlpha(L.tint,O);if(R.sourceIndex!==S){var V=m.setGameObject(r,R);S=R.sourceIndex}m.batchQuad(r,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],R.u0,R.v0,R.u1,R.v1,U,U,U,U,M,R.glTexture,V)&&(S=-1)}}h.pipelines.postBatch(r)}};a.exports=l},41664:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(82047),d=new u({initialize:function(h,r,n,v,o){this.parent=h,this.x=r,this.y=n,this.frame=v,this.data={},this.tint=16777215,this._visible=o,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(l){return l===void 0?this.frame=this.parent.frame:l instanceof y&&l.texture===this.parent.texture?this.frame=l:this.frame=this.parent.texture.get(l),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(l,h,r){return this.x=l,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(l,h){return this.x=l,this.y=h,this},setFlipX:function(l){return this.flipX=l,this},setFlipY:function(l){return this.flipY=l,this},setFlip:function(l,h){return this.flipX=l,this.flipY=h,this},setVisible:function(l){return this.visible=l,this},setAlpha:function(l){return this.alpha=l,this},setTint:function(l){return this.tint=l,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(l){this.parent.dirty|=this._visible!==l,this._visible=l}},alpha:{get:function(){return this._alpha},set:function(l){this.parent.dirty|=this._alpha>0!=l>0,this._alpha=l}}});a.exports=d},97123:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=2,d={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l,h,r,n){return l===void 0&&(l=1),h===void 0?this.alpha=l:(this._alphaTL=u(l,0,1),this._alphaTR=u(h,0,1),this._alphaBL=u(r,0,1),this._alphaBR=u(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(l){var h=u(l,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~y:this.renderFlags|=y}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(l){var h=u(l,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=y)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(l){var h=u(l,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=y)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(l){var h=u(l,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=y)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(l){var h=u(l,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=y)}}};a.exports=d},15720:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=2,d={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l){return l===void 0&&(l=1),this.alpha=l,this},alpha:{get:function(){return this._alpha},set:function(l){var h=u(l,0,1);this._alpha=h,h===0?this.renderFlags&=~y:this.renderFlags|=y}}};a.exports=d},69732:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y={_blendMode:u.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(d){typeof d=="string"&&(d=u[d]),d|=0,d>=-1&&(this._blendMode=d)}},setBlendMode:function(d){return this.blendMode=d,this}};a.exports=y},28284:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,u){return this.width=e,this.height=u,this},setDisplaySize:function(e,u){return this.displayWidth=e,this.displayHeight=u,this}};a.exports=T},85293:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={texture:null,frame:null,isCropped:!1,setCrop:function(e,u,y,d){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,u,y,d,this.flipX,this.flipY);else{var l=e;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};a.exports=T},14975:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};a.exports=T},88677:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(96910),d=e(72677),l=new u({initialize:function(r,n){this.gameObject=r,this.isPost=n,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1},clear:function(){for(var h=this.list,r=0;r<h.length;r++)h[r].destroy();this.list=[],this.enabled=!1},remove:function(h){for(var r=this.list,n=0;n<r.length;n++)r[n]===h&&(d(r,n),h.destroy())},disable:function(h){h===void 0&&(h=!1),this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear()},add:function(h,r){if(this.isPost){var n=String(h.type);this.gameObject.setPostPipeline(n,r);var v=this.gameObject.getPostPipeline(n);if(v)return Array.isArray(v)&&(v=v.pop()),v.controller=h,h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,r,n,v,o,c){return this.add(new y.Glow(this.gameObject,h,r,n,v),{quality:o,distance:c})},addShadow:function(h,r,n,v,o,c,m){return this.add(new y.Shadow(this.gameObject,h,r,n,v,o,c,m))},addPixelate:function(h){return this.add(new y.Pixelate(this.gameObject,h))},addVignette:function(h,r,n,v){return this.add(new y.Vignette(this.gameObject,h,r,n,v))},addShine:function(h,r,n,v){return this.add(new y.Shine(this.gameObject,h,r,n,v))},addBlur:function(h,r,n,v,o,c){return this.add(new y.Blur(this.gameObject,h,r,n,v,o,c))},addGradient:function(h,r,n,v,o,c,m,p){return this.add(new y.Gradient(this.gameObject,h,r,n,v,o,c,m,p))},addBloom:function(h,r,n,v,o,c){return this.add(new y.Bloom(this.gameObject,h,r,n,v,o,c))},addColorMatrix:function(){return this.add(new y.ColorMatrix(this.gameObject))},addCircle:function(h,r,n,v,o){return this.add(new y.Circle(this.gameObject,h,r,n,v,o))},addBarrel:function(h){return this.add(new y.Barrel(this.gameObject,h))},addDisplacement:function(h,r,n){return this.add(new y.Displacement(this.gameObject,h,r,n))},addWipe:function(h,r,n){return this.add(new y.Wipe(this.gameObject,h,r,n))},addReveal:function(h,r,n){return this.add(new y.Wipe(this.gameObject,h,r,n,!0))},addBokeh:function(h,r,n){return this.add(new y.Bokeh(this.gameObject,h,r,n))},addTiltShift:function(h,r,n,v,o,c){return this.add(new y.Bokeh(this.gameObject,h,r,n,!0,v,o,c))},destroy:function(){this.clear(),this.gameObject=null}});a.exports=l},92972:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,u){return this.flipX=e,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};a.exports=T},80693:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=e(2386),d=e(93736),l={prepareBoundsOutput:function(h,r){if(r===void 0&&(r=!1),this.rotation!==0&&y(h,this.x,this.y,this.rotation),r&&this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix();n.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,r){return h===void 0&&(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getTopLeft:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopCenter:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopRight:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getLeftCenter:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getRightCenter:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getBottomLeft:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomCenter:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomRight:function(h,r){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBounds:function(h){h===void 0&&(h=new u);var r,n,v,o,c,m,p,g;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),x.transformPoint(h.x,h.y,h),r=h.x,n=h.y,this.getTopRight(h),x.transformPoint(h.x,h.y,h),v=h.x,o=h.y,this.getBottomLeft(h),x.transformPoint(h.x,h.y,h),c=h.x,m=h.y,this.getBottomRight(h),x.transformPoint(h.x,h.y,h),p=h.x,g=h.y}else this.getTopLeft(h),r=h.x,n=h.y,this.getTopRight(h),v=h.x,o=h.y,this.getBottomLeft(h),c=h.x,m=h.y,this.getBottomRight(h),p=h.x,g=h.y;return h.x=Math.min(r,v,c,p),h.y=Math.min(n,o,m,g),h.width=Math.max(r,v,c,p)-h.x,h.height=Math.max(n,o,m,g)-h.y,h}};a.exports=l},39171:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(76756),y=e(63037),d={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return l===void 0&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l,h,r,n,v){return l===void 0&&(this.texture||this.shader||this.geom)&&(l=this),new u(this.scene,l,h,r,n,v)},createGeometryMask:function(l){return l===void 0&&(this.type==="Graphics"||this.geom)&&(l=this),new y(this.scene,l)}};a.exports=d},28072:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,u){return e===void 0&&(e=.5),u===void 0&&(u=e),this.originX=e,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,u){return e===void 0&&(e=0),u===void 0&&(u=e),this.displayOriginX=e,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};a.exports=T},54211:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75606),y=e(63130),d=e(10850),l=e(55303),h=e(93736),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(n,v){v===void 0&&(v=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=n,v&&this.startFollow(v),this},setRotateToPath:function(n,v){return v===void 0&&(v=0),this.rotateToPath=n,this.pathRotationOffset=v,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,v){n===void 0&&(n={}),v===void 0&&(v=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),typeof n=="number"&&(n={duration:n}),n.from=d(n,"from",0),n.to=d(n,"to",1);var c=y(n,"positionOnPath",!1);this.rotateToPath=y(n,"rotateToPath",!1),this.pathRotationOffset=d(n,"rotationOffset",0);var m=d(n,"startAt",v);if(m&&(n.onStart=function(g){var x=g.data[0];x.progress=m,x.elapsed=x.duration*m;var E=x.ease(x.progress);x.current=x.start+(x.end-x.start)*E,x.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),n.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+u(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n){var v=n.data[0],o=this.pathDelta,c=this.pathVector;if(o.copy(c).negate(),v.state===l.COMPLETE){this.path.getPoint(v.end,c),o.add(c),c.add(this.pathOffset),this.setPosition(c.x,c.y);return}else if(v.state!==l.PLAYING_FORWARD&&v.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),c),o.add(c),c.add(this.pathOffset);var m=this.x,p=this.y;this.setPosition(c.x,c.y);var g=this.x-m,x=this.y-p;if(g===0&&x===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,g)+u(this.pathRotationOffset))}}};a.exports=r},58210:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28699),y={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(d){this.pipelineData={};var l=this.scene.sys.renderer;if(!l)return!1;var h=l.pipelines;if(h){d===void 0&&(d=h.default);var r=h.get(d);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(d,l,h){var r=this.scene.sys.renderer;if(!r)return this;var n=r.pipelines;if(n){var v=n.get(d);v&&(this.pipeline=v),l&&(this.pipelineData=h?u(l):l)}return this},setPipelineData:function(d,l){var h=this.pipelineData;return l===void 0?delete h[d]:h[d]=l,this},resetPipeline:function(d){return d===void 0&&(d=!1),this.pipeline=this.defaultPipeline,d&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};a.exports=y},44086:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28699),y=e(88677),d=e(72677),l={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new y(this,!0),h&&(this.preFX=new y(this,!1))},setPostPipeline:function(h,r,n){var v=this.scene.sys.renderer;if(!v)return this;var o=v.pipelines;if(o){Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++){var m=o.getPostPipeline(h[c],this,r);m&&this.postPipelines.push(m)}r&&(this.postPipelineData=n?u(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,r){var n=this.postPipelineData;return r===void 0?delete n[h]:n[h]=r,this},getPostPipeline:function(h){for(var r=typeof h=="string",n=this.postPipelines,v=[],o=0;o<n.length;o++){var c=n[o];(r&&c.name===h||!r&&c instanceof h)&&v.push(c)}return v.length===1?v[0]:v},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var r=this.postPipelines,n=0;n<r.length;n++)r[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var r=this.postPipelines,n=r.length-1;n>=0;n--){var v=r[n];(typeof h=="string"&&v.name===h||typeof h!="string"&&v instanceof h)&&(v.destroy(),d(r,n))}return this.hasPostPipeline=this.postPipelines.length>0,this}};a.exports=l},45900:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,u){return u===void 0&&(u=e),this.scrollFactorX=e,this.scrollFactorY=u,this}};a.exports=T},31654:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},setSize:function(e,u){return this.width=e,this.height=u,this},setDisplaySize:function(e,u){return this.displayWidth=e,this.displayHeight=u,this}};a.exports=T},82081:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82047),y=8,d={texture:null,frame:null,isCropped:!1,setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,r){return h===void 0&&(h=!0),r===void 0&&(r=!0),l instanceof u?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};a.exports=d},21850:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82047),y=8,d={texture:null,frame:null,isCropped:!1,setCrop:function(l,h,r,n){if(l===void 0)this.isCropped=!1;else if(this.frame){if(typeof l=="number")this.frame.setCropUVs(this._crop,l,h,r,n,this.flipX,this.flipY);else{var v=l;this.frame.setCropUVs(this._crop,v.x,v.y,v.width,v.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,r){return h===void 0&&(h=!0),r===void 0&&(r=!0),l instanceof u?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};a.exports=d},58072:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,u,y,d){return e===void 0&&(e=16777215),u===void 0&&(u=e,y=e,d=e),this.tintTopLeft=e,this.tintTopRight=u,this.tintBottomLeft=y,this.tintBottomRight=d,this.tintFill=!1,this},setTintFill:function(e,u,y,d){return this.setTint(e,u,y,d),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};a.exports=T},48129:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(u.textureKey=e.texture.key,u.frameKey=e.frame.name),u};a.exports=T},56584:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=e(69360),d=e(64462),l=e(35786),h=e(62138),r=e(93736),n=4,v={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(o){this._scaleX=o,this._scaleY=o,o===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleX:{get:function(){return this._scaleX},set:function(o){this._scaleX=o,o===0?this.renderFlags&=~n:this._scaleY!==0&&(this.renderFlags|=n)}},scaleY:{get:function(){return this._scaleY},set:function(o){this._scaleY=o,o===0?this.renderFlags&=~n:this._scaleX!==0&&(this.renderFlags|=n)}},angle:{get:function(){return h(this._rotation*u.RAD_TO_DEG)},set:function(o){this.rotation=h(o)*u.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(o){this._rotation=l(o)}},setPosition:function(o,c,m,p){return o===void 0&&(o=0),c===void 0&&(c=o),m===void 0&&(m=0),p===void 0&&(p=0),this.x=o,this.y=c,this.z=m,this.w=p,this},copyPosition:function(o){return o.x!==void 0&&(this.x=o.x),o.y!==void 0&&(this.y=o.y),o.z!==void 0&&(this.z=o.z),o.w!==void 0&&(this.w=o.w),this},setRandomPosition:function(o,c,m,p){return o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),this.x=o+Math.random()*m,this.y=c+Math.random()*p,this},setRotation:function(o){return o===void 0&&(o=0),this.rotation=o,this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,this},setScale:function(o,c){return o===void 0&&(o=1),c===void 0&&(c=o),this.scaleX=o,this.scaleY=c,this},setX:function(o){return o===void 0&&(o=0),this.x=o,this},setY:function(o){return o===void 0&&(o=0),this.y=o,this},setZ:function(o){return o===void 0&&(o=0),this.z=o,this},setW:function(o){return o===void 0&&(o=0),this.w=o,this},getLocalTransformMatrix:function(o){return o===void 0&&(o=new y),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(o,c){o===void 0&&(o=new y);var m=this.parentContainer;if(!m)return this.getLocalTransformMatrix(o);for(c||(c=new y),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);m;)c.applyITRS(m.x,m.y,m._rotation,m._scaleX,m._scaleY),c.multiply(o,o),m=m.parentContainer;return o},getLocalPoint:function(o,c,m,p){m||(m=new r),p||(p=this.scene.sys.cameras.main);var g=p.scrollX,x=p.scrollY,E=o+g*this.scrollFactorX-g,P=c+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,P,m):d(E,P,this.x,this.y,this.rotation,this.scaleX,this.scaleY,m),this._originComponent&&(m.x+=this._displayOriginX,m.y+=this._displayOriginY),m},getParentRotation:function(){for(var o=0,c=this.parentContainer;c;)o+=c.rotation,c=c.parentContainer;return o}};a.exports=v},69360:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(83392),d=e(93736),l=new u({initialize:function(r,n,v,o,c,m){r===void 0&&(r=1),n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=1),c===void 0&&(c=0),m===void 0&&(m=0),this.matrix=new Float32Array([r,n,v,o,c,m,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,r=h[0],n=h[1],v=h[2],o=h[3];return r||n?n>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):v||o?y.TAU-(o>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,r){var n=this.matrix;return n[4]=n[0]*h+n[2]*r+n[4],n[5]=n[1]*h+n[3]*r+n[5],this},scale:function(h,r){var n=this.matrix;return n[0]*=h,n[1]*=h,n[2]*=r,n[3]*=r,this},rotate:function(h){var r=Math.sin(h),n=Math.cos(h),v=this.matrix,o=v[0],c=v[1],m=v[2],p=v[3];return v[0]=o*n+m*r,v[1]=c*n+p*r,v[2]=o*-r+m*n,v[3]=c*-r+p*n,this},multiply:function(h,r){var n=this.matrix,v=h.matrix,o=n[0],c=n[1],m=n[2],p=n[3],g=n[4],x=n[5],E=v[0],P=v[1],S=v[2],M=v[3],b=v[4],A=v[5],L=r===void 0?n:r.matrix;return L[0]=E*o+P*m,L[1]=E*c+P*p,L[2]=S*o+M*m,L[3]=S*c+M*p,L[4]=b*o+A*m+g,L[5]=b*c+A*p+x,L},multiplyWithOffset:function(h,r,n){var v=this.matrix,o=h.matrix,c=v[0],m=v[1],p=v[2],g=v[3],x=v[4],E=v[5],P=r*c+n*p+x,S=r*m+n*g+E,M=o[0],b=o[1],A=o[2],L=o[3],R=o[4],O=o[5];return v[0]=M*c+b*p,v[1]=M*m+b*g,v[2]=A*c+L*p,v[3]=A*m+L*g,v[4]=R*c+O*p+P,v[5]=R*m+O*g+S,this},transform:function(h,r,n,v,o,c){var m=this.matrix,p=m[0],g=m[1],x=m[2],E=m[3],P=m[4],S=m[5];return m[0]=h*p+r*x,m[1]=h*g+r*E,m[2]=n*p+v*x,m[3]=n*g+v*E,m[4]=o*p+c*x+P,m[5]=o*g+c*E+S,this},transformPoint:function(h,r,n){n===void 0&&(n={x:0,y:0});var v=this.matrix,o=v[0],c=v[1],m=v[2],p=v[3],g=v[4],x=v[5];return n.x=h*o+r*m+g,n.y=h*c+r*p+x,n},invert:function(){var h=this.matrix,r=h[0],n=h[1],v=h[2],o=h[3],c=h[4],m=h[5],p=r*o-n*v;return h[0]=o/p,h[1]=-n/p,h[2]=-v/p,h[3]=r/p,h[4]=(v*m-o*c)/p,h[5]=-(r*m-n*c)/p,this},copyFrom:function(h){var r=this.matrix;return r[0]=h.a,r[1]=h.b,r[2]=h.c,r[3]=h.d,r[4]=h.e,r[5]=h.f,this},copyFromArray:function(h){var r=this.matrix;return r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],this},copyToContext:function(h){var r=this.matrix;return h.transform(r[0],r[1],r[2],r[3],r[4],r[5]),h},setToContext:function(h){var r=this.matrix;return h.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),h},copyToArray:function(h){var r=this.matrix;return h===void 0?h=[r[0],r[1],r[2],r[3],r[4],r[5]]:(h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[3],h[4]=r[4],h[5]=r[5]),h},setTransform:function(h,r,n,v,o,c){var m=this.matrix;return m[0]=h,m[1]=r,m[2]=n,m[3]=v,m[4]=o,m[5]=c,this},decomposeMatrix:function(){var h=this.decomposedMatrix,r=this.matrix,n=r[0],v=r[1],o=r[2],c=r[3],m=n*c-v*o;if(h.translateX=r[4],h.translateY=r[5],n||v){var p=Math.sqrt(n*n+v*v);h.rotation=v>0?Math.acos(n/p):-Math.acos(n/p),h.scaleX=p,h.scaleY=m/p}else if(o||c){var g=Math.sqrt(o*o+c*c);h.rotation=Math.PI*.5-(c>0?Math.acos(-o/g):-Math.acos(o/g)),h.scaleX=m/g,h.scaleY=g}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,r,n,v,o){var c=this.matrix,m=Math.sin(n),p=Math.cos(n);return c[4]=h,c[5]=r,c[0]=p*v,c[1]=m*v,c[2]=-m*o,c[3]=p*o,this},applyInverse:function(h,r,n){n===void 0&&(n=new d);var v=this.matrix,o=v[0],c=v[1],m=v[2],p=v[3],g=v[4],x=v[5],E=1/(o*p+m*-c);return n.x=p*E*h+-m*E*r+(x*m-g*p)*E,n.y=o*E*r+-c*E*h+(-x*o+g*c)*E,n},setQuad:function(h,r,n,v,o,c){c===void 0&&(c=this.quad);var m=this.matrix,p=m[0],g=m[1],x=m[2],E=m[3],P=m[4],S=m[5];return c[0]=h*p+r*x+P,c[1]=h*g+r*E+S,c[2]=h*p+v*x+P,c[3]=h*g+v*E+S,c[4]=n*p+v*x+P,c[5]=n*g+v*E+S,c[6]=n*p+r*x+P,c[7]=n*g+r*E+S,o&&c.forEach(function(M,b){c[b]=Math.round(M)}),c},getX:function(h,r){return h*this.a+r*this.c+this.e},getY:function(h,r){return h*this.b+r*this.d+this.f},getXRound:function(h,r,n){var v=this.getX(h,r);return n&&(v=Math.round(v)),v},getYRound:function(h,r,n){var v=this.getY(h,r);return n&&(v=Math.round(v)),v},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});a.exports=l},59694:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(u){return this.visible=u,this}};a.exports=e},64937:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59959),y=e(95723),d=e(56694),l=e(64937),h=e(56631),r=e(89980),n=e(74118),v=e(98524),o=e(58795),c=e(93736),m=new d({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.PostPipeline,l.Transform,l.Visible,v],initialize:function(g,x,E,P){r.call(this,g,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=g.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(x,E),this.setBlendMode(y.SKIP_CHECK),P&&this.add(P)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(p){return p===void 0&&(p=!0),this.exclusive=p,this},getBounds:function(p){if(p===void 0&&(p=new n),p.setTo(this.x,this.y,0,0),this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix(),x=g.transformPoint(this.x,this.y);p.setTo(x.x,x.y,0,0)}if(this.list.length>0){var E=this.list,P=new n,S=!1;p.setEmpty();for(var M=0;M<E.length;M++){var b=E[M];if(b.getTextBounds){var A=b.getTextBounds().global;P.setTo(A.x,A.y,A.width,A.height)}else if(b.getBounds)b.getBounds(P);else continue;S?o(P,p,p):(p.setTo(P.x,P.y,P.width,P.height),S=!0)}}return p},addHandler:function(p){p.once(h.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer&&p.parentContainer.remove(p),p.parentContainer=this,p.removeFromDisplayList(),p.addedToScene())},removeHandler:function(p){p.off(h.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer=null,p.removedFromScene(),p.addToDisplayList())},pointToContainer:function(p,g){g===void 0&&(g=new c),this.parentContainer?this.parentContainer.pointToContainer(p,g):(g.x=p.x,g.y=p.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(p.x,p.y,g),g},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(p){return u.Add(this.list,p,this.maxSize,this.addHandler,this),this},addAt:function(p,g){return u.AddAt(this.list,p,g,this.maxSize,this.addHandler,this),this},getAt:function(p){return this.list[p]},getIndex:function(p){return this.list.indexOf(p)},sort:function(p,g){return p?(g===void 0&&(g=function(x,E){return x[p]-E[p]}),u.StableSort(this.list,g),this):this},getByName:function(p){return u.GetFirst(this.list,"name",p)},getRandom:function(p,g){return u.GetRandom(this.list,p,g)},getFirst:function(p,g,x,E){return u.GetFirst(this.list,p,g,x,E)},getAll:function(p,g,x,E){return u.GetAll(this.list,p,g,x,E)},count:function(p,g,x,E){return u.CountAllMatching(this.list,p,g,x,E)},swap:function(p,g){return u.Swap(this.list,p,g),this},moveTo:function(p,g){return u.MoveTo(this.list,p,g),this},moveAbove:function(p,g){return u.MoveAbove(this.list,p,g),this},moveBelow:function(p,g){return u.MoveBelow(this.list,p,g),this},remove:function(p,g){var x=u.Remove(this.list,p,this.removeHandler,this);if(g&&x){Array.isArray(x)||(x=[x]);for(var E=0;E<x.length;E++)x[E].destroy()}return this},removeAt:function(p,g){var x=u.RemoveAt(this.list,p,this.removeHandler,this);return g&&x&&x.destroy(),this},removeBetween:function(p,g,x){var E=u.RemoveBetween(this.list,p,g,this.removeHandler,this);if(x)for(var P=0;P<E.length;P++)E[P].destroy();return this},removeAll:function(p){var g=this.list;if(p){for(var x=0;x<g.length;x++)g[x]&&g[x].scene&&(g[x].off(h.DESTROY,this.remove,this),g[x].destroy());this.list=[]}else u.RemoveBetween(g,0,g.length,this.removeHandler,this);return this},bringToTop:function(p){return u.BringToTop(this.list,p),this},sendToBack:function(p){return u.SendToBack(this.list,p),this},moveUp:function(p){return u.MoveUp(this.list,p),this},moveDown:function(p){return u.MoveDown(this.list,p),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(p,g,x){var E=u.Replace(this.list,p,g);return E&&(this.addHandler(g),this.removeHandler(p),x&&p.destroy()),this},exists:function(p){return this.list.indexOf(p)>-1},setAll:function(p,g,x,E){return u.SetAll(this.list,p,g,x,E),this},each:function(p,g){var x=[null],E,P=this.list.slice(),S=P.length;for(E=2;E<arguments.length;E++)x.push(arguments[E]);for(E=0;E<S;E++)x[0]=P[E],p.apply(g,x);return this},iterate:function(p,g){var x=[null],E;for(E=2;E<arguments.length;E++)x.push(arguments[E]);for(E=0;E<this.list.length;E++)x[0]=this.list[E],p.apply(g,x);return this},setScrollFactor:function(p,g,x){return g===void 0&&(g=p),x===void 0&&(x=!1),this.scrollFactorX=p,this.scrollFactorY=g,x&&(u.SetAll(this.list,"scrollFactorX",p),u.SetAll(this.list,"scrollFactorY",g)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});a.exports=m},13916:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y.addToRenderList(u);var l=u.list;if(l.length!==0){var h=u.localTransform;d?(h.loadIdentity(),h.multiply(d),h.translate(u.x,u.y),h.rotate(u.rotation),h.scale(u.scaleX,u.scaleY)):h.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var r=u.blendMode!==-1;r||e.setBlendMode(0);var n=u._alpha,v=u.scrollFactorX,o=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(e,null,y);for(var c=0;c<l.length;c++){var m=l[c];if(!!m.willRender(y)){var p=m.alpha,g=m.scrollFactorX,x=m.scrollFactorY;!r&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode),m.setScrollFactor(g*v,x*o),m.setAlpha(p*n),m.renderCanvas(e,m,y,h),m.setAlpha(p),m.setScrollFactor(g,x)}}u.mask&&u.mask.postRenderCanvas(e)}};a.exports=T},44516:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(70339),d=e(99325),l=e(20494);d.register("container",function(h,r){h===void 0&&(h={});var n=l(h,"x",0),v=l(h,"y",0),o=l(h,"children",null),c=new y(this.scene,n,v,o);return r!==void 0&&(h.add=r),u(this.scene,c,h),c})},23400:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70339),y=e(61286);y.register("container",function(d,l,h){return this.displayList.add(new u(this.scene,d,l,h))})},98524:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(36934),d=e(13916),a.exports={renderWebGL:y,renderCanvas:d}},36934:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y.addToRenderList(u);var l=u.list,h=l.length;if(h!==0){var r=u.localTransform;d?(r.loadIdentity(),r.multiply(d),r.translate(u.x,u.y),r.rotate(u.rotation),r.scale(u.scaleX,u.scaleY)):r.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),e.pipelines.preBatch(u);var n=u.blendMode!==-1;n||e.setBlendMode(0);for(var v=u.alpha,o=u.scrollFactorX,c=u.scrollFactorY,m=0;m<h;m++){var p=l[m];if(!!p.willRender(y)){var g,x,E,P;if(p.alphaTopLeft!==void 0)g=p.alphaTopLeft,x=p.alphaTopRight,E=p.alphaBottomLeft,P=p.alphaBottomRight;else{var S=p.alpha;g=S,x=S,E=S,P=S}var M=p.scrollFactorX,b=p.scrollFactorY;!n&&p.blendMode!==e.currentBlendMode&&e.setBlendMode(p.blendMode);var A=p.mask;A&&A.preRenderWebGL(e,p,y);var L=p.type;L!==e.currentType&&(e.newType=!0,e.currentType=L),e.nextTypeMatch=m<h-1?l[m+1].type===e.currentType:!1,p.setScrollFactor(M*o,b*c),p.setAlpha(g*v,x*v,E*v,P*v),p.renderWebGL(e,p,y,r,u),p.setAlpha(g,x,E,P),p.setScrollFactor(M,b),A&&A.postRenderWebGL(e,y),e.newType=!1}}e.pipelines.postBatch(u)}};a.exports=T},2452:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(11603),l=e(89980),h=e(42911),r=e(55638),n=e(7599),v=e(51729),o=new u({Extends:l,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Origin,y.ScrollFactor,y.Transform,y.Visible,d],initialize:function(m,p,g,x,E,P){l.call(this,m,"DOMElement"),this.parent=m.sys.game.domContainer,this.cache=m.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(p,g),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),E,P):this.createElement(x,E,P):x&&this.setElement(x,E,P),m.sys.events.on(n.SLEEP,this.handleSceneEvent,this),m.sys.events.on(n.WAKE,this.handleSceneEvent,this),m.sys.events.on(n.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(c){var m=this.node,p=m.style;m&&(p.display=c.settings.visible?"block":"none")},setSkew:function(c,m){return c===void 0&&(c=0),m===void 0&&(m=c),this.skewX=c,this.skewY=m,this},setPerspective:function(c){return this.parent.style.perspective=c+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(c){this.parent.style.perspective=c+"px"}},addListener:function(c){if(this.node){c=c.split(" ");for(var m=0;m<c.length;m++)this.node.addEventListener(c[m],this.handler,!1)}return this},removeListener:function(c){if(this.node){c=c.split(" ");for(var m=0;m<c.length;m++)this.node.removeEventListener(c[m],this.handler)}return this},dispatchNativeEvent:function(c){this.emit(c.type,c)},createElement:function(c,m,p){return this.setElement(document.createElement(c),m,p)},setElement:function(c,m,p){this.removeElement();var g;if(typeof c=="string"?(c[0]==="#"&&(c=c.substr(1)),g=document.getElementById(c)):typeof c=="object"&&c.nodeType===1&&(g=c),!g)return this;if(this.node=g,m&&h(m))for(var x in m)g.style[x]=m[x];else typeof m=="string"&&(g.style=m);return g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),p&&(g.innerText=p),this.updateSize()},createFromCache:function(c,m){var p=this.cache.get(c);return p&&this.createFromHTML(p,m),this},createFromHTML:function(c,m){m===void 0&&(m="div"),this.removeElement();var p=document.createElement(m);return this.node=p,p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),p.innerHTML=c,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var c=this.node,m=c.getBoundingClientRect();return this.width=c.clientWidth,this.height=c.clientHeight,this.displayWidth=m.width||0,this.displayHeight=m.height||0,this},getChildByProperty:function(c,m){if(this.node){for(var p=this.node.querySelectorAll("*"),g=0;g<p.length;g++)if(p[g][c]===m)return p[g]}return null},getChildByID:function(c){return this.getChildByProperty("id",c)},getChildByName:function(c){return this.getChildByProperty("name",c)},setClassName:function(c){return this.node&&(this.node.className=c,this.updateSize()),this},setText:function(c){return this.node&&(this.node.innerText=c,this.updateSize()),this},setHTML:function(c){return this.node&&(this.node.innerHTML=c,this.updateSize()),this},preRender:function(){var c=this.parentContainer,m=this.node;m&&c&&!c.willRender()&&(m.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(n.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(n.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(n.PRE_RENDER,this.preRender,this)}});a.exports=o},66070:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(2452),y=e(89980),d=e(69360),l=new d,h=new d,r=new d,n=function(v,o,c,m){if(!!o.node){var p=o.node.style,g=o.scene.sys.settings;if(!p||!g.visible||y.RENDER_MASK!==o.renderFlags||o.cameraFilter!==0&&o.cameraFilter&c.id||o.parentContainer&&!o.parentContainer.willRender()){p.display="none";return}var x=o.parentContainer,E=c.alpha*o.alpha;x&&(E*=x.alpha);var P=l,S=h,M=r,b=0,A=0,L="0%",R="0%";m?(b=o.width*o.scaleX*o.originX,A=o.height*o.scaleY*o.originY,S.applyITRS(o.x-b,o.y-A,o.rotation,o.scaleX,o.scaleY),P.copyFrom(c.matrix),P.multiplyWithOffset(m,-c.scrollX*o.scrollFactorX,-c.scrollY*o.scrollFactorY),S.e=o.x-b,S.f=o.y-A,P.multiply(S,M)):(b=o.width*o.originX,A=o.height*o.originY,S.applyITRS(o.x-b,o.y-A,o.rotation,o.scaleX,o.scaleY),P.copyFrom(c.matrix),L=100*o.originX+"%",R=100*o.originY+"%",S.e-=c.scrollX*o.scrollFactorX,S.f-=c.scrollY*o.scrollFactorY,P.multiply(S,M)),o.transformOnly||(p.display="block",p.opacity=E,p.zIndex=o._depth,p.pointerEvents=o.pointerEvents,p.mixBlendMode=u[o._blendMode]),p.transform=M.getCSSMatrix()+" skew("+o.skewX+"rad, "+o.skewY+"rad) rotate3d("+o.rotate3d.x+","+o.rotate3d.y+","+o.rotate3d.z+","+o.rotate3d.w+o.rotate3dAngle+")",p.transformOrigin=L+" "+R}};a.exports=n},66788:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(38943),y=e(61286);y.register("dom",function(d,l,h,r,n){var v=new u(this.scene,d,l,h,r,n);return this.displayList.add(v),v})},11603:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(66070),d=e(66070),a.exports={renderWebGL:y,renderCanvas:d}},65492:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addedtoscene"},98398:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},40239:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removedfromscene"},17286:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},31496:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="created"},89587:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="error"},96342:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},49614:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="play"},24418:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="seeked"},87318:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="seeking"},61922:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},13991:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="timeout"},4052:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="unlocked"},56631:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STOP:e(61922),VIDEO_TIMEOUT:e(13991),VIDEO_UNLOCKED:e(4052)}},39419:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(79394),h=new u({Extends:d,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.Origin,y.ScrollFactor,y.Size,y.Texture,y.Tint,y.Transform,y.Visible,l],initialize:function(n){d.call(this,n,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});a.exports=h},96699:()=>{},41155:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(39419),y=e(61286);y.register("extern",function(){var d=new u(this.scene);return this.displayList.add(d),d})},79394:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(81410),d=e(96699),a.exports={renderWebGL:y,renderCanvas:d}},81410:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=function(d,l,h,r){d.pipelines.clear();var n=u(l,h,r).calc;l.render.call(l,d,h,n),d.pipelines.rebind()};a.exports=y},36266:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(51052),y=e(56694),d=e(36266),l=e(64937),h=e(95669),r=e(89980),n=e(72632),v=e(10850),o=e(83392),c=e(60898),m=new y({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.Transform,l.Visible,l.ScrollFactor,c],initialize:function(g,x){var E=v(x,"x",0),P=v(x,"y",0);r.call(this,g,"Graphics"),this.setPosition(E,P),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(x)},setDefaultStyles:function(p){return v(p,"lineStyle",null)&&(this.defaultStrokeWidth=v(p,"lineStyle.width",1),this.defaultStrokeColor=v(p,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(p,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(p,"fillStyle",null)&&(this.defaultFillColor=v(p,"fillStyle.color",16777215),this.defaultFillAlpha=v(p,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(p,g,x){return x===void 0&&(x=1),this.commandBuffer.push(d.LINE_STYLE,p,g,x),this._lineWidth=p,this},fillStyle:function(p,g){return g===void 0&&(g=1),this.commandBuffer.push(d.FILL_STYLE,p,g),this},fillGradientStyle:function(p,g,x,E,P,S,M,b){return P===void 0&&(P=1),S===void 0&&(S=P),M===void 0&&(M=P),b===void 0&&(b=P),this.commandBuffer.push(d.GRADIENT_FILL_STYLE,P,S,M,b,p,g,x,E),this},lineGradientStyle:function(p,g,x,E,P,S){return S===void 0&&(S=1),this.commandBuffer.push(d.GRADIENT_LINE_STYLE,p,S,g,x,E,P),this},beginPath:function(){return this.commandBuffer.push(d.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(d.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(d.FILL_PATH),this},fill:function(){return this.commandBuffer.push(d.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(d.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(d.STROKE_PATH),this},fillCircleShape:function(p){return this.fillCircle(p.x,p.y,p.radius)},strokeCircleShape:function(p){return this.strokeCircle(p.x,p.y,p.radius)},fillCircle:function(p,g,x){return this.beginPath(),this.arc(p,g,x,0,o.PI2),this.fillPath(),this},strokeCircle:function(p,g,x){return this.beginPath(),this.arc(p,g,x,0,o.PI2),this.strokePath(),this},fillRectShape:function(p){return this.fillRect(p.x,p.y,p.width,p.height)},strokeRectShape:function(p){return this.strokeRect(p.x,p.y,p.width,p.height)},fillRect:function(p,g,x,E){return this.commandBuffer.push(d.FILL_RECT,p,g,x,E),this},strokeRect:function(p,g,x,E){var P=this._lineWidth/2,S=p-P,M=p+P;return this.beginPath(),this.moveTo(p,g),this.lineTo(p,g+E),this.strokePath(),this.beginPath(),this.moveTo(p+x,g),this.lineTo(p+x,g+E),this.strokePath(),this.beginPath(),this.moveTo(S,g),this.lineTo(M+x,g),this.strokePath(),this.beginPath(),this.moveTo(S,g+E),this.lineTo(M+x,g+E),this.strokePath(),this},fillRoundedRect:function(p,g,x,E,P){P===void 0&&(P=20);var S=P,M=P,b=P,A=P;typeof P!="number"&&(S=n(P,"tl",20),M=n(P,"tr",20),b=n(P,"bl",20),A=n(P,"br",20));var L=S>=0,R=M>=0,O=b>=0,D=A>=0;return S=Math.abs(S),M=Math.abs(M),b=Math.abs(b),A=Math.abs(A),this.beginPath(),this.moveTo(p+S,g),this.lineTo(p+x-M,g),R?this.arc(p+x-M,g+M,M,-o.TAU,0):this.arc(p+x,g,M,Math.PI,o.TAU,!0),this.lineTo(p+x,g+E-A),D?this.arc(p+x-A,g+E-A,A,0,o.TAU):this.arc(p+x,g+E,A,-o.TAU,Math.PI,!0),this.lineTo(p+b,g+E),O?this.arc(p+b,g+E-b,b,o.TAU,Math.PI):this.arc(p,g+E,b,0,-o.TAU,!0),this.lineTo(p,g+S),L?this.arc(p+S,g+S,S,-Math.PI,-o.TAU):this.arc(p,g,S,o.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(p,g,x,E,P){P===void 0&&(P=20);var S=P,M=P,b=P,A=P,L=Math.min(x,E)/2;typeof P!="number"&&(S=n(P,"tl",20),M=n(P,"tr",20),b=n(P,"bl",20),A=n(P,"br",20));var R=S>=0,O=M>=0,D=b>=0,B=A>=0;return S=Math.min(Math.abs(S),L),M=Math.min(Math.abs(M),L),b=Math.min(Math.abs(b),L),A=Math.min(Math.abs(A),L),this.beginPath(),this.moveTo(p+S,g),this.lineTo(p+x-M,g),this.moveTo(p+x-M,g),O?this.arc(p+x-M,g+M,M,-o.TAU,0):this.arc(p+x,g,M,Math.PI,o.TAU,!0),this.lineTo(p+x,g+E-A),this.moveTo(p+x,g+E-A),B?this.arc(p+x-A,g+E-A,A,0,o.TAU):this.arc(p+x,g+E,A,-o.TAU,Math.PI,!0),this.lineTo(p+b,g+E),this.moveTo(p+b,g+E),D?this.arc(p+b,g+E-b,b,o.TAU,Math.PI):this.arc(p,g+E,b,0,-o.TAU,!0),this.lineTo(p,g+S),this.moveTo(p,g+S),R?this.arc(p+S,g+S,S,-Math.PI,-o.TAU):this.arc(p,g,S,o.TAU,0,!0),this.strokePath(),this},fillPointShape:function(p,g){return this.fillPoint(p.x,p.y,g)},fillPoint:function(p,g,x){return!x||x<1?x=1:(p-=x/2,g-=x/2),this.commandBuffer.push(d.FILL_RECT,p,g,x,x),this},fillTriangleShape:function(p){return this.fillTriangle(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)},strokeTriangleShape:function(p){return this.strokeTriangle(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)},fillTriangle:function(p,g,x,E,P,S){return this.commandBuffer.push(d.FILL_TRIANGLE,p,g,x,E,P,S),this},strokeTriangle:function(p,g,x,E,P,S){return this.commandBuffer.push(d.STROKE_TRIANGLE,p,g,x,E,P,S),this},strokeLineShape:function(p){return this.lineBetween(p.x1,p.y1,p.x2,p.y2)},lineBetween:function(p,g,x,E){return this.beginPath(),this.moveTo(p,g),this.lineTo(x,E),this.strokePath(),this},lineTo:function(p,g){return this.commandBuffer.push(d.LINE_TO,p,g),this},moveTo:function(p,g){return this.commandBuffer.push(d.MOVE_TO,p,g),this},strokePoints:function(p,g,x,E){g===void 0&&(g=!1),x===void 0&&(x=!1),E===void 0&&(E=p.length),this.beginPath(),this.moveTo(p[0].x,p[0].y);for(var P=1;P<E;P++)this.lineTo(p[P].x,p[P].y);return g&&this.lineTo(p[0].x,p[0].y),x&&this.closePath(),this.strokePath(),this},fillPoints:function(p,g,x,E){g===void 0&&(g=!1),x===void 0&&(x=!1),E===void 0&&(E=p.length),this.beginPath(),this.moveTo(p[0].x,p[0].y);for(var P=1;P<E;P++)this.lineTo(p[P].x,p[P].y);return g&&this.lineTo(p[0].x,p[0].y),x&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(p,g){g===void 0&&(g=32);var x=p.getPoints(g);return this.strokePoints(x,!0)},strokeEllipse:function(p,g,x,E,P){P===void 0&&(P=32);var S=new h(p,g,x,E),M=S.getPoints(P);return this.strokePoints(M,!0)},fillEllipseShape:function(p,g){g===void 0&&(g=32);var x=p.getPoints(g);return this.fillPoints(x,!0)},fillEllipse:function(p,g,x,E,P){P===void 0&&(P=32);var S=new h(p,g,x,E),M=S.getPoints(P);return this.fillPoints(M,!0)},arc:function(p,g,x,E,P,S,M){return S===void 0&&(S=!1),M===void 0&&(M=0),this.commandBuffer.push(d.ARC,p,g,x,E,P,S,M),this},slice:function(p,g,x,E,P,S,M){return S===void 0&&(S=!1),M===void 0&&(M=0),this.commandBuffer.push(d.BEGIN_PATH),this.commandBuffer.push(d.MOVE_TO,p,g),this.commandBuffer.push(d.ARC,p,g,x,E,P,S,M),this.commandBuffer.push(d.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(d.SAVE),this},restore:function(){return this.commandBuffer.push(d.RESTORE),this},translateCanvas:function(p,g){return this.commandBuffer.push(d.TRANSLATE,p,g),this},scaleCanvas:function(p,g){return this.commandBuffer.push(d.SCALE,p,g),this},rotateCanvas:function(p){return this.commandBuffer.push(d.ROTATE,p),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(p,g,x){var E=this.scene.sys,P=E.game.renderer;g===void 0&&(g=E.scale.width),x===void 0&&(x=E.scale.height),m.TargetCamera.setScene(this.scene),m.TargetCamera.setViewport(0,0,g,x),m.TargetCamera.scrollX=this.x,m.TargetCamera.scrollY=this.y;var S,M,b={willReadFrequently:!0};if(typeof p=="string")if(E.textures.exists(p)){S=E.textures.get(p);var A=S.getSourceImage();A instanceof HTMLCanvasElement&&(M=A.getContext("2d",b))}else S=E.textures.createCanvas(p,g,x),M=S.getSourceImage().getContext("2d",b);else p instanceof HTMLCanvasElement&&(M=p.getContext("2d",b));return M&&(this.renderCanvas(P,this,m.TargetCamera,null,M,!1),S&&S.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});m.TargetCamera=new u,a.exports=m},91543:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36266),y=e(49584),d=function(l,h,r,n,v,o){var c=h.commandBuffer,m=c.length,p=v||l.currentContext;if(!(m===0||!y(l,p,h,r,n))){r.addToRenderList(h);var g=1,x=1,E=0,P=0,S=1,M=0,b=0,A=0;p.beginPath();for(var L=0;L<m;++L){var R=c[L];switch(R){case u.ARC:p.arc(c[L+1],c[L+2],c[L+3],c[L+4],c[L+5],c[L+6]),L+=7;break;case u.LINE_STYLE:S=c[L+1],E=c[L+2],g=c[L+3],M=(E&16711680)>>>16,b=(E&65280)>>>8,A=E&255,p.strokeStyle="rgba("+M+","+b+","+A+","+g+")",p.lineWidth=S,L+=3;break;case u.FILL_STYLE:P=c[L+1],x=c[L+2],M=(P&16711680)>>>16,b=(P&65280)>>>8,A=P&255,p.fillStyle="rgba("+M+","+b+","+A+","+x+")",L+=2;break;case u.BEGIN_PATH:p.beginPath();break;case u.CLOSE_PATH:p.closePath();break;case u.FILL_PATH:o||p.fill();break;case u.STROKE_PATH:o||p.stroke();break;case u.FILL_RECT:o?p.rect(c[L+1],c[L+2],c[L+3],c[L+4]):p.fillRect(c[L+1],c[L+2],c[L+3],c[L+4]),L+=4;break;case u.FILL_TRIANGLE:p.beginPath(),p.moveTo(c[L+1],c[L+2]),p.lineTo(c[L+3],c[L+4]),p.lineTo(c[L+5],c[L+6]),p.closePath(),o||p.fill(),L+=6;break;case u.STROKE_TRIANGLE:p.beginPath(),p.moveTo(c[L+1],c[L+2]),p.lineTo(c[L+3],c[L+4]),p.lineTo(c[L+5],c[L+6]),p.closePath(),o||p.stroke(),L+=6;break;case u.LINE_TO:p.lineTo(c[L+1],c[L+2]),L+=2;break;case u.MOVE_TO:p.moveTo(c[L+1],c[L+2]),L+=2;break;case u.LINE_FX_TO:p.lineTo(c[L+1],c[L+2]),L+=5;break;case u.MOVE_FX_TO:p.moveTo(c[L+1],c[L+2]),L+=5;break;case u.SAVE:p.save();break;case u.RESTORE:p.restore();break;case u.TRANSLATE:p.translate(c[L+1],c[L+2]),L+=2;break;case u.SCALE:p.scale(c[L+1],c[L+2]),L+=2;break;case u.ROTATE:p.rotate(c[L+1]),L+=1;break;case u.GRADIENT_FILL_STYLE:L+=5;break;case u.GRADIENT_LINE_STYLE:L+=6;break}}p.restore()}};a.exports=d},41286:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),y=e(33182);u.register("graphics",function(d,l){d===void 0&&(d={}),l!==void 0&&(d.add=l);var h=new y(this.scene,d);return d.add&&this.scene.sys.displayList.add(h),h})},13122:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(33182),y=e(61286);y.register("graphics",function(d){return this.displayList.add(new u(this.scene,d))})},60898:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(34429),d=e(91543),d=e(91543),a.exports={renderWebGL:y,renderCanvas:d}},34429:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36266),y=e(73329),d=e(69360),l=e(75512),h=function(c,m,p){this.x=c,this.y=m,this.width=p},r=function(c,m,p){this.points=[],this.pointsLength=1,this.points[0]=new h(c,m,p)},n=[],v=new d,o=function(c,m,p,g){if(m.commandBuffer.length!==0){p.addToRenderList(m);var x=c.pipelines.set(m.pipeline,m);c.pipelines.preBatch(m);for(var E=y(m,p,g).calc,P=v.loadIdentity(),S=m.commandBuffer,M=p.alpha*m.alpha,b=1,A=x.fillTint,L=x.strokeTint,R=0,O=0,D=0,B=.01,G=Math.PI*2,z,X=[],U=0,V=!0,N=null,W=l.getTintAppendFloatAlpha,F=0;F<S.length;F++)switch(z=S[F],z){case u.BEGIN_PATH:{X.length=0,N=null,V=!0;break}case u.CLOSE_PATH:{V=!1,N&&N.points.length&&N.points.push(N.points[0]);break}case u.FILL_PATH:{for(U=0;U<X.length;U++)x.batchFillPath(X[U].points,P,E);break}case u.STROKE_PATH:{for(U=0;U<X.length;U++)x.batchStrokePath(X[U].points,b,V,P,E);break}case u.LINE_STYLE:{b=S[++F];var I=S[++F],k=S[++F]*M,Y=W(I,k);L.TL=Y,L.TR=Y,L.BL=Y,L.BR=Y;break}case u.FILL_STYLE:{var H=S[++F],K=S[++F]*M,j=W(H,K);A.TL=j,A.TR=j,A.BL=j,A.BR=j;break}case u.GRADIENT_FILL_STYLE:{var J=S[++F]*M,Q=S[++F]*M,Z=S[++F]*M,q=S[++F]*M;A.TL=W(S[++F],J),A.TR=W(S[++F],Q),A.BL=W(S[++F],Z),A.BR=W(S[++F],q);break}case u.GRADIENT_LINE_STYLE:{b=S[++F];var et=S[++F]*M;L.TL=W(S[++F],et),L.TR=W(S[++F],et),L.BL=W(S[++F],et),L.BR=W(S[++F],et);break}case u.ARC:{var tt=0,it=S[++F],ut=S[++F],ot=S[++F],ht=S[++F],st=S[++F],at=S[++F],nt=S[++F];for(st-=ht,at?st<-G?st=-G:st>0&&(st=-G+st%G):st>G?st=G:st<0&&(st=G+st%G),N===null&&(N=new r(it+Math.cos(ht)*ot,ut+Math.sin(ht)*ot,b),X.push(N),tt+=B);tt<1+nt;)D=st*tt+ht,R=it+Math.cos(D)*ot,O=ut+Math.sin(D)*ot,N.points.push(new h(R,O,b)),tt+=B;D=st+ht,R=it+Math.cos(D)*ot,O=ut+Math.sin(D)*ot,N.points.push(new h(R,O,b));break}case u.FILL_RECT:{x.batchFillRect(S[++F],S[++F],S[++F],S[++F],P,E);break}case u.FILL_TRIANGLE:{x.batchFillTriangle(S[++F],S[++F],S[++F],S[++F],S[++F],S[++F],P,E);break}case u.STROKE_TRIANGLE:{x.batchStrokeTriangle(S[++F],S[++F],S[++F],S[++F],S[++F],S[++F],b,P,E);break}case u.LINE_TO:{N!==null?N.points.push(new h(S[++F],S[++F],b)):(N=new r(S[++F],S[++F],b),X.push(N));break}case u.MOVE_TO:{N=new r(S[++F],S[++F],b),X.push(N);break}case u.SAVE:{n.push(P.copyToArray());break}case u.RESTORE:{P.copyFromArray(n.pop());break}case u.TRANSLATE:{it=S[++F],ut=S[++F],P.translate(it,ut);break}case u.SCALE:{it=S[++F],ut=S[++F],P.scale(it,ut);break}case u.ROTATE:{P.rotate(S[++F]);break}}c.pipelines.postBatch(m)}};a.exports=o},59192:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83979),y=e(56694),d=e(56631),l=e(6659),h=e(71608),r=e(72632),n=e(10850),v=e(19256),o=e(42911),c=e(75757),m=e(58403),p=e(13747),g=new y({Extends:l,initialize:function(E,P,S){l.call(this),S?P&&!Array.isArray(P)&&(P=[P]):Array.isArray(P)?o(P[0])&&(S=P,P=null):o(P)&&(S=P,P=null),this.scene=E,this.children=new m,this.isParent=!0,this.type="Group",this.classType=r(S,"classType",p),this.name=r(S,"name",""),this.active=r(S,"active",!0),this.maxSize=r(S,"maxSize",-1),this.defaultKey=r(S,"defaultKey",null),this.defaultFrame=r(S,"defaultFrame",null),this.runChildUpdate=r(S,"runChildUpdate",!1),this.createCallback=r(S,"createCallback",null),this.removeCallback=r(S,"removeCallback",null),this.createMultipleCallback=r(S,"createMultipleCallback",null),this.internalCreateCallback=r(S,"internalCreateCallback",null),this.internalRemoveCallback=r(S,"internalRemoveCallback",null),P&&this.addMultiple(P),S&&this.createMultiple(S),this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(x,E,P,S,M,b){if(x===void 0&&(x=0),E===void 0&&(E=0),P===void 0&&(P=this.defaultKey),S===void 0&&(S=this.defaultFrame),M===void 0&&(M=!0),b===void 0&&(b=!0),this.isFull())return null;var A=new this.classType(this.scene,x,E,P,S);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=M,A.setActive(b),this.add(A),A},createMultiple:function(x){if(this.isFull())return[];Array.isArray(x)||(x=[x]);var E=[];if(x[0].key)for(var P=0;P<x.length;P++){var S=this.createFromConfig(x[P]);E=E.concat(S)}return E},createFromConfig:function(x){if(this.isFull())return[];this.classType=r(x,"classType",this.classType);var E=r(x,"key",void 0),P=r(x,"frame",null),S=r(x,"visible",!0),M=r(x,"active",!0),b=[];if(E===void 0)return b;Array.isArray(E)||(E=[E]),Array.isArray(P)||(P=[P]);var A=r(x,"repeat",0),L=r(x,"randomKey",!1),R=r(x,"randomFrame",!1),O=r(x,"yoyo",!1),D=r(x,"quantity",!1),B=r(x,"frameQuantity",1),G=r(x,"max",0),z=c(E,P,{max:G,qty:D||B,random:L,randomB:R,repeat:A,yoyo:O});x.createCallback&&(this.createCallback=x.createCallback),x.removeCallback&&(this.removeCallback=x.removeCallback);for(var X=0;X<z.length;X++){var U=this.create(0,0,z[X].a,z[X].b,S,M);if(!U)break;b.push(U)}if(v(x,"setXY")){var V=n(x,"setXY.x",0),N=n(x,"setXY.y",0),W=n(x,"setXY.stepX",0),F=n(x,"setXY.stepY",0);u.SetXY(b,V,N,W,F)}if(v(x,"setRotation")){var I=n(x,"setRotation.value",0),k=n(x,"setRotation.step",0);u.SetRotation(b,I,k)}if(v(x,"setScale")){var Y=n(x,"setScale.x",1),H=n(x,"setScale.y",Y),K=n(x,"setScale.stepX",0),j=n(x,"setScale.stepY",0);u.SetScale(b,Y,H,K,j)}if(v(x,"setOrigin")){var J=n(x,"setOrigin.x",.5),Q=n(x,"setOrigin.y",J),Z=n(x,"setOrigin.stepX",0),q=n(x,"setOrigin.stepY",0);u.SetOrigin(b,J,Q,Z,q)}if(v(x,"setAlpha")){var et=n(x,"setAlpha.value",1),tt=n(x,"setAlpha.step",0);u.SetAlpha(b,et,tt)}if(v(x,"setDepth")){var it=n(x,"setDepth.value",0),ut=n(x,"setDepth.step",0);u.SetDepth(b,it,ut)}if(v(x,"setScrollFactor")){var ot=n(x,"setScrollFactor.x",1),ht=n(x,"setScrollFactor.y",ot),st=n(x,"setScrollFactor.stepX",0),at=n(x,"setScrollFactor.stepY",0);u.SetScrollFactor(b,ot,ht,st,at)}var nt=r(x,"hitArea",null),gt=r(x,"hitAreaCallback",null);nt&&u.SetHitArea(b,nt,gt);var dt=r(x,"gridAlign",!1);return dt&&u.GridAlign(b,dt),this.createMultipleCallback&&this.createMultipleCallback.call(this,b),b},preUpdate:function(x,E){if(!(!this.runChildUpdate||this.children.size===0))for(var P=this.children.entries.slice(),S=0;S<P.length;S++){var M=P[S];M.active&&M.update(x,E)}},add:function(x,E){return E===void 0&&(E=!1),this.isFull()?this:(this.children.set(x),this.internalCreateCallback&&this.internalCreateCallback.call(this,x),this.createCallback&&this.createCallback.call(this,x),E&&(x.addToDisplayList(this.scene.sys.displayList),x.addToUpdateList()),x.on(d.DESTROY,this.remove,this),this)},addMultiple:function(x,E){if(E===void 0&&(E=!1),Array.isArray(x))for(var P=0;P<x.length;P++)this.add(x[P],E);return this},remove:function(x,E,P){return E===void 0&&(E=!1),P===void 0&&(P=!1),this.children.contains(x)?(this.children.delete(x),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,x),this.removeCallback&&this.removeCallback.call(this,x),x.off(d.DESTROY,this.remove,this),P?x.destroy():E&&(x.removeFromDisplayList(),x.removeFromUpdateList()),this):this},clear:function(x,E){x===void 0&&(x=!1),E===void 0&&(E=!1);for(var P=this.children,S=0;S<P.size;S++){var M=P.entries[S];M.off(d.DESTROY,this.remove,this),E?M.destroy():x&&(M.removeFromDisplayList(),M.removeFromUpdateList())}return this.children.clear(),this},contains:function(x){return this.children.contains(x)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(x,E,P,S){return h(this.children.entries,x,E,P,S)},getFirst:function(x,E,P,S,M,b,A){return this.getHandler(!0,1,x,E,P,S,M,b,A)},getFirstNth:function(x,E,P,S,M,b,A,L){return this.getHandler(!0,x,E,P,S,M,b,A,L)},getLast:function(x,E,P,S,M,b,A){return this.getHandler(!1,1,x,E,P,S,M,b,A)},getLastNth:function(x,E,P,S,M,b,A,L){return this.getHandler(!1,x,E,P,S,M,b,A,L)},getHandler:function(x,E,P,S,M,b,A,L,R){P===void 0&&(P=!1),S===void 0&&(S=!1);var O,D,B=0,G=this.children.entries;if(x)for(D=0;D<G.length;D++)if(O=G[D],O.active===P){if(B++,B===E)break}else O=null;else for(D=G.length-1;D>=0;D--)if(O=G[D],O.active===P){if(B++,B===E)break}else O=null;return O?(typeof M=="number"&&(O.x=M),typeof b=="number"&&(O.y=b),O):S?this.create(M,b,A,L,R):null},get:function(x,E,P,S,M){return this.getFirst(!1,!0,x,E,P,S,M)},getFirstAlive:function(x,E,P,S,M,b){return this.getFirst(!0,x,E,P,S,M,b)},getFirstDead:function(x,E,P,S,M,b){return this.getFirst(!1,x,E,P,S,M,b)},playAnimation:function(x,E){return u.PlayAnimation(this.children.entries,x,E),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(x){x===void 0&&(x=!0);for(var E=0,P=0;P<this.children.size;P++)this.children.entries[P].active===x&&E++;return E},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var x=this.getTotalUsed(),E=this.maxSize===-1?999999999999:this.maxSize;return E-x},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},propertyValueSet:function(x,E,P,S,M){return u.PropertyValueSet(this.children.entries,x,E,P,S,M),this},propertyValueInc:function(x,E,P,S,M){return u.PropertyValueInc(this.children.entries,x,E,P,S,M),this},setX:function(x,E){return u.SetX(this.children.entries,x,E),this},setY:function(x,E){return u.SetY(this.children.entries,x,E),this},setXY:function(x,E,P,S){return u.SetXY(this.children.entries,x,E,P,S),this},incX:function(x,E){return u.IncX(this.children.entries,x,E),this},incY:function(x,E){return u.IncY(this.children.entries,x,E),this},incXY:function(x,E,P,S){return u.IncXY(this.children.entries,x,E,P,S),this},shiftPosition:function(x,E,P){return u.ShiftPosition(this.children.entries,x,E,P),this},angle:function(x,E){return u.Angle(this.children.entries,x,E),this},rotate:function(x,E){return u.Rotate(this.children.entries,x,E),this},rotateAround:function(x,E){return u.RotateAround(this.children.entries,x,E),this},rotateAroundDistance:function(x,E,P){return u.RotateAroundDistance(this.children.entries,x,E,P),this},setAlpha:function(x,E){return u.SetAlpha(this.children.entries,x,E),this},setTint:function(x,E,P,S){return u.SetTint(this.children.entries,x,E,P,S),this},setOrigin:function(x,E,P,S){return u.SetOrigin(this.children.entries,x,E,P,S),this},scaleX:function(x,E){return u.ScaleX(this.children.entries,x,E),this},scaleY:function(x,E){return u.ScaleY(this.children.entries,x,E),this},scaleXY:function(x,E,P,S){return u.ScaleXY(this.children.entries,x,E,P,S),this},setDepth:function(x,E){return u.SetDepth(this.children.entries,x,E),this},setBlendMode:function(x){return u.SetBlendMode(this.children.entries,x),this},setHitArea:function(x,E){return u.SetHitArea(this.children.entries,x,E),this},shuffle:function(){return u.Shuffle(this.children.entries),this},kill:function(x){this.children.contains(x)&&x.setActive(!1)},killAndHide:function(x){this.children.contains(x)&&(x.setActive(!1),x.setVisible(!1))},setVisible:function(x,E,P){return u.SetVisible(this.children.entries,x,E,P),this},toggleVisible:function(){return u.ToggleVisible(this.children.entries),this},destroy:function(x,E){x===void 0&&(x=!1),E===void 0&&(E=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(d.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(E,x),this.scene=void 0,this.children=void 0)}});a.exports=g},61295:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),y=e(59192);u.register("group",function(d){return new y(this.scene,null,d)})},62598:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59192),y=e(61286);y.register("group",function(d,l){return this.updateList.add(new u(this.scene,d,l))})},1539:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(57322),h=new u({Extends:d,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.TextureCrop,y.Tint,y.Transform,y.Visible,l],initialize:function(n,v,o,c,m){d.call(this,n,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,m),this.setPosition(v,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});a.exports=h},57786:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y.addToRenderList(u),e.batchSprite(u,u.frame,y,d)};a.exports=T},83556:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(1539);y.register("image",function(h,r){h===void 0&&(h={});var n=d(h,"key",null),v=d(h,"frame",null),o=new l(this.scene,0,0,n,v);return r!==void 0&&(h.add=r),u(this.scene,o,h),o})},20927:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1539),y=e(61286);y.register("image",function(d,l,h,r){return this.displayList.add(new u(this.scene,d,l,h,r))})},57322:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(59390),d=e(57786),a.exports={renderWebGL:y,renderCanvas:d}},59390:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y.addToRenderList(u),this.pipeline.batchSprite(u,y,d)};a.exports=T},48013:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};u.Shader=e(27902),u.Mesh=e(83321),u.NineSlice=e(44139),u.PointLight=e(13171),u.Plane=e(33412),u.Factories.Shader=e(51979),u.Factories.Mesh=e(8767),u.Factories.NineSlice=e(53778),u.Factories.PointLight=e(91201),u.Factories.Plane=e(58322),u.Creators.Shader=e(13908),u.Creators.Mesh=e(41839),u.Creators.NineSlice=e(40964),u.Creators.PointLight=e(162),u.Creators.Plane=e(10912),u.Light=e(14455),u.LightsManager=e(26193),u.LightsPlugin=e(50296),a.exports=u},85305:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y=e(56694),d=e(64937),l=e(48129),h=e(81078),r=e(6659),n=e(56631),v=e(71207),o=e(58010),c=e(7599),m=e(17922),p=new y({Extends:v,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Mask,d.PostPipeline,d.Visible,r,o],initialize:function(x,E){v.call(this,x),r.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),E&&this.add(E),x.sys.queueDepthSort()},setActive:function(g){return this.active=g,this},setName:function(g){return this.name=g,this},setState:function(g){return this.state=g,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(g,x){return this.data||(this.data=new h(this)),this.data.set(g,x),this},incData:function(g,x){return this.data||(this.data=new h(this)),this.data.inc(g,x),this},toggleData:function(g){return this.data||(this.data=new h(this)),this.data.toggle(g),this},getData:function(g){return this.data||(this.data=new h(this)),this.data.get(g)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(g){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&g.id)},getIndexList:function(){for(var g=this,x=this.parentContainer,E=[];x&&(E.unshift(x.getIndex(g)),g=x,x.parentContainer);)x=x.parentContainer;return E.unshift(this.displayList.getIndex(g)),E},addChildCallback:function(g){g.displayList&&g.displayList!==this&&g.removeFromDisplayList(),g.displayList||(this.queueDepthSort(),g.displayList=this,g.emit(n.ADDED_TO_SCENE,g,this.scene),this.events.emit(c.ADDED_TO_SCENE,g,this.scene))},removeChildCallback:function(g){this.queueDepthSort(),g.displayList=null,g.emit(n.REMOVED_FROM_SCENE,g,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,g,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(g,x){return g._depth-x._depth},getChildren:function(){return this.list},addToDisplayList:function(g){return g===void 0&&(g=this.scene.sys.displayList),this.displayList&&this.displayList!==g&&this.removeFromDisplayList(),g.exists(this)||(this.displayList=g,g.add(this,!0),g.queueDepthSort(),this.emit(n.ADDED_TO_SCENE,this,this.scene),g.events.emit(c.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var g=this.displayList||this.scene.sys.displayList;return g.exists(this)&&(g.remove(this,!0),g.queueDepthSort(),this.displayList=null,this.emit(n.REMOVED_FROM_SCENE,this,this.scene),g.events.emit(c.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(g){if(!(!this.scene||this.ignoreDestroy)){this.emit(n.DESTROY,this);for(var x=this.list;x.length;)x[0].destroy(g);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});a.exports=p},834:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=u.list;if(d.length!==0){u.depthSort();var l=u.blendMode!==-1;l||e.setBlendMode(0);var h=u._alpha;u.mask&&u.mask.preRenderCanvas(e,null,y);for(var r=0;r<d.length;r++){var n=d[r];if(!!n.willRender(y)){var v=n.alpha;!l&&n.blendMode!==e.currentBlendMode&&e.setBlendMode(n.blendMode),n.setAlpha(v*h),n.renderCanvas(e,n,y),n.setAlpha(v)}}u.mask&&u.mask.postRenderCanvas(e)}};a.exports=T},56378:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(85305),d=e(99325),l=e(20494);d.register("layer",function(h,r){h===void 0&&(h={});var n=l(h,"children",null),v=new y(this.scene,n);return r!==void 0&&(h.add=r),u(this.scene,v,h),v})},17676:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85305),y=e(61286);y.register("layer",function(d){return this.displayList.add(new u(this.scene,d))})},58010:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(17576),d=e(834),a.exports={renderWebGL:y,renderCanvas:d}},17576:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=u.list,l=d.length;if(l!==0){u.depthSort(),e.pipelines.preBatch(u);var h=u.blendMode!==-1;h||e.setBlendMode(0);for(var r=u.alpha,n=0;n<l;n++){var v=d[n];if(!!v.willRender(y)){var o,c,m,p;if(v.alphaTopLeft!==void 0)o=v.alphaTopLeft,c=v.alphaTopRight,m=v.alphaBottomLeft,p=v.alphaBottomRight;else{var g=v.alpha;o=g,c=g,m=g,p=g}!h&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var x=v.mask;x&&x.preRenderWebGL(e,v,y);var E=v.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=n<l-1?d[n+1].type===e.currentType:!1,v.setAlpha(o*r,c*r,m*r,p*r),v.renderWebGL(e,v,y),v.setAlpha(o,c,m,p),x&&x.postRenderWebGL(e,y),e.newType=!1}}e.pipelines.postBatch(u)}};a.exports=T},14455:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),y=e(56694),d=e(64937),l=e(39298),h=e(75512),r=new y({Extends:u,Mixins:[d.Origin,d.ScrollFactor,d.Transform,d.Visible],initialize:function(v,o,c,m,p,g,x){u.call(this,v,o,c),this.color=new l(m,p,g),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(c)},displayWidth:{get:function(){return this.diameter},set:function(n){this.diameter=n}},displayHeight:{get:function(){return this.diameter},set:function(n){this.diameter=n}},width:{get:function(){return this.diameter},set:function(n){this.diameter=n}},height:{get:function(){return this.diameter},set:function(n){this.diameter=n}},willRender:function(n){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&n.id)},setColor:function(n){var v=h.getFloatsFromUintRGB(n);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(n){return this.intensity=n,this},setRadius:function(n){return this.radius=n,this}});r.RENDER_MASK=15,a.exports=r},26193:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26535),y=e(56694),d=e(53996),l=e(14455),h=e(13171),r=e(39298),n=e(72677),v=e(17922),o=e(75512),c=new y({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(m,p,g,x,E,P){return this.systems.displayList.add(new h(this.scene,m,p,g,x,E,P))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(m){for(var p=this.lights,g=m.worldView,x=[],E=0;E<p.length;E++){var P=p[E];P.willRender(m)&&u(P,g)&&x.push({light:P,distance:d(P.x,P.y,g.centerX,g.centerY)})}return x.length>this.maxLights&&(v(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(m,p){return m.distance>=p.distance},setAmbientColor:function(m){var p=o.getFloatsFromUintRGB(m);return this.ambientColor.set(p[0],p[1],p[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(m,p,g,x,E){m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=16777215),E===void 0&&(E=1);var P=o.getFloatsFromUintRGB(x),S=new l(m,p,g,P[0],P[1],P[2],E);return this.lights.push(S),S},removeLight:function(m){var p=this.lights.indexOf(m);return p>=0&&n(this.lights,p),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});a.exports=c},50296:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(26193),d=e(91963),l=e(7599),h=new u({Extends:y,initialize:function(n){this.scene=n,this.systems=n.sys,n.sys.settings.isBooted||n.sys.events.once(l.BOOT,this.boot,this),y.call(this)},boot:function(){var r=this.systems.events;r.on(l.SHUTDOWN,this.shutdown,this),r.on(l.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});d.register("LightsPlugin",h,"lights"),a.exports=h},83321:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(75606),l=e(18693),h=e(89980),r=e(53267),n=e(67623),v=e(73329),o=e(16650),c=e(23464),m=e(23701),p=e(17922),g=e(70015),x=e(85769),E=new u({Extends:h,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.Texture,y.Transform,y.Visible,c],initialize:function(S,M,b,A,L,R,O,D,B,G,z,X){M===void 0&&(M=0),b===void 0&&(b=0),A===void 0&&(A="__WHITE"),h.call(this,S,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new o,this.viewPosition=new g,this.viewMatrix=new o,this.projectionMatrix=new o,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var U=S.sys.renderer;this.setPosition(M,b),this.setTexture(A,L),this.setSize(U.width,U.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(U.width,U.height),R&&this.addVertices(R,O,D,B,G,z,X)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(P){return this.viewPosition.addScale(g.LEFT,P),this.dirtyCache[10]=1,this},panY:function(P){return this.viewPosition.y+=g.DOWN.y*P,this.dirtyCache[10]=1,this},panZ:function(P){return this.viewPosition.z+=P,this.dirtyCache[10]=1,this},setPerspective:function(P,S,M,b,A){return M===void 0&&(M=45),b===void 0&&(b=.01),A===void 0&&(A=1e3),this.fov=M,this.projectionMatrix.perspective(d(M),P/S,b,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(P,S,M,b){return P===void 0&&(P=this.scene.sys.renderer.getAspectRatio()),S===void 0&&(S=1),M===void 0&&(M=-1e3),b===void 0&&(b=1e3),this.fov=0,this.projectionMatrix.ortho(-P,P,-S,S,M,b),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(P){P.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(P,S,M,b,A,L,R,O,D){var B=this.scene.sys.cache.obj.get(P),G;return B&&(G=r(B,this,S,M,b,A,L,R,O,D)),(!G||G.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",P),this},sortByDepth:function(P,S){return P.depth-S.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(P,S,M,b,A,L,R){var O=new x(P,S,M,b,A,L,R);return this.vertices.push(O),O},addFace:function(P,S,M){var b=new l(P,S,M);return this.faces.push(b),this.dirtyCache[9]=-1,b},addVertices:function(P,S,M,b,A,L,R){var O=n(P,S,M,b,A,L,R);return O?(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(P){return this.faces[P]},hasFaceAt:function(P,S,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var b=v(this,M).calc,A=this.faces,L=0;L<A.length;L++){var R=A[L];if(R.contains(P,S,b))return!0}return!1},getFaceAt:function(P,S,M){M===void 0&&(M=this.scene.sys.cameras.main);for(var b=v(this,M).calc,A=this.faces,L=[],R=0;R<A.length;R++){var O=A[R];O.contains(P,S,b)&&L.push(O)}return p(L,this.sortByDepth)},setDebug:function(P,S){return this.debugGraphic=P,!P&&!S?this.debugCallback=null:S?this.debugCallback=S:this.debugCallback=this.renderDebug,this},isDirty:function(){var P=this.modelPosition,S=this.modelRotation,M=this.modelScale,b=this.dirtyCache,A=P.x,L=P.y,R=P.z,O=S.x,D=S.y,B=S.z,G=M.x,z=M.y,X=M.z,U=this.getFaceCount(),V=b[0],N=b[1],W=b[2],F=b[3],I=b[4],k=b[5],Y=b[6],H=b[7],K=b[8],j=b[9];return b[0]=A,b[1]=L,b[2]=R,b[3]=O,b[4]=D,b[5]=B,b[6]=G,b[7]=z,b[8]=X,b[9]=U,V!==A||N!==L||W!==R||F!==O||I!==D||k!==B||Y!==G||H!==z||K!==X||j!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var P=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!P[10]&&!this.isDirty())){var S=this.width,M=this.height,b=this.viewMatrix,A=this.viewPosition;P[10]&&(b.identity(),b.translate(A),b.invert(),P[10]=0);var L=this.transformMatrix;L.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var R=A.z,O=this.faces,D=0;D<O.length;D++)O[D].transformCoordinatesLocal(L,S,M,R);this.depthSort()}},renderDebug:function(P,S){for(var M=P.debugGraphic,b=0;b<S.length;b++){var A=S[b],L=A.vertex1.tx,R=A.vertex1.ty,O=A.vertex2.tx,D=A.vertex2.ty,B=A.vertex3.tx,G=A.vertex3.ty;M.strokeTriangle(L,R,O,D,B,G)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var P=this.faces,S=function(M,b,A){for(var L=0;L<P.length;L++){var R=P[L];if(R.contains(b,A))return!0}return!1};return this.scene.sys.input.enable(this,S),this},setTint:function(P){P===void 0&&(P=16777215);for(var S=this.vertices,M=0;M<S.length;M++)S[M].color=P;return this},uvScroll:function(P,S){for(var M=this.faces,b=0;b<M.length;b++)M[b].scrollUV(P,S);return this},uvScale:function(P,S){for(var M=this.faces,b=0;b<M.length;b++)M[b].scaleUV(P,S);return this},tint:{set:function(P){this.setTint(P)}},rotateX:{get:function(){return m(this.modelRotation.x)},set:function(P){this.modelRotation.x=d(P)}},rotateY:{get:function(){return m(this.modelRotation.y)},set:function(P){this.modelRotation.y=d(P)}},rotateZ:{get:function(){return m(this.modelRotation.z)},set:function(P){this.modelRotation.z=d(P)}}});a.exports=E},6317:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};a.exports=T},41839:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(10850),h=e(83321);y.register("mesh",function(r,n){r===void 0&&(r={});var v=d(r,"key",null),o=d(r,"frame",null),c=l(r,"vertices",[]),m=l(r,"uvs",[]),p=l(r,"indicies",[]),g=l(r,"containsZ",!1),x=l(r,"normals",[]),E=l(r,"colors",16777215),P=l(r,"alphas",1),S=new h(this.scene,0,0,v,o,c,m,p,g,x,E,P);return n!==void 0&&(r.add=n),u(this.scene,S,r),S})},8767:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83321),y=e(61286);y.register("mesh",function(d,l,h,r,n,v,o,c,m,p,g){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o,c,m,p,g))})},23464:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(57410),d=e(6317),a.exports={renderWebGL:y,renderCanvas:d}},57410:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=function(d,l,h,r){var n=l.faces,v=n.length;if(v!==0){h.addToRenderList(l);var o=d.pipelines.set(l.pipeline,l),c=u(l,h,r).calc;d.pipelines.preBatch(l);for(var m=o.setGameObject(l),p=o.vertexViewF32,g=o.vertexViewU32,x=o.vertexCount*o.currentShader.vertexComponentCount-1,E=l.tintFill,P=[],S=l.debugCallback,M=c.a,b=c.b,A=c.c,L=c.d,R=c.e,O=c.f,D=l.viewPosition.z,B=l.hideCCW,G=h.roundPixels,z=h.alpha*l.alpha,X=0,U=0;U<v;U++){var V=n[U];!V.isInView(h,B,D,z,M,b,A,L,R,O,G)||(o.shouldFlush(3)&&(o.flush(),m=o.setGameObject(l),x=0),x=V.load(p,g,x,m,E),X++,o.vertexCount+=3,o.currentBatch.count=o.vertexCount-o.currentBatch.start,S&&P.push(V))}l.totalFrame+=X,S&&S.call(l,l,P),d.pipelines.postBatch(l)}};a.exports=y},44139:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(94456),h=e(85769),r=new u({Extends:d,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,l],initialize:function(v,o,c,m,p,g,x,E,P,S,M){g===void 0&&(g=256),x===void 0&&(x=256),E===void 0&&(E=10),P===void 0&&(P=10),S===void 0&&(S=0),M===void 0&&(M=0),d.call(this,v,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=S===0&&M===0;for(var b=this.is3Slice?18:54,A=0;A<b;A++)this.vertices.push(new h);this.setPosition(o,c),this.setTexture(m,p),this.setSlices(g,x,E,P,S,M),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(n,v,o,c,m,p){n===void 0&&(n=256),v===void 0&&(v=256),o===void 0&&(o=10),c===void 0&&(c=10),m===void 0&&(m=0),p===void 0&&(p=0);var g=m===0&&p===0;return this.is3Slice!==g?console.warn("Cannot change 9 slice to 3 slice"):(this._width=n,this._height=v,this.leftWidth=o,this.rightWidth=c,this.topHeight=m,this.bottomHeight=p,this.is3Slice&&(v=this.frame.height,this._height=v,this.topHeight=v,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var n=this.leftWidth,v=this.rightWidth,o=this.topHeight,c=this.bottomHeight,m=this.frame.width,p=this.frame.height;this.updateQuadUVs(0,0,0,n/m,o/p),this.updateQuadUVs(6,n/m,0,1-v/m,o/p),this.updateQuadUVs(12,1-v/m,0,1,o/p),this.is3Slice||(this.updateQuadUVs(18,0,o/p,n/m,1-c/p),this.updateQuadUVs(24,n/m,o/p,1-v/m,1-c/p),this.updateQuadUVs(30,1-v/m,o/p,1,1-c/p),this.updateQuadUVs(36,0,1-c/p,n/m,1),this.updateQuadUVs(42,n/m,1-c/p,1-v/m,1),this.updateQuadUVs(48,1-v/m,1-c/p,1,1))},updateVertices:function(){var n=this.leftWidth,v=this.rightWidth,o=this.topHeight,c=this.bottomHeight,m=this.width,p=this.height;this.updateQuad(0,-.5,.5,-.5+n/m,.5-o/p),this.updateQuad(6,-.5+n/m,.5,.5-v/m,.5-o/p),this.updateQuad(12,.5-v/m,.5,.5,.5-o/p),this.is3Slice||(this.updateQuad(18,-.5,.5-o/p,-.5+n/m,-.5+c/p),this.updateQuad(24,-.5+n/m,.5-o/p,.5-v/m,-.5+c/p),this.updateQuad(30,.5-v/m,.5-o/p,.5,-.5+c/p),this.updateQuad(36,-.5,-.5+c/p,-.5+n/m,-.5),this.updateQuad(42,-.5+n/m,-.5+c/p,.5-v/m,-.5),this.updateQuad(48,.5-v/m,-.5+c/p,.5,-.5))},updateQuad:function(n,v,o,c,m){var p=this.width,g=this.height,x=this.originX,E=this.originY,P=this.vertices;P[n+0].resize(v,o,p,g,x,E),P[n+1].resize(v,m,p,g,x,E),P[n+2].resize(c,o,p,g,x,E),P[n+3].resize(v,m,p,g,x,E),P[n+4].resize(c,m,p,g,x,E),P[n+5].resize(c,o,p,g,x,E)},updateQuadUVs:function(n,v,o,c,m){var p=this.vertices,g=this.frame,x=g.u0,E=g.v0,P=g.u1,S=g.v1;if(x!==0||P!==1){var M=P-x;v=x+v*M,c=x+c*M}if(E!==0||S!==1){var b=S-E;o=E+o*b,m=E+m*b}p[n+0].setUVs(v,o),p[n+1].setUVs(v,m),p[n+2].setUVs(c,o),p[n+3].setUVs(v,m),p[n+4].setUVs(c,m),p[n+5].setUVs(c,o)},clearTint:function(){return this.setTint(16777215),this},setTint:function(n){return n===void 0&&(n=16777215),this.tint=n,this.tintFill=!1,this},setTintFill:function(n){return this.setTint(n),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(n){this._width=Math.max(n,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(n){this.is3Slice||(this._height=Math.max(n,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,v){this.width=n,this.height=v;var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this},setDisplaySize:function(n,v){return this.displayWidth=n,this.displayHeight=v,this},originX:{get:function(){return this._originX},set:function(n){this._originX=n,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(n){this._originY=n,this.updateVertices()}},setOrigin:function(n,v){return n===void 0&&(n=.5),v===void 0&&(v=n),this._originX=n,this._originY=v,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var n=this.frame.height;this._height=n,this.topHeight=n,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});a.exports=r},40964:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(10850),h=e(44139);y.register("nineslice",function(r,n){r===void 0&&(r={});var v=d(r,"key",null),o=d(r,"frame",null),c=l(r,"width",256),m=l(r,"height",256),p=l(r,"leftWidth",10),g=l(r,"rightWidth",10),x=l(r,"topHeight",0),E=l(r,"bottomHeight",0),P=new h(this.scene,0,0,v,o,c,m,p,g,x,E);return n!==void 0&&(r.add=n),u(this.scene,P,r),P})},53778:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44139),y=e(61286);y.register("nineslice",function(d,l,h,r,n,v,o,c,m,p){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o,c,m,p))})},94456:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(27420),a.exports={renderWebGL:y,renderCanvas:d}},27420:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(75512),d=function(l,h,r,n){var v=h.vertices,o=v.length;if(o!==0){r.addToRenderList(h);var c=l.pipelines.set(h.pipeline,h),m=u(h,r,n,!1).calc;l.pipelines.preBatch(h);var p=c.setGameObject(h),g=c.vertexViewF32,x=c.vertexViewU32,E=c.vertexCount*c.currentShader.vertexComponentCount-1,P=r.roundPixels,S=h.tintFill,M=r.alpha*h.alpha,b=y.getTintAppendFloatAlpha(h.tint,M),A=c.vertexAvailable(),L=-1;A<o&&(L=A);for(var R=0;R<o;R++){var O=v[R];R===L&&(c.flush(),p=c.setGameObject(h),E=0),g[++E]=m.getXRound(O.vx,O.vy,P),g[++E]=m.getYRound(O.vx,O.vy,P),g[++E]=O.u,g[++E]=O.v,g[++E]=p,g[++E]=S,x[++E]=b,c.vertexCount++,c.currentBatch.count=c.vertexCount-c.currentBatch.start}l.pipelines.postBatch(h)}};a.exports=d},19737:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(93025),d=e(22946),l=e(21902),h=e(4840),r=e(15978),n=new u({Extends:y,initialize:function(o){y.call(this,o,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var v=this.propertyValue,o=v,c=this.defaultEmit,m=this.defaultUpdate;if(this.method===9){this.start=v[0],this.ease=l("Linear"),this.interpolation=h("linear"),c=this.easedValueEmit,m=this.easeValueUpdate,o=v[0],this.active=!0;for(var p=0;p<v.length;p++){var g=r(v[p]);this.r.push(g.r),this.g.push(g.g),this.b.push(g.b)}}return this.onEmit=c,this.onUpdate=m,this.current=o,this},setEase:function(v){this.easeName=v,this.ease=l(v)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(v,o,c){var m=this.ease(c),p=this.interpolation(this.r,m),g=this.interpolation(this.g,m),x=this.interpolation(this.b,m),E=d(p,g,x);return this.current=E,E}});a.exports=n},93025:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),y=e(82897),d=e(56694),l=e(61616),h=e(21902),r=e(72632),n=e(4840),v=e(88462),o=e(1071),c=new d({initialize:function(p,g,x){x===void 0&&(x=!1),this.propertyKey=p,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=x,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(m,p){m===void 0&&(m={}),p&&(this.propertyKey=p),this.propertyValue=r(m,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(m){var p;switch(this.method){case 1:case 3:case 8:p=m;break;case 2:this.propertyValue.indexOf(m)>=0&&(p=m);break;case 4:var g=(this.end-this.start)/this.steps;p=v(m,g),this.counter=p;break;case 5:case 6:case 7:p=y(m,this.start,this.end);break;case 9:p=this.start[0];break}return this.current=p,this},getMethod:function(){var m=this.propertyValue;if(m===null)return 0;var p=typeof m;if(p==="number")return 1;if(Array.isArray(m))return 2;if(p==="function")return 3;if(p==="object"){if(this.hasBoth(m,"start","end"))return this.has(m,"steps")?4:5;if(this.hasBoth(m,"min","max"))return 6;if(this.has(m,"random"))return 7;if(this.hasEither(m,"onEmit","onUpdate"))return 8;if(this.has(m,"interpolation"))return 9}return 0},setMethods:function(){var m=this.propertyValue,p=m,g=this.defaultEmit,x=this.defaultUpdate;switch(this.method){case 1:g=this.staticValueEmit;break;case 2:g=this.randomStaticValueEmit,p=m[0];break;case 3:this._onEmit=m,g=this.proxyEmit;break;case 4:this.start=m.start,this.end=m.end,this.steps=m.steps,this.counter=this.start,this.yoyo=this.has(m,"yoyo")?m.yoyo:!1,this.direction=0,g=this.steppedEmit,p=this.start;break;case 5:this.start=m.start,this.end=m.end;var E=this.has(m,"ease")?m.ease:"Linear";this.ease=h(E,m.easeParams),g=this.has(m,"random")&&m.random?this.randomRangedValueEmit:this.easedValueEmit,x=this.easeValueUpdate,p=this.start;break;case 6:this.start=m.min,this.end=m.max,g=this.has(m,"int")&&m.int?this.randomRangedIntEmit:this.randomRangedValueEmit,p=this.start;break;case 7:var P=m.random;Array.isArray(P)&&(this.start=P[0],this.end=P[1]),g=this.randomRangedIntEmit,p=this.start;break;case 8:this._onEmit=this.has(m,"onEmit")?m.onEmit:this.defaultEmit,this._onUpdate=this.has(m,"onUpdate")?m.onUpdate:this.defaultUpdate,g=this.proxyEmit,x=this.proxyUpdate;break;case 9:this.start=m.values;var S=this.has(m,"ease")?m.ease:"Linear";this.ease=h(S,m.easeParams),this.interpolation=n(m.interpolation),g=this.easedValueEmit,x=this.easeValueUpdate,p=this.start[0];break}return this.onEmit=g,this.onUpdate=x,this.current=p,this},has:function(m,p){return m.hasOwnProperty(p)},hasBoth:function(m,p,g){return m.hasOwnProperty(p)&&m.hasOwnProperty(g)},hasEither:function(m,p,g){return m.hasOwnProperty(p)||m.hasOwnProperty(g)},defaultEmit:function(m,p,g){return g},defaultUpdate:function(m,p,g,x){return x},proxyEmit:function(m,p,g){var x=this._onEmit(m,p,g);return this.current=x,x},proxyUpdate:function(m,p,g,x){var E=this._onUpdate(m,p,g,x);return this.current=E,E},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var m=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[m],this.current},randomRangedValueEmit:function(m,p){var g=l(this.start,this.end);return m&&m.data[p]&&(m.data[p].min=g,m.data[p].max=this.end),this.current=g,g},randomRangedIntEmit:function(m,p){var g=u(this.start,this.end);return m&&m.data[p]&&(m.data[p].min=g,m.data[p].max=this.end),this.current=g,g},steppedEmit:function(){var m=this.counter,p=m,g=(this.end-this.start)/this.steps;if(this.yoyo){var x;this.direction===0?(p+=g,p>=this.end&&(x=p-this.end,p=this.end-x,this.direction=1)):(p-=g,p<=this.start&&(x=this.start-p,p=this.start+x,this.direction=0)),this.counter=p}else this.counter=o(p+g,this.start,this.end);return this.current=m,m},easedValueEmit:function(m,p){if(m&&m.data[p]){var g=m.data[p];g.min=this.start,g.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(m,p,g){var x=m.data[p],E,P=this.ease(g);return this.interpolation?E=this.interpolation(this.start,P):E=(x.max-x.min)*P+x.min,this.current=E,E},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});a.exports=c},87811:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(30891),l=new u({Extends:d,initialize:function(r,n,v,o,c){if(typeof r=="object"){var m=r;r=y(m,"x",0),n=y(m,"y",0),v=y(m,"power",0),o=y(m,"epsilon",100),c=y(m,"gravity",50)}else r===void 0&&(r=0),n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=100),c===void 0&&(c=50);d.call(this,r,n,!0),this._gravity=c,this._power=v*c,this._epsilon=o*o},update:function(h,r){var n=this.x-h.x,v=this.y-h.y,o=n*n+v*v;if(o!==0){var c=Math.sqrt(o);o<this._epsilon&&(o=this._epsilon);var m=this._power*r/(o*c)*100;h.velocityX+=n*m,h.velocityY+=v*m}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var r=this.power;this._gravity=h,this.power=r}}});a.exports=l},14909:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),y=e(82897),d=e(56694),l=e(75606),h=e(74118),r=e(2386),n=e(93736),v=new d({initialize:function(c){this.emitter=c,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new n,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=c.scene,this.anims=new u(this),this.bounds=new h},emit:function(o,c,m,p,g,x){return this.emitter.emit(o,c,m,p,g,x)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(o,c){o===void 0&&(o=0),c===void 0&&(c=0),this.x=o,this.y=c},fire:function(o,c){var m=this.emitter,p=m.ops,g=m.getAnim();if(g?this.anims.play(g):(this.frame=m.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(m.getEmitZone(this),o===void 0?this.x+=p.x.onEmit(this,"x"):p.x.steps>0?this.x+=o+p.x.onEmit(this,"x"):this.x+=o,c===void 0?this.y+=p.y.onEmit(this,"y"):p.y.steps>0?this.y+=c+p.y.onEmit(this,"y"):this.y+=c,this.life=p.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=p.delay.onEmit(this,"delay"),this.holdCurrent=p.hold.onEmit(this,"hold"),this.scaleX=p.scaleX.onEmit(this,"scaleX"),this.scaleY=p.scaleY.active?p.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=p.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),m.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&m.getDeathZone(this))return this.lifeCurrent=0,!1;var x=p.speedX.onEmit(this,"speedX"),E=p.speedY.active?p.speedY.onEmit(this,"speedY"):x;if(m.radial){var P=l(p.angle.onEmit(this,"angle"));this.velocityX=Math.cos(P)*Math.abs(x),this.velocityY=Math.sin(P)*Math.abs(E)}else if(m.moveTo){var S=p.moveToX.onEmit(this,"moveToX"),M=p.moveToY.onEmit(this,"moveToY"),b=this.life/1e3;this.velocityX=(S-this.x)/b,this.velocityY=(M-this.y)/b}else this.velocityX=x,this.velocityY=E;return m.acceleration&&(this.accelerationX=p.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=p.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=p.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=p.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=p.bounce.onEmit(this,"bounce"),this.alpha=p.alpha.onEmit(this,"alpha"),p.color.active?this.tint=p.color.onEmit(this,"tint"):this.tint=p.tint.onEmit(this,"tint"),!0},update:function(o,c,m){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=o,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=o,!1;this.anims.update(0,o);var p=this.emitter,g=p.ops,x=1-this.lifeCurrent/this.life;if(this.lifeT=x,this.x=g.x.onUpdate(this,"x",x,this.x),this.y=g.y.onUpdate(this,"y",x,this.y),p.moveTo){var E=g.moveToX.onUpdate(this,"moveToX",x,p.moveToX),P=g.moveToY.onUpdate(this,"moveToY",x,p.moveToY),S=this.lifeCurrent/1e3;this.velocityX=(E-this.x)/S,this.velocityY=(P-this.y)/S}return this.computeVelocity(p,o,c,m,x),this.scaleX=g.scaleX.onUpdate(this,"scaleX",x,this.scaleX),this.scaleY=this.scaleX,g.scaleY.active&&(this.scaleY=g.scaleY.onUpdate(this,"scaleY",x,this.scaleY)),this.angle=g.rotate.onUpdate(this,"rotate",x,this.angle),this.rotation=l(this.angle),p.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g.alpha.onUpdate(this,"alpha",x,this.alpha),g.color.active?this.tint=g.color.onUpdate(this,"color",x,this.tint):this.tint=g.tint.onUpdate(this,"tint",x,this.tint),this.lifeCurrent-=o,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(o,c,m,p,g){var x=o.ops,E=this.velocityX,P=this.velocityY,S=x.accelerationX.onUpdate(this,"accelerationX",g,this.accelerationX),M=x.accelerationY.onUpdate(this,"accelerationY",g,this.accelerationY),b=x.maxVelocityX.onUpdate(this,"maxVelocityX",g,this.maxVelocityX),A=x.maxVelocityY.onUpdate(this,"maxVelocityY",g,this.maxVelocityY);this.bounce=x.bounce.onUpdate(this,"bounce",g,this.bounce),E+=o.gravityX*m+S*m,P+=o.gravityY*m+M*m,E=y(E,-b,b),P=y(P,-A,A),this.velocityX=E,this.velocityY=P,this.x+=E*m,this.y+=P*m,o.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var L=0;L<p.length;L++){var R=p[L];R.active&&R.update(this,c,m,g)}},setSizeToFrame:function(){},getBounds:function(o){o===void 0&&(o=this.emitter.getWorldTransformMatrix());var c=Math.abs(o.scaleX)*this.scaleX,m=Math.abs(o.scaleY)*this.scaleY,p=this.x,g=this.y,x=this.rotation,E=this.frame.width*c/2,P=this.frame.height*m/2,S=this.bounds,M=new n(p-E,g-P),b=new n(p+E,g-P),A=new n(p-E,g+P),L=new n(p+E,g+P);return x!==0&&(r(M,p,g,x),r(b,p,g,x),r(A,p,g,x),r(L,p,g,x)),o.transformPoint(M.x,M.y,M),o.transformPoint(b.x,b.y,b),o.transformPoint(A.x,A.y,A),o.transformPoint(L.x,L.y,L),S.x=Math.min(M.x,b.x,A.x,L.x),S.y=Math.min(M.y,b.y,A.y,L.y),S.width=Math.max(M.x,b.x,A.x,L.x)-S.x,S.height=Math.max(M.y,b.y,A.y,L.y)-S.y,S},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});a.exports=v},73106:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(30891),d=e(74118),l=new u({Extends:y,initialize:function(r,n,v,o,c,m,p,g){c===void 0&&(c=!0),m===void 0&&(m=!0),p===void 0&&(p=!0),g===void 0&&(g=!0),y.call(this,r,n,!0),this.bounds=new d(r,n,v,o),this.collideLeft=c,this.collideRight=m,this.collideTop=p,this.collideBottom=g},update:function(h){var r=this.bounds,n=-h.bounce,v=h.worldPosition;v.x<r.x&&this.collideLeft?(h.x+=r.x-v.x,h.velocityX*=n):v.x>r.right&&this.collideRight&&(h.x-=v.x-r.right,h.velocityX*=n),v.y<r.y&&this.collideTop?(h.y+=r.y-v.y,h.velocityY*=n):v.y>r.bottom&&this.collideBottom&&(h.y-=v.y-r.bottom,h.velocityY*=n)}});a.exports=l},9216:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(78991),y=e(56694),d=e(64937),l=e(48129),h=e(29538),r=e(69361),n=e(54213),v=e(19737),o=e(93025),c=e(40629),m=e(89980),p=e(72632),g=e(72861),x=e(87811),E=e(53523),P=e(19256),S=e(7782),M=e(71207),b=e(14655),A=e(14909),L=e(68433),R=e(74118),O=e(90205),D=e(66458),B=e(69116),G=e(17922),z=e(69360),X=e(93736),U=e(1071),V=e(73106),N=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],W=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],F=new y({Extends:m,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Mask,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Texture,d.Transform,d.Visible,B],initialize:function(k,Y,H,K,j){m.call(this,k,"ParticleEmitter"),this.particleClass=A,this.ops={accelerationX:new o("accelerationX",0),accelerationY:new o("accelerationY",0),alpha:new o("alpha",1),angle:new o("angle",{min:0,max:360},!0),bounce:new o("bounce",0),color:new v("color"),delay:new o("delay",0,!0),hold:new o("hold",0,!0),lifespan:new o("lifespan",1e3,!0),maxVelocityX:new o("maxVelocityX",1e4),maxVelocityY:new o("maxVelocityY",1e4),moveToX:new o("moveToX",0),moveToY:new o("moveToY",0),quantity:new o("quantity",1,!0),rotate:new o("rotate",0),scaleX:new o("scaleX",1),scaleY:new o("scaleY",1),speedX:new o("speedX",0,!0),speedY:new o("speedY",0,!0),tint:new o("tint",16777215),x:new o("x",0),y:new o("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new X,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new z,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new M(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(Y,H),this.setTexture(K),j&&this.setConfig(j)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(I){if(!I)return this;var k=0,Y="",H=this.ops;for(k=0;k<W.length;k++)Y=W[k],H[Y].loadConfig(I);for(k=0;k<N.length;k++)Y=N[k],P(I,Y)&&(this[Y]=p(I,Y));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,P(I,"speed")&&(H.speedX.loadConfig(I,"speed"),H.speedY.active=!1),(E(I,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),P(I,"scale")&&(H.scaleX.loadConfig(I,"scale"),H.scaleY.active=!1),P(I,"callbackScope")){var K=p(I,"callbackScope",null);this.emitCallbackScope=K,this.deathCallbackScope=K}if(P(I,"emitZone")&&this.addEmitZone(I.emitZone),P(I,"deathZone")&&this.addDeathZone(I.deathZone),P(I,"bounds")){var j=this.addParticleBounds(I.bounds);j.collideLeft=p(I,"collideLeft",!0),j.collideRight=p(I,"collideRight",!0),j.collideTop=p(I,"collideTop",!0),j.collideBottom=p(I,"collideBottom",!0)}return P(I,"followOffset")&&this.followOffset.setFromObject(p(I,"followOffset",0)),P(I,"texture")&&this.setTexture(I.texture),P(I,"frame")?this.setEmitterFrame(I.frame):P(I,"anim")&&this.setAnim(I.anim),P(I,"reserve")&&this.reserve(I.reserve),P(I,"advance")&&this.fastForward(I.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(c.START,this),this},toJSON:function(){var I=l(this),k=0,Y="";for(k=0;k<N.length;k++)Y=N[k],I[Y]=this[Y];var H=this.ops;for(k=0;k<W.length;k++)Y=W[k],H[Y]&&(I[Y]=H[Y].toJSON());return H.speedY.active||(delete I.speedX,I.speed=H.speedX.toJSON()),this.scaleX===this.scaleY&&(delete I.scaleX,delete I.scaleY,I.scale=H.scaleX.toJSON()),I},resetCounters:function(I,k){var Y=this.counters;Y.fill(0),Y[0]=I,k&&(Y[5]=1)},startFollow:function(I,k,Y,H){return k===void 0&&(k=0),Y===void 0&&(Y=0),H===void 0&&(H=!1),this.follow=I,this.followOffset.set(k,Y),this.trackVisible=H,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var I=this.frames,k=I.length,Y;return k===1?Y=I[0]:this.randomFrame?Y=g(I):(Y=I[this.currentFrame],this.frameCounter++,this.frameCounter>=this.frameQuantity&&(this.frameCounter=0,this.currentFrame=U(this.currentFrame+1,0,k-1))),this.texture.get(Y)},setEmitterFrame:function(I,k,Y){k===void 0&&(k=!0),Y===void 0&&(Y=1),this.randomFrame=k,this.frameQuantity=Y,this.currentFrame=0;var H=typeof I;if(this.frames.length=0,Array.isArray(I))this.frames=this.frames.concat(I);else if(H==="string"||H==="number")this.frames.push(I);else if(H==="object"){var K=I;I=p(K,"frames",null),I&&(this.frames=this.frames.concat(I));var j=p(K,"cycle",!1);this.randomFrame=!j,this.frameQuantity=p(K,"quantity",Y)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var I=this.anims,k=I.length;if(k===0)return null;if(k===1)return I[0];if(this.randomAnim)return g(I);var Y=I[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=U(this.currentAnim+1,0,k-1)),Y},setAnim:function(I,k,Y){k===void 0&&(k=!0),Y===void 0&&(Y=1),this.randomAnim=k,this.animQuantity=Y,this.currentAnim=0;var H=typeof I;if(this.anims.length=0,Array.isArray(I))this.anims=this.anims.concat(I);else if(H==="string")this.anims.push(I);else if(H==="object"){var K=I;I=p(K,"anims",null),I&&(this.anims=this.anims.concat(I));var j=p(K,"cycle",!1);this.randomAnim=!j,this.animQuantity=p(K,"quantity",Y)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(I){return I===void 0&&(I=!0),this.radial=I,this},addParticleBounds:function(I,k,Y,H,K,j,J,Q){if(typeof I=="object"){var Z=I;I=Z.x,k=Z.y,Y=P(Z,"w")?Z.w:Z.width,H=P(Z,"h")?Z.h:Z.height}return this.addParticleProcessor(new V(I,k,Y,H,K,j,J,Q))},setParticleSpeed:function(I,k){return k===void 0&&(k=I),this.ops.speedX.onChange(I),I===k?this.ops.speedY.active=!1:this.ops.speedY.onChange(k),this.radial=!0,this},setParticleScale:function(I,k){return I===void 0&&(I=1),k===void 0&&(k=I),this.ops.scaleX.onChange(I),this.ops.scaleY.onChange(k),this},setParticleGravity:function(I,k){return this.gravityX=I,this.gravityY=k,this},setParticleAlpha:function(I){return this.ops.alpha.onChange(I),this},setParticleTint:function(I){return this.ops.tint.onChange(I),this},setEmitterAngle:function(I){return this.ops.angle.onChange(I),this},setParticleLifespan:function(I){return this.lifespan.onChange(I),this},setQuantity:function(I){return this.quantity=I,this},setFrequency:function(I,k){return this.frequency=I,this.flowCounter=I>0?I:0,k&&(this.quantity=k),this},addDeathZone:function(I){Array.isArray(I)||(I=[I]);for(var k,Y=0;Y<I.length;Y++)if(k=I[Y],k instanceof r)u(this.deathZones,k);else if(typeof k.contains=="function")k=new r(k,!0),u(this.deathZones,k);else{var H=p(k,"type","onEnter"),K=p(k,"source",null);if(K&&typeof K.contains=="function"){var j=H==="onEnter";k=new r(K,j),u(this.deathZones,k)}}return k},removeDeathZone:function(I){return D(this.deathZones,I),this},addEmitZone:function(I){Array.isArray(I)||(I=[I]);for(var k,Y=0;Y<I.length;Y++)if(k=I[Y],k instanceof L||k instanceof n)u(this.emitZones,k);else{var H=p(k,"type","random"),K=p(k,"source",null);if(H==="random")k=new L(K);else if(H==="edge"){var j=p(k,"quantity",1),J=p(k,"stepRate",0),Q=p(k,"yoyo",!1),Z=p(k,"seamless",!0),q=p(k,"total",-1);k=new n(K,j,J,Q,Z,q)}k&&u(this.emitZones,k)}return k},removeEmitZone:function(I){return D(this.emitZones,I),this.zoneIndex=0,this},getEmitZone:function(I){var k=this.emitZones,Y=k.length;if(Y!==0){var H=k[this.zoneIndex];H.getPoint(I),H.total>-1&&(this.zoneTotal++,this.zoneTotal>=H.total&&(this.zoneTotal=0,this.zoneIndex=U(this.zoneIndex+1,0,Y)))}},getDeathZone:function(I){for(var k=this.deathZones,Y=0;Y<k.length;Y++){var H=k[Y];if(H.willKill(I))return this.emit(c.DEATH_ZONE,this,I,H),!0}return!1},setEmitZone:function(I){var k;return isFinite(I)?k=I:k=this.emitZones.indexOf(I),k>=0&&(this.zoneIndex=k),this},addParticleProcessor:function(I){return this.processors.exists(I)||(I.emitter&&I.emitter.removeParticleProcessor(I),this.processors.add(I),I.emitter=this),I},removeParticleProcessor:function(I){return this.processors.exists(I)&&(this.processors.remove(I,!0),I.emitter=null),I},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(I){return this.addParticleProcessor(new x(I))},reserve:function(I){var k=this.dead;if(this.maxParticles>0){var Y=this.getParticleCount();Y+I>this.maxParticles&&(I=this.maxParticles-(Y+I))}for(var H=0;H<I;H++)k.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(I,k){return I===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof I=="function"&&(this.emitCallback=I,k&&(this.emitCallbackScope=k)),this},onParticleDeath:function(I,k){return I===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof I=="function"&&(this.deathCallback=I,k&&(this.deathCallbackScope=k)),this},killAll:function(){for(var I=this.dead,k=this.alive;k.length>0;)I.push(k.pop());return this},forEachAlive:function(I,k){for(var Y=this.alive,H=Y.length,K=0;K<H;K++)I.call(k,Y[K],this);return this},forEachDead:function(I,k){for(var Y=this.dead,H=Y.length,K=0;K<H;K++)I.call(k,Y[K],this);return this},start:function(I,k){return I===void 0&&(I=0),this.emitting||(I>0&&this.fastForward(I),this.emitting=!0,this.resetCounters(this.frequency,!0),k!==void 0&&(this.duration=Math.abs(k)),this.emit(c.START,this)),this},stop:function(I){return I===void 0&&(I=!1),this.emitting&&(this.emitting=!1,I&&this.killAll(),this.emit(c.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(I,k){return I===void 0&&(I=""),k===void 0&&(k=this.true),this.sortProperty=I,this.sortOrderAsc=k,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(I){return this.sortProperty!==""?I=this.depthSortCallback:I=null,this.sortCallback=I,this},depthSort:function(){return G(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(I,k){var Y=this.sortProperty;return this.sortOrderAsc?I[Y]-k[Y]:k[Y]-I[Y]},flow:function(I,k,Y){return k===void 0&&(k=1),this.emitting=!1,this.frequency=I,this.quantity=k,Y!==void 0&&(this.stopAfter=Y),this.start()},explode:function(I,k,Y){this.frequency=-1,this.resetCounters(-1,!0);var H=this.emitParticle(I,k,Y);return this.emit(c.EXPLODE,this,H),H},emitParticleAt:function(I,k,Y){return this.emitParticle(Y,I,k)},emitParticle:function(I,k,Y){if(!this.atLimit()){I===void 0&&(I=this.ops.quantity.onEmit());for(var H=this.dead,K=this.stopAfter,j=this.follow?this.follow.x+this.followOffset.x:k,J=this.follow?this.follow.y+this.followOffset.y:Y,Q=0;Q<I;Q++){var Z=H.pop();if(Z||(Z=new this.particleClass(this)),Z.fire(j,J)?(this.particleBringToTop?this.alive.push(Z):this.alive.unshift(Z),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,Z,this)):this.dead.push(Z),K>0&&(this.stopCounter++,this.stopCounter>=K)||this.atLimit())break}return Z}},fastForward:function(I,k){k===void 0&&(k=1e3/60);var Y=0;for(this.skipping=!0;Y<Math.abs(I);)this.preUpdate(0,k),Y+=k;return this.skipping=!1,this},preUpdate:function(I,k){k*=this.timeScale;var Y=k/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var H=this.getProcessors(),K=this.alive,j=this.dead,J=0,Q=[],Z=K.length;for(J=0;J<Z;J++){var q=K[J];q.update(k,Y,H)&&Q.push({index:J,particle:q})}if(Z=Q.length,Z>0){var et=this.deathCallback,tt=this.deathCallbackScope;for(J=Z-1;J>=0;J--){var it=Q[J];K.splice(it.index,1),j.push(it.particle),et&&et.call(tt,it.particle),it.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&K.length===0&&(this.completeFlag=0,this.emit(c.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=k;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=k,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(I){for(var k=this.getWorldTransformMatrix(),Y=this.alive,H=Y.length,K=[],j=0;j<H;j++){var J=Y[j];O(I,J.getBounds(k))&&K.push(J)}return K},getBounds:function(I,k,Y,H){I===void 0&&(I=0),k===void 0&&(k=0),Y===void 0&&(Y=1e3/60),H===void 0&&(H=new R);var K=this.getWorldTransformMatrix(),j,J,Q=this.alive,Z=!1;if(H.setTo(0,0,0,0),k>0){var q=0;for(this.skipping=!0;q<Math.abs(k);){for(this.preUpdate(0,Y),j=0;j<Q.length;j++)J=Q[j].getBounds(K),Z?b(H,J):(Z=!0,h(J,H));q+=Y}this.skipping=!1}else for(j=0;j<Q.length;j++)J=Q[j].getBounds(K),Z?b(H,J):(Z=!0,h(J,H));return I>0&&S(H,I,I),H},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(I){this.ops.x.onChange(I)}},particleY:{get:function(){return this.ops.y.current},set:function(I){this.ops.y.onChange(I)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(I){this.ops.accelerationX.onChange(I)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(I){this.ops.accelerationY.onChange(I)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(I){this.ops.maxVelocityX.onChange(I)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(I){this.ops.maxVelocityY.onChange(I)}},speed:{get:function(){return this.ops.speedX.current},set:function(I){this.ops.speedX.onChange(I),this.ops.speedY.onChange(I)}},speedX:{get:function(){return this.ops.speedX.current},set:function(I){this.ops.speedX.onChange(I)}},speedY:{get:function(){return this.ops.speedY.current},set:function(I){this.ops.speedY.onChange(I)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(I){this.ops.moveToX.onChange(I)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(I){this.ops.moveToY.onChange(I)}},bounce:{get:function(){return this.ops.bounce.current},set:function(I){this.ops.bounce.onChange(I)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(I){this.ops.scaleX.onChange(I)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(I){this.ops.scaleY.onChange(I)}},particleColor:{get:function(){return this.ops.color.current},set:function(I){this.ops.color.onChange(I)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(I){this.ops.color.setEase(I)}},particleTint:{get:function(){return this.ops.tint.current},set:function(I){this.ops.tint.onChange(I)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(I){this.ops.alpha.onChange(I)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(I){this.ops.lifespan.onChange(I)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(I){this.ops.angle.onChange(I)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(I){this.ops.rotate.onChange(I)}},quantity:{get:function(){return this.ops.quantity.current},set:function(I){this.ops.quantity.onChange(I)}},delay:{get:function(){return this.ops.delay.current},set:function(I){this.ops.delay.onChange(I)}},hold:{get:function(){return this.ops.hold.current},set:function(I){this.ops.hold.onChange(I)}},flowCounter:{get:function(){return this.counters[0]},set:function(I){this.counters[0]=I}},frameCounter:{get:function(){return this.counters[1]},set:function(I){this.counters[1]=I}},animCounter:{get:function(){return this.counters[2]},set:function(I){this.counters[2]=I}},elapsed:{get:function(){return this.counters[3]},set:function(I){this.counters[3]=I}},stopCounter:{get:function(){return this.counters[4]},set:function(I){this.counters[4]=I}},completeFlag:{get:function(){return this.counters[5]},set:function(I){this.counters[5]=I}},zoneIndex:{get:function(){return this.counters[6]},set:function(I){this.counters[6]=I}},zoneTotal:{get:function(){return this.counters[7]},set:function(I){this.counters[7]=I}},currentFrame:{get:function(){return this.counters[8]},set:function(I){this.counters[8]=I}},currentAnim:{get:function(){return this.counters[9]},set:function(I){this.counters[9]=I}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var I,k=this.ops;for(I=0;I<W.length;I++){var Y=W[I];k[Y].destroy()}for(I=0;I<this.alive.length;I++)this.alive[I].destroy();for(I=0;I<this.dead.length;I++)this.dead[I].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});a.exports=F},10456:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(90205),y=e(69360),d=new y,l=new y,h=new y,r=new y,n=function(v,o,c,m){var p=d,g=l,x=h,E=r;m?(E.loadIdentity(),E.multiply(m),E.translate(o.x,o.y),E.rotate(o.rotation),E.scale(o.scaleX,o.scaleY)):E.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var P=v.currentContext,S=c.roundPixels,M=c.alpha,b=o.alpha,A=o.alive,L=A.length,R=o.viewBounds;if(!(!o.visible||L===0||R&&!u(R,c.worldView))){o.sortCallback&&o.depthSort(),c.addToRenderList(o);var O=o.scrollFactorX,D=o.scrollFactorY;P.save(),P.globalCompositeOperation=v.blendModes[o.blendMode];for(var B=0;B<L;B++){var G=A[B],z=G.alpha*b*M;if(!(z<=0||G.scaleX===0||G.scaleY===0)){x.applyITRS(G.x,G.y,G.rotation,G.scaleX,G.scaleY),p.copyFrom(c.matrix),p.multiplyWithOffset(E,-c.scrollX*O,-c.scrollY*D),x.e=G.x,x.f=G.y,p.multiply(x,g);var X=G.frame,U=X.canvasData;if(U.width>0&&U.height>0){var V=-X.halfWidth,N=-X.halfHeight;P.globalAlpha=z,P.save(),g.setToContext(P),S&&(V=Math.round(V),N=Math.round(N)),P.imageSmoothingEnabled=!X.source.scaleMode,P.drawImage(X.source.image,U.x,U.y,U.width,U.height,V,N,U.width,U.height),P.restore()}}}P.restore()}};a.exports=n},765:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(72632),h=e(9216);y.register("particles",function(r,n){r===void 0&&(r={});var v=d(r,"key",null),o=l(r,"config",null),c=new h(this.scene,0,0,v);return n!==void 0&&(r.add=n),u(this.scene,c,r),o&&c.setConfig(o),c})},81212:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(9216);u.register("particles",function(d,l,h,r){return d!==void 0&&typeof d=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new y(this.scene,d,l,h,r))})},69116:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(10275),d=e(10456),a.exports={renderWebGL:y,renderCanvas:d}},10275:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(90205),y=e(69360),d=e(75512),l=new y,h=new y,r=new y,n=new y,v=function(o,c,m,p){var g=o.pipelines.set(c.pipeline),x=l,E=h,P=r,S=n;p?(S.loadIdentity(),S.multiply(p),S.translate(c.x,c.y),S.rotate(c.rotation),S.scale(c.scaleX,c.scaleY)):S.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);var M=m.roundPixels,b=d.getTintAppendFloatAlpha,A=m.alpha,L=c.alpha,R=c.texture.glTexture;o.pipelines.preBatch(c);var O=c.alive,D=O.length,B=c.viewBounds;if(!(!c.visible||D===0||B&&!u(B,m.worldView))){c.sortCallback&&c.depthSort();var G=g.setGameObject(c,c.frame);m.addToRenderList(c),x.copyFrom(m.matrix),x.multiplyWithOffset(S,-m.scrollX*c.scrollFactorX,-m.scrollY*c.scrollFactorY),o.setBlendMode(c.blendMode),c.mask&&(c.mask.preRenderWebGL(o,c,m),o.pipelines.set(c.pipeline));for(var z=c.tintFill,X=0;X<D;X++){var U=O[X],V=U.alpha*L*A;if(!(V<=0||U.scaleX===0||U.scaleY===0)){P.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),P.e=U.x,P.f=U.y,x.multiply(P,E);var N=U.frame,W=-N.halfWidth,F=-N.halfHeight,I=E.setQuad(W,F,W+N.width,F+N.height,M),k=b(U.tint,V);g.batchQuad(c,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],N.u0,N.v0,N.u1,N.v1,k,k,k,k,z,R,G)}}c.mask&&c.mask.postRenderWebGL(o,m),o.pipelines.postBatch(c)}};a.exports=v},30891:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r){l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=!0),this.emitter,this.x=l,this.y=h,this.active=r},update:function(){},destroy:function(){this.emitter=null}});a.exports=y},76100:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},26677:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="deathzone"},62736:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="explode"},56490:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},85715:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},40629:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h){this.source=l,this.killOnEnter=h},willKill:function(d){var l=d.worldPosition,h=this.source.contains(l.x,l.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});a.exports=y},54213:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r,n,v,o){n===void 0&&(n=!1),v===void 0&&(v=!0),o===void 0&&(o=-1),this.source=l,this.points=[],this.quantity=h,this.stepRate=r,this.yoyo=n,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.total=o,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var d=this.points[0],l=this.points[this.points.length-1];d.x===l.x&&d.y===l.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(d){return this.source=d,this.updateSource()},getPoint:function(d){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var l=this.points[this.counter];l&&(d.x=l.x,d.y=l.y)}});a.exports=y},68433:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(93736),d=new u({initialize:function(h){this.source=h,this._tempVec=new y,this.total=-1},getPoint:function(l){var h=this._tempVec;this.source.getRandomPoint(h),l.x=h.x,l.y=h.y}});a.exports=d},25962:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(13747),l=new u({Extends:d,Mixins:[y.PathFollower],initialize:function(r,n,v,o,c,m){d.call(this,r,v,o,c,m),this.path=n},preUpdate:function(h,r){this.anims.update(h,r),this.pathUpdate(h)}});a.exports=l},19626:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(29598);u.register("follower",function(d,l,h,r,n){var v=new y(this.scene,d,l,h,r,n);return this.displayList.add(v),this.updateList.add(v),v})},33412:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),y=e(56694),d=e(99425),l=e(15978),h=e(83321),r=e(76583),n=new y({Extends:h,initialize:function(o,c,m,p,g,x,E,P){p||(p="__DEFAULT"),h.call(this,o,c,m,p,g),this.type="Plane",this.anims=new u(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(x,E,P),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(v,o,c){v===void 0&&(v=8),o===void 0&&(o=8),c===void 0&&(c=!1);var m=!1;return c&&(m=!0),this.gridWidth=v,this.gridHeight=o,this.isTiled=c,this.clear(),d({mesh:this,widthSegments:v,heightSegments:o,isOrtho:!1,tile:c,flipY:m}),this},setSizeToFrame:function(v){v===void 0&&(v=!0);var o=this.frame;if(this.setPerspective(this.width/o.width,this.height/o.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!v)return this;var c=this.gridWidth,m=this.gridHeight,p=this.vertices,g=o.u0,x=o.u1,E=o.v0,P=o.v1,S,M,b=0;if(this.isTiled)for(E=o.v1,P=o.v0,M=0;M<m;M++)for(S=0;S<c;S++)p[b++].setUVs(g,P),p[b++].setUVs(g,E),p[b++].setUVs(x,P),p[b++].setUVs(g,E),p[b++].setUVs(x,E),p[b++].setUVs(x,P);else{var A=c+1,L=m+1,R=x-g,O=P-E,D=[];for(M=0;M<L;M++)for(S=0;S<A;S++){var B=g+R*(S/c),G=E+O*(M/m);D.push(B,G)}for(M=0;M<m;M++)for(S=0;S<c;S++){var z=(S+A*M)*2,X=(S+A*(M+1))*2,U=(S+1+A*(M+1))*2,V=(S+1+A*M)*2;p[b++].setUVs(D[z],D[z+1]),p[b++].setUVs(D[X],D[X+1]),p[b++].setUVs(D[V],D[V+1]),p[b++].setUVs(D[X],D[X+1]),p[b++].setUVs(D[U],D[U+1]),p[b++].setUVs(D[V],D[V+1])}}return this},setViewHeight:function(v){v===void 0&&(v=this.frame.height);var o=this.fov*(Math.PI/180);this.viewPosition.z=this.height/v/Math.tan(o/2),this.dirtyCache[10]=1},createCheckerboard:function(v,o,c,m,p){v===void 0&&(v=16777215),o===void 0&&(o=255),c===void 0&&(c=255),m===void 0&&(m=255),p===void 0&&(p=128);var g=this.scene.sys.renderer.gl,x=g.createTexture();g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,x),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);for(var E=l(v),P=l(o),S=[],M=0;M<16;M++)for(var b=0;b<16;b++)M<8&&b<8||M>7&&b>7?S.push(E.r,E.g,E.b,c):S.push(P.r,P.g,P.b,m);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,new Uint8Array(S)),x.isAlphaPremultiplied=!0,x.isRenderTexture=!1,x.width=16,x.height=16;var A=this.scene.sys.textures.addGLTexture(r(),x,16,16);return this.removeCheckerboard(),this._checkerboard=A,g.bindTexture(g.TEXTURE_2D,null),this.setTexture(A),this.setSizeToFrame(),this.setViewHeight(p),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(v,o){return this.anims.play(v,o)},playReverse:function(v,o){return this.anims.playReverse(v,o)},playAfterDelay:function(v,o){return this.anims.playAfterDelay(v,o)},playAfterRepeat:function(v,o){return this.anims.playAfterRepeat(v,o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(v){return this.anims.stopAfterDelay(v)},stopAfterRepeat:function(v){return this.anims.stopAfterRepeat(v)},stopOnFrame:function(v){return this.anims.stopOnFrame(v)},preUpdate:function(v,o){h.prototype.preUpdate.call(this,v,o),this.anims.update(v,o)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});a.exports=n},10912:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(32291),d=e(99325),l=e(20494),h=e(10850),r=e(33412);d.register("plane",function(n,v){n===void 0&&(n={});var o=l(n,"key",null),c=l(n,"frame",null),m=h(n,"width",8),p=h(n,"height",8),g=h(n,"tile",!1),x=new r(this.scene,0,0,o,c,m,p,g);v!==void 0&&(n.add=v);var E=h(n,"checkerboard",null);if(E){var P=h(E,"color1",16777215),S=h(E,"color2",255),M=h(E,"alpha1",255),b=h(E,"alpha2",255),A=h(E,"height",128);x.createCheckerboard(P,S,M,b,A)}return u(this.scene,x,n),y(x,n),x})},58322:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(33412),y=e(61286);y.register("plane",function(d,l,h,r,n,v,o){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o))})},13171:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(74853),h=e(65641),r=e(71606),n=new u({Extends:d,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible,r],initialize:function(o,c,m,p,g,x,E){p===void 0&&(p=16777215),g===void 0&&(g=128),x===void 0&&(x=1),E===void 0&&(E=.1),d.call(this,o,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(c,m),this.color=l(p),this.intensity=x,this.attenuation=E,this.width=g*2,this.height=g*2,this._radius=g},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});a.exports=n},162:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(13171);y.register("pointlight",function(h,r){h===void 0&&(h={});var n=d(h,"color",16777215),v=d(h,"radius",128),o=d(h,"intensity",1),c=d(h,"attenuation",.1),m=new l(this.scene,0,0,n,v,o,c);return r!==void 0&&(h.add=r),u(this.scene,m,h),m})},91201:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(13171);u.register("pointlight",function(d,l,h,r,n,v){return this.displayList.add(new y(this.scene,d,l,h,r,n,v))})},71606:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(80590),a.exports={renderWebGL:y,renderCanvas:d}},80590:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=function(d,l,h,r){h.addToRenderList(l);var n=d.pipelines.set(l.pipeline),v=u(l,h,r).calc,o=l.width,c=l.height,m=-l._radius,p=-l._radius,g=m+o,x=p+c,E=v.getX(0,0),P=v.getY(0,0),S=v.getX(m,p),M=v.getY(m,p),b=v.getX(m,x),A=v.getY(m,x),L=v.getX(g,x),R=v.getY(g,x),O=v.getX(g,p),D=v.getY(g,p);d.pipelines.preBatch(l),n.batchPointLight(l,h,S,M,b,A,L,R,O,D,E,P),d.pipelines.postBatch(l)};a.exports=y},15996:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(845),d=e(1539),l=new u({Extends:d,initialize:function(r,n,v,o,c){n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=32),c===void 0&&(c=32);var m=new y(r.sys.textures,"",o,c);d.call(this,r,n,v,m),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,r){this.width=h,this.height=r,this.texture.setSize(h,r),this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=h,n.hitArea.height=r),this},resize:function(h,r){return this.setSize(h,r),this},saveTexture:function(h){var r=this.texture;return r.key=h,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(h,r,n,v,o,c){return this.texture.fill(h,r,n,v,o,c),this},clear:function(){return this.texture.clear(),this},stamp:function(h,r,n,v,o){return this.texture.stamp(h,r,n,v,o),this},erase:function(h,r,n){return this.texture.erase(h,r,n),this},draw:function(h,r,n,v,o){return this.texture.draw(h,r,n,v,o),this},drawFrame:function(h,r,n,v,o,c){return this.texture.drawFrame(h,r,n,v,o,c),this},repeat:function(h,r,n,v,o,c,m,p,g){return this.texture.repeat(h,r,n,v,o,c,m,p,g),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,r,n,v,o){return this.texture.batchDraw(h,r,n,v,o),this},batchDrawFrame:function(h,r,n,v,o,c){return this.texture.batchDrawFrame(h,r,n,v,o,c),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,r,n,v,o,c,m){return this.texture.snapshotArea(h,r,n,v,o,c,m),this},snapshot:function(h,r,n){return this.snapshotArea(0,0,this.width,this.height,h,r,n)},snapshotPixel:function(h,r,n){return this.snapshotArea(h,r,1,1,n,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});a.exports=l},85692:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(15996);y.register("renderTexture",function(h,r){h===void 0&&(h={});var n=d(h,"x",0),v=d(h,"y",0),o=d(h,"width",32),c=d(h,"height",32),m=new l(this.scene,n,v,o,c);return r!==void 0&&(h.add=r),u(this.scene,m,h),m})},29599:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(15996);u.register("renderTexture",function(d,l,h,r){return this.displayList.add(new y(this.scene,d,l,h,r))})},79968:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),y=e(56694),d=e(64937),l=e(89980),h=e(65641),r=e(58912),n=e(93736),v=new y({Extends:l,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Flip,d.Mask,d.Pipeline,d.PostPipeline,d.Size,d.Texture,d.Transform,d.Visible,d.ScrollFactor,r],initialize:function(c,m,p,g,x,E,P,S,M){g===void 0&&(g="__DEFAULT"),E===void 0&&(E=2),P===void 0&&(P=!0),l.call(this,c,"Rope"),this.anims=new u(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=g==="__DEFAULT",this.dirty=!1,this.horizontal=P,this._flipX=!1,this._flipY=!1,this._perp=new n,this.debugCallback=null,this.debugGraphic=null,this.setTexture(g,x),this.setPosition(m,p),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,S,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,c){var m=this.anims.currentFrame;this.anims.update(o,c),this.anims.currentFrame!==m&&(this.updateUVs(),this.updateVertices())},play:function(o,c,m){return this.anims.play(o,c,m),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(o,c,m){return o===void 0&&(o=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(o,c,m))},setVertical:function(o,c,m){return o===void 0&&(o=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(o,c,m)):this},setTintFill:function(o){return o===void 0&&(o=!1),this.tintFill=o,this},setAlphas:function(o,c){var m=this.points.length;if(m<1)return this;var p=this.alphas;o===void 0?o=[1]:!Array.isArray(o)&&c===void 0&&(o=[o]);var g,x=0;if(c!==void 0)for(g=0;g<m;g++)x=g*2,p[x]=o,p[x+1]=c;else if(o.length===m)for(g=0;g<m;g++)x=g*2,p[x]=o[g],p[x+1]=o[g];else{var E=o[0];for(g=0;g<m;g++)x=g*2,o.length>x&&(E=o[x]),p[x]=E,o.length>x+1&&(E=o[x+1]),p[x+1]=E}return this},setColors:function(o){var c=this.points.length;if(c<1)return this;var m=this.colors;o===void 0?o=[16777215]:Array.isArray(o)||(o=[o]);var p,g=0;if(o.length===c)for(p=0;p<c;p++)g=p*2,m[g]=o[p],m[g+1]=o[p];else{var x=o[0];for(p=0;p<c;p++)g=p*2,o.length>g&&(x=o[g]),m[g]=x,o.length>g+1&&(x=o[g+1]),m[g+1]=x}return this},setPoints:function(o,c,m){if(o===void 0&&(o=2),typeof o=="number"){var p=o;p<2&&(p=2),o=[];var g,x,E;if(this.horizontal)for(E=-this.frame.halfWidth,x=this.frame.width/(p-1),g=0;g<p;g++)o.push({x:E+g*x,y:0});else for(E=-this.frame.halfHeight,x=this.frame.height/(p-1),g=0;g<p;g++)o.push({x:0,y:E+g*x})}var P=o.length,S=this.points.length;return P<1?(console.warn("Rope: Not enough points given"),this):(P===1&&(o.unshift({x:0,y:0}),P++),S!==P&&this.resizeArrays(P),this.dirty=!0,this.points=o,this.updateUVs(),c!=null&&this.setColors(c),m!=null&&this.setAlphas(m),this)},updateUVs:function(){for(var o=this.uv,c=this.points.length,m=this.frame.u0,p=this.frame.v0,g=this.frame.u1,x=this.frame.v1,E=(g-m)/(c-1),P=(x-p)/(c-1),S=0;S<c;S++){var M=S*4,b,A,L,R;this.horizontal?(this._flipX?(b=g-S*E,L=g-S*E):(b=m+S*E,L=m+S*E),this._flipY?(A=x,R=p):(A=p,R=x)):(this._flipX?(b=m,L=g):(b=g,L=m),this._flipY?(A=x-S*P,R=x-S*P):(A=p+S*P,R=p+S*P)),o[M+0]=b,o[M+1]=A,o[M+2]=L,o[M+3]=R}return this},resizeArrays:function(o){var c=this.colors,m=this.alphas;this.vertices=new Float32Array(o*4),this.uv=new Float32Array(o*4),c=new Uint32Array(o*2),m=new Float32Array(o*2);for(var p=0;p<o*2;p++)c[p]=16777215,m[p]=1;return this.colors=c,this.alphas=m,this.dirty=!0,this},updateVertices:function(){var o=this._perp,c=this.points,m=this.vertices,p=c.length;if(this.dirty=!1,!(p<1)){for(var g,x=c[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,P=0;P<p;P++){var S=c[P],M=P*4;P<p-1?g=c[P+1]:g=S,o.x=g.y-x.y,o.y=-(g.x-x.x);var b=o.length();o.x/=b,o.y/=b,o.x*=E,o.y*=E,m[M]=S.x+o.x,m[M+1]=S.y+o.y,m[M+2]=S.x-o.x,m[M+3]=S.y-o.y,x=S}return this}},setDebug:function(o,c){return this.debugGraphic=o,!o&&!c?this.debugCallback=null:c?this.debugCallback=c:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(o,c,m){var p=o.debugGraphic,g=m[0],x=m[1],E=m[2],P=m[3];p.lineBetween(g,x,E,P);for(var S=4;S<c;S+=4){var M=m[S+0],b=m[S+1],A=m[S+2],L=m[S+3];p.lineBetween(g,x,M,b),p.lineBetween(E,P,A,L),p.lineBetween(E,P,M,b),p.lineBetween(M,b,A,L),g=M,x=b,E=A,P=L}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(o){return this._flipX=o,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(o){return this._flipY=o,this.updateUVs()}}});a.exports=v},44598:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};a.exports=T},96027:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(10850),h=e(79968);y.register("rope",function(r,n){r===void 0&&(r={});var v=d(r,"key",null),o=d(r,"frame",null),c=d(r,"horizontal",!0),m=l(r,"points",void 0),p=l(r,"colors",void 0),g=l(r,"alphas",void 0),x=new h(this.scene,0,0,v,o,m,c,p,g);return n!==void 0&&(r.add=n),u(this.scene,x,r),x})},31982:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79968),y=e(61286);y.register("rope",function(d,l,h,r,n,v,o,c){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o,c))})},58912:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(49489),d=e(44598),a.exports={renderWebGL:y,renderCanvas:d}},49489:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(75512),d=function(l,h,r,n){r.addToRenderList(h);var v=l.pipelines.set(h.pipeline,h),o=u(h,r,n).calc,c=h.vertices,m=h.uv,p=h.colors,g=h.alphas,x=h.alpha,E=y.getTintAppendFloatAlpha,P=r.roundPixels,S=c.length,M=Math.floor(S*.5);v.flush(),l.pipelines.preBatch(h);var b=v.setGameObject(h),A=v.vertexViewF32,L=v.vertexViewU32,R=v.vertexCount*v.currentShader.vertexComponentCount-1,O=0,D=h.tintFill;h.dirty&&h.updateVertices();for(var B=h.debugCallback,G=[],z=0;z<S;z+=2){var X=c[z+0],U=c[z+1],V=X*o.a+U*o.c+o.e,N=X*o.b+U*o.d+o.f;P&&(V=Math.round(V),N=Math.round(N)),A[++R]=V,A[++R]=N,A[++R]=m[z+0],A[++R]=m[z+1],A[++R]=b,A[++R]=D,L[++R]=E(p[O],r.alpha*(g[O]*x)),O++,B&&(G[z+0]=V,G[z+1]=N)}B&&B.call(h,h,S,G),v.vertexCount+=M,v.currentBatch.count=v.vertexCount-v.currentBatch.start,l.pipelines.postBatch(h)};a.exports=d},27902:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(72632),h=e(98611),r=e(22440),n=e(24252),v=e(69360),o=new u({Extends:d,Mixins:[y.ComputedSize,y.Depth,y.GetBounds,y.Mask,y.Origin,y.ScrollFactor,y.Transform,y.Visible,n],initialize:function(m,p,g,x,E,P,S,M){g===void 0&&(g=0),x===void 0&&(x=0),E===void 0&&(E=128),P===void 0&&(P=128),d.call(this,m,"Shader"),this.blendMode=-1,this.shader;var b=m.sys.renderer;this.renderer=b,this.gl=b.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=b.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=b.width,this._rendererHeight=b.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(g,x),this.setSize(E,P),this.setOrigin(.5,.5),this.setShader(p,S,M)},willRender:function(c){return this.renderToTexture?!0:!(d.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,m){if(m===void 0&&(m=!1),!this.renderToTexture){var p=this.width,g=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,p,g,0),this.glTexture.flipY=m,this.framebuffer=x.createFramebuffer(p,g,this.glTexture,!1),this._rendererWidth=p,this._rendererHeight=g,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture,p,g))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(c,m,p){if(m===void 0&&(m=[]),typeof c=="string"){var g=this.scene.sys.cache.shader;if(!g.has(c))return console.warn("Shader missing: "+c),this;this.shader=g.get(c)}else this.shader=c;var x=this.gl,E=this.renderer;this.program&&x.deleteProgram(this.program);var P=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(P,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(P,"uResolution"),this.width,this.height),this.program=P;var S=new Date,M={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,M):this.uniforms=M;for(var b=0;b<4;b++)m[b]&&this.setSampler2D("iChannel"+b,m[b],b,p);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,m,p,g){var x=-1e3,E=1e3,P=1/(c-m),S=1/(p-g),M=1/(x-E),b=this.projectionMatrix;b[0]=-2*P,b[5]=-2*S,b[10]=2*M,b[12]=(c+m)*P,b[13]=(g+p)*S,b[14]=(E+x)*M;var A=this.program,L=this.gl,R=this.renderer;R.setProgram(A),L.uniformMatrix4fv(L.getUniformLocation(A,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=m,this._rendererHeight=p},initUniforms:function(){var c=this.gl,m=this.renderer.glFuncMap,p=this.program;this._textureCount=0;for(var g in this.uniforms){var x=this.uniforms[g],E=x.type,P=m[E];x.uniformLocation=c.getUniformLocation(p,g),E!=="sampler2D"&&(x.glMatrix=P.matrix,x.glValueLength=P.length,x.glFunc=P.func)}},setSampler2DBuffer:function(c,m,p,g,x,E){x===void 0&&(x=0),E===void 0&&(E={});var P=this.uniforms[c];return P.value=m,E.width=p,E.height=g,P.textureData=E,this._textureCount=x,this.initSampler2D(P),this},setSampler2D:function(c,m,p,g){p===void 0&&(p=0);var x=this.scene.sys.textures;if(x.exists(m)){var E=x.getFrame(m);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,E.glTexture,E.width,E.height,p,g);var P=this.uniforms[c],S=E.source;P.textureKey=m,P.source=S.image,P.value=E.glTexture,S.isGLTexture&&(g||(g={}),g.width=S.width,g.height=S.height),g&&(P.textureData=g),this._textureCount=p,this.initSampler2D(P)}return this},setUniform:function(c,m){return r(this.uniforms,c,m),this},getUniform:function(c){return l(this.uniforms,c,null)},setChannel0:function(c,m){return this.setSampler2D("iChannel0",c,0,m)},setChannel1:function(c,m){return this.setSampler2D("iChannel1",c,1,m)},setChannel2:function(c,m){return this.setSampler2D("iChannel2",c,2,m)},setChannel3:function(c,m){return this.setSampler2D("iChannel3",c,3,m)},initSampler2D:function(c){if(!!c.value){var m=this.gl;m.activeTexture(m.TEXTURE0+this._textureCount),m.bindTexture(m.TEXTURE_2D,c.value);var p=c.textureData;if(p&&!c.value.isRenderTexture){var g=m[l(p,"magFilter","linear").toUpperCase()],x=m[l(p,"minFilter","linear").toUpperCase()],E=m[l(p,"wrapS","repeat").toUpperCase()],P=m[l(p,"wrapT","repeat").toUpperCase()],S=m[l(p,"format","rgba").toUpperCase()];if(p.repeat&&(E=m.REPEAT,P=m.REPEAT),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!!p.flipY),p.width){var M=l(p,"width",512),b=l(p,"height",2),A=l(p,"border",0);m.texImage2D(m.TEXTURE_2D,0,S,M,b,A,S,m.UNSIGNED_BYTE,null)}else m.texImage2D(m.TEXTURE_2D,0,S,m.RGBA,m.UNSIGNED_BYTE,c.source);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,g),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,x),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,E),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,P)}this.renderer.setProgram(this.program),m.uniform1i(c.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var c=this.gl,m=this.uniforms,p,g,x,E,P,S=0;for(var M in m)p=m[M],x=p.glFunc,g=p.glValueLength,E=p.uniformLocation,P=p.value,P!==null&&(g===1?p.glMatrix?x.call(c,E,p.transpose,P):x.call(c,E,P):g===2?x.call(c,E,P.x,P.y):g===3?x.call(c,E,P.x,P.y,P.z):g===4?x.call(c,E,P.x,P.y,P.z,P.w):p.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+S),c.bindTexture(c.TEXTURE_2D,P),c.uniform1i(E,S),S++))},load:function(c){var m=this.gl,p=this.width,g=this.height,x=this.renderer,E=this.program,P=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,M=-this._displayOriginY;P[0]=c[0],P[1]=c[1],P[4]=c[2],P[5]=c[3],P[8]=c[4],P[9]=c[5],P[12]=P[0]*S+P[4]*M,P[13]=P[1]*S+P[5]*M}m.useProgram(E),m.uniformMatrix4fv(m.getUniformLocation(E,"uViewMatrix"),!1,P),m.uniform2f(m.getUniformLocation(E,"uResolution"),this.width,this.height);var b=this.uniforms,A=b.resolution;A.value.x=p,A.value.y=g,b.time.value=x.game.loop.getDuration();var L=this.pointer;if(L){var R=b.mouse,O=L.x/p,D=1-L.y/g;R.value.x=O.toFixed(2),R.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,m=this.height,p=this.program,g=this.gl,x=this.vertexBuffer,E=this.renderer,P=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)),g.bindBuffer(g.ARRAY_BUFFER,x);var S=g.getAttribLocation(p,"inPosition");S!==-1&&(g.enableVertexAttribArray(S),g.vertexAttribPointer(S,2,g.FLOAT,!1,P,0));var M=this.vertexViewF32;M[3]=m,M[4]=c,M[5]=m,M[8]=c,M[9]=m,M[10]=c;var b=6;g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,b*P)),g.drawArrays(g.TRIANGLES,0,b),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var c=this.gl;c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});a.exports=o},10612:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};a.exports=T},13908:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(27902);y.register("shader",function(h,r){h===void 0&&(h={});var n=d(h,"key",null),v=d(h,"x",0),o=d(h,"y",0),c=d(h,"width",128),m=d(h,"height",128),p=new l(this.scene,n,v,o,c,m);return r!==void 0&&(h.add=r),u(this.scene,p,h),p})},51979:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27902),y=e(61286);y.register("shader",function(d,l,h,r,n,v,o){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o))})},24252:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(19782),d=e(10612),a.exports={renderWebGL:y,renderCanvas:d}},19782:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=function(d,l,h,r){if(!!l.shader){if(h.addToRenderList(l),d.pipelines.clear(),l.renderToTexture)l.load(),l.flush();else{var n=u(l,h,r).calc;(d.width!==l._rendererWidth||d.height!==l._rendererHeight)&&l.projOrtho(0,d.width,d.height,0),l.load(n.matrix),l.flush()}d.pipelines.rebind()}};a.exports=y},19543:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),y=function(d,l,h,r,n,v){for(var o=u.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*r),c=h.pathData,m=h.pathIndexes,p=0;p<m.length;p+=3){var g=m[p]*2,x=m[p+1]*2,E=m[p+2]*2,P=c[g+0]-n,S=c[g+1]-v,M=c[x+0]-n,b=c[x+1]-v,A=c[E+0]-n,L=c[E+1]-v,R=l.getX(P,S),O=l.getY(P,S),D=l.getX(M,b),B=l.getY(M,b),G=l.getX(A,L),z=l.getY(A,L);d.batchTri(h,R,O,D,B,G,z,0,0,1,1,o,o,o,2)}};a.exports=y},15608:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=y||u.fillColor,h=d||u.fillAlpha,r=(l&16711680)>>>16,n=(l&65280)>>>8,v=l&255;e.fillStyle="rgba("+r+","+n+","+v+","+h+")"};a.exports=T},17876:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=y||u.strokeColor,h=d||u.strokeAlpha,r=(l&16711680)>>>16,n=(l&65280)>>>8,v=l&255;e.strokeStyle="rgba("+r+","+n+","+v+","+h+")",e.lineWidth=u.lineWidth};a.exports=T},91461:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(88829),h=new u({Extends:d,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible],initialize:function(n,v,o){v===void 0&&(v="Shape"),d.call(this,n,v),this.geom=o,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,n){return n===void 0&&(n=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(r,n,v){return v===void 0&&(v=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=n,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,n){return this.width=r,this.height=n,this},setDisplaySize:function(r,n){return this.displayWidth=r,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});a.exports=h},50262:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),y=function(d,l,h,r,n){var v=d.strokeTint,o=u.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*h);v.TL=o,v.TR=o,v.BL=o,v.BR=o;var c=l.pathData,m=c.length-1,p=l.lineWidth,g=p/2,x=c[0]-r,E=c[1]-n;l.closePath||(m-=2);for(var P=2;P<m;P+=2){var S=c[P]-r,M=c[P+1]-n;d.batchLine(x,E,S,M,g,g,p,P-2,l.closePath?P===m-1:!1),x=S,E=M}};a.exports=y},28593:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(2213),y=e(56694),d=e(75606),l=e(11117),h=e(26673),r=e(83392),n=e(91461),v=new y({Extends:n,Mixins:[u],initialize:function(c,m,p,g,x,E,P,S,M){m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=0),E===void 0&&(E=360),P===void 0&&(P=!1),n.call(this,c,"Arc",new h(0,0,g)),this._startAngle=x,this._endAngle=E,this._anticlockwise=P,this._iterations=.01,this.setPosition(m,p);var b=this.geom.radius*2;this.setSize(b,b),S!==void 0&&this.setFillStyle(S,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(o){this._iterations=o,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(o){this.geom.radius=o;var c=o*2;this.setSize(c,c),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(o){this._startAngle=o,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(o){this._endAngle=o,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(o){this._anticlockwise=o,this.updateData()}},setRadius:function(o){return this.radius=o,this},setIterations:function(o){return o===void 0&&(o=.01),this.iterations=o,this},setStartAngle:function(o,c){return this._startAngle=o,c!==void 0&&(this._anticlockwise=c),this.updateData()},setEndAngle:function(o,c){return this._endAngle=o,c!==void 0&&(this._anticlockwise=c),this.updateData()},updateData:function(){var o=this._iterations,c=o,m=this.geom.radius,p=d(this._startAngle),g=d(this._endAngle),x=this._anticlockwise,E=m,P=m;g-=p,x?g<-r.PI2?g=-r.PI2:g>0&&(g=-r.PI2+g%r.PI2):g>r.PI2?g=r.PI2:g<0&&(g=r.PI2+g%r.PI2);for(var S=[E+Math.cos(p)*m,P+Math.sin(p)*m],M;c<1;)M=g*c+p,S.push(E+Math.cos(M)*m,P+Math.sin(M)*m),c+=o;return M=g+p,S.push(E+Math.cos(M)*m,P+Math.sin(M)*m),S.push(E+Math.cos(p)*m,P+Math.sin(p)*m),this.pathIndexes=l(S),this.pathData=S,this}});a.exports=v},23560:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75606),y=e(15608),d=e(17876),l=e(49584),h=function(r,n,v,o){v.addToRenderList(n);var c=r.currentContext;if(l(r,c,n,v,o)){var m=n.radius;c.beginPath(),c.arc(m-n.originX*(m*2),m-n.originY*(m*2),m,u(n._startAngle),u(n._endAngle),n.anticlockwise),n.closePath&&c.closePath(),n.isFilled&&(y(c,n),c.fill()),n.isStroked&&(d(c,n),c.stroke()),c.restore()}};a.exports=h},10369:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28593),y=e(61286);y.register("arc",function(d,l,h,r,n,v,o,c){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o,c))}),y.register("circle",function(d,l,h,r,n){return this.displayList.add(new u(this.scene,d,l,h,0,360,!1,r,n))})},2213:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(58356),d=e(23560),a.exports={renderWebGL:y,renderCanvas:d}},58356:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(19543),d=e(50262),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=u(r,n,v),m=o.calcMatrix.copyFrom(c.calc),p=r._displayOriginX,g=r._displayOriginY,x=n.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&y(o,m,r,x,p,g),r.isStroked&&d(o,r,x,p,g),h.pipelines.postBatch(r)};a.exports=l},15220:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(87203),d=e(11117),l=e(74118),h=e(91461),r=new u({Extends:h,Mixins:[y],initialize:function(v,o,c,m,p,g){o===void 0&&(o=0),c===void 0&&(c=0),h.call(this,v,"Curve",m),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(o,c),p!==void 0&&this.setFillStyle(p,g),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,v=this._smoothness;this.geom.getBounds(n,v),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var o=[],c=this.geom.getPoints(v),m=0;m<c.length;m++)o.push(c[m].x,c[m].y);return o.push(c[0].x,c[0].y),this.pathIndexes=d(o),this.pathData=o,this}});a.exports=r},4024:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=r._displayOriginX+r._curveBounds.x,m=r._displayOriginY+r._curveBounds.y,p=r.pathData,g=p.length-1,x=p[0]-c,E=p[1]-m;o.beginPath(),o.moveTo(x,E),r.closePath||(g-=2);for(var P=2;P<g;P+=2){var S=p[P]-c,M=p[P+1]-m;o.lineTo(S,M)}r.closePath&&o.closePath(),r.isFilled&&(u(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};a.exports=l},10147:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(15220);u.register("curve",function(d,l,h,r,n){return this.displayList.add(new y(this.scene,d,l,h,r,n))})},87203:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(82958),d=e(4024),a.exports={renderWebGL:y,renderCanvas:d}},82958:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),y=e(73329),d=e(50262),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=y(r,n,v),m=o.calcMatrix.copyFrom(c.calc),p=r._displayOriginX+r._curveBounds.x,g=r._displayOriginY+r._curveBounds.y,x=n.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&u(o,m,r,x,p,g),r.isStroked&&d(o,r,x,p,g),h.pipelines.postBatch(r)};a.exports=l},28591:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(11117),d=e(84171),l=e(95669),h=e(91461),r=new u({Extends:h,Mixins:[d],initialize:function(v,o,c,m,p,g,x){o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=128),p===void 0&&(p=128),h.call(this,v,"Ellipse",new l(m/2,p/2,m,p)),this._smoothness=64,this.setPosition(o,c),this.width=m,this.height=p,g!==void 0&&this.setFillStyle(g,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSize:function(n,v){return this.width=n,this.height=v,this.geom.setPosition(n/2,v/2),this.geom.setSize(n,v),this.updateData()},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){for(var n=[],v=this.geom.getPoints(this._smoothness),o=0;o<v.length;o++)n.push(v[o].x,v[o].y);return n.push(v[0].x,v[0].y),this.pathIndexes=y(n),this.pathData=n,this}});a.exports=r},55881:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=r._displayOriginX,m=r._displayOriginY,p=r.pathData,g=p.length-1,x=p[0]-c,E=p[1]-m;o.beginPath(),o.moveTo(x,E),r.closePath||(g-=2);for(var P=2;P<g;P+=2){var S=p[P]-c,M=p[P+1]-m;o.lineTo(S,M)}o.closePath(),r.isFilled&&(u(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};a.exports=l},99869:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28591),y=e(61286);y.register("ellipse",function(d,l,h,r,n,v){return this.displayList.add(new u(this.scene,d,l,h,r,n,v))})},84171:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(17554),d=e(55881),a.exports={renderWebGL:y,renderCanvas:d}},17554:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),y=e(73329),d=e(50262),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=y(r,n,v),m=o.calcMatrix.copyFrom(c.calc),p=r._displayOriginX,g=r._displayOriginY,x=n.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&u(o,m,r,x,p,g),r.isStroked&&d(o,r,x,p,g),h.pipelines.postBatch(r)};a.exports=l},39169:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(91461),d=e(88059),l=new u({Extends:y,Mixins:[d],initialize:function(r,n,v,o,c,m,p,g,x,E,P){n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=128),c===void 0&&(c=128),m===void 0&&(m=32),p===void 0&&(p=32),y.call(this,r,"Grid",null),this.cellWidth=m,this.cellHeight=p,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(n,v),this.setSize(o,c),this.setFillStyle(g,x),E!==void 0&&this.setOutlineStyle(E,P),this.updateDisplayOrigin()},setFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=r,this.showOutline=!0),this}});a.exports=l},95525:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=-r._displayOriginX,m=-r._displayOriginY,p=n.alpha*r.alpha,g=r.width,x=r.height,E=r.cellWidth,P=r.cellHeight,S=Math.ceil(g/E),M=Math.ceil(x/P),b=E,A=P,L=E-(S*E-g),R=P-(M*P-x),O=r.showCells,D=r.showAltCells,B=r.showOutline,G=0,z=0,X=0,U=0,V=0;if(B&&(b--,A--,L===E&&L--,R===P&&R--),O&&r.fillAlpha>0)for(u(o,r),z=0;z<M;z++)for(D&&(X=z%2),G=0;G<S;G++){if(D&&X){X=0;continue}X++,U=G<S-1?b:L,V=z<M-1?A:R,o.fillRect(c+G*E,m+z*P,U,V)}if(D&&r.altFillAlpha>0)for(u(o,r,r.altFillColor,r.altFillAlpha*p),z=0;z<M;z++)for(D&&(X=z%2),G=0;G<S;G++){if(D&&!X){X=1;continue}X=0,U=G<S-1?b:L,V=z<M-1?A:R,o.fillRect(c+G*E,m+z*P,U,V)}if(B&&r.outlineFillAlpha>0){for(y(o,r,r.outlineFillColor,r.outlineFillAlpha*p),G=1;G<S;G++){var N=G*E;o.beginPath(),o.moveTo(N+c,m),o.lineTo(N+c,x+m),o.stroke()}for(z=1;z<M;z++){var W=z*P;o.beginPath(),o.moveTo(c,W+m),o.lineTo(c+g,W+m),o.stroke()}}o.restore()}};a.exports=l},9326:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(39169);u.register("grid",function(d,l,h,r,n,v,o,c,m,p){return this.displayList.add(new y(this.scene,d,l,h,r,n,v,o,c,m,p))})},88059:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(50639),d=e(95525),a.exports={renderWebGL:y,renderCanvas:d}},50639:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(75512),d=function(l,h,r,n){r.addToRenderList(h);var v=l.pipelines.set(h.pipeline),o=u(h,r,n),c=v.calcMatrix.copyFrom(o.calc);c.translate(-h._displayOriginX,-h._displayOriginY);var m=r.alpha*h.alpha,p=h.width,g=h.height,x=h.cellWidth,E=h.cellHeight,P=Math.ceil(p/x),S=Math.ceil(g/E),M=x,b=E,A=x-(P*x-p),L=E-(S*E-g),R,O,D=h.showCells,B=h.showAltCells,G=h.showOutline,z=0,X=0,U=0,V=0,N=0;if(G&&(M--,b--,A===x&&A--,L===E&&L--),l.pipelines.preBatch(h),D&&h.fillAlpha>0)for(R=v.fillTint,O=y.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*m),R.TL=O,R.TR=O,R.BL=O,R.BR=O,X=0;X<S;X++)for(B&&(U=X%2),z=0;z<P;z++){if(B&&U){U=0;continue}U++,V=z<P-1?M:A,N=X<S-1?b:L,v.batchFillRect(z*x,X*E,V,N)}if(B&&h.altFillAlpha>0)for(R=v.fillTint,O=y.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*m),R.TL=O,R.TR=O,R.BL=O,R.BR=O,X=0;X<S;X++)for(B&&(U=X%2),z=0;z<P;z++){if(B&&!U){U=1;continue}U=0,V=z<P-1?M:A,N=X<S-1?b:L,v.batchFillRect(z*x,X*E,V,N)}if(G&&h.outlineFillAlpha>0){var W=v.strokeTint,F=y.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*m);for(W.TL=F,W.TR=F,W.BL=F,W.BR=F,z=1;z<P;z++){var I=z*x;v.batchLine(I,0,I,g,1,1,1,0,!1)}for(X=1;X<S;X++){var k=X*E;v.batchLine(0,k,p,k,1,1,1,0,!1)}}l.pipelines.postBatch(h)};a.exports=d},4415:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72296),y=e(56694),d=e(91461),l=new y({Extends:d,Mixins:[u],initialize:function(r,n,v,o,c,m,p,g){n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=48),c===void 0&&(c=32),m===void 0&&(m=15658734),p===void 0&&(p=10066329),g===void 0&&(g=13421772),d.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=m,this.fillLeft=p,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(n,v),this.setSize(o,c),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,r,n){return h===void 0&&(h=!0),r===void 0&&(r=!0),n===void 0&&(n=!0),this.showTop=h,this.showLeft=r,this.showRight=n,this},setFillStyle:function(h,r,n){return this.fillTop=h,this.fillLeft=r,this.fillRight=n,this.isFilled=!0,this}});a.exports=l},32884:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(49584),d=function(l,h,r,n){r.addToRenderList(h);var v=l.currentContext;if(y(l,v,h,r,n)&&h.isFilled){var o=h.width,c=h.height,m=o/2,p=o/h.projection;h.showTop&&(u(v,h,h.fillTop),v.beginPath(),v.moveTo(-m,-c),v.lineTo(0,-p-c),v.lineTo(m,-c),v.lineTo(m,-1),v.lineTo(0,p-1),v.lineTo(-m,-1),v.lineTo(-m,-c),v.fill()),h.showLeft&&(u(v,h,h.fillLeft),v.beginPath(),v.moveTo(-m,0),v.lineTo(0,p),v.lineTo(0,p-c),v.lineTo(-m,-c),v.lineTo(-m,0),v.fill()),h.showRight&&(u(v,h,h.fillRight),v.beginPath(),v.moveTo(m,0),v.lineTo(0,p),v.lineTo(0,p-c),v.lineTo(m,-c),v.lineTo(m,0),v.fill()),v.restore()}};a.exports=d},88154:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(4415);u.register("isobox",function(d,l,h,r,n,v,o){return this.displayList.add(new y(this.scene,d,l,h,r,n,v,o))})},72296:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(33101),d=e(32884),a.exports={renderWebGL:y,renderCanvas:d}},33101:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(75512),d=function(l,h,r,n){r.addToRenderList(h);var v=l.pipelines.set(h.pipeline),o=u(h,r,n),c=v.calcMatrix.copyFrom(o.calc),m=h.width,p=h.height,g=m/2,x=m/h.projection,E=r.alpha*h.alpha;if(!!h.isFilled){var P,S,M,b,A,L,R,O,D;l.pipelines.preBatch(h),h.showTop&&(P=y.getTintAppendFloatAlpha(h.fillTop,E),S=c.getX(-g,-p),M=c.getY(-g,-p),b=c.getX(0,-x-p),A=c.getY(0,-x-p),L=c.getX(g,-p),R=c.getY(g,-p),O=c.getX(0,x-p),D=c.getY(0,x-p),v.batchQuad(h,S,M,b,A,L,R,O,D,0,0,1,1,P,P,P,P,2)),h.showLeft&&(P=y.getTintAppendFloatAlpha(h.fillLeft,E),S=c.getX(-g,0),M=c.getY(-g,0),b=c.getX(0,x),A=c.getY(0,x),L=c.getX(0,x-p),R=c.getY(0,x-p),O=c.getX(-g,-p),D=c.getY(-g,-p),v.batchQuad(h,S,M,b,A,L,R,O,D,0,0,1,1,P,P,P,P,2)),h.showRight&&(P=y.getTintAppendFloatAlpha(h.fillRight,E),S=c.getX(g,0),M=c.getY(g,0),b=c.getX(0,x),A=c.getY(0,x),L=c.getX(0,x-p),R=c.getY(0,x-p),O=c.getX(g,-p),D=c.getY(g,-p),v.batchQuad(h,S,M,b,A,L,R,O,D,0,0,1,1,P,P,P,P,2)),l.pipelines.postBatch(h)}};a.exports=d},65159:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(93387),d=e(91461),l=new u({Extends:d,Mixins:[y],initialize:function(r,n,v,o,c,m,p,g,x){n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o=48),c===void 0&&(c=32),m===void 0&&(m=!1),p===void 0&&(p=15658734),g===void 0&&(g=10066329),x===void 0&&(x=13421772),d.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=m,this.isFilled=!0,this.setPosition(n,v),this.setSize(o,c),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,r,n){return h===void 0&&(h=!0),r===void 0&&(r=!0),n===void 0&&(n=!0),this.showTop=h,this.showLeft=r,this.showRight=n,this},setFillStyle:function(h,r,n){return this.fillTop=h,this.fillLeft=r,this.fillRight=n,this.isFilled=!0,this}});a.exports=l},9923:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(49584),d=function(l,h,r,n){r.addToRenderList(h);var v=l.currentContext;if(y(l,v,h,r,n)&&h.isFilled){var o=h.width,c=h.height,m=o/2,p=o/h.projection,g=h.isReversed;h.showTop&&g&&(u(v,h,h.fillTop),v.beginPath(),v.moveTo(-m,-c),v.lineTo(0,-p-c),v.lineTo(m,-c),v.lineTo(0,p-c),v.fill()),h.showLeft&&(u(v,h,h.fillLeft),v.beginPath(),g?(v.moveTo(-m,-c),v.lineTo(0,p),v.lineTo(0,p-c)):(v.moveTo(-m,0),v.lineTo(0,p),v.lineTo(0,p-c)),v.fill()),h.showRight&&(u(v,h,h.fillRight),v.beginPath(),g?(v.moveTo(m,-c),v.lineTo(0,p),v.lineTo(0,p-c)):(v.moveTo(m,0),v.lineTo(0,p),v.lineTo(0,p-c)),v.fill()),v.restore()}};a.exports=d},67765:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(65159);u.register("isotriangle",function(d,l,h,r,n,v,o,c){return this.displayList.add(new y(this.scene,d,l,h,r,n,v,o,c))})},93387:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(54946),d=e(9923),a.exports={renderWebGL:y,renderCanvas:d}},54946:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(75512),d=function(l,h,r,n){r.addToRenderList(h);var v=l.pipelines.set(h.pipeline),o=u(h,r,n),c=v.calcMatrix.copyFrom(o.calc),m=h.width,p=h.height,g=m/2,x=m/h.projection,E=h.isReversed,P=r.alpha*h.alpha;if(!!h.isFilled){l.pipelines.preBatch(h);var S,M,b,A,L,R,O;if(h.showTop&&E){S=y.getTintAppendFloatAlpha(h.fillTop,P),M=c.getX(-g,-p),b=c.getY(-g,-p),A=c.getX(0,-x-p),L=c.getY(0,-x-p),R=c.getX(g,-p),O=c.getY(g,-p);var D=c.getX(0,x-p),B=c.getY(0,x-p);v.batchQuad(h,M,b,A,L,R,O,D,B,0,0,1,1,S,S,S,S,2)}h.showLeft&&(S=y.getTintAppendFloatAlpha(h.fillLeft,P),E?(M=c.getX(-g,-p),b=c.getY(-g,-p),A=c.getX(0,x),L=c.getY(0,x),R=c.getX(0,x-p),O=c.getY(0,x-p)):(M=c.getX(-g,0),b=c.getY(-g,0),A=c.getX(0,x),L=c.getY(0,x),R=c.getX(0,x-p),O=c.getY(0,x-p)),v.batchTri(h,M,b,A,L,R,O,0,0,1,1,S,S,S,2)),h.showRight&&(S=y.getTintAppendFloatAlpha(h.fillRight,P),E?(M=c.getX(g,-p),b=c.getY(g,-p),A=c.getX(0,x),L=c.getY(0,x),R=c.getX(0,x-p),O=c.getY(0,x-p)):(M=c.getX(g,0),b=c.getY(g,0),A=c.getX(0,x),L=c.getY(0,x),R=c.getX(0,x-p),O=c.getY(0,x-p)),v.batchTri(h,M,b,A,L,R,O,0,0,1,1,S,S,S,2)),l.pipelines.postBatch(h)}};a.exports=d},579:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(91461),d=e(88829),l=e(52660),h=new u({Extends:y,Mixins:[l],initialize:function(n,v,o,c,m,p,g,x,E){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=128),g===void 0&&(g=0),y.call(this,n,"Line",new d(c,m,p,g));var P=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,o),this.setSize(P,S),x!==void 0&&this.setStrokeStyle(1,x,E),this.updateDisplayOrigin()},setLineWidth:function(r,n){return n===void 0&&(n=r),this._startWidth=r,this._endWidth=n,this.lineWidth=r,this},setTo:function(r,n,v,o){return this.geom.setTo(r,n,v,o),this}});a.exports=h},52044:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17876),y=e(49584),d=function(l,h,r,n){r.addToRenderList(h);var v=l.currentContext;if(y(l,v,h,r,n)){var o=h._displayOriginX,c=h._displayOriginY;h.isStroked&&(u(v,h),v.beginPath(),v.moveTo(h.geom.x1-o,h.geom.y1-c),v.lineTo(h.geom.x2-o,h.geom.y2-c),v.stroke()),v.restore()}};a.exports=d},85665:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(579);u.register("line",function(d,l,h,r,n,v,o,c){return this.displayList.add(new y(this.scene,d,l,h,r,n,v,o,c))})},52660:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(46952),d=e(52044),a.exports={renderWebGL:y,renderCanvas:d}},46952:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(75512),d=function(l,h,r,n){r.addToRenderList(h);var v=l.pipelines.set(h.pipeline),o=u(h,r,n);v.calcMatrix.copyFrom(o.calc);var c=h._displayOriginX,m=h._displayOriginY,p=r.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isStroked){var g=v.strokeTint,x=y.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*p);g.TL=x,g.TR=x,g.BL=x,g.BR=x;var E=h._startWidth,P=h._endWidth;v.batchLine(h.geom.x1-c,h.geom.y1-m,h.geom.x2-c,h.geom.y2-m,E,P,1,0,!1,o.sprite,o.camera)}l.pipelines.postBatch(h)};a.exports=d},91249:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70573),y=e(56694),d=e(11117),l=e(14045),h=e(8580),r=e(91461),n=e(18974),v=new y({Extends:r,Mixins:[u],initialize:function(c,m,p,g,x,E){m===void 0&&(m=0),p===void 0&&(p=0),r.call(this,c,"Polygon",new h(g));var P=l(this.geom);this.setPosition(m,p),this.setSize(P.width,P.height),x!==void 0&&this.setFillStyle(x,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(o){o===void 0&&(o=1);for(var c=0;c<o;c++)n(this.geom);return this.updateData()},setTo:function(o){this.geom.setTo(o);var c=l(this.geom);return this.setSize(c.width,c.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var o=[],c=this.geom.points,m=0;m<c.length;m++)o.push(c[m].x,c[m].y);return o.push(c[0].x,c[0].y),this.pathIndexes=d(o),this.pathData=o,this}});a.exports=v},40834:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=r._displayOriginX,m=r._displayOriginY,p=r.pathData,g=p.length-1,x=p[0]-c,E=p[1]-m;o.beginPath(),o.moveTo(x,E),r.closePath||(g-=2);for(var P=2;P<g;P+=2){var S=p[P]-c,M=p[P+1]-m;o.lineTo(S,M)}r.closePath&&o.closePath(),r.isFilled&&(u(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};a.exports=l},88203:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(91249);u.register("polygon",function(d,l,h,r,n){return this.displayList.add(new y(this.scene,d,l,h,r,n))})},70573:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(72841),d=e(40834),a.exports={renderWebGL:y,renderCanvas:d}},72841:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),y=e(73329),d=e(50262),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=y(r,n,v),m=o.calcMatrix.copyFrom(c.calc),p=r._displayOriginX,g=r._displayOriginY,x=n.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&u(o,m,r,x,p,g),r.isStroked&&d(o,r,x,p,g),h.pipelines.postBatch(r)};a.exports=l},517:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(74118),d=e(91461),l=e(37673),h=new u({Extends:d,Mixins:[l],initialize:function(n,v,o,c,m,p,g){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=128),m===void 0&&(m=128),d.call(this,n,"Rectangle",new y(0,0,c,m)),this.setPosition(v,o),this.setSize(c,m),p!==void 0&&this.setFillStyle(p,g),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,n){this.width=r,this.height=n,this.geom.setSize(r,n),this.updateData(),this.updateDisplayOrigin();var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=r,v.hitArea.height=n),this},updateData:function(){var r=[],n=this.geom,v=this._tempLine;return n.getLineA(v),r.push(v.x1,v.y1,v.x2,v.y2),n.getLineB(v),r.push(v.x2,v.y2),n.getLineC(v),r.push(v.x2,v.y2),n.getLineD(v),r.push(v.x2,v.y2),this.pathData=r,this}});a.exports=h},4091:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=r._displayOriginX,m=r._displayOriginY;r.isFilled&&(u(o,r),o.fillRect(-c,-m,r.width,r.height)),r.isStroked&&(y(o,r),o.beginPath(),o.rect(-c,-m,r.width,r.height),o.stroke()),o.restore()}};a.exports=l},94355:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(517);u.register("rectangle",function(d,l,h,r,n,v){return this.displayList.add(new y(this.scene,d,l,h,r,n,v))})},37673:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(43532),d=e(4091),a.exports={renderWebGL:y,renderCanvas:d}},43532:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(50262),d=e(75512),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=u(r,n,v);o.calcMatrix.copyFrom(c.calc);var m=r._displayOriginX,p=r._displayOriginY,g=n.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var x=o.fillTint,E=d.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*g);x.TL=E,x.TR=E,x.BL=E,x.BR=E,o.batchFillRect(-m,-p,r.width,r.height)}r.isStroked&&y(o,r,g,m,p),h.pipelines.postBatch(r)};a.exports=l},77843:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(87956),y=e(56694),d=e(11117),l=e(91461),h=new y({Extends:l,Mixins:[u],initialize:function(n,v,o,c,m,p,g,x){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=5),m===void 0&&(m=32),p===void 0&&(p=64),l.call(this,n,"Star",null),this._points=c,this._innerRadius=m,this._outerRadius=p,this.setPosition(v,o),this.setSize(p*2,p*2),g!==void 0&&this.setFillStyle(g,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],n=this._points,v=this._innerRadius,o=this._outerRadius,c=Math.PI/2*3,m=Math.PI/n,p=o,g=o;r.push(p,g+-o);for(var x=0;x<n;x++)r.push(p+Math.cos(c)*o,g+Math.sin(c)*o),c+=m,r.push(p+Math.cos(c)*v,g+Math.sin(c)*v),c+=m;return r.push(p,g+-o),this.pathIndexes=d(r),this.pathData=r,this}});a.exports=h},11401:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=r._displayOriginX,m=r._displayOriginY,p=r.pathData,g=p.length-1,x=p[0]-c,E=p[1]-m;o.beginPath(),o.moveTo(x,E),r.closePath||(g-=2);for(var P=2;P<g;P+=2){var S=p[P]-c,M=p[P+1]-m;o.lineTo(S,M)}o.closePath(),r.isFilled&&(u(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};a.exports=l},23962:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(77843),y=e(61286);y.register("star",function(d,l,h,r,n,v,o){return this.displayList.add(new u(this.scene,d,l,h,r,n,v,o))})},87956:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(12037),d=e(11401),a.exports={renderWebGL:y,renderCanvas:d}},12037:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),y=e(73329),d=e(50262),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=y(r,n,v),m=o.calcMatrix.copyFrom(c.calc),p=r._displayOriginX,g=r._displayOriginY,x=n.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&u(o,m,r,x,p,g),r.isStroked&&d(o,r,x,p,g),h.pipelines.postBatch(r)};a.exports=l},21873:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(91461),d=e(66349),l=e(70498),h=new u({Extends:y,Mixins:[l],initialize:function(n,v,o,c,m,p,g,x,E,P,S){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=128),p===void 0&&(p=64),g===void 0&&(g=0),x===void 0&&(x=128),E===void 0&&(E=128),y.call(this,n,"Triangle",new d(c,m,p,g,x,E));var M=this.geom.right-this.geom.left,b=this.geom.bottom-this.geom.top;this.setPosition(v,o),this.setSize(M,b),P!==void 0&&this.setFillStyle(P,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,n,v,o,c,m){return this.geom.setTo(r,n,v,o,c,m),this.updateData()},updateData:function(){var r=[],n=this.geom,v=this._tempLine;return n.getLineA(v),r.push(v.x1,v.y1,v.x2,v.y2),n.getLineB(v),r.push(v.x2,v.y2),n.getLineC(v),r.push(v.x2,v.y2),this.pathData=r,this}});a.exports=h},60213:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),y=e(17876),d=e(49584),l=function(h,r,n,v){n.addToRenderList(r);var o=h.currentContext;if(d(h,o,r,n,v)){var c=r._displayOriginX,m=r._displayOriginY,p=r.geom.x1-c,g=r.geom.y1-m,x=r.geom.x2-c,E=r.geom.y2-m,P=r.geom.x3-c,S=r.geom.y3-m;o.beginPath(),o.moveTo(p,g),o.lineTo(x,E),o.lineTo(P,S),o.closePath(),r.isFilled&&(u(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};a.exports=l},79296:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(21873);u.register("triangle",function(d,l,h,r,n,v,o,c,m,p){return this.displayList.add(new y(this.scene,d,l,h,r,n,v,o,c,m,p))})},70498:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(72291),d=e(60213),a.exports={renderWebGL:y,renderCanvas:d}},72291:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=e(50262),d=e(75512),l=function(h,r,n,v){n.addToRenderList(r);var o=h.pipelines.set(r.pipeline),c=u(r,n,v);o.calcMatrix.copyFrom(c.calc);var m=r._displayOriginX,p=r._displayOriginY,g=n.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var x=o.fillTint,E=d.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*g);x.TL=E,x.TR=E,x.BL=E,x.BR=E;var P=r.geom.x1-m,S=r.geom.y1-p,M=r.geom.x2-m,b=r.geom.y2-p,A=r.geom.x3-m,L=r.geom.y3-p;o.batchFillTriangle(P,S,M,b,A,L,c.sprite,c.camera)}r.isStroked&&y(o,r,g,m,p),h.pipelines.postBatch(r)};a.exports=l},13747:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),y=e(56694),d=e(64937),l=e(89980),h=e(20791),r=new y({Extends:l,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,h],initialize:function(v,o,c,m,p){l.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(m,p),this.setPosition(o,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,v){this.anims.update(n,v)},play:function(n,v){return this.anims.play(n,v)},playReverse:function(n,v){return this.anims.playReverse(n,v)},playAfterDelay:function(n,v){return this.anims.playAfterDelay(n,v)},playAfterRepeat:function(n,v){return this.anims.playAfterRepeat(n,v)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return d.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});a.exports=r},27573:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y.addToRenderList(u),e.batchSprite(u,u.frame,y,d)};a.exports=T},89219:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(32291),d=e(99325),l=e(20494),h=e(13747);d.register("sprite",function(r,n){r===void 0&&(r={});var v=l(r,"key",null),o=l(r,"frame",null),c=new h(this.scene,0,0,v,o);return n!==void 0&&(r.add=n),u(this.scene,c,r),y(c,r),c})},66135:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(13747);u.register("sprite",function(d,l,h,r){return this.displayList.add(new y(this.scene,d,l,h,r))})},20791:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(21034),d=e(27573),a.exports={renderWebGL:y,renderCanvas:d}},21034:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y.addToRenderList(u),u.pipeline.batchSprite(u,y,d)};a.exports=T},32979:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=e.canvas,l=e.context,h=e.style,r=[],n=0,v=y.length;h.maxLines>0&&h.maxLines<y.length&&(v=h.maxLines),h.syncFont(d,l);for(var o=0;o<v;o++){var c=h.strokeThickness;c+=l.measureText(y[o]).width,h.wordWrap&&(c-=l.measureText(" ").width),r[o]=Math.ceil(c),n=Math.max(n,r[o])}var m=u.fontSize+h.strokeThickness,p=m*v,g=e.lineSpacing;return v>1&&(p+=g*(v-1)),{width:n,height:p,lines:v,lineWidths:r,lineSpacing:g,lineHeight:m}};a.exports=T},27030:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y=function(d){var l=u.create(this),h=l.getContext("2d",{willReadFrequently:!0});d.syncFont(l,h);var r=h.measureText(d.testString);if("actualBoundingBoxAscent"in r){var n=r.actualBoundingBoxAscent,v=r.actualBoundingBoxDescent;return u.remove(l),{ascent:n,descent:v,fontSize:n+v}}var o=Math.ceil(r.width*d.baselineX),c=o,m=2*c;c=c*d.baselineY|0,l.width=o,l.height=m,h.fillStyle="#f00",h.fillRect(0,0,o,m),h.font=d._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(d.testString,0,c);var p={ascent:0,descent:0,fontSize:0},g=h.getImageData(0,0,o,m);if(!g)return p.ascent=c,p.descent=c+6,p.fontSize=p.ascent+p.descent,u.remove(l),p;var x=g.data,E=x.length,P=o*4,S,M,b=0,A=!1;for(S=0;S<c;S++){for(M=0;M<P;M+=4)if(x[b+M]!==255){A=!0;break}if(!A)b+=P;else break}for(p.ascent=c-S,b=E-P,A=!1,S=m;S>c;S--){for(M=0;M<P;M+=4)if(x[b+M]!==255){A=!0;break}if(!A)b-=P;else break}return p.descent=S-c,p.fontSize=p.ascent+p.descent,u.remove(l),p};a.exports=y},76555:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99584),y=e(61068),d=e(56694),l=e(64937),h=e(89980),r=e(32979),n=e(10850),v=e(55638),o=e(80032),c=e(74744),m=new d({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,o],initialize:function(g,x,E,P,S){x===void 0&&(x=0),E===void 0&&(E=0),h.call(this,g,"Text"),this.renderer=g.sys.renderer,this.setPosition(x,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=y.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new c(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=g.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(P),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",u(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(p){var g=this.style;if(g.wordWrapCallback){var x=g.wordWrapCallback.call(g.wordWrapCallbackScope,p,this);return Array.isArray(x)&&(x=x.join(`
`)),x}else return g.wordWrapWidth?g.wordWrapUseAdvanced?this.advancedWordWrap(p,this.context,this.style.wordWrapWidth):this.basicWordWrap(p,this.context,this.style.wordWrapWidth):p},advancedWordWrap:function(p,g,x){for(var E="",P=p.replace(/ +/gi," ").split(this.splitRegExp),S=P.length,M=0;M<S;M++){var b=P[M],A="";b=b.replace(/^ *|\s*$/gi,"");var L=g.measureText(b).width;if(L<x){E+=b+`
`;continue}for(var R=x,O=b.split(" "),D=0;D<O.length;D++){var B=O[D],G=B+" ",z=g.measureText(G).width;if(z>R){if(D===0){for(var X=G;X.length&&(X=X.slice(0,-1),z=g.measureText(X).width,!(z<=R)););if(!X.length)throw new Error("wordWrapWidth < a single character");var U=B.substr(X.length);O[D]=U,A+=X}var V=O[D].length?D:D+1,N=O.slice(V).join(" ").replace(/[ \n]*$/gi,"");P.splice(M+1,0,N),S=P.length;break}else A+=G,R-=z}E+=A.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(p,g,x){for(var E="",P=p.split(this.splitRegExp),S=P.length-1,M=g.measureText(" ").width,b=0;b<=S;b++){for(var A=x,L=P[b].split(" "),R=L.length-1,O=0;O<=R;O++){var D=L[O],B=g.measureText(D).width,G=B;O<R&&(G+=M),G>A&&O>0&&(E+=`
`,A=x),E+=D,O<R?(E+=" ",A-=G):A-=B}b<S&&(E+=`
`)}return E},getWrappedText:function(p){p===void 0&&(p=this._text),this.style.syncFont(this.canvas,this.context);var g=this.runWordWrap(p);return g.split(this.splitRegExp)},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this._text&&(this._text=p.toString(),this.updateText()),this},appendText:function(p,g){g===void 0&&(g=!0),!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p=p.toString();var x=this._text.concat(g?`
`+p:p);return x!==this._text&&(this._text=x,this.updateText()),this},setStyle:function(p){return this.style.setStyle(p)},setFont:function(p){return this.style.setFont(p)},setFontFamily:function(p){return this.style.setFontFamily(p)},setFontSize:function(p){return this.style.setFontSize(p)},setFontStyle:function(p){return this.style.setFontStyle(p)},setFixedSize:function(p,g){return this.style.setFixedSize(p,g)},setBackgroundColor:function(p){return this.style.setBackgroundColor(p)},setFill:function(p){return this.style.setFill(p)},setColor:function(p){return this.style.setColor(p)},setStroke:function(p,g){return this.style.setStroke(p,g)},setShadow:function(p,g,x,E,P,S){return this.style.setShadow(p,g,x,E,P,S)},setShadowOffset:function(p,g){return this.style.setShadowOffset(p,g)},setShadowColor:function(p){return this.style.setShadowColor(p)},setShadowBlur:function(p){return this.style.setShadowBlur(p)},setShadowStroke:function(p){return this.style.setShadowStroke(p)},setShadowFill:function(p){return this.style.setShadowFill(p)},setWordWrapWidth:function(p,g){return this.style.setWordWrapWidth(p,g)},setWordWrapCallback:function(p,g){return this.style.setWordWrapCallback(p,g)},setAlign:function(p){return this.style.setAlign(p)},setResolution:function(p){return this.style.setResolution(p)},setLineSpacing:function(p){return this.lineSpacing=p,this.updateText()},setPadding:function(p,g,x,E){if(typeof p=="object"){var P=p,S=n(P,"x",null);S!==null?(p=S,x=S):(p=n(P,"left",0),x=n(P,"right",p));var M=n(P,"y",null);M!==null?(g=M,E=M):(g=n(P,"top",0),E=n(P,"bottom",g))}else p===void 0&&(p=0),g===void 0&&(g=p),x===void 0&&(x=p),E===void 0&&(E=g);return this.padding.left=p,this.padding.top=g,this.padding.right=x,this.padding.bottom=E,this.updateText()},setMaxLines:function(p){return this.style.setMaxLines(p)},updateText:function(){var p=this.canvas,g=this.context,x=this.style,E=x.resolution,P=x.metrics;x.syncFont(p,g);var S=this._text;(x.wordWrapWidth||x.wordWrapCallback)&&(S=this.runWordWrap(this._text));var M=S.split(this.splitRegExp),b=r(this,P,M),A=this.padding,L;x.fixedWidth===0?(this.width=b.width+A.left+A.right,L=b.width):(this.width=x.fixedWidth,L=this.width-A.left-A.right,L<b.width&&(L=b.width)),x.fixedHeight===0?this.height=b.height+A.top+A.bottom:this.height=x.fixedHeight;var R=this.width,O=this.height;this.updateDisplayOrigin(),R*=E,O*=E,R=Math.max(R,1),O=Math.max(O,1),p.width!==R||p.height!==O?(p.width=R,p.height=O,this.frame.setSize(R,O),x.syncFont(p,g),x.rtl&&(g.direction="rtl")):g.clearRect(0,0,R,O),g.save(),g.scale(E,E),x.backgroundColor&&(g.fillStyle=x.backgroundColor,g.fillRect(0,0,R,O)),x.syncStyle(p,g),g.translate(A.left,A.top);for(var D,B,G=0;G<b.lines;G++){if(D=x.strokeThickness/2,B=x.strokeThickness/2+G*b.lineHeight+P.ascent,G>0&&(B+=b.lineSpacing*G),x.rtl)D=R-D-A.left-A.right;else if(x.align==="right")D+=L-b.lineWidths[G];else if(x.align==="center")D+=(L-b.lineWidths[G])/2;else if(x.align==="justify"){var z=.85;if(b.lineWidths[G]/b.width>=z){var X=b.width-b.lineWidths[G],U=g.measureText(" ").width,V=M[G].trim(),N=V.split(" ");X+=(M[G].length-V.length)*U;for(var W=Math.floor(X/U),F=0;W>0;)N[F]+=" ",F=(F+1)%(N.length-1||1),--W;M[G]=N.join(" ")}}this.autoRound&&(D=Math.round(D),B=Math.round(B)),x.strokeThickness&&(x.syncShadow(g,x.shadowStroke),g.strokeText(M[G],D,B)),x.color&&(x.syncShadow(g,x.shadowFill),g.fillText(M[G],D,B))}g.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(p,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var I=this.input;return I&&!I.customHitArea&&(I.hitArea.width=this.width,I.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(p){this.setText(p)}},toJSON:function(){var p=l.ToJSON(this),g={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return p.data=g,p},preDestroy:function(){this.style.rtl&&v(this.canvas),y.remove(this.canvas),this.texture.destroy()}});a.exports=m},71649:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u.width===0||u.height===0||(y.addToRenderList(u),e.batchSprite(u,u.frame,y,d))};a.exports=T},75397:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(76555);y.register("text",function(h,r){h===void 0&&(h={});var n=d(h,"text",""),v=d(h,"style",null),o=d(h,"padding",null);o!==null&&(v.padding=o);var c=new l(this.scene,0,0,n,v);return r!==void 0&&(h.add=r),u(this.scene,c,h),c.autoRound=d(h,"autoRound",!0),c.resolution=d(h,"resolution",1),c})},94627:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(76555),y=e(61286);y.register("text",function(d,l,h,r){return this.displayList.add(new u(this.scene,d,l,h,r))})},80032:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(76128),d=e(71649),a.exports={renderWebGL:y,renderCanvas:d}},74744:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(20494),d=e(10850),l=e(27030),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new u({initialize:function(v,o){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(o,!1,!0)},setStyle:function(n,v,o){v===void 0&&(v=!0),o===void 0&&(o=!1),n&&n.hasOwnProperty("fontSize")&&typeof n.fontSize=="number"&&(n.fontSize=n.fontSize.toString()+"px");for(var c in h){var m=o?h[c][1]:this[c];c==="wordWrapCallback"||c==="wordWrapCallbackScope"?this[c]=d(n,h[c][0],m):this[c]=y(n,h[c][0],m)}var p=d(n,"font",null);p!==null&&this.setFont(p,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var g=d(n,"fill",null);g!==null&&(this.color=g);var x=d(n,"metrics",!1);return x?this.metrics={ascent:d(x,"ascent",0),descent:d(x,"descent",0),fontSize:d(x,"fontSize",0)}:(v||!this.metrics)&&(this.metrics=l(this)),v?this.parent.updateText():this.parent},syncFont:function(n,v){v.font=this._font},syncStyle:function(n,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(n,v){v?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(n,v){v===void 0&&(v=!0);var o=n,c="",m="";if(typeof n!="string")o=d(n,"fontFamily","Courier"),c=d(n,"fontSize","16px"),m=d(n,"fontStyle","");else{var p=n.split(" "),g=0;m=p.length>2?p[g++]:"",c=p[g++]||"16px",o=p[g++]||"Courier"}return(o!==this.fontFamily||c!==this.fontSize||m!==this.fontStyle)&&(this.fontFamily=o,this.fontSize=c,this.fontStyle=m,v&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,v){return this.fixedWidth=n,this.fixedHeight=v,n&&(this.parent.width=n),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,v){return v===void 0&&(v=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==n||this.strokeThickness!==v)&&(this.stroke=n,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(n,v,o,c,m,p){return n===void 0&&(n=0),v===void 0&&(v=0),o===void 0&&(o="#000"),c===void 0&&(c=0),m===void 0&&(m=!1),p===void 0&&(p=!0),this.shadowOffsetX=n,this.shadowOffsetY=v,this.shadowColor=o,this.shadowBlur=c,this.shadowStroke=m,this.shadowFill=p,this.update(!1)},setShadowOffset:function(n,v){return n===void 0&&(n=0),v===void 0&&(v=n),this.shadowOffsetX=n,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,v){return v===void 0&&(v=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(n,v){return v===void 0&&(v=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var v in h)n[v]=this[v];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});a.exports=r},76128:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),y=function(d,l,h,r){if(!(l.width===0||l.height===0)){h.addToRenderList(l);var n=l.frame,v=n.width,o=n.height,c=u.getTintAppendFloatAlpha,m=d.pipelines.set(l.pipeline,l),p=m.setTexture2D(n.glTexture,l);m.batchTexture(l,n.glTexture,v,o,l.x,l.y,v/l.style.resolution,o/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,v,o,c(l.tintTopLeft,h.alpha*l._alphaTL),c(l.tintTopRight,h.alpha*l._alphaTR),c(l.tintBottomLeft,h.alpha*l._alphaBL),c(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,0,0,h,r,!1,p)}};a.exports=y},35856:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y=e(56694),d=e(64937),l=e(89980),h=e(3504),r=e(8213),n=e(9271),v=e(93736),o=8,c=new y({Extends:l,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,n],initialize:function(p,g,x,E,P,S,M){var b=p.sys.renderer;l.call(this,p,"TileSprite");var A=p.sys.textures.get(S),L=A.get(M);L.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),A=p.sys.textures.get("__MISSING"),L=A.get()),A.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),A=p.sys.textures.get("__MISSING"),L=A.get()),!E||!P?(E=L.width,P=L.height):(E=Math.floor(E),P=Math.floor(P)),this._tilePosition=new v,this._tileScale=new v(1,1),this.dirty=!1,this.renderer=b,this.canvas=u.create(this,E,P),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=A,this.displayFrame=L,this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(L.width),this.potHeight=h(L.height),this.fillCanvas=u.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(g,x),this.setSize(E,P),this.setFrame(M),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(m,p){return this.displayTexture=this.scene.sys.textures.get(m),this.setFrame(p)},setFrame:function(m){var p=this.displayTexture.get(m);return this.potWidth=h(p.width),this.potHeight=h(p.height),this.canvas.width=0,!p.cutWidth||!p.cutHeight?this.renderFlags&=~o:this.renderFlags|=o,this.displayFrame=p,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(m,p){return m!==void 0&&(this.tilePositionX=m),p!==void 0&&(this.tilePositionY=p),this},setTileScale:function(m,p){return m===void 0&&(m=this.tileScaleX),p===void 0&&(p=m),this.tileScaleX=m,this.tileScaleY=p,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var m=this.displayFrame;if(m.source.isRenderTexture||m.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var p=this.fillContext,g=this.fillCanvas,x=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(x=m.cutWidth,E=m.cutHeight),p.clearRect(0,0,x,E),g.width=x,g.height=E,p.drawImage(m.source.image,m.cutX,m.cutY,m.cutWidth,m.cutHeight,0,0,x,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(g,this.fillPattern):this.fillPattern=p.createPattern(g,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var m=this.canvas;if((m.width!==this.width||m.height!==this.height)&&(m.width=this.width,m.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var p=this.context;this.scene.sys.game.config.antialias||r.disable(p);var g=this._tileScale.x,x=this._tileScale.y,E=this._tilePosition.x,P=this._tilePosition.y;p.clearRect(0,0,this.width,this.height),p.save(),p.scale(g,x),p.translate(-E,-P),p.fillStyle=this.fillPattern,p.fillRect(E,P,this.width/g,this.height/x),p.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),u.remove(this.canvas),u.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(m){this._tilePosition.x=m,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(m){this._tilePosition.y=m,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(m){this._tileScale.x=m,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(m){this._tileScale.y=m,this.dirty=!0}}});a.exports=c},93305:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u.updateCanvas(),y.addToRenderList(u),e.batchSprite(u,u.frame,y,d)};a.exports=T},63950:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(35856);y.register("tileSprite",function(h,r){h===void 0&&(h={});var n=d(h,"x",0),v=d(h,"y",0),o=d(h,"width",512),c=d(h,"height",512),m=d(h,"key",""),p=d(h,"frame",""),g=new l(this.scene,n,v,o,c,m,p);return r!==void 0&&(h.add=r),u(this.scene,g,h),g})},20509:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(35856),y=e(61286);y.register("tileSprite",function(d,l,h,r,n,v){return this.displayList.add(new u(this.scene,d,l,h,r,n,v))})},9271:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(74287),d=e(93305),a.exports={renderWebGL:y,renderCanvas:d}},74287:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),y=function(d,l,h,r){l.updateCanvas();var n=l.width,v=l.height;if(!(n===0||v===0)){h.addToRenderList(l);var o=u.getTintAppendFloatAlpha,c=d.pipelines.set(l.pipeline,l),m=c.setTexture2D(l.fillPattern,l);c.batchTexture(l,l.fillPattern,l.displayFrame.width*l.tileScaleX,l.displayFrame.height*l.tileScaleY,l.x,l.y,n,v,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.originX*n,l.originY*v,0,0,n,v,o(l.tintTopLeft,h.alpha*l._alphaTL),o(l.tintTopRight,h.alpha*l._alphaTR),o(l.tintBottomLeft,h.alpha*l._alphaBL),o(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,l.tilePositionX%l.displayFrame.width/l.displayFrame.width,l.tilePositionY%l.displayFrame.height/l.displayFrame.height,h,r,!1,m)}};a.exports=y},8630:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(82897),d=e(64937),l=e(56631),h=e(97081),r=e(33963),n=e(89980),v=e(76038),o=e(76583),c=e(77974),m=e(83392),p=new u({Extends:n,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,c],initialize:function(x,E,P,S){n.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=o(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),load:this.loadHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=m.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(E,P),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),S&&this.changeSource(S,!1);var M=x.sys.game.events;M.on(h.PAUSE,this.globalPause,this),M.on(h.RESUME,this.globalResume,this);var b=x.sys.sound;b&&b.on(v.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(g,x,E){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var P=this.video;if(!P)return console.warn("Video not loaded"),this;g===void 0&&(g=P.loop);var S=this.scene.sys.sound;return S&&S.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(E)&&E>x&&(this._markerOut=E),P.loop=g,this.createPlayPromise()},createPlayPromise:function(){var g=this.video,x=this._callbacks;this.isPlaying();var E=g.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(g.addEventListener("playing",x.play),g.readyState<2&&(this.retry=this.retryLimit,this._retryID&&window.clearTimeout(this._retryID),this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),g.addEventListener("error",x.error),g.addEventListener("abort",x.error),g.addEventListener("stalled",x.error),g.addEventListener("suspend",x.error),g.addEventListener("waiting",x.error),g.addEventListener("ended",x.end),g.addEventListener("timeupdate",x.time),g.addEventListener("seeking",x.seeking),g.addEventListener("seeked",x.seeked),g.addEventListener("play",this.playHandler2.bind(this)),g.addEventListener("pause",this.pauseHandler.bind(this)),this},playHandler2:function(g){console.log("play",this._cacheKey)},pauseHandler:function(g){console.log("paused",this._cacheKey)},changeSource:function(g,x,E,P,S){x===void 0&&(x=!0);var M=this.video;M&&this.stop();var b=this.scene.sys.cache.video.get(g);return b?(this.video=b,this._cacheKey=g,this._codePaused=b.paused,this._codeMuted=b.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,b,b.videoWidth,b.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,b.videoWidth,b.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(l.VIDEO_CREATED,this,b.videoWidth,b.videoHeight)):this.updateTexture(),b.currentTime=0,this._lastUpdate=0,x&&this.play(E,P,S)):this.video=null,this},addMarker:function(g,x,E){return!isNaN(x)&&x>=0&&!isNaN(E)&&(this.markers[g]=[x,E]),this},playMarker:function(g,x){var E=this.markers[g];return E&&this.play(x,E[0],E[1]),this},removeMarker:function(g){return delete this.markers[g],this},snapshot:function(g,x){return g===void 0&&(g=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,g,x)},snapshotArea:function(g,x,E,P,S,M){g===void 0&&(g=0),x===void 0&&(x=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),S===void 0&&(S=E),M===void 0&&(M=P);var b=this.video,A=this.snapshotTexture;return A?(A.setSize(S,M),b&&A.context.drawImage(b,g,x,E,P,0,0,S,M)):(A=this.scene.sys.textures.createCanvas(o(),S,M),this.snapshotTexture=A,b&&A.context.drawImage(b,g,x,E,P,0,0,S,M)),A.update()},saveSnapshotTexture:function(g){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,g):this.snapshotTexture=this.scene.sys.textures.createCanvas(g,this.width,this.height),this.snapshotTexture},loadURL:function(g,x,E,P){x===void 0&&(x="loadeddata"),E===void 0&&(E=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var S=document.createElement("video");return S.controls=!1,E&&(S.muted=!0,S.defaultMuted=!0,S.setAttribute("autoplay","autoplay")),S.setAttribute("playsinline","playsinline"),S.setAttribute("preload","auto"),P!==void 0&&S.setAttribute("crossorigin",P),S.addEventListener("error",this._callbacks.error),S.addEventListener(x,this._callbacks.load),S.src=g,S.load(),this.video=S,this},loadMediaStream:function(g,x,E){x===void 0&&(x="loadeddata"),E===void 0&&(E=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var P=document.createElement("video");P.controls=!1,E&&(P.muted=!0,P.defaultMuted=!0,P.setAttribute("autoplay","autoplay")),P.setAttribute("playsinline","playsinline"),P.setAttribute("preload","auto"),P.addEventListener("error",this._callbacks.error,!0),P.addEventListener(x,this._callbacks.load,!0);try{P.srcObject=g}catch{P.src=window.URL.createObjectURL(g)}return P.load(),this.video=P,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(l.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(g){console.log("pp error handler",g),this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(l.VIDEO_ERROR,this,g)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(l.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadHandler:function(){this.updateTexture()},loadErrorHandler:function(g){this.stop(),this.emit(l.VIDEO_ERROR,this,g)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(l.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.createPlayPromise()},completeHandler:function(){console.log("ended"),this.emit(l.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(l.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var g=this.video;if(g){var x=g.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(g.loop?(g.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(l.VIDEO_LOOP,this)):(this.emit(l.VIDEO_COMPLETE,this),console.log("prEUp stop"),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(l.VIDEO_TIMEOUT,this))},updateTexture:function(){var g=this.video,x=g.videoWidth,E=g.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,g,x,E),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,E),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(l.VIDEO_CREATED,this,x,E);else{var P=this.videoTextureSource;P.source!==g&&(P.source=g,P.width=x,P.height=E),P.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(g){var x=this.video;if(x){var E=x.duration;if(E!==1/0&&!isNaN(E)){var P=E*g;this.setCurrentTime(P)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(g){var x=this.video;if(x){if(typeof g=="string"){var E=g[0],P=parseFloat(g.substr(1));E==="+"?g=x.currentTime+P:E==="-"&&(g=x.currentTime-P)}x.currentTime=g,this._lastUpdate=g}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(l.VIDEO_SEEKED,this);var g=this.video;g&&this.updateTexture()},getProgress:function(){var g=this.video;if(g){var x=g.currentTime,E=g.duration;if(E!==1/0&&!isNaN(E))return x/E}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(g){g===void 0&&(g=!0),this._codeMuted=g;var x=this.video;return x&&(x.muted=this._systemMuted?!0:g),this},isMuted:function(){return this._codeMuted},globalMute:function(g,x){this._systemMuted=x;var E=this.video;E&&(E.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.createPlayPromise()},setPaused:function(g){g===void 0&&(g=!0);var x=this.video;return this._codePaused=g,x&&(g?x.paused||x.pause():g||x.paused&&!this._systemPaused&&this.createPlayPromise()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(g){return g===void 0&&(g=1),this.video&&(this.video.volume=y(g,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(g){return this.video&&(this.video.playbackRate=g),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(g){return g===void 0&&(g=!0),this.video&&(this.video.loop=g),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(g,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,g),this._key=g,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var g=this.video;if(g){var x=this._callbacks;for(var E in x)g.removeEventListener(E,x[E]);g.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function(){var g=this.video;if(!!g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("autoplay"),g.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var g=this.scene.sys.game.events;g.off(h.PAUSE,this.globalPause,this),g.off(h.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(v.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});a.exports=p},56933:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u.videoTexture&&(y.addToRenderList(u),e.batchSprite(u,u.frame,y,d))};a.exports=T},65601:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),y=e(99325),d=e(20494),l=e(8630);y.register("video",function(h,r){h===void 0&&(h={});var n=d(h,"key",null),v=new l(this.scene,0,0,n);return r!==void 0&&(h.add=r),u(this.scene,v,h),v})},215:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8630),y=e(61286);y.register("video",function(d,l,h){return this.displayList.add(new u(this.scene,d,l,h))})},77974:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(83572),d=e(56933),a.exports={renderWebGL:y,renderCanvas:d}},83572:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u.videoTexture&&(y.addToRenderList(u),u.pipeline.batchSprite(u,y,d))};a.exports=T},71030:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y=e(26673),d=e(65650),l=e(56694),h=e(64937),r=e(89980),n=e(74118),v=e(94287),o=new l({Extends:r,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(m,p,g,x,E){x===void 0&&(x=1),E===void 0&&(E=x),r.call(this,m,"Zone"),this.setPosition(p,g),this.width=x,this.height=E,this.blendMode=u.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,m,p){p===void 0&&(p=!0),this.width=c,this.height=m,this.updateDisplayOrigin();var g=this.input;return p&&g&&!g.customHitArea&&(g.hitArea.width=c,g.hitArea.height=m),this},setDisplaySize:function(c,m){return this.displayWidth=c,this.displayHeight=m,this},setCircleDropZone:function(c){return this.setDropZone(new y(0,0,c),d)},setRectangleDropZone:function(c,m){return this.setDropZone(new n(0,0,c,m),v)},setDropZone:function(c,m){return this.input||this.setInteractive(c,m,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(c,m,p){p.addToRenderList(m)},renderWebGL:function(c,m,p){p.addToRenderList(m)}});a.exports=o},24067:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),y=e(20494),d=e(71030);u.register("zone",function(l){var h=y(l,"x",0),r=y(l,"y",0),n=y(l,"width",1),v=y(l,"height",n);return new d(this.scene,h,r,n,v)})},34546:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(71030),y=e(61286);y.register("zone",function(d,l,h,r){return this.displayList.add(new u(this.scene,d,l,h,r))})},95847:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};a.exports=T},26673:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(65650),d=e(94026),l=e(62941),h=e(52394),r=e(30977),n=new u({initialize:function(o,c,m){o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=0),this.type=h.CIRCLE,this.x=o,this.y=c,this._radius=m,this._diameter=m*2},contains:function(v,o){return y(this,v,o)},getPoint:function(v,o){return d(this,v,o)},getPoints:function(v,o,c){return l(this,v,o,c)},getRandomPoint:function(v){return r(this,v)},setTo:function(v,o,c){return this.x=v,this.y=o,this._radius=c,this._diameter=c*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,o){return o===void 0&&(o=v),this.x=v,this.y=o,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});a.exports=n},37964:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(Math.PI*e.radius)};a.exports=T},72233:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l,h){return h===void 0&&(h=new u),h.x=d.x+d.radius*Math.cos(l),h.y=d.y+d.radius*Math.sin(l),h};a.exports=y},61761:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),y=function(d){return new u(d.x,d.y,d.radius)};a.exports=y},65650:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(e.radius>0&&u>=e.left&&u<=e.right&&y>=e.top&&y<=e.bottom){var d=(e.x-u)*(e.x-u),l=(e.y-y)*(e.y-y);return d+l<=e.radius*e.radius}else return!1};a.exports=T},39187:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),y=function(d,l){return u(d,l.x,l.y)};a.exports=y},58672:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),y=function(d,l){return u(d,l.x,l.y)&&u(d,l.right,l.y)&&u(d,l.x,l.bottom)&&u(d,l.right,l.bottom)};a.exports=y},42997:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.setTo(e.x,e.y,e.radius)};a.exports=T},94894:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x===u.x&&e.y===u.y&&e.radius===u.radius};a.exports=T},48027:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d,l){return l===void 0&&(l=new u),l.x=d.left,l.y=d.top,l.width=d.diameter,l.height=d.diameter,l};a.exports=y},94026:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72233),y=e(91806),d=e(83392),l=e(79967),h=function(r,n,v){v===void 0&&(v=new l);var o=y(n,0,d.PI2);return u(r,o,v)};a.exports=h},62941:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(37964),y=e(72233),d=e(91806),l=e(83392),h=function(r,n,v,o){o===void 0&&(o=[]),!n&&v>0&&(n=u(r)/v);for(var c=0;c<n;c++){var m=d(c/n,0,l.PI2);o.push(y(r,m))}return o};a.exports=h},34585:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.x+=u,e.y+=y,e};a.exports=T},88665:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x+=u.x,e.y+=u.y,e};a.exports=T},30977:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){l===void 0&&(l=new u);var h=2*Math.PI*Math.random(),r=Math.random()+Math.random(),n=r>1?2-r:r,v=n*Math.cos(h),o=n*Math.sin(h);return l.x=d.x+v*d.radius,l.y=d.y+o*d.radius,l};a.exports=y},6112:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673);u.Area=e(95847),u.Circumference=e(37964),u.CircumferencePoint=e(72233),u.Clone=e(61761),u.Contains=e(65650),u.ContainsPoint=e(39187),u.ContainsRect=e(58672),u.CopyFrom=e(42997),u.Equals=e(94894),u.GetBounds=e(48027),u.GetPoint=e(94026),u.GetPoints=e(62941),u.Offset=e(34585),u.OffsetPoint=e(88665),u.Random=e(30977),a.exports=u},52394:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};a.exports=T},58605:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};a.exports=T},39507:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=e.width/2,y=e.height/2,d=Math.pow(u-y,2)/Math.pow(u+y,2);return Math.PI*(u+y)*(1+3*d/(10+Math.sqrt(4-3*d)))};a.exports=T},86998:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l,h){h===void 0&&(h=new u);var r=d.width/2,n=d.height/2;return h.x=d.x+r*Math.cos(l),h.y=d.y+n*Math.sin(l),h};a.exports=y},81773:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95669),y=function(d){return new u(d.x,d.y,d.width,d.height)};a.exports=y},72313:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(e.width<=0||e.height<=0)return!1;var d=(u-e.x)/e.width,l=(y-e.y)/e.height;return d*=d,l*=l,d+l<.25};a.exports=T},34368:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72313),y=function(d,l){return u(d,l.x,l.y)};a.exports=y},71431:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72313),y=function(d,l){return u(d,l.x,l.y)&&u(d,l.right,l.y)&&u(d,l.x,l.bottom)&&u(d,l.right,l.bottom)};a.exports=y},75459:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.setTo(e.x,e.y,e.width,e.height)};a.exports=T},95669:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72313),d=e(95340),l=e(54978),h=e(52394),r=e(72006),n=new u({initialize:function(o,c,m,p){o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=0),this.type=h.ELLIPSE,this.x=o,this.y=c,this.width=m,this.height=p},contains:function(v,o){return y(this,v,o)},getPoint:function(v,o){return d(this,v,o)},getPoints:function(v,o,c){return l(this,v,o,c)},getRandomPoint:function(v){return r(this,v)},setTo:function(v,o,c,m){return this.x=v,this.y=o,this.width=c,this.height=m,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,o){return o===void 0&&(o=v),this.x=v,this.y=o,this},setSize:function(v,o){return o===void 0&&(o=v),this.width=v,this.height=o,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});a.exports=n},98068:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x===u.x&&e.y===u.y&&e.width===u.width&&e.height===u.height};a.exports=T},72897:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d,l){return l===void 0&&(l=new u),l.x=d.left,l.y=d.top,l.width=d.width,l.height=d.height,l};a.exports=y},95340:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86998),y=e(91806),d=e(83392),l=e(79967),h=function(r,n,v){v===void 0&&(v=new l);var o=y(n,0,d.PI2);return u(r,o,v)};a.exports=h},54978:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(39507),y=e(86998),d=e(91806),l=e(83392),h=function(r,n,v,o){o===void 0&&(o=[]),!n&&v>0&&(n=u(r)/v);for(var c=0;c<n;c++){var m=d(c/n,0,l.PI2);o.push(y(r,m))}return o};a.exports=h},77951:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.x+=u,e.y+=y,e};a.exports=T},36233:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x+=u.x,e.y+=u.y,e};a.exports=T},72006:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){l===void 0&&(l=new u);var h=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return l.x=d.x+r*Math.cos(h)*d.width/2,l.y=d.y+r*Math.sin(h)*d.height/2,l};a.exports=y},40652:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95669);u.Area=e(58605),u.Circumference=e(39507),u.CircumferencePoint=e(86998),u.Clone=e(81773),u.Contains=e(72313),u.ContainsPoint=e(34368),u.ContainsRect=e(71431),u.CopyFrom=e(75459),u.Equals=e(98068),u.GetBounds=e(72897),u.GetPoint=e(95340),u.GetPoints=e(54978),u.Offset=e(77951),u.OffsetPoint=e(36233),u.Random=e(72006),a.exports=u},84068:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(52394),y=e(98611),d={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};d=y(!1,d,u),a.exports=d},22184:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53996),y=function(d,l){return u(d.x,d.y,l.x,l.y)<=d.radius+l.radius};a.exports=y},26535:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=u.width/2,d=u.height/2,l=Math.abs(e.x-u.x-y),h=Math.abs(e.y-u.y-d),r=y+e.radius,n=d+e.radius;if(l>r||h>n)return!1;if(l<=y||h<=d)return!0;var v=l-y,o=h-d,c=v*v,m=o*o,p=e.radius*e.radius;return c+m<=p};a.exports=T},71145:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(22184),d=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var n=l.x,v=l.y,o=l.radius,c=h.x,m=h.y,p=h.radius,g,x,E,P,S;if(v===m)S=(p*p-o*o-c*c+n*n)/(2*(n-c)),g=1,x=-2*m,E=c*c+S*S-2*c*S+m*m-p*p,P=x*x-4*g*E,P===0?r.push(new u(S,-x/(2*g))):P>0&&(r.push(new u(S,(-x+Math.sqrt(P))/(2*g))),r.push(new u(S,(-x-Math.sqrt(P))/(2*g))));else{var M=(n-c)/(v-m),b=(p*p-o*o-c*c+n*n-m*m+v*v)/(2*(v-m));g=M*M+1,x=2*v*M-2*b*M-2*n,E=n*n+v*v+b*b-o*o-2*v*b,P=x*x-4*g*E,P===0?(S=-x/(2*g),r.push(new u(S,b-S*M))):P>0&&(S=(-x+Math.sqrt(P))/(2*g),r.push(new u(S,b-S*M)),S=(-x-Math.sqrt(P))/(2*g),r.push(new u(S,b-S*M)))}}return r};a.exports=d},62508:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26111),y=e(26535),d=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var n=h.getLineA(),v=h.getLineB(),o=h.getLineC(),c=h.getLineD();u(n,l,r),u(v,l,r),u(o,l,r),u(c,l,r)}return r};a.exports=d},26111:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(61472),d=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var n=l.x1,v=l.y1,o=l.x2,c=l.y2,m=h.x,p=h.y,g=h.radius,x=o-n,E=c-v,P=n-m,S=v-p,M=x*x+E*E,b=2*(x*P+E*S),A=P*P+S*S-g*g,L=b*b-4*M*A,R,O;if(L===0){var D=-b/(2*M);R=n+D*x,O=v+D*E,D>=0&&D<=1&&r.push(new u(R,O))}else if(L>0){var B=(-b-Math.sqrt(L))/(2*M);R=n+B*x,O=v+B*E,B>=0&&B<=1&&r.push(new u(R,O));var G=(-b+Math.sqrt(L))/(2*M);R=n+G*x,O=v+G*E,G>=0&&G<=1&&r.push(new u(R,O))}}return r};a.exports=d},96537:(a,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70015),y=function(d,l,h,r){h===void 0&&(h=!1);var n=d.x1,v=d.y1,o=d.x2,c=d.y2,m=l.x1,p=l.y1,g=l.x2,x=l.y2,E=o-n,P=c-v,S=g-m,M=x-p,b=E*M-P*S;if(b===0)return null;var A,L,R;if(h){if(A=(E*(p-v)+P*(n-m))/(S*P-M*E),L=(m+S*A-n)/E,L<0||A<0||A>1)return null;R=L}else{if(A=((m-n)*M-(p-v)*S)/b,L=((v-p)*E-(n-m)*P)/b,A<0||A>1||L<0||L>1)return null;R=A}return r===void 0&&(r=new u),r.set(n+E*R,v+P*R,R)};a.exports=y},17647:(a,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(96537),y=e(88829),d=e(70015),l=new y,h=new d,r=function(n,v,o,c){o===void 0&&(o=!1),c===void 0&&(c=new d);var m=!1;c.set(),h.set();for(var p=v[0],g=1;g<v.length;g++){var x=v[g];l.setTo(p.x,p.y,x.x,x.y),p=x,u(n,l,o,h)&&(!m||h.z<c.z)&&(c.copy(h),m=!0)}return m?c:null};a.exports=r},68439:(a,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70015),y=e(51729),d=e(17647),l=new u,h=function(r,n,v,o){o===void 0&&(o=new y),Array.isArray(n)||(n=[n]);var c=!1;o.set(),l.set();for(var m=0;m<n.length;m++)d(r,n[m].points,v,l)&&(!c||l.z<o.z)&&(o.set(l.x,l.y,l.z,m),c=!0);return c?o:null};a.exports=h},9569:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(25227),d=e(47910),l=function(h,r,n){if(n===void 0&&(n=[]),d(h,r))for(var v=r.getLineA(),o=r.getLineB(),c=r.getLineC(),m=r.getLineD(),p=[new u,new u,new u,new u],g=[y(v,h,p[0]),y(o,h,p[1]),y(c,h,p[2]),y(m,h,p[3])],x=0;x<4;x++)g[x]&&n.push(p[x]);return n};a.exports=l},7449:(a,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(51729),y=e(68439),d=e(88829),l=new d;function h(v,o,c,m,p){var g=Math.cos(v),x=Math.sin(v);l.setTo(o,c,o+g,c+x);var E=y(l,m,!0);E&&p.push(new u(E.x,E.y,v,E.w))}function r(v,o){return v.z-o.z}var n=function(v,o,c){Array.isArray(c)||(c=[c]);for(var m=[],p=[],g=0;g<c.length;g++)for(var x=c[g].points,E=0;E<x.length;E++){var P=Math.atan2(x[E].y-o,x[E].x-v);p.indexOf(P)===-1&&(h(P,v,o,c,m),h(P-1e-5,v,o,c,m),h(P+1e-5,v,o,c,m),p.push(P))}return m.sort(r)};a.exports=n},82931:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=e(90205),d=function(l,h,r){return r===void 0&&(r=new u),y(l,h)&&(r.x=Math.max(l.x,h.x),r.y=Math.max(l.y,h.y),r.width=Math.min(l.right,h.right)-r.x,r.height=Math.min(l.bottom,h.bottom)-r.y),r};a.exports=d},1946:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(9569),y=e(90205),d=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var n=l.getLineA(),v=l.getLineB(),o=l.getLineC(),c=l.getLineD();u(n,h,r),u(v,h,r),u(o,h,r),u(c,h,r)}return r};a.exports=d},34211:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(20370),y=e(9569),d=function(l,h,r){if(r===void 0&&(r=[]),u(l,h)){var n=h.getLineA(),v=h.getLineB(),o=h.getLineC();y(n,l,r),y(v,l,r),y(o,l,r)}return r};a.exports=d},80511:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26111),y=e(48411),d=function(l,h,r){if(r===void 0&&(r=[]),y(l,h)){var n=l.getLineA(),v=l.getLineB(),o=l.getLineC();u(n,h,r),u(v,h,r),u(o,h,r)}return r};a.exports=d},31343:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(86117),d=e(25227),l=function(h,r,n){if(n===void 0&&(n=[]),y(h,r))for(var v=h.getLineA(),o=h.getLineB(),c=h.getLineC(),m=[new u,new u,new u],p=[d(v,r,m[0]),d(o,r,m[1]),d(c,r,m[2])],g=0;g<3;g++)p[g]&&n.push(m[g]);return n};a.exports=l},70534:(a,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23589),y=e(31343),d=function(l,h,r){if(r===void 0&&(r=[]),u(l,h)){var n=h.getLineA(),v=h.getLineB(),o=h.getLineC();y(l,n,r),y(l,v,r),y(l,o,r)}return r};a.exports=d},61472:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),y=e(79967),d=new y,l=function(h,r,n){if(n===void 0&&(n=d),u(r,h.x1,h.y1))return n.x=h.x1,n.y=h.y1,!0;if(u(r,h.x2,h.y2))return n.x=h.x2,n.y=h.y2,!0;var v=h.x2-h.x1,o=h.y2-h.y1,c=r.x-h.x1,m=r.y-h.y1,p=v*v+o*o,g=v,x=o;if(p>0){var E=(c*v+m*o)/p;g*=E,x*=E}n.x=h.x1+g,n.y=h.y1+x;var P=g*g+x*x;return P<=p&&g*v+x*o>=0&&u(r,n.x,n.y)};a.exports=l},25227:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=e.x1,l=e.y1,h=e.x2,r=e.y2,n=u.x1,v=u.y1,o=u.x2,c=u.y2;if(d===h&&l===r||n===o&&v===c)return!1;var m=(c-v)*(h-d)-(o-n)*(r-l);if(m===0)return!1;var p=((o-n)*(l-v)-(c-v)*(d-n))/m,g=((h-d)*(l-v)-(r-l)*(d-n))/m;return p<0||p>1||g<0||g>1?!1:(y&&(y.x=d+p*(h-d),y.y=l+p*(r-l)),!0)};a.exports=T},47910:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.x1,d=e.y1,l=e.x2,h=e.y2,r=u.x,n=u.y,v=u.right,o=u.bottom,c=0;if(y>=r&&y<=v&&d>=n&&d<=o||l>=r&&l<=v&&h>=n&&h<=o)return!0;if(y<r&&l>=r){if(c=d+(h-d)*(r-y)/(l-y),c>n&&c<=o)return!0}else if(y>v&&l<=v&&(c=d+(h-d)*(v-y)/(l-y),c>=n&&c<=o))return!0;if(d<n&&h>=n){if(c=y+(l-y)*(n-d)/(h-d),c>=r&&c<=v)return!0}else if(d>o&&h<=o&&(c=y+(l-y)*(o-d)/(h-d),c>=r&&c<=v))return!0;return!1};a.exports=T},34426:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){y===void 0&&(y=1);var d=u.x1,l=u.y1,h=u.x2,r=u.y2,n=e.x,v=e.y,o=(h-d)*(h-d)+(r-l)*(r-l);if(o===0)return!1;var c=((n-d)*(h-d)+(v-l)*(r-l))/o;if(c<0)return Math.sqrt((d-n)*(d-n)+(l-v)*(l-v))<=y;if(c>=0&&c<=1){var m=((l-v)*(h-d)-(d-n)*(r-l))/o;return Math.abs(m)*Math.sqrt(o)<=y}else return Math.sqrt((h-n)*(h-n)+(r-v)*(r-v))<=y};a.exports=T},81414:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(34426),y=function(d,l){if(!u(d,l))return!1;var h=Math.min(l.x1,l.x2),r=Math.max(l.x1,l.x2),n=Math.min(l.y1,l.y2),v=Math.max(l.y1,l.y2);return d.x>=h&&d.x<=r&&d.y>=n&&d.y<=v};a.exports=y},90205:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.width<=0||e.height<=0||u.width<=0||u.height<=0?!1:!(e.right<u.x||e.bottom<u.y||e.x>u.right||e.y>u.bottom)};a.exports=T},20370:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25227),y=e(94287),d=e(86875),l=e(87279),h=function(r,n){if(n.left>r.right||n.right<r.left||n.top>r.bottom||n.bottom<r.top)return!1;var v=n.getLineA(),o=n.getLineB(),c=n.getLineC();if(y(r,v.x1,v.y1)||y(r,v.x2,v.y2)||y(r,o.x1,o.y1)||y(r,o.x2,o.y2)||y(r,c.x1,c.y1)||y(r,c.x2,c.y2))return!0;var m=r.getLineA(),p=r.getLineB(),g=r.getLineC(),x=r.getLineD();if(u(v,m)||u(v,p)||u(v,g)||u(v,x)||u(o,m)||u(o,p)||u(o,g)||u(o,x)||u(c,m)||u(c,p)||u(c,g)||u(c,x))return!0;var E=l(r),P=d(n,E,!0);return P.length>0};a.exports=h},8786:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l,h){return h===void 0&&(h=0),!(u>e.right+h||y<e.left-h||d>e.bottom+h||l<e.top-h)};a.exports=T},48411:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61472),y=e(60689),d=function(l,h){return l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top?!1:!!(y(l,h.x,h.y)||u(l.getLineA(),h)||u(l.getLineB(),h)||u(l.getLineC(),h))};a.exports=d},86117:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25227),y=function(d,l){return!!(d.contains(l.x1,l.y1)||d.contains(l.x2,l.y2)||u(d.getLineA(),l)||u(d.getLineB(),l)||u(d.getLineC(),l))};a.exports=y},23589:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86875),y=e(18680),d=e(25227),l=function(h,r){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var n=h.getLineA(),v=h.getLineB(),o=h.getLineC(),c=r.getLineA(),m=r.getLineB(),p=r.getLineC();if(d(n,c)||d(n,m)||d(n,p)||d(v,c)||d(v,m)||d(v,p)||d(o,c)||d(o,m)||d(o,p))return!0;var g=y(h),x=u(r,g,!0);return x.length>0||(g=y(r),x=u(h,g,!0),x.length>0)};a.exports=l},7563:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};a.exports=T},58813:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){u===void 0&&(u=1),y===void 0&&(y=[]);var d=Math.round(e.x1),l=Math.round(e.y1),h=Math.round(e.x2),r=Math.round(e.y2),n=Math.abs(h-d),v=Math.abs(r-l),o=d<h?1:-1,c=l<r?1:-1,m=n-v;y.push({x:d,y:l});for(var p=1;!(d===h&&l===r);){var g=m<<1;g>-v&&(m-=v,d+=o),g<n&&(m+=n,l+=c),p%u===0&&y.push({x:d,y:l}),p++}return y};a.exports=T},88513:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=u-(e.x1+e.x2)/2,l=y-(e.y1+e.y2)/2;return e.x1+=d,e.y1+=l,e.x2+=d,e.y2+=l,e};a.exports=T},26718:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88829),y=function(d){return new u(d.x1,d.y1,d.x2,d.y2)};a.exports=y},88930:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.setTo(e.x1,e.y1,e.x2,e.y2)};a.exports=T},90656:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x1===u.x1&&e.y1===u.y1&&e.x2===u.x2&&e.y2===u.y2};a.exports=T},30897:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),y=function(d,l,h){h===void 0&&(h=l);var r=u(d),n=d.x2-d.x1,v=d.y2-d.y1;return l&&(d.x1=d.x1-n/r*l,d.y1=d.y1-v/r*l),h&&(d.x2=d.x2+n/r*h,d.y2=d.y2+v/r*h),d};a.exports=y},30684:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92951),y=e(21902),d=e(79967),l=function(h,r,n,v,o){v===void 0&&(v=0),o===void 0&&(o=[]);var c=[],m=h.x1,p=h.y1,g=h.x2-m,x=h.y2-p,E=y(r,o),P,S,M=n-1;for(P=0;P<M;P++)S=E(P/M),c.push(new d(m+g*S,p+x*S));if(S=E(1),c.push(new d(m+g*S,p+x*S)),v>0){var b=c[0],A=[b];for(P=1;P<c.length-1;P++){var L=c[P];u(b,L)>=v&&(A.push(L),b=L)}var R=c[c.length-1];return u(b,R)<v&&A.pop(),A.push(R),A}else return c};a.exports=l},20487:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){return l===void 0&&(l=new u),l.x=(d.x1+d.x2)/2,l.y=(d.y1+d.y2)/2,l};a.exports=y},11222:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l,h){h===void 0&&(h=new u);var r=d.x1,n=d.y1,v=d.x2,o=d.y2,c=(v-r)*(v-r)+(o-n)*(o-n);if(c===0)return h;var m=((l.x-r)*(v-r)+(l.y-n)*(o-n))/c;return h.x=r+m*(v-r),h.y=n+m*(o-n),h};a.exports=y},7377:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=e(50599),d=e(79967),l=function(h,r){r===void 0&&(r=new d);var n=y(h)-u.TAU;return r.x=Math.cos(n),r.y=Math.sin(n),r};a.exports=l},66464:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l,h){return h===void 0&&(h=new u),h.x=d.x1+(d.x2-d.x1)*l,h.y=d.y1+(d.y2-d.y1)*l,h};a.exports=y},8570:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),y=e(79967),d=function(l,h,r,n){n===void 0&&(n=[]),!h&&r>0&&(h=u(l)/r);for(var v=l.x1,o=l.y1,c=l.x2,m=l.y2,p=0;p<h;p++){var g=p/h,x=v+(c-v)*g,E=o+(m-o)*g;n.push(new y(x,E))}return n};a.exports=d},65269:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.x1,d=e.y1,l=e.x2,h=e.y2,r=(l-y)*(l-y)+(h-d)*(h-d);if(r===0)return!1;var n=((d-u.y)*(l-y)-(y-u.x)*(h-d))/r;return Math.abs(n)*Math.sqrt(r)};a.exports=T},82996:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.y1-e.y2)};a.exports=T},16028:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};a.exports=T},88829:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(66464),d=e(8570),l=e(52394),h=e(74077),r=e(93736),n=new u({initialize:function(o,c,m,p){o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=0),this.type=l.LINE,this.x1=o,this.y1=c,this.x2=m,this.y2=p},getPoint:function(v,o){return y(this,v,o)},getPoints:function(v,o,c){return d(this,v,o,c)},getRandomPoint:function(v){return h(this,v)},setTo:function(v,o,c,m){return v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=0),this.x1=v,this.y1=o,this.x2=c,this.y2=m,this},getPointA:function(v){return v===void 0&&(v=new r),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new r),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});a.exports=n},73273:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=e(1071),d=e(50599),l=function(h){var r=d(h)-u.TAU;return y(r,-Math.PI,Math.PI)};a.exports=l},96936:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=e(50599),d=function(l){return Math.cos(y(l)-u.TAU)};a.exports=d},43581:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=e(50599),d=function(l){return Math.sin(y(l)-u.TAU)};a.exports=d},13990:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.x1+=u,e.y1+=y,e.x2+=u,e.y2+=y,e};a.exports=T},1298:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};a.exports=T},74077:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){l===void 0&&(l=new u);var h=Math.random();return l.x=d.x1+h*(d.x2-d.x1),l.y=d.y1+h*(d.y2-d.y1),l};a.exports=y},30473:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50599),y=e(73273),d=function(l,h){return 2*y(h)-Math.PI-u(l)};a.exports=d},25968:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1809),y=function(d,l){var h=(d.x1+d.x2)/2,r=(d.y1+d.y2)/2;return u(d,h,r,l)};a.exports=y},24296:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1809),y=function(d,l,h){return u(d,l.x,l.y,h)};a.exports=y},1809:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=Math.cos(d),h=Math.sin(d),r=e.x1-u,n=e.y1-y;return e.x1=r*l-n*h+u,e.y1=r*h+n*l+y,r=e.x2-u,n=e.y2-y,e.x2=r*l-n*h+u,e.y2=r*h+n*l+y,e};a.exports=T},88171:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){return e.x1=u,e.y1=y,e.x2=u+Math.cos(d)*l,e.y2=y+Math.sin(d)*l,e};a.exports=T},82797:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};a.exports=T},41067:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.x1-e.x2)};a.exports=T},28482:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88829);u.Angle=e(50599),u.BresenhamPoints=e(58813),u.CenterOn=e(88513),u.Clone=e(26718),u.CopyFrom=e(88930),u.Equals=e(90656),u.Extend=e(30897),u.GetEasedPoints=e(30684),u.GetMidPoint=e(20487),u.GetNearestPoint=e(11222),u.GetNormal=e(7377),u.GetPoint=e(66464),u.GetPoints=e(8570),u.GetShortestDistance=e(65269),u.Height=e(82996),u.Length=e(16028),u.NormalAngle=e(73273),u.NormalX=e(96936),u.NormalY=e(43581),u.Offset=e(13990),u.PerpSlope=e(1298),u.Random=e(74077),u.ReflectAngle=e(30473),u.Rotate=e(25968),u.RotateAroundPoint=e(24296),u.RotateAroundXY=e(1809),u.SetToAngle=e(88171),u.Slope=e(82797),u.Width=e(41067),a.exports=u},18693:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(74118),d=e(93736);function l(r,n,v,o){var c=r-v,m=n-o,p=c*c+m*m;return Math.sqrt(p)}var h=new u({initialize:function(n,v,o){this.vertex1=n,this.vertex2=v,this.vertex3=o,this.bounds=new y,this._inCenter=new d},getInCenter:function(r){r===void 0&&(r=!0);var n=this.vertex1,v=this.vertex2,o=this.vertex3,c,m,p,g,x,E;r?(c=n.x,m=n.y,p=v.x,g=v.y,x=o.x,E=o.y):(c=n.vx,m=n.vy,p=v.vx,g=v.vy,x=o.vx,E=o.vy);var P=l(x,E,p,g),S=l(c,m,x,E),M=l(p,g,c,m),b=P+S+M;return this._inCenter.set((c*P+p*S+x*M)/b,(m*P+g*S+E*M)/b)},contains:function(r,n,v){var o=this.vertex1,c=this.vertex2,m=this.vertex3,p=o.vx,g=o.vy,x=c.vx,E=c.vy,P=m.vx,S=m.vy;if(v){var M=v.a,b=v.b,A=v.c,L=v.d,R=v.e,O=v.f;p=o.vx*M+o.vy*A+R,g=o.vx*b+o.vy*L+O,x=c.vx*M+c.vy*A+R,E=c.vx*b+c.vy*L+O,P=m.vx*M+m.vy*A+R,S=m.vx*b+m.vy*L+O}var D=P-p,B=S-g,G=x-p,z=E-g,X=r-p,U=n-g,V=D*D+B*B,N=D*G+B*z,W=D*X+B*U,F=G*G+z*z,I=G*X+z*U,k=V*F-N*N,Y=k===0?0:1/k,H=(F*W-N*I)*Y,K=(V*I-N*W)*Y;return H>=0&&K>=0&&H+K<1},isCounterClockwise:function(r){var n=this.vertex1,v=this.vertex2,o=this.vertex3,c=(v.vx-n.vx)*(o.vy-n.vy)-(v.vy-n.vy)*(o.vx-n.vx);return r<=0?c>=0:c<0},load:function(r,n,v,o,c){return v=this.vertex1.load(r,n,v,o,c),v=this.vertex2.load(r,n,v,o,c),v=this.vertex3.load(r,n,v,o,c),v},transformCoordinatesLocal:function(r,n,v,o){return this.vertex1.transformCoordinatesLocal(r,n,v,o),this.vertex2.transformCoordinatesLocal(r,n,v,o),this.vertex3.transformCoordinatesLocal(r,n,v,o),this},updateBounds:function(){var r=this.vertex1,n=this.vertex2,v=this.vertex3,o=this.bounds;return o.x=Math.min(r.vx,n.vx,v.vx),o.y=Math.min(r.vy,n.vy,v.vy),o.width=Math.max(r.vx,n.vx,v.vx)-o.x,o.height=Math.max(r.vy,n.vy,v.vy)-o.y,this},isInView:function(r,n,v,o,c,m,p,g,x,E,P){this.update(o,c,m,p,g,x,E,P);var S=this.vertex1,M=this.vertex2,b=this.vertex3;if(S.ta<=0&&M.ta<=0&&b.ta<=0||n&&!this.isCounterClockwise(v))return!1;var A=this.bounds;A.x=Math.min(S.tx,M.tx,b.tx),A.y=Math.min(S.ty,M.ty,b.ty),A.width=Math.max(S.tx,M.tx,b.tx)-A.x,A.height=Math.max(S.ty,M.ty,b.ty)-A.y;var L=r.x+r.width,R=r.y+r.height;return A.width<=0||A.height<=0||r.width<=0||r.height<=0?!1:!(A.right<r.x||A.bottom<r.y||A.x>L||A.y>R)},scrollUV:function(r,n){return this.vertex1.scrollUV(r,n),this.vertex2.scrollUV(r,n),this.vertex3.scrollUV(r,n),this},scaleUV:function(r,n){return this.vertex1.scaleUV(r,n),this.vertex2.scaleUV(r,n),this.vertex3.scaleUV(r,n),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,n,v,o,c,m,p,g){return this.vertex1.update(n,v,o,c,m,p,g,r),this.vertex2.update(n,v,o,c,m,p,g,r),this.vertex3.update(n,v,o,c,m,p,g,r),this},translate:function(r,n){n===void 0&&(n=0);var v=this.vertex1,o=this.vertex2,c=this.vertex3;return v.x+=r,v.y+=n,o.x+=r,o.y+=n,c.x+=r,c.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(r){var n=this.getInCenter();this.translate(r-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var n=this.getInCenter();this.translate(0,r-n.y)}},alpha:{get:function(){var r=this.vertex1,n=this.vertex2,v=this.vertex3;return(r.alpha+n.alpha+v.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,n=this.vertex2,v=this.vertex3;return(r.vz+n.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});a.exports=h},99425:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18693),y=e(72632),d=e(16650),l=e(70015),h=e(85769),r=new l,n=new l,v=new d,o=function(c){var m=y(c,"mesh"),p=y(c,"texture",null),g=y(c,"frame"),x=y(c,"width",1),E=y(c,"height",x),P=y(c,"widthSegments",1),S=y(c,"heightSegments",P),M=y(c,"x",0),b=y(c,"y",0),A=y(c,"z",0),L=y(c,"rotateX",0),R=y(c,"rotateY",0),O=y(c,"rotateZ",0),D=y(c,"zIsUp",!0),B=y(c,"isOrtho",m?m.dirtyCache[11]:!1),G=y(c,"colors",[16777215]),z=y(c,"alphas",[1]),X=y(c,"tile",!1),U=y(c,"flipY",!1),V=y(c,"width",null),N={faces:[],verts:[]};r.set(M,b,A),n.set(L,R,O),v.fromRotationXYTranslation(n,r,D);var W;if(!p&&m)p=m.texture,g||(W=m.frame);else if(m&&typeof p=="string")p=m.scene.sys.textures.get(p);else if(!p)return N;W||(W=p.get(g)),!V&&B&&p&&m&&(x=W.width/m.height,E=W.height/m.height);var F=x/2,I=E/2,k=Math.floor(P),Y=Math.floor(S),H=k+1,K=Y+1,j=x/k,J=E/Y,Q=[],Z=[],q,et,tt=0,it=1,ut=0,ot=1;W&&(tt=W.u0,it=W.u1,U?(ut=W.v1,ot=W.v0):(ut=W.v0,ot=W.v1));var ht=it-tt,st=ot-ut;for(et=0;et<K;et++){var at=et*J-I;for(q=0;q<H;q++){var nt=q*j-F;Z.push(nt,-at);var gt=tt+ht*(q/k),dt=ut+st*(et/Y);Q.push(gt,dt)}}Array.isArray(G)||(G=[G]),Array.isArray(z)||(z=[z]);var mt=0,Ft=0;for(et=0;et<Y;et++)for(q=0;q<k;q++){var pt=(q+H*et)*2,ft=(q+H*(et+1))*2,Mt=(q+1+H*(et+1))*2,xt=(q+1+H*et)*2,Tt=G[Ft],zt=z[mt],Ct=new h(Z[pt],Z[pt+1],0,Q[pt],Q[pt+1],Tt,zt).transformMat4(v),At=new h(Z[ft],Z[ft+1],0,Q[ft],Q[ft+1],Tt,zt).transformMat4(v),Le=new h(Z[xt],Z[xt+1],0,Q[xt],Q[xt+1],Tt,zt).transformMat4(v),Rt=new h(Z[ft],Z[ft+1],0,Q[ft],Q[ft+1],Tt,zt).transformMat4(v),Ot=new h(Z[Mt],Z[Mt+1],0,Q[Mt],Q[Mt+1],Tt,zt).transformMat4(v),Fe=new h(Z[xt],Z[xt+1],0,Q[xt],Q[xt+1],Tt,zt).transformMat4(v);X&&(Ct.setUVs(tt,ot),At.setUVs(tt,ut),Le.setUVs(it,ot),Rt.setUVs(tt,ut),Ot.setUVs(it,ut),Fe.setUVs(it,ot)),Ft++,Ft===G.length&&(Ft=0),mt++,mt===z.length&&(mt=0),N.verts.push(Ct,At,Le,Rt,Ot,Fe),N.faces.push(new u(Ct,At,Le),new u(Rt,Ot,Fe))}return m&&(m.faces=m.faces.concat(N.faces),m.vertices=m.vertices.concat(N.verts)),N};a.exports=o},53267:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18693),y=e(16650),d=e(70015),l=e(85769),h=new d,r=new d,n=new y,v=function(o,c,m,p,g,x,E,P,S,M){m===void 0&&(m=1),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=0),M===void 0&&(M=!0);var b={faces:[],verts:[]},A=o.materials;h.set(p,g,x),r.set(E,P,S),n.fromRotationXYTranslation(r,h,M);for(var L=0;L<o.models.length;L++)for(var R=o.models[L],O=R.vertices,D=R.textureCoords,B=R.faces,G=0;G<B.length;G++){var z=B[G],X=z.vertices[0],U=z.vertices[1],V=z.vertices[2],N=O[X.vertexIndex],W=O[U.vertexIndex],F=O[V.vertexIndex],I=X.textureCoordsIndex,k=U.textureCoordsIndex,Y=V.textureCoordsIndex,H=I===-1?{u:0,v:1}:D[I],K=k===-1?{u:0,v:0}:D[k],j=Y===-1?{u:1,v:1}:D[Y],J=16777215;z.material!==""&&A[z.material]&&(J=A[z.material]);var Q=new l(N.x*m,N.y*m,N.z*m,H.u,H.v,J).transformMat4(n),Z=new l(W.x*m,W.y*m,W.z*m,K.u,K.v,J).transformMat4(n),q=new l(F.x*m,F.y*m,F.z*m,j.u,j.v,J).transformMat4(n);b.verts.push(Q,Z,q),b.faces.push(new u(Q,Z,q))}return c&&(c.faces=c.faces.concat(b.faces),c.vertices=c.vertices.concat(b.verts)),b};a.exports=v},67623:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18693),y=e(85769),d=function(l,h,r,n,v,o,c,m){if(n===void 0&&(n=!1),o===void 0&&(o=16777215),c===void 0&&(c=1),m===void 0&&(m=!1),l.length!==h.length&&!n){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,x,E,P,S,M,b,A,L,R,O,D=n?3:2,B=Array.isArray(o),G=Array.isArray(c);if(Array.isArray(r)&&r.length>0)for(g=0;g<r.length;g++){var z=r[g],X=r[g]*2,U=r[g]*D;x=l[U],E=l[U+1],P=n?l[U+2]:0,S=h[X],M=h[X+1],m&&(M=1-M),b=B?o[z]:o,A=G?c[z]:c,L=0,R=0,O=0,v&&(L=v[U],R=v[U+1],O=n?v[U+2]:0),p.vertices.push(new y(x,E,P,S,M,b,A,L,R,O))}else{var V=0,N=0;for(g=0;g<l.length;g+=D)x=l[g],E=l[g+1],P=n?l[g+2]:0,S=h[V],M=h[V+1],b=B?o[N]:o,A=G?c[N]:c,L=0,R=0,O=0,v&&(L=v[g],R=v[g+1],O=n?v[g+2]:0),p.vertices.push(new y(x,E,P,S,M,b,A,L,R,O)),V+=2,N++}for(g=0;g<p.vertices.length;g+=3){var W=p.vertices[g],F=p.vertices[g+1],I=p.vertices[g+2];p.faces.push(new u(W,F,I))}return p};a.exports=d},27291:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=!0,e="untitled",u="",y="";function d(x){var E=x.indexOf("#");return E>-1?x.substring(0,E):x}function l(x){return x.models.length===0&&x.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),u="",x.models[x.models.length-1]}function h(x,E){var P=x.length>=2?x[1]:e;E.models.push({faces:[],name:P,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function r(x){x.length===2&&(u=x[1])}function n(x,E){var P=x.length,S=P>=2?parseFloat(x[1]):0,M=P>=3?parseFloat(x[2]):0,b=P>=4?parseFloat(x[3]):0;l(E).vertices.push({x:S,y:M,z:b})}function v(x,E){var P=x.length,S=P>=2?parseFloat(x[1]):0,M=P>=3?parseFloat(x[2]):0,b=P>=4?parseFloat(x[3]):0;isNaN(S)&&(S=0),isNaN(M)&&(M=0),isNaN(b)&&(b=0),T&&(M=1-M),l(E).textureCoords.push({u:S,v:M,w:b})}function o(x,E){var P=x.length,S=P>=2?parseFloat(x[1]):0,M=P>=3?parseFloat(x[2]):0,b=P>=4?parseFloat(x[3]):0;l(E).vertexNormals.push({x:S,y:M,z:b})}function c(x,E){var P=x.length-1;if(!(P<3)){for(var S={group:u,material:y,vertices:[]},M=0;M<P;M++){var b=x[M+1],A=b.split("/"),L=A.length;if(!(L<1||L>3)){var R=0,O=0,D=0;R=parseInt(A[0],10),L>1&&A[1]!==""&&(O=parseInt(A[1],10)),L>2&&(D=parseInt(A[2],10)),R!==0&&(R<0&&(R=l(E).vertices.length+1+R),O-=1,R-=1,D-=1,S.vertices.push({textureCoordsIndex:O,vertexIndex:R,vertexNormalIndex:D}))}}l(E).faces.push(S)}}function m(x,E){x.length>=2&&E.materialLibraries.push(x[1])}function p(x){x.length>=2&&(y=x[1])}var g=function(x,E){E===void 0&&(E=!0),T=E;var P={materials:{},materialLibraries:[],models:[]};u="",y="";for(var S=x.split(`
`),M=0;M<S.length;M++){var b=d(S[M]),A=b.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":h(A,P);break;case"g":r(A);break;case"v":n(A,P);break;case"vt":v(A,P);break;case"vn":o(A,P);break;case"f":c(A,P);break;case"mtllib":m(A,P);break;case"usemtl":p(A);break}}return P};a.exports=g},76799:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22946),y=function(d){for(var l={},h=d.split(`
`),r="",n=0;n<h.length;n++){var v=h[n].trim();if(!(v.indexOf("#")===0||v==="")){var o=v.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":{r=o[1];break}case"kd":{var c=Math.floor(o[1]*255),m=o.length>=2?Math.floor(o[2]*255):c,p=o.length>=3?Math.floor(o[3]*255):c;l[r]=u(c,m,p);break}}}}return l};a.exports=y},15313:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l,h;if(y===void 0&&d===void 0){var r=e.getInCenter();l=r.x,h=r.y}var n=Math.cos(u),v=Math.sin(u),o=e.vertex1,c=e.vertex2,m=e.vertex3,p=o.x-l,g=o.y-h;o.set(p*n-g*v+l,p*v+g*n+h),p=c.x-l,g=c.y-h,c.set(p*n-g*v+l,p*v+g*n+h),p=m.x-l,g=m.y-h,m.set(p*n-g*v+l,p*v+g*n+h)};a.exports=T},85769:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(75512),d=e(70015),l=new u({Extends:d,initialize:function(r,n,v,o,c,m,p,g,x,E){m===void 0&&(m=16777215),p===void 0&&(p=1),g===void 0&&(g=0),x===void 0&&(x=0),E===void 0&&(E=0),d.call(this,r,n,v),this.vx=0,this.vy=0,this.vz=0,this.nx=g,this.ny=x,this.nz=E,this.u=o,this.v=c,this.color=m,this.alpha=p,this.tx=0,this.ty=0,this.ta=0,this.tu=o,this.tv=c},setUVs:function(h,r){return this.u=h,this.v=r,this.tu=h,this.tv=r,this},scrollUV:function(h,r){return this.tu+=h,this.tv+=r,this},scaleUV:function(h,r){return this.tu=this.u*h,this.tv=this.v*r,this},transformCoordinatesLocal:function(h,r,n,v){var o=this.x,c=this.y,m=this.z,p=h.val,g=o*p[0]+c*p[4]+m*p[8]+p[12],x=o*p[1]+c*p[5]+m*p[9]+p[13],E=o*p[2]+c*p[6]+m*p[10]+p[14],P=o*p[3]+c*p[7]+m*p[11]+p[15];this.vx=g/P*r,this.vy=-(x/P)*n,v<=0?this.vz=E/P:this.vz=-(E/P)},resize:function(h,r,n,v,o,c){return this.x=h,this.y=r,this.vx=this.x*n,this.vy=-this.y*v,this.vz=0,o<.5?this.vx+=n*(.5-o):o>.5&&(this.vx-=n*(o-.5)),c<.5?this.vy+=v*(.5-c):c>.5&&(this.vy-=v*(c-.5)),this},update:function(h,r,n,v,o,c,m,p){var g=this.vx*h+this.vy*n+o,x=this.vx*r+this.vy*v+c;return m&&(g=Math.round(g),x=Math.round(x)),this.tx=g,this.ty=x,this.ta=this.alpha*p,this},load:function(h,r,n,v,o){return h[++n]=this.tx,h[++n]=this.ty,h[++n]=this.tu,h[++n]=this.tv,h[++n]=v,h[++n]=o,r[++n]=y.getTintAppendFloatAlpha(this.color,this.ta),n}});a.exports=l},14293:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};a.exports=u},77601:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};a.exports=T},38933:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d){return new u(d.x,d.y)};a.exports=y},47103:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.setTo(e.x,e.y)};a.exports=T},13625:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x===u.x&&e.y===u.y};a.exports=T},12536:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};a.exports=T},54205:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){if(l===void 0&&(l=new u),!Array.isArray(d))throw new Error("GetCentroid points argument must be an array");var h=d.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)l.x=d[0].x,l.y=d[0].y;else{for(var r=0;r<h;r++)l.x+=d[r].x,l.y+=d[r].y;l.x/=h,l.y/=h}return l};a.exports=y},50083:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};a.exports=T},82712:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x*e.x+e.y*e.y};a.exports=T},20052:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d,l){l===void 0&&(l=new u);for(var h=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,o=0;o<d.length;o++){var c=d[o];c.x>h&&(h=c.x),c.x<r&&(r=c.x),c.y>n&&(n=c.y),c.y<v&&(v=c.y)}return l.x=r,l.y=v,l.width=h-r,l.height=n-v,l};a.exports=y},77154:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l,h,r){return h===void 0&&(h=0),r===void 0&&(r=new u),r.x=d.x+(l.x-d.x)*h,r.y=d.y+(l.y-d.y)*h,r};a.exports=y},42397:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(e.y,e.x)};a.exports=T},59464:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){return l===void 0&&(l=new u),l.setTo(-d.x,-d.y)};a.exports=y},79967:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(52394),d=new u({initialize:function(h,r){h===void 0&&(h=0),r===void 0&&(r=h),this.type=y.POINT,this.x=h,this.y=r},setTo:function(l,h){return l===void 0&&(l=0),h===void 0&&(h=l),this.x=l,this.y=h,this}});a.exports=d},53581:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(82712),d=function(l,h,r){r===void 0&&(r=new u);var n=l.x*h.x+l.y*h.y,v=n/y(h);return v!==0&&(r.x=v*h.x,r.y=v*h.y),r};a.exports=d},50817:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l,h){h===void 0&&(h=new u);var r=d.x*l.x+d.y*l.y;return r!==0&&(h.x=r*l.x,h.y=r*l.y),h};a.exports=y},40525:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50083),y=function(d,l){if(d.x!==0||d.y!==0){var h=u(d);d.x/=h,d.y/=h}return d.x*=l,d.y*=l,d};a.exports=y},63472:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967);u.Ceil=e(77601),u.Clone=e(38933),u.CopyFrom=e(47103),u.Equals=e(13625),u.Floor=e(12536),u.GetCentroid=e(54205),u.GetMagnitude=e(50083),u.GetMagnitudeSq=e(82712),u.GetRectangleFromPoints=e(20052),u.Interpolate=e(77154),u.Invert=e(42397),u.Negative=e(59464),u.Project=e(53581),u.ProjectUnit=e(50817),u.SetMagnitude=e(40525),a.exports=u},19631:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8580),y=function(d){return new u(d.points)};a.exports=y},45604:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){for(var d=!1,l=-1,h=e.points.length-1;++l<e.points.length;h=l){var r=e.points[l].x,n=e.points[l].y,v=e.points[h].x,o=e.points[h].y;(n<=y&&y<o||o<=y&&y<n)&&u<(v-r)*(y-n)/(o-n)+r&&(d=!d)}return d};a.exports=T},87289:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45604),y=function(d,l){return u(d,l.x,l.y)};a.exports=y},11117:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(N,W,F){F=F||2;var I=W&&W.length,k=I?W[0]*F:N.length,Y=e(N,0,k,F,!0),H=[];if(!Y||Y.next===Y.prev)return H;var K,j,J,Q,Z,q,et;if(I&&(Y=n(N,W,Y,F)),N.length>80*F){K=J=N[0],j=Q=N[1];for(var tt=F;tt<k;tt+=F)Z=N[tt],q=N[tt+1],Z<K&&(K=Z),q<j&&(j=q),Z>J&&(J=Z),q>Q&&(Q=q);et=Math.max(J-K,Q-j),et=et!==0?32767/et:0}return y(Y,H,F,K,j,et,0),H}function e(N,W,F,I,k){var Y,H;if(k===V(N,W,F,I)>0)for(Y=W;Y<F;Y+=I)H=z(Y,N[Y],N[Y+1],H);else for(Y=F-I;Y>=W;Y-=I)H=z(Y,N[Y],N[Y+1],H);return H&&b(H,H.next)&&(X(H),H=H.next),H}function u(N,W){if(!N)return N;W||(W=N);var F=N,I;do if(I=!1,!F.steiner&&(b(F,F.next)||M(F.prev,F,F.next)===0)){if(X(F),F=W=F.prev,F===F.next)break;I=!0}else F=F.next;while(I||F!==W);return W}function y(N,W,F,I,k,Y,H){if(!!N){!H&&Y&&p(N,I,k,Y);for(var K=N,j,J;N.prev!==N.next;){if(j=N.prev,J=N.next,Y?l(N,I,k,Y):d(N)){W.push(j.i/F|0),W.push(N.i/F|0),W.push(J.i/F|0),X(N),N=J.next,K=J.next;continue}if(N=J,N===K){H?H===1?(N=h(u(N),W,F),y(N,W,F,I,k,Y,2)):H===2&&r(N,W,F,I,k,Y):y(u(N),W,F,I,k,Y,1);break}}}}function d(N){var W=N.prev,F=N,I=N.next;if(M(W,F,I)>=0)return!1;for(var k=W.x,Y=F.x,H=I.x,K=W.y,j=F.y,J=I.y,Q=k<Y?k<H?k:H:Y<H?Y:H,Z=K<j?K<J?K:J:j<J?j:J,q=k>Y?k>H?k:H:Y>H?Y:H,et=K>j?K>J?K:J:j>J?j:J,tt=I.next;tt!==W;){if(tt.x>=Q&&tt.x<=q&&tt.y>=Z&&tt.y<=et&&P(k,K,Y,j,H,J,tt.x,tt.y)&&M(tt.prev,tt,tt.next)>=0)return!1;tt=tt.next}return!0}function l(N,W,F,I){var k=N.prev,Y=N,H=N.next;if(M(k,Y,H)>=0)return!1;for(var K=k.x,j=Y.x,J=H.x,Q=k.y,Z=Y.y,q=H.y,et=K<j?K<J?K:J:j<J?j:J,tt=Q<Z?Q<q?Q:q:Z<q?Z:q,it=K>j?K>J?K:J:j>J?j:J,ut=Q>Z?Q>q?Q:q:Z>q?Z:q,ot=x(et,tt,W,F,I),ht=x(it,ut,W,F,I),st=N.prevZ,at=N.nextZ;st&&st.z>=ot&&at&&at.z<=ht;){if(st.x>=et&&st.x<=it&&st.y>=tt&&st.y<=ut&&st!==k&&st!==H&&P(K,Q,j,Z,J,q,st.x,st.y)&&M(st.prev,st,st.next)>=0||(st=st.prevZ,at.x>=et&&at.x<=it&&at.y>=tt&&at.y<=ut&&at!==k&&at!==H&&P(K,Q,j,Z,J,q,at.x,at.y)&&M(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;st&&st.z>=ot;){if(st.x>=et&&st.x<=it&&st.y>=tt&&st.y<=ut&&st!==k&&st!==H&&P(K,Q,j,Z,J,q,st.x,st.y)&&M(st.prev,st,st.next)>=0)return!1;st=st.prevZ}for(;at&&at.z<=ht;){if(at.x>=et&&at.x<=it&&at.y>=tt&&at.y<=ut&&at!==k&&at!==H&&P(K,Q,j,Z,J,q,at.x,at.y)&&M(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function h(N,W,F){var I=N;do{var k=I.prev,Y=I.next.next;!b(k,Y)&&A(k,I,I.next,Y)&&D(k,Y)&&D(Y,k)&&(W.push(k.i/F|0),W.push(I.i/F|0),W.push(Y.i/F|0),X(I),X(I.next),I=N=Y),I=I.next}while(I!==N);return u(I)}function r(N,W,F,I,k,Y){var H=N;do{for(var K=H.next.next;K!==H.prev;){if(H.i!==K.i&&S(H,K)){var j=G(H,K);H=u(H,H.next),j=u(j,j.next),y(H,W,F,I,k,Y,0),y(j,W,F,I,k,Y,0);return}K=K.next}H=H.next}while(H!==N)}function n(N,W,F,I){var k=[],Y,H,K,j,J;for(Y=0,H=W.length;Y<H;Y++)K=W[Y]*I,j=Y<H-1?W[Y+1]*I:N.length,J=e(N,K,j,I,!1),J===J.next&&(J.steiner=!0),k.push(E(J));for(k.sort(v),Y=0;Y<k.length;Y++)F=o(k[Y],F);return F}function v(N,W){return N.x-W.x}function o(N,W){var F=c(N,W);if(!F)return W;var I=G(F,N);return u(I,I.next),u(F,F.next)}function c(N,W){var F=W,I=N.x,k=N.y,Y=-1/0,H;do{if(k<=F.y&&k>=F.next.y&&F.next.y!==F.y){var K=F.x+(k-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(K<=I&&K>Y&&(Y=K,H=F.x<F.next.x?F:F.next,K===I))return H}F=F.next}while(F!==W);if(!H)return null;var j=H,J=H.x,Q=H.y,Z=1/0,q;F=H;do I>=F.x&&F.x>=J&&I!==F.x&&P(k<Q?I:Y,k,J,Q,k<Q?Y:I,k,F.x,F.y)&&(q=Math.abs(k-F.y)/(I-F.x),D(F,N)&&(q<Z||q===Z&&(F.x>H.x||F.x===H.x&&m(H,F)))&&(H=F,Z=q)),F=F.next;while(F!==j);return H}function m(N,W){return M(N.prev,N,W.prev)<0&&M(W.next,N,N.next)<0}function p(N,W,F,I){var k=N;do k.z===0&&(k.z=x(k.x,k.y,W,F,I)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next;while(k!==N);k.prevZ.nextZ=null,k.prevZ=null,g(k)}function g(N){var W,F,I,k,Y,H,K,j,J=1;do{for(F=N,N=null,Y=null,H=0;F;){for(H++,I=F,K=0,W=0;W<J&&(K++,I=I.nextZ,!!I);W++);for(j=J;K>0||j>0&&I;)K!==0&&(j===0||!I||F.z<=I.z)?(k=F,F=F.nextZ,K--):(k=I,I=I.nextZ,j--),Y?Y.nextZ=k:N=k,k.prevZ=Y,Y=k;F=I}Y.nextZ=null,J*=2}while(H>1);return N}function x(N,W,F,I,k){return N=(N-F)*k|0,W=(W-I)*k|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,W=(W|W<<8)&16711935,W=(W|W<<4)&252645135,W=(W|W<<2)&858993459,W=(W|W<<1)&1431655765,N|W<<1}function E(N){var W=N,F=N;do(W.x<F.x||W.x===F.x&&W.y<F.y)&&(F=W),W=W.next;while(W!==N);return F}function P(N,W,F,I,k,Y,H,K){return(k-H)*(W-K)>=(N-H)*(Y-K)&&(N-H)*(I-K)>=(F-H)*(W-K)&&(F-H)*(Y-K)>=(k-H)*(I-K)}function S(N,W){return N.next.i!==W.i&&N.prev.i!==W.i&&!O(N,W)&&(D(N,W)&&D(W,N)&&B(N,W)&&(M(N.prev,N,W.prev)||M(N,W.prev,W))||b(N,W)&&M(N.prev,N,N.next)>0&&M(W.prev,W,W.next)>0)}function M(N,W,F){return(W.y-N.y)*(F.x-W.x)-(W.x-N.x)*(F.y-W.y)}function b(N,W){return N.x===W.x&&N.y===W.y}function A(N,W,F,I){var k=R(M(N,W,F)),Y=R(M(N,W,I)),H=R(M(F,I,N)),K=R(M(F,I,W));return!!(k!==Y&&H!==K||k===0&&L(N,F,W)||Y===0&&L(N,I,W)||H===0&&L(F,N,I)||K===0&&L(F,W,I))}function L(N,W,F){return W.x<=Math.max(N.x,F.x)&&W.x>=Math.min(N.x,F.x)&&W.y<=Math.max(N.y,F.y)&&W.y>=Math.min(N.y,F.y)}function R(N){return N>0?1:N<0?-1:0}function O(N,W){var F=N;do{if(F.i!==N.i&&F.next.i!==N.i&&F.i!==W.i&&F.next.i!==W.i&&A(F,F.next,N,W))return!0;F=F.next}while(F!==N);return!1}function D(N,W){return M(N.prev,N,N.next)<0?M(N,W,N.next)>=0&&M(N,N.prev,W)>=0:M(N,W,N.prev)<0||M(N,N.next,W)<0}function B(N,W){var F=N,I=!1,k=(N.x+W.x)/2,Y=(N.y+W.y)/2;do F.y>Y!=F.next.y>Y&&F.next.y!==F.y&&k<(F.next.x-F.x)*(Y-F.y)/(F.next.y-F.y)+F.x&&(I=!I),F=F.next;while(F!==N);return I}function G(N,W){var F=new U(N.i,N.x,N.y),I=new U(W.i,W.x,W.y),k=N.next,Y=W.prev;return N.next=W,W.prev=N,F.next=k,k.prev=F,I.next=F,F.prev=I,Y.next=I,I.prev=Y,I}function z(N,W,F,I){var k=new U(N,W,F);return I?(k.next=I.next,k.prev=I,I.next.prev=k,I.next=k):(k.prev=k,k.next=k),k}function X(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function U(N,W,F){this.i=N,this.x=W,this.y=F,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(N,W,F,I){var k=W&&W.length,Y=k?W[0]*F:N.length,H=Math.abs(V(N,0,Y,F));if(k)for(var K=0,j=W.length;K<j;K++){var J=W[K]*F,Q=K<j-1?W[K+1]*F:N.length;H-=Math.abs(V(N,J,Q,F))}var Z=0;for(K=0;K<I.length;K+=3){var q=I[K]*F,et=I[K+1]*F,tt=I[K+2]*F;Z+=Math.abs((N[q]-N[tt])*(N[et+1]-N[q+1])-(N[q]-N[et])*(N[tt+1]-N[q+1]))}return H===0&&Z===0?0:Math.abs((Z-H)/H)};function V(N,W,F,I){for(var k=0,Y=W,H=F-I;Y<F;Y+=I)k+=(N[H]-N[Y])*(N[Y+1]+N[H+1]),H=Y;return k}T.flatten=function(N){for(var W=N[0][0].length,F={vertices:[],holes:[],dimensions:W},I=0,k=0;k<N.length;k++){for(var Y=0;Y<N[k].length;Y++)for(var H=0;H<W;H++)F.vertices.push(N[k][Y][H]);k>0&&(I+=N[k-1].length,F.holes.push(I))}return F},a.exports=T},14045:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d,l){l===void 0&&(l=new u);for(var h=1/0,r=1/0,n=-h,v=-r,o,c=0;c<d.points.length;c++)o=d.points[c],h=Math.min(h,o.x),r=Math.min(r,o.y),n=Math.max(n,o.x),v=Math.max(v,o.y);return l.x=h,l.y=r,l.width=n-h,l.height=v-r,l};a.exports=y},98286:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=[]);for(var y=0;y<e.points.length;y++)u.push(e.points[y].x),u.push(e.points[y].y);return u};a.exports=T},89294:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),y=e(88829),d=e(5159),l=function(h,r,n,v){v===void 0&&(v=[]);var o=h.points,c=d(h);!r&&n>0&&(r=c/n);for(var m=0;m<r;m++)for(var p=c*(m/r),g=0,x=0;x<o.length;x++){var E=o[x],P=o[(x+1)%o.length],S=new y(E.x,E.y,P.x,P.y),M=u(S);if(p<g||p>g+M){g+=M;continue}var b=S.getPoint((p-g)/M);v.push(b);break}return v};a.exports=l},5159:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),y=e(88829),d=function(l){for(var h=l.points,r=0,n=0;n<h.length;n++){var v=h[n],o=h[(n+1)%h.length],c=new y(v.x,v.y,o.x,o.y);r+=u(c)}return r};a.exports=d},8580:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(45604),d=e(89294),l=e(52394),h=new u({initialize:function(n){this.type=l.POLYGON,this.area=0,this.points=[],n&&this.setTo(n)},contains:function(r,n){return y(this,r,n)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var n,v=Number.MAX_VALUE,o=0;o<r.length;o++)n={x:0,y:0},typeof r[o]=="number"||typeof r[o]=="string"?(n.x=parseFloat(r[o]),n.y=parseFloat(r[o+1]),o++):Array.isArray(r[o])?(n.x=r[o][0],n.y=r[o][1]):(n.x=r[o].x,n.y=r[o].y),this.points.push(n),n.y<v&&(v=n.y);return this.calculateArea(v),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,n,v,o=0;o<this.points.length-1;o++)n=this.points[o],v=this.points[o+1],r+=(v.x-n.x)*(n.y+v.y);return n=this.points[0],v=this.points[this.points.length-1],r+=(n.x-v.x)*(v.y+n.y),this.area=-r*.5,this.area},getPoints:function(r,n,v){return d(this,r,n,v)}});a.exports=h},32244:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.points.reverse(),e};a.exports=T},95874:a=>{function T(h,r){var n=h.x-r.x,v=h.y-r.y;return n*n+v*v}function e(h,r,n){var v=r.x,o=r.y,c=n.x-v,m=n.y-o;if(c!==0||m!==0){var p=((h.x-v)*c+(h.y-o)*m)/(c*c+m*m);p>1?(v=n.x,o=n.y):p>0&&(v+=c*p,o+=m*p)}return c=h.x-v,m=h.y-o,c*c+m*m}function u(h,r){for(var n=h[0],v=[n],o,c=1,m=h.length;c<m;c++)o=h[c],T(o,n)>r&&(v.push(o),n=o);return n!==o&&v.push(o),v}function y(h,r,n,v,o){for(var c=v,m,p=r+1;p<n;p++){var g=e(h[p],h[r],h[n]);g>c&&(m=p,c=g)}c>v&&(m-r>1&&y(h,r,m,v,o),o.push(h[m]),n-m>1&&y(h,m,n,v,o))}function d(h,r){var n=h.length-1,v=[h[0]];return y(h,0,n,r,v),v.push(h[n]),v}var l=function(h,r,n){r===void 0&&(r=1),n===void 0&&(n=!1);var v=h.points;if(v.length>2){var o=r*r;n||(v=u(v,o)),h.setTo(d(v,o))}return h};a.exports=l},18974:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(u,y){return u[0]=y[0],u[1]=y[1],u},e=function(u){var y,d=[],l=u.points;for(y=0;y<l.length;y++)d.push([l[y].x,l[y].y]);var h=[];for(d.length>0&&h.push(T([0,0],d[0])),y=0;y<d.length-1;y++){var r=d[y],n=d[y+1],v=r[0],o=r[1],c=n[0],m=n[1];h.push([.85*v+.15*c,.85*o+.15*m]),h.push([.15*v+.85*c,.15*o+.85*m])}return d.length>1&&h.push(T([0,0],d[d.length-1])),u.setTo(h)};a.exports=e},23490:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){for(var d=e.points,l=0;l<d.length;l++)d[l].x+=u,d[l].y+=y;return e};a.exports=T},44359:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8580);u.Clone=e(19631),u.Contains=e(45604),u.ContainsPoint=e(87289),u.Earcut=e(11117),u.GetAABB=e(14045),u.GetNumberArray=e(98286),u.GetPoints=e(89294),u.Perimeter=e(5159),u.Reverse=e(32244),u.Simplify=e(95874),u.Smooth=e(18974),u.Translate=e(23490),a.exports=u},1653:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.height};a.exports=T},33943:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};a.exports=T},58662:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};a.exports=T},79993:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.x=u-e.width/2,e.y=y-e.height/2,e};a.exports=T},81572:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d){return new u(d.x,d.y,d.width,d.height)};a.exports=y},94287:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.width<=0||e.height<=0?!1:e.x<=u&&e.x+e.width>=u&&e.y<=y&&e.y+e.height>=y};a.exports=T},28687:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(94287),y=function(d,l){return u(d,l.x,l.y)};a.exports=y},73222:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.width*u.height>e.width*e.height?!1:u.x>e.x&&u.x<e.right&&u.right>e.x&&u.right<e.right&&u.y>e.y&&u.y<e.bottom&&u.bottom>e.y&&u.bottom<e.bottom};a.exports=T},29538:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.setTo(e.x,e.y,e.width,e.height)};a.exports=T},87279:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=[]),u.push({x:e.x,y:e.y}),u.push({x:e.right,y:e.y}),u.push({x:e.right,y:e.bottom}),u.push({x:e.x,y:e.bottom}),u};a.exports=T},19989:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x===u.x&&e.y===u.y&&e.width===u.width&&e.height===u.height};a.exports=T},92628:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6700),y=function(d,l){var h=u(d);return h<u(l)?d.setSize(l.height*h,l.height):d.setSize(l.width,l.width/h),d.setPosition(l.centerX-d.width/2,l.centerY-d.height/2)};a.exports=y},85028:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6700),y=function(d,l){var h=u(d);return h>u(l)?d.setSize(l.height*h,l.height):d.setSize(l.width,l.width/h),d.setPosition(l.centerX-d.width/2,l.centerY-d.height/2)};a.exports=y},71356:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};a.exports=T},21687:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};a.exports=T},80222:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=e(83392),d=function(l,h){if(h===void 0&&(h=new u),l.length===0)return h;for(var r=Number.MAX_VALUE,n=Number.MAX_VALUE,v=y.MIN_SAFE_INTEGER,o=y.MIN_SAFE_INTEGER,c,m,p,g=0;g<l.length;g++)c=l[g],Array.isArray(c)?(m=c[0],p=c[1]):(m=c.x,p=c.y),r=Math.min(r,m),n=Math.min(n,p),v=Math.max(v,m),o=Math.max(o,p);return h.x=r,h.y=n,h.width=v-r,h.height=o-n,h};a.exports=d},75785:(a,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d,l,h,r,n){return n===void 0&&(n=new u),n.setTo(Math.min(d,h),Math.min(l,r),Math.abs(d-h),Math.abs(l-r))};a.exports=y},6700:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height===0?NaN:e.width/e.height};a.exports=T},35242:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){return l===void 0&&(l=new u),l.x=d.centerX,l.y=d.centerY,l};a.exports=y},47698:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85876),y=e(79967),d=function(l,h,r){if(r===void 0&&(r=new y),h<=0||h>=1)return r.x=l.x,r.y=l.y,r;var n=u(l)*h;return h>.5?(n-=l.width+l.height,n<=l.width?(r.x=l.right-n,r.y=l.bottom):(r.x=l.x,r.y=l.bottom-(n-l.width))):n<=l.width?(r.x=l.x+n,r.y=l.y):(r.x=l.right,r.y=l.y+(n-l.width)),r};a.exports=d},54932:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47698),y=e(85876),d=function(l,h,r,n){n===void 0&&(n=[]),!h&&r>0&&(h=y(l)/r);for(var v=0;v<h;v++){var o=v/h;n.push(u(l,o))}return n};a.exports=d},31591:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){return l===void 0&&(l=new u),l.x=d.width,l.y=d.height,l};a.exports=y},7782:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79993),y=function(d,l,h){var r=d.centerX,n=d.centerY;return d.setSize(d.width+l*2,d.height+h*2),u(d,r,n)};a.exports=y},66217:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=e(90205),d=function(l,h,r){return r===void 0&&(r=new u),y(l,h)?(r.x=Math.max(l.x,h.x),r.y=Math.max(l.y,h.y),r.width=Math.min(l.right,h.right)-r.x,r.height=Math.min(l.bottom,h.bottom)-r.y):r.setEmpty(),r};a.exports=d},40053:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85876),y=e(79967),d=function(l,h,r,n){if(n===void 0&&(n=[]),!h&&!r)return n;h?r=Math.round(u(l)/h):h=u(l)/r;for(var v=l.x,o=l.y,c=0,m=0;m<r;m++)switch(n.push(new y(v,o)),c){case 0:v+=h,v>=l.right&&(c=1,o+=v-l.right,v=l.right);break;case 1:o+=h,o>=l.bottom&&(c=2,v-=o-l.bottom,o=l.bottom);break;case 2:v-=h,v<=l.left&&(c=3,o-=l.left-v,v=l.left);break;case 3:o-=h,o<=l.top&&(c=0,o=l.top);break}return n};a.exports=d},86673:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){for(var y=e.x,d=e.right,l=e.y,h=e.bottom,r=0;r<u.length;r++)y=Math.min(y,u[r].x),d=Math.max(d,u[r].x),l=Math.min(l,u[r].y),h=Math.max(h,u[r].y);return e.x=y,e.y=l,e.width=d-y,e.height=h-l,e};a.exports=T},14655:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=Math.min(e.x,u.x),d=Math.max(e.right,u.right);e.x=y,e.width=d-y;var l=Math.min(e.y,u.y),h=Math.max(e.bottom,u.bottom);return e.y=l,e.height=h-l,e};a.exports=T},44755:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=Math.min(e.x,u),l=Math.max(e.right,u);e.x=d,e.width=l-d;var h=Math.min(e.y,y),r=Math.max(e.bottom,y);return e.y=h,e.height=r-h,e};a.exports=T},74466:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.x+=u,e.y+=y,e};a.exports=T},55946:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x+=u.x,e.y+=u.y,e};a.exports=T},97474:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x<u.right&&e.right>u.x&&e.y<u.bottom&&e.bottom>u.y};a.exports=T},85876:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(e.width+e.height)};a.exports=T},20243:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(75606),d=function(l,h,r){r===void 0&&(r=new u),h=y(h);var n=Math.sin(h),v=Math.cos(h),o=v>0?l.width/2:l.width/-2,c=n>0?l.height/2:l.height/-2;return Math.abs(o*n)<Math.abs(c*v)?c=o*n/v:o=c*v/n,r.x=o+l.centerX,r.y=c+l.centerY,r};a.exports=d},30001:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){return l===void 0&&(l=new u),l.x=d.x+Math.random()*d.width,l.y=d.y+Math.random()*d.height,l};a.exports=y},97691:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),y=e(73222),d=e(79967),l=function(h,r,n){if(n===void 0&&(n=new d),y(h,r))switch(u(0,3)){case 0:n.x=h.x+Math.random()*(r.right-h.x),n.y=h.y+Math.random()*(r.top-h.y);break;case 1:n.x=r.x+Math.random()*(h.right-r.x),n.y=r.bottom+Math.random()*(h.bottom-r.bottom);break;case 2:n.x=h.x+Math.random()*(r.x-h.x),n.y=r.y+Math.random()*(h.bottom-r.y);break;case 3:n.x=r.right+Math.random()*(h.right-r.right),n.y=h.y+Math.random()*(r.bottom-h.y);break}return n};a.exports=l},74118:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(94287),d=e(47698),l=e(54932),h=e(52394),r=e(88829),n=e(30001),v=new u({initialize:function(c,m,p,g){c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.RECTANGLE,this.x=c,this.y=m,this.width=p,this.height=g},contains:function(o,c){return y(this,o,c)},getPoint:function(o,c){return d(this,o,c)},getPoints:function(o,c,m){return l(this,o,c,m)},getRandomPoint:function(o){return n(this,o)},setTo:function(o,c,m,p){return this.x=o,this.y=c,this.width=m,this.height=p,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(o,c){return c===void 0&&(c=o),this.x=o,this.y=c,this},setSize:function(o,c){return c===void 0&&(c=o),this.width=o,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(o){return o===void 0&&(o=new r),o.setTo(this.x,this.y,this.right,this.y),o},getLineB:function(o){return o===void 0&&(o=new r),o.setTo(this.right,this.y,this.right,this.bottom),o},getLineC:function(o){return o===void 0&&(o=new r),o.setTo(this.right,this.bottom,this.x,this.bottom),o},getLineD:function(o){return o===void 0&&(o=new r),o.setTo(this.x,this.bottom,this.x,this.y),o},left:{get:function(){return this.x},set:function(o){o>=this.right?this.width=0:this.width=this.right-o,this.x=o}},right:{get:function(){return this.x+this.width},set:function(o){o<=this.x?this.width=0:this.width=o-this.x}},top:{get:function(){return this.y},set:function(o){o>=this.bottom?this.height=0:this.height=this.bottom-o,this.y=o}},bottom:{get:function(){return this.y+this.height},set:function(o){o<=this.y?this.height=0:this.height=o-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(o){this.x=o-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(o){this.y=o-this.height/2}}});a.exports=v},51828:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.width===u.width&&e.height===u.height};a.exports=T},5691:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return y===void 0&&(y=u),e.width*=u,e.height*=y,e};a.exports=T},58795:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=function(d,l,h){h===void 0&&(h=new u);var r=Math.min(d.x,l.x),n=Math.min(d.y,l.y),v=Math.max(d.right,l.right)-r,o=Math.max(d.bottom,l.bottom)-n;return h.setTo(r,n,v,o)};a.exports=y},66658:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118);u.Area=e(1653),u.Ceil=e(33943),u.CeilAll=e(58662),u.CenterOn=e(79993),u.Clone=e(81572),u.Contains=e(94287),u.ContainsPoint=e(28687),u.ContainsRect=e(73222),u.CopyFrom=e(29538),u.Decompose=e(87279),u.Equals=e(19989),u.FitInside=e(92628),u.FitOutside=e(85028),u.Floor=e(71356),u.FloorAll=e(21687),u.FromPoints=e(80222),u.FromXY=e(75785),u.GetAspectRatio=e(6700),u.GetCenter=e(35242),u.GetPoint=e(47698),u.GetPoints=e(54932),u.GetSize=e(31591),u.Inflate=e(7782),u.Intersection=e(66217),u.MarchingAnts=e(40053),u.MergePoints=e(86673),u.MergeRect=e(14655),u.MergeXY=e(44755),u.Offset=e(74466),u.OffsetPoint=e(55946),u.Overlaps=e(97474),u.Perimeter=e(85876),u.PerimeterPoint=e(20243),u.Random=e(30001),u.RandomOutside=e(97691),u.SameDimensions=e(51828),u.Scale=e(5691),u.Union=e(58795),a.exports=u},19108:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=e.x1,y=e.y1,d=e.x2,l=e.y2,h=e.x3,r=e.y3;return Math.abs(((h-u)*(l-y)-(d-u)*(r-y))/2)};a.exports=T},41199:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349),y=function(d,l,h){var r=h*(Math.sqrt(3)/2),n=d,v=l,o=d+h/2,c=l+r,m=d-h/2,p=l+r;return new u(n,v,o,c,m,p)};a.exports=y},88730:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(11117),y=e(66349),d=function(l,h,r,n,v){h===void 0&&(h=null),r===void 0&&(r=1),n===void 0&&(n=1),v===void 0&&(v=[]);for(var o=u(l,h),c,m,p,g,x,E,P,S,M,b=0;b<o.length;b+=3)c=o[b],m=o[b+1],p=o[b+2],g=l[c*2]*r,x=l[c*2+1]*n,E=l[m*2]*r,P=l[m*2+1]*n,S=l[p*2]*r,M=l[p*2+1]*n,v.push(new y(g,x,E,P,S,M));return v};a.exports=d},3635:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349),y=function(d,l,h,r){r===void 0&&(r=h);var n=d,v=l,o=d,c=l-r,m=d+h,p=l;return new u(n,v,o,c,m,p)};a.exports=y},1882:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56595),y=e(9640),d=function(l,h,r,n){n===void 0&&(n=u);var v=n(l),o=h-v.x,c=r-v.y;return y(l,o,c)};a.exports=d},56595:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){return l===void 0&&(l=new u),l.x=(d.x1+d.x2+d.x3)/3,l.y=(d.y1+d.y2+d.y3)/3,l};a.exports=y},91835:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736);function y(l,h,r,n){return l*n-h*r}var d=function(l,h){h===void 0&&(h=new u);var r=l.x3,n=l.y3,v=l.x1-r,o=l.y1-n,c=l.x2-r,m=l.y2-n,p=2*y(v,o,c,m),g=y(o,v*v+o*o,m,c*c+m*m),x=y(v,v*v+o*o,c,c*c+m*m);return h.x=r-g/p,h.y=n+x/p,h};a.exports=d},97073:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),y=function(d,l){l===void 0&&(l=new u);var h=d.x1,r=d.y1,n=d.x2,v=d.y2,o=d.x3,c=d.y3,m=n-h,p=v-r,g=o-h,x=c-r,E=m*(h+n)+p*(r+v),P=g*(h+o)+x*(r+c),S=2*(m*(c-v)-p*(o-n)),M,b;if(Math.abs(S)<1e-6){var A=Math.min(h,n,o),L=Math.min(r,v,c);M=(Math.max(h,n,o)-A)*.5,b=(Math.max(r,v,c)-L)*.5,l.x=A+M,l.y=L+b,l.radius=Math.sqrt(M*M+b*b)}else l.x=(x*E-p*P)/S,l.y=(m*P-g*E)/S,M=l.x-h,b=l.y-r,l.radius=Math.sqrt(M*M+b*b);return l};a.exports=y},75974:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349),y=function(d){return new u(d.x1,d.y1,d.x2,d.y2,d.x3,d.y3)};a.exports=y},60689:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=e.x3-e.x1,l=e.y3-e.y1,h=e.x2-e.x1,r=e.y2-e.y1,n=u-e.x1,v=y-e.y1,o=d*d+l*l,c=d*h+l*r,m=d*n+l*v,p=h*h+r*r,g=h*n+r*v,x=o*p-c*c,E=x===0?0:1/x,P=(p*m-c*g)*E,S=(o*g-c*m)*E;return P>=0&&S>=0&&P+S<1};a.exports=T},86875:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y===void 0&&(y=!1),d===void 0&&(d=[]);for(var l=e.x3-e.x1,h=e.y3-e.y1,r=e.x2-e.x1,n=e.y2-e.y1,v=l*l+h*h,o=l*r+h*n,c=r*r+n*n,m=v*c-o*o,p=m===0?0:1/m,g,x,E,P,S,M,b=e.x1,A=e.y1,L=0;L<u.length&&(E=u[L].x-b,P=u[L].y-A,S=l*E+h*P,M=r*E+n*P,g=(c*S-o*M)*p,x=(v*M-o*S)*p,!(g>=0&&x>=0&&g+x<1&&(d.push({x:u[L].x,y:u[L].y}),y)));L++);return d};a.exports=T},51532:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60689),y=function(d,l){return u(d,l.x,l.y)};a.exports=y},42538:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};a.exports=T},18680:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=[]),u.push({x:e.x1,y:e.y1}),u.push({x:e.x2,y:e.y2}),u.push({x:e.x3,y:e.y3}),u};a.exports=T},29977:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.x1===u.x1&&e.y1===u.y1&&e.x2===u.x2&&e.y2===u.y2&&e.x3===u.x3&&e.y3===u.y3};a.exports=T},56088:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=e(16028),d=function(l,h,r){r===void 0&&(r=new u);var n=l.getLineA(),v=l.getLineB(),o=l.getLineC();if(h<=0||h>=1)return r.x=n.x1,r.y=n.y1,r;var c=y(n),m=y(v),p=y(o),g=c+m+p,x=g*h,E=0;return x<c?(E=x/c,r.x=n.x1+(n.x2-n.x1)*E,r.y=n.y1+(n.y2-n.y1)*E):x>c+m?(x-=c+m,E=x/p,r.x=o.x1+(o.x2-o.x1)*E,r.y=o.y1+(o.y2-o.y1)*E):(x-=c,E=x/m,r.x=v.x1+(v.x2-v.x1)*E,r.y=v.y1+(v.y2-v.y1)*E),r};a.exports=d},24402:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),y=e(79967),d=function(l,h,r,n){n===void 0&&(n=[]);var v=l.getLineA(),o=l.getLineB(),c=l.getLineC(),m=u(v),p=u(o),g=u(c),x=m+p+g;!h&&r>0&&(h=x/r);for(var E=0;E<h;E++){var P=x*(E/h),S=0,M=new y;P<m?(S=P/m,M.x=v.x1+(v.x2-v.x1)*S,M.y=v.y1+(v.y2-v.y1)*S):P>m+p?(P-=m+p,S=P/g,M.x=c.x1+(c.x2-c.x1)*S,M.y=c.y1+(c.y2-c.y1)*S):(P-=m,S=P/p,M.x=o.x1+(o.x2-o.x1)*S,M.y=o.y1+(o.y2-o.y1)*S),n.push(M)}return n};a.exports=d},83648:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967);function y(l,h,r,n){var v=l-r,o=h-n,c=v*v+o*o;return Math.sqrt(c)}var d=function(l,h){h===void 0&&(h=new u);var r=l.x1,n=l.y1,v=l.x2,o=l.y2,c=l.x3,m=l.y3,p=y(c,m,v,o),g=y(r,n,c,m),x=y(v,o,r,n),E=p+g+x;return h.x=(r*p+v*g+c*x)/E,h.y=(n*p+o*g+m*x)/E,h};a.exports=d},9640:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e.x1+=u,e.y1+=y,e.x2+=u,e.y2+=y,e.x3+=u,e.y3+=y,e};a.exports=T},95290:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),y=function(d){var l=d.getLineA(),h=d.getLineB(),r=d.getLineC();return u(l)+u(h)+u(r)};a.exports=y},99761:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),y=function(d,l){l===void 0&&(l=new u);var h=d.x2-d.x1,r=d.y2-d.y1,n=d.x3-d.x1,v=d.y3-d.y1,o=Math.random(),c=Math.random();return o+c>=1&&(o=1-o,c=1-c),l.x=d.x1+(h*o+n*c),l.y=d.y1+(r*o+v*c),l};a.exports=y},21934:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19211),y=e(83648),d=function(l,h){var r=y(l);return u(l,r.x,r.y,h)};a.exports=d},68454:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19211),y=function(d,l,h){return u(d,l.x,l.y,h)};a.exports=y},19211:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=Math.cos(d),h=Math.sin(d),r=e.x1-u,n=e.y1-y;return e.x1=r*l-n*h+u,e.y1=r*h+n*l+y,r=e.x2-u,n=e.y2-y,e.x2=r*l-n*h+u,e.y2=r*h+n*l+y,r=e.x3-u,n=e.y3-y,e.x3=r*l-n*h+u,e.y3=r*h+n*l+y,e};a.exports=T},66349:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(60689),d=e(56088),l=e(24402),h=e(52394),r=e(88829),n=e(99761),v=new u({initialize:function(c,m,p,g,x,E){c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),E===void 0&&(E=0),this.type=h.TRIANGLE,this.x1=c,this.y1=m,this.x2=p,this.y2=g,this.x3=x,this.y3=E},contains:function(o,c){return y(this,o,c)},getPoint:function(o,c){return d(this,o,c)},getPoints:function(o,c,m){return l(this,o,c,m)},getRandomPoint:function(o){return n(this,o)},setTo:function(o,c,m,p,g,x){return o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),this.x1=o,this.y1=c,this.x2=m,this.y2=p,this.x3=g,this.y3=x,this},getLineA:function(o){return o===void 0&&(o=new r),o.setTo(this.x1,this.y1,this.x2,this.y2),o},getLineB:function(o){return o===void 0&&(o=new r),o.setTo(this.x2,this.y2,this.x3,this.y3),o},getLineC:function(o){return o===void 0&&(o=new r),o.setTo(this.x3,this.y3,this.x1,this.y1),o},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(o){var c=0;this.x1<=this.x2&&this.x1<=this.x3?c=this.x1-o:this.x2<=this.x1&&this.x2<=this.x3?c=this.x2-o:c=this.x3-o,this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(o){var c=0;this.x1>=this.x2&&this.x1>=this.x3?c=this.x1-o:this.x2>=this.x1&&this.x2>=this.x3?c=this.x2-o:c=this.x3-o,this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(o){var c=0;this.y1<=this.y2&&this.y1<=this.y3?c=this.y1-o:this.y2<=this.y1&&this.y2<=this.y3?c=this.y2-o:c=this.y3-o,this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(o){var c=0;this.y1>=this.y2&&this.y1>=this.y3?c=this.y1-o:this.y2>=this.y1&&this.y2>=this.y3?c=this.y2-o:c=this.y3-o,this.y1-=c,this.y2-=c,this.y3-=c}}});a.exports=v},87619:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349);u.Area=e(19108),u.BuildEquilateral=e(41199),u.BuildFromPolygon=e(88730),u.BuildRight=e(3635),u.CenterOn=e(1882),u.Centroid=e(56595),u.CircumCenter=e(91835),u.CircumCircle=e(97073),u.Clone=e(75974),u.Contains=e(60689),u.ContainsArray=e(86875),u.ContainsPoint=e(51532),u.CopyFrom=e(42538),u.Decompose=e(18680),u.Equals=e(29977),u.GetPoint=e(56088),u.GetPoints=e(24402),u.InCenter=e(83648),u.Perimeter=e(95290),u.Offset=e(9640),u.Random=e(99761),u.Rotate=e(21934),u.RotateAroundPoint=e(68454),u.RotateAroundXY=e(19211),a.exports=u},27395:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:y,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};a.exports=T},18104:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return function(y,d,l,h){var r=e.getPixelAlpha(d,l,h.texture.key,h.frame.name);return r&&r>=u}};a.exports=T},69898:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72687),d=e(6659),l=e(33963),h=e(97081),r=e(71064),n=e(7905),v=e(40398),o=e(37579),c=e(69360),m=e(64462),p=new u({initialize:function(x,E){this.game=x,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new d,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new r(this):null,this.mouse=E.inputMouse?new n(this):null,this.touch=E.inputTouch?new o(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var P=0;P<=this.pointersTotal;P++){var S=new v(this,P);S.smoothFactor=E.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(h.BOOT,this.boot,this)},boot:function(){var g=this.game,x=g.events;this.canvas=g.canvas,this.scaleManager=g.scale,this.events.emit(l.MANAGER_BOOT),x.on(h.PRE_RENDER,this.preRender,this),x.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(l.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(l.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,x=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(l.MANAGER_UPDATE);for(var P=0;P<E.length;P++){var S=E[P];if(S.sys.input&&S.sys.input.updatePoll(g,x)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g){g.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var x=[];this.pointersTotal+g>10&&(g=10-this.pointersTotal);for(var E=0;E<g;E++){var P=this.pointers.length,S=new v(this,P);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,x.push(S)}return x},updateInputPlugins:function(g,x){var E=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var P=0;P<E.length;P++){var S=E[P];if(S.sys.input){var M=S.sys.input.update(g,x);if(M&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(g){for(var x=this.pointers,E=[],P=0;P<g.changedTouches.length;P++)for(var S=g.changedTouches[P],M=1;M<this.pointersTotal;M++){var b=x[M];if(!b.active){b.touchstart(S,g),this.activePointer=b,E.push(b);break}}this.updateInputPlugins(y.TOUCH_START,E)},onTouchMove:function(g){for(var x=this.pointers,E=[],P=0;P<g.changedTouches.length;P++)for(var S=g.changedTouches[P],M=1;M<this.pointersTotal;M++){var b=x[M];if(b.active&&b.identifier===S.identifier){var A=document.elementFromPoint(S.pageX,S.pageY),L=A===this.canvas;!this.isOver&&L?this.setCanvasOver(g):this.isOver&&!L&&this.setCanvasOut(g),this.isOver&&(b.touchmove(S,g),this.activePointer=b,E.push(b));break}}this.updateInputPlugins(y.TOUCH_MOVE,E)},onTouchEnd:function(g){for(var x=this.pointers,E=[],P=0;P<g.changedTouches.length;P++)for(var S=g.changedTouches[P],M=1;M<this.pointersTotal;M++){var b=x[M];if(b.active&&b.identifier===S.identifier){b.touchend(S,g),E.push(b);break}}this.updateInputPlugins(y.TOUCH_END,E)},onTouchCancel:function(g){for(var x=this.pointers,E=[],P=0;P<g.changedTouches.length;P++)for(var S=g.changedTouches[P],M=1;M<this.pointersTotal;M++){var b=x[M];if(b.active&&b.identifier===S.identifier){b.touchcancel(S,g),E.push(b);break}}this.updateInputPlugins(y.TOUCH_CANCEL,E)},onMouseDown:function(g){var x=this.mousePointer;x.down(g),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(y.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){var x=this.mousePointer;x.move(g),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(y.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){var x=this.mousePointer;x.up(g),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(y.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){var x=this.mousePointer;x.wheel(g),this.activePointer=x,this.updateInputPlugins(y.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(l.POINTERLOCK_CHANGE,g,x)},inputCandidate:function(g,x){var E=g.input;if(!E||!E.enabled||!g.willRender(x))return!1;var P=!0,S=g.parentContainer;if(S)do{if(!S.willRender(x)){P=!1;break}S=S.parentContainer}while(S);return P},hitTest:function(g,x,E,P){P===void 0&&(P=this._tempHitTest);var S=this._tempPoint,M=E.scrollX,b=E.scrollY;P.length=0;var A=g.x,L=g.y;E.getWorldPoint(A,L,S),g.worldX=S.x,g.worldY=S.y;for(var R={x:0,y:0},O=this._tempMatrix,D=this._tempMatrix2,B=0;B<x.length;B++){var G=x[B];if(!!this.inputCandidate(G,E)){var z=S.x+M*G.scrollFactorX-M,X=S.y+b*G.scrollFactorY-b;G.parentContainer?(G.getWorldTransformMatrix(O,D),O.applyInverse(z,X,R)):m(z,X,G.x,G.y,G.rotation,G.scaleX,G.scaleY,R),this.pointWithinHitArea(G,R.x,R.y)&&P.push(G)}}return P},pointWithinHitArea:function(g,x,E){x+=g.displayOriginX,E+=g.displayOriginY;var P=g.input;return P&&P.hitAreaCallback(P.hitArea,x,E,g)?(P.localX=x,P.localY=E,!0):!1},pointWithinInteractiveObject:function(g,x,E){return g.hitArea?(x+=g.gameObject.displayOriginX,E+=g.gameObject.displayOriginY,g.localX=x,g.localY=E,g.hitAreaCallback(g.hitArea,x,E,g)):!1},transformPointer:function(g,x,E,P){var S=g.position,M=g.prevPosition;M.x=S.x,M.y=S.y;var b=this.scaleManager.transformX(x),A=this.scaleManager.transformY(E),L=g.smoothFactor;!P||L===0?(S.x=b,S.y=A):(S.x=b*L+M.x*(1-L),S.y=A*L+M.y*(1-L))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});a.exports=p},12499:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),y=e(65650),d=e(56694),l=e(72687),h=e(27395),r=e(18104),n=e(53996),v=e(95669),o=e(72313),c=e(33963),m=e(6659),p=e(72632),g=e(52394),x=e(63399),E=e(42911),P=e(91963),S=e(74118),M=e(94287),b=e(7599),A=e(66349),L=e(60689),R=new d({Extends:m,initialize:function(D){m.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var B={cancelled:!1};this._eventContainer={stopPropagation:function(){B.cancelled=!0}},this._eventData=B,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(b.BOOT,this.boot,this),D.sys.events.on(b.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(b.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var O=this.systems.events;O.on(b.TRANSITION_START,this.transitionIn,this),O.on(b.TRANSITION_OUT,this.transitionOut,this),O.on(b.TRANSITION_COMPLETE,this.transitionComplete,this),O.on(b.PRE_UPDATE,this.preUpdate,this),O.once(b.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(O){this.isActive()&&this.emit(c.GAME_OVER,O.timeStamp,O)},onGameOut:function(O){this.isActive()&&this.emit(c.GAME_OUT,O.timeStamp,O)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var O=this._pendingRemoval,D=this._pendingInsertion,B=O.length,G=D.length;if(!(B===0&&G===0)){for(var z=this._list,X=0;X<B;X++){var U=O[X],V=z.indexOf(U);V>-1&&(z.splice(V,1),this.clear(U,!0))}this._pendingRemoval.length=0,this._list=z.concat(D.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(O,D){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,O,D),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var B,G=this.manager,z=G.pointers,X=G.pointersTotal;for(B=0;B<X;B++)z[B].updateMotion();if(this._list.length===0)return!1;var U=this.pollRate;if(U===-1)return!1;if(U>0)if(this._pollTimer-=D,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var V=!1;for(B=0;B<X;B++){var N=0,W=z[B];this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),N+=this.processOverOutEvents(W),this.getDragState(W)===2&&this.processDragThresholdEvent(W,O),N>0&&(V=!0)}return V},update:function(O,D){if(!this.isActive())return!1;for(var B=D.length,G=!1,z=0;z<B;z++){var X=0,U=D[z];switch(this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),O){case l.MOUSE_DOWN:X+=this.processDragDownEvent(U),X+=this.processDownEvents(U),X+=this.processOverOutEvents(U);break;case l.MOUSE_UP:X+=this.processDragUpEvent(U),X+=this.processUpEvents(U),X+=this.processOverOutEvents(U);break;case l.TOUCH_START:X+=this.processDragDownEvent(U),X+=this.processDownEvents(U),X+=this.processOverEvents(U);break;case l.TOUCH_END:case l.TOUCH_CANCEL:X+=this.processDragUpEvent(U),X+=this.processUpEvents(U),X+=this.processOutEvents(U);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:X+=this.processDragMoveEvent(U),X+=this.processMoveEvents(U),X+=this.processOverOutEvents(U);break;case l.MOUSE_WHEEL:X+=this.processWheelEvent(U);break}X>0&&(G=!0)}return this._updatedThisFrame=!0,G},clear:function(O,D){D===void 0&&(D=!1),this.disable(O);var B=O.input;B&&(this.removeDebug(O),B.gameObject=void 0,B.target=void 0,B.hitArea=void 0,B.hitAreaCallback=void 0,B.callbackContext=void 0,O.input=null),D||this.queueForRemoval(O);var G=this._draggable.indexOf(O);return G>-1&&this._draggable.splice(G,1),O},disable:function(O){var D=O.input;D&&(D.enabled=!1,D.dragState=0);var B=this._temp,G=this._drag,z=this._over,X=this.manager,U=B.indexOf(O);U>-1&&B.splice(U,1);for(var V=0;V<X.pointersTotal;V++)U=G[V].indexOf(O),U>-1&&G[V].splice(U,1),U=z[V].indexOf(O),U>-1&&(z[V].splice(U,1),X.resetCursor(D));return this},enable:function(O,D,B,G){return G===void 0&&(G=!1),O.input?O.input.enabled=!0:this.setHitArea(O,D,B),O.input&&G&&!O.input.dropZone&&(O.input.dropZone=G),this},hitTestPointer:function(O){for(var D=this.cameras.getCamerasBelowPointer(O),B=0;B<D.length;B++){for(var G=D[B],z=this.manager.hitTest(O,this._list,G),X=0;X<z.length;X++){var U=z[X];U.input.dropZone&&this._tempZones.push(U)}if(z.length>0)return O.camera=G,z}return O.camera=D[0],[]},processDownEvents:function(O){var D=0,B=this._temp,G=this._eventData,z=this._eventContainer;G.cancelled=!1;for(var X=!1,U=0;U<B.length;U++){var V=B[U];if(!(!V.input||!V.input.enabled)){if(D++,V.emit(c.GAMEOBJECT_POINTER_DOWN,O,V.input.localX,V.input.localY,z),G.cancelled||!V.input||!V.input.enabled){X=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,O,V,z),G.cancelled||!V.input){X=!0;break}}}return!X&&this.manager&&(O.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,O,B):this.emit(c.POINTER_DOWN_OUTSIDE,O)),D},getDragState:function(O){return this._dragState[O.id]},setDragState:function(O,D){this._dragState[O.id]=D},processDragThresholdEvent:function(O,D){var B=!1,G=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&n(O.x,O.y,O.downX,O.downY)>=z||G>0&&D>=O.downTime+G)&&(B=!0),B)return this.setDragState(O,3),this.processDragStartList(O)},processDragStartList:function(O){if(this.getDragState(O)!==3)return 0;for(var D=this._drag[O.id],B=0;B<D.length;B++){var G=D[B],z=G.input;z.dragState=2,z.dragStartX=G.x,z.dragStartY=G.y,z.dragStartXGlobal=O.worldX,z.dragStartYGlobal=O.worldY,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,G.emit(c.GAMEOBJECT_DRAG_START,O,z.dragX,z.dragY),this.emit(c.DRAG_START,O,G)}return this.setDragState(O,4),D.length},processDragDownEvent:function(O){var D=this._temp;if(this._draggable.length===0||D.length===0||!O.primaryDown||this.getDragState(O)!==0)return 0;this.setDragState(O,1);for(var B=[],G=0;G<D.length;G++){var z=D[G];z.input.draggable&&z.input.dragState===0&&B.push(z)}return B.length===0?(this.setDragState(O,0),0):(B.length>1&&(this.sortGameObjects(B,O),this.topOnly&&B.splice(1)),this._drag[O.id]=B,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(O,3),this.processDragStartList(O)):(this.setDragState(O,2),0))},processDragMoveEvent:function(O){if(this.getDragState(O)===2&&this.processDragThresholdEvent(O,this.manager.game.loop.now),this.getDragState(O)!==4)return 0;for(var D=this._tempZones,B=this._drag[O.id],G=0;G<B.length;G++){var z=B[G],X=z.input,U=X.target;if(U){var V=D.indexOf(U);V===0?(z.emit(c.GAMEOBJECT_DRAG_OVER,O,U),this.emit(c.DRAG_OVER,O,z,U)):V>0?(z.emit(c.GAMEOBJECT_DRAG_LEAVE,O,U),this.emit(c.DRAG_LEAVE,O,z,U),X.target=D[0],U=X.target,z.emit(c.GAMEOBJECT_DRAG_ENTER,O,U),this.emit(c.DRAG_ENTER,O,z,U)):(z.emit(c.GAMEOBJECT_DRAG_LEAVE,O,U),this.emit(c.DRAG_LEAVE,O,z,U),D[0]?(X.target=D[0],U=X.target,z.emit(c.GAMEOBJECT_DRAG_ENTER,O,U),this.emit(c.DRAG_ENTER,O,z,U)):X.target=null)}else!U&&D[0]&&(X.target=D[0],U=X.target,z.emit(c.GAMEOBJECT_DRAG_ENTER,O,U),this.emit(c.DRAG_ENTER,O,z,U));var N,W;if(!z.parentContainer)N=O.worldX-X.dragX,W=O.worldY-X.dragY;else{var F=O.worldX-X.dragStartXGlobal,I=O.worldY-X.dragStartYGlobal,k=z.getParentRotation(),Y=F*Math.cos(k)+I*Math.sin(k),H=I*Math.cos(k)-F*Math.sin(k);Y*=1/z.parentContainer.scaleX,H*=1/z.parentContainer.scaleY,N=Y+X.dragStartX,W=H+X.dragStartY}z.emit(c.GAMEOBJECT_DRAG,O,N,W),this.emit(c.DRAG,O,z,N,W)}return B.length},processDragUpEvent:function(O){for(var D=this._drag[O.id],B=0;B<D.length;B++){var G=D[B],z=G.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-G.displayOriginX,z.dragY=z.localY-G.displayOriginY;var X=!1,U=z.target;U&&(G.emit(c.GAMEOBJECT_DROP,O,U),this.emit(c.DROP,O,G,U),z.target=null,X=!0),G.input&&G.input.enabled&&(G.emit(c.GAMEOBJECT_DRAG_END,O,z.dragX,z.dragY,X),this.emit(c.DRAG_END,O,G,X))}}return this.setDragState(O,0),D.splice(0),0},processMoveEvents:function(O){var D=0,B=this._temp,G=this._eventData,z=this._eventContainer;G.cancelled=!1;for(var X=!1,U=0;U<B.length;U++){var V=B[U];if(!(!V.input||!V.input.enabled)){if(D++,V.emit(c.GAMEOBJECT_POINTER_MOVE,O,V.input.localX,V.input.localY,z),G.cancelled||!V.input||!V.input.enabled){X=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,O,V,z),G.cancelled||!V.input||!V.input.enabled){X=!0;break}if(this.topOnly)break}}return X||this.emit(c.POINTER_MOVE,O,B),D},processWheelEvent:function(O){var D=0,B=this._temp,G=this._eventData,z=this._eventContainer;G.cancelled=!1;for(var X=!1,U=O.deltaX,V=O.deltaY,N=O.deltaZ,W=0;W<B.length;W++){var F=B[W];if(!(!F.input||!F.input.enabled)){if(D++,F.emit(c.GAMEOBJECT_POINTER_WHEEL,O,U,V,N,z),G.cancelled||!F.input||!F.input.enabled){X=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,O,F,U,V,N,z),G.cancelled||!F.input||!F.input.enabled){X=!0;break}}}return X||this.emit(c.POINTER_WHEEL,O,B,U,V,N),D},processOverEvents:function(O){var D=this._temp,B=0,G=D.length,z=[];if(G>0){var X=this.manager,U=this._eventData,V=this._eventContainer;U.cancelled=!1;for(var N=!1,W=0;W<G;W++){var F=D[W];if(!(!F.input||!F.input.enabled)){if(z.push(F),X.setCursor(F.input),F.emit(c.GAMEOBJECT_POINTER_OVER,O,F.input.localX,F.input.localY,V),B++,U.cancelled||!F.input||!F.input.enabled){N=!0;break}if(this.emit(c.GAMEOBJECT_OVER,O,F,V),U.cancelled||!F.input||!F.input.enabled){N=!0;break}}}N||this.emit(c.POINTER_OVER,O,z)}return this._over[O.id]=z,B},processOutEvents:function(O){var D=this._over[O.id],B=0,G=D.length;if(G>0){var z=this.manager,X=this._eventData,U=this._eventContainer;X.cancelled=!1;var V=!1;this.sortGameObjects(D,O);for(var N=0;N<G;N++){var W=D[N];if(W=D[N],!(!W.input||!W.input.enabled)){if(z.resetCursor(W.input),W.emit(c.GAMEOBJECT_POINTER_OUT,O,U),B++,X.cancelled||!W.input||!W.input.enabled){V=!0;break}if(this.emit(c.GAMEOBJECT_OUT,O,W,U),X.cancelled||!W.input||!W.input.enabled){V=!0;break}V||this.emit(c.POINTER_OUT,O,D)}}this._over[O.id]=[]}return B},processOverOutEvents:function(O){var D=this._temp,B,G,z=[],X=[],U=[],V=this._over[O.id],N=this._drag[O.id],W=this.manager;for(B=0;B<V.length;B++)G=V[B],D.indexOf(G)===-1&&N.indexOf(G)===-1?z.push(G):U.push(G);for(B=0;B<D.length;B++)G=D[B],V.indexOf(G)===-1&&X.push(G);var F=z.length,I=0,k=this._eventData,Y=this._eventContainer;k.cancelled=!1;var H=!1;if(F>0){for(this.sortGameObjects(z,O),B=0;B<F;B++)if(G=z[B],!(!G.input||!G.input.enabled)){if(W.resetCursor(G.input),G.emit(c.GAMEOBJECT_POINTER_OUT,O,Y),I++,k.cancelled||!G.input||!G.input.enabled){H=!0;break}if(this.emit(c.GAMEOBJECT_OUT,O,G,Y),k.cancelled||!G.input||!G.input.enabled){H=!0;break}}H||this.emit(c.POINTER_OUT,O,z)}if(F=X.length,k.cancelled=!1,H=!1,F>0){for(this.sortGameObjects(X,O),B=0;B<F;B++)if(G=X[B],!(!G.input||!G.input.enabled)){if(W.setCursor(G.input),G.emit(c.GAMEOBJECT_POINTER_OVER,O,G.input.localX,G.input.localY,Y),I++,k.cancelled||!G.input||!G.input.enabled){H=!0;break}if(this.emit(c.GAMEOBJECT_OVER,O,G,Y),k.cancelled||!G.input||!G.input.enabled){H=!0;break}}H||this.emit(c.POINTER_OVER,O,X)}return V=U.concat(X),this._over[O.id]=this.sortGameObjects(V,O),I},processUpEvents:function(O){var D=this._temp,B=this._eventData,G=this._eventContainer;B.cancelled=!1;for(var z=!1,X=0;X<D.length;X++){var U=D[X];if(!(!U.input||!U.input.enabled)){if(U.emit(c.GAMEOBJECT_POINTER_UP,O,U.input.localX,U.input.localY,G),B.cancelled||!U.input||!U.input.enabled){z=!0;break}if(this.emit(c.GAMEOBJECT_UP,O,U,G),B.cancelled||!U.input||!U.input.enabled){z=!0;break}}}return!z&&this.manager&&(O.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,O,D):this.emit(c.POINTER_UP_OUTSIDE,O)),D.length},queueForInsertion:function(O){return this._pendingInsertion.indexOf(O)===-1&&this._list.indexOf(O)===-1&&this._pendingInsertion.push(O),this},queueForRemoval:function(O){return this._pendingRemoval.push(O),this},setDraggable:function(O,D){D===void 0&&(D=!0),Array.isArray(O)||(O=[O]);for(var B=0;B<O.length;B++){var G=O[B];G.input.draggable=D;var z=this._draggable.indexOf(G);D&&z===-1?this._draggable.push(G):!D&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(O){O===void 0&&(O=1);var D=this.systems.textures;return r(D,O)},setHitArea:function(O,D,B){if(D===void 0)return this.setHitAreaFromTexture(O);Array.isArray(O)||(O=[O]);var G=!1,z=!1,X=!1,U=!1,V=!1,N=!0;if(E(D)){var W=D;D=p(W,"hitArea",null),B=p(W,"hitAreaCallback",null),G=p(W,"draggable",!1),z=p(W,"dropZone",!1),X=p(W,"cursor",!1),U=p(W,"useHandCursor",!1),V=p(W,"pixelPerfect",!1);var F=p(W,"alphaTolerance",1);V&&(D={},B=this.makePixelPerfect(F)),(!D||!B)&&(this.setHitAreaFromTexture(O),N=!1)}else typeof D=="function"&&!B&&(B=D,D={});for(var I=0;I<O.length;I++){var k=O[I];if(V&&k.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var Y=k.input?k.input:h(k,D,B);Y.customHitArea=N,Y.dropZone=z,Y.cursor=U?"pointer":X,k.input=Y,G&&this.setDraggable(k),this.queueForInsertion(k)}return this},setHitAreaCircle:function(O,D,B,G,z){z===void 0&&(z=y);var X=new u(D,B,G);return this.setHitArea(O,X,z)},setHitAreaEllipse:function(O,D,B,G,z,X){X===void 0&&(X=o);var U=new v(D,B,G,z);return this.setHitArea(O,U,X)},setHitAreaFromTexture:function(O,D){D===void 0&&(D=M),Array.isArray(O)||(O=[O]);for(var B=0;B<O.length;B++){var G=O[B],z=G.frame,X=0,U=0;if(G.width?(X=G.width,U=G.height):z&&(X=z.realWidth,U=z.realHeight),G.type==="Container"&&(X===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}X!==0&&U!==0&&(G.input=h(G,new S(0,0,X,U),D),this.queueForInsertion(G))}return this},setHitAreaRectangle:function(O,D,B,G,z,X){X===void 0&&(X=M);var U=new S(D,B,G,z);return this.setHitArea(O,U,X)},setHitAreaTriangle:function(O,D,B,G,z,X,U,V){V===void 0&&(V=L);var N=new A(D,B,G,z,X,U);return this.setHitArea(O,N,V)},enableDebug:function(O,D){D===void 0&&(D=65280);var B=O.input;if(!B||!B.hitArea)return this;var G=B.hitArea,z=G.type,X=B.hitAreaDebug,U=this.systems.add,V=this.systems.updateList;X&&(V.remove(X),X.destroy(),X=null);var N=0,W=0;switch(z){case g.CIRCLE:X=U.arc(0,0,G.radius),N=G.x-G.radius,W=G.y-G.radius;break;case g.ELLIPSE:X=U.ellipse(0,0,G.width,G.height),N=G.x-G.width/2,W=G.y-G.height/2;break;case g.LINE:X=U.line(0,0,G.x1,G.y1,G.x2,G.y2);break;case g.POLYGON:X=U.polygon(0,0,G.points);break;case g.RECTANGLE:X=U.rectangle(0,0,G.width,G.height),N=G.x,W=G.y;break;case g.TRIANGLE:X=U.triangle(0,0,G.x1,G.y1,G.x2,G.y2,G.x3,G.y3);break}return X&&(X.isFilled=!1,X.strokeColor=D,X.preUpdate=function(){X.setStrokeStyle(1/O.scale,X.strokeColor),X.setDisplayOrigin(O.displayOriginX,O.displayOriginY);var F=O.x,I=O.y,k=O.rotation,Y=O.scaleX,H=O.scaleY;if(O.parentContainer){var K=O.getWorldTransformMatrix();F=K.tx,I=K.ty,k=K.rotation,Y=K.scaleX,H=K.scaleY}X.setRotation(k),X.setScale(Y,H),X.setPosition(F+N*Y,I+W*H),X.setScrollFactor(O.scrollFactorX,O.scrollFactorY),X.setDepth(O.depth)},V.add(X),B.hitAreaDebug=X),this},removeDebug:function(O){var D=O.input;if(D&&D.hitAreaDebug){var B=D.hitAreaDebug;this.systems.updateList.remove(B),B.destroy(),D.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(O){return this.pollRate=O,this._pollTimer=0,this},setGlobalTopOnly:function(O){return this.manager.globalTopOnly=O,this},setTopOnly:function(O){return this.topOnly=O,this},sortGameObjects:function(O,D){if(O.length<2||!D.camera)return O;var B=D.camera.renderList;return O.sort(function(G,z){var X=Math.max(B.indexOf(G),0),U=Math.max(B.indexOf(z),0);return U-X})},sortDropZones:function(O){return O.length<2?O:(this.scene.sys.depthSort(),O.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(O,D){if(!O.parentContainer&&!D.parentContainer)return this.displayList.getIndex(D)-this.displayList.getIndex(O);if(O.parentContainer===D.parentContainer)return D.parentContainer.getIndex(D)-O.parentContainer.getIndex(O);if(O.parentContainer===D)return-1;if(D.parentContainer===O)return 1;for(var B=O.getIndexList(),G=D.getIndexList(),z=Math.min(B.length,G.length),X=0;X<z;X++){var U=B[X],V=G[X];if(U!==V)return V-U}return G.length-B.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(O){return this.manager.addPointer(O)},setDefaultCursor:function(O){return this.manager.setDefaultCursor(O),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var O=0;O<10;O++)this._drag[O]=[],this._over[O]=[];this.removeAllListeners();var D=this.manager;D.canvas.style.cursor=D.defaultCursor;var B=this.systems.events;B.off(b.TRANSITION_START,this.transitionIn,this),B.off(b.TRANSITION_OUT,this.transitionOut,this),B.off(b.TRANSITION_COMPLETE,this.transitionComplete,this),B.off(b.PRE_UPDATE,this.preUpdate,this),D.events.off(c.GAME_OUT,this.onGameOut,this),D.events.off(c.GAME_OVER,this.onGameOver,this),B.off(b.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var O=this.manager.pointers,D=0;D<O.length;D++)O[D].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(b.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});P.register("InputPlugin",R,"input"),a.exports=R},63399:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),y={},d={};d.register=function(l,h,r,n,v){y[l]={plugin:h,mapping:r,settingsKey:n,configKey:v}},d.getPlugin=function(l){return y[l]},d.install=function(l){var h=l.scene.sys,r=h.settings.input,n=h.game.config;for(var v in y){var o=y[v].plugin,c=y[v].mapping,m=y[v].settingsKey,p=y[v].configKey;u(r,m,n[p])&&(l[c]=new o(l))}},d.remove=function(l){y.hasOwnProperty(l)&&delete y[l]},a.exports=d},40398:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(90447),y=e(56694),d=e(53996),l=e(88456),h=e(44521),r=e(93736),n=e(36580),v=new y({initialize:function(c,m){this.manager=c,this.id=m,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=m===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(o){var c=o.getWorldPoint(this.x,this.y);return this.worldX=c.x,this.worldY=c.y,this},positionToCamera:function(o,c){return o.getWorldPoint(this.x,this.y,c)},updateMotion:function(){var o=this.position.x,c=this.position.y,m=this.midPoint.x,p=this.midPoint.y;if(!(o===m&&c===p)){var g=h(this.motionFactor,m,o),x=h(this.motionFactor,p,c);l(g,o,.1)&&(g=o),l(x,c,.1)&&(x=c),this.midPoint.set(g,x);var E=o-g,P=c-x;this.velocity.set(E,P),this.angle=u(g,x,o,c),this.distance=Math.sqrt(E*E+P*P)}},up:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=o.timeStamp,this.wasTouch=!1)},down:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&o.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=o.timeStamp),this.wasTouch=!1},move:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.locked&&(this.movementX=o.movementX||o.mozMovementX||o.webkitMovementX||0,this.movementY=o.movementY||o.mozMovementY||o.webkitMovementY||0),this.moveTime=o.timeStamp,this.wasTouch=!1},wheel:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.deltaX=o.deltaX,this.deltaY=o.deltaY,this.deltaZ=o.deltaZ,this.wasTouch=!1},touchstart:function(o,c){o.pointerId&&(this.pointerId=o.pointerId),this.identifier=o.identifier,this.target=o.target,this.active=!0,this.buttons=1,this.event=c,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=c.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(o,c){this.event=c,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.moveTime=c.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(o,c){this.buttons=0,this.event=c,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(o,c){this.buttons=0,this.event=c,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(o,c){o===void 0&&(o=10),c===void 0&&(c=[]);for(var m=this.prevPosition.x,p=this.prevPosition.y,g=this.position.x,x=this.position.y,E=0;E<o;E++){var P=1/o*E;c[E]={x:h(P,m,g),y:h(P,p,x)}}return c},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},time:{get:function(){return this.event?this.event.timeStamp:0}}});a.exports=v},72687:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};a.exports=T},14874:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},54168:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},526:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragend"},81623:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragenter"},94472:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drag"},9304:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragleave"},34265:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragover"},50151:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragstart"},98134:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drop"},56773:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectdown"},45824:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragend"},39578:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragenter"},72072:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drag"},82569:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragleave"},70833:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragover"},81442:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragstart"},32936:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drop"},99658:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectmove"},60515:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectout"},55254:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectover"},34782:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerdown"},41769:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointermove"},65588:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerout"},61640:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerover"},49342:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerup"},82662:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="wheel"},13058:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectup"},52426:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameobjectwheel"},78072:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameout"},1545:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="gameover"},67137:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},27678:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="process"},22257:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},90379:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerlockchange"},88909:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerdown"},36548:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerdownoutside"},18483:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointermove"},22355:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerout"},7997:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerover"},66318:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerup"},94812:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pointerupoutside"},37310:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="wheel"},24196:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="preupdate"},27053:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="shutdown"},29413:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},25165:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},33963:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h){this.pad=l,this.events=l.events,this.index=h,this.value=0,this.threshold=.1},update:function(d){this.value=d},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});a.exports=y},21274:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(43200),d=new u({initialize:function(h,r){this.pad=h,this.events=h.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var h=this.pad,r=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(y.BUTTON_DOWN,h,this,l),this.pad.emit(y.GAMEPAD_BUTTON_DOWN,r,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(y.BUTTON_UP,h,this,l),this.pad.emit(y.GAMEPAD_BUTTON_UP,r,l,this))},destroy:function(){this.pad=null,this.events=null}});a.exports=d},75956:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70848),y=e(21274),d=e(56694),l=e(6659),h=e(93736),r=new d({Extends:l,initialize:function(v,o){l.call(this),this.manager=v,this.pad=o,this.id=o.id,this.index=o.index;for(var c=[],m=0;m<o.buttons.length;m++)c.push(new y(this,m));this.buttons=c;var p=[];for(m=0;m<o.axes.length;m++)p.push(new u(this,m));this.axes=p,this.vibration=o.vibrationActuator;var g={value:0,pressed:!1};this._LCLeft=c[14]?c[14]:g,this._LCRight=c[15]?c[15]:g,this._LCTop=c[12]?c[12]:g,this._LCBottom=c[13]?c[13]:g,this._RCLeft=c[2]?c[2]:g,this._RCRight=c[1]?c[1]:g,this._RCTop=c[3]?c[3]:g,this._RCBottom=c[0]?c[0]:g,this._FBLeftTop=c[4]?c[4]:g,this._FBLeftBottom=c[6]?c[6]:g,this._FBRightTop=c[5]?c[5]:g,this._FBRightBottom=c[7]?c[7]:g;var x={value:0};this._HAxisLeft=p[0]?p[0]:x,this._VAxisLeft=p[1]?p[1]:x,this._HAxisRight=p[2]?p[2]:x,this._VAxisRight=p[3]?p[3]:x,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var v,o=this.buttons,c=n.buttons,m=o.length;for(v=0;v<m;v++)o[v].update(c[v].value);var p=this.axes,g=n.axes;for(m=p.length,v=0;v<m;v++)p[v].update(g[v]);m>=2&&(this.leftStick.set(p[0].getValue(),p[1].getValue()),m>=4&&this.rightStick.set(p[2].getValue(),p[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var n;for(n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});a.exports=r},1379:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(43200),l=e(75956),h=e(10850),r=e(63399),n=e(33963),v=new u({Extends:y,initialize:function(c){y.call(this),this.scene=c.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=c,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,c.pluginEvents.once(n.BOOT,this.boot,this),c.pluginEvents.on(n.START,this.start,this)},boot:function(){var o=this.scene.sys.game,c=this.settings.input,m=o.config;this.enabled=h(c,"gamepad",m.inputGamepad)&&o.device.input.gamepads,this.target=h(c,"gamepad.target",m.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var o=this,c=this.target,m=function(p){p.defaultPrevented||!o.isActive()||(o.refreshPads(),o.queue.push(p))};this.onGamepadHandler=m,c.addEventListener("gamepadconnected",m,!1),c.addEventListener("gamepaddisconnected",m,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].removeAllListeners()},disconnectAll:function(){for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].pad.connected=!1},refreshPads:function(){var o=navigator.getGamepads();if(!o)this.disconnectAll();else for(var c=this.gamepads,m=0;m<o.length;m++){var p=o[m];if(!!p){var g=p.id,x=p.index,E=c[x];if(E)E.id!==g?(E.destroy(),c[x]=new l(this,p)):E.update(p);else{var P=new l(this,p);c[x]=P,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=P):this._pad3=P:this._pad2=P:this._pad1=P}}}},getAll:function(){for(var o=[],c=this.gamepads,m=0;m<c.length;m++)c[m]&&o.push(c[m]);return o},getPad:function(o){for(var c=this.gamepads,m=0;m<c.length;m++)if(c[m]&&c[m].index===o)return c[m]},update:function(){if(!!this.enabled){this.refreshPads();var o=this.queue.length;if(o!==0)for(var c=this.queue.splice(0,o),m=0;m<o;m++){var p=c[m],g=this.getPad(p.gamepad.index);p.type==="gamepadconnected"?this.emit(d.CONNECTED,g,p):p.type==="gamepaddisconnected"&&this.emit(d.DISCONNECTED,g,p)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var o=0;o<this.gamepads.length;o++)this.gamepads[o]&&this.gamepads[o].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),a.exports=v},33171:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="down"},36635:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="up"},85724:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="connected"},55832:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="disconnected"},772:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="down"},33608:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="up"},43200:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72687),y=e(98611),d={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};d=y(!1,d,u),a.exports=d},71064:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),y=e(56694),d=e(97081),l=e(33963),h=e(11873),r=e(72283),n=new y({initialize:function(o){this.manager=o,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,o.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(d.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(l.MANAGER_PROCESS);var m=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!m&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}},this.onKeyUp=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(l.MANAGER_PROCESS);var m=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!m&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}};var o=this.target;o&&(o.addEventListener("keydown",this.onKeyDown,!1),o.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var o=this.captures,c=0;c<v.length;c++){var m=v[c];typeof m=="string"&&(m=h[m.trim().toUpperCase()]),o.indexOf(m)===-1&&o.push(m)}this.preventDefault=o.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var o=this.captures,c=0;c<v.length;c++){var m=v[c];typeof m=="string"&&(m=h[m.toUpperCase()]),u(o,m)}this.preventDefault=o.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(d.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});a.exports=n},89666:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(94030),l=e(97081),h=e(10850),r=e(33963),n=e(63399),v=e(50165),o=e(11873),c=e(95625),m=e(48044),p=e(7599),g=e(84314),x=new u({Extends:y,initialize:function(P){y.call(this),this.game=P.systems.game,this.scene=P.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=P,this.manager=P.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,P.pluginEvents.once(r.BOOT,this.boot,this),P.pluginEvents.on(r.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=h(E,"keyboard",!0);var P=h(E,"keyboard.capture",null);P&&this.addCaptures(P),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:o.UP,down:o.DOWN,left:o.LEFT,right:o.RIGHT,space:o.SPACE,shift:o.SHIFT})},addKeys:function(E,P,S){P===void 0&&(P=!0),S===void 0&&(S=!1);var M={};if(typeof E=="string"){E=E.split(",");for(var b=0;b<E.length;b++){var A=E[b].trim();A&&(M[A]=this.addKey(A,P,S))}}else for(var L in E)M[L]=this.addKey(E[L],P,S);return M},addKey:function(E,P,S){P===void 0&&(P=!0),S===void 0&&(S=!1);var M=this.keys;if(E instanceof v){var b=M.indexOf(E);return b>-1?M[b]=E:M[E.keyCode]=E,P&&this.addCapture(E.keyCode),E.setEmitOnRepeat(S),E}return typeof E=="string"&&(E=o[E.toUpperCase()]),M[E]||(M[E]=new v(this,E),P&&this.addCapture(E),M[E].setEmitOnRepeat(S)),M[E]},removeKey:function(E,P,S){P===void 0&&(P=!1),S===void 0&&(S=!1);var M=this.keys,b;if(E instanceof v){var A=M.indexOf(E);A>-1&&(b=this.keys[A],this.keys[A]=void 0)}else typeof E=="string"&&(E=o[E.toUpperCase()]);return M[E]&&(b=M[E],M[E]=void 0),b&&(b.plugin=null,S&&this.removeCapture(b.keyCode),P&&b.destroy()),this},removeAllKeys:function(E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);for(var S=this.keys,M=0;M<S.length;M++){var b=S[M];b&&(S[M]=void 0,P&&this.removeCapture(b.keyCode),E&&b.destroy())}return this},createCombo:function(E,P){return new c(this,E,P)},checkDown:function(E,P){if(P===void 0&&(P=0),this.enabled&&E.isDown){var S=g(this.time-E.timeDown,P);if(S>E._tick)return E._tick=S,!0}return!1},update:function(){var E=this.manager.queue,P=E.length;if(!(!this.isActive()||P===0))for(var S=this.keys,M=0;M<P;M++){var b=E[M],A=b.keyCode,L=S[A],R=!1;b.cancelled===void 0&&(b.cancelled=0,b.stopImmediatePropagation=function(){b.cancelled=1},b.stopPropagation=function(){b.cancelled=-1}),b.cancelled!==-1&&(A===this.prevCode&&b.timeStamp===this.prevTime&&b.type===this.prevType||(this.prevCode=A,this.prevTime=b.timeStamp,this.prevType=b.type,b.type==="keydown"?(L&&(R=L.isDown,L.onDown(b)),!b.cancelled&&(!L||!R)&&(m[A]&&this.emit(d.KEY_DOWN+m[A],b),b.cancelled||this.emit(d.ANY_KEY_DOWN,b))):(L&&L.onUp(b),b.cancelled||(m[A]&&this.emit(d.KEY_UP+m[A],b),b.cancelled||this.emit(d.ANY_KEY_UP,b))),b.cancelled===1&&(b.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,P=0;P<E.length;P++)E[P]&&E[P].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,P=0;P<E.length;P++)E[P]&&E[P].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),a.exports=x},60258:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u.timeLastMatched=e.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};a.exports=T},95625:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(94030),d=e(72632),l=e(2544),h=e(88754),r=new u({initialize:function(v,o,c){if(c===void 0&&(c={}),o.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var m=0;m<o.length;m++){var p=o[m];typeof p=="string"?this.keyCodes.push(p.toUpperCase().charCodeAt(0)):typeof p=="number"?this.keyCodes.push(p):p.hasOwnProperty("keyCode")&&this.keyCodes.push(p.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=d(c,"resetOnWrongKey",!0),this.maxKeyDelay=d(c,"maxKeyDelay",0),this.resetOnMatch=d(c,"resetOnMatch",!1),this.deleteOnMatch=d(c,"deleteOnMatch",!1);var g=this,x=function(E){if(!(g.matched||!g.enabled)){var P=l(E,g);P&&(g.manager.emit(y.COMBO_MATCH,g,E),g.resetOnMatch?h(g):g.deleteOnMatch&&g.destroy())}};this.onKeyDown=x,this.manager.on(y.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(y.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});a.exports=r},2544:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60258),y=function(d,l){if(l.matched)return!0;var h=!1,r=!1;if(d.keyCode===l.current)if(l.index>0&&l.maxKeyDelay>0){var n=l.timeLastMatched+l.maxKeyDelay;d.timeStamp<=n&&(r=!0,h=u(d,l))}else r=!0,h=u(d,l);return!r&&l.resetOnWrongKey&&(l.index=0,l.current=l.keyCodes[0]),h&&(l.timeLastMatched=d.timeStamp,l.matched=!0,l.timeMatched=d.timeStamp),h};a.exports=y},88754:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};a.exports=T},5044:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keydown"},40813:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keyup"},89319:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keycombomatch"},43267:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="down"},78595:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keydown-"},30056:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="keyup-"},81939:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="up"},94030:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=50);var y=e.plugin.game.loop.time-e.timeDown;return e.isDown&&y<u};a.exports=T},42460:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justDown?(e._justDown=!1,!0):!1};a.exports=T},53162:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justUp?(e._justUp=!1,!0):!1};a.exports=T},50165:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(94030),l=new u({Extends:y,initialize:function(r,n){y.call(this),this.plugin=r,this.keyCode=n,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(d.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(d.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(d.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});a.exports=l},11873:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};a.exports=T},48044:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(11873),y={};for(var d in u)y[u[d]]=d;a.exports=y},70331:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=50);var y=e.plugin.game.loop.time-e.timeUp;return e.isUp&&y<u};a.exports=T},7905:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(90185),d=e(33963),l=e(72283),h=new u({initialize:function(n){this.manager=n,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,n.events.once(d.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(y.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){y.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(!!r){var n=this,v=this.manager,o=v.canvas,c=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&(v.onMouseMove(p),n.preventDefaultMove&&p.preventDefault())},this.onMouseDown=function(p){c&&window.focus(),!p.defaultPrevented&&n.enabled&&v&&v.enabled&&(v.onMouseDown(p),n.preventDefaultDown&&p.target===o&&p.preventDefault())},this.onMouseDownWindow=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&p.target!==o&&v.onMouseDown(p)},this.onMouseUp=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&(v.onMouseUp(p),n.preventDefaultUp&&p.target===o&&p.preventDefault())},this.onMouseUpWindow=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&p.target!==o&&v.onMouseUp(p)},this.onMouseOver=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&v.setCanvasOver(p)},this.onMouseOut=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&v.setCanvasOut(p)},this.onMouseWheel=function(p){!p.defaultPrevented&&n.enabled&&v&&v.enabled&&v.onMouseWheel(p),n.preventDefaultWheel&&p.target===o&&p.preventDefault()};var m={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,m),r.addEventListener("mouseout",this.onMouseOut,m),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,m),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,m),window.top.addEventListener("mouseup",this.onMouseUpWindow,m)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,m),window.addEventListener("mouseup",this.onMouseUpWindow,m),this.isTop=!1}y.pointerLock&&(this.pointerLockChange=function(p){var g=n.target;n.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,v.onPointerLockChange(p)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),y.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});a.exports=h},11343:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={MouseManager:e(7905)}},37579:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(33963),d=e(72283),l=new u({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=d,this.onTouchStartWindow=d,this.onTouchMove=d,this.onTouchEnd=d,this.onTouchEndWindow=d,this.onTouchCancel=d,this.onTouchCancelWindow=d,this.isTop=!0,r.events.once(y.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(!!h){var r=this,n=this.manager,v=n.canvas,o=window&&window.focus&&n.game.config.autoFocus;this.onTouchMove=function(g){!g.defaultPrevented&&r.enabled&&n&&n.enabled&&(n.onTouchMove(g),r.capture&&g.cancelable&&g.preventDefault())},this.onTouchStart=function(g){o&&window.focus(),!g.defaultPrevented&&r.enabled&&n&&n.enabled&&(n.onTouchStart(g),r.capture&&g.cancelable&&g.target===v&&g.preventDefault())},this.onTouchStartWindow=function(g){!g.defaultPrevented&&r.enabled&&n&&n.enabled&&g.target!==v&&n.onTouchStart(g)},this.onTouchEnd=function(g){!g.defaultPrevented&&r.enabled&&n&&n.enabled&&(n.onTouchEnd(g),r.capture&&g.cancelable&&g.target===v&&g.preventDefault())},this.onTouchEndWindow=function(g){!g.defaultPrevented&&r.enabled&&n&&n.enabled&&g.target!==v&&n.onTouchEnd(g)},this.onTouchCancel=function(g){!g.defaultPrevented&&r.enabled&&n&&n.enabled&&(n.onTouchCancel(g),r.capture&&g.preventDefault())},this.onTouchCancelWindow=function(g){!g.defaultPrevented&&r.enabled&&n&&n.enabled&&n.onTouchCancel(g)};var c=this.capture,m={passive:!0},p={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,c?p:m),h.addEventListener("touchmove",this.onTouchMove,c?p:m),h.addEventListener("touchend",this.onTouchEnd,c?p:m),h.addEventListener("touchcancel",this.onTouchCancel,c?p:m),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,p),window.top.addEventListener("touchend",this.onTouchEndWindow,p),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,p)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,p),window.addEventListener("touchend",this.onTouchEndWindow,p),window.addEventListener("touchcancel",this.onTouchCancelWindow,p),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});a.exports=l},77423:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={TouchManager:e(37579)}},98035:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(683),l=e(72632),h=e(30750),r=e(43531),n=e(88490),v=e(33868),o=new u({initialize:function(m,p){if(this.loader=m,this.cache=l(p,"cache",!1),this.type=l(p,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=l(p,"key",!1);var g=this.key;if(m.prefix&&m.prefix!==""&&(this.key=m.prefix+g),!this.key)throw new Error("Invalid File key: "+this.key);var x=l(p,"url");x===void 0?x=m.path+g+"."+l(p,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(x=m.path+x),this.url=x,this.src="",this.xhrSettings=v(l(p,"responseType",void 0)),l(p,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,l(p,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?y.FILE_POPULATED:y.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(p,"config",{}),this.multiFile,this.linkFile},setLink:function(c){this.linkFile=c,c.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===y.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=y.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=n(this,this.loader.xhr))},onLoad:function(c,m){var p=c.responseURL&&this.loader.localSchemes.some(function(E){return c.responseURL.indexOf(E)===0}),g=p&&m.target.status===0,x=!(m.target&&m.target.status!==200)||g;c.readyState===4&&c.status>=400&&c.status<=599&&(x=!1),this.state=y.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=y.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=y.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=y.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(c){if(this.state!==y.FILE_PENDING_DESTROY){c===void 0&&(c=this.data);var m=this.key,p=this.type;this.loader.emit(d.FILE_COMPLETE,m,p,c),this.loader.emit(d.FILE_KEY_COMPLETE+p+"-"+m,m,p,c),this.loader.flagForRemoval(this),this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});o.createObjectURL=function(c,m,p){if(typeof URL=="function")c.src=URL.createObjectURL(m);else{var g=new FileReader;g.onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(m.type||p)+";base64,"+g.result.split(",")[1]},g.onerror=c.onerror,g.readAsDataURL(m)}},o.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},a.exports=o},76846:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={install:function(u){for(var y in T)u[y]=T[y]},register:function(u,y){T[u]=y},destroy:function(){T={}}};a.exports=e},30750:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:u+e.url:!1};a.exports=T},67285:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(58403),l=e(6659),h=e(683),r=e(76846),n=e(72632),v=e(10850),o=e(91963),c=e(7599),m=e(33868),p=new u({Extends:l,initialize:function(x){l.call(this);var E=x.sys.game.config,P=x.sys.settings.loader;this.scene=x,this.systems=x.sys,this.cacheManager=x.sys.cache,this.textureManager=x.sys.textures,this.sceneManager=x.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(P,"baseURL",E.loaderBaseURL)),this.setPath(n(P,"path",E.loaderPath)),this.setPrefix(n(P,"prefix",E.loaderPrefix)),this.maxParallelDownloads=n(P,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=m(n(P,"responseType",E.loaderResponseType),n(P,"async",E.loaderAsync),n(P,"user",E.loaderUser),n(P,"password",E.loaderPassword),n(P,"timeout",E.loaderTimeout),n(P,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=n(P,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=n(P,"imageLoadType",E.loaderImageLoadType),this.localSchemes=n(P,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new d,this.inflight=new d,this.queue=new d,this._deleteQueue=new d,this.totalFailed=0,this.totalComplete=0,this.state=y.LOADER_IDLE,this.multiKeyIndex=0,x.sys.events.once(c.BOOT,this.boot,this),x.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++){var E=g[x];this.keyExists(E)||(this.list.set(E),this.emit(h.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var x=g.hasCacheConflict();return x||this.list.iterate(function(E){if(E.type===g.type&&E.key===g.key)return x=!0,!1}),!x&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===g.type&&E.key===g.key)return x=!0,!1}),this.queue.iterate(function(E){if(E.type===g.type&&E.key===g.key)return x=!0,!1})),x},addPack:function(g,x){if(typeof x=="string"){var E=v(g,x);E&&(g={packKey:E})}var P=0,S=this.baseURL,M=this.path,b=this.prefix;for(var A in g)if(!!Object.prototype.hasOwnProperty.call(g,A)){var L=g[A],R=n(L,"baseURL",S),O=n(L,"path",M),D=n(L,"prefix",b),B=n(L,"files",null),G=n(L,"defaultType","void");if(Array.isArray(B)){this.setBaseURL(R),this.setPath(O),this.setPrefix(D);for(var z=0;z<B.length;z++){var X=B[z],U=X.hasOwnProperty("type")?X.type:G;this[U]&&(this[U](X),P++)}}}return this.setBaseURL(S),this.setPath(M),this.setPrefix(b),P>0},isLoading:function(){return this.state===y.LOADER_LOADING||this.state===y.LOADER_PROCESSING},isReady:function(){return this.state===y.LOADER_IDLE||this.state===y.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=y.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===y.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===y.FILE_POPULATED||g.state===y.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,x){!this.inflight||(this.inflight.delete(g),this.updateProgress(),x?(this.totalComplete++,this.queue.set(g),this.emit(h.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(h.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===y.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===y.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&(g.multiFile.addToCache(),g.multiFile.pendingDestroy()):(g.addToCache(),g.pendingDestroy())),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=y.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,x){return this.save(JSON.stringify(g),x)},save:function(g,x,E){x===void 0&&(x="file.json"),E===void 0&&(E="application/json");var P=new Blob([g],{type:E}),S=URL.createObjectURL(P),M=document.createElement("a");return M.download=x,M.textContent="Download "+x,M.href=S,M.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,x=this.systems.settings.loader;this.setBaseURL(n(x,"baseURL",g.loaderBaseURL)),this.setPath(n(x,"path",g.loaderPath)),this.setPrefix(n(x,"prefix",g.loaderPrefix)),this.state=y.LOADER_IDLE},shutdown:function(){this.reset(),this.state=y.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=y.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});o.register("Loader",p,"load"),a.exports=p},43531:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),y=e(33868),d=function(l,h){var r=l===void 0?y():u({},l);if(h)for(var n in h)h[n]!==void 0&&(r[n]=h[n]);return r};a.exports=d},45176:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(683),l=new u({initialize:function(r,n,v,o){var c=[];o.forEach(function(p){p&&c.push(p)}),this.loader=r,this.type=n,this.key=v,this.multiKeyIndex=r.multiKeyIndex++,this.files=c,this.state=y.FILE_PENDING,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=r.baseURL,this.path=r.path,this.prefix=r.prefix;for(var m=0;m<c.length;m++)c[m].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var r=this.files.indexOf(h);r!==-1&&this.pending--},onFileFailed:function(h){var r=this.files.indexOf(h);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==y.FILE_PENDING_DESTROY){var h=this.key,r=this.type;this.loader.emit(d.FILE_COMPLETE,h,r),this.loader.emit(d.FILE_KEY_COMPLETE+r+"-"+h,h,r),this.loader.flagForRemoval(this);for(var n=0;n<this.files.length;n++)this.files[n].pendingDestroy();this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});a.exports=l},88490:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(43531),y=function(d,l){var h=u(l,d.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",d.src,h.async,h.user,h.password),r.responseType=d.xhrSettings.responseType,r.timeout=h.timeout,h.headers)for(var n in h.headers)r.setRequestHeader(n,h.headers[n]);return h.header&&h.headerValue&&r.setRequestHeader(h.header,h.headerValue),h.requestedWith&&r.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&r.overrideMimeType(h.overrideMimeType),h.withCredentials&&(r.withCredentials=!0),r.onload=d.onLoad.bind(d,r),r.onerror=d.onError.bind(d,r),r.onprogress=d.onProgress.bind(d),r.send(),r};a.exports=y},33868:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l,h){return e===void 0&&(e=""),u===void 0&&(u=!0),y===void 0&&(y=""),d===void 0&&(d=""),l===void 0&&(l=0),h===void 0&&(h=!1),{responseType:e,async:u,user:y,password:d,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};a.exports=T},12117:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};a.exports=T},7398:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addfile"},52187:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},36627:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="filecomplete"},81925:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="filecomplete-"},29774:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loaderror"},20943:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="load"},74693:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="fileprogress"},71176:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postprocess"},88984:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="progress"},72753:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},683:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(70806),l=e(683),h=new u({Extends:d,initialize:function(n,v,o,c,m){d.call(this,n,v,o,c,m),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),d.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});y.register("animation",function(r,n,v,o){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new h(this,r[c]));else this.addFile(new h(this,r,n,o,v));return this}),a.exports=h},31648:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42927),h=e(42911),r=e(70806),n=e(45176),v=new u({Extends:n,initialize:function(c,m,p,g,x,E){var P,S;if(h(m)){var M=m;m=d(M,"key"),P=new l(c,{key:m,url:d(M,"textureURL"),extension:d(M,"textureExtension","png"),normalMap:d(M,"normalMap"),xhrSettings:d(M,"textureXhrSettings")}),S=new r(c,{key:m,url:d(M,"atlasURL"),extension:d(M,"atlasExtension","json"),xhrSettings:d(M,"atlasXhrSettings")})}else P=new l(c,m,p,x),S=new r(c,m,g,E);P.linkFile?n.call(this,c,"atlasjson",m,[P,S,P.linkFile]):n.call(this,c,"atlasjson",m,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],c=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,c.data,m),c.addToCache(),this.complete=!0}}});y.register("aseprite",function(o,c,m,p,g){var x;if(Array.isArray(o))for(var E=0;E<o.length;E++)x=new v(this,o[E]),this.addFile(x.files);else x=new v(this,o,c,m,p,g),this.addFile(x.files);return this}),a.exports=v},73152:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42927),h=e(42911),r=e(70806),n=e(45176),v=new u({Extends:n,initialize:function(c,m,p,g,x,E){var P,S;if(h(m)){var M=m;m=d(M,"key"),P=new l(c,{key:m,url:d(M,"textureURL"),extension:d(M,"textureExtension","png"),normalMap:d(M,"normalMap"),xhrSettings:d(M,"textureXhrSettings")}),S=new r(c,{key:m,url:d(M,"atlasURL"),extension:d(M,"atlasExtension","json"),xhrSettings:d(M,"atlasXhrSettings")})}else P=new l(c,m,p,x),S=new r(c,m,g,E);P.linkFile?n.call(this,c,"atlasjson",m,[P,S,P.linkFile]):n.call(this,c,"atlasjson",m,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],c=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,c.data,m),this.complete=!0}}});y.register("atlas",function(o,c,m,p,g){var x;if(Array.isArray(o))for(var E=0;E<o.length;E++)x=new v(this,o[E]),this.addFile(x.files);else x=new v(this,o,c,m,p,g),this.addFile(x.files);return this}),a.exports=v},24616:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42927),h=e(42911),r=e(45176),n=e(15297),v=new u({Extends:r,initialize:function(c,m,p,g,x,E){var P,S;if(h(m)){var M=m;m=d(M,"key"),P=new l(c,{key:m,url:d(M,"textureURL"),extension:d(M,"textureExtension","png"),normalMap:d(M,"normalMap"),xhrSettings:d(M,"textureXhrSettings")}),S=new n(c,{key:m,url:d(M,"atlasURL"),extension:d(M,"atlasExtension","xml"),xhrSettings:d(M,"atlasXhrSettings")})}else P=new l(c,m,p,x),S=new n(c,m,g,E);P.linkFile?r.call(this,c,"atlasxml",m,[P,S,P.linkFile]):r.call(this,c,"atlasxml",m,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],c=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(o.key,o.data,c.data,m),this.complete=!0}}});y.register("atlasXML",function(o,c,m,p,g){var x;if(Array.isArray(o))for(var E=0;E<o.length;E++)x=new v(this,o[E]),this.addFile(x.files);else x=new v(this,o,c,m,p,g),this.addFile(x.files);return this}),a.exports=v},67448:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(30929),n=e(42911),v=new u({Extends:d,initialize:function(c,m,p,g,x){if(n(m)){var E=m;m=h(E,"key"),g=h(E,"xhrSettings"),x=h(E,"context",x)}var P={type:"audio",cache:c.cacheManager.audio,extension:p.type,responseType:"arraybuffer",key:m,url:p.url,xhrSettings:g,config:{context:x}};d.call(this,c,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var o=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){o.data=c,o.onProcessComplete()},function(c){console.error("Error decoding audio: "+o.key+" - ",c?c.message:null),o.onProcessError()}),this.config.context=null}});v.create=function(o,c,m,p,g){var x=o.systems.game,E=x.config.audio,P=x.device.audio;n(c)&&(m=h(c,"url",[]),p=h(c,"config",{}));var S=v.getAudioURL(x,m);return S?P.webAudio&&!E.disableWebAudio?new v(o,c,S,g,x.sound.context):new r(o,c,S,p):(console.warn('No audio URLs for "%s" matched this device',c),null)},v.getAudioURL=function(o,c){Array.isArray(c)||(c=[c]);for(var m=0;m<c.length;m++){var p=h(c[m],"url",c[m]);if(p.indexOf("blob:")===0||p.indexOf("data:")===0)return{url:p,type:""};var g=p.match(/\.([a-zA-Z0-9]+)($|\?)/);if(g=h(c[m],"type",g?g[1]:"").toLowerCase(),o.device.audio[g])return{url:p,type:g}}return null},l.register("audio",function(o,c,m,p){var g=this.systems.game,x=g.config.audio,E=g.device.audio;if(x.noAudio||!E.webAudio&&!E.audioData)return this;var P;if(Array.isArray(o))for(var S=0;S<o.length;S++)P=v.create(this,o[S]),P&&this.addFile(P);else P=v.create(this,o,c,m,p),P&&this.addFile(P);return this}),a.exports=v},66109:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(67448),y=e(56694),d=e(76846),l=e(72632),h=e(42911),r=e(70806),n=e(45176),v=new y({Extends:n,initialize:function(c,m,p,g,x,E,P){if(h(m)){var S=m;m=l(S,"key"),p=l(S,"jsonURL"),g=l(S,"audioURL"),x=l(S,"audioConfig"),E=l(S,"audioXhrSettings"),P=l(S,"jsonXhrSettings")}var M;if(!g)M=new r(c,m,p,P),n.call(this,c,"audiosprite",m,[M]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=E;else{var b=u.create(c,m,g,x,E);b&&(M=new r(c,m,p,P),n.call(this,c,"audiosprite",m,[b,M]),this.config.resourceLoad=!1)}},onFileComplete:function(o){var c=this.files.indexOf(o);if(c!==-1&&(this.pending--,this.config.resourceLoad&&o.type==="json"&&o.data.hasOwnProperty("resources"))){var m=o.data.resources,p=l(this.config,"audioConfig"),g=l(this.config,"audioXhrSettings"),x=u.create(this.loader,o.key,m,p,g);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],c=this.files[1];o.addToCache(),c.addToCache(),this.complete=!0}}});d.register("audioSprite",function(o,c,m,p,g,x){var E=this.systems.game,P=E.config.audio,S=E.device.audio;if(P&&P.noAudio||!S.webAudio&&!S.audioData)return this;var M;if(Array.isArray(o))for(var b=0;b<o.length;b++)M=new v(this,o[b]),M.files&&this.addFile(M.files);else M=new v(this,o,c,m,p,g,x),M.files&&this.addFile(M.files);return this})},40612:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p,g){var x="bin";if(r(c)){var E=c;c=h(E,"key"),m=h(E,"url"),p=h(E,"xhrSettings"),x=h(E,"extension",x),g=h(E,"dataType",g)}var P={type:"binary",cache:o.cacheManager.binary,extension:x,responseType:"arraybuffer",key:c,url:m,xhrSettings:p,config:{dataType:g}};d.call(this,o,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(v,o,c,m){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new n(this,v[p]));else this.addFile(new n(this,v,o,m,c));return this}),a.exports=n},54565:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42927),h=e(42911),r=e(45176),n=e(31476),v=e(15297),o=new u({Extends:r,initialize:function(m,p,g,x,E,P){var S,M;if(h(p)){var b=p;p=d(b,"key"),S=new l(m,{key:p,url:d(b,"textureURL"),extension:d(b,"textureExtension","png"),normalMap:d(b,"normalMap"),xhrSettings:d(b,"textureXhrSettings")}),M=new v(m,{key:p,url:d(b,"fontDataURL"),extension:d(b,"fontDataExtension","xml"),xhrSettings:d(b,"fontDataXhrSettings")})}else S=new l(m,p,g,E),M=new v(m,p,x,P);S.linkFile?r.call(this,m,"bitmapfont",p,[S,M,S.linkFile]):r.call(this,m,"bitmapfont",p,[S,M])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1];c.addToCache();var p=c.cache.get(c.key),g=n(m.data,c.cache.getFrame(c.key),0,0,p);this.loader.cacheManager.bitmapFont.add(c.key,{data:g,texture:c.key,frame:null}),this.complete=!0}}});y.register("bitmapFont",function(c,m,p,g,x){var E;if(Array.isArray(c))for(var P=0;P<c.length;P++)E=new o(this,c[P]),this.addFile(E.files);else E=new o(this,c,m,p,g,x),this.addFile(E.files);return this}),a.exports=o},99898:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p){var g="css";if(r(c)){var x=c;c=h(x,"key"),m=h(x,"url"),p=h(x,"xhrSettings"),g=h(x,"extension",g)}var E={type:"script",cache:!1,extension:g,responseType:"text",key:c,url:m,xhrSettings:p};d.call(this,o,E)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(v,o,c){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new n(this,v[m]));else this.addFile(new n(this,v,o,c));return this}),a.exports=n},47375:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73152),y=e(40612),d=e(56694),l=e(76846),h=e(72632),r=e(42927),n=e(42911),v=e(70806),o=e(67409),c=e(30657),m=e(80802),p=e(45176),g=e(24904),x=new d({Extends:p,initialize:function(P,S,M,b){if(M.multiAtlasURL){var A=new v(P,{key:S,url:M.multiAtlasURL,xhrSettings:b,config:M});p.call(this,P,"texture",S,[A])}else{var L=M.textureURL.substr(M.textureURL.length-3);M.type||(M.type=L.toLowerCase()==="ktx"?"KTX":"PVR");var R=new y(P,{key:S,url:M.textureURL,extension:L,xhrSettings:b,config:M});if(M.atlasURL){var O=new v(P,{key:S,url:M.atlasURL,xhrSettings:b,config:M});p.call(this,P,"texture",S,[R,O])}else p.call(this,P,"texture",S,[R])}this.config=M},onFileComplete:function(E){var P=this.files.indexOf(E);if(P!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var S=E.data.textures,M=this.config,b=this.loader,A=b.baseURL,L=b.path,R=b.prefix,O=h(M,"multiBaseURL",this.baseURL),D=h(M,"multiPath",this.path),B=h(M,"prefix",this.prefix),G=h(M,"textureXhrSettings");O&&b.setBaseURL(O),D&&b.setPath(D),B&&b.setPrefix(B);for(var z=0;z<S.length;z++){var X=S[z].image,U="CMA"+this.multiKeyIndex+"_"+X,V=new y(b,U,X,G);if(this.addToMultiFile(V),b.addFile(V),S[z].normalMap){var N=new y(b,U,S[z].normalMap,G);N.type="normalMap",V.setLink(N),this.addToMultiFile(N),b.addFile(N)}}b.setBaseURL(A),b.setPath(L),b.setPrefix(R)}}},addToCache:function(){if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var P=this.loader.systems.renderer,S=this.loader.textureManager,M,b=this.files[0],A=this.files[1];if(E.type==="PVR"?M=g(b.data):E.type==="KTX"&&(M=o(b.data)),M&&P.supportsCompressedTexture(E.format,M.internalFormat)){M.format=P.getCompressedTextureName(E.format,M.internalFormat);var L=A&&A.data?A.data:null;S.addCompressedTexture(b.key,M,L)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,P=this.files[0],S=[],M=[],b=[],A=this.loader.systems.renderer,L=this.loader.textureManager,R,O=1;O<this.files.length;O++){var D=this.files[O];if(D.type!=="normalMap")for(var B=D.key.indexOf("_"),G=D.key.substr(B+1),z=D.data,X=0;X<P.data.textures.length;X++){var U=P.data.textures[X];if(U.image===G){E.type==="PVR"?R=g(z):E.type==="KTX"&&(R=o(z)),R&&A.supportsCompressedTexture(E.format,R.internalFormat)&&(R.format=A.getCompressedTextureName(E.format,R.internalFormat),M.push(R),S.push(U),D.linkFile&&b.push(D.linkFile.data));break}}}b.length===0&&(b=void 0),L.addAtlasJSONArray(this.key,M,S,b),this.complete=!0}});l.register("texture",function(E,P,S){var M=this.systems.renderer,b=function(L,R,O,D){var B={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(n(R)){var G=R;R=h(G,"key"),O=h(G,"url"),D=h(G,"xhrSettings")}var z=!1;for(var X in O)if(M.supportsCompressedTexture(X)){var U=O[X];typeof U=="string"?B.textureURL=U:B=c(U,B),B.format=X.toUpperCase(),z=!0;break}if(!z)console.warn("No supported compressed texture format or IMG fallback",R);else if(B.format==="IMG"){var V,N;B.multiAtlasURL?(N=new m(L,R,B.multiAtlasURL,B.multiPath,B.multiBaseURL,D),V=N.files):B.atlasURL?(N=new u(L,R,B.textureURL,B.atlasURL,D),V=N.files):V=new r(L,R,B.textureURL,D),L.addFile(V)}else{var W=new x(L,R,B,D);L.addFile(W.files)}};if(Array.isArray(E))for(var A=0;A<E.length;A++)b(this,E[A]);else b(this,E,P,S);return this}),a.exports=x},46568:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=e(31053),v=new u({Extends:d,initialize:function(c,m,p,g,x){var E="glsl";if(r(m)){var P=m;m=h(P,"key"),p=h(P,"url"),g=h(P,"shaderType","fragment"),x=h(P,"xhrSettings"),E=h(P,"extension",E)}else g===void 0&&(g="fragment");var S={type:"glsl",cache:c.cacheManager.shader,extension:E,responseType:"text",key:m,url:p,config:{shaderType:g},xhrSettings:x};d.call(this,c,S)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o=this.data.split(`
`),c=this.extractBlock(o,0);if(c)for(;c;){var m=this.getShaderName(c.header),p=this.getShaderType(c.header),g=this.getShaderUniforms(c.header),x=c.shader;if(this.cache.has(m)){var E=this.cache.get(m);p==="fragment"?E.fragmentSrc=x:E.vertexSrc=x,E.uniforms||(E.uniforms=g)}else p==="fragment"?this.cache.add(m,new n(m,x,"",g)):this.cache.add(m,new n(m,"",x,g));c=this.extractBlock(o,c.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data))},getShaderName:function(o){for(var c=0;c<o.length;c++){var m=o[c].trim();if(m.substring(0,5)==="name:")return m.substring(5).trim()}return this.key},getShaderType:function(o){for(var c=0;c<o.length;c++){var m=o[c].trim();if(m.substring(0,5)==="type:")return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(o){for(var c={},m=0;m<o.length;m++){var p=o[m].trim();if(p.substring(0,8)==="uniform."){var g=p.indexOf(":");if(g){var x=p.substring(8,g);try{c[x]=JSON.parse(p.substring(g+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return c},extractBlock:function(o,c){for(var m=-1,p=-1,g=-1,x=!1,E=!1,P=[],S=[],M=c;M<o.length;M++){var b=o[M].trim();if(b==="---")if(m===-1)m=M,x=!0;else if(x)p=M,x=!1,E=!0;else{E=!1;break}else x?P.push(b):E&&(S.push(b),g=M)}return!x&&p!==-1?{header:P,shader:S.join(`
`),offset:g}:null}});l.register("glsl",function(o,c,m,p){if(Array.isArray(o))for(var g=0;g<o.length;g++)this.addFile(new v(this,o[g]));else this.addFile(new v(this,o,c,m,p));return this}),a.exports=v},30929:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(683),d=e(98035),l=e(72632),h=e(30750),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p){if(r(c)){var g=c;c=l(g,"key"),p=l(g,"config",p)}var x={type:"audio",cache:o.cacheManager.audio,extension:m.type,key:c,url:m.url,config:p};d.call(this,o,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var o=this.data[v];o.oncanplaythrough=null,o.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var o=v.target;o.oncanplaythrough=null,o.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(y.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var o=0;o<v;o++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+o).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(o=0;o<this.data.length;o++)c=this.data[o],c.src=h(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});a.exports=n},77459:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p){var g="html";if(r(c)){var x=c;c=h(x,"key"),m=h(x,"url"),p=h(x,"xhrSettings"),g=h(x,"extension",g)}var E={type:"text",cache:o.cacheManager.html,extension:g,responseType:"text",key:c,url:m,xhrSettings:p};d.call(this,o,E)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(v,o,c){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new n(this,v[m]));else this.addFile(new n(this,v,o,c));return this}),a.exports=n},9755:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p,g,x){p===void 0&&(p=512),g===void 0&&(g=512);var E="html";if(r(c)){var P=c;c=h(P,"key"),m=h(P,"url"),x=h(P,"xhrSettings"),E=h(P,"extension",E),p=h(P,"width",p),g=h(P,"height",g)}var S={type:"html",cache:o.textureManager,extension:E,responseType:"text",key:c,url:m,xhrSettings:x,config:{width:p,height:g}};d.call(this,o,S)},onProcess:function(){this.state=y.FILE_PROCESSING;var v=this.config.width,o=this.config.height,c=[];c.push('<svg width="'+v+'px" height="'+o+'px" viewBox="0 0 '+v+" "+o+'" xmlns="http://www.w3.org/2000/svg">'),c.push('<foreignObject width="100%" height="100%">'),c.push('<body xmlns="http://www.w3.org/1999/xhtml">'),c.push(this.xhrLoader.responseText),c.push("</body>"),c.push("</foreignObject>"),c.push("</svg>");var m=[c.join(`
`)],p=this;try{var g=new window.Blob(m,{type:"image/svg+xml;charset=utf-8"})}catch{p.state=y.FILE_ERRORED,p.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){d.revokeObjectURL(p.data),p.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(p.data),p.onProcessError()},d.createObjectURL(this.data,g,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("htmlTexture",function(v,o,c,m,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new n(this,v[g]));else this.addFile(new n(this,v,o,c,m,p));return this}),a.exports=n},42927:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=e(30750),v=new u({Extends:d,initialize:function o(c,m,p,g,x){var E="png",P;if(r(m)){var S=m;m=h(S,"key"),p=h(S,"url"),P=h(S,"normalMap"),g=h(S,"xhrSettings"),E=h(S,"extension",E),x=h(S,"frameConfig")}Array.isArray(p)&&(P=p[1],p=p[0]);var M={type:"image",cache:c.textureManager,extension:E,responseType:"blob",key:m,url:p,xhrSettings:g,config:x};if(d.call(this,c,M),P){var b=new o(c,this.key,P,g,x);b.type="normalMap",this.setLink(b),c.addFile(b)}this.useImageElementLoad=c.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var o=this;this.data.onload=function(){d.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(o.data),o.onProcessError()},d.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var o=this.state;this.state=y.FILE_PROCESSING,o===y.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=y.FILE_LOADING,this.src=n(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var o=this;this.data.onload=function(){o.state=y.FILE_LOADED,o.loader.nextFile(o,!0)},this.data.onerror=function(){o.loader.nextFile(o,!1)},this.data.src=this.src}},addToCache:function(){var o=this.linkFile;o?o.state>=y.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,o.data,this.data):this.cache.addImage(this.key,this.data,o.data)):this.cache.addImage(this.key,this.data)}});l.register("image",function(o,c,m){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new v(this,o[p]));else this.addFile(new v(this,o,c,m));return this}),a.exports=v},70806:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(10850),n=e(42911),v=new u({Extends:d,initialize:function(c,m,p,g,x){var E="json";if(n(m)){var P=m;m=h(P,"key"),p=h(P,"url"),g=h(P,"xhrSettings"),E=h(P,"extension",E),x=h(P,"dataKey",x)}var S={type:"json",cache:c.cacheManager.json,extension:E,responseType:"text",key:m,url:p,xhrSettings:g,config:x};d.call(this,c,S),n(p)&&(x?this.data=r(p,x):this.data=p,this.state=y.FILE_POPULATED)},onProcess:function(){if(this.state!==y.FILE_POPULATED){this.state=y.FILE_PROCESSING;try{var o=JSON.parse(this.xhrLoader.responseText)}catch(m){throw this.onProcessError(),m}var c=this.config;typeof c=="string"?this.data=r(o,c,o):this.data=o}this.onProcessComplete()}});l.register("json",function(o,c,m,p){if(Array.isArray(o))for(var g=0;g<o.length;g++)this.addFile(new v(this,o[g]));else this.addFile(new v(this,o,c,p,m));return this}),a.exports=v},80802:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42927),h=e(42911),r=e(70806),n=e(45176),v=new u({Extends:n,initialize:function(c,m,p,g,x,E,P){if(h(m)){var S=m;m=d(S,"key"),d(S,"url",!1)?p=d(S,"url"):p=d(S,"atlasURL"),E=d(S,"xhrSettings"),g=d(S,"path"),x=d(S,"baseURL"),P=d(S,"textureXhrSettings")}var M=new r(c,m,p,E);n.call(this,c,"multiatlas",m,[M]),this.config.path=g,this.config.baseURL=x,this.config.textureXhrSettings=P},onFileComplete:function(o){var c=this.files.indexOf(o);if(c!==-1&&(this.pending--,o.type==="json"&&o.data.hasOwnProperty("textures"))){var m=o.data.textures,p=this.config,g=this.loader,x=g.baseURL,E=g.path,P=g.prefix,S=d(p,"baseURL",this.baseURL),M=d(p,"path",this.path),b=d(p,"prefix",this.prefix),A=d(p,"textureXhrSettings");g.setBaseURL(S),g.setPath(M),g.setPrefix(b);for(var L=0;L<m.length;L++){var R=m[L].image,O="MA"+this.multiKeyIndex+"_"+R,D=new l(g,O,R,A);if(this.addToMultiFile(D),g.addFile(D),m[L].normalMap){var B=new l(g,O,m[L].normalMap,A);B.type="normalMap",D.setLink(B),this.addToMultiFile(B),g.addFile(B)}}g.setBaseURL(x),g.setPath(E),g.setPrefix(P)}},addToCache:function(){if(this.isReadyToProcess()){for(var o=this.files[0],c=[],m=[],p=[],g=1;g<this.files.length;g++){var x=this.files[g];if(x.type!=="normalMap")for(var E=x.key.indexOf("_"),P=x.key.substr(E+1),S=x.data,M=0;M<o.data.textures.length;M++){var b=o.data.textures[M];if(b.image===P){m.push(S),c.push(b),x.linkFile&&p.push(x.linkFile.data);break}}}p.length===0&&(p=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,m,c,p),this.complete=!0}}});y.register("multiatlas",function(o,c,m,p,g){var x;if(Array.isArray(o))for(var E=0;E<o.length;E++)x=new v(this,o[E]),this.addFile(x.files);else x=new v(this,o,c,m,p,g),this.addFile(x.files);return this}),a.exports=v},39034:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42911),h=e(45176),r=e(55188),n=new u({Extends:h,initialize:function(o,c,m,p){var g="js",x=[];if(l(c)){var E=c;c=d(E,"key"),m=d(E,"url"),p=d(E,"xhrSettings"),g=d(E,"extension",g)}Array.isArray(m)||(m=[m]);for(var P=0;P<m.length;P++){var S=new r(o,{key:c+"_"+P.toString(),url:m[P],extension:g,xhrSettings:p});S.onProcess=function(){this.onProcessComplete()},x.push(S)}h.call(this,o,"scripts",c,x)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var o=this.files[v];o.data=document.createElement("script"),o.data.language="javascript",o.data.type="text/javascript",o.data.defer=!1,o.data.text=o.xhrLoader.responseText,document.head.appendChild(o.data)}this.complete=!0}}});y.register("scripts",function(v,o,c){var m;if(Array.isArray(v))for(var p=0;p<v.length;p++)m=new n(this,v[p]),this.addFile(m.files);else m=new n(this,v,o,c),this.addFile(m.files);return this}),a.exports=n},85527:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42911),h=e(45176),r=e(27291),n=e(76799),v=e(86897),o=new u({Extends:h,initialize:function(m,p,g,x,E,P){var S,M,b=m.cacheManager.obj;if(l(p)){var A=p;p=d(A,"key"),S=new v(m,{key:p,type:"obj",cache:b,url:d(A,"url"),extension:d(A,"extension","obj"),xhrSettings:d(A,"xhrSettings"),config:{flipUV:d(A,"flipUV",E)}}),x=d(A,"matURL"),x&&(M=new v(m,{key:p,type:"mat",cache:b,url:x,extension:d(A,"matExtension","mat"),xhrSettings:d(A,"xhrSettings")}))}else S=new v(m,{key:p,url:g,type:"obj",cache:b,extension:"obj",xhrSettings:P,config:{flipUV:E}}),x&&(M=new v(m,{key:p,url:x,type:"mat",cache:b,extension:"mat",xhrSettings:P}));h.call(this,m,"obj",p,[S,M])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1],p=r(c.data,c.config.flipUV);m&&(p.materials=n(m.data)),c.cache.add(c.key,p),this.complete=!0}}});y.register("obj",function(c,m,p,g,x){var E;if(Array.isArray(c))for(var P=0;P<c.length;P++)E=new o(this,c[P]),this.addFile(E.files);else E=new o(this,c,m,p,g,x),this.addFile(E.files);return this}),a.exports=o},3616:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(76846),l=e(70806),h=new u({Extends:l,initialize:function(n,v,o,c,m){l.call(this,n,v,o,c,m),this.type="packfile"},onProcess:function(){if(this.state!==y.FILE_POPULATED&&(this.state=y.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});d.register("pack",function(r,n,v,o){if(Array.isArray(r))for(var c=0;c<r.length;c++)this.addFile(new h(this,r[c]));else this.addFile(new h(this,r,n,o,v));return this}),a.exports=h},12217:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p,g,x){var E="js";if(r(c)){var P=c;c=h(P,"key"),m=h(P,"url"),x=h(P,"xhrSettings"),E=h(P,"extension",E),p=h(P,"start"),g=h(P,"mapping")}var S={type:"plugin",cache:!1,extension:E,responseType:"text",key:c,url:m,xhrSettings:x,config:{start:p,mapping:g}};d.call(this,o,S),typeof m=="function"&&(this.data=m,this.state=y.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,o=this.config,c=h(o,"start",!1),m=h(o,"mapping",null);if(this.state===y.FILE_POPULATED)v.install(this.key,this.data,c,m);else{this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var p=v.install(this.key,window[this.key],c,m);(c||m)&&(this.loader.systems[m]=p,this.loader.scene[m]=p)}this.onProcessComplete()}});l.register("plugin",function(v,o,c,m,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new n(this,v[g]));else this.addFile(new n(this,v,o,c,m,p));return this}),a.exports=n},4474:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p,g){var x="svg";if(r(c)){var E=c;c=h(E,"key"),m=h(E,"url"),p=h(E,"svgConfig",{}),g=h(E,"xhrSettings"),x=h(E,"extension",x)}var P={type:"svg",cache:o.textureManager,extension:x,responseType:"text",key:c,url:m,xhrSettings:g,config:{width:h(p,"width"),height:h(p,"height"),scale:h(p,"scale")}};d.call(this,o,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var v=this.xhrLoader.responseText,o=[v],c=this.config.width,m=this.config.height,p=this.config.scale;t:if(c&&m||p){var g=null,x=new DOMParser;g=x.parseFromString(v,"text/xml");var E=g.getElementsByTagName("svg")[0],P=E.hasAttribute("viewBox"),S=parseFloat(E.getAttribute("width")),M=parseFloat(E.getAttribute("height"));if(!P&&S&&M)E.setAttribute("viewBox","0  0 "+S+" "+M);else if(P&&!S&&!M){var b=E.getAttribute("viewBox").split(/\s+|,/);S=b[2],M=b[3]}if(p)if(S&&M)c=S*p,m=M*p;else break t;E.setAttribute("width",c.toString()+"px"),E.setAttribute("height",m.toString()+"px"),o=[new XMLSerializer().serializeToString(E)]}try{var A=new window.Blob(o,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var L=this,R=!1;this.data.onload=function(){R||d.revokeObjectURL(L.data),L.onProcessComplete()},this.data.onerror=function(){R?L.onProcessError():(R=!0,d.revokeObjectURL(L.data),L.data.src="data:image/svg+xml,"+encodeURIComponent(o.join("")))},d.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("svg",function(v,o,c,m){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new n(this,v[p]));else this.addFile(new n(this,v,o,c,m));return this}),a.exports=n},95171:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p){var g="js";if(r(c)){var x=c;c=h(x,"key"),m=h(x,"url"),p=h(x,"xhrSettings"),g=h(x,"extension",g)}var E={type:"text",extension:g,responseType:"text",key:c,url:m,xhrSettings:p};d.call(this,o,E)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),o=eval;this.loader.sceneManager.add(this.key,o(v)),this.complete=!0}});l.register("sceneFile",function(v,o,c){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new n(this,v[m]));else this.addFile(new n(this,v,o,c));return this}),a.exports=n},82458:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p,g,x){var E="js";if(r(c)){var P=c;c=h(P,"key"),m=h(P,"url"),x=h(P,"xhrSettings"),E=h(P,"extension",E),p=h(P,"systemKey"),g=h(P,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:c,url:m,xhrSettings:x,config:{systemKey:p,sceneKey:g}};d.call(this,o,S),typeof m=="function"&&(this.data=m,this.state=y.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,o=this.config,c=this.key,m=h(o,"systemKey",c),p=h(o,"sceneKey",c);this.state===y.FILE_POPULATED?v.installScenePlugin(m,this.data,p,this.loader.scene,!0):(this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(m,window[this.key],p,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(v,o,c,m,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new n(this,v[g]));else this.addFile(new n(this,v,o,c,m,p));return this}),a.exports=n},55188:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p,g){var x="js";if(r(c)){var E=c;c=h(E,"key"),m=h(E,"url"),p=h(E,"type","script"),g=h(E,"xhrSettings"),x=h(E,"extension",x)}else p===void 0&&(p="script");var P={type:p,cache:!1,extension:x,responseType:"text",key:c,url:m,xhrSettings:g};d.call(this,o,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(v,o,c,m){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new n(this,v[p]));else this.addFile(new n(this,v,o,c,m));return this}),a.exports=n},33536:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(42927),l=new u({Extends:d,initialize:function(r,n,v,o,c){d.call(this,r,n,v,c,o),this.type="spritesheet"},addToCache:function(){this.cache.addSpriteSheet(this.key,this.data,this.config)}});y.register("spritesheet",function(h,r,n,v){if(Array.isArray(h))for(var o=0;o<h.length;o++)this.addFile(new l(this,h[o]));else this.addFile(new l(this,h,r,n,v));return this}),a.exports=l},86897:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=new u({Extends:d,initialize:function(o,c,m,p){var g="text",x="txt",E=o.cacheManager.text;if(r(c)){var P=c;c=h(P,"key"),m=h(P,"url"),p=h(P,"xhrSettings"),x=h(P,"extension",x),g=h(P,"type",g),E=h(P,"cache",E)}var S={type:g,cache:E,extension:x,responseType:"text",key:c,url:m,xhrSettings:p};d.call(this,o,S)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(v,o,c){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new n(this,v[m]));else this.addFile(new n(this,v,o,c));return this}),a.exports=n},58673:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=e(93560),v=new u({Extends:d,initialize:function(c,m,p,g){var x="csv";if(r(m)){var E=m;m=h(E,"key"),p=h(E,"url"),g=h(E,"xhrSettings"),x=h(E,"extension",x)}var P={type:"tilemapCSV",cache:c.cacheManager.tilemap,extension:x,responseType:"text",key:m,url:p,xhrSettings:g};d.call(this,c,P),this.tilemapFormat=n.CSV},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,o)}});l.register("tilemapCSV",function(o,c,m){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new v(this,o[p]));else this.addFile(new v(this,o,c,m));return this}),a.exports=v},98896:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(70806),l=e(93560),h=new u({Extends:d,initialize:function(n,v,o,c){d.call(this,n,v,o,c),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var r={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});y.register("tilemapImpact",function(r,n,v){if(Array.isArray(r))for(var o=0;o<r.length;o++)this.addFile(new h(this,r[o]));else this.addFile(new h(this,r,n,v));return this}),a.exports=h},50563:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(70806),l=e(93560),h=new u({Extends:d,initialize:function(n,v,o,c){d.call(this,n,v,o,c),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var r={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});y.register("tilemapTiledJSON",function(r,n,v){if(Array.isArray(r))for(var o=0;o<r.length;o++)this.addFile(new h(this,r[o]));else this.addFile(new h(this,r,n,v));return this}),a.exports=h},82857:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(76846),d=e(72632),l=e(42927),h=e(42911),r=e(45176),n=e(86897),v=new u({Extends:r,initialize:function(c,m,p,g,x,E){var P,S;if(h(m)){var M=m;m=d(M,"key"),P=new l(c,{key:m,url:d(M,"textureURL"),extension:d(M,"textureExtension","png"),normalMap:d(M,"normalMap"),xhrSettings:d(M,"textureXhrSettings")}),S=new n(c,{key:m,url:d(M,"atlasURL"),extension:d(M,"atlasExtension","txt"),xhrSettings:d(M,"atlasXhrSettings")})}else P=new l(c,m,p,x),S=new n(c,m,g,E);P.linkFile?r.call(this,c,"unityatlas",m,[P,S,P.linkFile]):r.call(this,c,"unityatlas",m,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],c=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(o.key,o.data,c.data,m),this.complete=!0}}});y.register("unityAtlas",function(o,c,m,p,g){var x;if(Array.isArray(o))for(var E=0;E<o.length;E++)x=new v(this,o[E]),this.addFile(x.files);else x=new v(this,o,c,m,p,g),this.addFile(x.files);return this}),a.exports=v},22833:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(30750),r=e(72632),n=e(42911),v=new u({Extends:d,initialize:function(c,m,p,g,x,E,P){g===void 0&&(g="loadeddata"),x===void 0&&(x=!1),E===void 0&&(E=!1),g!=="loadeddata"&&g!=="canplay"&&g!=="canplaythrough"&&(g="loadeddata");var S={type:"video",cache:c.cacheManager.video,extension:p.type,responseType:"blob",key:m,url:p.url,xhrSettings:P,config:{loadEvent:g,asBlob:x,noAudio:E}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),d.call(this,c,S)},onProcess:function(){if(this.state=y.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var o=this.createVideoElement();this.data=o;var c=this;this.data.onloadeddata=function(){c.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(c.data),c.onProcessError()},d.createObjectURL(o,this.xhrLoader.response,""),o.load()},createVideoElement:function(){var o=document.createElement("video");return o.controls=!1,o.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(o.muted=!0,o.defaultMuted=!0,o.setAttribute("autoplay","autoplay")),o.setAttribute("playsinline","playsinline"),o.setAttribute("preload","auto"),o},onVideoLoadHandler:function(o){var c=o.target;c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0),this.data=c,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(o){var c=o.target;c&&(c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var o=this.config.loadEvent;if(this.config.asBlob)d.prototype.load.call(this);else{this.percentComplete=0;var c=this.createVideoElement();c.addEventListener(o,this.onLoadCallback,!0),c.addEventListener("error",this.onErrorCallback,!0),c.src=h(this,this.loader.baseURL),c.load()}}});v.create=function(o,c,m,p,g,x,E){var P=o.systems.game;n(c)&&(m=r(c,"url",[]),p=r(c,"loadEvent","loadeddata"),g=r(c,"asBlob",!1),x=r(c,"noAudio",!1),E=r(c,"xhrSettings"),c=r(c,"key"));var S=v.getVideoURL(P,m);if(S)return new v(o,c,S,p,g,x,E)},v.getVideoURL=function(o,c){Array.isArray(c)||(c=[c]);for(var m=0;m<c.length;m++){var p=r(c[m],"url",c[m]);if(p.indexOf("blob:")===0)return{url:p,type:""};var g;if(p.indexOf("data:")===0?g=p.split(",")[0].match(/\/(.*?);/):g=p.match(/\.([a-zA-Z0-9]+)($|\?)/),g=r(c[m],"type",g?g[1]:"").toLowerCase(),o.device.video[g])return{url:p,type:g}}return null},l.register("video",function(o,c,m,p,g,x){var E;if(Array.isArray(o))for(var P=0;P<o.length;P++)E=v.create(this,o[P]),E&&this.addFile(E);else E=v.create(this,o,c,m,p,g,x),E&&this.addFile(E);return this}),a.exports=v},15297:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12117),d=e(98035),l=e(76846),h=e(72632),r=e(42911),n=e(89200),v=new u({Extends:d,initialize:function(c,m,p,g){var x="xml";if(r(m)){var E=m;m=h(E,"key"),p=h(E,"url"),g=h(E,"xhrSettings"),x=h(E,"extension",x)}var P={type:"xml",cache:c.cacheManager.xml,extension:x,responseType:"text",key:m,url:p,xhrSettings:g};d.call(this,c,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});l.register("xml",function(o,c,m){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new v(this,o[p]));else this.addFile(new v(this,o,c,m));return this}),a.exports=v},34034:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12117),y=e(98611),d={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};d=y(!1,d,u),a.exports=d},26042:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var u=0,y=0;y<e.length;y++)u+=+e[y];return u/e.length};a.exports=T},22824:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8034),y=function(d,l){return u(d)/u(l)/u(d-l)};a.exports=y},17489:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return Math.floor(Math.random()*(u-e+1)+e)};a.exports=T},14976:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){var h=(d-u)*.5,r=(l-y)*.5,n=e*e,v=e*n;return(2*y-2*d+h+r)*v+(-3*y+3*d-2*h-r)*n+h*e+y};a.exports=T},89129:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){u===void 0&&(u=0),y===void 0&&(y=10);var d=Math.pow(y,-u);return Math.ceil(e*d)/d};a.exports=T},82897:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return Math.max(u,Math.min(y,e))};a.exports=T},75606:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=function(d){return d*u.DEG_TO_RAD};a.exports=y},767:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return Math.abs(e-u)};a.exports=T},9849:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(16650),l=e(72283),h=new d,r=new y({initialize:function n(v,o,c,m){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m=n.DefaultOrder),this._x=v,this._y=o,this._z=c,this._order=m,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,v,o,c){return c===void 0&&(c=this._order),this._x=n,this._y=v,this._z=o,this._order=c,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,v,o){return v===void 0&&(v=this._order),o===void 0&&(o=!1),h.fromQuat(n),this.setFromRotationMatrix(h,v,o)},setFromRotationMatrix:function(n,v,o){v===void 0&&(v=this._order),o===void 0&&(o=!1);var c=n.val,m=c[0],p=c[4],g=c[8],x=c[1],E=c[5],P=c[9],S=c[2],M=c[6],b=c[10],A=0,L=0,R=0,O=.99999;switch(v){case"XYZ":{L=Math.asin(u(g,-1,1)),Math.abs(g)<O?(A=Math.atan2(-P,b),R=Math.atan2(-p,m)):A=Math.atan2(M,E);break}case"YXZ":{A=Math.asin(-u(P,-1,1)),Math.abs(P)<O?(L=Math.atan2(g,b),R=Math.atan2(x,E)):L=Math.atan2(-S,m);break}case"ZXY":{A=Math.asin(u(M,-1,1)),Math.abs(M)<O?(L=Math.atan2(-S,b),R=Math.atan2(-p,E)):R=Math.atan2(x,m);break}case"ZYX":{L=Math.asin(-u(S,-1,1)),Math.abs(S)<O?(A=Math.atan2(M,b),R=Math.atan2(x,m)):R=Math.atan2(-p,E);break}case"YZX":{R=Math.asin(u(x,-1,1)),Math.abs(x)<O?(A=Math.atan2(-P,E),L=Math.atan2(-S,m)):L=Math.atan2(g,b);break}case"XZY":{R=Math.asin(-u(p,-1,1)),Math.abs(p)<O?(A=Math.atan2(M,E),L=Math.atan2(g,m)):A=Math.atan2(-P,b);break}}return this._x=A,this._y=L,this._z=R,this._order=v,o&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",a.exports=r},8034:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(e===0)return 1;for(var u=e;--e;)u*=e;return u};a.exports=T},61616:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return Math.random()*(u-e)+e};a.exports=T},60679:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){u===void 0&&(u=0),y===void 0&&(y=10);var d=Math.pow(y,-u);return Math.floor(e*d)/d};a.exports=T},91806:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=function(d,l,h){return d=u(d,0,1),(h-l)*d+l};a.exports=y},79366:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e/u/1e3};a.exports=T},43776:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e==parseFloat(e)?!(e%2):void 0};a.exports=T},58442:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===parseFloat(e)?!(e%2):void 0};a.exports=T},42798:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return(u-e)*y+e};a.exports=T},61072:a=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return y===void 0&&(y=0),e.clone().lerp(u,y)};a.exports=T},5341:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l){this.val=new Float32Array(9),l?this.copy(l):this.identity()},clone:function(){return new y(this)},set:function(d){return this.copy(d)},copy:function(d){var l=this.val,h=d.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this},fromMat4:function(d){var l=d.val,h=this.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[4],h[4]=l[5],h[5]=l[6],h[6]=l[8],h[7]=l[9],h[8]=l[10],this},fromArray:function(d){var l=this.val;return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],this},identity:function(){var d=this.val;return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=0,d[7]=0,d[8]=1,this},transpose:function(){var d=this.val,l=d[1],h=d[2],r=d[5];return d[1]=d[3],d[2]=d[6],d[3]=l,d[5]=d[7],d[6]=h,d[7]=r,this},invert:function(){var d=this.val,l=d[0],h=d[1],r=d[2],n=d[3],v=d[4],o=d[5],c=d[6],m=d[7],p=d[8],g=p*v-o*m,x=-p*n+o*c,E=m*n-v*c,P=l*g+h*x+r*E;return P?(P=1/P,d[0]=g*P,d[1]=(-p*h+r*m)*P,d[2]=(o*h-r*v)*P,d[3]=x*P,d[4]=(p*l-r*c)*P,d[5]=(-o*l+r*n)*P,d[6]=E*P,d[7]=(-m*l+h*c)*P,d[8]=(v*l-h*n)*P,this):null},adjoint:function(){var d=this.val,l=d[0],h=d[1],r=d[2],n=d[3],v=d[4],o=d[5],c=d[6],m=d[7],p=d[8];return d[0]=v*p-o*m,d[1]=r*m-h*p,d[2]=h*o-r*v,d[3]=o*c-n*p,d[4]=l*p-r*c,d[5]=r*n-l*o,d[6]=n*m-v*c,d[7]=h*c-l*m,d[8]=l*v-h*n,this},determinant:function(){var d=this.val,l=d[0],h=d[1],r=d[2],n=d[3],v=d[4],o=d[5],c=d[6],m=d[7],p=d[8];return l*(p*v-o*m)+h*(-p*n+o*c)+r*(m*n-v*c)},multiply:function(d){var l=this.val,h=l[0],r=l[1],n=l[2],v=l[3],o=l[4],c=l[5],m=l[6],p=l[7],g=l[8],x=d.val,E=x[0],P=x[1],S=x[2],M=x[3],b=x[4],A=x[5],L=x[6],R=x[7],O=x[8];return l[0]=E*h+P*v+S*m,l[1]=E*r+P*o+S*p,l[2]=E*n+P*c+S*g,l[3]=M*h+b*v+A*m,l[4]=M*r+b*o+A*p,l[5]=M*n+b*c+A*g,l[6]=L*h+R*v+O*m,l[7]=L*r+R*o+O*p,l[8]=L*n+R*c+O*g,this},translate:function(d){var l=this.val,h=d.x,r=d.y;return l[6]=h*l[0]+r*l[3]+l[6],l[7]=h*l[1]+r*l[4]+l[7],l[8]=h*l[2]+r*l[5]+l[8],this},rotate:function(d){var l=this.val,h=l[0],r=l[1],n=l[2],v=l[3],o=l[4],c=l[5],m=Math.sin(d),p=Math.cos(d);return l[0]=p*h+m*v,l[1]=p*r+m*o,l[2]=p*n+m*c,l[3]=p*v-m*h,l[4]=p*o-m*r,l[5]=p*c-m*n,this},scale:function(d){var l=this.val,h=d.x,r=d.y;return l[0]=h*l[0],l[1]=h*l[1],l[2]=h*l[2],l[3]=r*l[3],l[4]=r*l[4],l[5]=r*l[5],this},fromQuat:function(d){var l=d.x,h=d.y,r=d.z,n=d.w,v=l+l,o=h+h,c=r+r,m=l*v,p=l*o,g=l*c,x=h*o,E=h*c,P=r*c,S=n*v,M=n*o,b=n*c,A=this.val;return A[0]=1-(x+P),A[3]=p+b,A[6]=g-M,A[1]=p-b,A[4]=1-(m+P),A[7]=E+S,A[2]=g+M,A[5]=E-S,A[8]=1-(m+x),this},normalFromMat4:function(d){var l=d.val,h=this.val,r=l[0],n=l[1],v=l[2],o=l[3],c=l[4],m=l[5],p=l[6],g=l[7],x=l[8],E=l[9],P=l[10],S=l[11],M=l[12],b=l[13],A=l[14],L=l[15],R=r*m-n*c,O=r*p-v*c,D=r*g-o*c,B=n*p-v*m,G=n*g-o*m,z=v*g-o*p,X=x*b-E*M,U=x*A-P*M,V=x*L-S*M,N=E*A-P*b,W=E*L-S*b,F=P*L-S*A,I=R*F-O*W+D*N+B*V-G*U+z*X;return I?(I=1/I,h[0]=(m*F-p*W+g*N)*I,h[1]=(p*V-c*F-g*U)*I,h[2]=(c*W-m*V+g*X)*I,h[3]=(v*W-n*F-o*N)*I,h[4]=(r*F-v*V+o*U)*I,h[5]=(n*V-r*W-o*X)*I,h[6]=(b*z-A*G+L*B)*I,h[7]=(A*D-M*z-L*O)*I,h[8]=(M*G-b*D+L*R)*I,this):null}});a.exports=y},16650:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(70015),d=1e-6,l=new u({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new l(this)},set:function(c){return this.copy(c)},setValues:function(c,m,p,g,x,E,P,S,M,b,A,L,R,O,D,B){var G=this.val;return G[0]=c,G[1]=m,G[2]=p,G[3]=g,G[4]=x,G[5]=E,G[6]=P,G[7]=S,G[8]=M,G[9]=b,G[10]=A,G[11]=L,G[12]=R,G[13]=O,G[14]=D,G[15]=B,this},copy:function(c){var m=c.val;return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},fromArray:function(c){return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(c,m,p){var g=h.fromQuat(p),x=g.val,E=m.x,P=m.y,S=m.z;return this.setValues(x[0]*E,x[1]*E,x[2]*E,0,x[4]*P,x[5]*P,x[6]*P,0,x[8]*S,x[9]*S,x[10]*S,0,c.x,c.y,c.z,1)},xyz:function(c,m,p){this.identity();var g=this.val;return g[12]=c,g[13]=m,g[14]=p,this},scaling:function(c,m,p){this.zero();var g=this.val;return g[0]=c,g[5]=m,g[10]=p,g[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var c=this.val,m=c[1],p=c[2],g=c[3],x=c[6],E=c[7],P=c[11];return c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=m,c[6]=c[9],c[7]=c[13],c[8]=p,c[9]=x,c[11]=c[14],c[12]=g,c[13]=E,c[14]=P,this},getInverse:function(c){return this.copy(c),this.invert()},invert:function(){var c=this.val,m=c[0],p=c[1],g=c[2],x=c[3],E=c[4],P=c[5],S=c[6],M=c[7],b=c[8],A=c[9],L=c[10],R=c[11],O=c[12],D=c[13],B=c[14],G=c[15],z=m*P-p*E,X=m*S-g*E,U=m*M-x*E,V=p*S-g*P,N=p*M-x*P,W=g*M-x*S,F=b*D-A*O,I=b*B-L*O,k=b*G-R*O,Y=A*B-L*D,H=A*G-R*D,K=L*G-R*B,j=z*K-X*H+U*Y+V*k-N*I+W*F;return j?(j=1/j,this.setValues((P*K-S*H+M*Y)*j,(g*H-p*K-x*Y)*j,(D*W-B*N+G*V)*j,(L*N-A*W-R*V)*j,(S*k-E*K-M*I)*j,(m*K-g*k+x*I)*j,(B*U-O*W-G*X)*j,(b*W-L*U+R*X)*j,(E*H-P*k+M*F)*j,(p*k-m*H-x*F)*j,(O*N-D*U+G*z)*j,(A*U-b*N-R*z)*j,(P*I-E*Y-S*F)*j,(m*Y-p*I+g*F)*j,(D*X-O*V-B*z)*j,(b*V-A*X+L*z)*j)):this},adjoint:function(){var c=this.val,m=c[0],p=c[1],g=c[2],x=c[3],E=c[4],P=c[5],S=c[6],M=c[7],b=c[8],A=c[9],L=c[10],R=c[11],O=c[12],D=c[13],B=c[14],G=c[15];return this.setValues(P*(L*G-R*B)-A*(S*G-M*B)+D*(S*R-M*L),-(p*(L*G-R*B)-A*(g*G-x*B)+D*(g*R-x*L)),p*(S*G-M*B)-P*(g*G-x*B)+D*(g*M-x*S),-(p*(S*R-M*L)-P*(g*R-x*L)+A*(g*M-x*S)),-(E*(L*G-R*B)-b*(S*G-M*B)+O*(S*R-M*L)),m*(L*G-R*B)-b*(g*G-x*B)+O*(g*R-x*L),-(m*(S*G-M*B)-E*(g*G-x*B)+O*(g*M-x*S)),m*(S*R-M*L)-E*(g*R-x*L)+b*(g*M-x*S),E*(A*G-R*D)-b*(P*G-M*D)+O*(P*R-M*A),-(m*(A*G-R*D)-b*(p*G-x*D)+O*(p*R-x*A)),m*(P*G-M*D)-E*(p*G-x*D)+O*(p*M-x*P),-(m*(P*R-M*A)-E*(p*R-x*A)+b*(p*M-x*P)),-(E*(A*B-L*D)-b*(P*B-S*D)+O*(P*L-S*A)),m*(A*B-L*D)-b*(p*B-g*D)+O*(p*L-g*A),-(m*(P*B-S*D)-E*(p*B-g*D)+O*(p*S-g*P)),m*(P*L-S*A)-E*(p*L-g*A)+b*(p*S-g*P))},determinant:function(){var c=this.val,m=c[0],p=c[1],g=c[2],x=c[3],E=c[4],P=c[5],S=c[6],M=c[7],b=c[8],A=c[9],L=c[10],R=c[11],O=c[12],D=c[13],B=c[14],G=c[15],z=m*P-p*E,X=m*S-g*E,U=m*M-x*E,V=p*S-g*P,N=p*M-x*P,W=g*M-x*S,F=b*D-A*O,I=b*B-L*O,k=b*G-R*O,Y=A*B-L*D,H=A*G-R*D,K=L*G-R*B;return z*K-X*H+U*Y+V*k-N*I+W*F},multiply:function(c){var m=this.val,p=m[0],g=m[1],x=m[2],E=m[3],P=m[4],S=m[5],M=m[6],b=m[7],A=m[8],L=m[9],R=m[10],O=m[11],D=m[12],B=m[13],G=m[14],z=m[15],X=c.val,U=X[0],V=X[1],N=X[2],W=X[3];return m[0]=U*p+V*P+N*A+W*D,m[1]=U*g+V*S+N*L+W*B,m[2]=U*x+V*M+N*R+W*G,m[3]=U*E+V*b+N*O+W*z,U=X[4],V=X[5],N=X[6],W=X[7],m[4]=U*p+V*P+N*A+W*D,m[5]=U*g+V*S+N*L+W*B,m[6]=U*x+V*M+N*R+W*G,m[7]=U*E+V*b+N*O+W*z,U=X[8],V=X[9],N=X[10],W=X[11],m[8]=U*p+V*P+N*A+W*D,m[9]=U*g+V*S+N*L+W*B,m[10]=U*x+V*M+N*R+W*G,m[11]=U*E+V*b+N*O+W*z,U=X[12],V=X[13],N=X[14],W=X[15],m[12]=U*p+V*P+N*A+W*D,m[13]=U*g+V*S+N*L+W*B,m[14]=U*x+V*M+N*R+W*G,m[15]=U*E+V*b+N*O+W*z,this},multiplyLocal:function(c){var m=this.val,p=c.val;return this.setValues(m[0]*p[0]+m[1]*p[4]+m[2]*p[8]+m[3]*p[12],m[0]*p[1]+m[1]*p[5]+m[2]*p[9]+m[3]*p[13],m[0]*p[2]+m[1]*p[6]+m[2]*p[10]+m[3]*p[14],m[0]*p[3]+m[1]*p[7]+m[2]*p[11]+m[3]*p[15],m[4]*p[0]+m[5]*p[4]+m[6]*p[8]+m[7]*p[12],m[4]*p[1]+m[5]*p[5]+m[6]*p[9]+m[7]*p[13],m[4]*p[2]+m[5]*p[6]+m[6]*p[10]+m[7]*p[14],m[4]*p[3]+m[5]*p[7]+m[6]*p[11]+m[7]*p[15],m[8]*p[0]+m[9]*p[4]+m[10]*p[8]+m[11]*p[12],m[8]*p[1]+m[9]*p[5]+m[10]*p[9]+m[11]*p[13],m[8]*p[2]+m[9]*p[6]+m[10]*p[10]+m[11]*p[14],m[8]*p[3]+m[9]*p[7]+m[10]*p[11]+m[11]*p[15],m[12]*p[0]+m[13]*p[4]+m[14]*p[8]+m[15]*p[12],m[12]*p[1]+m[13]*p[5]+m[14]*p[9]+m[15]*p[13],m[12]*p[2]+m[13]*p[6]+m[14]*p[10]+m[15]*p[14],m[12]*p[3]+m[13]*p[7]+m[14]*p[11]+m[15]*p[15])},premultiply:function(c){return this.multiplyMatrices(c,this)},multiplyMatrices:function(c,m){var p=c.val,g=m.val,x=p[0],E=p[4],P=p[8],S=p[12],M=p[1],b=p[5],A=p[9],L=p[13],R=p[2],O=p[6],D=p[10],B=p[14],G=p[3],z=p[7],X=p[11],U=p[15],V=g[0],N=g[4],W=g[8],F=g[12],I=g[1],k=g[5],Y=g[9],H=g[13],K=g[2],j=g[6],J=g[10],Q=g[14],Z=g[3],q=g[7],et=g[11],tt=g[15];return this.setValues(x*V+E*I+P*K+S*Z,M*V+b*I+A*K+L*Z,R*V+O*I+D*K+B*Z,G*V+z*I+X*K+U*Z,x*N+E*k+P*j+S*q,M*N+b*k+A*j+L*q,R*N+O*k+D*j+B*q,G*N+z*k+X*j+U*q,x*W+E*Y+P*J+S*et,M*W+b*Y+A*J+L*et,R*W+O*Y+D*J+B*et,G*W+z*Y+X*J+U*et,x*F+E*H+P*Q+S*tt,M*F+b*H+A*Q+L*tt,R*F+O*H+D*Q+B*tt,G*F+z*H+X*Q+U*tt)},translate:function(c){return this.translateXYZ(c.x,c.y,c.z)},translateXYZ:function(c,m,p){var g=this.val;return g[12]=g[0]*c+g[4]*m+g[8]*p+g[12],g[13]=g[1]*c+g[5]*m+g[9]*p+g[13],g[14]=g[2]*c+g[6]*m+g[10]*p+g[14],g[15]=g[3]*c+g[7]*m+g[11]*p+g[15],this},scale:function(c){return this.scaleXYZ(c.x,c.y,c.z)},scaleXYZ:function(c,m,p){var g=this.val;return g[0]=g[0]*c,g[1]=g[1]*c,g[2]=g[2]*c,g[3]=g[3]*c,g[4]=g[4]*m,g[5]=g[5]*m,g[6]=g[6]*m,g[7]=g[7]*m,g[8]=g[8]*p,g[9]=g[9]*p,g[10]=g[10]*p,g[11]=g[11]*p,this},makeRotationAxis:function(c,m){var p=Math.cos(m),g=Math.sin(m),x=1-p,E=c.x,P=c.y,S=c.z,M=x*E,b=x*P;return this.setValues(M*E+p,M*P-g*S,M*S+g*P,0,M*P+g*S,b*P+p,b*S-g*E,0,M*S-g*P,b*S+g*E,x*S*S+p,0,0,0,0,1)},rotate:function(c,m){var p=this.val,g=m.x,x=m.y,E=m.z,P=Math.sqrt(g*g+x*x+E*E);if(Math.abs(P)<d)return this;P=1/P,g*=P,x*=P,E*=P;var S=Math.sin(c),M=Math.cos(c),b=1-M,A=p[0],L=p[1],R=p[2],O=p[3],D=p[4],B=p[5],G=p[6],z=p[7],X=p[8],U=p[9],V=p[10],N=p[11],W=p[12],F=p[13],I=p[14],k=p[15],Y=g*g*b+M,H=x*g*b+E*S,K=E*g*b-x*S,j=g*x*b-E*S,J=x*x*b+M,Q=E*x*b+g*S,Z=g*E*b+x*S,q=x*E*b-g*S,et=E*E*b+M;return this.setValues(A*Y+D*H+X*K,L*Y+B*H+U*K,R*Y+G*H+V*K,O*Y+z*H+N*K,A*j+D*J+X*Q,L*j+B*J+U*Q,R*j+G*J+V*Q,O*j+z*J+N*Q,A*Z+D*q+X*et,L*Z+B*q+U*et,R*Z+G*q+V*et,O*Z+z*q+N*et,W,F,I,k)},rotateX:function(c){var m=this.val,p=Math.sin(c),g=Math.cos(c),x=m[4],E=m[5],P=m[6],S=m[7],M=m[8],b=m[9],A=m[10],L=m[11];return m[4]=x*g+M*p,m[5]=E*g+b*p,m[6]=P*g+A*p,m[7]=S*g+L*p,m[8]=M*g-x*p,m[9]=b*g-E*p,m[10]=A*g-P*p,m[11]=L*g-S*p,this},rotateY:function(c){var m=this.val,p=Math.sin(c),g=Math.cos(c),x=m[0],E=m[1],P=m[2],S=m[3],M=m[8],b=m[9],A=m[10],L=m[11];return m[0]=x*g-M*p,m[1]=E*g-b*p,m[2]=P*g-A*p,m[3]=S*g-L*p,m[8]=x*p+M*g,m[9]=E*p+b*g,m[10]=P*p+A*g,m[11]=S*p+L*g,this},rotateZ:function(c){var m=this.val,p=Math.sin(c),g=Math.cos(c),x=m[0],E=m[1],P=m[2],S=m[3],M=m[4],b=m[5],A=m[6],L=m[7];return m[0]=x*g+M*p,m[1]=E*g+b*p,m[2]=P*g+A*p,m[3]=S*g+L*p,m[4]=M*g-x*p,m[5]=b*g-E*p,m[6]=A*g-P*p,m[7]=L*g-S*p,this},fromRotationTranslation:function(c,m){var p=c.x,g=c.y,x=c.z,E=c.w,P=p+p,S=g+g,M=x+x,b=p*P,A=p*S,L=p*M,R=g*S,O=g*M,D=x*M,B=E*P,G=E*S,z=E*M;return this.setValues(1-(R+D),A+z,L-G,0,A-z,1-(b+D),O+B,0,L+G,O-B,1-(b+R),0,m.x,m.y,m.z,1)},fromQuat:function(c){var m=c.x,p=c.y,g=c.z,x=c.w,E=m+m,P=p+p,S=g+g,M=m*E,b=m*P,A=m*S,L=p*P,R=p*S,O=g*S,D=x*E,B=x*P,G=x*S;return this.setValues(1-(L+O),b+G,A-B,0,b-G,1-(M+O),R+D,0,A+B,R-D,1-(M+L),0,0,0,0,1)},frustum:function(c,m,p,g,x,E){var P=1/(m-c),S=1/(g-p),M=1/(x-E);return this.setValues(x*2*P,0,0,0,0,x*2*S,0,0,(m+c)*P,(g+p)*S,(E+x)*M,-1,0,0,E*x*2*M,0)},perspective:function(c,m,p,g){var x=1/Math.tan(c/2),E=1/(p-g);return this.setValues(x/m,0,0,0,0,x,0,0,0,0,(g+p)*E,-1,0,0,2*g*p*E,0)},perspectiveLH:function(c,m,p,g){return this.setValues(2*p/c,0,0,0,0,2*p/m,0,0,0,0,-g/(p-g),1,0,0,p*g/(p-g),0)},ortho:function(c,m,p,g,x,E){var P=c-m,S=p-g,M=x-E;return P=P===0?P:1/P,S=S===0?S:1/S,M=M===0?M:1/M,this.setValues(-2*P,0,0,0,0,-2*S,0,0,0,0,2*M,0,(c+m)*P,(g+p)*S,(E+x)*M,1)},lookAtRH:function(c,m,p){var g=this.val;return o.subVectors(c,m),o.getLengthSquared()===0&&(o.z=1),o.normalize(),n.crossVectors(p,o),n.getLengthSquared()===0&&(Math.abs(p.z)===1?o.x+=1e-4:o.z+=1e-4,o.normalize(),n.crossVectors(p,o)),n.normalize(),v.crossVectors(o,n),g[0]=n.x,g[1]=n.y,g[2]=n.z,g[4]=v.x,g[5]=v.y,g[6]=v.z,g[8]=o.x,g[9]=o.y,g[10]=o.z,this},lookAt:function(c,m,p){var g=c.x,x=c.y,E=c.z,P=p.x,S=p.y,M=p.z,b=m.x,A=m.y,L=m.z;if(Math.abs(g-b)<d&&Math.abs(x-A)<d&&Math.abs(E-L)<d)return this.identity();var R=g-b,O=x-A,D=E-L,B=1/Math.sqrt(R*R+O*O+D*D);R*=B,O*=B,D*=B;var G=S*D-M*O,z=M*R-P*D,X=P*O-S*R;B=Math.sqrt(G*G+z*z+X*X),B?(B=1/B,G*=B,z*=B,X*=B):(G=0,z=0,X=0);var U=O*X-D*z,V=D*G-R*X,N=R*z-O*G;return B=Math.sqrt(U*U+V*V+N*N),B?(B=1/B,U*=B,V*=B,N*=B):(U=0,V=0,N=0),this.setValues(G,U,R,0,z,V,O,0,X,N,D,0,-(G*g+z*x+X*E),-(U*g+V*x+N*E),-(R*g+O*x+D*E),1)},yawPitchRoll:function(c,m,p){this.zero(),h.zero(),r.zero();var g=this.val,x=h.val,E=r.val,P=Math.sin(p),S=Math.cos(p);return g[10]=1,g[15]=1,g[0]=S,g[1]=P,g[4]=-P,g[5]=S,P=Math.sin(m),S=Math.cos(m),x[0]=1,x[15]=1,x[5]=S,x[10]=S,x[9]=-P,x[6]=P,P=Math.sin(c),S=Math.cos(c),E[5]=1,E[15]=1,E[0]=S,E[2]=-P,E[8]=P,E[10]=S,this.multiplyLocal(h),this.multiplyLocal(r),this},setWorldMatrix:function(c,m,p,g,x){return this.yawPitchRoll(c.y,c.x,c.z),h.scaling(p.x,p.y,p.z),r.xyz(m.x,m.y,m.z),this.multiplyLocal(h),this.multiplyLocal(r),g&&this.multiplyLocal(g),x&&this.multiplyLocal(x),this},multiplyToMat4:function(c,m){var p=this.val,g=c.val,x=p[0],E=p[1],P=p[2],S=p[3],M=p[4],b=p[5],A=p[6],L=p[7],R=p[8],O=p[9],D=p[10],B=p[11],G=p[12],z=p[13],X=p[14],U=p[15],V=g[0],N=g[1],W=g[2],F=g[3],I=g[4],k=g[5],Y=g[6],H=g[7],K=g[8],j=g[9],J=g[10],Q=g[11],Z=g[12],q=g[13],et=g[14],tt=g[15];return m.setValues(V*x+N*M+W*R+F*G,N*E+N*b+W*O+F*z,W*P+N*A+W*D+F*X,F*S+N*L+W*B+F*U,I*x+k*M+Y*R+H*G,I*E+k*b+Y*O+H*z,I*P+k*A+Y*D+H*X,I*S+k*L+Y*B+H*U,K*x+j*M+J*R+Q*G,K*E+j*b+J*O+Q*z,K*P+j*A+J*D+Q*X,K*S+j*L+J*B+Q*U,Z*x+q*M+et*R+tt*G,Z*E+q*b+et*O+tt*z,Z*P+q*A+et*D+tt*X,Z*S+q*L+et*B+tt*U)},fromRotationXYTranslation:function(c,m,p){var g=m.x,x=m.y,E=m.z,P=Math.sin(c.x),S=Math.cos(c.x),M=Math.sin(c.y),b=Math.cos(c.y),A=g,L=x,R=E,O=-P,D=0-O*M,B=0-S*M,G=O*b,z=S*b;return p||(A=b*g+M*E,L=D*g+S*x+G*E,R=B*g+P*x+z*E),this.setValues(b,D,B,0,0,S,P,0,M,G,z,0,A,L,R,1)},getMaxScaleOnAxis:function(){var c=this.val,m=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],p=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],g=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(m,p,g))}}),h=new l,r=new l,n=new y,v=new y,o=new y;a.exports=l},69635:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return Math.min(e+u,y)};a.exports=T},37394:a=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=e.length;if(u===0)return 0;e.sort(function(d,l){return d-l});var y=Math.floor(u/2);return u%2===0?(e[y]+e[y-1])/2:e[y]};a.exports=T},17259:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return Math.max(e-u,y)};a.exports=T},61820:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){y===void 0&&(y=u+1);var l=(e-u)/(y-u);return l>1?d!==void 0?(l=(d-e)/(d-y),l<0&&(l=0)):l=1:l<0&&(l=0),l};a.exports=T},75003:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(5341),d=e(72283),l=e(70015),h=1e-6,r=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),v=new l(1,0,0),o=new l(0,1,0),c=new l,m=new y,p=new u({initialize:function(x,E,P,S){this.onChangeCallback=d,this.set(x,E,P,S)},x:{get:function(){return this._x},set:function(g){this._x=g,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(g){this._w=g,this.onChangeCallback(this)}},copy:function(g){return this.set(g)},set:function(g,x,E,P,S){return S===void 0&&(S=!0),typeof g=="object"?(this._x=g.x||0,this._y=g.y||0,this._z=g.z||0,this._w=g.w||0):(this._x=g||0,this._y=x||0,this._z=E||0,this._w=P||0),S&&this.onChangeCallback(this),this},add:function(g){return this._x+=g.x,this._y+=g.y,this._z+=g.z,this._w+=g.w,this.onChangeCallback(this),this},subtract:function(g){return this._x-=g.x,this._y-=g.y,this._z-=g.z,this._w-=g.w,this.onChangeCallback(this),this},scale:function(g){return this._x*=g,this._y*=g,this._z*=g,this._w*=g,this.onChangeCallback(this),this},length:function(){var g=this.x,x=this.y,E=this.z,P=this.w;return Math.sqrt(g*g+x*x+E*E+P*P)},lengthSq:function(){var g=this.x,x=this.y,E=this.z,P=this.w;return g*g+x*x+E*E+P*P},normalize:function(){var g=this.x,x=this.y,E=this.z,P=this.w,S=g*g+x*x+E*E+P*P;return S>0&&(S=1/Math.sqrt(S),this._x=g*S,this._y=x*S,this._z=E*S,this._w=P*S),this.onChangeCallback(this),this},dot:function(g){return this.x*g.x+this.y*g.y+this.z*g.z+this.w*g.w},lerp:function(g,x){x===void 0&&(x=0);var E=this.x,P=this.y,S=this.z,M=this.w;return this.set(E+x*(g.x-E),P+x*(g.y-P),S+x*(g.z-S),M+x*(g.w-M))},rotationTo:function(g,x){var E=g.x*x.x+g.y*x.y+g.z*x.z;return E<-.999999?(c.copy(v).cross(g).length()<h&&c.copy(o).cross(g),c.normalize(),this.setAxisAngle(c,Math.PI)):E>.999999?this.set(0,0,0,1):(c.copy(g).cross(x),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+E,this.normalize())},setAxes:function(g,x,E){var P=m.val;return P[0]=x.x,P[3]=x.y,P[6]=x.z,P[1]=E.x,P[4]=E.y,P[7]=E.z,P[2]=-g.x,P[5]=-g.y,P[8]=-g.z,this.fromMat3(m).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(g,x){x=x*.5;var E=Math.sin(x);return this.set(E*g.x,E*g.y,E*g.z,Math.cos(x))},multiply:function(g){var x=this.x,E=this.y,P=this.z,S=this.w,M=g.x,b=g.y,A=g.z,L=g.w;return this.set(x*L+S*M+E*A-P*b,E*L+S*b+P*M-x*A,P*L+S*A+x*b-E*M,S*L-x*M-E*b-P*A)},slerp:function(g,x){var E=this.x,P=this.y,S=this.z,M=this.w,b=g.x,A=g.y,L=g.z,R=g.w,O=E*b+P*A+S*L+M*R;O<0&&(O=-O,b=-b,A=-A,L=-L,R=-R);var D=1-x,B=x;if(1-O>h){var G=Math.acos(O),z=Math.sin(G);D=Math.sin((1-x)*G)/z,B=Math.sin(x*G)/z}return this.set(D*E+B*b,D*P+B*A,D*S+B*L,D*M+B*R)},invert:function(){var g=this.x,x=this.y,E=this.z,P=this.w,S=g*g+x*x+E*E+P*P,M=S?1/S:0;return this.set(-g*M,-x*M,-E*M,P*M)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(g){g*=.5;var x=this.x,E=this.y,P=this.z,S=this.w,M=Math.sin(g),b=Math.cos(g);return this.set(x*b+S*M,E*b+P*M,P*b-E*M,S*b-x*M)},rotateY:function(g){g*=.5;var x=this.x,E=this.y,P=this.z,S=this.w,M=Math.sin(g),b=Math.cos(g);return this.set(x*b-P*M,E*b+S*M,P*b+x*M,S*b-E*M)},rotateZ:function(g){g*=.5;var x=this.x,E=this.y,P=this.z,S=this.w,M=Math.sin(g),b=Math.cos(g);return this.set(x*b+E*M,E*b-x*M,P*b+S*M,S*b-P*M)},calculateW:function(){var g=this.x,x=this.y,E=this.z;return this.w=-Math.sqrt(1-g*g-x*x-E*E),this},setFromEuler:function(g,x){var E=g.x/2,P=g.y/2,S=g.z/2,M=Math.cos(E),b=Math.cos(P),A=Math.cos(S),L=Math.sin(E),R=Math.sin(P),O=Math.sin(S);switch(g.order){case"XYZ":{this.set(L*b*A+M*R*O,M*R*A-L*b*O,M*b*O+L*R*A,M*b*A-L*R*O,x);break}case"YXZ":{this.set(L*b*A+M*R*O,M*R*A-L*b*O,M*b*O-L*R*A,M*b*A+L*R*O,x);break}case"ZXY":{this.set(L*b*A-M*R*O,M*R*A+L*b*O,M*b*O+L*R*A,M*b*A-L*R*O,x);break}case"ZYX":{this.set(L*b*A-M*R*O,M*R*A+L*b*O,M*b*O-L*R*A,M*b*A+L*R*O,x);break}case"YZX":{this.set(L*b*A+M*R*O,M*R*A+L*b*O,M*b*O-L*R*A,M*b*A-L*R*O,x);break}case"XZY":{this.set(L*b*A-M*R*O,M*R*A-L*b*O,M*b*O+L*R*A,M*b*A+L*R*O,x);break}}return this},setFromRotationMatrix:function(g){var x=g.val,E=x[0],P=x[4],S=x[8],M=x[1],b=x[5],A=x[9],L=x[2],R=x[6],O=x[10],D=E+b+O,B;return D>0?(B=.5/Math.sqrt(D+1),this.set((R-A)*B,(S-L)*B,(M-P)*B,.25/B)):E>b&&E>O?(B=2*Math.sqrt(1+E-b-O),this.set(.25*B,(P+M)/B,(S+L)/B,(R-A)/B)):b>O?(B=2*Math.sqrt(1+b-E-O),this.set((P+M)/B,.25*B,(A+R)/B,(S-L)/B)):(B=2*Math.sqrt(1+O-E-b),this.set((S+L)/B,(A+R)/B,.25*B,(M-P)/B)),this},fromMat3:function(g){var x=g.val,E=x[0]+x[4]+x[8],P;if(E>0)P=Math.sqrt(E+1),this.w=.5*P,P=.5/P,this._x=(x[7]-x[5])*P,this._y=(x[2]-x[6])*P,this._z=(x[3]-x[1])*P;else{var S=0;x[4]>x[0]&&(S=1),x[8]>x[S*3+S]&&(S=2);var M=r[S],b=r[M];P=Math.sqrt(x[S*3+S]-x[M*3+M]-x[b*3+b]+1),n[S]=.5*P,P=.5/P,n[M]=(x[M*3+S]+x[S*3+M])*P,n[b]=(x[b*3+S]+x[S*3+b])*P,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(x[b*3+M]-x[M*3+b])*P}return this.onChangeCallback(this),this}});a.exports=p},23701:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=function(d){return d*u.RAD_TO_DEG};a.exports=y},16906:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=1);var y=Math.random()*2*Math.PI;return e.x=Math.cos(y)*u,e.y=Math.sin(y)*u,e};a.exports=T},52417:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=1);var y=Math.random()*2*Math.PI,d=Math.random()*2-1,l=Math.sqrt(1-d*d)*u;return e.x=Math.cos(y)*l,e.y=Math.sin(y)*l,e.z=d*u,e};a.exports=T},17915:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=1),e.x=(Math.random()*2-1)*u,e.y=(Math.random()*2-1)*u,e.z=(Math.random()*2-1)*u,e.w=(Math.random()*2-1)*u,e};a.exports=T},52257:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.x,d=e.y;return e.x=y*Math.cos(u)-d*Math.sin(u),e.y=y*Math.sin(u)+d*Math.cos(u),e};a.exports=T},2386:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=Math.cos(d),h=Math.sin(d),r=e.x-u,n=e.y-y;return e.x=r*l-n*h+u,e.y=r*h+n*l+y,e};a.exports=T},72395:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){var h=d+Math.atan2(e.y-y,e.x-u);return e.x=u+l*Math.cos(h),e.y=y+l*Math.sin(h),e};a.exports=T},41061:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){return e.x=u+l*Math.cos(d),e.y=y+l*Math.sin(d),e};a.exports=T},93709:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70015),y=e(16650),d=e(75003),l=new y,h=new d,r=new u,n=function(v,o,c){return h.setAxisAngle(o,c),l.fromRotationTranslation(h,r.set(0,0,0)),v.transformMat4(l)};a.exports=n},67233:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0?Math.ceil(e):Math.floor(e)};a.exports=T},64333:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){u===void 0&&(u=0),y===void 0&&(y=10);var d=Math.pow(y,-u);return Math.round(e*d)/d};a.exports=T},59533:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u===void 0&&(u=1),y===void 0&&(y=1),d===void 0&&(d=1),d*=Math.PI/e;for(var l=[],h=[],r=0;r<e;r++)y-=u*d,u+=y*d,l[r]=y,h[r]=u;return{sin:h,cos:l,length:e}};a.exports=T},5514:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e<=u?0:e>=y?1:(e=(e-u)/(y-u),e*e*(3-2*e))};a.exports=T},87736:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e=Math.max(0,Math.min(1,(e-u)/(y-u))),e*e*e*(e*(e*6-15)+10)};a.exports=T},55805:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r){r===void 0&&(r=new u);var n=0,v=0,o=l*h;return d>0&&d<=o&&(d>l-1?(v=Math.floor(d/l),n=d-v*l):n=d),r.set(n,v)};a.exports=y},64462:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n,v,o,c){c===void 0&&(c=new u);var m=Math.sin(n),p=Math.cos(n),g=p*v,x=m*v,E=-m*o,P=p*o,S=1/(g*P+E*-x);return c.x=P*S*d+-E*S*l+(r*E-h*P)*S,c.y=g*S*l+-x*S*d+(-r*g+h*x)*S,c};a.exports=y},93736:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(88456),d=new u({initialize:function(h,r){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(r===void 0&&(r=h),this.x=h||0,this.y=r||0)},clone:function(){return new d(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,h){return h===void 0&&(h=l),this.x=l,this.y=h,this},setTo:function(l,h){return this.set(l,h)},setToPolar:function(l,h){return h==null&&(h=1),this.x=Math.cos(l)*h,this.y=Math.sin(l)*h,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,h){return y(this.x,l.x,h)&&y(this.y,l.y,h)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var h=l.x-this.x,r=l.y-this.y;return Math.sqrt(h*h+r*r)},distanceSq:function(l){var h=l.x-this.x,r=l.y-this.y;return h*h+r*r},length:function(){var l=this.x,h=this.y;return Math.sqrt(l*l+h*h)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,h=this.y;return l*l+h*h},normalize:function(){var l=this.x,h=this.y,r=l*l+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=l*r,this.y=h*r),this},normalizeRightHand:function(){var l=this.x;return this.x=this.y*-1,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=l*-1,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,h){h===void 0&&(h=0);var r=this.x,n=this.y;return this.x=r+h*(l.x-r),this.y=n+h*(l.y-n),this},transformMat3:function(l){var h=this.x,r=this.y,n=l.val;return this.x=n[0]*h+n[3]*r+n[6],this.y=n[1]*h+n[4]*r+n[7],this},transformMat4:function(l){var h=this.x,r=this.y,n=l.val;return this.x=n[0]*h+n[4]*r+n[12],this.y=n[1]*h+n[5]*r+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var h=this.length();return h&&h>l&&this.scale(l/h),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var h=Math.cos(l),r=Math.sin(l);return this.set(h*this.x-r*this.y,r*this.x+h*this.y)},project:function(l){var h=this.dot(l)/l.dot(l);return this.copy(l).scale(h)}});d.ZERO=new d,d.RIGHT=new d(1,0),d.LEFT=new d(-1,0),d.UP=new d(0,-1),d.DOWN=new d(0,1),d.ONE=new d(1,1),a.exports=d},70015:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r){this.x=0,this.y=0,this.z=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):(this.x=l||0,this.y=h||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(d){return this.x=Math.min(this.x,d.x),this.y=Math.min(this.y,d.y),this.z=Math.min(this.z,d.z),this},max:function(d){return this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this.z=Math.max(this.z,d.z),this},clone:function(){return new y(this.x,this.y,this.z)},addVectors:function(d,l){return this.x=d.x+l.x,this.y=d.y+l.y,this.z=d.z+l.z,this},crossVectors:function(d,l){var h=d.x,r=d.y,n=d.z,v=l.x,o=l.y,c=l.z;return this.x=r*c-n*o,this.y=n*v-h*c,this.z=h*o-r*v,this},equals:function(d){return this.x===d.x&&this.y===d.y&&this.z===d.z},copy:function(d){return this.x=d.x,this.y=d.y,this.z=d.z||0,this},set:function(d,l,h){return typeof d=="object"?(this.x=d.x||0,this.y=d.y||0,this.z=d.z||0):(this.x=d||0,this.y=l||0,this.z=h||0),this},setFromMatrixPosition:function(d){return this.fromArray(d.val,12)},setFromMatrixColumn:function(d,l){return this.fromArray(d.val,l*4)},fromArray:function(d,l){return l===void 0&&(l=0),this.x=d[l],this.y=d[l+1],this.z=d[l+2],this},add:function(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z||0,this},addScalar:function(d){return this.x+=d,this.y+=d,this.z+=d,this},addScale:function(d,l){return this.x+=d.x*l,this.y+=d.y*l,this.z+=d.z*l||0,this},subtract:function(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z||0,this},multiply:function(d){return this.x*=d.x,this.y*=d.y,this.z*=d.z||1,this},scale:function(d){return isFinite(d)?(this.x*=d,this.y*=d,this.z*=d):(this.x=0,this.y=0,this.z=0),this},divide:function(d){return this.x/=d.x,this.y/=d.y,this.z/=d.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(d){var l=d.x-this.x,h=d.y-this.y,r=d.z-this.z||0;return Math.sqrt(l*l+h*h+r*r)},distanceSq:function(d){var l=d.x-this.x,h=d.y-this.y,r=d.z-this.z||0;return l*l+h*h+r*r},length:function(){var d=this.x,l=this.y,h=this.z;return Math.sqrt(d*d+l*l+h*h)},lengthSq:function(){var d=this.x,l=this.y,h=this.z;return d*d+l*l+h*h},normalize:function(){var d=this.x,l=this.y,h=this.z,r=d*d+l*l+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=d*r,this.y=l*r,this.z=h*r),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z},cross:function(d){var l=this.x,h=this.y,r=this.z,n=d.x,v=d.y,o=d.z;return this.x=h*o-r*v,this.y=r*n-l*o,this.z=l*v-h*n,this},lerp:function(d,l){l===void 0&&(l=0);var h=this.x,r=this.y,n=this.z;return this.x=h+l*(d.x-h),this.y=r+l*(d.y-r),this.z=n+l*(d.z-n),this},applyMatrix3:function(d){var l=this.x,h=this.y,r=this.z,n=d.val;return this.x=n[0]*l+n[3]*h+n[6]*r,this.y=n[1]*l+n[4]*h+n[7]*r,this.z=n[2]*l+n[5]*h+n[8]*r,this},applyMatrix4:function(d){var l=this.x,h=this.y,r=this.z,n=d.val,v=1/(n[3]*l+n[7]*h+n[11]*r+n[15]);return this.x=(n[0]*l+n[4]*h+n[8]*r+n[12])*v,this.y=(n[1]*l+n[5]*h+n[9]*r+n[13])*v,this.z=(n[2]*l+n[6]*h+n[10]*r+n[14])*v,this},transformMat3:function(d){var l=this.x,h=this.y,r=this.z,n=d.val;return this.x=l*n[0]+h*n[3]+r*n[6],this.y=l*n[1]+h*n[4]+r*n[7],this.z=l*n[2]+h*n[5]+r*n[8],this},transformMat4:function(d){var l=this.x,h=this.y,r=this.z,n=d.val;return this.x=n[0]*l+n[4]*h+n[8]*r+n[12],this.y=n[1]*l+n[5]*h+n[9]*r+n[13],this.z=n[2]*l+n[6]*h+n[10]*r+n[14],this},transformCoordinates:function(d){var l=this.x,h=this.y,r=this.z,n=d.val,v=l*n[0]+h*n[4]+r*n[8]+n[12],o=l*n[1]+h*n[5]+r*n[9]+n[13],c=l*n[2]+h*n[6]+r*n[10]+n[14],m=l*n[3]+h*n[7]+r*n[11]+n[15];return this.x=v/m,this.y=o/m,this.z=c/m,this},transformQuat:function(d){var l=this.x,h=this.y,r=this.z,n=d.x,v=d.y,o=d.z,c=d.w,m=c*l+v*r-o*h,p=c*h+o*l-n*r,g=c*r+n*h-v*l,x=-n*l-v*h-o*r;return this.x=m*c+x*-n+p*-o-g*-v,this.y=p*c+x*-v+g*-n-m*-o,this.z=g*c+x*-o+m*-v-p*-n,this},project:function(d){var l=this.x,h=this.y,r=this.z,n=d.val,v=n[0],o=n[1],c=n[2],m=n[3],p=n[4],g=n[5],x=n[6],E=n[7],P=n[8],S=n[9],M=n[10],b=n[11],A=n[12],L=n[13],R=n[14],O=n[15],D=1/(l*m+h*E+r*b+O);return this.x=(l*v+h*p+r*P+A)*D,this.y=(l*o+h*g+r*S+L)*D,this.z=(l*c+h*x+r*M+R)*D,this},projectViewMatrix:function(d,l){return this.applyMatrix4(d).applyMatrix4(l)},unprojectViewMatrix:function(d,l){return this.applyMatrix4(d).applyMatrix4(l)},unproject:function(d,l){var h=d.x,r=d.y,n=d.z,v=d.w,o=this.x-h,c=v-this.y-1-r,m=this.z;return this.x=2*o/n-1,this.y=2*c/v-1,this.z=2*m-1,this.project(l)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});y.ZERO=new y,y.RIGHT=new y(1,0,0),y.LEFT=new y(-1,0,0),y.UP=new y(0,-1,0),y.DOWN=new y(0,1,0),y.FORWARD=new y(0,0,1),y.BACK=new y(0,0,-1),y.ONE=new y(1,1,1),a.exports=y},51729:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r,n){this.x=0,this.y=0,this.z=0,this.w=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0,this.w=l.w||0):(this.x=l||0,this.y=h||0,this.z=r||0,this.w=n||0)},clone:function(){return new y(this.x,this.y,this.z,this.w)},copy:function(d){return this.x=d.x,this.y=d.y,this.z=d.z||0,this.w=d.w||0,this},equals:function(d){return this.x===d.x&&this.y===d.y&&this.z===d.z&&this.w===d.w},set:function(d,l,h,r){return typeof d=="object"?(this.x=d.x||0,this.y=d.y||0,this.z=d.z||0,this.w=d.w||0):(this.x=d||0,this.y=l||0,this.z=h||0,this.w=r||0),this},add:function(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z||0,this.w+=d.w||0,this},subtract:function(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z||0,this.w-=d.w||0,this},scale:function(d){return this.x*=d,this.y*=d,this.z*=d,this.w*=d,this},length:function(){var d=this.x,l=this.y,h=this.z,r=this.w;return Math.sqrt(d*d+l*l+h*h+r*r)},lengthSq:function(){var d=this.x,l=this.y,h=this.z,r=this.w;return d*d+l*l+h*h+r*r},normalize:function(){var d=this.x,l=this.y,h=this.z,r=this.w,n=d*d+l*l+h*h+r*r;return n>0&&(n=1/Math.sqrt(n),this.x=d*n,this.y=l*n,this.z=h*n,this.w=r*n),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,l){l===void 0&&(l=0);var h=this.x,r=this.y,n=this.z,v=this.w;return this.x=h+l*(d.x-h),this.y=r+l*(d.y-r),this.z=n+l*(d.z-n),this.w=v+l*(d.w-v),this},multiply:function(d){return this.x*=d.x,this.y*=d.y,this.z*=d.z||1,this.w*=d.w||1,this},divide:function(d){return this.x/=d.x,this.y/=d.y,this.z/=d.z||1,this.w/=d.w||1,this},distance:function(d){var l=d.x-this.x,h=d.y-this.y,r=d.z-this.z||0,n=d.w-this.w||0;return Math.sqrt(l*l+h*h+r*r+n*n)},distanceSq:function(d){var l=d.x-this.x,h=d.y-this.y,r=d.z-this.z||0,n=d.w-this.w||0;return l*l+h*h+r*r+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(d){var l=this.x,h=this.y,r=this.z,n=this.w,v=d.val;return this.x=v[0]*l+v[4]*h+v[8]*r+v[12]*n,this.y=v[1]*l+v[5]*h+v[9]*r+v[13]*n,this.z=v[2]*l+v[6]*h+v[10]*r+v[14]*n,this.w=v[3]*l+v[7]*h+v[11]*r+v[15]*n,this},transformQuat:function(d){var l=this.x,h=this.y,r=this.z,n=d.x,v=d.y,o=d.z,c=d.w,m=c*l+v*r-o*h,p=c*h+o*l-n*r,g=c*r+n*h-v*l,x=-n*l-v*h-o*r;return this.x=m*c+x*-n+p*-o-g*-v,this.y=p*c+x*-v+g*-n-m*-o,this.z=g*c+x*-o+m*-v-p*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});y.prototype.sub=y.prototype.subtract,y.prototype.mul=y.prototype.multiply,y.prototype.div=y.prototype.divide,y.prototype.dist=y.prototype.distance,y.prototype.distSq=y.prototype.distanceSq,y.prototype.len=y.prototype.length,y.prototype.lenSq=y.prototype.lengthSq,a.exports=y},9557:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return Math.abs(e-u)<=y};a.exports=T},1071:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(e>=u&&e<=y)return e;var d=y-u;return u+((e-u)%d+d)%d};a.exports=T},90447:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return Math.atan2(d-u,y-e)};a.exports=T},94240:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)};a.exports=T},84066:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return Math.atan2(u.x-e.x,u.y-e.y)};a.exports=T},9678:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return Math.atan2(y-e,d-u)};a.exports=T},76861:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=function(d){return d>Math.PI&&(d-=u.PI2),Math.abs(((d+u.TAU)%u.PI2-u.PI2)%u.PI2)};a.exports=y},37570:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};a.exports=T},87597:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61616),y=function(){return u(-Math.PI,Math.PI)};a.exports=y},74493:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61616),y=function(){return u(-180,180)};a.exports=y},19049:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(37570),y=function(d){return u(d+Math.PI)};a.exports=y},90612:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=function(d,l,h){return h===void 0&&(h=.05),d===l||(Math.abs(l-d)<=h||Math.abs(l-d)>=u.PI2-h?d=l:(Math.abs(l-d)>Math.PI&&(l<d?l+=u.PI2:l-=u.PI2),l>d?d+=h:l<d&&(d-=h))),d};a.exports=y},93954:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=u-e;if(y===0)return 0;var d=Math.floor((y- -180)/360);return y-d*360};a.exports=T},35786:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1071),y=function(d){return u(d,-Math.PI,Math.PI)};a.exports=y},62138:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1071),y=function(d){return u(d,-180,180)};a.exports=y},22153:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};a.exports=T},53996:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=e-y,h=u-d;return Math.sqrt(l*l+h*h)};a.exports=T},92951:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.x-u.x,d=e.y-u.y;return Math.sqrt(y*y+d*d)};a.exports=T},12161:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.x-u.x,d=e.y-u.y;return y*y+d*d};a.exports=T},38057:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return Math.max(Math.abs(e-y),Math.abs(u-d))};a.exports=T},33297:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(y-e,l)+Math.pow(d-u,l))};a.exports=T},90366:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return Math.abs(e-y)+Math.abs(u-d)};a.exports=T},35032:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=e-y,h=u-d;return l*l+h*h};a.exports=T},10130:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25265),y=e(57428),d=e(73214),l=e(71778),h=e(36468),r=e(88258),n=e(52910),v=e(67799),o=e(74083),c=e(92284),m=e(28035),p=e(8754);a.exports={Power0:n,Power1:v.Out,Power2:l.Out,Power3:o.Out,Power4:c.Out,Linear:n,Quad:v.Out,Cubic:l.Out,Quart:o.Out,Quint:c.Out,Sine:m.Out,Expo:r.Out,Circ:d.Out,Elastic:h.Out,Back:u.Out,Bounce:y.Out,Stepped:p,"Quad.easeIn":v.In,"Cubic.easeIn":l.In,"Quart.easeIn":o.In,"Quint.easeIn":c.In,"Sine.easeIn":m.In,"Expo.easeIn":r.In,"Circ.easeIn":d.In,"Elastic.easeIn":h.In,"Back.easeIn":u.In,"Bounce.easeIn":y.In,"Quad.easeOut":v.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":o.Out,"Quint.easeOut":c.Out,"Sine.easeOut":m.Out,"Expo.easeOut":r.Out,"Circ.easeOut":d.Out,"Elastic.easeOut":h.Out,"Back.easeOut":u.Out,"Bounce.easeOut":y.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":o.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":d.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":u.InOut,"Bounce.easeInOut":y.InOut}},25860:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=1.70158),e*e*((u+1)*e-u)};a.exports=T},45264:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=1.70158);var y=u*1.525;return(e*=2)<1?.5*(e*e*((y+1)*e-y)):.5*((e-=2)*e*((y+1)*e+y)+2)};a.exports=T},36699:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=1.70158),--e*e*((u+1)*e+u)+1};a.exports=T},25265:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};a.exports=T},24799:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=!1;return e<.5?(e=1-e*2,u=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,u?(1-e)*.5:e*.5+.5};a.exports=T},60819:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};a.exports=T},57428:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.sqrt(1-e*e)};a.exports=T},7280:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};a.exports=T},18058:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(1- --e*e)};a.exports=T},73214:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e};a.exports=T},63180:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};a.exports=T},16518:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e+1};a.exports=T},71778:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u===void 0&&(u=.1),y===void 0&&(y=.1),e===0)return 0;if(e===1)return 1;var d=y/4;return u<1?u=1:d=y*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(e-=1))*Math.sin((e-d)*(2*Math.PI)/y))};a.exports=T},50325:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u===void 0&&(u=.1),y===void 0&&(y=.1),e===0)return 0;if(e===1)return 1;var d=y/4;return u<1?u=1:d=y*Math.asin(1/u)/(2*Math.PI),(e*=2)<1?-.5*(u*Math.pow(2,10*(e-=1))*Math.sin((e-d)*(2*Math.PI)/y)):u*Math.pow(2,-10*(e-=1))*Math.sin((e-d)*(2*Math.PI)/y)*.5+1};a.exports=T},84074:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u===void 0&&(u=.1),y===void 0&&(y=.1),e===0)return 0;if(e===1)return 1;var d=y/4;return u<1?u=1:d=y*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*e)*Math.sin((e-d)*(2*Math.PI)/y)+1};a.exports=T},36468:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.pow(2,10*(e-1))-.001};a.exports=T},10357:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};a.exports=T},14894:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.pow(2,-10*e)};a.exports=T},88258:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e};a.exports=T},52910:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=e(43927)},77471:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e};a.exports=T},83863:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};a.exports=T},44383:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*(2-e)};a.exports=T},67799:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e};a.exports=T},55248:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};a.exports=T},23135:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1- --e*e*e*e};a.exports=T},74083:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e*e};a.exports=T},98759:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};a.exports=T},26670:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e*e*e+1};a.exports=T},92284:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};a.exports=T},66333:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};a.exports=T},37255:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};a.exports=T},28035:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=1),e<=0?0:e>=1?1:((u*e|0)+1)*(1/u)};a.exports=T},8754:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=e(52770)},17247:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=1e-4),Math.ceil(e-u)};a.exports=T},88456:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return y===void 0&&(y=1e-4),Math.abs(e-u)<y};a.exports=T},61824:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===void 0&&(u=1e-4),Math.floor(e+u)};a.exports=T},41935:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return y===void 0&&(y=1e-4),e>u-y};a.exports=T},54726:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return y===void 0&&(y=1e-4),e<u+y};a.exports=T},52778:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),y=e(98611),d={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};d=y(!1,d,u),a.exports=d},63210:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22824),y=function(d,l){for(var h=0,r=d.length-1,n=0;n<=r;n++)h+=Math.pow(1-l,r-n)*Math.pow(l,n)*d[n]*u(r,n);return h};a.exports=y},88332:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14976),y=function(d,l){var h=d.length-1,r=h*l,n=Math.floor(r);return d[0]===d[h]?(l<0&&(n=Math.floor(r=h*(1+l))),u(r-n,d[(n-1+h)%h],d[n],d[(n+1)%h],d[(n+2)%h])):l<0?d[0]-(u(-r,d[0],d[0],d[1],d[1])-d[0]):l>1?d[h]-(u(r-h,d[h],d[h],d[h-1],d[h-1])-d[h]):u(r-n,d[n?n-1:0],d[n],d[h<n+1?h:n+1],d[h<n+2?h:n+2])};a.exports=y},34631:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(l,h){var r=1-l;return r*r*r*h}function e(l,h){var r=1-l;return 3*r*r*l*h}function u(l,h){return 3*(1-l)*l*l*h}function y(l,h){return l*l*l*h}var d=function(l,h,r,n,v){return T(l,h)+e(l,r)+u(l,n)+y(l,v)};a.exports=d},47614:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(42798),y=function(d,l){var h=d.length-1,r=h*l,n=Math.floor(r);return l<0?u(d[0],d[1],r):l>1?u(d[h],d[h-1],h-r):u(d[n],d[n+1>h?h:n+1],r-n)};a.exports=y},16252:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(d,l){var h=1-d;return h*h*l}function e(d,l){return 2*(1-d)*d*l}function u(d,l){return d*d*l}var y=function(d,l,h,r){return T(d,l)+e(d,h)+u(d,r)};a.exports=y},44521:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(5514),y=function(d,l,h){return l+(h-l)*u(d,0,1)};a.exports=y},45507:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(87736),y=function(d,l,h){return l+(h-l)*u(d,0,1)};a.exports=y},48528:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=Math.log(e)/.6931471805599453;return 1<<Math.ceil(u)};a.exports=T},28621:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e>0&&(e&e-1)===0&&u>0&&(u&u-1)===0};a.exports=T},2018:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0&&(e&e-1)===0};a.exports=T},73773:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l){l===void 0&&(l=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],l&&this.init(l)},rnd:function(){var d=2091639*this.s0+this.c*23283064365386963e-26;return this.c=d|0,this.s0=this.s1,this.s1=this.s2,this.s2=d-this.c,this.s2},hash:function(d){var l,h=this.n;d=d.toString();for(var r=0;r<d.length;r++)h+=d.charCodeAt(r),l=.02519603282416938*h,h=l>>>0,l-=h,l*=h,h=l>>>0,l-=h,h+=l*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(d){typeof d=="string"?this.state(d):this.sow(d)},sow:function(d){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!d)for(var l=0;l<d.length&&d[l]!=null;l++){var h=d[l];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(d,l){return Math.floor(this.realInRange(0,l-d+1)+d)},between:function(d,l){return Math.floor(this.realInRange(0,l-d+1)+d)},realInRange:function(d,l){return this.frac()*(l-d)+d},normal:function(){return 1-2*this.frac()},uuid:function(){var d="",l="";for(l=d="";d++<36;l+=~d%5|d*3&4?(d^15?8^this.frac()*(d^20?16:4):4).toString(16):"-");return l},pick:function(d){return d[this.integerInRange(0,d.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(d){return d[~~(Math.pow(this.frac(),2)*(d.length-1)+.5)]},timestamp:function(d,l){return this.realInRange(d||9466848e5,l||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(d){return typeof d=="string"&&d.match(/^!rnd/)&&(d=d.split(","),this.c=parseFloat(d[1]),this.s0=parseFloat(d[2]),this.s1=parseFloat(d[3]),this.s2=parseFloat(d[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(d){for(var l=d.length-1,h=l;h>0;h--){var r=Math.floor(this.frac()*(h+1)),n=d[r];d[r]=d[h],d[h]=n}return d}});a.exports=y},82127:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return y===void 0&&(y=0),u===0?e:(e-=y,e=u*Math.ceil(e/u),d?(y+e)/u:y+e)};a.exports=T},84314:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return y===void 0&&(y=0),u===0?e:(e-=y,e=u*Math.floor(e/u),d?(y+e)/u:y+e)};a.exports=T},88462:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){return y===void 0&&(y=0),u===0?e:(e-=y,e=u*Math.round(e/u),d?(y+e)/u:y+e)};a.exports=T},23679:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86459),y=e(98611),d={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};d.Sound=e(56751),d=y(!1,d,u),a.exports=d,e.g.Phaser=d},62832:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(7864),d=e(1539),l=new u({Extends:d,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(r,n,v,o,c){d.call(this,r,n,v,o,c),this.body=null}});a.exports=l},66150:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(75606),d=e(53996),l=e(35032),h=e(99523),r=e(72632),n=e(30657),v=e(2732),o=e(15147),c=e(91963),m=e(7599),p=e(93736),g=e(85233),x=new u({initialize:function(P){this.scene=P,this.systems=P.sys,this.config=this.getConfig(),this.world,this.add,P.sys.events.once(m.BOOT,this.boot,this),P.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new h(this.world));var E=this.systems.events;r(this.config,"customUpdate",!1)||E.on(m.UPDATE,this.world.update,this.world),E.on(m.POST_UPDATE,this.world.postUpdate,this.world),E.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,P=this.systems.settings.physics,S=n(r(P,"arcade",{}),r(E,"arcade",{}));return S},overlap:function(E,P,S,M,b){return S===void 0&&(S=null),M===void 0&&(M=null),b===void 0&&(b=S),this.world.collideObjects(E,P,S,M,b,!0)},collide:function(E,P,S,M,b){return S===void 0&&(S=null),M===void 0&&(M=null),b===void 0&&(b=S),this.world.collideObjects(E,P,S,M,b,!1)},collideTiles:function(E,P,S,M,b){return this.world.collideTiles(E,P,S,M,b)},overlapTiles:function(E,P,S,M,b){return this.world.overlapTiles(E,P,S,M,b)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,P,S,M,b,A){M===void 0&&(M=60);var L=Math.atan2(S-E.y,P-E.x);return E.body.acceleration.setToPolar(L,M),b!==void 0&&A!==void 0&&E.body.maxVelocity.set(b,A),L},accelerateToObject:function(E,P,S,M,b){return this.accelerateTo(E,P.x,P.y,S,M,b)},closest:function(E,P){P||(P=this.world.bodies.entries);for(var S=Number.MAX_VALUE,M=null,b=E.x,A=E.y,L=P.length,R=0;R<L;R++){var O=P[R],D=O.body||O;if(!(E===O||E===D||E===D.gameObject||E===D.center)){var B=l(b,A,D.center.x,D.center.y);B<S&&(M=O,S=B)}}return M},furthest:function(E,P){P||(P=this.world.bodies.entries);for(var S=-1,M=null,b=E.x,A=E.y,L=P.length,R=0;R<L;R++){var O=P[R],D=O.body||O;if(!(E===O||E===D||E===D.gameObject||E===D.center)){var B=l(b,A,D.center.x,D.center.y);B>S&&(M=O,S=B)}}return M},moveTo:function(E,P,S,M,b){M===void 0&&(M=60),b===void 0&&(b=0);var A=Math.atan2(S-E.y,P-E.x);return b>0&&(M=d(E.x,E.y,P,S)/(b/1e3)),E.body.velocity.setToPolar(A,M),A},moveToObject:function(E,P,S,M){return this.moveTo(E,P.x,P.y,S,M)},velocityFromAngle:function(E,P,S){return P===void 0&&(P=60),S===void 0&&(S=new p),S.setToPolar(y(E),P)},velocityFromRotation:function(E,P,S){return P===void 0&&(P=60),S===void 0&&(S=new p),S.setToPolar(E,P)},overlapRect:function(E,P,S,M,b,A){return o(this.world,E,P,S,M,b,A)},overlapCirc:function(E,P,S,M,b){return v(this.world,E,P,S,M,b)},shutdown:function(){if(!!this.world){var E=this.systems.events;E.off(m.UPDATE,this.world.update,this.world),E.off(m.POST_UPDATE,this.world.postUpdate,this.world),E.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",x,"arcadePhysics"),a.exports=x},25084:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(7864),d=e(13747),l=new u({Extends:d,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(r,n,v,o,c){d.call(this,r,n,v,o,c),this.body=null}});a.exports=l},97602:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(47401),d=e(27037),l=e(23701),h=e(74118),r=e(94287),n=e(93736),v=new u({initialize:function(c,m){var p=64,g=64,x={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=m!==void 0;E&&m.displayWidth&&(p=m.displayWidth,g=m.displayHeight),E||(m=x),this.world=c,this.gameObject=E?m:void 0,this.isBody=!0,this.transform={x:m.x,y:m.y,rotation:m.angle,scaleX:m.scaleX,scaleY:m.scaleY,displayOriginX:m.displayOriginX,displayOriginY:m.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(m.x-m.scaleX*m.displayOriginX,m.y-m.scaleY*m.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=m.angle,this.preRotation=m.angle,this.width=p,this.height=g,this.sourceWidth=p,this.sourceHeight=g,m.frame&&(this.sourceWidth=m.frame.realWidth,this.sourceHeight=m.frame.realHeight),this.halfWidth=Math.abs(p/2),this.halfHeight=Math.abs(g/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=y.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=y.DYNAMIC_BODY,this._sx=m.scaleX,this._sy=m.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var o=this.gameObject,c=this.transform;if(o.parentContainer){var m=o.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=m.tx,c.y=m.ty,c.rotation=l(m.rotation),c.scaleX=m.scaleX,c.scaleY=m.scaleY,c.displayOriginX=o.displayOriginX,c.displayOriginY=o.displayOriginY}else c.x=o.x,c.y=o.y,c.rotation=o.angle,c.scaleX=o.scaleX,c.scaleY=o.scaleY,c.displayOriginX=o.displayOriginX,c.displayOriginY=o.displayOriginY;var p=!1;if(this.syncBounds){var g=o.getBounds(this._bounds);this.width=g.width,this.height=g.height,p=!0}else{var x=Math.abs(c.scaleX),E=Math.abs(c.scaleY);(this._sx!==x||this._sy!==E)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*E,this._sx=x,this._sy=E,p=!0)}p&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var o=this.transform;this.position.x=o.x+o.scaleX*(this.offset.x-o.displayOriginX),this.position.y=o.y+o.scaleY*(this.offset.y-o.displayOriginY),this.updateCenter()},resetFlags:function(o){o===void 0&&(o=!1);var c=this.wasTouching,m=this.touching,p=this.blocked;o?(c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1):(c.none=m.none,c.up=m.up,c.down=m.down,c.left=m.left,c.right=m.right),m.none=!0,m.up=!1,m.down=!1,m.left=!1,m.right=!1,p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(o,c){o&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),o&&this.update(c)},update:function(o){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,o);var c=this.velocity.x,m=this.velocity.y;this.newVelocity.set(c*o,m*o),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(m,c),this.speed=Math.sqrt(c*c+m*m),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(d.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var o=this.position.x-this.prevFrame.x,c=this.position.y-this.prevFrame.y,m=this.gameObject;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&o!==0&&(o<0&&o<-p?o=-p:o>0&&o>p&&(o=p)),g!==0&&c!==0&&(c<0&&c<-g?c=-g:c>0&&c>g&&(c=g)),m&&(m.x+=o,m.y+=c)}o<0?this.facing=y.FACING_LEFT:o>0&&(this.facing=y.FACING_RIGHT),c<0?this.facing=y.FACING_UP:c>0&&(this.facing=y.FACING_DOWN),this.allowRotation&&m&&(m.angle+=this.deltaZ()),this._tx=o,this._ty=c},setBoundsRectangle:function(o){return this.customBoundsRectangle=o||this.world.bounds,this},checkWorldBounds:function(){var o=this.position,c=this.customBoundsRectangle,m=this.world.checkCollision,p=this.worldBounce?-this.worldBounce.x:-this.bounce.x,g=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return o.x<c.x&&m.left?(o.x=c.x,this.velocity.x*=p,this.blocked.left=!0,x=!0):this.right>c.right&&m.right&&(o.x=c.right-this.width,this.velocity.x*=p,this.blocked.right=!0,x=!0),o.y<c.y&&m.up?(o.y=c.y,this.velocity.y*=g,this.blocked.up=!0,x=!0):this.bottom>c.bottom&&m.down&&(o.y=c.bottom-this.height,this.velocity.y*=g,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(o,c){return c===void 0&&(c=o),this.offset.set(o,c),this},setGameObject:function(o,c){return c===void 0&&(c=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=o,o.body&&(o.body=this),this.setSize(),this.world.add(this),this.enable=c,this},setSize:function(o,c,m){m===void 0&&(m=!0);var p=this.gameObject;if(p&&(!o&&p.frame&&(o=p.frame.realWidth),!c&&p.frame&&(c=p.frame.realHeight)),this.sourceWidth=o,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),m&&p&&p.getCenter){var g=(p.width-o)/2,x=(p.height-c)/2;this.offset.set(g,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(o,c,m){return c===void 0&&(c=this.offset.x),m===void 0&&(m=this.offset.y),o>0?(this.isCircle=!0,this.radius=o,this.sourceWidth=o*2,this.sourceHeight=o*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,m),this.updateCenter()):this.isCircle=!1,this},reset:function(o,c){this.stop();var m=this.gameObject;m&&(m.setPosition(o,c),this.rotation=m.angle,this.preRotation=m.angle);var p=this.position;m&&m.getTopLeft?m.getTopLeft(p):p.set(o,c),this.prev.copy(p),this.prevFrame.copy(p),m&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,c){if(!this.isCircle)return r(this,o,c);if(this.radius>0&&o>=this.left&&o<=this.right&&c>=this.top&&c<=this.bottom){var m=(this.center.x-o)*(this.center.x-o),p=(this.center.y-c)*(this.center.y-c);return m+p<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(o){var c=this.position,m=c.x+this.halfWidth,p=c.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor),this.isCircle?o.strokeCircle(m,p,this.width/2):(this.checkCollision.up&&o.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&o.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&o.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&o.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(o.lineStyle(o.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),o.lineBetween(m,p,m+this.velocity.x/2,p+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(o,c,m,p){o===void 0&&(o=!0),this.collideWorldBounds=o;var g=c!==void 0,x=m!==void 0;return(g||x)&&(this.worldBounce||(this.worldBounce=new n),g&&(this.worldBounce.x=c),x&&(this.worldBounce.y=m)),p!==void 0&&(this.onWorldBounds=p),this},setVelocity:function(o,c){return this.velocity.set(o,c),o=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(o*o+c*c),this},setVelocityX:function(o){return this.setVelocity(o,this.velocity.y)},setVelocityY:function(o){return this.setVelocity(this.velocity.x,o)},setMaxVelocity:function(o,c){return this.maxVelocity.set(o,c),this},setMaxVelocityX:function(o){return this.maxVelocity.x=o,this},setMaxVelocityY:function(o){return this.maxVelocity.y=o,this},setMaxSpeed:function(o){return this.maxSpeed=o,this},setBounce:function(o,c){return this.bounce.set(o,c),this},setBounceX:function(o){return this.bounce.x=o,this},setBounceY:function(o){return this.bounce.y=o,this},setAcceleration:function(o,c){return this.acceleration.set(o,c),this},setAccelerationX:function(o){return this.acceleration.x=o,this},setAccelerationY:function(o){return this.acceleration.y=o,this},setAllowDrag:function(o){return o===void 0&&(o=!0),this.allowDrag=o,this},setAllowGravity:function(o){return o===void 0&&(o=!0),this.allowGravity=o,this},setAllowRotation:function(o){return o===void 0&&(o=!0),this.allowRotation=o,this},setDrag:function(o,c){return this.drag.set(o,c),this},setDamping:function(o){return this.useDamping=o,this},setDragX:function(o){return this.drag.x=o,this},setDragY:function(o){return this.drag.y=o,this},setGravity:function(o,c){return this.gravity.set(o,c),this},setGravityX:function(o){return this.gravity.x=o,this},setGravityY:function(o){return this.gravity.y=o,this},setFriction:function(o,c){return this.friction.set(o,c),this},setFrictionX:function(o){return this.friction.x=o,this},setFrictionY:function(o){return this.friction.y=o,this},setAngularVelocity:function(o){return this.angularVelocity=o,this},setAngularAcceleration:function(o){return this.angularAcceleration=o,this},setAngularDrag:function(o){return this.angularDrag=o,this},setMass:function(o){return this.mass=o,this},setImmovable:function(o){return o===void 0&&(o=!0),this.immovable=o,this},setEnable:function(o){return o===void 0&&(o=!0),this.enable=o,this},processX:function(o,c,m,p){this.x+=o,this.updateCenter(),c!==null&&(this.velocity.x=c);var g=this.blocked;m&&(g.left=!0,g.none=!1),p&&(g.right=!0,g.none=!1)},processY:function(o,c,m,p){this.y+=o,this.updateCenter(),c!==null&&(this.velocity.y=c);var g=this.blocked;m&&(g.up=!0,g.none=!1),p&&(g.down=!0,g.none=!1)},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});a.exports=v},3909:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r,n,v,o,c){this.world=l,this.name="",this.active=!0,this.overlapOnly=h,this.object1=r,this.object2=n,this.collideCallback=v,this.processCallback=o,this.callbackContext=c},setName:function(d){return this.name=d,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});a.exports=y},99523:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(62832),y=e(25084),d=e(97602),l=e(56694),h=e(47401),r=e(10481),n=e(66634),v=e(46346),o=new l({initialize:function(m){this.world=m,this.scene=m.scene,this.sys=m.scene.sys},collider:function(c,m,p,g,x){return this.world.addCollider(c,m,p,g,x)},overlap:function(c,m,p,g,x){return this.world.addOverlap(c,m,p,g,x)},existing:function(c,m){var p=m?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(c,p),c},staticImage:function(c,m,p,g){var x=new u(this.scene,c,m,p,g);return this.sys.displayList.add(x),this.world.enableBody(x,h.STATIC_BODY),x},image:function(c,m,p,g){var x=new u(this.scene,c,m,p,g);return this.sys.displayList.add(x),this.world.enableBody(x,h.DYNAMIC_BODY),x},staticSprite:function(c,m,p,g){var x=new y(this.scene,c,m,p,g);return this.sys.displayList.add(x),this.sys.updateList.add(x),this.world.enableBody(x,h.STATIC_BODY),x},sprite:function(c,m,p,g){var x=new y(this.scene,c,m,p,g);return this.sys.displayList.add(x),this.sys.updateList.add(x),this.world.enableBody(x,h.DYNAMIC_BODY),x},staticGroup:function(c,m){return this.sys.updateList.add(new v(this.world,this.world.scene,c,m))},group:function(c,m){return this.sys.updateList.add(new r(this.world,this.world.scene,c,m))},body:function(c,m,p,g){var x=new d(this.world);return x.position.set(c,m),p&&g&&x.setSize(p,g),this.world.add(x,h.DYNAMIC_BODY),x},staticBody:function(c,m,p,g){var x=new n(this.world);return x.position.set(c,m),p&&g&&x.setSize(p,g),this.world.add(x,h.STATIC_BODY),x},destroy:function(){this.world=null,this.scene=null,this.sys=null}});a.exports=o},75671:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47401),y=function(d,l,h,r){var n=0,v=d.deltaAbsX()+l.deltaAbsX()+r;return d._dx===0&&l._dx===0?(d.embedded=!0,l.embedded=!0):d._dx>l._dx?(n=d.right-l.x,n>v&&!h||d.checkCollision.right===!1||l.checkCollision.left===!1?n=0:(d.touching.none=!1,d.touching.right=!0,l.touching.none=!1,l.touching.left=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.right=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.left=!0))):d._dx<l._dx&&(n=d.x-l.width-l.x,-n>v&&!h||d.checkCollision.left===!1||l.checkCollision.right===!1?n=0:(d.touching.none=!1,d.touching.left=!0,l.touching.none=!1,l.touching.right=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.left=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.right=!0))),d.overlapX=n,l.overlapX=n,n};a.exports=y},66185:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47401),y=function(d,l,h,r){var n=0,v=d.deltaAbsY()+l.deltaAbsY()+r;return d._dy===0&&l._dy===0?(d.embedded=!0,l.embedded=!0):d._dy>l._dy?(n=d.bottom-l.y,n>v&&!h||d.checkCollision.down===!1||l.checkCollision.up===!1?n=0:(d.touching.none=!1,d.touching.down=!0,l.touching.none=!1,l.touching.up=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.down=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.up=!0))):d._dy<l._dy&&(n=d.y-l.bottom,-n>v&&!h||d.checkCollision.up===!1||l.checkCollision.down===!1?n=0:(d.touching.none=!1,d.touching.up=!0,l.touching.none=!1,l.touching.down=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.up=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.down=!0))),d.overlapY=n,l.overlapY=n,n};a.exports=y},10481:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25084),y=e(56694),d=e(47401),l=e(72632),h=e(59192),r=e(42911),n=new y({Extends:h,initialize:function(o,c,m,p){if(!m&&!p)p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(r(m))p=m,m=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(m)&&r(m[0])){p=m[0];var g=this;m.forEach(function(x){x.internalCreateCallback=g.createCallbackHandler,x.internalRemoveCallback=g.removeCallbackHandler}),m=null}else p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=o,p.classType=l(p,"classType",u),this.physicsType=d.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:l(p,"collideWorldBounds",!1),setBoundsRectangle:l(p,"customBoundsRectangle",null),setAccelerationX:l(p,"accelerationX",0),setAccelerationY:l(p,"accelerationY",0),setAllowDrag:l(p,"allowDrag",!0),setAllowGravity:l(p,"allowGravity",!0),setAllowRotation:l(p,"allowRotation",!0),setDamping:l(p,"useDamping",!1),setBounceX:l(p,"bounceX",0),setBounceY:l(p,"bounceY",0),setDragX:l(p,"dragX",0),setDragY:l(p,"dragY",0),setEnable:l(p,"enable",!0),setGravityX:l(p,"gravityX",0),setGravityY:l(p,"gravityY",0),setFrictionX:l(p,"frictionX",0),setFrictionY:l(p,"frictionY",0),setMaxSpeed:l(p,"maxSpeed",-1),setMaxVelocityX:l(p,"maxVelocityX",1e4),setMaxVelocityY:l(p,"maxVelocityY",1e4),setVelocityX:l(p,"velocityX",0),setVelocityY:l(p,"velocityY",0),setAngularVelocity:l(p,"angularVelocity",0),setAngularAcceleration:l(p,"angularAcceleration",0),setAngularDrag:l(p,"angularDrag",0),setMass:l(p,"mass",1),setImmovable:l(p,"immovable",!1)},h.call(this,c,m,p),this.type="PhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,d.DYNAMIC_BODY);var o=v.body;for(var c in this.defaults)o[c](this.defaults[c])},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},setVelocity:function(v,o,c){c===void 0&&(c=0);for(var m=this.getChildren(),p=0;p<m.length;p++)m[p].body.velocity.set(v+p*c,o+p*c);return this},setVelocityX:function(v,o){o===void 0&&(o=0);for(var c=this.getChildren(),m=0;m<c.length;m++)c[m].body.velocity.x=v+m*o;return this},setVelocityY:function(v,o){o===void 0&&(o=0);for(var c=this.getChildren(),m=0;m<c.length;m++)c[m].body.velocity.y=v+m*o;return this}});a.exports=n},22916:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,u,y,d,l,h,r,n,v,o,c,m,p,g,x,E,P=function(R,O,D){T=R,e=O;var B=T.velocity.x,G=e.velocity.x;return u=T.pushable,n=T._dx<0,v=T._dx>0,o=T._dx===0,g=Math.abs(T.right-e.x)<=Math.abs(e.right-T.x),h=G-B*T.bounce.x,y=e.pushable,c=e._dx<0,m=e._dx>0,p=e._dx===0,x=!g,r=B-G*e.bounce.x,E=Math.abs(D),S()},S=function(){return v&&g&&e.blocked.right?(T.processX(-E,h,!1,!0),1):n&&x&&e.blocked.left?(T.processX(E,h,!0),1):m&&x&&T.blocked.right?(e.processX(-E,r,!1,!0),2):c&&g&&T.blocked.left?(e.processX(E,r,!0),2):0},M=function(){var R=T.velocity.x,O=e.velocity.x,D=Math.sqrt(O*O*e.mass/T.mass)*(O>0?1:-1),B=Math.sqrt(R*R*T.mass/e.mass)*(R>0?1:-1),G=(D+B)*.5;return D-=G,B-=G,d=G+D*T.bounce.x,l=G+B*e.bounce.x,n&&x?b(0):c&&g?b(1):v&&g?b(2):m&&x?b(3):!1},b=function(R){if(u&&y)E*=.5,R===0||R===3?(T.processX(E,d),e.processX(-E,l)):(T.processX(-E,d),e.processX(E,l));else if(u&&!y)R===0||R===3?T.processX(E,h,!0):T.processX(-E,h,!1,!0);else if(!u&&y)R===0||R===3?e.processX(-E,r,!1,!0):e.processX(E,r,!0);else{var O=E*.5;R===0?p?(T.processX(E,0,!0),e.processX(0,null,!1,!0)):m?(T.processX(O,0,!0),e.processX(-O,0,!1,!0)):(T.processX(O,e.velocity.x,!0),e.processX(-O,null,!1,!0)):R===1?o?(T.processX(0,null,!1,!0),e.processX(E,0,!0)):v?(T.processX(-O,0,!1,!0),e.processX(O,0,!0)):(T.processX(-O,null,!1,!0),e.processX(O,T.velocity.x,!0)):R===2?p?(T.processX(-E,0,!1,!0),e.processX(0,null,!0)):c?(T.processX(-O,0,!1,!0),e.processX(O,0,!0)):(T.processX(-O,e.velocity.x,!1,!0),e.processX(O,null,!0)):R===3&&(o?(T.processX(0,null,!0),e.processX(-E,0,!1,!0)):n?(T.processX(O,0,!0),e.processX(-O,0,!1,!0)):(T.processX(O,e.velocity.y,!0),e.processX(-O,null,!1,!0)))}return!0},A=function(R){R===1?e.velocity.x=0:g?e.processX(E,r,!0):e.processX(-E,r,!1,!0),T.moves&&(e.y+=(T.y-T.prev.y)*T.friction.y,e._dy=e.y-e.prev.y)},L=function(R){R===2?T.velocity.x=0:x?T.processX(E,h,!0):T.processX(-E,h,!1,!0),e.moves&&(T.y+=(e.y-e.prev.y)*e.friction.y,T._dy=T.y-T.prev.y)};a.exports={BlockCheck:S,Check:M,Set:P,Run:b,RunImmovableBody1:A,RunImmovableBody2:L}},67050:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,u,y,d,l,h,r,n,v,o,c,m,p,g,x,E,P=function(R,O,D){T=R,e=O;var B=T.velocity.y,G=e.velocity.y;return u=T.pushable,n=T._dy<0,v=T._dy>0,o=T._dy===0,g=Math.abs(T.bottom-e.y)<=Math.abs(e.bottom-T.y),h=G-B*T.bounce.y,y=e.pushable,c=e._dy<0,m=e._dy>0,p=e._dy===0,x=!g,r=B-G*e.bounce.y,E=Math.abs(D),S()},S=function(){return v&&g&&e.blocked.down?(T.processY(-E,h,!1,!0),1):n&&x&&e.blocked.up?(T.processY(E,h,!0),1):m&&x&&T.blocked.down?(e.processY(-E,r,!1,!0),2):c&&g&&T.blocked.up?(e.processY(E,r,!0),2):0},M=function(){var R=T.velocity.y,O=e.velocity.y,D=Math.sqrt(O*O*e.mass/T.mass)*(O>0?1:-1),B=Math.sqrt(R*R*T.mass/e.mass)*(R>0?1:-1),G=(D+B)*.5;return D-=G,B-=G,d=G+D*T.bounce.y,l=G+B*e.bounce.y,n&&x?b(0):c&&g?b(1):v&&g?b(2):m&&x?b(3):!1},b=function(R){if(u&&y)E*=.5,R===0||R===3?(T.processY(E,d),e.processY(-E,l)):(T.processY(-E,d),e.processY(E,l));else if(u&&!y)R===0||R===3?T.processY(E,h,!0):T.processY(-E,h,!1,!0);else if(!u&&y)R===0||R===3?e.processY(-E,r,!1,!0):e.processY(E,r,!0);else{var O=E*.5;R===0?p?(T.processY(E,0,!0),e.processY(0,null,!1,!0)):m?(T.processY(O,0,!0),e.processY(-O,0,!1,!0)):(T.processY(O,e.velocity.y,!0),e.processY(-O,null,!1,!0)):R===1?o?(T.processY(0,null,!1,!0),e.processY(E,0,!0)):v?(T.processY(-O,0,!1,!0),e.processY(O,0,!0)):(T.processY(-O,null,!1,!0),e.processY(O,T.velocity.y,!0)):R===2?p?(T.processY(-E,0,!1,!0),e.processY(0,null,!0)):c?(T.processY(-O,0,!1,!0),e.processY(O,0,!0)):(T.processY(-O,e.velocity.y,!1,!0),e.processY(O,null,!0)):R===3&&(o?(T.processY(0,null,!0),e.processY(-E,0,!1,!0)):n?(T.processY(O,0,!0),e.processY(-O,0,!1,!0)):(T.processY(O,e.velocity.y,!0),e.processY(-O,null,!1,!0)))}return!0},A=function(R){R===1?e.velocity.y=0:g?e.processY(E,r,!0):e.processY(-E,r,!1,!0),T.moves&&(e.x+=(T.x-T.prev.x)*T.friction.x,e._dx=e.x-e.prev.x)},L=function(R){R===2?T.velocity.y=0:x?T.processY(E,h,!0):T.processY(-E,h,!1,!0),e.moves&&(T.x+=(e.x-e.prev.x)*e.friction.x,T._dx=T.x-T.prev.x)};a.exports={BlockCheck:S,Check:M,Set:P,Run:b,RunImmovableBody1:A,RunImmovableBody2:L}},61777:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75671),y=e(22916),d=function(l,h,r,n,v){v===void 0&&(v=u(l,h,r,n));var o=l.immovable,c=h.immovable;if(r||v===0||o&&c||l.customSeparateX||h.customSeparateX)return v!==0||l.embedded&&h.embedded;var m=y.Set(l,h,v);return!o&&!c?m>0?!0:y.Check():(o?y.RunImmovableBody1(m):c&&y.RunImmovableBody2(m),!0)};a.exports=d},25299:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66185),y=e(67050),d=function(l,h,r,n,v){v===void 0&&(v=u(l,h,r,n));var o=l.immovable,c=h.immovable;if(r||v===0||o&&c||l.customSeparateY||h.customSeparateY)return v!==0||l.embedded&&h.embedded;var m=y.Set(l,h,v);return!o&&!c?m>0?!0:y.Check():(o?y.RunImmovableBody1(m):c&&y.RunImmovableBody2(m),!0)};a.exports=d},66634:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),y=e(56694),d=e(47401),l=e(94287),h=e(93736),r=new y({initialize:function(v,o){var c=64,m=64,p={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},g=o!==void 0;g&&o.displayWidth&&(c=o.displayWidth,m=o.displayHeight),g||(o=p),this.world=v,this.gameObject=g?o:void 0,this.isBody=!0,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(o.x-c*o.originX,o.y-m*o.originY),this.width=c,this.height=m,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=d.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(n,v){return n&&n!==this.gameObject&&(this.gameObject.body=null,n.body=this,this.gameObject=n),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var n=this.gameObject;return n.getTopLeft(this.position),this.width=n.displayWidth,this.height=n.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(n,v){return v===void 0&&(v=n),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(n,v,o){o===void 0&&(o=!0);var c=this.gameObject;if(!n&&c.frame&&(n=c.frame.realWidth),!v&&c.frame&&(v=c.frame.realHeight),this.world.staticTree.remove(this),this.width=n,this.height=v,this.halfWidth=Math.floor(n/2),this.halfHeight=Math.floor(v/2),o&&c.getCenter){var m=c.displayWidth/2,p=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(m-this.halfWidth,p-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(n,v,o){return v===void 0&&(v=this.offset.x),o===void 0&&(o=this.offset.y),n>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=n,this.width=n*2,this.height=n*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,o),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(n,v){var o=this.gameObject;n===void 0&&(n=o.x),v===void 0&&(v=o.y),this.world.staticTree.remove(this),o.setPosition(n,v),o.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(n){return n.x=this.x,n.y=this.y,n.right=this.right,n.bottom=this.bottom,n},hitTest:function(n,v){return this.isCircle?u(this,n,v):l(this,n,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(n){var v=this.position,o=v.x+this.halfWidth,c=v.y+this.halfHeight;this.debugShowBody&&(n.lineStyle(n.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?n.strokeCircle(o,c,this.width/2):n.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(n){return n<=0&&(n=.1),this.mass=n,this},x:{get:function(){return this.position.x},set:function(n){this.world.staticTree.remove(this),this.position.x=n,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(n){this.world.staticTree.remove(this),this.position.y=n,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});a.exports=r},46346:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25084),y=e(56694),d=e(47401),l=e(72632),h=e(59192),r=e(42911),n=new y({Extends:h,initialize:function(o,c,m,p){!m&&!p?p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:u}:r(m)?(p=m,m=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=l(p,"classType",u)):Array.isArray(m)&&r(m[0])?(p=m,m=null,p.forEach(function(g){g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=l(g,"classType",u)})):p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=o,this.physicsType=d.STATIC_BODY,h.call(this,c,m,p),this.type="StaticPhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,d.STATIC_BODY)},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var v=this.children.entries,o=0;o<v.length;o++)v[o].body.reset();return this}});a.exports=n},85233:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(94240),y=e(97602),d=e(82897),l=e(56694),h=e(3909),r=e(47401),n=e(53996),v=e(92951),o=e(6659),c=e(27037),m=e(88456),p=e(41935),g=e(54726),x=e(75671),E=e(66185),P=e(44662),S=e(10850),M=e(83392),b=e(74623),A=e(25163),L=e(74118),R=e(68687),O=e(27354),D=e(61777),B=e(25299),G=e(58403),z=e(66634),X=e(28808),U=e(69360),V=e(93736),N=e(1071),W=new l({Extends:o,initialize:function(I,k){o.call(this),this.scene=I,this.bodies=new G,this.staticBodies=new G,this.pendingDestroy=new G,this.colliders=new b,this.gravity=new V(S(k,"gravity.x",0),S(k,"gravity.y",0)),this.bounds=new L(S(k,"x",0),S(k,"y",0),S(k,"width",I.sys.scale.width),S(k,"height",I.sys.scale.height)),this.checkCollision={up:S(k,"checkCollision.up",!0),down:S(k,"checkCollision.down",!0),left:S(k,"checkCollision.left",!0),right:S(k,"checkCollision.right",!0)},this.fps=S(k,"fps",60),this.fixedStep=S(k,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=S(k,"timeScale",1),this.OVERLAP_BIAS=S(k,"overlapBias",4),this.TILE_BIAS=S(k,"tileBias",16),this.forceX=S(k,"forceX",!1),this.isPaused=S(k,"isPaused",!1),this._total=0,this.drawDebug=S(k,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:S(k,"debugShowBody",!0),debugShowStaticBody:S(k,"debugShowStaticBody",!0),debugShowVelocity:S(k,"debugShowVelocity",!0),bodyDebugColor:S(k,"debugBodyColor",16711935),staticBodyDebugColor:S(k,"debugStaticBodyColor",255),velocityDebugColor:S(k,"debugVelocityColor",65280)},this.maxEntries=S(k,"maxEntries",16),this.useTree=S(k,"useTree",!0),this.tree=new R(this.maxEntries),this.staticTree=new R(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(F,I){I===void 0&&(I=r.DYNAMIC_BODY),Array.isArray(F)||(F=[F]);for(var k=0;k<F.length;k++){var Y=F[k];if(Y.isParent)for(var H=Y.getChildren(),K=0;K<H.length;K++){var j=H[K];j.isParent?this.enable(j,I):this.enableBody(j,I)}else this.enableBody(Y,I)}},enableBody:function(F,I){return I===void 0&&(I=r.DYNAMIC_BODY),F.hasTransformComponent&&(F.body||(I===r.DYNAMIC_BODY?F.body=new y(this,F):I===r.STATIC_BODY&&(F.body=new z(this,F))),this.add(F.body)),F},add:function(F){return F.physicsType===r.DYNAMIC_BODY?this.bodies.set(F):F.physicsType===r.STATIC_BODY&&(this.staticBodies.set(F),this.staticTree.insert(F)),F.enable=!0,F},disable:function(F){Array.isArray(F)||(F=[F]);for(var I=0;I<F.length;I++){var k=F[I];if(k.isParent)for(var Y=k.getChildren(),H=0;H<Y.length;H++){var K=Y[H];K.isParent?this.disable(K):this.disableBody(K.body)}else this.disableBody(k.body)}},disableBody:function(F){this.remove(F),F.enable=!1},remove:function(F){F.physicsType===r.DYNAMIC_BODY?(this.tree.remove(F),this.bodies.delete(F)):F.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(F),this.staticTree.remove(F))},createDebugGraphic:function(){var F=this.scene.sys.add.graphics({x:0,y:0});return F.setDepth(Number.MAX_VALUE),this.debugGraphic=F,this.drawDebug=!0,F},setBounds:function(F,I,k,Y,H,K,j,J){return this.bounds.setTo(F,I,k,Y),H!==void 0&&this.setBoundsCollision(H,K,j,J),this},setBoundsCollision:function(F,I,k,Y){return F===void 0&&(F=!0),I===void 0&&(I=!0),k===void 0&&(k=!0),Y===void 0&&(Y=!0),this.checkCollision.left=F,this.checkCollision.right=I,this.checkCollision.up=k,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(c.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(c.RESUME),this},addCollider:function(F,I,k,Y,H){k===void 0&&(k=null),Y===void 0&&(Y=null),H===void 0&&(H=k);var K=new h(this,!1,F,I,k,Y,H);return this.colliders.add(K),K},addOverlap:function(F,I,k,Y,H){k===void 0&&(k=null),Y===void 0&&(Y=null),H===void 0&&(H=k);var K=new h(this,!0,F,I,k,Y,H);return this.colliders.add(K),K},removeCollider:function(F){return this.colliders.remove(F),this},setFPS:function(F){return this.fps=F,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(F,I){if(!(this.isPaused||this.bodies.size===0)){var k,Y=this._frameTime,H=this._frameTimeMS*this.timeScale;this._elapsed+=I;var K,j=this.bodies.entries,J=this._elapsed>=H;for(this.fixedStep||(Y=I*.001,J=!0,this._elapsed=0),k=0;k<j.length;k++)K=j[k],K.enable&&K.preUpdate(J,Y);if(J){this._elapsed-=H,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(j));var Q=this.colliders.update();for(k=0;k<Q.length;k++){var Z=Q[k];Z.active&&Z.update()}this.emit(c.WORLD_STEP,Y)}for(;this._elapsed>=H;)this._elapsed-=H,this.step(Y)}},step:function(F){var I,k,Y=this.bodies.entries,H=Y.length;for(I=0;I<H;I++)k=Y[I],k.enable&&k.update(F);this.useTree&&(this.tree.clear(),this.tree.load(Y));var K=this.colliders.update();for(I=0;I<K.length;I++){var j=K[I];j.active&&j.update()}this.emit(c.WORLD_STEP,F),this.stepsLastFrame++},postUpdate:function(){var F,I,k=this.bodies.entries,Y=k.length,H=this.bodies,K=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,F=0;F<Y;F++)I=k[F],I.enable&&I.postUpdate();if(this.drawDebug){var j=this.debugGraphic;for(j.clear(),F=0;F<Y;F++)I=k[F],I.willDrawDebug()&&I.drawDebug(j);for(k=K.entries,Y=k.length,F=0;F<Y;F++)I=k[F],I.willDrawDebug()&&I.drawDebug(j)}var J=this.pendingDestroy;if(J.size>0){var Q=this.tree,Z=this.staticTree;for(k=J.entries,Y=k.length,F=0;F<Y;F++)I=k[F],I.physicsType===r.DYNAMIC_BODY?(Q.remove(I),H.delete(I)):I.physicsType===r.STATIC_BODY&&(Z.remove(I),K.delete(I)),I.world=void 0,I.gameObject=void 0;J.clear()}},updateMotion:function(F,I){F.allowRotation&&this.computeAngularVelocity(F,I),this.computeVelocity(F,I)},computeAngularVelocity:function(F,I){var k=F.angularVelocity,Y=F.angularAcceleration,H=F.angularDrag,K=F.maxAngular;Y?k+=Y*I:F.allowDrag&&H&&(H*=I,p(k-H,0,.1)?k-=H:g(k+H,0,.1)?k+=H:k=0),k=d(k,-K,K);var j=k-F.angularVelocity;F.angularVelocity+=j,F.rotation+=F.angularVelocity*I},computeVelocity:function(F,I){var k=F.velocity.x,Y=F.acceleration.x,H=F.drag.x,K=F.maxVelocity.x,j=F.velocity.y,J=F.acceleration.y,Q=F.drag.y,Z=F.maxVelocity.y,q=F.speed,et=F.maxSpeed,tt=F.allowDrag,it=F.useDamping;F.allowGravity&&(k+=(this.gravity.x+F.gravity.x)*I,j+=(this.gravity.y+F.gravity.y)*I),Y?k+=Y*I:tt&&H&&(it?(H=Math.pow(H,I),k*=H,q=Math.sqrt(k*k+j*j),m(q,0,.001)&&(k=0)):(H*=I,p(k-H,0,.01)?k-=H:g(k+H,0,.01)?k+=H:k=0)),J?j+=J*I:tt&&Q&&(it?(Q=Math.pow(Q,I),j*=Q,q=Math.sqrt(k*k+j*j),m(q,0,.001)&&(j=0)):(Q*=I,p(j-Q,0,.01)?j-=Q:g(j+Q,0,.01)?j+=Q:j=0)),k=d(k,-K,K),j=d(j,-Z,Z),F.velocity.set(k,j),et>-1&&F.velocity.length()>et&&(F.velocity.normalize().scale(et),q=et),F.speed=q},separate:function(F,I,k,Y,H){var K,j,J=!1,Q=!0;if(!F.enable||!I.enable||F.checkCollision.none||I.checkCollision.none||!this.intersects(F,I)||k&&k.call(Y,F.gameObject,I.gameObject)===!1)return J;if(F.isCircle||I.isCircle){var Z=this.separateCircle(F,I,H);Z.result?(J=!0,Q=!1):(K=Z.x,j=Z.y,Q=!0)}if(Q){var q=!1,et=!1,tt=this.OVERLAP_BIAS;H?(q=D(F,I,H,tt,K),et=B(F,I,H,tt,j)):this.forceX||Math.abs(this.gravity.y+F.gravity.y)<Math.abs(this.gravity.x+F.gravity.x)?(q=D(F,I,H,tt,K),this.intersects(F,I)&&(et=B(F,I,H,tt,j))):(et=B(F,I,H,tt,j),this.intersects(F,I)&&(q=D(F,I,H,tt,K))),J=q||et}return J&&(H?(F.onOverlap||I.onOverlap)&&this.emit(c.OVERLAP,F.gameObject,I.gameObject,F,I):(F.onCollide||I.onCollide)&&this.emit(c.COLLIDE,F.gameObject,I.gameObject,F,I)),J},separateCircle:function(F,I,k){x(F,I,!1,0),E(F,I,!1,0);var Y=F.isCircle,H=I.isCircle,K=F.center,j=I.center,J=F.immovable,Q=I.immovable,Z=F.velocity,q=I.velocity,et=0,tt=!0;if(Y!==H){tt=!1;var it=K.x,ut=K.y,ot=F.halfWidth,ht=I.position.x,st=I.position.y,at=I.right,nt=I.bottom;H&&(it=j.x,ut=j.y,ot=I.halfWidth,ht=F.position.x,st=F.position.y,at=F.right,nt=F.bottom),ut<st?it<ht?et=n(it,ut,ht,st)-ot:it>at&&(et=n(it,ut,at,st)-ot):ut>nt&&(it<ht?et=n(it,ut,ht,nt)-ot:it>at&&(et=n(it,ut,at,nt)-ot)),et*=-1}else et=F.halfWidth+I.halfWidth-v(K,j);F.overlapR=et,I.overlapR=et;var gt=u(K,j),dt=(et+M.EPSILON)*Math.cos(gt),mt=(et+M.EPSILON)*Math.sin(gt),Ft={overlap:et,result:!1,x:dt,y:mt};if(k&&(!tt||tt&&et!==0))return Ft.result=!0,Ft;if(!tt&&et===0||J&&Q||F.customSeparateX||I.customSeparateX)return Ft.x=void 0,Ft.y=void 0,Ft;var pt=!F.pushable&&!I.pushable;if(tt){var ft=K.x-j.x,Mt=K.y-j.y,xt=Math.sqrt(Math.pow(ft,2)+Math.pow(Mt,2)),Tt=(j.x-K.x)/xt||0,zt=(j.y-K.y)/xt||0,Ct=2*(Z.x*Tt+Z.y*zt-q.x*Tt-q.y*zt)/(F.mass+I.mass);(J||Q)&&(Ct*=2),J||(Z.x=Z.x-Ct/F.mass*Tt,Z.y=Z.y-Ct/F.mass*zt,Z.multiply(F.bounce)),Q||(q.x=q.x+Ct/I.mass*Tt,q.y=q.y+Ct/I.mass*zt,q.multiply(I.bounce)),!J&&!Q&&(dt*=.5,mt*=.5),J||(F.x-=dt,F.y-=mt,F.updateCenter()),Q||(I.x+=dt,I.y+=mt,I.updateCenter()),Ft.result=!0}else!J||F.pushable||pt?(F.x-=dt,F.y-=mt,F.updateCenter()):(!Q||I.pushable||pt)&&(I.x+=dt,I.y+=mt,I.updateCenter()),Ft.x=void 0,Ft.y=void 0;return Ft},intersects:function(F,I){return F===I?!1:!F.isCircle&&!I.isCircle?!(F.right<=I.left||F.bottom<=I.top||F.left>=I.right||F.top>=I.bottom):F.isCircle?I.isCircle?v(F.center,I.center)<=F.halfWidth+I.halfWidth:this.circleBodyIntersects(F,I):this.circleBodyIntersects(I,F)},circleBodyIntersects:function(F,I){var k=d(F.center.x,I.left,I.right),Y=d(F.center.y,I.top,I.bottom),H=(F.center.x-k)*(F.center.x-k),K=(F.center.y-Y)*(F.center.y-Y);return H+K<=F.halfWidth*F.halfWidth},overlap:function(F,I,k,Y,H){return k===void 0&&(k=null),Y===void 0&&(Y=null),H===void 0&&(H=k),this.collideObjects(F,I,k,Y,H,!0)},collide:function(F,I,k,Y,H){return k===void 0&&(k=null),Y===void 0&&(Y=null),H===void 0&&(H=k),this.collideObjects(F,I,k,Y,H,!1)},collideObjects:function(F,I,k,Y,H,K){var j,J;F.isParent&&(F.physicsType===void 0||I===void 0||F===I)&&(F=F.children.entries),I&&I.isParent&&I.physicsType===void 0&&(I=I.children.entries);var Q=Array.isArray(F),Z=Array.isArray(I);if(this._total=0,!Q&&!Z)this.collideHandler(F,I,k,Y,H,K);else if(!Q&&Z)for(j=0;j<I.length;j++)this.collideHandler(F,I[j],k,Y,H,K);else if(Q&&!Z)if(I)for(j=0;j<F.length;j++)this.collideHandler(F[j],I,k,Y,H,K);else for(j=0;j<F.length;j++){var q=F[j];for(J=j+1;J<F.length;J++)j!==J&&this.collideHandler(q,F[J],k,Y,H,K)}else for(j=0;j<F.length;j++)for(J=0;J<I.length;J++)this.collideHandler(F[j],I[J],k,Y,H,K);return this._total>0},collideHandler:function(F,I,k,Y,H,K){if(I===void 0&&F.isParent)return this.collideGroupVsGroup(F,F,k,Y,H,K);if(!F||!I)return!1;if(F.body||F.isBody){if(I.body||I.isBody)return this.collideSpriteVsSprite(F,I,k,Y,H,K);if(I.isParent)return this.collideSpriteVsGroup(F,I,k,Y,H,K);if(I.isTilemap)return this.collideSpriteVsTilemapLayer(F,I,k,Y,H,K)}else if(F.isParent){if(I.body||I.isBody)return this.collideSpriteVsGroup(I,F,k,Y,H,K);if(I.isParent)return this.collideGroupVsGroup(F,I,k,Y,H,K);if(I.isTilemap)return this.collideGroupVsTilemapLayer(F,I,k,Y,H,K)}else if(F.isTilemap){if(I.body||I.isBody)return this.collideSpriteVsTilemapLayer(I,F,k,Y,H,K);if(I.isParent)return this.collideGroupVsTilemapLayer(I,F,k,Y,H,K)}},collideSpriteVsSprite:function(F,I,k,Y,H,K){var j=F.isBody?F:F.body,J=I.isBody?I:I.body;return!j||!J?!1:(this.separate(j,J,Y,H,K)&&(k&&k.call(H,F,I),this._total++),!0)},collideSpriteVsGroup:function(F,I,k,Y,H,K){var j=F.isBody?F:F.body;if(!(I.length===0||!j||!j.enable||j.checkCollision.none)){var J,Q,Z;if(this.useTree||I.physicsType===r.STATIC_BODY){var q=this.treeMinMax;q.minX=j.left,q.minY=j.top,q.maxX=j.right,q.maxY=j.bottom;var et=I.physicsType===r.DYNAMIC_BODY?this.tree.search(q):this.staticTree.search(q);for(Q=et.length,J=0;J<Q;J++)Z=et[J],!(j===Z||!Z.enable||Z.checkCollision.none||!I.contains(Z.gameObject))&&this.separate(j,Z,Y,H,K)&&(k&&k.call(H,j.gameObject,Z.gameObject),this._total++)}else{var tt=I.getChildren(),it=I.children.entries.indexOf(F);for(Q=tt.length,J=0;J<Q;J++)Z=tt[J].body,!(!Z||J===it||!Z.enable)&&this.separate(j,Z,Y,H,K)&&(k&&k.call(H,j.gameObject,Z.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(F,I,k,Y,H,K){var j=F.getChildren();if(j.length===0)return!1;for(var J=!1,Q=0;Q<j.length;Q++)(j[Q].body||j[Q].isBody)&&this.collideSpriteVsTilemapLayer(j[Q],I,k,Y,H,K)&&(J=!0);return J},collideTiles:function(F,I,k,Y,H){return I.length===0||F.body&&!F.body.enable||F.isBody&&!F.enable?!1:this.collideSpriteVsTilesHandler(F,I,k,Y,H,!1,!1)},overlapTiles:function(F,I,k,Y,H){return I.length===0||F.body&&!F.body.enable||F.isBody&&!F.enable?!1:this.collideSpriteVsTilesHandler(F,I,k,Y,H,!0,!1)},collideSpriteVsTilemapLayer:function(F,I,k,Y,H,K){var j=F.isBody?F:F.body;if(!j.enable||j.checkCollision.none)return!1;var J=j.x,Q=j.y,Z=j.width,q=j.height,et=I.layer;if(et.tileWidth>et.baseTileWidth){var tt=(et.tileWidth-et.baseTileWidth)*I.scaleX;J-=tt,Z+=tt}if(et.tileHeight>et.baseTileHeight){var it=(et.tileHeight-et.baseTileHeight)*I.scaleY;q+=it}var ut=K?null:this.tileFilterOptions,ot=P(J,Q,Z,q,ut,I.scene.cameras.main,I.layer);return ot.length===0?!1:this.collideSpriteVsTilesHandler(F,ot,k,Y,H,K,!0)},collideSpriteVsTilesHandler:function(F,I,k,Y,H,K,j){for(var J=F.isBody?F:F.body,Q,Z={left:0,right:0,top:0,bottom:0},q,et=!1,tt=0;tt<I.length;tt++){Q=I[tt],q=Q.tilemapLayer;var it=q.tileToWorldXY(Q.x,Q.y);Z.left=it.x,Z.top=it.y,Q.baseHeight!==Q.height&&(Z.top-=(Q.height-Q.baseHeight)*q.scaleY),Z.right=Z.left+Q.width*q.scaleX,Z.bottom=Z.top+Q.height*q.scaleY,X(Z,J)&&(!Y||Y.call(H,F,Q))&&A(Q,F)&&(K||O(tt,J,Q,Z,q,this.TILE_BIAS,j))&&(this._total++,et=!0,k&&k.call(H,F,Q),K&&J.onOverlap?this.emit(c.TILE_OVERLAP,F,Q,J):J.onCollide&&this.emit(c.TILE_COLLIDE,F,Q,J))}return et},collideGroupVsGroup:function(F,I,k,Y,H,K){if(!(F.length===0||I.length===0))for(var j=F.getChildren(),J=0;J<j.length;J++)this.collideSpriteVsGroup(j[J],I,k,Y,H,K)},wrap:function(F,I){F.body?this.wrapObject(F,I):F.getChildren?this.wrapArray(F.getChildren(),I):Array.isArray(F)?this.wrapArray(F,I):this.wrapObject(F,I)},wrapArray:function(F,I){for(var k=0;k<F.length;k++)this.wrapObject(F[k],I)},wrapObject:function(F,I){I===void 0&&(I=0),F.x=N(F.x,this.bounds.left-I,this.bounds.right+I),F.y=N(F.y,this.bounds.top-I,this.bounds.bottom+I)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});a.exports=W},5321:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAcceleration:function(e,u){return this.body.acceleration.set(e,u),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};a.exports=T},29257:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};a.exports=T},62122:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e,u){return this.body.bounce.set(e,u),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,u,y,d){return this.body.setCollideWorldBounds(e,u,y,d),this}};a.exports=T},99803:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDebug:function(e,u,y){return this.debugShowBody=e,this.debugShowVelocity=u,this.debugBodyColor=y,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};a.exports=T},87145:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDrag:function(e,u){return this.body.drag.set(e,u),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};a.exports=T},96174:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={enableBody:function(e,u,y,d,l){return e&&this.body.reset(u,y),d&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,u){return e===void 0&&(e=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};a.exports=T},51702:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,u){return this.body.friction.set(e,u),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};a.exports=T},25578:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setGravity:function(e,u){return this.body.gravity.set(e,u),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};a.exports=T},72029:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};a.exports=T},34566:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setMass:function(e){return this.body.mass=e,this}};a.exports=T},2732:(a,T,e)=>{var u=e(15147),y=e(26673),d=e(22184),l=e(26535),h=function(r,n,v,o,c,m){var p=u(r,n-o,v-o,2*o,2*o,c,m);if(p.length===0)return p;for(var g=new y(n,v,o),x=new y,E=[],P=0;P<p.length;P++){var S=p[P];S.isCircle?(x.setTo(S.center.x,S.center.y,S.halfWidth),d(g,x)&&E.push(S)):l(g,S)&&E.push(S)}return E};a.exports=h},15147:a=>{var T=function(e,u,y,d,l,h,r){h===void 0&&(h=!0),r===void 0&&(r=!1);var n=[],v=[],o=e.treeMinMax;if(o.minX=u,o.minY=y,o.maxX=u+d,o.maxY=y+l,r&&(v=e.staticTree.search(o)),h&&e.useTree)n=e.tree.search(o);else if(h){var c=e.bodies,m={position:{x:u,y},left:u,top:y,right:u+d,bottom:y+l,isCircle:!1},p=e.intersects;c.iterate(function(g){p(g,m)&&n.push(g)})}return v.concat(n)};a.exports=T},57527:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};a.exports=T},77687:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setOffset:function(e,u){return this.body.setOffset(e,u),this},setSize:function(e,u,y){return this.body.setSize(e,u,y),this},setBodySize:function(e,u,y){return this.body.setSize(e,u,y),this},setCircle:function(e,u,y){return this.body.setCircle(e,u,y),this}};a.exports=T},66536:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setVelocity:function(e,u){return this.body.setVelocity(e,u),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,u){return this.body.maxVelocity.set(e,u),this}};a.exports=T},7864:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};a.exports=T},22346:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collide"},95092:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="overlap"},15775:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},74142:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},22825:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="tilecollide"},10851:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="tileoverlap"},7543:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="worldbounds"},1487:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="worldstep"},27037:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47401),y=e(98611),d={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};d=y(!1,d,u),a.exports=d},25163:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,u,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,u,e):!0};a.exports=T},98209:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u<0?(e.blocked.none=!1,e.blocked.left=!0):u>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=u,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};a.exports=T},72792:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u<0?(e.blocked.none=!1,e.blocked.up=!0):u>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=u,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};a.exports=T},27354:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14405),y=e(52926),d=e(28808),l=function(h,r,n,v,o,c,m){var p=v.left,g=v.top,x=v.right,E=v.bottom,P=n.faceLeft||n.faceRight,S=n.faceTop||n.faceBottom;if(m||(P=!0,S=!0),!P&&!S)return!1;var M=0,b=0,A=0,L=1;if(r.deltaAbsX()>r.deltaAbsY()?A=-1:r.deltaAbsX()<r.deltaAbsY()&&(L=-1),r.deltaX()!==0&&r.deltaY()!==0&&P&&S&&(A=Math.min(Math.abs(r.position.x-x),Math.abs(r.right-p)),L=Math.min(Math.abs(r.position.y-E),Math.abs(r.bottom-g))),A<L){if(P&&(M=u(r,n,p,x,c,m),M!==0&&!d(v,r)))return!0;S&&(b=y(r,n,g,E,c,m))}else{if(S&&(b=y(r,n,g,E,c,m),b!==0&&!d(v,r)))return!0;P&&(M=u(r,n,p,x,c,m))}return M!==0||b!==0};a.exports=l},14405:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98209),y=function(d,l,h,r,n,v){var o=0,c=l.faceLeft,m=l.faceRight,p=l.collideLeft,g=l.collideRight;return v||(c=!0,m=!0,p=!0,g=!0),d.deltaX()<0&&g&&d.checkCollision.left?m&&d.x<r&&(o=d.x-r,o<-n&&(o=0)):d.deltaX()>0&&p&&d.checkCollision.right&&c&&d.right>h&&(o=d.right-h,o>n&&(o=0)),o!==0&&(d.customSeparateX?d.overlapX=o:u(d,o)),o};a.exports=y},52926:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72792),y=function(d,l,h,r,n,v){var o=0,c=l.faceTop,m=l.faceBottom,p=l.collideUp,g=l.collideDown;return v||(c=!0,m=!0,p=!0,g=!0),d.deltaY()<0&&g&&d.checkCollision.up?m&&d.y<r&&(o=d.y-r,o<-n&&(o=0)):d.deltaY()>0&&p&&d.checkCollision.down&&c&&d.bottom>h&&(o=d.bottom-h,o>n&&(o=0)),o!==0&&(d.customSeparateY?d.overlapY=o:u(d,o)),o};a.exports=y},28808:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return!(u.right<=e.left||u.bottom<=e.top||u.position.x>=e.right||u.position.y>=e.bottom)};a.exports=T},8413:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};a.exports=u},53954:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Arcade:e(39977),Matter:e(45949)}},63568:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(93736),d=new u({initialize:function(){this.boundsCenter=new y,this.centerDiff=new y},parseBody:function(l){if(l=l.hasOwnProperty("body")?l.body:l,!l.hasOwnProperty("bounds")||!l.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,r=this.centerDiff,n=l.bounds.max.x-l.bounds.min.x,v=l.bounds.max.y-l.bounds.min.y,o=n*l.centerOfMass.x,c=v*l.centerOfMass.y;return h.set(n/2,v/2),r.set(o-h.x,c-h.y),!0},getTopLeft:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h+n.x+v.x,r+n.y+v.y)}return!1},getTopCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h+v.x,r+n.y+v.y)}return!1},getTopRight:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h-(n.x-v.x),r+n.y+v.y)}return!1},getLeftCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h+n.x+v.x,r+v.y)}return!1},getCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.centerDiff;return new y(h+n.x,r+n.y)}return!1},getRightCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h-(n.x-v.x),r+v.y)}return!1},getBottomLeft:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h+n.x+v.x,r-(n.y-v.y))}return!1},getBottomCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h+v.x,r-(n.y-v.y))}return!1},getBottomRight:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var n=this.boundsCenter,v=this.centerDiff;return new y(h-(n.x-v.x),r-(n.y-v.y))}return!1}});a.exports=d},18171:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16929);u.Body=e(84125),u.Composite=e(11299),u.World=e(72005),u.Collision=e(63454),u.Detector=e(13657),u.Pairs=e(91327),u.Pair=e(70584),u.Query=e(13390),u.Resolver=e(44272),u.Constraint=e(52838),u.Common=e(68758),u.Engine=e(45775),u.Events=e(39073),u.Sleeping=e(22806),u.Plugin=e(84474),u.Bodies=e(68516),u.Composites=e(56643),u.Axes=e(50658),u.Bounds=e(84091),u.Svg=e(92765),u.Vector=e(10438),u.Vertices=e(39745),u.World.add=u.Composite.add,u.World.remove=u.Composite.remove,u.World.addComposite=u.Composite.addComposite,u.World.addBody=u.Composite.addBody,u.World.addConstraint=u.Composite.addConstraint,u.World.clear=u.Composite.clear,a.exports=u},72653:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),y=e(56694),d=e(56643),l=e(52838),h=e(92765),r=e(3860),n=e(7030),v=e(73658),o=e(84720),c=e(10998),m=e(72829),p=e(88596),g=e(39745),x=new y({initialize:function(P){this.world=P,this.scene=P.scene,this.sys=P.scene.sys},rectangle:function(E,P,S,M,b){var A=u.rectangle(E,P,S,M,b);return this.world.add(A),A},trapezoid:function(E,P,S,M,b,A){var L=u.trapezoid(E,P,S,M,b,A);return this.world.add(L),L},circle:function(E,P,S,M,b){var A=u.circle(E,P,S,M,b);return this.world.add(A),A},polygon:function(E,P,S,M,b){var A=u.polygon(E,P,S,M,b);return this.world.add(A),A},fromVertices:function(E,P,S,M,b,A,L){typeof S=="string"&&(S=g.fromPath(S));var R=u.fromVertices(E,P,S,M,b,A,L);return this.world.add(R),R},fromPhysicsEditor:function(E,P,S,M,b){b===void 0&&(b=!0);var A=c.parseBody(E,P,S,M);return b&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(E,P,S,M,b,A){M===void 0&&(M=1),b===void 0&&(b={}),A===void 0&&(A=!0);for(var L=S.getElementsByTagName("path"),R=[],O=0;O<L.length;O++){var D=h.pathToVertices(L[O],30);M!==1&&g.scale(D,M,M),R.push(D)}var B=u.fromVertices(E,P,R,b);return A&&this.world.add(B),B},fromJSON:function(E,P,S,M,b){M===void 0&&(M={}),b===void 0&&(b=!0);var A=m.parseBody(E,P,S,M);return A&&b&&this.world.add(A),A},imageStack:function(E,P,S,M,b,A,L,R,O){L===void 0&&(L=0),R===void 0&&(R=0),O===void 0&&(O={});var D=this.world,B=this.sys.displayList;O.addToWorld=!1;var G=d.stack(S,M,b,A,L,R,function(z,X){var U=new n(D,z,X,E,P,O);return B.add(U),U.body});return D.add(G),G},stack:function(E,P,S,M,b,A,L){var R=d.stack(E,P,S,M,b,A,L);return this.world.add(R),R},pyramid:function(E,P,S,M,b,A,L){var R=d.pyramid(E,P,S,M,b,A,L);return this.world.add(R),R},chain:function(E,P,S,M,b,A){return d.chain(E,P,S,M,b,A)},mesh:function(E,P,S,M,b){return d.mesh(E,P,S,M,b)},newtonsCradle:function(E,P,S,M,b){var A=d.newtonsCradle(E,P,S,M,b);return this.world.add(A),A},car:function(E,P,S,M,b){var A=d.car(E,P,S,M,b);return this.world.add(A),A},softBody:function(E,P,S,M,b,A,L,R,O,D){var B=d.softBody(E,P,S,M,b,A,L,R,O,D);return this.world.add(B),B},joint:function(E,P,S,M,b){return this.constraint(E,P,S,M,b)},spring:function(E,P,S,M,b){return this.constraint(E,P,S,M,b)},constraint:function(E,P,S,M,b){M===void 0&&(M=1),b===void 0&&(b={}),b.bodyA=E.type==="body"?E:E.body,b.bodyB=P.type==="body"?P:P.body,isNaN(S)||(b.length=S),b.stiffness=M;var A=l.create(b);return this.world.add(A),A},worldConstraint:function(E,P,S,M){S===void 0&&(S=1),M===void 0&&(M={}),M.bodyB=E.type==="body"?E:E.body,isNaN(P)||(M.length=P),M.stiffness=S;var b=l.create(M);return this.world.add(b),b},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var P=new p(this.scene,this.world,E);return this.world.add(P.constraint),P},image:function(E,P,S,M,b){var A=new n(this.world,E,P,S,M,b);return this.sys.displayList.add(A),A},tileBody:function(E,P){return new o(this.world,E,P)},sprite:function(E,P,S,M,b){var A=new v(this.world,E,P,S,M,b);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(E,P,S){return r(this.world,E,P,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});a.exports=x},3860:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74527),y=e(72632),d=e(93736);function l(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var h=function(r,n,v,o){v===void 0&&(v={}),o===void 0&&(o=!0);var c=n.x,m=n.y;n.body={temp:!0,position:{x:c,y:m}};var p=[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity];if(p.forEach(function(x){for(var E in x)l(x[E])?Object.defineProperty(n,E,{get:x[E].get,set:x[E].set}):Object.defineProperty(n,E,{value:x[E]})}),n.world=r,n._tempVec2=new d(c,m),v.hasOwnProperty("type")&&v.type==="body")n.setExistingBody(v,o);else{var g=y(v,"shape",null);g||(g="rectangle"),v.addToWorld=o,n.setBody(g,v)}return n};a.exports=h},7030:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(74527),d=e(89980),l=e(72632),h=e(1539),r=e(58210),n=e(93736),v=new u({Extends:h,Mixins:[y.Bounce,y.Collision,y.Force,y.Friction,y.Gravity,y.Mass,y.Sensor,y.SetBody,y.Sleep,y.Static,y.Transform,y.Velocity,r],initialize:function(c,m,p,g,x,E){d.call(this,c.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,x),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new n(m,p);var P=l(E,"shape",null);P?this.setBody(P,E):this.setRectangle(this.width,this.height,E),this.setPosition(m,p),this.initPipeline()}});a.exports=v},50583:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),y=e(50658),d=e(68516),l=e(84125),h=e(63568),r=e(84091),n=e(56694),v=e(63454),o=e(68758),c=e(11299),m=e(56643),p=e(52838),g=e(13657),x=e(53996),E=e(72653),P=e(72632),S=e(10850),M=e(1675),b=e(80391),A=e(16929),L=e(44097),R=e(30657),O=e(70584),D=e(91327),B=e(84474),G=e(91963),z=e(13390),X=e(44272),U=e(7599),V=e(92765),N=e(10438),W=e(39745),F=e(31468);o.setDecomp(e(81084));var I=new n({initialize:function(Y){this.scene=Y,this.systems=Y.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=l,this.composite=c,this.collision=v,this.detector=g,this.pair=O,this.pairs=D,this.query=z,this.resolver=X,this.constraint=p,this.bodies=d,this.composites=m,this.axes=y,this.bounds=r,this.svg=V,this.vector=N,this.vertices=W,this.verts=W,this._tempVec2=N.create(),S(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),S(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),S(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),X._restingThresh=S(this.config,"restingThresh",4),X._restingThreshTangent=S(this.config,"restingThreshTangent",6),X._positionDampen=S(this.config,"positionDampen",.9),X._positionWarming=S(this.config,"positionWarming",.8),X._frictionNormalMultiplier=S(this.config,"frictionNormalMultiplier",5),Y.sys.events.once(U.BOOT,this.boot,this),Y.sys.events.on(U.START,this.start,this)},boot:function(){this.world=new F(this.scene,this.config),this.add=new E(this.world),this.bodyBounds=new h,this.systems.events.once(U.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new F(this.scene,this.config),this.add=new E(this.world));var k=this.systems.events;k.on(U.UPDATE,this.world.update,this.world),k.on(U.POST_UPDATE,this.world.postUpdate,this.world),k.once(U.SHUTDOWN,this.shutdown,this)},getConfig:function(){var k=this.systems.game.config.physics,Y=this.systems.settings.physics,H=R(P(Y,"matter",{}),P(k,"matter",{}));return H},enableAttractorPlugin:function(){return B.register(M),B.use(A,M),this},enableWrapPlugin:function(){return B.register(L),B.use(A,L),this},enableCollisionEventsPlugin:function(){return B.register(b),B.use(A,b),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(k,Y){this.world.step(k,Y)},containsPoint:function(k,Y,H){k=this.getMatterBodies(k);var K=N.create(Y,H),j=z.point(k,K);return j.length>0},intersectPoint:function(k,Y,H){H=this.getMatterBodies(H);var K=N.create(k,Y),j=[],J=z.point(H,K);return J.forEach(function(Q){j.indexOf(Q)===-1&&j.push(Q)}),j},intersectRect:function(k,Y,H,K,j,J){j===void 0&&(j=!1),J=this.getMatterBodies(J);var Q={min:{x:k,y:Y},max:{x:k+H,y:Y+K}},Z=[],q=z.region(J,Q,j);return q.forEach(function(et){Z.indexOf(et)===-1&&Z.push(et)}),Z},intersectRay:function(k,Y,H,K,j,J){j===void 0&&(j=1),J=this.getMatterBodies(J);for(var Q=[],Z=z.ray(J,N.create(k,Y),N.create(H,K),j),q=0;q<Z.length;q++)Q.push(Z[q].body);return Q},intersectBody:function(k,Y){Y=this.getMatterBodies(Y);for(var H=[],K=z.collides(k,Y),j=0;j<K.length;j++){var J=K[j];J.bodyA===k?H.push(J.bodyB):H.push(J.bodyA)}return H},overlap:function(k,Y,H,K,j){H===void 0&&(H=null),K===void 0&&(K=null),j===void 0&&(j=H),Array.isArray(k)||(k=[k]),k=this.getMatterBodies(k),Y=this.getMatterBodies(Y);for(var J=!1,Q=0;Q<k.length;Q++)for(var Z=k[Q],q=z.collides(Z,Y),et=0;et<q.length;et++){var tt=q[et],it=tt.bodyA.id===Z.id?tt.bodyB:tt.bodyA;if(!K||K.call(j,Z,it,tt)){if(J=!0,H)H.call(j,Z,it,tt);else if(!K)return!0}}return J},setCollisionCategory:function(k,Y){return k=this.getMatterBodies(k),k.forEach(function(H){H.collisionFilter.category=Y}),this},setCollisionGroup:function(k,Y){return k=this.getMatterBodies(k),k.forEach(function(H){H.collisionFilter.group=Y}),this},setCollidesWith:function(k,Y){k=this.getMatterBodies(k);var H=0;if(!Array.isArray(Y))H=Y;else for(var K=0;K<Y.length;K++)H|=Y[K];return k.forEach(function(j){j.collisionFilter.mask=H}),this},getMatterBodies:function(k){if(!k)return this.world.getAllBodies();Array.isArray(k)||(k=[k]);for(var Y=[],H=0;H<k.length;H++){var K=k[H].hasOwnProperty("body")?k[H].body:k[H];Y.push(K)}return Y},setVelocity:function(k,Y,H){k=this.getMatterBodies(k);var K=this._tempVec2;return K.x=Y,K.y=H,k.forEach(function(j){l.setVelocity(j,K)}),this},setVelocityX:function(k,Y){k=this.getMatterBodies(k);var H=this._tempVec2;return H.x=Y,k.forEach(function(K){H.y=K.velocity.y,l.setVelocity(K,H)}),this},setVelocityY:function(k,Y){k=this.getMatterBodies(k);var H=this._tempVec2;return H.y=Y,k.forEach(function(K){H.x=K.velocity.x,l.setVelocity(K,H)}),this},setAngularVelocity:function(k,Y){return k=this.getMatterBodies(k),k.forEach(function(H){l.setAngularVelocity(H,Y)}),this},applyForce:function(k,Y){k=this.getMatterBodies(k);var H=this._tempVec2;return k.forEach(function(K){H.x=K.position.x,H.y=K.position.y,l.applyForce(K,H,Y)}),this},applyForceFromPosition:function(k,Y,H,K){k=this.getMatterBodies(k);var j=this._tempVec2;return k.forEach(function(J){K===void 0&&(K=J.angle),j.x=H*Math.cos(K),j.y=H*Math.sin(K),l.applyForce(J,Y,j)}),this},applyForceFromAngle:function(k,Y,H){k=this.getMatterBodies(k);var K=this._tempVec2;return k.forEach(function(j){H===void 0&&(H=j.angle),K.x=Y*Math.cos(H),K.y=Y*Math.sin(H),l.applyForce(j,{x:j.position.x,y:j.position.y},K)}),this},getConstraintLength:function(k){var Y=k.pointA.x,H=k.pointA.y,K=k.pointB.x,j=k.pointB.y;return k.bodyA&&(Y+=k.bodyA.position.x,H+=k.bodyA.position.y),k.bodyB&&(K+=k.bodyB.position.x,j+=k.bodyB.position.y),x(Y,H,K,j)},alignBody:function(k,Y,H,K){k=k.hasOwnProperty("body")?k.body:k;var j;switch(K){case u.TOP_LEFT:case u.LEFT_TOP:j=this.bodyBounds.getTopLeft(k,Y,H);break;case u.TOP_CENTER:j=this.bodyBounds.getTopCenter(k,Y,H);break;case u.TOP_RIGHT:case u.RIGHT_TOP:j=this.bodyBounds.getTopRight(k,Y,H);break;case u.LEFT_CENTER:j=this.bodyBounds.getLeftCenter(k,Y,H);break;case u.CENTER:j=this.bodyBounds.getCenter(k,Y,H);break;case u.RIGHT_CENTER:j=this.bodyBounds.getRightCenter(k,Y,H);break;case u.LEFT_BOTTOM:case u.BOTTOM_LEFT:j=this.bodyBounds.getBottomLeft(k,Y,H);break;case u.BOTTOM_CENTER:j=this.bodyBounds.getBottomCenter(k,Y,H);break;case u.BOTTOM_RIGHT:case u.RIGHT_BOTTOM:j=this.bodyBounds.getBottomRight(k,Y,H);break}return j&&l.setPosition(k,j),this},shutdown:function(){var k=this.systems.events;this.world&&(k.off(U.UPDATE,this.world.update,this.world),k.off(U.POST_UPDATE,this.world.postUpdate,this.world)),k.off(U.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.systems=null}});G.register("MatterPhysics",I,"matterPhysics"),a.exports=I},73658:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),y=e(56694),d=e(74527),l=e(89980),h=e(72632),r=e(58210),n=e(13747),v=e(93736),o=new y({Extends:n,Mixins:[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity,r],initialize:function(m,p,g,x,E,P){l.call(this,m.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(x,E),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new v(p,g);var S=h(P,"shape",null);S?this.setBody(S,P):this.setRectangle(this.width,this.height,P),this.setPosition(p,g),this.initPipeline()}});a.exports=o},84720:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),y=e(84125),d=e(56694),l=e(74527),h=e(6659),r=e(72632),n=e(19256),v=e(39745),o=new d({Extends:h,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function(m,p,g){h.call(this),this.tile=p,this.world=m,p.physics.matterBody&&p.physics.matterBody.destroy(),p.physics.matterBody=this;var x=r(g,"body",null),E=r(g,"addToWorld",!0);if(x)this.setBody(x,E);else{var P=p.getCollisionGroup(),S=r(P,"objects",[]);S.length>0?this.setFromTileCollision(g):this.setFromTileRectangle(g)}if(p.flipX||p.flipY){var M={x:p.getCenterX(),y:p.getCenterY()},b=p.flipX?-1:1,A=p.flipY?-1:1;y.scale(x,b,A,M)}},setFromTileRectangle:function(c){c===void 0&&(c={}),n(c,"isStatic")||(c.isStatic=!0),n(c,"addToWorld")||(c.addToWorld=!0);var m=this.tile.getBounds(),p=m.x+m.width/2,g=m.y+m.height/2,x=u.rectangle(p,g,m.width,m.height,c);return this.setBody(x,c.addToWorld),this},setFromTileCollision:function(c){c===void 0&&(c={}),n(c,"isStatic")||(c.isStatic=!0),n(c,"addToWorld")||(c.addToWorld=!0);for(var m=this.tile.tilemapLayer.scaleX,p=this.tile.tilemapLayer.scaleY,g=this.tile.getLeft(),x=this.tile.getTop(),E=this.tile.getCollisionGroup(),P=r(E,"objects",[]),S=[],M=0;M<P.length;M++){var b=P[M],A=g+b.x*m,L=x+b.y*p,R=b.width*m,O=b.height*p,D=null;if(b.rectangle)D=u.rectangle(A+R/2,L+O/2,R,O,c);else if(b.ellipse)D=u.circle(A+R/2,L+O/2,R/2,c);else if(b.polygon||b.polyline){var B=b.polygon?b.polygon:b.polyline,G=B.map(function(U){return{x:U.x*m,y:U.y*p}}),z=v.create(G),X=v.centre(z);A+=X.x,L+=X.y,D=u.fromVertices(A,L,z,c)}D&&S.push(D)}return S.length===1?this.setBody(S[0],c.addToWorld):S.length>1&&(c.parts=S,this.setBody(y.create(c),c.addToWorld)),this},setBody:function(c,m){return m===void 0&&(m=!0),this.body&&this.removeBody(),this.body=c,this.body.gameObject=this,m&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});a.exports=o},10998:(a,T,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),y=e(84125),d=e(68758),l=e(72632),h=e(39745),r={parseBody:function(n,v,o,c){c===void 0&&(c={});for(var m=l(o,"fixtures",[]),p=[],g=0;g<m.length;g++)for(var x=this.parseFixture(m[g]),E=0;E<x.length;E++)p.push(x[E]);var P=d.clone(o,!0);d.extend(P,c,!0),delete P.fixtures,delete P.type;var S=y.create(P);return y.setParts(S,p),y.setPosition(S,{x:n,y:v}),S},parseFixture:function(n){var v=d.extend({},!1,n);delete v.circle,delete v.vertices;var o;if(n.circle){var c=l(n.circle,"x"),m=l(n.circle,"y"),p=l(n.circle,"radius");o=[u.circle(c,m,p,v)]}else n.vertices&&(o=this.parseVertices(n.vertices,v));return o},parseVertices:function(n,v){v===void 0&&(v={});for(var o=[],c=0;c<n.length;c++)h.clockwiseSort(n[c]),o.push(y.create(d.extend({position:h.centre(n[c]),vertices:n[c]},v)));return u.flagCoincidentParts(o)}};a.exports=r},72829:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),y=e(84125),d={parseBody:function(l,h,r,n){n===void 0&&(n={});var v,o=r.vertices;if(o.length===1)n.vertices=o[0],v=y.create(n),u.flagCoincidentParts(v.parts);else{for(var c=[],m=0;m<o.length;m++){var p=y.create({vertices:o[m]});c.push(p)}u.flagCoincidentParts(c),n.parts=c,v=y.create(n)}return v.label=r.label,y.setPosition(v,{x:l,y:h}),v}};a.exports=d},88596:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84091),y=e(56694),d=e(11299),l=e(52838),h=e(13657),r=e(35416),n=e(33963),v=e(30657),o=e(22806),c=e(93736),m=e(39745),p=new y({initialize:function(x,E,P){P===void 0&&(P={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new c,this.body=null,this.part=null,this.constraint=l.create(v(P,S)),this.world.on(r.BEFORE_UPDATE,this.update,this),x.sys.input.on(n.POINTER_DOWN,this.onDown,this),x.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(g){this.pointer||(this.pointer=g,this.camera=g.camera)},onUp:function(g){g===this.pointer&&(this.pointer=null)},getBody:function(g){var x=this.position,E=this.constraint;this.camera.getWorldPoint(g.x,g.y,x);for(var P=d.allBodies(this.world.localWorld),S=0;S<P.length;S++){var M=P[S];if(!M.ignorePointer&&u.contains(M.bounds,x)&&h.canCollide(M.collisionFilter,E.collisionFilter)&&this.hitTestBody(M,x))return this.world.emit(r.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function(g,x){for(var E=this.constraint,P=g.parts.length,S=P>1?1:0,M=S;M<P;M++){var b=g.parts[M];if(m.contains(b.vertices,x))return E.pointA=x,E.pointB={x:x.x-g.position.x,y:x.y-g.position.y},E.bodyB=g,E.angleB=g.angle,o.set(g,!1),this.part=b,this.body=g,!0}return!1},update:function(){var g=this.pointer,x=this.body;if(!this.active||!g){x&&this.stopDrag();return}if(!g.isDown&&x){this.stopDrag();return}else if(g.isDown){if(!x&&!this.getBody(g))return;x=this.body;var E=this.position,P=this.constraint;this.camera.getWorldPoint(g.x,g.y,E),P.pointA.x=E.x,P.pointA.y=E.y,o.set(x,!1),this.world.emit(r.DRAG,x,this)}},stopDrag:function(){var g=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,g&&this.world.emit(r.DRAG_END,g,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});a.exports=p},31468:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),y=e(84125),d=e(56694),l=e(68758),h=e(11299),r=e(45775),n=e(6659),v=e(35416),o=e(72632),c=e(10850),m=e(84125),p=e(39073),g=e(84720),x=e(72005),E=e(10438),P=new d({Extends:n,initialize:function(M,b){n.call(this),this.scene=M,this.engine=r.create(b),this.localWorld=this.engine.world;var A=c(b,"gravity",null);A?this.setGravity(A.x,A.y,A.scale):A===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=c(b,"enabled",!0),this.correction=c(b,"correction",1),this.getDelta=c(b,"getDelta",this.update60Hz);var L=o(b,"runner",{}),R=o(L,"fps",!1),O=o(L,"fps",60),D=o(L,"delta",1e3/O),B=o(L,"deltaMin",1e3/O),G=o(L,"deltaMax",1e3/(O*.5));R||(O=1e3/D),this.runner={fps:O,correction:o(L,"correction",1),deltaSampleSize:o(L,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:o(L,"isFixed",!1),delta:D,deltaMin:B,deltaMax:G},this.autoUpdate=c(b,"autoUpdate",!0);var z=c(b,"debug",!1);if(this.drawDebug=typeof z=="object"?!0:z,this.debugGraphic,this.debugConfig={showAxes:o(z,"showAxes",!1),showAngleIndicator:o(z,"showAngleIndicator",!1),angleColor:o(z,"angleColor",15208787),showBroadphase:o(z,"showBroadphase",!1),broadphaseColor:o(z,"broadphaseColor",16757760),showBounds:o(z,"showBounds",!1),boundsColor:o(z,"boundsColor",16777215),showVelocity:o(z,"showVelocity",!1),velocityColor:o(z,"velocityColor",44783),showCollisions:o(z,"showCollisions",!1),collisionColor:o(z,"collisionColor",16094476),showSeparations:o(z,"showSeparations",!1),separationColor:o(z,"separationColor",16753920),showBody:o(z,"showBody",!0),showStaticBody:o(z,"showStaticBody",!0),showInternalEdges:o(z,"showInternalEdges",!1),renderFill:o(z,"renderFill",!1),renderLine:o(z,"renderLine",!0),fillColor:o(z,"fillColor",1075465),fillOpacity:o(z,"fillOpacity",1),lineColor:o(z,"lineColor",2678297),lineOpacity:o(z,"lineOpacity",1),lineThickness:o(z,"lineThickness",1),staticFillColor:o(z,"staticFillColor",857979),staticLineColor:o(z,"staticLineColor",1255396),showSleeping:o(z,"showSleeping",!1),staticBodySleepOpacity:o(z,"staticBodySleepOpacity",.7),sleepFillColor:o(z,"sleepFillColor",4605510),sleepLineColor:o(z,"sleepLineColor",10066585),showSensors:o(z,"showSensors",!0),sensorFillColor:o(z,"sensorFillColor",857979),sensorLineColor:o(z,"sensorLineColor",1255396),showPositions:o(z,"showPositions",!0),positionSize:o(z,"positionSize",4),positionColor:o(z,"positionColor",14697178),showJoint:o(z,"showJoint",!0),jointColor:o(z,"jointColor",14737474),jointLineOpacity:o(z,"jointLineOpacity",1),jointLineThickness:o(z,"jointLineThickness",2),pinSize:o(z,"pinSize",4),pinColor:o(z,"pinColor",4382944),springColor:o(z,"springColor",14697184),anchorColor:o(z,"anchorColor",15724527),anchorSize:o(z,"anchorSize",4),showConvexHulls:o(z,"showConvexHulls",!1),hullColor:o(z,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),o(b,"setBounds",!1)){var X=b.setBounds;if(typeof X=="boolean")this.setBounds();else{var U=o(X,"x",0),V=o(X,"y",0),N=o(X,"width",M.sys.scale.width),W=o(X,"height",M.sys.scale.height),F=o(X,"thickness",64),I=o(X,"left",!0),k=o(X,"right",!0),Y=o(X,"top",!0),H=o(X,"bottom",!0);this.setBounds(U,V,N,W,F,I,k,Y,H)}}},setCompositeRenderStyle:function(S){var M=S.bodies,b=S.constraints,A=S.composites,L,R,O;for(L=0;L<M.length;L++)R=M[L],O=R.render,this.setBodyRenderStyle(R,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity);for(L=0;L<b.length;L++)R=b[L],O=R.render,this.setConstraintRenderStyle(R,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize);for(L=0;L<A.length;L++)R=A[L],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(S,M,b,A,L,R){var O=S.render,D=this.debugConfig;return O?(M==null&&(M=S.isStatic?D.staticLineColor:D.lineColor),b==null&&(b=D.lineOpacity),A==null&&(A=D.lineThickness),L==null&&(L=S.isStatic?D.staticFillColor:D.fillColor),R==null&&(R=D.fillOpacity),M!==!1&&(O.lineColor=M),b!==!1&&(O.lineOpacity=b),A!==!1&&(O.lineThickness=A),L!==!1&&(O.fillColor=L),R!==!1&&(O.fillOpacity=R),this):this},setConstraintRenderStyle:function(S,M,b,A,L,R,O){var D=S.render,B=this.debugConfig;if(!D)return this;if(M==null){var G=D.type;G==="line"?M=B.jointColor:G==="pin"?M=B.pinColor:G==="spring"&&(M=B.springColor)}return b==null&&(b=B.jointLineOpacity),A==null&&(A=B.jointLineThickness),L==null&&(L=B.pinSize),R==null&&(R=B.anchorColor),O==null&&(O=B.anchorSize),M!==!1&&(D.lineColor=M),b!==!1&&(D.lineOpacity=b),A!==!1&&(D.lineThickness=A),L!==!1&&(D.pinSize=L),R!==!1&&(D.anchorColor=R),O!==!1&&(D.anchorSize=O),this},setEventsProxy:function(){var S=this,M=this.engine,b=this.localWorld;this.drawDebug&&(p.on(b,"compositeModified",function(A){S.setCompositeRenderStyle(A)}),p.on(b,"beforeAdd",function(A){for(var L=[].concat(A.object),R=0;R<L.length;R++){var O=L[R],D=O.render;O.type==="body"?S.setBodyRenderStyle(O,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):O.type==="composite"?S.setCompositeRenderStyle(O):O.type==="constraint"&&S.setConstraintRenderStyle(O,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),p.on(b,"beforeAdd",function(A){S.emit(v.BEFORE_ADD,A)}),p.on(b,"afterAdd",function(A){S.emit(v.AFTER_ADD,A)}),p.on(b,"beforeRemove",function(A){S.emit(v.BEFORE_REMOVE,A)}),p.on(b,"afterRemove",function(A){S.emit(v.AFTER_REMOVE,A)}),p.on(M,"beforeUpdate",function(A){S.emit(v.BEFORE_UPDATE,A)}),p.on(M,"afterUpdate",function(A){S.emit(v.AFTER_UPDATE,A)}),p.on(M,"collisionStart",function(A){var L=A.pairs,R,O;L.length>0&&(R=L[0].bodyA,O=L[0].bodyB),S.emit(v.COLLISION_START,A,R,O)}),p.on(M,"collisionActive",function(A){var L=A.pairs,R,O;L.length>0&&(R=L[0].bodyA,O=L[0].bodyB),S.emit(v.COLLISION_ACTIVE,A,R,O)}),p.on(M,"collisionEnd",function(A){var L=A.pairs,R,O;L.length>0&&(R=L[0].bodyA,O=L[0].bodyB),S.emit(v.COLLISION_END,A,R,O)})},setBounds:function(S,M,b,A,L,R,O,D,B){return S===void 0&&(S=0),M===void 0&&(M=0),b===void 0&&(b=this.scene.sys.scale.width),A===void 0&&(A=this.scene.sys.scale.height),L===void 0&&(L=64),R===void 0&&(R=!0),O===void 0&&(O=!0),D===void 0&&(D=!0),B===void 0&&(B=!0),this.updateWall(R,"left",S-L,M-L,L,A+L*2),this.updateWall(O,"right",S+b,M-L,L,A+L*2),this.updateWall(D,"top",S,M-L,b,L),this.updateWall(B,"bottom",S,M+A,b,L),this},updateWall:function(S,M,b,A,L,R){var O=this.walls[M];S?(O&&x.remove(this.localWorld,O),b+=L/2,A+=R/2,this.walls[M]=this.create(b,A,L,R,{isStatic:!0,friction:0,frictionStatic:0})):(O&&x.remove(this.localWorld,O),this.walls[M]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,M,b){return S===void 0&&(S=0),M===void 0&&(M=1),this.localWorld.gravity.x=S,this.localWorld.gravity.y=M,b!==void 0&&(this.localWorld.gravity.scale=b),this},create:function(S,M,b,A,L){var R=u.rectangle(S,M,b,A,L);return x.add(this.localWorld,R),R},add:function(S){return x.add(this.localWorld,S),this},remove:function(S,M){Array.isArray(S)||(S=[S]);for(var b=0;b<S.length;b++){var A=S[b],L=A.body?A.body:A;h.remove(this.localWorld,L,M)}return this},removeConstraint:function(S,M){return h.remove(this.localWorld,S,M),this},convertTilemapLayer:function(S,M){var b=S.layer,A=S.getTilesWithin(0,0,b.width,b.height,{isColliding:!0});return this.convertTiles(A,M),this},convertTiles:function(S,M){if(S.length===0)return this;for(var b=0;b<S.length;b++)new g(this,S[b],M);return this},nextGroup:function(S){return m.nextGroup(S)},nextCategory:function(){return m.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(v.RESUME),this},update:function(S,M){if(!(!this.enabled||!this.autoUpdate)){var b=this.engine,A=this.runner,L=b.timing,R=this.correction;A.isFixed?M=this.getDelta(S,M):(M=S-A.timePrev||A.delta,A.timePrev=S,A.deltaHistory.push(M),A.deltaHistory=A.deltaHistory.slice(-A.deltaSampleSize),M=Math.min.apply(null,A.deltaHistory),M=M<A.deltaMin?A.deltaMin:M,M=M>A.deltaMax?A.deltaMax:M,R=M/A.delta,A.delta=M),A.timeScalePrev!==0&&(R*=L.timeScale/A.timeScalePrev),L.timeScale===0&&(R=0),A.timeScalePrev=L.timeScale,A.correction=R,A.frameCounter+=1,S-A.counterTimestamp>=1e3&&(A.fps=A.frameCounter*((S-A.counterTimestamp)/1e3),A.counterTimestamp=S,A.frameCounter=0),r.update(b,M,R)}},step:function(S,M){r.update(this.engine,S,M)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var M=S.hasOwnProperty("body")?S.body:S;return h.get(this.localWorld,M.id,M.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var S=this.debugConfig,M=this.engine,b=this.debugGraphic,A=h.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&M.broadphase.controller&&this.renderGrid(M.broadphase,b,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(A,b,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(A),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(A,b,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(A,b,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(M.pairs.list,b,S.separationColor),S.showCollisions&&this.renderCollisions(M.pairs.list,b,S.collisionColor)}},renderGrid:function(S,M,b,A){M.lineStyle(1,b,A);for(var L=l.keys(S.buckets),R=0;R<L.length;R++){var O=L[R];if(!(S.buckets[O].length<2)){var D=O.split(/C|R/);M.strokeRect(parseInt(D[1],10)*S.bucketWidth,parseInt(D[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,M,b){M.lineStyle(1,b,1);for(var A=0;A<S.length;A++){var L=S[A];if(!!L.isActive){var R=L.collision,O=R.bodyA,D=R.bodyB,B=O.position,G=D.position,z=R.penetration,X=!O.isStatic&&!D.isStatic?4:1;D.isStatic&&(X=0),M.lineBetween(G.x,G.y,G.x-z.x*X,G.y-z.y*X),X=!O.isStatic&&!D.isStatic?4:1,O.isStatic&&(X=0),M.lineBetween(B.x,B.y,B.x-z.x*X,B.y-z.y*X)}}return this},renderCollisions:function(S,M,b){M.lineStyle(1,b,.5),M.fillStyle(b,1);var A,L;for(A=0;A<S.length;A++)if(L=S[A],!!L.isActive)for(var R=0;R<L.activeContacts.length;R++){var O=L.activeContacts[R],D=O.vertex;M.fillRect(D.x-2,D.y-2,5,5)}for(A=0;A<S.length;A++)if(L=S[A],!!L.isActive){var B=L.collision,G=L.activeContacts;if(G.length>0){var z=G[0].vertex.x,X=G[0].vertex.y;G.length===2&&(z=(G[0].vertex.x+G[1].vertex.x)/2,X=(G[0].vertex.y+G[1].vertex.y)/2),B.bodyB===B.supports[0].body||B.bodyA.isStatic?M.lineBetween(z-B.normal.x*8,X-B.normal.y*8,z,X):M.lineBetween(z+B.normal.x*8,X+B.normal.y*8,z,X)}}return this},renderBodyBounds:function(S,M,b,A){M.lineStyle(1,b,A);for(var L=0;L<S.length;L++){var R=S[L];if(!!R.render.visible){var O=R.bounds;if(O)M.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var D=R.parts,B=D.length>1?1:0;B<D.length;B++){var G=D[B];M.strokeRect(G.bounds.min.x,G.bounds.min.y,G.bounds.max.x-G.bounds.min.x,G.bounds.max.y-G.bounds.min.y)}}}return this},renderBodyAxes:function(S,M,b,A,L){M.lineStyle(1,A,L);for(var R=0;R<S.length;R++){var O=S[R],D=O.parts;if(!!O.render.visible){var B,G,z;if(b)for(G=D.length>1?1:0;G<D.length;G++)for(B=D[G],z=0;z<B.axes.length;z++){var X=B.axes[z];M.lineBetween(B.position.x,B.position.y,B.position.x+X.x*20,B.position.y+X.y*20)}else for(G=D.length>1?1:0;G<D.length;G++)for(B=D[G],z=0;z<B.axes.length;z++)M.lineBetween(B.position.x,B.position.y,(B.vertices[0].x+B.vertices[B.vertices.length-1].x)/2,(B.vertices[0].y+B.vertices[B.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,M,b,A,L){M.lineStyle(L,b,A);for(var R=0;R<S.length;R++){var O=S[R];!O.render.visible||M.lineBetween(O.position.x,O.position.y,O.position.x+(O.position.x-O.positionPrev.x)*2,O.position.y+(O.position.y-O.positionPrev.y)*2)}return this},renderBodies:function(S){for(var M=this.debugGraphic,b=this.debugConfig,A=b.showBody,L=b.showStaticBody,R=b.showSleeping,O=b.showInternalEdges,D=b.showConvexHulls,B=b.renderFill,G=b.renderLine,z=b.staticBodySleepOpacity,X=b.sleepFillColor,U=b.sleepLineColor,V=b.hullColor,N=0;N<S.length;N++){var W=S[N];if(!!W.render.visible&&!(!L&&W.isStatic||!A&&!W.isStatic)){var F=W.render.lineColor,I=W.render.lineOpacity,k=W.render.lineThickness,Y=W.render.fillColor,H=W.render.fillOpacity;R&&W.isSleeping&&(W.isStatic?(I*=z,H*=z):(F=U,Y=X)),B||(Y=null),G||(F=null),this.renderBody(W,M,O,F,I,k,Y,H);var K=W.parts.length;D&&K>1&&this.renderConvexHull(W,M,V,k)}}},renderBody:function(S,M,b,A,L,R,O,D){A===void 0&&(A=null),L===void 0&&(L=null),R===void 0&&(R=1),O===void 0&&(O=null),D===void 0&&(D=null);for(var B=this.debugConfig,G=B.sensorFillColor,z=B.sensorLineColor,X=S.parts,U=X.length,V=U>1?1:0;V<U;V++){var N=X[V],W=N.render,F=W.opacity;if(!(!W.visible||F===0||N.isSensor&&!B.showSensors)){var I=N.circleRadius;if(M.beginPath(),N.isSensor?(O!==null&&M.fillStyle(G,D*F),A!==null&&M.lineStyle(R,z,L*F)):(O!==null&&M.fillStyle(O,D*F),A!==null&&M.lineStyle(R,A,L*F)),I)M.arc(N.position.x,N.position.y,I,0,2*Math.PI);else{var k=N.vertices,Y=k.length;M.moveTo(k[0].x,k[0].y);for(var H=1;H<Y;H++){var K=k[H];if(!k[H-1].isInternal||b?M.lineTo(K.x,K.y):M.moveTo(K.x,K.y),H<Y&&K.isInternal&&!b){var j=(H+1)%Y;M.moveTo(k[j].x,k[j].y)}}M.closePath()}O!==null&&M.fillPath(),A!==null&&M.strokePath()}}if(B.showPositions&&!S.isStatic){var J=S.position.x,Q=S.position.y,Z=Math.ceil(B.positionSize/2);M.fillStyle(B.positionColor,1),M.fillRect(J-Z,Q-Z,B.positionSize,B.positionSize)}return this},renderConvexHull:function(S,M,b,A){A===void 0&&(A=1);var L=S.parts,R=L.length;if(R>1){var O=S.vertices;M.lineStyle(A,b),M.beginPath(),M.moveTo(O[0].x,O[0].y);for(var D=1;D<O.length;D++)M.lineTo(O[D].x,O[D].y);M.lineTo(O[0].x,O[0].y),M.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,M=h.allConstraints(this.localWorld),b=0;b<M.length;b++){var A=M[b].render,L=A.lineColor,R=A.lineOpacity,O=A.lineThickness,D=A.pinSize,B=A.anchorColor,G=A.anchorSize;this.renderConstraint(M[b],S,L,R,O,D,B,G)}},renderConstraint:function(S,M,b,A,L,R,O,D){var B=S.render;if(!B.visible||!S.pointA||!S.pointB)return this;M.lineStyle(L,b,A);var G=S.bodyA,z=S.bodyB,X,U;if(G?X=E.add(G.position,S.pointA):X=S.pointA,B.type==="pin")M.strokeCircle(X.x,X.y,R);else{if(z?U=E.add(z.position,S.pointB):U=S.pointB,M.beginPath(),M.moveTo(X.x,X.y),B.type==="spring")for(var V=E.sub(U,X),N=E.perp(E.normalise(V)),W=Math.ceil(l.clamp(S.length/5,12,20)),F,I=1;I<W;I+=1)F=I%2===0?1:-1,M.lineTo(X.x+V.x*(I/W)+N.x*F*4,X.y+V.y*(I/W)+N.y*F*4);M.lineTo(U.x,U.y)}return M.strokePath(),B.anchors&&D>0&&(M.fillStyle(O),M.fillCircle(X.x,X.y,D),M.fillCircle(U.x,U.y,D)),this},resetCollisionIDs:function(){return y._nextCollidingGroupId=1,y._nextNonCollidingGroupId=-1,y._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});a.exports=P},95349:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e){return this.body.restitution=e,this}};a.exports=T},70679:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var u=0;if(!Array.isArray(e))u=e;else for(var y=0;y<e.length;y++)u|=e[y];return this.body.collisionFilter.mask=u,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,u){Array.isArray(e)||(e=[e]);for(var y=0;y<e.length;y++){var d=e[y].hasOwnProperty("body")?e[y].body:e[y];this.body.setOnCollideWith(d,u)}return this}};a.exports=T},77178:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),y={applyForce:function(d){return this._tempVec2.set(this.body.position.x,this.body.position.y),u.applyForce(this.body,this._tempVec2,d),this},applyForceFrom:function(d,l){return u.applyForce(this.body,d,l),this},thrust:function(d){var l=this.body.angle;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(d){var l=this.body.angle-Math.PI/2;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(d){var l=this.body.angle+Math.PI/2;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(d){var l=this.body.angle-Math.PI;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};a.exports=y},74015:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,u,y){return this.body.friction=e,u!==void 0&&(this.body.frictionAir=u),y!==void 0&&(this.body.frictionStatic=y),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};a.exports=T},11535:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};a.exports=T},74497:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),y=e(93736),d={setMass:function(l){return u.setMass(this.body,l),this},setDensity:function(l){return u.setDensity(this.body,l),this},centerOfMass:{get:function(){return new y(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};a.exports=d},75529:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};a.exports=T},64024:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),y=e(84125),d=e(88456),l=e(72632),h=e(10998),r=e(72829),n=e(39745),v={setRectangle:function(o,c,m){return this.setBody({type:"rectangle",width:o,height:c},m)},setCircle:function(o,c){return this.setBody({type:"circle",radius:o},c)},setPolygon:function(o,c,m){return this.setBody({type:"polygon",sides:c,radius:o},m)},setTrapezoid:function(o,c,m,p){return this.setBody({type:"trapezoid",width:o,height:c,slope:m},p)},setExistingBody:function(o,c){c===void 0&&(c=!0),this.body&&this.world.remove(this.body,!0),this.body=o;for(var m=0;m<o.parts.length;m++)o.parts[m].gameObject=this;var p=this;if(o.destroy=function(){p.world.remove(p.body,!0),p.body.gameObject=null},c&&(this.world.has(o)&&this.world.remove(o,!0),this.world.add(o)),this._originComponent){var g=o.render.sprite.xOffset,x=o.render.sprite.yOffset,E=o.centerOfMass.x,P=o.centerOfMass.y;if(d(E,.5)&&d(P,.5))this.setOrigin(g+.5,x+.5);else{var S=o.centerOffset.x,M=o.centerOffset.y;this.setOrigin(g+S/this.displayWidth,x+M/this.displayHeight)}}return this},setBody:function(o,c){if(!o)return this;var m;typeof o=="string"&&(o={type:o});var p=l(o,"type","rectangle"),g=l(o,"x",this._tempVec2.x),x=l(o,"y",this._tempVec2.y),E=l(o,"width",this.width),P=l(o,"height",this.height);switch(p){case"rectangle":m=u.rectangle(g,x,E,P,c);break;case"circle":var S=l(o,"radius",Math.max(E,P)/2),M=l(o,"maxSides",25);m=u.circle(g,x,S,c,M);break;case"trapezoid":var b=l(o,"slope",.5);m=u.trapezoid(g,x,E,P,b,c);break;case"polygon":var A=l(o,"sides",5),L=l(o,"radius",Math.max(E,P)/2);m=u.polygon(g,x,A,L,c);break;case"fromVertices":case"fromVerts":var R=l(o,"verts",null);if(R)if(typeof R=="string"&&(R=n.fromPath(R)),this.body&&!this.body.hasOwnProperty("temp"))y.setVertices(this.body,R),m=this.body;else{var O=l(o,"flagInternal",!1),D=l(o,"removeCollinear",.01),B=l(o,"minimumArea",10);m=u.fromVertices(g,x,R,c,O,D,B)}break;case"fromPhysicsEditor":m=h.parseBody(g,x,o,c);break;case"fromPhysicsTracer":m=r.parseBody(g,x,o,c);break}return m&&this.setExistingBody(m,o.addToWorld),this}};a.exports=v},25106:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(35416),y=e(22806),d=e(39073),l={setToSleep:function(){return y.set(this.body,!0),this},setAwake:function(){return y.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,r){return this.setSleepStartEvent(h),this.setSleepEndEvent(r),this},setSleepStartEvent:function(h){if(h){var r=this.world;d.on(this.body,"sleepStart",function(n){r.emit(u.SLEEP_START,n,this)})}else d.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var r=this.world;d.on(this.body,"sleepEnd",function(n){r.emit(u.SLEEP_END,n,this)})}else d.off(this.body,"sleepEnd");return this}};a.exports=l},82884:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),y={setStatic:function(d){return u.setStatic(this.body,d),this},isStatic:function(){return this.body.isStatic}};a.exports=y},4753:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),y=e(83392),d=e(35786),l=e(62138),h=4,r={x:{get:function(){return this.body.position.x},set:function(n){this._tempVec2.set(n,this.y),u.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(n){this._tempVec2.set(this.x,n),u.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(n){var v=1/this._scaleX,o=1/this._scaleY;this._scaleX=n,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,u.scale(this.body,v,o),u.scale(this.body,n,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(n){var v=1/this._scaleX,o=1/this._scaleY;this._scaleY=n,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,u.scale(this.body,v,o),u.scale(this.body,this._scaleX,n)}},angle:{get:function(){return l(this.body.angle*y.RAD_TO_DEG)},set:function(n){this.rotation=l(n)*y.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(n){this._rotation=d(n),u.setAngle(this.body,this._rotation)}},setPosition:function(n,v){return n===void 0&&(n=0),v===void 0&&(v=n),this._tempVec2.set(n,v),u.setPosition(this.body,this._tempVec2),this},setRotation:function(n){return n===void 0&&(n=0),this._rotation=d(n),u.setAngle(this.body,n),this},setFixedRotation:function(){return u.setInertia(this.body,1/0),this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,u.setAngle(this.body,this.rotation),this},setScale:function(n,v,o){n===void 0&&(n=1),v===void 0&&(v=n);var c=1/this._scaleX,m=1/this._scaleY;return this._scaleX=n,this._scaleY=v,u.scale(this.body,c,m,o),u.scale(this.body,n,v,o),this}};a.exports=r},37268:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),y={setAngularVelocity:function(d){return u.setAngularVelocity(this.body,d),this},setVelocityX:function(d){return this._tempVec2.set(d,this.body.velocity.y),u.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(d){return this._tempVec2.set(this.body.velocity.x,d),u.setVelocity(this.body,this._tempVec2),this},setVelocity:function(d,l){return this._tempVec2.set(d,l),u.setVelocity(this.body,this._tempVec2),this}};a.exports=y},74527:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="afteradd"},30474:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="afterremove"},44822:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="afterupdate"},88820:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="beforeadd"},94849:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="beforeremove"},6391:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="beforeupdate"},96738:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collisionactive"},7916:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collisionend"},59529:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="collisionstart"},10219:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragend"},183:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="drag"},39143:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="dragstart"},16483:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},35806:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},22106:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="sleepend"},5803:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="sleepstart"},35416:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(a,T,e)=>{var u={};a.exports=u;var y=e(39745),d=e(10438),l=e(22806),h=e(68758),r=e(84091),n=e(50658);(function(){u._inertiaScale=4,u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,u.create=function(o){var c={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!o.hasOwnProperty("position")&&o.hasOwnProperty("vertices")?o.position=y.centre(o.vertices):o.hasOwnProperty("vertices")||(c.vertices=y.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var m=h.extend(c,o);return v(m,o),m.setOnCollideWith=function(p,g){return g?this.onCollideWith[p.id]=g:delete this.onCollideWith[p.id],this},m},u.nextGroup=function(o){return o?u._nextNonCollidingGroupId--:u._nextCollidingGroupId++},u.nextCategory=function(){return u._nextCategory=u._nextCategory<<1,u._nextCategory};var v=function(o,c){c=c||{},u.set(o,{bounds:o.bounds||r.create(o.vertices),positionPrev:o.positionPrev||d.clone(o.position),anglePrev:o.anglePrev||o.angle,vertices:o.vertices,parts:o.parts||[o],isStatic:o.isStatic,isSleeping:o.isSleeping,parent:o.parent||o});var m=o.bounds;if(y.rotate(o.vertices,o.angle,o.position),n.rotate(o.axes,o.angle),r.update(m,o.vertices,o.velocity),u.set(o,{axes:c.axes||o.axes,area:c.area||o.area,mass:c.mass||o.mass,inertia:c.inertia||o.inertia}),o.parts.length===1){var p=o.centerOfMass,g=o.centerOffset,x=m.max.x-m.min.x,E=m.max.y-m.min.y;p.x=-(m.min.x-o.position.x)/x,p.y=-(m.min.y-o.position.y)/E,g.x=x*p.x,g.y=E*p.y}};u.set=function(o,c,m){var p;typeof c=="string"&&(p=c,c={},c[p]=m);for(p in c)if(!!Object.prototype.hasOwnProperty.call(c,p))switch(m=c[p],p){case"isStatic":u.setStatic(o,m);break;case"isSleeping":l.set(o,m);break;case"mass":u.setMass(o,m);break;case"density":u.setDensity(o,m);break;case"inertia":u.setInertia(o,m);break;case"vertices":u.setVertices(o,m);break;case"position":u.setPosition(o,m);break;case"angle":u.setAngle(o,m);break;case"velocity":u.setVelocity(o,m);break;case"angularVelocity":u.setAngularVelocity(o,m);break;case"parts":u.setParts(o,m);break;case"centre":u.setCentre(o,m);break;default:o[p]=m}},u.setStatic=function(o,c){for(var m=0;m<o.parts.length;m++){var p=o.parts[m];p.isStatic=c,c?(p._original={restitution:p.restitution,friction:p.friction,mass:p.mass,inertia:p.inertia,density:p.density,inverseMass:p.inverseMass,inverseInertia:p.inverseInertia},p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=1/0,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0):p._original&&(p.restitution=p._original.restitution,p.friction=p._original.friction,p.mass=p._original.mass,p.inertia=p._original.inertia,p.density=p._original.density,p.inverseMass=p._original.inverseMass,p.inverseInertia=p._original.inverseInertia,p._original=null)}},u.setMass=function(o,c){var m=o.inertia/(o.mass/6);o.inertia=m*(c/6),o.inverseInertia=1/o.inertia,o.mass=c,o.inverseMass=1/o.mass,o.density=o.mass/o.area},u.setDensity=function(o,c){u.setMass(o,c*o.area),o.density=c},u.setInertia=function(o,c){o.inertia=c,o.inverseInertia=1/o.inertia},u.setVertices=function(o,c){c[0].body===o?o.vertices=c:o.vertices=y.create(c,o),o.axes=n.fromVertices(o.vertices),o.area=y.area(o.vertices),u.setMass(o,o.density*o.area);var m=y.centre(o.vertices);y.translate(o.vertices,m,-1),u.setInertia(o,u._inertiaScale*y.inertia(o.vertices,o.mass)),y.translate(o.vertices,o.position),r.update(o.bounds,o.vertices,o.velocity)},u.setParts=function(o,c,m){var p;for(c=c.slice(0),o.parts.length=0,o.parts.push(o),o.parent=o,p=0;p<c.length;p++){var g=c[p];g!==o&&(g.parent=o,o.parts.push(g))}if(o.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var x=[];for(p=0;p<c.length;p++)x=x.concat(c[p].vertices);y.clockwiseSort(x);var E=y.hull(x),P=y.centre(E);u.setVertices(o,E),y.translate(o.vertices,P)}var S=u._totalProperties(o),M=S.centre.x,b=S.centre.y,A=o.bounds,L=o.centerOfMass,R=o.centerOffset;r.update(A,o.vertices,o.velocity),L.x=-(A.min.x-M)/(A.max.x-A.min.x),L.y=-(A.min.y-b)/(A.max.y-A.min.y),R.x=M,R.y=b,o.area=S.area,o.parent=o,o.position.x=M,o.position.y=b,o.positionPrev.x=M,o.positionPrev.y=b,u.setMass(o,S.mass),u.setInertia(o,S.inertia),u.setPosition(o,S.centre)}},u.setCentre=function(o,c,m){m?(o.positionPrev.x+=c.x,o.positionPrev.y+=c.y,o.position.x+=c.x,o.position.y+=c.y):(o.positionPrev.x=c.x-(o.position.x-o.positionPrev.x),o.positionPrev.y=c.y-(o.position.y-o.positionPrev.y),o.position.x=c.x,o.position.y=c.y)},u.setPosition=function(o,c){var m=d.sub(c,o.position);o.positionPrev.x+=m.x,o.positionPrev.y+=m.y;for(var p=0;p<o.parts.length;p++){var g=o.parts[p];g.position.x+=m.x,g.position.y+=m.y,y.translate(g.vertices,m),r.update(g.bounds,g.vertices,o.velocity)}},u.setAngle=function(o,c){var m=c-o.angle;o.anglePrev+=m;for(var p=0;p<o.parts.length;p++){var g=o.parts[p];g.angle+=m,y.rotate(g.vertices,m,o.position),n.rotate(g.axes,m),r.update(g.bounds,g.vertices,o.velocity),p>0&&d.rotateAbout(g.position,m,o.position,g.position)}},u.setVelocity=function(o,c){o.positionPrev.x=o.position.x-c.x,o.positionPrev.y=o.position.y-c.y,o.velocity.x=c.x,o.velocity.y=c.y,o.speed=d.magnitude(o.velocity)},u.setAngularVelocity=function(o,c){o.anglePrev=o.angle-c,o.angularVelocity=c,o.angularSpeed=Math.abs(o.angularVelocity)},u.translate=function(o,c){u.setPosition(o,d.add(o.position,c))},u.rotate=function(o,c,m){if(!m)u.setAngle(o,o.angle+c);else{var p=Math.cos(c),g=Math.sin(c),x=o.position.x-m.x,E=o.position.y-m.y;u.setPosition(o,{x:m.x+(x*p-E*g),y:m.y+(x*g+E*p)}),u.setAngle(o,o.angle+c)}},u.scale=function(o,c,m,p){var g=0,x=0;p=p||o.position;for(var E=0;E<o.parts.length;E++){var P=o.parts[E];P.scale.x=c,P.scale.y=m,y.scale(P.vertices,c,m,p),P.axes=n.fromVertices(P.vertices),P.area=y.area(P.vertices),u.setMass(P,o.density*P.area),y.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),u.setInertia(P,u._inertiaScale*y.inertia(P.vertices,P.mass)),y.translate(P.vertices,{x:P.position.x,y:P.position.y}),E>0&&(g+=P.area,x+=P.inertia),P.position.x=p.x+(P.position.x-p.x)*c,P.position.y=p.y+(P.position.y-p.y)*m,r.update(P.bounds,P.vertices,o.velocity)}o.parts.length>1&&(o.area=g,o.isStatic||(u.setMass(o,o.density*g),u.setInertia(o,x))),o.circleRadius&&(c===m?o.circleRadius*=c:o.circleRadius=null)},u.update=function(o,c,m,p){var g=Math.pow(c*m*o.timeScale,2),x=1-o.frictionAir*m*o.timeScale,E=o.position.x-o.positionPrev.x,P=o.position.y-o.positionPrev.y;o.velocity.x=E*x*p+o.force.x/o.mass*g,o.velocity.y=P*x*p+o.force.y/o.mass*g,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.position.x+=o.velocity.x,o.position.y+=o.velocity.y,o.angularVelocity=(o.angle-o.anglePrev)*x*p+o.torque/o.inertia*g,o.anglePrev=o.angle,o.angle+=o.angularVelocity,o.speed=d.magnitude(o.velocity),o.angularSpeed=Math.abs(o.angularVelocity);for(var S=0;S<o.parts.length;S++){var M=o.parts[S];y.translate(M.vertices,o.velocity),S>0&&(M.position.x+=o.velocity.x,M.position.y+=o.velocity.y),o.angularVelocity!==0&&(y.rotate(M.vertices,o.angularVelocity,o.position),n.rotate(M.axes,o.angularVelocity),S>0&&d.rotateAbout(M.position,o.angularVelocity,o.position,M.position)),r.update(M.bounds,M.vertices,o.velocity)}},u.applyForce=function(o,c,m){o.force.x+=m.x,o.force.y+=m.y;var p={x:c.x-o.position.x,y:c.y-o.position.y};o.torque+=p.x*m.y-p.y*m.x},u._totalProperties=function(o){for(var c={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=o.parts.length===1?0:1;m<o.parts.length;m++){var p=o.parts[m],g=p.mass!==1/0?p.mass:1;c.mass+=g,c.area+=p.area,c.inertia+=p.inertia,c.centre=d.add(c.centre,d.mult(p.position,g))}return c.centre=d.div(c.centre,c.mass),c}})()},11299:(a,T,e)=>{var u={};a.exports=u;var y=e(39073),d=e(68758),l=e(84091),h=e(84125);(function(){u.create=function(r){return d.extend({id:d.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},u.setModified=function(r,n,v,o){if(y.trigger(r,"compositeModified",r),r.isModified=n,n&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),v&&r.parent&&u.setModified(r.parent,n,v,o),o)for(var c=0;c<r.composites.length;c++){var m=r.composites[c];u.setModified(m,n,v,o)}},u.add=function(r,n){var v=[].concat(n);y.trigger(r,"beforeAdd",{object:n});for(var o=0;o<v.length;o++){var c=v[o];switch(c.type){case"body":if(c.parent!==c){d.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}u.addBody(r,c);break;case"constraint":u.addConstraint(r,c);break;case"composite":u.addComposite(r,c);break;case"mouseConstraint":u.addConstraint(r,c.constraint);break}}return y.trigger(r,"afterAdd",{object:n}),r},u.remove=function(r,n,v){var o=[].concat(n);y.trigger(r,"beforeRemove",{object:n});for(var c=0;c<o.length;c++){var m=o[c];switch(m.type){case"body":u.removeBody(r,m,v);break;case"constraint":u.removeConstraint(r,m,v);break;case"composite":u.removeComposite(r,m,v);break;case"mouseConstraint":u.removeConstraint(r,m.constraint);break}}return y.trigger(r,"afterRemove",{object:n}),r},u.addComposite=function(r,n){return r.composites.push(n),n.parent=r,u.setModified(r,!0,!0,!1),r},u.removeComposite=function(r,n,v){var o=d.indexOf(r.composites,n);if(o!==-1&&u.removeCompositeAt(r,o),v)for(var c=0;c<r.composites.length;c++)u.removeComposite(r.composites[c],n,!0);return r},u.removeCompositeAt=function(r,n){return r.composites.splice(n,1),u.setModified(r,!0,!0,!1),r},u.addBody=function(r,n){return r.bodies.push(n),u.setModified(r,!0,!0,!1),r},u.removeBody=function(r,n,v){var o=d.indexOf(r.bodies,n);if(o!==-1&&u.removeBodyAt(r,o),v)for(var c=0;c<r.composites.length;c++)u.removeBody(r.composites[c],n,!0);return r},u.removeBodyAt=function(r,n){return r.bodies.splice(n,1),u.setModified(r,!0,!0,!1),r},u.addConstraint=function(r,n){return r.constraints.push(n),u.setModified(r,!0,!0,!1),r},u.removeConstraint=function(r,n,v){var o=d.indexOf(r.constraints,n);if(o!==-1&&u.removeConstraintAt(r,o),v)for(var c=0;c<r.composites.length;c++)u.removeConstraint(r.composites[c],n,!0);return r},u.removeConstraintAt=function(r,n){return r.constraints.splice(n,1),u.setModified(r,!0,!0,!1),r},u.clear=function(r,n,v){if(v)for(var o=0;o<r.composites.length;o++)u.clear(r.composites[o],n,!0);return n?r.bodies=r.bodies.filter(function(c){return c.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,u.setModified(r,!0,!0,!1),r},u.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var n=[].concat(r.bodies),v=0;v<r.composites.length;v++)n=n.concat(u.allBodies(r.composites[v]));return r.cache&&(r.cache.allBodies=n),n},u.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var n=[].concat(r.constraints),v=0;v<r.composites.length;v++)n=n.concat(u.allConstraints(r.composites[v]));return r.cache&&(r.cache.allConstraints=n),n},u.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var n=[].concat(r.composites),v=0;v<r.composites.length;v++)n=n.concat(u.allComposites(r.composites[v]));return r.cache&&(r.cache.allComposites=n),n},u.get=function(r,n,v){var o,c;switch(v){case"body":o=u.allBodies(r);break;case"constraint":o=u.allConstraints(r);break;case"composite":o=u.allComposites(r).concat(r);break}return o?(c=o.filter(function(m){return m.id.toString()===n.toString()}),c.length===0?null:c[0]):null},u.move=function(r,n,v){return u.remove(r,n),u.add(v,n),r},u.rebase=function(r){for(var n=u.allBodies(r).concat(u.allConstraints(r)).concat(u.allComposites(r)),v=0;v<n.length;v++)n[v].id=d.nextId();return r},u.translate=function(r,n,v){for(var o=v?u.allBodies(r):r.bodies,c=0;c<o.length;c++)h.translate(o[c],n);return r},u.rotate=function(r,n,v,o){for(var c=Math.cos(n),m=Math.sin(n),p=o?u.allBodies(r):r.bodies,g=0;g<p.length;g++){var x=p[g],E=x.position.x-v.x,P=x.position.y-v.y;h.setPosition(x,{x:v.x+(E*c-P*m),y:v.y+(E*m+P*c)}),h.rotate(x,n)}return r},u.scale=function(r,n,v,o,c){for(var m=c?u.allBodies(r):r.bodies,p=0;p<m.length;p++){var g=m[p],x=g.position.x-o.x,E=g.position.y-o.y;h.setPosition(g,{x:o.x+x*n,y:o.y+E*v}),h.scale(g,n,v)}return r},u.bounds=function(r){for(var n=u.allBodies(r),v=[],o=0;o<n.length;o+=1){var c=n[o];v.push(c.bounds.min,c.bounds.max)}return l.create(v)}})()},72005:(a,T,e)=>{var u={};a.exports=u;var y=e(11299);(function(){u.create=y.create,u.add=y.add,u.remove=y.remove,u.clear=y.clear,u.addComposite=y.addComposite,u.addBody=y.addBody,u.addConstraint=y.addConstraint})()},63454:(a,T,e)=>{var u={};a.exports=u;var y=e(39745),d=e(70584);(function(){var l=[],h={overlap:0,axis:null},r={overlap:0,axis:null};u.create=function(n,v){return{pair:null,collided:!1,bodyA:n,bodyB:v,parentA:n.parent,parentB:v.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},u.collides=function(n,v,o){if(u._overlapAxes(h,n.vertices,v.vertices,n.axes),h.overlap<=0||(u._overlapAxes(r,v.vertices,n.vertices,v.axes),r.overlap<=0))return null;var c=o&&o.table[d.id(n,v)],m;c?m=c.collision:(m=u.create(n,v),m.collided=!0,m.bodyA=n.id<v.id?n:v,m.bodyB=n.id<v.id?v:n,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),n=m.bodyA,v=m.bodyB;var p;h.overlap<r.overlap?p=h:p=r;var g=m.normal,x=m.supports,E=p.axis,P=E.x,S=E.y;P*(v.position.x-n.position.x)+S*(v.position.y-n.position.y)<0?(g.x=P,g.y=S):(g.x=-P,g.y=-S),m.tangent.x=-g.y,m.tangent.y=g.x,m.depth=p.overlap,m.penetration.x=g.x*m.depth,m.penetration.y=g.y*m.depth;var M=u._findSupports(n,v,g,1),b=0;if(y.contains(n.vertices,M[0])&&(x[b++]=M[0]),y.contains(n.vertices,M[1])&&(x[b++]=M[1]),b<2){var A=u._findSupports(v,n,g,-1);y.contains(v.vertices,A[0])&&(x[b++]=A[0]),b<2&&y.contains(v.vertices,A[1])&&(x[b++]=A[1])}return b===0&&(x[b++]=M[0]),x.length=b,m},u._overlapAxes=function(n,v,o,c){var m=v.length,p=o.length,g=v[0].x,x=v[0].y,E=o[0].x,P=o[0].y,S=c.length,M=Number.MAX_VALUE,b=0,A,L,R,O,D,B;for(D=0;D<S;D++){var G=c[D],z=G.x,X=G.y,U=g*z+x*X,V=E*z+P*X,N=U,W=V;for(B=1;B<m;B+=1)O=v[B].x*z+v[B].y*X,O>N?N=O:O<U&&(U=O);for(B=1;B<p;B+=1)O=o[B].x*z+o[B].y*X,O>W?W=O:O<V&&(V=O);if(L=N-V,R=W-U,A=L<R?L:R,A<M&&(M=A,b=D,A<=0))break}n.axis=c[b],n.overlap=M},u._projectToAxis=function(n,v,o){for(var c=v[0].x*o.x+v[0].y*o.y,m=c,p=1;p<v.length;p+=1){var g=v[p].x*o.x+v[p].y*o.y;g>m?m=g:g<c&&(c=g)}n.min=c,n.max=m},u._findSupports=function(n,v,o,c){var m=v.vertices,p=m.length,g=n.position.x,x=n.position.y,E=o.x*c,P=o.y*c,S=Number.MAX_VALUE,M,b,A,L,R;for(R=0;R<p;R+=1)b=m[R],L=E*(g-b.x)+P*(x-b.y),L<S&&(S=L,M=b);return A=m[(p+M.index-1)%p],S=E*(g-A.x)+P*(x-A.y),b=m[(M.index+1)%p],E*(g-b.x)+P*(x-b.y)<S?(l[0]=M,l[1]=b,l):(l[0]=M,l[1]=A,l)}})()},17319:a=>{var T={};a.exports=T,function(){T.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(a,T,e)=>{var u={};a.exports=u;var y=e(68758),d=e(63454);(function(){u.create=function(l){var h={bodies:[],pairs:null};return y.extend(h,l)},u.setBodies=function(l,h){l.bodies=h.slice(0)},u.clear=function(l){l.bodies=[]},u.collisions=function(l){var h=[],r=l.pairs,n=l.bodies,v=n.length,o=u.canCollide,c=d.collides,m,p;for(n.sort(u._compareBoundsX),m=0;m<v;m++){var g=n[m],x=g.bounds,E=g.bounds.max.x,P=g.bounds.max.y,S=g.bounds.min.y,M=g.isStatic||g.isSleeping,b=g.parts.length,A=b===1;for(p=m+1;p<v;p++){var L=n[p],R=L.bounds;if(R.min.x>E)break;if(!(P<R.min.y||S>R.max.y)&&!(M&&(L.isStatic||L.isSleeping))&&!!o(g.collisionFilter,L.collisionFilter)){var O=L.parts.length;if(A&&O===1){var D=c(g,L,r);D&&h.push(D)}else for(var B=b>1?1:0,G=O>1?1:0,z=B;z<b;z++)for(var X=g.parts[z],x=X.bounds,U=G;U<O;U++){var V=L.parts[U],R=V.bounds;if(!(x.min.x>R.max.x||x.max.x<R.min.x||x.max.y<R.min.y||x.min.y>R.max.y)){var D=c(X,V,r);D&&h.push(D)}}}}}return h},u.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0},u._compareBoundsX=function(l,h){return l.bounds.min.x-h.bounds.min.x}})()},70584:(a,T,e)=>{var u={};a.exports=u;var y=e(17319);(function(){u.create=function(d,l){var h=d.bodyA,r=d.bodyB,n={id:u.id(h,r),bodyA:h,bodyB:r,collision:d,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||r.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return u.update(n,d,l),n},u.update=function(d,l,h){var r=d.contacts,n=l.supports,v=d.activeContacts,o=l.parentA,c=l.parentB,m=o.vertices.length;d.isActive=!0,d.timeUpdated=h,d.collision=l,d.separation=l.depth,d.inverseMass=o.inverseMass+c.inverseMass,d.friction=o.friction<c.friction?o.friction:c.friction,d.frictionStatic=o.frictionStatic>c.frictionStatic?o.frictionStatic:c.frictionStatic,d.restitution=o.restitution>c.restitution?o.restitution:c.restitution,d.slop=o.slop>c.slop?o.slop:c.slop,l.pair=d,v.length=0;for(var p=0;p<n.length;p++){var g=n[p],x=g.body===o?g.index:m+g.index,E=r[x];E?v.push(E):v.push(r[x]=y.create(g))}},u.setActive=function(d,l,h){l?(d.isActive=!0,d.timeUpdated=h):(d.isActive=!1,d.activeContacts.length=0)},u.id=function(d,l){return d.id<l.id?"A"+d.id+"B"+l.id:"A"+l.id+"B"+d.id}})()},91327:(a,T,e)=>{var u={};a.exports=u;var y=e(70584),d=e(68758);(function(){u.create=function(l){return d.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},u.update=function(l,h,r){var n=l.list,v=n.length,o=l.table,c=h.length,m=l.collisionStart,p=l.collisionEnd,g=l.collisionActive,x,E,P,S;for(m.length=0,p.length=0,g.length=0,S=0;S<v;S++)n[S].confirmedActive=!1;for(S=0;S<c;S++)x=h[S],P=x.pair,P?(P.isActive?g.push(P):m.push(P),y.update(P,x,r),P.confirmedActive=!0):(P=y.create(x,r),o[P.id]=P,m.push(P),n.push(P));var M=[];for(v=n.length,S=0;S<v;S++)P=n[S],P.confirmedActive||(y.setActive(P,!1,r),p.push(P),!P.collision.bodyA.isSleeping&&!P.collision.bodyB.isSleeping&&M.push(S));for(S=0;S<M.length;S++)E=M[S]-S,P=n[E],n.splice(E,1),delete o[P.id]},u.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},13390:(a,T,e)=>{var u={};a.exports=u;var y=e(10438),d=e(63454),l=e(84091),h=e(68516),r=e(39745);(function(){u.collides=function(n,v){for(var o=[],c=v.length,m=n.bounds,p=d.collides,g=l.overlaps,x=0;x<c;x++){var E=v[x],P=E.parts.length,S=P===1?0:1;if(n!==E&&g(E.bounds,m))for(var M=S;M<P;M++){var b=E.parts[M];if(g(b.bounds,m)){var A=p(b,n);if(A){o.push(A);break}}}}return o},u.ray=function(n,v,o,c){c=c||1e-100;for(var m=y.angle(v,o),p=y.magnitude(y.sub(v,o)),g=(o.x+v.x)*.5,x=(o.y+v.y)*.5,E=h.rectangle(g,x,p,c,{angle:m}),P=u.collides(E,n),S=0;S<P.length;S+=1){var M=P[S];M.body=M.bodyB=M.bodyA}return P},u.region=function(n,v,o){for(var c=[],m=0;m<n.length;m++){var p=n[m],g=l.overlaps(p.bounds,v);(g&&!o||!g&&o)&&c.push(p)}return c},u.point=function(n,v){for(var o=[],c=0;c<n.length;c++){var m=n[c];if(l.contains(m.bounds,v))for(var p=m.parts.length===1?0:1;p<m.parts.length;p++){var g=m.parts[p];if(l.contains(g.bounds,v)&&r.contains(g.vertices,v)){o.push(m);break}}}return o}})()},44272:(a,T,e)=>{var u={};a.exports=u;var y=e(39745),d=e(84091);(function(){u._restingThresh=4,u._restingThreshTangent=6,u._positionDampen=.9,u._positionWarming=.8,u._frictionNormalMultiplier=5,u.preSolvePosition=function(l){var h,r,n,v=l.length;for(h=0;h<v;h++)r=l[h],r.isActive&&(n=r.activeContacts.length,r.collision.parentA.totalContacts+=n,r.collision.parentB.totalContacts+=n)},u.solvePosition=function(l,h){var r,n,v,o,c,m,p,g,x=u._positionDampen,E=l.length;for(r=0;r<E;r++)n=l[r],!(!n.isActive||n.isSensor)&&(v=n.collision,o=v.parentA,c=v.parentB,m=v.normal,n.separation=m.x*(c.positionImpulse.x+v.penetration.x-o.positionImpulse.x)+m.y*(c.positionImpulse.y+v.penetration.y-o.positionImpulse.y));for(r=0;r<E;r++)n=l[r],!(!n.isActive||n.isSensor)&&(v=n.collision,o=v.parentA,c=v.parentB,m=v.normal,g=(n.separation-n.slop)*h,(o.isStatic||c.isStatic)&&(g*=2),o.isStatic||o.isSleeping||(p=x/o.totalContacts,o.positionImpulse.x+=m.x*g*p,o.positionImpulse.y+=m.y*g*p),c.isStatic||c.isSleeping||(p=x/c.totalContacts,c.positionImpulse.x-=m.x*g*p,c.positionImpulse.y-=m.y*g*p))},u.postSolvePosition=function(l){for(var h=u._positionWarming,r=l.length,n=y.translate,v=d.update,o=0;o<r;o++){var c=l[o],m=c.positionImpulse,p=m.x,g=m.y,x=c.velocity;if(c.totalContacts=0,p!==0||g!==0){for(var E=0;E<c.parts.length;E++){var P=c.parts[E];n(P.vertices,m),v(P.bounds,P.vertices,x),P.position.x+=p,P.position.y+=g}c.positionPrev.x+=p,c.positionPrev.y+=g,p*x.x+g*x.y<0?(m.x=0,m.y=0):(m.x*=h,m.y*=h)}}},u.preSolveVelocity=function(l){var h=l.length,r,n;for(r=0;r<h;r++){var v=l[r];if(!(!v.isActive||v.isSensor)){var o=v.activeContacts,c=o.length,m=v.collision,p=m.parentA,g=m.parentB,x=m.normal,E=m.tangent;for(n=0;n<c;n++){var P=o[n],S=P.vertex,M=P.normalImpulse,b=P.tangentImpulse;if(M!==0||b!==0){var A=x.x*M+E.x*b,L=x.y*M+E.y*b;p.isStatic||p.isSleeping||(p.positionPrev.x+=A*p.inverseMass,p.positionPrev.y+=L*p.inverseMass,p.anglePrev+=p.inverseInertia*((S.x-p.position.x)*L-(S.y-p.position.y)*A)),g.isStatic||g.isSleeping||(g.positionPrev.x-=A*g.inverseMass,g.positionPrev.y-=L*g.inverseMass,g.anglePrev-=g.inverseInertia*((S.x-g.position.x)*L-(S.y-g.position.y)*A))}}}}},u.solveVelocity=function(l,h){var r=h*h,n=u._restingThresh*r,v=u._frictionNormalMultiplier,o=u._restingThreshTangent*r,c=Number.MAX_VALUE,m=l.length,p,g,x,E;for(x=0;x<m;x++){var P=l[x];if(!(!P.isActive||P.isSensor)){var S=P.collision,M=S.parentA,b=S.parentB,A=M.velocity,L=b.velocity,R=S.normal.x,O=S.normal.y,D=S.tangent.x,B=S.tangent.y,G=P.activeContacts,z=G.length,X=1/z,U=M.inverseMass+b.inverseMass,V=P.friction*P.frictionStatic*v*r;for(A.x=M.position.x-M.positionPrev.x,A.y=M.position.y-M.positionPrev.y,L.x=b.position.x-b.positionPrev.x,L.y=b.position.y-b.positionPrev.y,M.angularVelocity=M.angle-M.anglePrev,b.angularVelocity=b.angle-b.anglePrev,E=0;E<z;E++){var N=G[E],W=N.vertex,F=W.x-M.position.x,I=W.y-M.position.y,k=W.x-b.position.x,Y=W.y-b.position.y,H=A.x-I*M.angularVelocity,K=A.y+F*M.angularVelocity,j=L.x-Y*b.angularVelocity,J=L.y+k*b.angularVelocity,Q=H-j,Z=K-J,q=R*Q+O*Z,et=D*Q+B*Z,tt=P.separation+q,it=Math.min(tt,1);it=tt<0?0:it;var ut=it*V;et>ut||-et>ut?(g=et>0?et:-et,p=P.friction*(et>0?1:-1)*r,p<-g?p=-g:p>g&&(p=g)):(p=et,g=c);var ot=F*O-I*R,ht=k*O-Y*R,st=X/(U+M.inverseInertia*ot*ot+b.inverseInertia*ht*ht),at=(1+P.restitution)*q*st;if(p*=st,q*q>n&&q<0)N.normalImpulse=0;else{var nt=N.normalImpulse;N.normalImpulse+=at,N.normalImpulse=Math.min(N.normalImpulse,0),at=N.normalImpulse-nt}if(et*et>o)N.tangentImpulse=0;else{var gt=N.tangentImpulse;N.tangentImpulse+=p,N.tangentImpulse<-g&&(N.tangentImpulse=-g),N.tangentImpulse>g&&(N.tangentImpulse=g),p=N.tangentImpulse-gt}var dt=R*at+D*p,mt=O*at+B*p;M.isStatic||M.isSleeping||(M.positionPrev.x+=dt*M.inverseMass,M.positionPrev.y+=mt*M.inverseMass,M.anglePrev+=(F*mt-I*dt)*M.inverseInertia),b.isStatic||b.isSleeping||(b.positionPrev.x-=dt*b.inverseMass,b.positionPrev.y-=mt*b.inverseMass,b.anglePrev-=(k*mt-Y*dt)*b.inverseInertia)}}}}})()},52838:(a,T,e)=>{var u={};a.exports=u;var y=e(39745),d=e(10438),l=e(22806),h=e(84091),r=e(50658),n=e(68758);(function(){u._warming=.4,u._torqueDampen=1,u._minLength=1e-6,u.create=function(v){var o=v;o.bodyA&&!o.pointA&&(o.pointA={x:0,y:0}),o.bodyB&&!o.pointB&&(o.pointB={x:0,y:0});var c=o.bodyA?d.add(o.bodyA.position,o.pointA):o.pointA,m=o.bodyB?d.add(o.bodyB.position,o.pointB):o.pointB,p=d.magnitude(d.sub(c,m));o.length=typeof o.length<"u"?o.length:p,o.id=o.id||n.nextId(),o.label=o.label||"Constraint",o.type="constraint",o.stiffness=o.stiffness||(o.length>0?1:.7),o.damping=o.damping||0,o.angularStiffness=o.angularStiffness||0,o.angleA=o.bodyA?o.bodyA.angle:o.angleA,o.angleB=o.bodyB?o.bodyB.angle:o.angleB,o.plugin={};var g={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return o.length===0&&o.stiffness>.1?(g.type="pin",g.anchors=!1):o.stiffness<.9&&(g.type="spring"),o.render=n.extend(g,o.render),o},u.preSolveAll=function(v){for(var o=0;o<v.length;o+=1){var c=v[o],m=c.constraintImpulse;c.isStatic||m.x===0&&m.y===0&&m.angle===0||(c.position.x+=m.x,c.position.y+=m.y,c.angle+=m.angle)}},u.solveAll=function(v,o){for(var c=0;c<v.length;c+=1){var m=v[c],p=!m.bodyA||m.bodyA&&m.bodyA.isStatic,g=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(p||g)&&u.solve(v[c],o)}for(c=0;c<v.length;c+=1)m=v[c],p=!m.bodyA||m.bodyA&&m.bodyA.isStatic,g=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!p&&!g&&u.solve(v[c],o)},u.solve=function(v,o){var c=v.bodyA,m=v.bodyB,p=v.pointA,g=v.pointB;if(!(!c&&!m)){c&&!c.isStatic&&(d.rotate(p,c.angle-v.angleA,p),v.angleA=c.angle),m&&!m.isStatic&&(d.rotate(g,m.angle-v.angleB,g),v.angleB=m.angle);var x=p,E=g;if(c&&(x=d.add(c.position,p)),m&&(E=d.add(m.position,g)),!(!x||!E)){var P=d.sub(x,E),S=d.magnitude(P);S<u._minLength&&(S=u._minLength);var M=(S-v.length)/S,b=v.stiffness<1?v.stiffness*o:v.stiffness,A=d.mult(P,M*b),L=(c?c.inverseMass:0)+(m?m.inverseMass:0),R=(c?c.inverseInertia:0)+(m?m.inverseInertia:0),O=L+R,D,B,G,z,X;if(v.damping){var U=d.create();G=d.div(P,S),X=d.sub(m&&d.sub(m.position,m.positionPrev)||U,c&&d.sub(c.position,c.positionPrev)||U),z=d.dot(G,X)}c&&!c.isStatic&&(B=c.inverseMass/L,c.constraintImpulse.x-=A.x*B,c.constraintImpulse.y-=A.y*B,c.position.x-=A.x*B,c.position.y-=A.y*B,v.damping&&(c.positionPrev.x-=v.damping*G.x*z*B,c.positionPrev.y-=v.damping*G.y*z*B),D=d.cross(p,A)/O*u._torqueDampen*c.inverseInertia*(1-v.angularStiffness),c.constraintImpulse.angle-=D,c.angle-=D),m&&!m.isStatic&&(B=m.inverseMass/L,m.constraintImpulse.x+=A.x*B,m.constraintImpulse.y+=A.y*B,m.position.x+=A.x*B,m.position.y+=A.y*B,v.damping&&(m.positionPrev.x+=v.damping*G.x*z*B,m.positionPrev.y+=v.damping*G.y*z*B),D=d.cross(g,A)/O*u._torqueDampen*m.inverseInertia*(1-v.angularStiffness),m.constraintImpulse.angle+=D,m.angle+=D)}}},u.postSolveAll=function(v){for(var o=0;o<v.length;o++){var c=v[o],m=c.constraintImpulse;if(!(c.isStatic||m.x===0&&m.y===0&&m.angle===0)){l.set(c,!1);for(var p=0;p<c.parts.length;p++){var g=c.parts[p];y.translate(g.vertices,m),p>0&&(g.position.x+=m.x,g.position.y+=m.y),m.angle!==0&&(y.rotate(g.vertices,m.angle,c.position),r.rotate(g.axes,m.angle),p>0&&d.rotateAbout(g.position,m.angle,c.position,g.position)),h.update(g.bounds,g.vertices,c.velocity)}m.angle*=u._warming,m.x*=u._warming,m.y*=u._warming}}},u.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),y:(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0)}},u.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),y:(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0)}}})()},68758:(a,T,e)=>{var u={};a.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(d,l){var h,r;typeof l=="boolean"?(h=2,r=l):(h=1,r=!0);for(var n=h;n<arguments.length;n++){var v=arguments[n];if(v)for(var o in v)r&&v[o]&&v[o].constructor===Object&&(!d[o]||d[o].constructor===Object)?(d[o]=d[o]||{},u.extend(d[o],r,v[o])):d[o]=v[o]}return d},u.clone=function(d,l){return u.extend({},l,d)},u.keys=function(d){if(Object.keys)return Object.keys(d);var l=[];for(var h in d)l.push(h);return l},u.values=function(d){var l=[];if(Object.keys){for(var h=Object.keys(d),r=0;r<h.length;r++)l.push(d[h[r]]);return l}for(var n in d)l.push(d[n]);return l},u.get=function(d,l,h,r){l=l.split(".").slice(h,r);for(var n=0;n<l.length;n+=1)d=d[l[n]];return d},u.set=function(d,l,h,r,n){var v=l.split(".").slice(r,n);return u.get(d,l,0,-1)[v[v.length-1]]=h,h},u.shuffle=function(d){for(var l=d.length-1;l>0;l--){var h=Math.floor(u.random()*(l+1)),r=d[l];d[l]=d[h],d[h]=r}return d},u.choose=function(d){return d[Math.floor(u.random()*d.length)]},u.isElement=function(d){return typeof HTMLElement<"u"?d instanceof HTMLElement:!!(d&&d.nodeType&&d.nodeName)},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isFunction=function(d){return typeof d=="function"},u.isPlainObject=function(d){return typeof d=="object"&&d.constructor===Object},u.isString=function(d){return toString.call(d)==="[object String]"},u.clamp=function(d,l,h){return d<l?l:d>h?h:d},u.sign=function(d){return d<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(d,l){return d=typeof d<"u"?d:0,l=typeof l<"u"?l:1,d+y()*(l-d)};var y=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(d){return d=d.replace("#",""),d.length==3&&(d=d.charAt(0)+d.charAt(0)+d.charAt(1)+d.charAt(1)+d.charAt(2)+d.charAt(2)),parseInt(d,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var d=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[d]||(u.warn(d),u._warnedOnce[d]=!0)},u.deprecated=function(d,l,h){d[l]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",h)},d[l])},u.nextId=function(){return u._nextId++},u.indexOf=function(d,l){if(d.indexOf)return d.indexOf(l);for(var h=0;h<d.length;h++)if(d[h]===l)return h;return-1},u.map=function(d,l){if(d.map)return d.map(l);for(var h=[],r=0;r<d.length;r+=1)h.push(l(d[r]));return h},u.topologicalSort=function(d){var l=[],h=[],r=[];for(var n in d)!h[n]&&!r[n]&&u._topologicalSort(n,h,r,d,l);return l},u._topologicalSort=function(d,l,h,r,n){var v=r[d]||[];h[d]=!0;for(var o=0;o<v.length;o+=1){var c=v[o];h[c]||l[c]||u._topologicalSort(c,l,h,r,n)}h[d]=!1,l[d]=!0,n.push(d)},u.chain=function(){for(var d=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?d.push.apply(d,h._chained):d.push(h)}var r=function(){for(var n,v=new Array(arguments.length),o=0,c=arguments.length;o<c;o++)v[o]=arguments[o];for(o=0;o<d.length;o+=1){var m=d[o].apply(n,v);typeof m<"u"&&(n=m)}return n};return r._chained=d,r},u.chainPathBefore=function(d,l,h){return u.set(d,l,u.chain(h,u.get(d,l)))},u.chainPathAfter=function(d,l,h){return u.set(d,l,u.chain(u.get(d,l),h))},u.setDecomp=function(d){u._decomp=d},u.getDecomp=function(){var d=u._decomp;try{!d&&typeof window<"u"&&(d=window.decomp),!d&&typeof e.g<"u"&&(d=e.g.decomp)}catch{d=null}return d}}()},45775:(a,T,e)=>{var u={};a.exports=u;var y=e(22806),d=e(44272),l=e(13657),h=e(91327),r=e(39073),n=e(11299),v=e(52838),o=e(68758),c=e(84125);(function(){u.create=function(m){m=m||{};var p={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=o.extend(p,m);return g.world=m.world||n.create({label:"World"}),g.pairs=m.pairs||h.create(),g.detector=m.detector||l.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},u.update=function(m,p,g){var x=o.now();p=p||16.666666666666668,g=g||1;var E=m.world,P=m.detector,S=m.pairs,M=m.timing,b=M.timestamp,A;M.timestamp+=p*M.timeScale,M.lastDelta=p*M.timeScale;var L={timestamp:M.timestamp};r.trigger(m,"beforeUpdate",L);var R=n.allBodies(E),O=n.allConstraints(E);for(E.isModified&&l.setBodies(P,R),E.isModified&&n.setModified(E,!1,!1,!0),m.enableSleeping&&y.update(R,M.timeScale),u._bodiesApplyGravity(R,m.gravity),u._bodiesUpdate(R,p,M.timeScale,g,E.bounds),v.preSolveAll(R),A=0;A<m.constraintIterations;A++)v.solveAll(O,M.timeScale);v.postSolveAll(R),P.pairs=m.pairs;var D=l.collisions(P);for(h.update(S,D,b),m.enableSleeping&&y.afterCollisions(S.list,M.timeScale),S.collisionStart.length>0&&r.trigger(m,"collisionStart",{pairs:S.collisionStart}),d.preSolvePosition(S.list),A=0;A<m.positionIterations;A++)d.solvePosition(S.list,M.timeScale);for(d.postSolvePosition(R),v.preSolveAll(R),A=0;A<m.constraintIterations;A++)v.solveAll(O,M.timeScale);for(v.postSolveAll(R),d.preSolveVelocity(S.list),A=0;A<m.velocityIterations;A++)d.solveVelocity(S.list,M.timeScale);return S.collisionActive.length>0&&r.trigger(m,"collisionActive",{pairs:S.collisionActive}),S.collisionEnd.length>0&&r.trigger(m,"collisionEnd",{pairs:S.collisionEnd}),u._bodiesClearForces(R),r.trigger(m,"afterUpdate",L),m.timing.lastElapsed=o.now()-x,m},u.merge=function(m,p){if(o.extend(m,p),p.world){m.world=p.world,u.clear(m);for(var g=n.allBodies(m.world),x=0;x<g.length;x++){var E=g[x];y.set(E,!1),E.id=o.nextId()}}},u.clear=function(m){h.clear(m.pairs),l.clear(m.detector)},u._bodiesClearForces=function(m){for(var p=0;p<m.length;p++){var g=m[p];g.force.x=0,g.force.y=0,g.torque=0}},u._bodiesApplyGravity=function(m,p){var g=typeof p.scale<"u"?p.scale:.001;if(!(p.x===0&&p.y===0||g===0))for(var x=0;x<m.length;x++){var E=m[x];E.ignoreGravity||E.isStatic||E.isSleeping||(E.force.x+=E.mass*p.x*g*E.gravityScale.x,E.force.y+=E.mass*p.y*g*E.gravityScale.y)}},u._bodiesUpdate=function(m,p,g,x,E){for(var P=0;P<m.length;P++){var S=m[P];S.isStatic||S.isSleeping||c.update(S,p,g,x)}}})()},39073:(a,T,e)=>{var u={};a.exports=u;var y=e(68758);(function(){u.on=function(d,l,h){for(var r=l.split(" "),n,v=0;v<r.length;v++)n=r[v],d.events=d.events||{},d.events[n]=d.events[n]||[],d.events[n].push(h);return h},u.off=function(d,l,h){if(!l){d.events={};return}typeof l=="function"&&(h=l,l=y.keys(d.events).join(" "));for(var r=l.split(" "),n=0;n<r.length;n++){var v=d.events[r[n]],o=[];if(h&&v)for(var c=0;c<v.length;c++)v[c]!==h&&o.push(v[c]);d.events[r[n]]=o}},u.trigger=function(d,l,h){var r,n,v,o,c=d.events;if(c&&y.keys(c).length>0){h||(h={}),r=l.split(" ");for(var m=0;m<r.length;m++)if(n=r[m],v=c[n],v){o=y.clone(h,!1),o.name=n,o.source=d;for(var p=0;p<v.length;p++)v[p].apply(d,[o])}}}})()},16929:(a,T,e)=>{var u={};a.exports=u;var y=e(84474),d=e(68758);(function(){u.name="matter-js",u.version="0.18.0",u.uses=[],u.used=[],u.use=function(){y.use(u,Array.prototype.slice.call(arguments))},u.before=function(l,h){return l=l.replace(/^Matter./,""),d.chainPathBefore(u,l,h)},u.after=function(l,h){return l=l.replace(/^Matter./,""),d.chainPathAfter(u,l,h)}})()},84474:(a,T,e)=>{var u={};a.exports=u;var y=e(68758);(function(){u._registry={},u.register=function(d){if(u.isPlugin(d)||y.warn("Plugin.register:",u.toString(d),"does not implement all required fields."),d.name in u._registry){var l=u._registry[d.name],h=u.versionParse(d.version).number,r=u.versionParse(l.version).number;h>r?(y.warn("Plugin.register:",u.toString(l),"was upgraded to",u.toString(d)),u._registry[d.name]=d):h<r?y.warn("Plugin.register:",u.toString(l),"can not be downgraded to",u.toString(d)):d!==l&&y.warn("Plugin.register:",u.toString(d),"is already registered to different plugin object")}else u._registry[d.name]=d;return d},u.resolve=function(d){return u._registry[u.dependencyParse(d).name]},u.toString=function(d){return typeof d=="string"?d:(d.name||"anonymous")+"@"+(d.version||d.range||"0.0.0")},u.isPlugin=function(d){return d&&d.name&&d.version&&d.install},u.isUsed=function(d,l){return d.used.indexOf(l)>-1},u.isFor=function(d,l){var h=d.for&&u.dependencyParse(d.for);return!d.for||l.name===h.name&&u.versionSatisfies(l.version,h.range)},u.use=function(d,l){if(d.uses=(d.uses||[]).concat(l||[]),d.uses.length===0){y.warn("Plugin.use:",u.toString(d),"does not specify any dependencies to install.");return}for(var h=u.dependencies(d),r=y.topologicalSort(h),n=[],v=0;v<r.length;v+=1)if(r[v]!==d.name){var o=u.resolve(r[v]);if(!o){n.push("\u274C "+r[v]);continue}u.isUsed(d,o.name)||(u.isFor(o,d)||(y.warn("Plugin.use:",u.toString(o),"is for",o.for,"but installed on",u.toString(d)+"."),o._warned=!0),o.install?o.install(d):(y.warn("Plugin.use:",u.toString(o),"does not specify an install function."),o._warned=!0),o._warned?(n.push("\u{1F536} "+u.toString(o)),delete o._warned):n.push("\u2705 "+u.toString(o)),d.used.push(o.name))}n.length>0&&!o.silent&&y.info(n.join("  "))},u.dependencies=function(d,l){var h=u.dependencyParse(d),r=h.name;if(l=l||{},!(r in l)){d=u.resolve(d)||d,l[r]=y.map(d.uses||[],function(v){u.isPlugin(v)&&u.register(v);var o=u.dependencyParse(v),c=u.resolve(v);return c&&!u.versionSatisfies(c.version,o.range)?(y.warn("Plugin.dependencies:",u.toString(c),"does not satisfy",u.toString(o),"used by",u.toString(h)+"."),c._warned=!0,d._warned=!0):c||(y.warn("Plugin.dependencies:",u.toString(v),"used by",u.toString(h),"could not be resolved."),d._warned=!0),o.name});for(var n=0;n<l[r].length;n+=1)u.dependencies(l[r][n],l);return l}},u.dependencyParse=function(d){if(y.isString(d)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(d)||y.warn("Plugin.dependencyParse:",d,"is not a valid dependency string."),{name:d.split("@")[0],range:d.split("@")[1]||"*"}}return{name:d.name,range:d.range||d.version}},u.versionParse=function(d){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(d)||y.warn("Plugin.versionParse:",d,"is not a valid version or range.");var h=l.exec(d),r=Number(h[4]),n=Number(h[5]),v=Number(h[6]);return{isRange:Boolean(h[1]||h[2]),version:h[3],range:d,operator:h[1]||h[2]||"",major:r,minor:n,patch:v,parts:[r,n,v],prerelease:h[7],number:r*1e8+n*1e4+v}},u.versionSatisfies=function(d,l){l=l||"*";var h=u.versionParse(l),r=u.versionParse(d);if(h.isRange){if(h.operator==="*"||d==="*")return!0;if(h.operator===">")return r.number>h.number;if(h.operator===">=")return r.number>=h.number;if(h.operator==="~")return r.major===h.major&&r.minor===h.minor&&r.patch>=h.patch;if(h.operator==="^")return h.major>0?r.major===h.major&&r.number>=h.number:h.minor>0?r.minor===h.minor&&r.patch>=h.patch:r.patch===h.patch}return d===l||d==="*"}})()},22806:(a,T,e)=>{var u={};a.exports=u;var y=e(39073);(function(){u._motionWakeThreshold=.18,u._motionSleepThreshold=.08,u._minBias=.9,u.update=function(d,l){for(var h=l*l*l,r=0;r<d.length;r++){var n=d[r],v=n.speed*n.speed+n.angularSpeed*n.angularSpeed;if(n.force.x!==0||n.force.y!==0){u.set(n,!1);continue}var o=Math.min(n.motion,v),c=Math.max(n.motion,v);n.motion=u._minBias*o+(1-u._minBias)*c,n.sleepThreshold>0&&n.motion<u._motionSleepThreshold*h?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold&&u.set(n,!0)):n.sleepCounter>0&&(n.sleepCounter-=1)}},u.afterCollisions=function(d,l){for(var h=l*l*l,r=0;r<d.length;r++){var n=d[r];if(!!n.isActive){var v=n.collision,o=v.bodyA.parent,c=v.bodyB.parent;if(!(o.isSleeping&&c.isSleeping||o.isStatic||c.isStatic)&&(o.isSleeping||c.isSleeping)){var m=o.isSleeping&&!o.isStatic?o:c,p=m===o?c:o;!m.isStatic&&p.motion>u._motionWakeThreshold*h&&u.set(m,!1)}}}},u.set=function(d,l){var h=d.isSleeping;l?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,h||y.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,h&&y.trigger(d,"sleepEnd"))}})()},68516:(a,T,e)=>{var u={};a.exports=u;var y=e(39745),d=e(68758),l=e(84125),h=e(84091),r=e(10438);(function(){u.rectangle=function(n,v,o,c,m){m=m||{};var p={label:"Rectangle Body",position:{x:n,y:v},vertices:y.fromPath("L 0 0 L "+o+" 0 L "+o+" "+c+" L 0 "+c)};if(m.chamfer){var g=m.chamfer;p.vertices=y.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete m.chamfer}return l.create(d.extend({},p,m))},u.trapezoid=function(n,v,o,c,m,p){p=p||{},m*=.5;var g=(1-m*2)*o,x=o*m,E=x+g,P=E+x,S;m<.5?S="L 0 0 L "+x+" "+-c+" L "+E+" "+-c+" L "+P+" 0":S="L 0 0 L "+E+" "+-c+" L "+P+" 0";var M={label:"Trapezoid Body",position:{x:n,y:v},vertices:y.fromPath(S)};if(p.chamfer){var b=p.chamfer;M.vertices=y.chamfer(M.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete p.chamfer}return l.create(d.extend({},M,p))},u.circle=function(n,v,o,c,m){c=c||{};var p={label:"Circle Body",circleRadius:o};m=m||25;var g=Math.ceil(Math.max(10,Math.min(m,o)));return g%2===1&&(g+=1),u.polygon(n,v,g,o,d.extend({},p,c))},u.polygon=function(n,v,o,c,m){if(m=m||{},o<3)return u.circle(n,v,c,m);for(var p=2*Math.PI/o,g="",x=p*.5,E=0;E<o;E+=1){var P=x+E*p,S=Math.cos(P)*c,M=Math.sin(P)*c;g+="L "+S.toFixed(3)+" "+M.toFixed(3)+" "}var b={label:"Polygon Body",position:{x:n,y:v},vertices:y.fromPath(g)};if(m.chamfer){var A=m.chamfer;b.vertices=y.chamfer(b.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete m.chamfer}return l.create(d.extend({},b,m))},u.fromVertices=function(n,v,o,c,m,p,g,x){var E=d.getDecomp(),P,S,M,b,A,L,R,O;for(P=Boolean(E&&E.quickDecomp),c=c||{},M=[],m=typeof m<"u"?m:!1,p=typeof p<"u"?p:.01,g=typeof g<"u"?g:10,x=typeof x<"u"?x:.01,d.isArray(o[0])||(o=[o]),O=0;O<o.length;O+=1)if(L=o[O],b=y.isConvex(L),A=!b,A&&!P&&d.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),b||!P)b?L=y.clockwiseSort(L):L=y.hull(L),M.push({position:{x:n,y:v},vertices:L});else{var D=L.map(function(X){return[X.x,X.y]});E.makeCCW(D),p!==!1&&E.removeCollinearPoints(D,p),x!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(D,x);var B=E.quickDecomp(D);for(R=0;R<B.length;R++){var G=B[R],z=G.map(function(X){return{x:X[0],y:X[1]}});g>0&&y.area(z)<g||M.push({position:y.centre(z),vertices:z})}}for(R=0;R<M.length;R++)M[R]=l.create(d.extend(M[R],c));return m&&u.flagCoincidentParts(M,5),M.length>1?(S=l.create(d.extend({parts:M.slice(0)},c)),l.setPosition(S,{x:n,y:v}),S):M[0]},u.flagCoincidentParts=function(n,v){v===void 0&&(v=5);for(var o=0;o<n.length;o++)for(var c=n[o],m=o+1;m<n.length;m++){var p=n[m];if(h.overlaps(c.bounds,p.bounds))for(var g=c.vertices,x=p.vertices,E=0;E<c.vertices.length;E++)for(var P=0;P<p.vertices.length;P++){var S=r.magnitudeSquared(r.sub(g[(E+1)%g.length],x[P])),M=r.magnitudeSquared(r.sub(g[E],x[(P+1)%x.length]));S<v&&M<v&&(g[E].isInternal=!0,x[P].isInternal=!0)}}return n}})()},56643:(a,T,e)=>{var u={};a.exports=u;var y=e(11299),d=e(52838),l=e(68758),h=e(84125),r=e(68516),n=l.deprecated;(function(){u.stack=function(v,o,c,m,p,g,x){for(var E=y.create({label:"Stack"}),P=v,S=o,M,b=0,A=0;A<m;A++){for(var L=0,R=0;R<c;R++){var O=x(P,S,R,A,M,b);if(O){var D=O.bounds.max.y-O.bounds.min.y,B=O.bounds.max.x-O.bounds.min.x;D>L&&(L=D),h.translate(O,{x:B*.5,y:D*.5}),P=O.bounds.max.x+p,y.addBody(E,O),M=O,b+=1}else P+=p}S+=L+g,P=v}return E},u.chain=function(v,o,c,m,p,g){for(var x=v.bodies,E=1;E<x.length;E++){var P=x[E-1],S=x[E],M=P.bounds.max.y-P.bounds.min.y,b=P.bounds.max.x-P.bounds.min.x,A=S.bounds.max.y-S.bounds.min.y,L=S.bounds.max.x-S.bounds.min.x,R={bodyA:P,pointA:{x:b*o,y:M*c},bodyB:S,pointB:{x:L*m,y:A*p}},O=l.extend(R,g);y.addConstraint(v,d.create(O))}return v.label+=" Chain",v},u.mesh=function(v,o,c,m,p){var g=v.bodies,x,E,P,S,M;for(x=0;x<c;x++){for(E=1;E<o;E++)P=g[E-1+x*o],S=g[E+x*o],y.addConstraint(v,d.create(l.extend({bodyA:P,bodyB:S},p)));if(x>0)for(E=0;E<o;E++)P=g[E+(x-1)*o],S=g[E+x*o],y.addConstraint(v,d.create(l.extend({bodyA:P,bodyB:S},p))),m&&E>0&&(M=g[E-1+(x-1)*o],y.addConstraint(v,d.create(l.extend({bodyA:M,bodyB:S},p)))),m&&E<o-1&&(M=g[E+1+(x-1)*o],y.addConstraint(v,d.create(l.extend({bodyA:M,bodyB:S},p))))}return v.label+=" Mesh",v},u.pyramid=function(v,o,c,m,p,g,x){return u.stack(v,o,c,m,p,g,function(E,P,S,M,b,A){var L=Math.min(m,Math.ceil(c/2)),R=b?b.bounds.max.x-b.bounds.min.x:0;if(!(M>L)){M=L-M;var O=M,D=c-1-M;if(!(S<O||S>D)){A===1&&h.translate(b,{x:(S+(c%2===1?1:-1))*R,y:0});var B=b?S*R:0;return x(v+B+S*p,P,S,M,b,A)}}})},u.newtonsCradle=function(v,o,c,m,p){for(var g=y.create({label:"Newtons Cradle"}),x=0;x<c;x++){var E=1.9,P=r.circle(v+x*(m*E),o+p,m,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=d.create({pointA:{x:v+x*(m*E),y:o},bodyB:P});y.addBody(g,P),y.addConstraint(g,S)}return g},n(u,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),u.car=function(v,o,c,m,p){var g=h.nextGroup(!0),x=20,E=-c*.5+x,P=c*.5-x,S=0,M=y.create({label:"Car"}),b=r.rectangle(v,o,c,m,{collisionFilter:{group:g},chamfer:{radius:m*.5},density:2e-4}),A=r.circle(v+E,o+S,p,{collisionFilter:{group:g},friction:.8}),L=r.circle(v+P,o+S,p,{collisionFilter:{group:g},friction:.8}),R=d.create({bodyB:b,pointB:{x:E,y:S},bodyA:A,stiffness:1,length:0}),O=d.create({bodyB:b,pointB:{x:P,y:S},bodyA:L,stiffness:1,length:0});return y.addBody(M,b),y.addBody(M,A),y.addBody(M,L),y.addConstraint(M,R),y.addConstraint(M,O),M},n(u,"car","Composites.car \u27A4 moved to car example"),u.softBody=function(v,o,c,m,p,g,x,E,P,S){P=l.extend({inertia:1/0},P),S=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var M=u.stack(v,o,c,m,p,g,function(b,A){return r.circle(b,A,E,P)});return u.mesh(M,c,m,x,S),M.label="Soft Body",M},n(u,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},50658:(a,T,e)=>{var u={};a.exports=u;var y=e(10438),d=e(68758);(function(){u.fromVertices=function(l){for(var h={},r=0;r<l.length;r++){var n=(r+1)%l.length,v=y.normalise({x:l[n].y-l[r].y,y:l[r].x-l[n].x}),o=v.y===0?1/0:v.x/v.y;o=o.toFixed(3).toString(),h[o]=v}return d.values(h)},u.rotate=function(l,h){if(h!==0)for(var r=Math.cos(h),n=Math.sin(h),v=0;v<l.length;v++){var o=l[v],c;c=o.x*r-o.y*n,o.y=o.x*n+o.y*r,o.x=c}}})()},84091:a=>{var T={};a.exports=T,function(){T.create=function(e){var u={min:{x:0,y:0},max:{x:0,y:0}};return e&&T.update(u,e),u},T.update=function(e,u,y){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var d=0;d<u.length;d++){var l=u[d];l.x>e.max.x&&(e.max.x=l.x),l.x<e.min.x&&(e.min.x=l.x),l.y>e.max.y&&(e.max.y=l.y),l.y<e.min.y&&(e.min.y=l.y)}y&&(y.x>0?e.max.x+=y.x:e.min.x+=y.x,y.y>0?e.max.y+=y.y:e.min.y+=y.y)},T.contains=function(e,u){return u.x>=e.min.x&&u.x<=e.max.x&&u.y>=e.min.y&&u.y<=e.max.y},T.overlaps=function(e,u){return e.min.x<=u.max.x&&e.max.x>=u.min.x&&e.max.y>=u.min.y&&e.min.y<=u.max.y},T.translate=function(e,u){e.min.x+=u.x,e.max.x+=u.x,e.min.y+=u.y,e.max.y+=u.y},T.shift=function(e,u){var y=e.max.x-e.min.x,d=e.max.y-e.min.y;e.min.x=u.x,e.max.x=u.x+y,e.min.y=u.y,e.max.y=u.y+d}}()},92765:(a,T,e)=>{var u={};a.exports=u,e(84091);var y=e(68758);(function(){u.pathToVertices=function(d,l){typeof window<"u"&&!("SVGPathSeg"in window)&&y.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,r,n,v,o,c,m,p,g,x,E=[],P,S,M=0,b=0,A=0;l=l||15;var L=function(O,D,B){var G=B%2===1&&B>1;if(!g||O!=g.x||D!=g.y){g&&G?(P=g.x,S=g.y):(P=0,S=0);var z={x:P+O,y:S+D};(G||!g)&&(g=z),E.push(z),b=P+O,A=S+D}},R=function(O){var D=O.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":b=O.x,A=O.y;break;case"H":b=O.x;break;case"V":A=O.y;break}L(b,A,O.pathSegType)}};for(u._svgPathToAbsolute(d),n=d.getTotalLength(),c=[],h=0;h<d.pathSegList.numberOfItems;h+=1)c.push(d.pathSegList.getItem(h));for(m=c.concat();M<n;){if(x=d.getPathSegAtLength(M),o=c[x],o!=p){for(;m.length&&m[0]!=o;)R(m.shift());p=o}switch(o.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=d.getPointAtLength(M),L(v.x,v.y,0);break}M+=l}for(h=0,r=m.length;h<r;++h)R(m[h]);return E},u._svgPathToAbsolute=function(d){for(var l,h,r,n,v,o,c=d.pathSegList,m=0,p=0,g=c.numberOfItems,x=0;x<g;++x){var E=c.getItem(x),P=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(P))"x"in E&&(m=E.x),"y"in E&&(p=E.y);else switch("x1"in E&&(r=m+E.x1),"x2"in E&&(v=m+E.x2),"y1"in E&&(n=p+E.y1),"y2"in E&&(o=p+E.y2),"x"in E&&(m+=E.x),"y"in E&&(p+=E.y),P){case"m":c.replaceItem(d.createSVGPathSegMovetoAbs(m,p),x);break;case"l":c.replaceItem(d.createSVGPathSegLinetoAbs(m,p),x);break;case"h":c.replaceItem(d.createSVGPathSegLinetoHorizontalAbs(m),x);break;case"v":c.replaceItem(d.createSVGPathSegLinetoVerticalAbs(p),x);break;case"c":c.replaceItem(d.createSVGPathSegCurvetoCubicAbs(m,p,r,n,v,o),x);break;case"s":c.replaceItem(d.createSVGPathSegCurvetoCubicSmoothAbs(m,p,v,o),x);break;case"q":c.replaceItem(d.createSVGPathSegCurvetoQuadraticAbs(m,p,r,n),x);break;case"t":c.replaceItem(d.createSVGPathSegCurvetoQuadraticSmoothAbs(m,p),x);break;case"a":c.replaceItem(d.createSVGPathSegArcAbs(m,p,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),x);break;case"z":case"Z":m=l,p=h;break}(P=="M"||P=="m")&&(l=m,h=p)}}})()},10438:a=>{var T={};a.exports=T,function(){T.create=function(e,u){return{x:e||0,y:u||0}},T.clone=function(e){return{x:e.x,y:e.y}},T.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},T.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},T.rotate=function(e,u,y){var d=Math.cos(u),l=Math.sin(u);y||(y={});var h=e.x*d-e.y*l;return y.y=e.x*l+e.y*d,y.x=h,y},T.rotateAbout=function(e,u,y,d){var l=Math.cos(u),h=Math.sin(u);d||(d={});var r=y.x+((e.x-y.x)*l-(e.y-y.y)*h);return d.y=y.y+((e.x-y.x)*h+(e.y-y.y)*l),d.x=r,d},T.normalise=function(e){var u=T.magnitude(e);return u===0?{x:0,y:0}:{x:e.x/u,y:e.y/u}},T.dot=function(e,u){return e.x*u.x+e.y*u.y},T.cross=function(e,u){return e.x*u.y-e.y*u.x},T.cross3=function(e,u,y){return(u.x-e.x)*(y.y-e.y)-(u.y-e.y)*(y.x-e.x)},T.add=function(e,u,y){return y||(y={}),y.x=e.x+u.x,y.y=e.y+u.y,y},T.sub=function(e,u,y){return y||(y={}),y.x=e.x-u.x,y.y=e.y-u.y,y},T.mult=function(e,u){return{x:e.x*u,y:e.y*u}},T.div=function(e,u){return{x:e.x/u,y:e.y/u}},T.perp=function(e,u){return u=u===!0?-1:1,{x:u*-e.y,y:u*e.x}},T.neg=function(e){return{x:-e.x,y:-e.y}},T.angle=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]}()},39745:(a,T,e)=>{var u={};a.exports=u;var y=e(10438),d=e(68758);(function(){u.create=function(l,h){for(var r=[],n=0;n<l.length;n++){var v=l[n],o={x:v.x,y:v.y,index:n,body:h,isInternal:!1};r.push(o)}return r},u.fromPath=function(l,h){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];return l.replace(r,function(v,o,c){n.push({x:parseFloat(o),y:parseFloat(c)})}),u.create(n,h)},u.centre=function(l){for(var h=u.area(l,!0),r={x:0,y:0},n,v,o,c=0;c<l.length;c++)o=(c+1)%l.length,n=y.cross(l[c],l[o]),v=y.mult(y.add(l[c],l[o]),n),r=y.add(r,v);return y.div(r,6*h)},u.mean=function(l){for(var h={x:0,y:0},r=0;r<l.length;r++)h.x+=l[r].x,h.y+=l[r].y;return y.div(h,l.length)},u.area=function(l,h){for(var r=0,n=l.length-1,v=0;v<l.length;v++)r+=(l[n].x-l[v].x)*(l[n].y+l[v].y),n=v;return h?r/2:Math.abs(r)/2},u.inertia=function(l,h){for(var r=0,n=0,v=l,o,c,m=0;m<v.length;m++)c=(m+1)%v.length,o=Math.abs(y.cross(v[c],v[m])),r+=o*(y.dot(v[c],v[c])+y.dot(v[c],v[m])+y.dot(v[m],v[m])),n+=o;return h/6*(r/n)},u.translate=function(l,h,r){r=typeof r<"u"?r:1;var n=l.length,v=h.x*r,o=h.y*r,c;for(c=0;c<n;c++)l[c].x+=v,l[c].y+=o;return l},u.rotate=function(l,h,r){if(h!==0){var n=Math.cos(h),v=Math.sin(h),o=r.x,c=r.y,m=l.length,p,g,x,E;for(E=0;E<m;E++)p=l[E],g=p.x-o,x=p.y-c,p.x=o+(g*n-x*v),p.y=c+(g*v+x*n);return l}},u.contains=function(l,h){for(var r=h.x,n=h.y,v=l.length,o=l[v-1],c,m=0;m<v;m++){if(c=l[m],(r-o.x)*(c.y-o.y)+(n-o.y)*(o.x-c.x)>0)return!1;o=c}return!0},u.scale=function(l,h,r,n){if(h===1&&r===1)return l;n=n||u.centre(l);for(var v,o,c=0;c<l.length;c++)v=l[c],o=y.sub(v,n),l[c].x=n.x+o.x*h,l[c].y=n.y+o.y*r;return l},u.chamfer=function(l,h,r,n,v){typeof h=="number"?h=[h]:h=h||[8],r=typeof r<"u"?r:-1,n=n||2,v=v||14;for(var o=[],c=0;c<l.length;c++){var m=l[c-1>=0?c-1:l.length-1],p=l[c],g=l[(c+1)%l.length],x=h[c<h.length?c:h.length-1];if(x===0){o.push(p);continue}var E=y.normalise({x:p.y-m.y,y:m.x-p.x}),P=y.normalise({x:g.y-p.y,y:p.x-g.x}),S=Math.sqrt(2*Math.pow(x,2)),M=y.mult(d.clone(E),x),b=y.normalise(y.mult(y.add(E,P),.5)),A=y.sub(p,y.mult(b,S)),L=r;r===-1&&(L=Math.pow(x,.32)*1.75),L=d.clamp(L,n,v),L%2===1&&(L+=1);for(var R=Math.acos(y.dot(E,P)),O=R/L,D=0;D<L;D++)o.push(y.add(y.rotate(M,O*D),A))}return o},u.clockwiseSort=function(l){var h=u.mean(l);return l.sort(function(r,n){return y.angle(h,r)-y.angle(h,n)}),l},u.isConvex=function(l){var h=0,r=l.length,n,v,o,c;if(r<3)return null;for(n=0;n<r;n++)if(v=(n+1)%r,o=(n+2)%r,c=(l[v].x-l[n].x)*(l[o].y-l[v].y),c-=(l[v].y-l[n].y)*(l[o].x-l[v].x),c<0?h|=1:c>0&&(h|=2),h===3)return!1;return h!==0?!0:null},u.hull=function(l){var h=[],r=[],n,v;for(l=l.slice(0),l.sort(function(o,c){var m=o.x-c.x;return m!==0?m:o.y-c.y}),v=0;v<l.length;v+=1){for(n=l[v];r.length>=2&&y.cross3(r[r.length-2],r[r.length-1],n)<=0;)r.pop();r.push(n)}for(v=l.length-1;v>=0;v-=1){for(n=l[v];h.length>=2&&y.cross3(h[h.length-2],h[h.length-1],n)<=0;)h.pop();h.push(n)}return h.pop(),r.pop(),h.concat(r)}})()},1675:(a,T,e)=>{var u=e(18171),y={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.18.0",silent:!0,install:function(d){d.after("Body.create",function(){y.Body.init(this)}),d.before("Engine.update",function(l){y.Engine.update(l)})},Body:{init:function(d){d.plugin.attractors=d.plugin.attractors||[]}},Engine:{update:function(d){for(var l=u.Composite.allBodies(d.world),h=0;h<l.length;h++){var r=l[h],n=r.plugin.attractors;if(n&&n.length>0)for(var v=0;v<l.length;v++){var o=l[v];if(h!==v)for(var c=0;c<n.length;c++){var m=n[c],p=m;u.Common.isFunction(m)&&(p=m(r,o)),p&&u.Body.applyForce(o,o.position,p)}}}}},Attractors:{gravityConstant:.001,gravity:function(d,l){var h=u.Vector.sub(l.position,d.position),r=u.Vector.magnitudeSquared(h)||1e-4,n=u.Vector.normalise(h),v=-y.Attractors.gravityConstant*(d.mass*l.mass/r),o=u.Vector.mult(n,v);u.Body.applyForce(d,d.position,u.Vector.neg(o)),u.Body.applyForce(l,l.position,o)}}};a.exports=y},80391:a=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.18.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(u){u.pairs.map(function(y){var d=y.bodyA,l=y.bodyB;d.gameObject&&d.gameObject.emit("collide",d,l,y),l.gameObject&&l.gameObject.emit("collide",l,d,y),e.Events.trigger(d,"onCollide",{pair:y}),e.Events.trigger(l,"onCollide",{pair:y}),d.onCollideCallback&&d.onCollideCallback(y),l.onCollideCallback&&l.onCollideCallback(y),d.onCollideWith[l.id]&&d.onCollideWith[l.id](l,y),l.onCollideWith[d.id]&&l.onCollideWith[d.id](d,y)})}),e.Events.on(this,"collisionActive",function(u){u.pairs.map(function(y){var d=y.bodyA,l=y.bodyB;d.gameObject&&d.gameObject.emit("collideActive",d,l,y),l.gameObject&&l.gameObject.emit("collideActive",l,d,y),e.Events.trigger(d,"onCollideActive",{pair:y}),e.Events.trigger(l,"onCollideActive",{pair:y}),d.onCollideActiveCallback&&d.onCollideActiveCallback(y),l.onCollideActiveCallback&&l.onCollideActiveCallback(y)})}),e.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(y){var d=y.bodyA,l=y.bodyB;d.gameObject&&d.gameObject.emit("collideEnd",d,l,y),l.gameObject&&l.gameObject.emit("collideEnd",l,d,y),e.Events.trigger(d,"onCollideEnd",{pair:y}),e.Events.trigger(l,"onCollideEnd",{pair:y}),d.onCollideEndCallback&&d.onCollideEndCallback(y),l.onCollideEndCallback&&l.onCollideEndCallback(y)})})})}};a.exports=T},44097:(a,T,e)=>{var u=e(18171),y={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.18.0",silent:!0,install:function(d){d.after("Engine.update",function(){y.Engine.update(this)})},Engine:{update:function(d){for(var l=d.world,h=u.Composite.allBodies(l),r=u.Composite.allComposites(l),n=0;n<h.length;n+=1){var v=h[n];v.plugin.wrap&&y.Body.wrap(v,v.plugin.wrap)}for(n=0;n<r.length;n+=1){var o=r[n];o.plugin.wrap&&y.Composite.wrap(o,o.plugin.wrap)}}},Bounds:{wrap:function(d,l){var h=null,r=null;if(typeof l.min.x<"u"&&typeof l.max.x<"u"&&(d.min.x>l.max.x?h=l.min.x-d.max.x:d.max.x<l.min.x&&(h=l.max.x-d.min.x)),typeof l.min.y<"u"&&typeof l.max.y<"u"&&(d.min.y>l.max.y?r=l.min.y-d.max.y:d.max.y<l.min.y&&(r=l.max.y-d.min.y)),h!==null||r!==null)return{x:h||0,y:r||0}}},Body:{wrap:function(d,l){var h=y.Bounds.wrap(d.bounds,l);return h&&u.Body.translate(d,h),h}},Composite:{bounds:function(d){for(var l=u.Composite.allBodies(d),h=[],r=0;r<l.length;r+=1){var n=l[r];h.push(n.bounds.min,n.bounds.max)}return u.Bounds.create(h)},wrap:function(d,l){var h=y.Bounds.wrap(y.Composite.bounds(d),l);return h&&u.Composite.translate(d,h),h}}};a.exports=y},81084:a=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={decomp:R,quickDecomp:G,isSimple:D,removeCollinearPoints:z,removeDuplicatePoints:X,makeCCW:g};function T(N,W,F){F=F||0;var I=[0,0],k,Y,H,K,j,J,Q;return k=N[1][1]-N[0][1],Y=N[0][0]-N[1][0],H=k*N[0][0]+Y*N[0][1],K=W[1][1]-W[0][1],j=W[0][0]-W[1][0],J=K*W[0][0]+j*W[0][1],Q=k*j-K*Y,U(Q,0,F)||(I[0]=(j*H-Y*J)/Q,I[1]=(k*J-K*H)/Q),I}function e(N,W,F,I){var k=W[0]-N[0],Y=W[1]-N[1],H=I[0]-F[0],K=I[1]-F[1];if(H*Y-K*k===0)return!1;var j=(k*(F[1]-N[1])+Y*(N[0]-F[0]))/(H*Y-K*k),J=(H*(N[1]-F[1])+K*(F[0]-N[0]))/(K*k-H*Y);return j>=0&&j<=1&&J>=0&&J<=1}function u(N,W,F){return(W[0]-N[0])*(F[1]-N[1])-(F[0]-N[0])*(W[1]-N[1])}function y(N,W,F){return u(N,W,F)>0}function d(N,W,F){return u(N,W,F)>=0}function l(N,W,F){return u(N,W,F)<0}function h(N,W,F){return u(N,W,F)<=0}var r=[],n=[];function v(N,W,F,I){if(I){var k=r,Y=n;k[0]=W[0]-N[0],k[1]=W[1]-N[1],Y[0]=F[0]-W[0],Y[1]=F[1]-W[1];var H=k[0]*Y[0]+k[1]*Y[1],K=Math.sqrt(k[0]*k[0]+k[1]*k[1]),j=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),J=Math.acos(H/(K*j));return J<I}else return u(N,W,F)===0}function o(N,W){var F=W[0]-N[0],I=W[1]-N[1];return F*F+I*I}function c(N,W){var F=N.length;return N[W<0?W%F+F:W%F]}function m(N){N.length=0}function p(N,W,F,I){for(var k=F;k<I;k++)N.push(W[k])}function g(N){for(var W=0,F=N,I=1;I<N.length;++I)(F[I][1]<F[W][1]||F[I][1]===F[W][1]&&F[I][0]>F[W][0])&&(W=I);return y(c(N,W-1),c(N,W),c(N,W+1))?!1:(x(N),!0)}function x(N){for(var W=[],F=N.length,I=0;I!==F;I++)W.push(N.pop());for(var I=0;I!==F;I++)N[I]=W[I]}function E(N,W){return l(c(N,W-1),c(N,W),c(N,W+1))}var P=[],S=[];function M(N,W,F){var I,k,Y=P,H=S;if(d(c(N,W+1),c(N,W),c(N,F))&&h(c(N,W-1),c(N,W),c(N,F)))return!1;k=o(c(N,W),c(N,F));for(var K=0;K!==N.length;++K)if(!((K+1)%N.length===W||K===W)&&d(c(N,W),c(N,F),c(N,K+1))&&h(c(N,W),c(N,F),c(N,K))&&(Y[0]=c(N,W),Y[1]=c(N,F),H[0]=c(N,K),H[1]=c(N,K+1),I=T(Y,H),o(c(N,W),I)<k))return!1;return!0}function b(N,W,F){for(var I=0;I!==N.length;++I)if(!(I===W||I===F||(I+1)%N.length===W||(I+1)%N.length===F)&&e(c(N,W),c(N,F),c(N,I),c(N,I+1)))return!1;return!0}function A(N,W,F,I){var k=I||[];if(m(k),W<F)for(var Y=W;Y<=F;Y++)k.push(N[Y]);else{for(var Y=0;Y<=F;Y++)k.push(N[Y]);for(var Y=W;Y<N.length;Y++)k.push(N[Y])}return k}function L(N){for(var W=[],F=[],I=[],k=[],Y=Number.MAX_VALUE,H=0;H<N.length;++H)if(E(N,H)){for(var K=0;K<N.length;++K)if(M(N,H,K)){F=L(A(N,H,K,k)),I=L(A(N,K,H,k));for(var j=0;j<I.length;j++)F.push(I[j]);F.length<Y&&(W=F,Y=F.length,W.push([c(N,H),c(N,K)]))}}return W}function R(N){var W=L(N);return W.length>0?O(N,W):[N]}function O(N,W){if(W.length===0)return[N];if(W instanceof Array&&W.length&&W[0]instanceof Array&&W[0].length===2&&W[0][0]instanceof Array){for(var F=[N],I=0;I<W.length;I++)for(var k=W[I],Y=0;Y<F.length;Y++){var H=F[Y],K=O(H,k);if(K){F.splice(Y,1),F.push(K[0],K[1]);break}}return F}else{var k=W,I=N.indexOf(k[0]),Y=N.indexOf(k[1]);return I!==-1&&Y!==-1?[A(N,I,Y),A(N,Y,I)]:!1}}function D(N){var W=N,F;for(F=0;F<W.length-1;F++)for(var I=0;I<F-1;I++)if(e(W[F],W[F+1],W[I],W[I+1]))return!1;for(F=1;F<W.length-2;F++)if(e(W[0],W[W.length-1],W[F],W[F+1]))return!1;return!0}function B(N,W,F,I,k){k=k||0;var Y=W[1]-N[1],H=N[0]-W[0],K=Y*N[0]+H*N[1],j=I[1]-F[1],J=F[0]-I[0],Q=j*F[0]+J*F[1],Z=Y*J-j*H;return U(Z,0,k)?[0,0]:[(J*K-H*Q)/Z,(Y*Q-j*K)/Z]}function G(N,W,F,I,k,Y,H){Y=Y||100,H=H||0,k=k||25,W=typeof W<"u"?W:[],F=F||[],I=I||[];var K=[0,0],j=[0,0],J=[0,0],Q=0,Z=0,q=0,et=0,tt=0,it=0,ut=0,ot=[],ht=[],st=N,at=N;if(at.length<3)return W;if(H++,H>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),W;for(var nt=0;nt<N.length;++nt)if(E(st,nt)){F.push(st[nt]),Q=Z=Number.MAX_VALUE;for(var gt=0;gt<N.length;++gt)y(c(st,nt-1),c(st,nt),c(st,gt))&&h(c(st,nt-1),c(st,nt),c(st,gt-1))&&(J=B(c(st,nt-1),c(st,nt),c(st,gt),c(st,gt-1)),l(c(st,nt+1),c(st,nt),J)&&(q=o(st[nt],J),q<Z&&(Z=q,j=J,it=gt))),y(c(st,nt+1),c(st,nt),c(st,gt+1))&&h(c(st,nt+1),c(st,nt),c(st,gt))&&(J=B(c(st,nt+1),c(st,nt),c(st,gt),c(st,gt+1)),y(c(st,nt-1),c(st,nt),J)&&(q=o(st[nt],J),q<Q&&(Q=q,K=J,tt=gt)));if(it===(tt+1)%N.length)J[0]=(j[0]+K[0])/2,J[1]=(j[1]+K[1])/2,I.push(J),nt<tt?(p(ot,st,nt,tt+1),ot.push(J),ht.push(J),it!==0&&p(ht,st,it,st.length),p(ht,st,0,nt+1)):(nt!==0&&p(ot,st,nt,st.length),p(ot,st,0,tt+1),ot.push(J),ht.push(J),p(ht,st,it,nt+1));else{if(it>tt&&(tt+=N.length),et=Number.MAX_VALUE,tt<it)return W;for(var gt=it;gt<=tt;++gt)d(c(st,nt-1),c(st,nt),c(st,gt))&&h(c(st,nt+1),c(st,nt),c(st,gt))&&(q=o(c(st,nt),c(st,gt)),q<et&&b(st,nt,gt)&&(et=q,ut=gt%N.length));nt<ut?(p(ot,st,nt,ut+1),ut!==0&&p(ht,st,ut,at.length),p(ht,st,0,nt+1)):(nt!==0&&p(ot,st,nt,at.length),p(ot,st,0,ut+1),p(ht,st,ut,nt+1))}return ot.length<ht.length?(G(ot,W,F,I,k,Y,H),G(ht,W,F,I,k,Y,H)):(G(ht,W,F,I,k,Y,H),G(ot,W,F,I,k,Y,H)),W}return W.push(N),W}function z(N,W){for(var F=0,I=N.length-1;N.length>3&&I>=0;--I)v(c(N,I-1),c(N,I),c(N,I+1),W)&&(N.splice(I%N.length,1),F++);return F}function X(N,W){for(var F=N.length-1;F>=1;--F)for(var I=N[F],k=F-1;k>=0;--k)if(V(I,N[k],W)){N.splice(F,1);continue}}function U(N,W,F){return F=F||0,Math.abs(N-W)<=F}function V(N,W,F){return U(N[0],W[0],F)&&U(N[1],W[1],F)}},88257:(a,T,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var u=e(56694),y=new u({initialize:function(l){this.pluginManager=l,this.game=l.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});a.exports=y},18360:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};a.exports=T},91963:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={},u={};u.register=function(y,d,l,h){h===void 0&&(h=!1),T[y]={plugin:d,mapping:l,custom:h}},u.registerCustom=function(y,d,l,h){e[y]={plugin:d,mapping:l,data:h}},u.hasCore=function(y){return T.hasOwnProperty(y)},u.hasCustom=function(y){return e.hasOwnProperty(y)},u.getCore=function(y){return T[y]},u.getCustom=function(y){return e[y]},u.getCustomClass=function(y){return e.hasOwnProperty(y)?e[y].plugin:null},u.remove=function(y){T.hasOwnProperty(y)&&delete T[y]},u.removeCustom=function(y){e.hasOwnProperty(y)&&delete e[y]},u.destroyCorePlugins=function(){for(var y in T)T.hasOwnProperty(y)&&delete T[y]},u.destroyCustomPlugins=function(){for(var y in e)e.hasOwnProperty(y)&&delete e[y]},a.exports=u},49274:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(97081),d=e(6659),l=e(76846),h=e(99325),r=e(61286),n=e(72632),v=e(91963),o=e(66458),c=new u({Extends:d,initialize:function(p){d.call(this),this.game=p,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],p.isBooted?this.boot():p.events.once(y.BOOT,this.boot,this)},boot:function(){var m,p,g,x,E,P,S,M=this.game.config,b=M.installGlobalPlugins;for(b=b.concat(this._pendingGlobal),m=0;m<b.length;m++)p=b[m],g=n(p,"key",null),x=n(p,"plugin",null),E=n(p,"start",!1),P=n(p,"mapping",null),S=n(p,"data",null),g&&(x?this.install(g,x,E,P,S):console.warn("Missing `plugin` for key: "+g));for(b=M.installScenePlugins,b=b.concat(this._pendingScene),m=0;m<b.length;m++)p=b[m],g=n(p,"key",null),x=n(p,"plugin",null),P=n(p,"mapping",null),g&&(x?this.installScenePlugin(g,x,P):console.warn("Missing `plugin` for key: "+g));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(y.DESTROY,this.destroy,this)},addToScene:function(m,p,g){var x,E,P,S=this.game,M=m.scene,b=m.settings.map,A=m.settings.isBooted;for(x=0;x<p.length;x++)E=p[x],S[E]?(m[E]=S[E],b.hasOwnProperty(E)&&(M[b[E]]=m[E])):E==="game"&&b.hasOwnProperty(E)&&(M[b[E]]=S);for(var L=0;L<g.length;L++)for(P=g[L],x=0;x<P.length;x++)if(E=P[x],!!v.hasCore(E)){var R=v.getCore(E),O=R.mapping,D=new R.plugin(M,this,O);m[O]=D,R.custom?M[O]=D:b.hasOwnProperty(O)&&(M[b[O]]=D),A&&D.boot()}for(P=this.plugins,x=0;x<P.length;x++){var B=P[x];B.mapping&&(M[B.mapping]=B.plugin)}},getDefaultScenePlugins:function(){var m=this.game.config.defaultPlugins;return m=m.concat(this.scenePlugins),m},installScenePlugin:function(m,p,g,x,E){if(E===void 0&&(E=!1),typeof p!="function"){console.warn("Invalid Scene Plugin: "+m);return}if(v.hasCore(m)||v.register(m,p,g,!0),this.scenePlugins.indexOf(m)===-1)this.scenePlugins.push(m);else if(!E&&v.hasCore(m)){console.warn("Scene Plugin key in use: "+m);return}if(x){var P=new p(x,this,m);x.sys[m]=P,g&&g!==""&&(x[g]=P),P.boot()}},install:function(m,p,g,x,E){if(g===void 0&&(g=!1),x===void 0&&(x=null),E===void 0&&(E=null),typeof p!="function")return console.warn("Invalid Plugin: "+m),null;if(v.hasCustom(m))return console.warn("Plugin key in use: "+m),null;if(x!==null&&(g=!0),!this.game.isBooted)this._pendingGlobal.push({key:m,plugin:p,start:g,mapping:x,data:E});else if(v.registerCustom(m,p,x,E),g)return this.start(m);return null},getIndex:function(m){for(var p=this.plugins,g=0;g<p.length;g++){var x=p[g];if(x.key===m)return g}return-1},getEntry:function(m){var p=this.getIndex(m);if(p!==-1)return this.plugins[p]},isActive:function(m){var p=this.getEntry(m);return p&&p.active},start:function(m,p){p===void 0&&(p=m);var g=this.getEntry(p);return g&&!g.active?(g.active=!0,g.plugin.start()):g||(g=this.createEntry(m,p)),g?g.plugin:null},createEntry:function(m,p){var g=v.getCustom(m);if(g){var x=new g.plugin(this);g={key:p,plugin:x,active:!0,mapping:g.mapping,data:g.data},this.plugins.push(g),x.init(g.data),x.start()}return g},stop:function(m){var p=this.getEntry(m);return p&&p.active&&(p.active=!1,p.plugin.stop()),this},get:function(m,p){p===void 0&&(p=!0);var g=this.getEntry(m);if(g)return g.plugin;var x=this.getClass(m);return x&&p?(g=this.createEntry(m,m),g?g.plugin:null):x||null},getClass:function(m){return v.getCustomClass(m)},removeGlobalPlugin:function(m){var p=this.getEntry(m);p&&o(this.plugins,p),v.removeCustom(m)},removeScenePlugin:function(m){o(this.scenePlugins,m),v.remove(m)},registerGameObject:function(m,p,g){return p&&r.register(m,p),g&&h.register(m,g),this},removeGameObject:function(m,p,g){return p===void 0&&(p=!0),g===void 0&&(g=!0),p&&r.remove(m),g&&h.remove(m),this},registerFileType:function(m,p,g){l.register(m,p),g&&g.sys.load&&(g.sys.load[m]=p)},destroy:function(){for(var m=0;m<this.plugins.length;m++)this.plugins[m].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});a.exports=c},39283:(a,T,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var u=e(88257),y=e(56694),d=e(7599),l=new y({Extends:u,initialize:function(r,n,v){u.call(this,n),this.scene=r,this.systems=r.sys,this.pluginKey=v,r.sys.events.once(d.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});a.exports=l},45615:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},95723:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DEFAULT:0,LINEAR:0,NEAREST:1};a.exports=T},91135:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(89787),y=e(61840),d=e(56694),l=e(86459),h=e(6659),r=e(81044),n=e(32834),v=e(40444),o=e(38203),c=e(69360),m=new d({Extends:h,initialize:function(g){h.call(this);var x=g.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=g,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=g.canvas;var E={alpha:g.config.transparent,desynchronized:g.config.desynchronized,willReadFrequently:!1};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=g.config.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(o.READY,this.boot,this)},boot:function(){var p=this.game,g=p.scale.baseSize;this.width=g.width,this.height=g.height,this.isBooted=!0,p.scale.on(v.RESIZE,this.onResize,this),this.resize(g.width,g.height)},onResize:function(p,g){(g.width!==this.width||g.height!==this.height)&&this.resize(g.width,g.height)},resize:function(p,g){this.width=p,this.height=g,this.emit(r.RESIZE,p,g)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(p){return this.currentContext.globalCompositeOperation=p,this},setContext:function(p){return this.currentContext=p||this.gameContext,this},setAlpha:function(p){return this.currentContext.globalAlpha=p,this},preRender:function(){var p=this.gameContext,g=this.config,x=this.width,E=this.height;p.globalAlpha=1,p.globalCompositeOperation="source-over",p.setTransform(1,0,0,1,0,0),g.clearBeforeRender&&(p.clearRect(0,0,x,E),g.transparent||(p.fillStyle=g.backgroundColor.rgba,p.fillRect(0,0,x,E))),p.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(p,g,x){var E=g.length;this.emit(r.RENDER,p,x);var P=x.x,S=x.y,M=x.width,b=x.height,A=x.renderToTexture?x.context:p.sys.context;A.save(),this.game.scene.customViewports&&(A.beginPath(),A.rect(P,S,M,b),A.clip()),x.emit(u.PRE_RENDER,x),this.currentContext=A;var L=x.mask;L&&L.preRenderCanvas(this,null,x._maskCamera),x.transparent||(A.fillStyle=x.backgroundColor.rgba,A.fillRect(P,S,M,b)),A.globalAlpha=x.alpha,A.globalCompositeOperation="source-over",this.drawCount+=E,x.renderToTexture&&x.emit(u.PRE_RENDER,x),x.matrix.copyToContext(A);for(var R=0;R<E;R++){var O=g[R];O.mask&&O.mask.preRenderCanvas(this,O,x),O.renderCanvas(this,O,x),O.mask&&O.mask.postRenderCanvas(this,O,x)}A.setTransform(1,0,0,1,0,0),A.globalCompositeOperation="source-over",A.globalAlpha=1,x.flashEffect.postRenderCanvas(A),x.fadeEffect.postRenderCanvas(A),x.dirty=!1,L&&L.postRenderCanvas(this),A.restore(),x.renderToTexture&&(x.emit(u.POST_RENDER,x),x.renderToGame&&p.sys.context.drawImage(x.canvas,P,S)),x.emit(u.POST_RENDER,x)},postRender:function(){var p=this.gameContext;p.restore(),this.emit(r.POST_RENDER);var g=this.snapshotState;g.callback&&(y(this.gameCanvas,g),g.callback=null)},snapshotCanvas:function(p,g,x,E,P,S,M,b,A){x===void 0&&(x=!1),this.snapshotArea(E,P,S,M,g,b,A);var L=this.snapshotState;return L.getPixel=x,y(p,L),L.callback=null,this},snapshot:function(p,g,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,p,g,x)},snapshotArea:function(p,g,x,E,P,S,M){var b=this.snapshotState;return b.callback=P,b.type=S,b.encoder=M,b.getPixel=!1,b.x=p,b.y=g,b.width=Math.min(x,this.gameCanvas.width),b.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(p,g,x){return this.snapshotArea(p,g,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(p,g,x,E){var P=x.alpha*p.alpha;if(P!==0){var S=this.currentContext,M=this._tempMatrix1,b=this._tempMatrix2,A=g.canvasData,L=A.x,R=A.y,O=g.cutWidth,D=g.cutHeight,B=g.customPivot,G=g.source.resolution,z=p.displayOriginX,X=p.displayOriginY,U=-z+g.x,V=-X+g.y;if(p.isCropped){var N=p._crop;(N.flipX!==p.flipX||N.flipY!==p.flipY)&&g.updateCropUVs(N,p.flipX,p.flipY),O=N.cw,D=N.ch,L=N.cx,R=N.cy,U=-z+N.x,V=-X+N.y,p.flipX&&(U>=0?U=-(U+O):U<0&&(U=Math.abs(U)-O)),p.flipY&&(V>=0?V=-(V+D):V<0&&(V=Math.abs(V)-D))}var W=1,F=1;p.flipX&&(B||(U+=-g.realWidth+z*2),W=-1),p.flipY&&(B||(V+=-g.realHeight+X*2),F=-1);var I=p.x,k=p.y;x.roundPixels&&(I=Math.floor(I),k=Math.floor(k)),b.applyITRS(I,k,p.rotation,p.scaleX*W,p.scaleY*F),M.copyFrom(x.matrix),E?(M.multiplyWithOffset(E,-x.scrollX*p.scrollFactorX,-x.scrollY*p.scrollFactorY),b.e=I,b.f=k):(b.e-=x.scrollX*p.scrollFactorX,b.f-=x.scrollY*p.scrollFactorY),M.multiply(b),x.roundPixels&&(M.e=Math.round(M.e),M.f=Math.round(M.f)),S.save(),M.setToContext(S),S.globalCompositeOperation=this.blendModes[p.blendMode],S.globalAlpha=P,S.imageSmoothingEnabled=!g.source.scaleMode,p.mask&&p.mask.preRenderCanvas(this,p,x),O>0&&D>0&&S.drawImage(g.source.image,L,R,O,D,U,V,O/G,D/G),p.mask&&p.mask.postRenderCanvas(this,p,x),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});a.exports=m},6046:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y=e(98581),d=function(){var l=[],h=y.supportNewBlendModes,r="source-over";return l[u.NORMAL]=r,l[u.ADD]="lighter",l[u.MULTIPLY]=h?"multiply":r,l[u.SCREEN]=h?"screen":r,l[u.OVERLAY]=h?"overlay":r,l[u.DARKEN]=h?"darken":r,l[u.LIGHTEN]=h?"lighten":r,l[u.COLOR_DODGE]=h?"color-dodge":r,l[u.COLOR_BURN]=h?"color-burn":r,l[u.HARD_LIGHT]=h?"hard-light":r,l[u.SOFT_LIGHT]=h?"soft-light":r,l[u.DIFFERENCE]=h?"difference":r,l[u.EXCLUSION]=h?"exclusion":r,l[u.HUE]=h?"hue":r,l[u.SATURATION]=h?"saturation":r,l[u.COLOR]=h?"color":r,l[u.LUMINOSITY]=h?"luminosity":r,l[u.ERASE]="destination-out",l[u.SOURCE_IN]="source-in",l[u.SOURCE_OUT]="source-out",l[u.SOURCE_ATOP]="source-atop",l[u.DESTINATION_OVER]="destination-over",l[u.DESTINATION_IN]="destination-in",l[u.DESTINATION_OUT]="destination-out",l[u.DESTINATION_ATOP]="destination-atop",l[u.LIGHTER]="lighter",l[u.COPY]="copy",l[u.XOR]="xor",l};a.exports=d},49584:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),y=function(d,l,h,r,n){var v=r.alpha*h.alpha;if(v<=0)return!1;var o=u(h,r,n).calc;return l.globalCompositeOperation=d.blendModes[h.blendMode],l.globalAlpha=v,l.save(),o.setToContext(l),l.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:d.antialias,!0};a.exports=y},70936:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postrender"},99298:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},7743:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="render"},99519:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resize"},81044:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y=e(27119),d=e(72632),l=function(h,r){var n=d(r,"callback"),v=d(r,"type","image/png"),o=d(r,"encoder",.92),c=Math.abs(Math.round(d(r,"x",0))),m=Math.abs(Math.round(d(r,"y",0))),p=Math.floor(d(r,"width",h.width)),g=Math.floor(d(r,"height",h.height)),x=d(r,"getPixel",!1);if(x){var E=h.getContext("2d",{willReadFrequently:!1}),P=E.getImageData(c,m,1,1),S=P.data;n.call(null,new y(S[0],S[1],S[2],S[3]))}else if(c!==0||m!==0||p!==h.width||g!==h.height){var M=u.createWebGL(this,p,g),b=M.getContext("2d",{willReadFrequently:!0});p>0&&g>0&&b.drawImage(h,c,m,p,g,0,0,p,g);var A=new Image;A.onerror=function(){n.call(null),u.remove(M)},A.onload=function(){n.call(null,A),u.remove(M)},A.src=M.toDataURL(v,o)}else{var L=new Image;L.onerror=function(){n.call(null)},L.onload=function(){n.call(null,L)},L.src=h.toDataURL(v,o)}};a.exports=l},1217:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y=e(27119),d=e(72632),l=function(h,r){var n=h,v=d(r,"callback"),o=d(r,"type","image/png"),c=d(r,"encoder",.92),m=Math.abs(Math.round(d(r,"x",0))),p=Math.abs(Math.round(d(r,"y",0))),g=d(r,"getPixel",!1),x=d(r,"isFramebuffer",!1),E=x?d(r,"bufferWidth",1):n.drawingBufferWidth,P=x?d(r,"bufferHeight",1):n.drawingBufferHeight;if(g){var S=new Uint8Array(4),M=x?p:P-p;n.readPixels(m,M,1,1,n.RGBA,n.UNSIGNED_BYTE,S),v.call(null,new y(S[0],S[1],S[2],S[3]))}else{var b=Math.floor(d(r,"width",E)),A=Math.floor(d(r,"height",P)),L=b*A*4,R=new Uint8Array(L);n.readPixels(m,P-p-A,b,A,n.RGBA,n.UNSIGNED_BYTE,R);for(var O=u.createWebGL(this,b,A),D=O.getContext("2d",{willReadFrequently:!0}),B=D.getImageData(0,0,b,A),G=B.data,z=0;z<A;z++)for(var X=0;X<b;X++){var U=((A-z-1)*b+X)*4,V=x?L-(z*b+(b-X))*4:(z*b+X)*4;G[V+0]=R[U+0],G[V+1]=R[U+1],G[V+2]=R[U+2],G[V+3]=R[U+3]}D.putImageData(B,0,0);var N=new Image;N.onerror=function(){v.call(null),u.remove(O)},N.onload=function(){v.call(null,N),u.remove(O)},N.src=O.toDataURL(o,c)}};a.exports=l},95528:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(65641),d=e(33885),l=e(77290),h=e(72632),r=e(37410),n=e(82127),v=e(5583),o=e(58136),c=e(47406),m=e(81828),p=e(66901),g=e(71264),x=e(77310),E=e(10919),P=e(21213),S=e(51212),M=e(60848),b=new u({initialize:function(L){this.game=L.game,this.renderer=L,this.classes=new d([[y.UTILITY_PIPELINE,M],[y.MULTI_PIPELINE,x],[y.BITMAPMASK_PIPELINE,v],[y.SINGLE_PIPELINE,S],[y.ROPE_PIPELINE,P],[y.LIGHT_PIPELINE,p],[y.POINTLIGHT_PIPELINE,E],[y.MOBILE_PIPELINE,g],[y.FX_PIPELINE,m]]),this.postPipelineClasses=new d([[String(c.BARREL),o.Barrel],[String(c.BLOOM),o.Bloom],[String(c.BLUR),o.Blur],[String(c.BOKEH),o.Bokeh],[String(c.CIRCLE),o.Circle],[String(c.COLOR_MATRIX),o.ColorMatrix],[String(c.DISPLACEMENT),o.Displacement],[String(c.GLOW),o.Glow],[String(c.GRADIENT),o.Gradient],[String(c.PIXELATE),o.Pixelate],[String(c.SHADOW),o.Shadow],[String(c.SHINE),o.Shine],[String(c.VIGNETTE),o.Vignette],[String(c.WIPE),o.Wipe]]),this.pipelines=new d,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(A,L,R){var O=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(h(A,"frameInc",32));for(var B=O.width,G=O.height,z=Math.min(B,G),X=Math.ceil(z/this.frameInc),U=1;U<X;U++){var V=U*this.frameInc;D.push(new r(O,V,V)),D.push(new r(O,V,V)),D.push(new r(O,V,V))}D.push(new r(O,B,G,1,0,!0,!0)),D.push(new r(O,B,G,1,0,!0,!0)),D.push(new r(O,B,G,1,0,!0,!0)),this.maxDimension=(X-1)*this.frameInc;var N,W,F=this,I=this.game;if(this.classes.each(function(Y,H){N=F.add(Y,new H({game:I})),Y===y.UTILITY_PIPELINE&&(F.UTILITY_PIPELINE=N,F.fullFrame1=N.fullFrame1,F.fullFrame2=N.fullFrame2,F.halfFrame1=N.halfFrame1,F.halfFrame2=N.halfFrame2)}),this.MULTI_PIPELINE=this.get(y.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(y.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(y.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(y.FX_PIPELINE),A)for(W in A){var k=A[W];N=new k(I),N.name=W,N.isPostFX?this.postPipelineClasses.set(W,k):this.has(W)||(this.classes.set(W,k),this.add(W,N))}this.default=this.get(L),R&&!l.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(A){var L=this.get(A);return L&&(this.default=L),L},add:function(A,L){if(L.isPostFX){console.warn(A+" is a Post Pipeline. Use `addPostPipeline` instead");return}var R=this.pipelines,O=this.renderer;return R.has(A)?console.warn("Pipeline exists: "+A):(L.name=A,L.manager=this,R.set(A,L)),L.hasBooted||L.boot(),O.width!==0&&O.height!==0&&!L.isPreFX&&L.resize(O.width,O.height),L},addPostPipeline:function(A,L){this.postPipelineClasses.has(A)||this.postPipelineClasses.set(A,L)},flush:function(){this.current&&this.current.flush()},has:function(A){var L=this.pipelines;return typeof A=="string"?L.has(A):!!L.contains(A)},get:function(A){var L=this.pipelines;if(typeof A=="string")return L.get(A);if(L.contains(A))return A},getPostPipeline:function(A,L,R){var O=this.postPipelineClasses,D,B="",G=typeof A;if(G==="string"||G==="number"?(D=O.get(A),B=A):G==="function"?(O.contains(A)&&(D=A),B=A.name):G==="object"&&(D=O.get(A.name),B=A.name),D){var z=new D(this.game,R);return z.name=B,L&&(z.gameObject=L),z}},remove:function(A,L,R){L===void 0&&(L=!0),R===void 0&&(R=!0),this.pipelines.delete(A),L&&this.classes.delete(A),R&&this.postPipelineClasses.delete(A)},set:function(A,L,R){if(!A.isPostFX)return this.isCurrent(A,R)||(this.flush(),this.current&&this.current.unbind(),this.current=A,A.bind(R)),A.updateProjectionMatrix(),A.onBind(L),A},preBatch:function(A){if(A.hasPostPipeline){this.flush();for(var L=A.postPipelines,R=L.length-1;R>=0;R--){var O=L[R];O.active&&O.preBatch(A)}}},postBatch:function(A){if(A.hasPostPipeline){this.flush();for(var L=A.postPipelines,R=0;R<L.length;R++){var O=L[R];O.active&&O.postBatch(A)}}},preBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var L=A.postPipelines,R=L.length-1;R>=0;R--){var O=L[R];O.active&&O.preBatch(A)}}},postBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var L=A.postPipelines,R=0;R<L.length;R++){var O=L[R];O.active&&O.postBatch(A)}}},isCurrent:function(A,L){var R=this.renderer,O=this.current;return O&&!L&&(L=O.currentShader),!(O!==A||L.program!==R.currentProgram)},copyFrame:function(A,L,R,O,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(A,L,R,O,D),this},copyToGame:function(A){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(A),this},drawFrame:function(A,L,R,O){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(A,L,R,O),this},blendFrames:function(A,L,R,O,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(A,L,R,O,D),this},blendFramesAdditive:function(A,L,R,O,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(A,L,R,O,D),this},clearFrame:function(A,L){return this.UTILITY_PIPELINE.clearFrame(A,L),this},blitFrame:function(A,L,R,O,D,B){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(A,L,R,O,D,B),this},copyFrameRect:function(A,L,R,O,D,B,G,z){return this.UTILITY_PIPELINE.copyFrameRect(A,L,R,O,D,B,G,z),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(A){return this.UTILITY_PIPELINE.bind(A)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(A){A===void 0&&this.previous&&(A=this.previous);var L=this.renderer,R=L.gl;R.disable(R.DEPTH_TEST),R.disable(R.CULL_FACE),L.hasActiveStencilMask()?R.clear(R.DEPTH_BUFFER_BIT):(R.disable(R.STENCIL_TEST),R.clear(R.DEPTH_BUFFER_BIT|R.STENCIL_BUFFER_BIT)),R.viewport(0,0,L.width,L.height),L.currentProgram=null,L.setBlendMode(0,!0);var O=L.vaoExtension;O&&O.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var B in D)D[B].glReset=!0;A&&(this.current=A,A.rebind())},clear:function(){var A=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,A.currentProgram=null,A.setBlendMode(0,!0);var L=A.vaoExtension;L&&L.bindVertexArrayOES(null)},getRenderTarget:function(A){var L=this.renderTargets,R=3;if(A>this.maxDimension)return this.targetIndex=L.length-R,L[this.targetIndex];var O=(n(A,this.frameInc,0,!0)-1)*R;return this.targetIndex=O,L[O]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});a.exports=b},37410:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(81044),d=new u({initialize:function(h,r,n,v,o,c,m,p){v===void 0&&(v=1),o===void 0&&(o=0),c===void 0&&(c=!0),m===void 0&&(m=!1),p===void 0&&(p=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=o,this.autoClear=c,this.autoResize=!0,this.hasDepthBuffer=p,this.resize(r,n),m?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(y.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(y.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,h){var r=l*this.scale,n=h*this.scale;if(this.autoResize&&(r!==this.width||n!==this.height)){var v=this.renderer;v.deleteFramebuffer(this.framebuffer),v.deleteTexture(this.texture),l*=this.scale,h*=this.scale,l=Math.round(l),h=Math.round(h),l<=0&&(l=1),h<=0&&(h=1),this.texture=v.createTextureFromSource(null,l,h,this.minFilter,!0),this.framebuffer=v.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h}return this},bind:function(l,h,r){l===void 0&&(l=!1);var n=this.renderer;if(l&&n.flush(),h&&r&&this.resize(h,r),n.pushFramebuffer(this.framebuffer,!1,!1),l&&this.adjustViewport(),this.autoClear){var v=this.renderer.gl;v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT)}n.clearStencilMask()},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(){var l=this.renderer,h=l.gl;l.pushFramebuffer(this.framebuffer),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),l.popFramebuffer(),l.resetScissor()},unbind:function(l){l===void 0&&(l=!1);var h=this.renderer;return l&&h.flush(),h.popFramebuffer()},destroy:function(){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),l.off(y.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});a.exports=d},75512:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={getTintFromFloats:function(T,e,u,y){var d=(T*255|0)&255,l=(e*255|0)&255,h=(u*255|0)&255,r=(y*255|0)&255;return(r<<24|d<<16|l<<8|h)>>>0},getTintAppendFloatAlpha:function(T,e){var u=(e*255|0)&255;return(u<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,e){var u=(T>>16|0)&255,y=(T>>8|0)&255,d=(T|0)&255,l=(e*255|0)&255;return(l<<24|d<<16|y<<8|u)>>>0},getFloatsFromUintRGB:function(T){var e=(T>>16|0)&255,u=(T>>8|0)&255,y=(T|0)&255;return[e/255,u/255,y/255]},checkShaderMax:function(T,e){var u=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?u:Math.min(u,e)},parseFragmentShaderMaxTextures:function(T,e){if(!T)return"";for(var u="",y=0;y<e;y++)y>0&&(u+=`
	else `),y<e-1&&(u+="if (outTexId < "+y+".5)"),u+=`
	{`,u+=`
		texture = texture2D(uMainSampler[`+y+"], outTexCoord);",u+=`
	}`;return T=T.replace(/%count%/gi,e.toString()),T.replace(/%forloop%/gi,u)},setGlowQuality:function(T,e,u,y){return u===void 0&&(u=e.config.glowFXQuality),y===void 0&&(y=e.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/u/y).toFixed(7)),T=T.replace(/__DIST__/gi,y.toFixed(0)+".0"),T}}},44775:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(28699),d=e(6659),l=e(18970),h=e(72632),r=e(16650),n=e(81044),v=e(37410),o=e(75512),c=e(71305),m=new u({Extends:d,initialize:function(g){d.call(this);var x=g.game,E=x.renderer,P=E.gl;this.name=h(g,"name","WebGLPipeline"),this.game=x,this.renderer=E,this.manager,this.gl=P,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(g,"topology",P.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(g,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=g,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var p,g=this.gl,x=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var P=this.renderTargets,S=h(x,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var M=E.width,b=E.height;if(typeof S=="number")for(p=0;p<S;p++)P.push(new v(E,M,b,1,0,!0));else if(Array.isArray(S))for(p=0;p<S.length;p++){var A=h(S[p],"scale",1),L=h(S[p],"minFilter",0),R=h(S[p],"autoClear",1),O=h(S[p],"width",null),D=h(S[p],"height",O);O?P.push(new v(E,O,D,1,L,R)):P.push(new v(E,M,b,A,L,R))}P.length&&(this.currentRenderTarget=P[0]),this.setShadersFromConfig(x);var B=this.shaders,G=0;for(p=0;p<B.length;p++)B[p].vertexSize>G&&(G=B[p].vertexSize);var z=h(x,"batchSize",E.config.batchSize);this.vertexCapacity=z*6;var X=new ArrayBuffer(this.vertexCapacity*G);this.vertexData=X,this.bytes=new Uint8Array(X),this.vertexViewF32=new Float32Array(X),this.vertexViewU32=new Uint32Array(X);var U=h(x,"vertices",null);for(U?(this.vertexViewF32.set(U),this.vertexBuffer=E.createVertexBuffer(X,g.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(X.byteLength,g.DYNAMIC_DRAW),this.setVertexBuffer(),p=B.length-1;p>=0;p--)B[p].rebind();this.hasBooted=!0,E.on(n.RESIZE,this.resize,this),E.on(n.PRE_RENDER,this.onPreRender,this),E.on(n.RENDER,this.onRender,this),E.on(n.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(p,g,x){var E=this.renderer;if(p!==this.currentShader||E.currentProgram!==this.currentShader.program){this.flush();var P=this.setVertexBuffer(x);P&&!g&&(g=!0),p.bind(g,!1),this.currentShader=p}return this},getShaderByName:function(p){for(var g=this.shaders,x=0;x<g.length;x++)if(g[x].name===p)return g[x]},setShadersFromConfig:function(p){var g,x=this.shaders,E=this.renderer;for(g=0;g<x.length;g++)x[g].destroy();var P="vertShader",S="fragShader",M="attributes",b=h(p,P,null),A=o.parseFragmentShaderMaxTextures(h(p,S,null),E.maxTextures),L=h(p,M,null),R=h(p,"shaders",[]),O=R.length;if(O===0)b&&A&&(this.shaders=[new c(this,"default",b,A,y(L))]);else{var D=[];for(g=0;g<O;g++){var B=R[g],G,z,X,U;if(typeof B=="string"?(G="default",z=b,X=o.parseFragmentShaderMaxTextures(B,E.maxTextures),U=L):(G=h(B,"name","default"),z=h(B,P,b),X=o.parseFragmentShaderMaxTextures(h(B,S,A),E.maxTextures),U=h(B,M,L)),G==="default"){var V=X.split(`
`),N=V[0].trim();N.indexOf("#define SHADER_NAME")>-1&&(G=N.substring(20))}z&&X&&D.push(new c(this,G,z,X,y(U)))}this.shaders=D}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(p){return this.currentBatch={start:this.vertexCount,count:0,texture:[p],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=p,this.batch.push(this.currentBatch),0},addTextureToBatch:function(p){var g=this.currentBatch;g&&(g.texture.push(p),g.unit++,g.maxUnit++)},pushBatch:function(p){if(!this.currentBatch||this.forceZero&&p!==this.currentTexture)return this.createBatch(p);if(p===this.currentTexture)return this.currentUnit;var g=this.currentBatch,x=g.texture.indexOf(p);return x===-1?g.texture.length===this.renderer.maxTextures?this.createBatch(p):(g.unit++,g.maxUnit++,g.texture.push(p),this.currentUnit=g.unit,this.currentTexture=p,g.unit):(this.currentUnit=x,this.currentTexture=p,x)},setGameObject:function(p,g){return g===void 0&&(g=p.frame),this.pushBatch(g.source.glTexture)},shouldFlush:function(p){return p===void 0&&(p=0),this.vertexCount+p>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(p,g){(p!==this.width||g!==this.height)&&this.flush(),this.width=p,this.height=g;for(var x=this.renderTargets,E=0;E<x.length;E++)x[E].resize(p,g);return this.setProjectionMatrix(p,g),this.emit(l.RESIZE,p,g,this),this.onResize(p,g),this},setProjectionMatrix:function(p,g){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=p,this.projectionHeight=g,x.ortho(0,p,g,0,-1e3,1e3);for(var E=this.shaders,P="uProjectionMatrix",S=0;S<E.length;S++){var M=E[S];M.hasUniform(P)&&(M.resetUniform(P),M.setMatrix4fv(P,!1,x.val,M))}return this},flipProjectionMatrix:function(p){p===void 0&&(p=!0);var g=this.projectionMatrix;if(!g)return this;var x=this.projectionWidth,E=this.projectionHeight;p?g.ortho(0,x,0,E,-1e3,1e3):g.ortho(0,x,E,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,g.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var p=this.renderer.projectionWidth,g=this.renderer.projectionHeight;(this.projectionWidth!==p||this.projectionHeight!==g)&&this.setProjectionMatrix(p,g)}},bind:function(p){if(p===void 0&&(p=this.currentShader),this.glReset)return this.rebind(p);var g=!1,x=this.gl;return x.getParameter(x.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(x.bindBuffer(x.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,g=!0),p.bind(g),this.currentShader=p,this.activeTextures.length=0,this.emit(l.BIND,this,p),this.onActive(p),this},rebind:function(p){this.activeBuffer=null,this.setVertexBuffer();for(var g=this.shaders,x=g.length-1;x>=0;x--){var E=g[x].rebind();(!p||E===p)&&(this.currentShader=E)}return this.activeTextures.length=0,this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(p){if(p===void 0&&(p=this.vertexBuffer),p!==this.activeBuffer){var g=this.gl;return this.gl.bindBuffer(g.ARRAY_BUFFER,p),this.activeBuffer=p,!0}return!1},preBatch:function(p){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(p),this},postBatch:function(p){return this.onDraw(this.currentRenderTarget),this.onPostBatch(p),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(p){if(p===void 0&&(p=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,p),this.onBeforeFlush(p);var g=this.gl,x=this.vertexCount,E=this.currentShader.vertexSize,P=this.topology;if(this.active){this.setVertexBuffer(),x===this.vertexCapacity?g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.DYNAMIC_DRAW):g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,x*E));var S,M,b,A=this.batch,L=this.activeTextures;if(this.forceZero)for(L[0]||g.activeTexture(g.TEXTURE0),S=0;S<A.length;S++)M=A[S],b=M.texture[0],L[0]!==b&&(g.bindTexture(g.TEXTURE_2D,b),L[0]=b),g.drawArrays(P,M.start,M.count);else for(S=0;S<A.length;S++){M=A[S];for(var R=0;R<=M.maxUnit;R++)b=M.texture[R],L[R]!==b&&(g.activeTexture(g.TEXTURE0+R),g.bindTexture(g.TEXTURE_2D,b),L[R]=b);g.drawArrays(P,M.start,M.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(l.AFTER_FLUSH,this,p),this.onAfterFlush(p)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(p,g,x,E,P,S,M){var b=this.vertexViewF32,A=this.vertexViewU32,L=this.vertexCount*this.currentShader.vertexComponentCount-1;b[++L]=p,b[++L]=g,b[++L]=x,b[++L]=E,b[++L]=P,b[++L]=S,A[++L]=M,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(p,g,x,E,P,S,M,b,A,L,R,O,D,B,G,z,X,U,V,N){N===void 0&&(N=this.currentUnit);var W=!1;this.shouldFlush(6)&&(this.flush(),W=!0),this.currentBatch||(N=this.setTexture2D(V));var F=this.vertexViewF32,I=this.vertexViewU32,k=this.vertexCount*this.currentShader.vertexComponentCount-1;return F[++k]=g,F[++k]=x,F[++k]=L,F[++k]=R,F[++k]=N,F[++k]=U,I[++k]=B,F[++k]=E,F[++k]=P,F[++k]=L,F[++k]=D,F[++k]=N,F[++k]=U,I[++k]=z,F[++k]=S,F[++k]=M,F[++k]=O,F[++k]=D,F[++k]=N,F[++k]=U,I[++k]=X,F[++k]=g,F[++k]=x,F[++k]=L,F[++k]=R,F[++k]=N,F[++k]=U,I[++k]=B,F[++k]=S,F[++k]=M,F[++k]=O,F[++k]=D,F[++k]=N,F[++k]=U,I[++k]=X,F[++k]=b,F[++k]=A,F[++k]=O,F[++k]=R,F[++k]=N,F[++k]=U,I[++k]=G,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(p),W},batchTri:function(p,g,x,E,P,S,M,b,A,L,R,O,D,B,G,z,X){X===void 0&&(X=this.currentUnit);var U=!1;this.shouldFlush(3)&&(this.flush(),U=!0),this.currentBatch||(X=this.setTexture2D(z));var V=this.vertexViewF32,N=this.vertexViewU32,W=this.vertexCount*this.currentShader.vertexComponentCount-1;return V[++W]=g,V[++W]=x,V[++W]=b,V[++W]=A,V[++W]=X,V[++W]=G,N[++W]=O,V[++W]=E,V[++W]=P,V[++W]=b,V[++W]=R,V[++W]=X,V[++W]=G,N[++W]=D,V[++W]=S,V[++W]=M,V[++W]=L,V[++W]=R,V[++W]=X,V[++W]=G,N[++W]=B,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(p),U},drawFillRect:function(p,g,x,E,P,S,M,b){M===void 0&&(M=this.renderer.whiteTexture),b===void 0&&(b=!0),p=Math.floor(p),g=Math.floor(g);var A=Math.floor(p+x),L=Math.floor(g+E),R=this.setTexture2D(M),O=o.getTintAppendFloatAlphaAndSwap(P,S),D=0,B=0,G=1,z=1;b&&(B=1,z=0),this.batchQuad(null,p,g,p,L,A,L,A,g,D,B,G,z,O,O,O,O,0,M,R)},setTexture2D:function(p){return p===void 0&&(p=this.renderer.whiteTexture),this.pushBatch(p)},bindTexture:function(p,g){g===void 0&&(g=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+g),x.bindTexture(x.TEXTURE_2D,p),this},bindRenderTarget:function(p,g){return this.bindTexture(p.texture,g)},setTime:function(p,g){return this.set1f(p,this.game.loop.getDuration(),g),this},setBoolean:function(p,g,x){return x===void 0&&(x=this.currentShader),x.setBoolean(p,g),this},set1f:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set1f(p,g),this},set2f:function(p,g,x,E){return E===void 0&&(E=this.currentShader),E.set2f(p,g,x),this},set3f:function(p,g,x,E,P){return P===void 0&&(P=this.currentShader),P.set3f(p,g,x,E),this},set4f:function(p,g,x,E,P,S){return S===void 0&&(S=this.currentShader),S.set4f(p,g,x,E,P),this},set1fv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set1fv(p,g),this},set2fv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set2fv(p,g),this},set3fv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set3fv(p,g),this},set4fv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set4fv(p,g),this},set1iv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set1iv(p,g),this},set2iv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set2iv(p,g),this},set3iv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set3iv(p,g),this},set4iv:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set4iv(p,g),this},set1i:function(p,g,x){return x===void 0&&(x=this.currentShader),x.set1i(p,g),this},set2i:function(p,g,x,E){return E===void 0&&(E=this.currentShader),E.set2i(p,g,x),this},set3i:function(p,g,x,E,P){return P===void 0&&(P=this.currentShader),P.set3i(p,g,x,E),this},set4i:function(p,g,x,E,P,S){return S===void 0&&(S=this.currentShader),S.set4i(p,g,x,E,P),this},setMatrix2fv:function(p,g,x,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(p,g,x),this},setMatrix3fv:function(p,g,x,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(p,g,x),this},setMatrix4fv:function(p,g,x,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(p,g,x),this},destroy:function(){this.emit(l.DESTROY,this);var p,g=this.shaders;for(p=0;p<g.length;p++)g[p].destroy();var x=this.renderTargets;for(p=0;p<x.length;p++)x[p].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(n.RESIZE,this.resize,this),E.off(n.PRE_RENDER,this.onPreRender,this),E.off(n.RENDER,this.onRender,this),E.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});a.exports=m},11857:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),y=e(89787),d=e(56694),l=e(86459),h=e(6659),r=e(81044),n=e(28621),v=e(16650),o=e(72283),c=e(35217),m=e(37410),p=e(40444),g=e(38203),x=e(75512),E=e(1217),P=new d({Extends:h,initialize:function(M){h.call(this);var b=M.config,A={alpha:b.transparent,desynchronized:b.desynchronized,depth:!0,antialias:b.antialiasGL,premultipliedAlpha:b.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:b.failIfMajorPerformanceCaveat,powerPreference:b.powerPreference,preserveDrawingBuffer:b.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:b.clearBeforeRender,antialias:b.antialias,backgroundColor:b.backgroundColor,contextCreation:A,roundPixels:b.roundPixels,maxTextures:b.maxTextures,maxTextureSize:b.maxTextureSize,batchSize:b.batchSize,maxLights:b.maxLights,mipmapFilter:b.mipmapFilter},this.game=M,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=M.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=o,this.contextRestoredHandler=o,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(S){var M,b=this.game,A=this.canvas,L=S.backgroundColor;if(b.config.context?M=b.config.context:M=A.getContext("webgl",S.contextCreation)||A.getContext("experimental-webgl",S.contextCreation),!M||M.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=M;var R=this;this.contextLostHandler=function(U){R.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),U.preventDefault()},A.addEventListener("webglcontextlost",this.contextLostHandler,!1),b.context=M;for(var O=0;O<=27;O++)this.blendModes.push({func:[M.ONE,M.ONE_MINUS_SRC_ALPHA],equation:M.FUNC_ADD});this.blendModes[1].func=[M.ONE,M.DST_ALPHA],this.blendModes[2].func=[M.DST_COLOR,M.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[M.ONE,M.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[M.ZERO,M.ONE_MINUS_SRC_ALPHA],equation:M.FUNC_REVERSE_SUBTRACT},this.glFormats=[M.BYTE,M.SHORT,M.UNSIGNED_BYTE,M.UNSIGNED_SHORT,M.FLOAT],this.glFuncMap={mat2:{func:M.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:M.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:M.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:M.uniform1f,length:1},"1fv":{func:M.uniform1fv,length:1},"1i":{func:M.uniform1i,length:1},"1iv":{func:M.uniform1iv,length:1},"2f":{func:M.uniform2f,length:2},"2fv":{func:M.uniform2fv,length:1},"2i":{func:M.uniform2i,length:2},"2iv":{func:M.uniform2iv,length:1},"3f":{func:M.uniform3f,length:3},"3fv":{func:M.uniform3fv,length:1},"3i":{func:M.uniform3i,length:3},"3iv":{func:M.uniform3iv,length:1},"4f":{func:M.uniform4f,length:4},"4fv":{func:M.uniform4fv,length:1},"4i":{func:M.uniform4i,length:4},"4iv":{func:M.uniform4iv,length:1}};var D=M.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=M.getParameter(M.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=M.getParameter(M.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var B="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(B)>-1?M.getExtension(B):null;var G="OES_vertex_array_object";this.vaoExtension=D.indexOf(G)>-1?M.getExtension(G):null,M.disable(M.DEPTH_TEST),M.disable(M.CULL_FACE),M.enable(M.BLEND),M.clearColor(L.redGL,L.greenGL,L.blueGL,L.alphaGL),S.mipmapFilter!==""&&(this.mipmapFilter=M[S.mipmapFilter]),this.maxTextures=x.checkShaderMax(M,S.maxTextures),this.textureIndexes=[];for(var z=0;z<this.maxTextures;z++){var X=M.createTexture();M.activeTexture(M.TEXTURE0+z),M.bindTexture(M.TEXTURE_2D,X),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,1,1,0,M.RGBA,M.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(z)}return this.pipelines=new c(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=new v().identity(),b.textures.once(g.READY,this.boot,this),this},boot:function(){var S=this.game,M=this.pipelines,b=S.scale.baseSize,A=b.width,L=b.height;this.width=A,this.height=L,this.isBooted=!0,this.renderTarget=new m(this,A,L,1,0,!0,!0),this.maskTarget=new m(this,A,L,1,0,!0,!0),this.maskSource=new m(this,A,L,1,0,!0,!0);var R=S.config;M.boot(R.pipeline,R.defaultPipeline,R.autoMobilePipeline),this.blankTexture=S.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=S.textures.getFrame("__WHITE").glTexture;var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,null),O.enable(O.SCISSOR_TEST),S.scale.on(p.RESIZE,this.onResize,this),this.resize(A,L)},captureFrame:function(S,M){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(S,M,b){},stopCapture:function(){},onCapture:function(S){},onResize:function(S,M){(M.width!==this.width||M.height!==this.height)&&this.resize(M.width,M.height)},beginCapture:function(S,M){S===void 0&&(S=this.width),M===void 0&&(M=this.height),this.renderTarget.bind(!0,S,M),this.setProjectionMatrix(S,M)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,M){var b=this.gl;return this.width=S,this.height=M,this.setProjectionMatrix(S,M),b.viewport(0,0,S,M),this.drawingBufferHeight=b.drawingBufferHeight,b.scissor(0,b.drawingBufferHeight-M,S,M),this.defaultScissor[2]=S,this.defaultScissor[3]=M,this.emit(r.RESIZE,S,M),this},getCompressedTextures:function(){var S="WEBGL_compressed_texture_",M="WEBKIT_"+S,b=function(L,R){var O=L.getExtension(S+R)||L.getExtension(M+R);if(O){var D={};for(var B in O)D[O[B]]=B;return D}},A=this.gl;return{ETC:b(A,"etc"),ETC1:b(A,"etc1"),ATC:b(A,"atc"),ASTC:b(A,"astc"),BPTC:b(A,"bptc"),RGTC:b(A,"rgtc"),PVRTC:b(A,"pvrtc"),S3TC:b(A,"s3tc"),S3TCSRGB:b(A,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(S,M){var b=this.compression[S.toUpperCase()];if(M in b)return b[M]},supportsCompressedTexture:function(S,M){var b=this.compression[S.toUpperCase()];return b?M?M in b:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,M){return(S!==this.projectionWidth||M!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=M,this.projectionMatrix.ortho(0,S,M,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,M,b,A,L){L===void 0&&(L=this.drawingBufferHeight);var R=this.scissorStack,O=[S,M,b,A];return R.push(O),this.setScissor(S,M,b,A,L),this.currentScissor=O,O},setScissor:function(S,M,b,A,L){L===void 0&&(L=this.drawingBufferHeight);var R=this.gl,O=this.currentScissor,D=b>0&&A>0;if(O&&D){var B=O[0],G=O[1],z=O[2],X=O[3];D=B!==S||G!==M||z!==b||X!==A}D&&(this.flush(),R.scissor(S,L-M-A,b,A))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var M=this.currentScissor;if(M){var b=M[0],A=M[1],L=M[2],R=M[3];L>0&&R>0&&S.scissor(b,this.drawingBufferHeight-A-R,L,R)}},popScissor:function(){var S=this.scissorStack;S.pop();var M=S[S.length-1];M&&this.setScissor(M[0],M[1],M[2],M[3]),this.currentScissor=M},hasActiveStencilMask:function(){var S=this.currentMask.mask,M=this.currentCameraMask.mask;return S&&S.isStencil||M&&M.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,M){M===void 0&&(M=!1);var b=this.gl,A=this.blendModes[S];return M||S!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),b.enable(b.BLEND),b.blendEquation(A.equation),A.func.length>2?b.blendFuncSeparate(A.func[0],A.func[1],A.func[2],A.func[3]):b.blendFunc(A.func[0],A.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,M){var b=this.blendModes.push({func:S,equation:M});return b-1},updateBlendMode:function(S,M,b){return this.blendModes[S]&&(this.blendModes[S].func=M,b&&(this.blendModes[S].equation=b)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},pushFramebuffer:function(S,M,b,A,L){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,M,b,A,L))},setFramebuffer:function(S,M,b,A,L){if(M===void 0&&(M=!1),b===void 0&&(b=!0),A===void 0&&(A=null),L===void 0&&(L=!1),S===this.currentFramebuffer)return this;var R=this.gl,O=this.width,D=this.height;return S&&S.renderTexture&&b?(O=S.renderTexture.width,D=S.renderTexture.height):this.flush(),R.bindFramebuffer(R.FRAMEBUFFER,S),b&&R.viewport(0,0,O,D),A&&R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,A,0),L&&(R.clearColor(0,0,0,0),R.clear(R.COLOR_BUFFER_BIT)),M&&(S?(this.drawingBufferHeight=D,this.pushScissor(0,0,O,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,this},popFramebuffer:function(S,M){S===void 0&&(S=!1),M===void 0&&(M=!0);var b=this.fboStack;b.pop();var A=b[b.length-1];return A||(A=null),this.setFramebuffer(A,S,M),A},restoreFramebuffer:function(S,M){S===void 0&&(S=!1),M===void 0&&(M=!0);var b=this.fboStack,A=b[b.length-1];A||(A=null),this.currentFramebuffer=null,this.setFramebuffer(A,S,M)},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,M,b,A,L){L===void 0&&(L=!1);var R=this.gl,O=R.NEAREST,D=R.NEAREST,B=R.CLAMP_TO_EDGE,G=null;M=S?S.width:M,b=S?S.height:b;var z=n(M,b);return z&&!L&&(B=R.REPEAT),A===l.ScaleModes.LINEAR&&this.config.antialias&&(O=z&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,D=R.LINEAR),S&&S.compressed&&(O=R.LINEAR,D=R.LINEAR),!S&&typeof M=="number"&&typeof b=="number"?G=this.createTexture2D(0,O,D,B,B,R.RGBA,null,M,b):G=this.createTexture2D(0,O,D,B,B,R.RGBA,S),G},createTexture2D:function(S,M,b,A,L,R,O,D,B,G,z,X){G=G==null?!0:G,z===void 0&&(z=!1),X===void 0&&(X=!1);var U=this.gl,V=U.createTexture();U.activeTexture(U.TEXTURE0);var N=U.getParameter(U.TEXTURE_BINDING_2D);U.bindTexture(U.TEXTURE_2D,V),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,M),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,b),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,L),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,A),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),X&&U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,!0);var W=!1;if(O==null)U.texImage2D(U.TEXTURE_2D,S,R,D,B,0,R,U.UNSIGNED_BYTE,null),W=n(D,B);else if(O.compressed){D=O.width,B=O.height,W=O.generateMipmap;for(var F=0;F<O.mipmaps.length;F++)U.compressedTexImage2D(U.TEXTURE_2D,F,O.internalFormat,O.mipmaps[F].width,O.mipmaps[F].height,0,O.mipmaps[F].data)}else z||(D=O.width,B=O.height),U.texImage2D(U.TEXTURE_2D,S,R,R,U.UNSIGNED_BYTE,O),W=n(D,B);return W&&U.generateMipmap(U.TEXTURE_2D),N&&U.bindTexture(U.TEXTURE_2D,N),V.isAlphaPremultiplied=G,V.isRenderTexture=!1,V.width=D,V.height=B,V},createFramebuffer:function(S,M,b,A){A===void 0&&(A=!0);var L=this.gl,R=L.createFramebuffer(),O=0;if(this.setFramebuffer(R),b.isRenderTexture=!0,b.isAlphaPremultiplied=!1,L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,b,0),O=L.checkFramebufferStatus(L.FRAMEBUFFER),O!==L.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[O]||O))}if(R.renderTexture=b,A){var B=L.createRenderbuffer();L.bindRenderbuffer(L.RENDERBUFFER,B),L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,S,M),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.RENDERBUFFER,B)}return this.setFramebuffer(null),R},beginBitmapMask:function(S,M){var b=this.gl;b&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==S&&(this.currentMask.mask=S,this.currentMask.camera=M))},drawBitmapMask:function(S,M,b){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),S.renderWebGL(this,S,M),this.maskSource.unbind(!0),this.maskTarget.unbind();var A=this.gl,L=this.getCurrentStencilMask();L?(A.enable(A.STENCIL_TEST),L.mask.applyStencil(this,L.camera,!0)):this.currentMask.mask=null,this.pipelines.set(b),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,this.maskTarget.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,this.maskSource.texture)},createProgram:function(S,M){var b=this.gl,A=b.createProgram(),L=b.createShader(b.VERTEX_SHADER),R=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(L,S),b.shaderSource(R,M),b.compileShader(L),b.compileShader(R);var O=`Shader failed:
`;if(!b.getShaderParameter(L,b.COMPILE_STATUS))throw new Error("Vertex "+O+b.getShaderInfoLog(L));if(!b.getShaderParameter(R,b.COMPILE_STATUS))throw new Error("Fragment "+O+b.getShaderInfoLog(R));if(b.attachShader(A,L),b.attachShader(A,R),b.linkProgram(A),!b.getProgramParameter(A,b.LINK_STATUS))throw new Error("Link "+O+b.getProgramInfoLog(A));return b.useProgram(A),A},createVertexBuffer:function(S,M){var b=this.gl,A=b.createBuffer();return b.bindBuffer(b.ARRAY_BUFFER,A),b.bufferData(b.ARRAY_BUFFER,S,M),b.bindBuffer(b.ARRAY_BUFFER,null),A},createIndexBuffer:function(S,M){var b=this.gl,A=b.createBuffer();return b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,A),b.bufferData(b.ELEMENT_ARRAY_BUFFER,S,M),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null),A},deleteTexture:function(S){return S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){if(S){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,S);var b=M.getParameter(M.RENDERBUFFER_BINDING);b&&M.deleteRenderbuffer(b),M.bindFramebuffer(M.FRAMEBUFFER,null),M.deleteFramebuffer(S),u(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)}return this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var M=S.x,b=S.y,A=S.width,L=S.height,R=S.backgroundColor;if(S.emit(y.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(M,b,A,L),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),R.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(M,b,A,L,x.getTintFromFloats(R.blueGL,R.greenGL,R.redGL,1),R.alphaGL)}},getCurrentStencilMask:function(){var S=null,M=this.maskStack,b=this.currentCameraMask;return M.length>0?S=M[M.length-1]:b.mask&&b.mask.isStencil&&(S=b),S},postRenderCamera:function(S){var M=S.flashEffect,b=S.fadeEffect;if(M.isRunning||b.isRunning||b.isComplete){var A=this.pipelines.setMulti();M.postRenderWebGL(A,x.getTintFromFloats),b.postRenderWebGL(A,x.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(y.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var M=this.config.backgroundColor;S.clearColor(M.redGL,M.greenGL,M.blueGL,M.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(r.PRE_RENDER)}},render:function(S,M,b){if(!this.contextLost){var A=M.length;if(this.emit(r.RENDER,S,b),this.preRenderCamera(b),A===0){this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(b);return}this.currentType="";for(var L=this.currentMask,R=0;R<A;R++){this.finalType=R===A-1;var O=M[R],D=O.mask;L=this.currentMask,L.mask&&L.mask!==D&&L.mask.postRenderWebGL(this,L.camera),D&&L.mask!==D&&D.preRenderWebGL(this,O,b),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var B=O.type;B!==this.currentType&&(this.newType=!0,this.currentType=B),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=M[R+1].type===this.currentType,O.renderWebGL(this,O,b),this.newType=!1}L=this.currentMask,L.mask&&L.mask.postRenderWebGL(this,L.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(b)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(r.POST_RENDER);var S=this.snapshotState;S.callback&&(E(this.gl,S),S.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var S=this.gl,M=this.getCurrentStencilMask();if(M){var b=M.mask;S.enable(S.STENCIL_TEST),b.invertAlpha?S.stencilFunc(S.NOTEQUAL,b.level,255):S.stencilFunc(S.EQUAL,b.level,255)}},snapshot:function(S,M,b){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,M,b)},snapshotArea:function(S,M,b,A,L,R,O){var D=this.snapshotState;return D.callback=L,D.type=R,D.encoder=O,D.getPixel=!1,D.x=S,D.y=M,D.width=b,D.height=A,this},snapshotPixel:function(S,M,b){return this.snapshotArea(S,M,1,1,b),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,M,b,A,L,R,O,D,B,G,z){L===void 0&&(L=!1),R===void 0&&(R=0),O===void 0&&(O=0),D===void 0&&(D=M),B===void 0&&(B=b),G==="pixel"&&(L=!0,G="image/png");var X=this.currentFramebuffer;this.snapshotArea(R,O,D,B,A,G,z);var U=this.snapshotState;return U.getPixel=L,U.isFramebuffer=!0,U.bufferWidth=M,U.bufferHeight=b,U.width=Math.min(U.width,M),U.height=Math.min(U.height,b),this.setFramebuffer(S),E(this.gl,U),this.setFramebuffer(X),U.callback=null,U.isFramebuffer=!1,this},canvasToTexture:function(S,M,b,A){return b===void 0&&(b=!1),A===void 0&&(A=!1),M?this.updateCanvasTexture(S,M,A):this.createCanvasTexture(S,b,A)},createCanvasTexture:function(S,M,b){M===void 0&&(M=!1),b===void 0&&(b=!1);var A=this.gl,L=A.NEAREST,R=A.NEAREST,O=S.width,D=S.height,B=A.CLAMP_TO_EDGE,G=n(O,D);return!M&&G&&(B=A.REPEAT),this.config.antialias&&(L=G&&this.mipmapFilter?this.mipmapFilter:A.LINEAR,R=A.LINEAR),this.createTexture2D(0,L,R,B,B,A.RGBA,S,O,D,!0,!1,b)},updateCanvasTexture:function(S,M,b){b===void 0&&(b=!1);var A=this.gl,L=S.width,R=S.height;if(L>0&&R>0){A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,M),b&&A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,!0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,S),M.width=L,M.height=R,O&&A.bindTexture(A.TEXTURE_2D,O)}return M},createVideoTexture:function(S,M,b){M===void 0&&(M=!1),b===void 0&&(b=!1);var A=this.gl,L=A.NEAREST,R=A.NEAREST,O=S.videoWidth,D=S.videoHeight,B=A.CLAMP_TO_EDGE,G=n(O,D);return!M&&G&&(B=A.REPEAT),this.config.antialias&&(L=G&&this.mipmapFilter?this.mipmapFilter:A.LINEAR,R=A.LINEAR),this.createTexture2D(0,L,R,B,B,A.RGBA,S,O,D,!0,!0,b)},updateVideoTexture:function(S,M,b){b===void 0&&(b=!1);var A=this.gl,L=S.videoWidth,R=S.videoHeight;if(L>0&&R>0){A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,M),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,b),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,S),M.width=L,M.height=R,O&&A.bindTexture(A.TEXTURE_2D,O)}return M},setTextureFilter:function(S,M){var b=this.gl,A=[b.LINEAR,b.NEAREST][M];b.activeTexture(b.TEXTURE0);var L=b.getParameter(b.TEXTURE_BINDING_2D);return b.bindTexture(b.TEXTURE_2D,S),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,A),L&&b.bindTexture(b.TEXTURE_2D,L),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});a.exports=P},71305:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(71402),l=new u({initialize:function(r,n,v,o,c){this.pipeline=r,this.name=n,this.renderer=r.renderer,this.gl=this.renderer.gl,this.fragSrc=o,this.vertSrc=v,this.program=this.renderer.createProgram(v,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(h){var r=0,n=0,v=[];this.vertexComponentCount=0;for(var o=0;o<h.length;o++){var c=h[o],m=c.name,p=y(c,"size",1),g=y(c,"type",d.FLOAT),x=g.enum,E=g.size,P=!!c.normalized;v.push({name:m,size:p,type:x,normalized:P,offset:n,enabled:!1,location:-1}),E===4?r+=p:r++,n+=p*E}this.vertexSize=n,this.vertexComponentCount=r,this.attributes=v},bind:function(h,r){return h===void 0&&(h=!1),r===void 0&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),h&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(h){h===void 0&&(h=!1);for(var r=this.gl,n=this.vertexSize,v=this.attributes,o=this.program,c=0;c<v.length;c++){var m=v[c],p=m.size,g=m.type,x=m.offset,E=m.enabled,P=m.location,S=!!m.normalized;if(h){var M=r.getAttribLocation(o,m.name);M>=0?(r.enableVertexAttribArray(M),r.vertexAttribPointer(M,p,g,S,n,x),m.enabled=!0,m.location=M):M!==-1&&r.disableVertexAttribArray(M)}else E?r.vertexAttribPointer(P,p,g,S,n,x):!E&&P>-1&&(r.disableVertexAttribArray(P),m.location=-1)}return this},createUniforms:function(){var h=this.gl,r=this.program,n=this.uniforms,v,o,c,m=h.getProgramParameter(r,h.ACTIVE_UNIFORMS);for(v=0;v<m;v++){var p=h.getActiveUniform(r,v);if(p){o=p.name,c=h.getUniformLocation(r,o),c!==null&&(n[o]={name:o,location:c,value1:null,value2:null,value3:null,value4:null});var g=o.indexOf("[");g>0&&(o=o.substr(0,g),n.hasOwnProperty(o)||(c=h.getUniformLocation(r,o),c!==null&&(n[o]={name:o,location:c,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(h){return this.uniforms.hasOwnProperty(h)},resetUniform:function(h){var r=this.uniforms[h];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(h,r,n,v){var o=this.uniforms[r];return o?((v||o.value1!==n)&&(o.value1=n,this.renderer.setProgram(this.program),h.call(this.gl,o.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(h,r,n,v,o){var c=this.uniforms[r];return c?((o||c.value1!==n||c.value2!==v)&&(c.value1=n,c.value2=v,this.renderer.setProgram(this.program),h.call(this.gl,c.location,n,v),this.pipeline.currentShader=this),this):this},setUniform3:function(h,r,n,v,o,c){var m=this.uniforms[r];return m?((c||m.value1!==n||m.value2!==v||m.value3!==o)&&(m.value1=n,m.value2=v,m.value3=o,this.renderer.setProgram(this.program),h.call(this.gl,m.location,n,v,o),this.pipeline.currentShader=this),this):this},setUniform4:function(h,r,n,v,o,c,m){var p=this.uniforms[r];return p?((m||p.value1!==n||p.value2!==v||p.value3!==o||p.value4!==c)&&(p.value1=n,p.value2=v,p.value3=o,p.value4=c,this.renderer.setProgram(this.program),h.call(this.gl,p.location,n,v,o,c),this.pipeline.currentShader=this),this):this},setBoolean:function(h,r){return this.setUniform1(this.gl.uniform1i,h,Number(r))},set1f:function(h,r){return this.setUniform1(this.gl.uniform1f,h,r)},set2f:function(h,r,n){return this.setUniform2(this.gl.uniform2f,h,r,n)},set3f:function(h,r,n,v){return this.setUniform3(this.gl.uniform3f,h,r,n,v)},set4f:function(h,r,n,v,o){return this.setUniform4(this.gl.uniform4f,h,r,n,v,o)},set1fv:function(h,r){return this.setUniform1(this.gl.uniform1fv,h,r,!0)},set2fv:function(h,r){return this.setUniform1(this.gl.uniform2fv,h,r,!0)},set3fv:function(h,r){return this.setUniform1(this.gl.uniform3fv,h,r,!0)},set4fv:function(h,r){return this.setUniform1(this.gl.uniform4fv,h,r,!0)},set1iv:function(h,r){return this.setUniform1(this.gl.uniform1iv,h,r,!0)},set2iv:function(h,r){return this.setUniform1(this.gl.uniform2iv,h,r,!0)},set3iv:function(h,r){return this.setUniform1(this.gl.uniform3iv,h,r,!0)},set4iv:function(h,r){return this.setUniform1(this.gl.uniform4iv,h,r,!0)},set1i:function(h,r){return this.setUniform1(this.gl.uniform1i,h,r)},set2i:function(h,r,n){return this.setUniform2(this.gl.uniform2i,h,r,n)},set3i:function(h,r,n,v){return this.setUniform3(this.gl.uniform3i,h,r,n,v)},set4i:function(h,r,n,v,o){return this.setUniform4(this.gl.uniform4i,h,r,n,v,o)},setMatrix2fv:function(h,r,n){return this.setUniform2(this.gl.uniformMatrix2fv,h,r,n,!0)},setMatrix3fv:function(h,r,n){return this.setUniform2(this.gl.uniformMatrix3fv,h,r,n,!0)},setMatrix4fv:function(h,r,n){return this.setUniform2(this.gl.uniformMatrix4fv,h,r,n,!0)},createProgram:function(h,r){h===void 0&&(h=this.vertSrc),r===void 0&&(r=this.fragSrc);var n=this.gl;return this.program&&n.deleteProgram(this.program),this.vertSrc=h,this.fragSrc=r,this.program=this.renderer.createProgram(h,r),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});a.exports=l},71402:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};a.exports=T},55478:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(71402),y=e(98611),d={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};d=y(!1,d,u),a.exports=d},5583:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(91679),l=e(89053),h=e(71402),r=e(44775),n=new u({Extends:r,initialize:function(o){o.fragShader=y(o,"fragShader",d),o.vertShader=y(o,"vertShader",l),o.batchSize=y(o,"batchSize",1),o.vertices=y(o,"vertices",[-1,1,-1,-7,7,1]),o.attributes=y(o,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),r.call(this,o)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,o){r.prototype.resize.call(this,v,o),this.set2f("uResolution",v,o)},beginMask:function(v,o,c){this.renderer.beginBitmapMask(v,c)},endMask:function(v,o,c){var m=this.gl,p=this.renderer,g=v.bitmapMask;g&&m&&(p.drawBitmapMask(g,o,this),c&&this.set2f("uResolution",c.width,c.height),this.set1i("uInvertMaskAlpha",v.invertAlpha),m.drawArrays(this.topology,0,3),c&&this.set2f("uResolution",this.width,this.height),m.bindTexture(m.TEXTURE_2D,null))}});a.exports=n},81828:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(58136),d=e(47406),l=e(72632),h=e(87228),r=e(92462),n=e(75512),v=new u({Extends:h,initialize:function(c){c.shaders=[n.setGlowQuality(r.FXGlowFrag,c.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],h.call(this,c);var m=this.game;this.glow=new y.Glow(m),this.shadow=new y.Shadow(m),this.pixelate=new y.Pixelate(m),this.vignette=new y.Vignette(m),this.shine=new y.Shine(m),this.gradient=new y.Gradient(m),this.circle=new y.Circle(m),this.barrel=new y.Barrel(m),this.wipe=new y.Wipe(m),this.bokeh=new y.Bokeh(m);var p=[];p[d.GLOW]=this.onGlow,p[d.SHADOW]=this.onShadow,p[d.PIXELATE]=this.onPixelate,p[d.VIGNETTE]=this.onVignette,p[d.SHINE]=this.onShine,p[d.BLUR]=this.onBlur,p[d.GRADIENT]=this.onGradient,p[d.BLOOM]=this.onBloom,p[d.COLOR_MATRIX]=this.onColorMatrix,p[d.CIRCLE]=this.onCircle,p[d.BARREL]=this.onBarrel,p[d.DISPLACEMENT]=this.onDisplacement,p[d.WIPE]=this.onWipe,p[d.BOKEH]=this.onBokeh,this.fxHandlers=p,this.source,this.target,this.swap},onDraw:function(o,c,m){this.source=o,this.target=c,this.swap=m;var p=o.width,g=o.height,x=this.tempSprite,E=this.fxHandlers;if(x&&x.preFX)for(var P=x.preFX.list,S=0;S<P.length;S++){var M=P[S];M.active&&E[M.type].call(this,M,p,g)}this.drawToGame(this.source)},runDraw:function(){var o=this.source,c=this.target;this.copy(o,c),this.source=c,this.target=o},onGlow:function(o,c,m){var p=this.shaders[d.GLOW];this.setShader(p),this.glow.onPreRender(o,p,c,m),this.runDraw()},onShadow:function(o){var c=this.shaders[d.SHADOW];this.setShader(c),this.shadow.onPreRender(o,c),this.runDraw()},onPixelate:function(o,c,m){var p=this.shaders[d.PIXELATE];this.setShader(p),this.pixelate.onPreRender(o,p,c,m),this.runDraw()},onVignette:function(o){var c=this.shaders[d.VIGNETTE];this.setShader(c),this.vignette.onPreRender(o,c),this.runDraw()},onShine:function(o,c,m){var p=this.shaders[d.SHINE];this.setShader(p),this.shine.onPreRender(o,p,c,m),this.runDraw()},onBlur:function(o,c,m){var p=l(o,"quality"),g=this.shaders[d.BLUR+p];this.setShader(g),this.set1i("uMainSampler",0),this.set2f("resolution",c,m),this.set1f("strength",l(o,"strength")),this.set3fv("color",l(o,"glcolor"));for(var x=l(o,"x"),E=l(o,"y"),P=l(o,"steps"),S=0;S<P;S++)this.set2f("offset",x,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw()},onGradient:function(o){var c=this.shaders[d.GRADIENT];this.setShader(c),this.gradient.onPreRender(o,c),this.runDraw()},onBloom:function(o,c,m){var p=this.shaders[d.BLOOM];this.copySprite(this.source,this.swap),this.setShader(p),this.set1i("uMainSampler",0),this.set1f("strength",l(o,"blurStrength")),this.set3fv("color",l(o,"glcolor"));for(var g=2/c*l(o,"offsetX"),x=2/m*l(o,"offsetY"),E=l(o,"steps"),P=0;P<E;P++)this.set2f("offset",g,0),this.runDraw(),this.set2f("offset",0,x),this.runDraw();this.blendFrames(this.swap,this.source,this.target,l(o,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(o){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",o.getData()),this.set1f("uAlpha",o.alpha),this.runDraw()},onCircle:function(o,c,m){var p=this.shaders[d.CIRCLE];this.setShader(p),this.circle.onPreRender(o,p,c,m),this.runDraw()},onBarrel:function(o){var c=this.shaders[d.BARREL];this.setShader(c),this.barrel.onPreRender(o,c),this.runDraw()},onDisplacement:function(o){this.setShader(this.shaders[d.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",o.x,o.y),this.bindTexture(o.glTexture,1),this.runDraw()},onWipe:function(o){var c=this.shaders[d.WIPE];this.setShader(c),this.wipe.onPreRender(o,c),this.runDraw()},onBokeh:function(o,c,m){var p=this.shaders[d.BOKEH];this.setShader(p),this.bokeh.onPreRender(o,p,c,m),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});a.exports=v},66901:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(65045),l=e(77310),h=e(69360),r=e(93736),n=e(44775),v=new u({Extends:l,initialize:function(c){var m=y(c,"fragShader",d);c.fragShader=m.replace("%LIGHT_COUNT%",c.game.renderer.config.maxLights),l.call(this,c),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){n.prototype.boot.call(this);var o=this.gl,c=o.createTexture();o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,c),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c}},onRender:function(o,c){var m=o.sys.lights;if(this.lightsActive=!1,!(!m||!m.active)){var p=m.getLights(c),g=p.length;this.lightsActive=!0;var x,E=this.renderer,P=E.height,S=c.matrix,M=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b),this.set1i("uLightCount",g),x=0;x<g;x++){var b=p[x].light,A=b.color,L="uLights["+x+"].";S.transformPoint(b.x,b.y,M),this.set2f(L+"position",M.x-c.scrollX*b.scrollFactorX*c.zoom,P-(M.y-c.scrollY*b.scrollFactorY*c.zoom)),this.set3f(L+"color",A.r,A.g,A.b),this.set1f(L+"intensity",b.intensity),this.set1f(L+"radius",b.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(o){if(o!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var c=this.inverseRotationMatrix;if(o){var m=-o,p=Math.cos(m),g=Math.sin(m);c[1]=g,c[3]=-g,c[0]=c[4]=p}else c[0]=c[4]=1,c[1]=c[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=o}},setTexture2D:function(o,c){var m=this.renderer;o===void 0&&(o=m.whiteTexture);var p=this.getNormalMap(c);this.isNewNormalMap(o,p)&&(this.flush(),this.createBatch(o),this.addTextureToBatch(p),this.currentNormalMap=p);var g=0;if(c&&c.parentContainer){var x=c.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);g=x.rotationNormalized}else c&&(g=c.rotation);return this.setNormalMapRotation(g),0},setGameObject:function(o,c){c===void 0&&(c=o.frame);var m=c.glTexture,p=this.getNormalMap(o);if(this.isNewNormalMap(m,p)&&(this.flush(),this.createBatch(m),this.addTextureToBatch(p),this.currentNormalMap=p),o.parentContainer){var g=o.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(g.rotationNormalized)}else this.setNormalMapRotation(o.rotation);return 0},isNewNormalMap:function(o,c){return this.currentTexture!==o||this.currentNormalMap!==c},getNormalMap:function(o){var c;return o?o.displayTexture?c=o.displayTexture.dataSource[o.displayFrame.sourceIndex]:o.texture?c=o.texture.dataSource[o.frame.sourceIndex]:o.tileset&&(Array.isArray(o.tileset)?c=o.tileset[0].image.dataSource[0]:c=o.tileset.image.dataSource[0]):c=this.defaultNormalMap,c||(c=this.defaultNormalMap),c.glTexture},batchSprite:function(o,c,m){this.lightsActive&&l.prototype.batchSprite.call(this,o,c,m)},batchTexture:function(o,c,m,p,g,x,E,P,S,M,b,A,L,R,O,D,B,G,z,X,U,V,N,W,F,I,k,Y,H,K,j,J){this.lightsActive&&l.prototype.batchTexture.call(this,o,c,m,p,g,x,E,P,S,M,b,A,L,R,O,D,B,G,z,X,U,V,N,W,F,I,k,Y,H,K,j,J)},batchTextureFrame:function(o,c,m,p,g,x,E){this.lightsActive&&l.prototype.batchTextureFrame.call(this,o,c,m,p,g,x,E)}});a.exports=v},71264:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(77310),l=e(85060),h=e(18166),r=e(71402),n=e(44775),v=new u({Extends:d,initialize:function(c){c.fragShader=y(c,"fragShader",l),c.vertShader=y(c,"vertShader",h),c.attributes=y(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),c.forceZero=!0,d.call(this,c)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0)}});a.exports=v},77310:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(11117),d=e(72632),l=e(53787),h=e(15968),r=e(69360),n=e(75512),v=e(71402),o=e(44775),c=new u({Extends:o,initialize:function(p){var g=p.game.renderer,x=d(p,"fragShader",l);p.fragShader=n.parseFragmentShaderMaxTextures(x,g.maxTextures),p.vertShader=d(p,"vertShader",h),p.attributes=d(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),o.call(this,p),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){o.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(m,p,g){this.manager.set(this,m);var x=this._tempMatrix1,E=this._tempMatrix2,P=this._tempMatrix3,S=m.frame,M=S.glTexture,b=S.u0,A=S.v0,L=S.u1,R=S.v1,O=S.x,D=S.y,B=S.cutWidth,G=S.cutHeight,z=S.customPivot,X=m.displayOriginX,U=m.displayOriginY,V=-X+O,N=-U+D;if(m.isCropped){var W=m._crop;(W.flipX!==m.flipX||W.flipY!==m.flipY)&&S.updateCropUVs(W,m.flipX,m.flipY),b=W.u0,A=W.v0,L=W.u1,R=W.v1,B=W.width,G=W.height,O=W.x,D=W.y,V=-X+O,N=-U+D}var F=1,I=1;m.flipX&&(z||(V+=-S.realWidth+X*2),F=-1),(m.flipY||S.source.isGLTexture&&!M.flipY)&&(z||(N+=-S.realHeight+U*2),I=-1);var k=m.x,Y=m.y;p.roundPixels&&(k=Math.floor(k),Y=Math.floor(Y)),E.applyITRS(k,Y,m.rotation,m.scaleX*F,m.scaleY*I),x.copyFrom(p.matrix),g?(x.multiplyWithOffset(g,-p.scrollX*m.scrollFactorX,-p.scrollY*m.scrollFactorY),E.e=k,E.f=Y):(E.e-=p.scrollX*m.scrollFactorX,E.f-=p.scrollY*m.scrollFactorY),x.multiply(E,P);var H=P.setQuad(V,N,V+B,N+G,!1),K=n.getTintAppendFloatAlpha,j=p.alpha,J=K(m.tintTopLeft,j*m._alphaTL),Q=K(m.tintTopRight,j*m._alphaTR),Z=K(m.tintBottomLeft,j*m._alphaBL),q=K(m.tintBottomRight,j*m._alphaBR);this.shouldFlush(6)&&this.flush();var et=this.setGameObject(m,S);this.manager.preBatch(m),this.batchQuad(m,H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],b,A,L,R,J,Q,Z,q,m.tintFill,M,et),this.manager.postBatch(m)},batchTexture:function(m,p,g,x,E,P,S,M,b,A,L,R,O,D,B,G,z,X,U,V,N,W,F,I,k,Y,H,K,j,J,Q,Z){this.manager.set(this,m);var q=this._tempMatrix1,et=this._tempMatrix2,tt=this._tempMatrix3,it=X/g+H,ut=U/x+K,ot=(X+V)/g+H,ht=(U+N)/x+K,st=S,at=M,nt=-G,gt=-z;if(m.isCropped){var dt=m._crop,mt=dt.width,Ft=dt.height;st=mt,at=Ft,S=mt,M=Ft,X=dt.x,U=dt.y;var pt=X,ft=U;R&&(pt=V-dt.x-mt),O&&(ft=N-dt.y-Ft),it=pt/g+H,ut=ft/x+K,ot=(pt+mt)/g+H,ht=(ft+Ft)/x+K,nt=-G+X,gt=-z+U}O=O^(!Q&&p.isRenderTexture?1:0),R&&(st*=-1,nt+=S),O&&(at*=-1,gt+=M),j.roundPixels&&(E=Math.floor(E),P=Math.floor(P)),et.applyITRS(E,P,L,b,A),q.copyFrom(j.matrix),J?(q.multiplyWithOffset(J,-j.scrollX*D,-j.scrollY*B),et.e=E,et.f=P):(et.e-=j.scrollX*D,et.f-=j.scrollY*B),q.multiply(et,tt);var Mt=tt.setQuad(nt,gt,nt+st,gt+at,!1);Z===void 0&&(Z=this.setTexture2D(p)),m&&this.manager.preBatch(m),this.batchQuad(m,Mt[0],Mt[1],Mt[2],Mt[3],Mt[4],Mt[5],Mt[6],Mt[7],it,ut,ot,ht,W,F,I,k,Y,p,Z),m&&this.manager.postBatch(m)},batchTextureFrame:function(m,p,g,x,E,P,S){this.manager.set(this);var M=this._tempMatrix1.copyFrom(P),b=this._tempMatrix2;S?M.multiply(S,b):b=M;var A=b.setQuad(p,g,p+m.width,g+m.height,!1),L=this.setTexture2D(m.source.glTexture);x=n.getTintAppendFloatAlpha(x,E),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],m.u0,m.v0,m.u1,m.v1,x,x,x,x,0,m.glTexture,L)},batchFillRect:function(m,p,g,x,E,P){this.renderer.pipelines.set(this);var S=this.calcMatrix;P&&P.multiply(E,S);var M=S.setQuad(m,p,m+g,p+x,!1),b=this.fillTint;this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],0,0,1,1,b.TL,b.TR,b.BL,b.BR,2)},batchFillTriangle:function(m,p,g,x,E,P,S,M){this.renderer.pipelines.set(this);var b=this.calcMatrix;M&&M.multiply(S,b);var A=b.getX(m,p),L=b.getY(m,p),R=b.getX(g,x),O=b.getY(g,x),D=b.getX(E,P),B=b.getY(E,P),G=this.fillTint;this.batchTri(null,A,L,R,O,D,B,0,0,1,1,G.TL,G.TR,G.BL,2)},batchStrokeTriangle:function(m,p,g,x,E,P,S,M,b){var A=this.tempTriangle;A[0].x=m,A[0].y=p,A[0].width=S,A[1].x=g,A[1].y=x,A[1].width=S,A[2].x=E,A[2].y=P,A[2].width=S,A[3].x=m,A[3].y=p,A[3].width=S,this.batchStrokePath(A,S,!1,M,b)},batchFillPath:function(m,p,g){this.renderer.pipelines.set(this);var x=this.calcMatrix;g&&g.multiply(p,x);for(var E=m.length,P=this.polygonCache,S,M,b=this.fillTint.TL,A=this.fillTint.TR,L=this.fillTint.BL,R=0;R<E;++R)M=m[R],P.push(M.x,M.y);S=y(P),E=S.length;for(var O=0;O<E;O+=3){var D=S[O+0]*2,B=S[O+1]*2,G=S[O+2]*2,z=P[D+0],X=P[D+1],U=P[B+0],V=P[B+1],N=P[G+0],W=P[G+1],F=x.getX(z,X),I=x.getY(z,X),k=x.getX(U,V),Y=x.getY(U,V),H=x.getX(N,W),K=x.getY(N,W);this.batchTri(null,F,I,k,Y,H,K,0,0,1,1,b,A,L,2)}P.length=0},batchStrokePath:function(m,p,g,x,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var P=m.length-1,S=0;S<P;S++){var M=m[S],b=m[S+1];this.batchLine(M.x,M.y,b.x,b.y,M.width/2,b.width/2,p,S,!g&&S===P-1,x,E)}},batchLine:function(m,p,g,x,E,P,S,M,b,A,L){this.renderer.pipelines.set(this);var R=this.calcMatrix;L&&L.multiply(A,R);var O=g-m,D=x-p,B=Math.sqrt(O*O+D*D);if(B!==0){var G=E*(x-p)/B,z=E*(m-g)/B,X=P*(x-p)/B,U=P*(m-g)/B,V=g-X,N=x-U,W=m-G,F=p-z,I=g+X,k=x+U,Y=m+G,H=p+z,K=R.getX(V,N),j=R.getY(V,N),J=R.getX(W,F),Q=R.getY(W,F),Z=R.getX(I,k),q=R.getY(I,k),et=R.getX(Y,H),tt=R.getY(Y,H),it=this.strokeTint,ut=it.TL,ot=it.TR,ht=it.BL,st=it.BR;if(this.batchQuad(null,et,tt,J,Q,K,j,Z,q,0,0,1,1,ut,ot,ht,st,2),!(S<=2)){var at=this.prevQuad,nt=this.firstQuad;M>0&&at[4]?this.batchQuad(null,et,tt,J,Q,at[0],at[1],at[2],at[3],0,0,1,1,ut,ot,ht,st,2):(nt[0]=et,nt[1]=tt,nt[2]=J,nt[3]=Q,nt[4]=1),b&&nt[4]?this.batchQuad(null,K,j,Z,q,nt[0],nt[1],nt[2],nt[3],0,0,1,1,ut,ot,ht,st,2):(at[0]=K,at[1]=j,at[2]=Z,at[3]=q,at[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,o.prototype.destroy.call(this),this}});a.exports=c},10919:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(83327),l=e(54677),h=e(44775),r=new u({Extends:h,initialize:function(v){v.vertShader=y(v,"vertShader",l),v.fragShader=y(v,"fragShader",d),v.attributes=y(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,v)},onRender:function(n,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(n,v,o,c,m,p,g,x,E,P,S,M){var b=n.color,A=n.intensity,L=n.radius,R=n.attenuation,O=b.r*A,D=b.g*A,B=b.b*A,G=v.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(o,c,S,M,L,R,O,D,B,G),this.batchLightVert(m,p,S,M,L,R,O,D,B,G),this.batchLightVert(g,x,S,M,L,R,O,D,B,G),this.batchLightVert(o,c,S,M,L,R,O,D,B,G),this.batchLightVert(g,x,S,M,L,R,O,D,B,G),this.batchLightVert(E,P,S,M,L,R,O,D,B,G),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(n,v,o,c,m,p,g,x,E,P){var S=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++M]=n,S[++M]=v,S[++M]=o,S[++M]=c,S[++M]=m,S[++M]=p,S[++M]=g,S[++M]=x,S[++M]=E,S[++M]=P,this.vertexCount++}});a.exports=r},80486:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(65246),d=e(72632),l=e(12569),h=e(99365),r=e(44775),n=new u({Extends:r,initialize:function(o){o.renderTarget=d(o,"renderTarget",1),o.fragShader=d(o,"fragShader",l),o.vertShader=d(o,"vertShader",h),o.attributes=d(o,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),o.batchSize=1,o.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,o),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new y,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(v){this.bindAndDraw(v)},getController:function(v){return v!==void 0?v:this.controller?this.controller:this},copySprite:function(v,o,c){c===void 0&&(c=!1);var m=this.gl;m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture);var p=m.getParameter(m.FRAMEBUFFER_BINDING);m.bindFramebuffer(m.FRAMEBUFFER,o.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,o.texture,0),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),c&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,p))},copyFrame:function(v,o,c,m,p){this.manager.copyFrame(v,o,c,m,p)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,o,c){this.manager.drawFrame(v,o,c,this.colorMatrix)},blendFrames:function(v,o,c,m,p){this.manager.blendFrames(v,o,c,m,p)},blendFramesAdditive:function(v,o,c,m,p){this.manager.blendFramesAdditive(v,o,c,m,p)},clearFrame:function(v,o){this.manager.clearFrame(v,o)},blitFrame:function(v,o,c,m,p,g){this.manager.blitFrame(v,o,c,m,p,g)},copyFrameRect:function(v,o,c,m,p,g,x,E){this.manager.copyFrameRect(v,o,c,m,p,g,x,E)},bindAndDraw:function(v,o,c,m,p){c===void 0&&(c=!0),m===void 0&&(m=!0);var g=this.gl,x=this.renderer;this.bind(p),this.set1i("uMainSampler",0),o?(g.viewport(0,0,o.width,o.height),g.bindFramebuffer(g.FRAMEBUFFER,o.framebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,o.texture,0),c&&(m?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1),x.currentFramebuffer||g.viewport(0,0,x.width,x.height)),x.restoreStencilMask(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,v.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),o&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,x.currentFramebuffer))},destroy:function(){return this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,r.prototype.destroy.call(this),this}});a.exports=n},87228:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y=e(79993),d=e(56694),l=e(37486),h=e(72632),r=e(77310),n=e(12569),v=e(74118),o=e(37410),c=e(85060),m=e(18166),p=e(44775),g=new d({Extends:r,initialize:function(E){var P=h(E,"fragShader",n),S=h(E,"vertShader",m),M=h(E,"drawShader",n),b=[{name:"DrawSprite",fragShader:c,vertShader:m},{name:"CopySprite",fragShader:P,vertShader:S},{name:"DrawGame",fragShader:M,vertShader:m},{name:"ColorMatrix",fragShader:l}],A=h(E,"shaders",[]);E.shaders=b.concat(A),E.vertShader||(E.vertShader=S),E.batchSize=1,r.call(this,E),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new v,this.targetBounds=new v,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){p.prototype.boot.call(this);var x=this.shaders,E=this.renderer;this.drawSpriteShader=x[0],this.copyShader=x[1],this.gameShader=x[2],this.colorMatrixShader=x[3],this.fsTarget=new o(E,E.width,E.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var P=new ArrayBuffer(168);this.quadVertexData=P,this.quadVertexViewF32=new Float32Array(P),this.quadVertexBuffer=E.createVertexBuffer(P,this.gl.STATIC_DRAW),this.onResize(E.width,E.height),this.currentShader=this.copyShader},onResize:function(x,E){var P=this.quadVertexViewF32;P[1]=E,P[22]=E,P[14]=x,P[28]=x,P[35]=x,P[36]=E},batchQuad:function(x,E,P,S,M,b,A,L,R,O,D,B,G,z,X,U,V,N,W){var F=Math.min(E,S,b,L),I=Math.min(P,M,A,R),k=Math.max(E,S,b,L),Y=Math.max(P,M,A,R),H=k-F,K=Y-I,j=this.spriteBounds.setTo(F,I,H,K),J=x?x.preFX.padding:0,Q=H+J*2,Z=K+J*2,q=Math.abs(Math.max(Q,Z)),et=this.manager.getRenderTarget(q),tt=this.targetBounds.setTo(0,0,et.width,et.height);y(tt,j.centerX,j.centerY),this.tempSprite=x;var it=this.gl,ut=this.renderer;ut.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),x&&(this.onDrawSprite(x,et),x.preFX.onFX(this));var ot=this.fsTarget;return this.flush(),it.viewport(0,0,ut.width,ut.height),it.bindFramebuffer(it.FRAMEBUFFER,ot.framebuffer),it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,ot.texture,0),it.clearColor(0,0,0,0),it.clear(it.COLOR_BUFFER_BIT),this.setTexture2D(W),this.batchVert(E,P,O,D,0,N,z),this.batchVert(S,M,O,G,0,N,U),this.batchVert(b,A,B,G,0,N,V),this.batchVert(E,P,O,D,0,N,z),this.batchVert(b,A,B,G,0,N,V),this.batchVert(L,R,B,D,0,N,X),this.flush(),this.flipProjectionMatrix(!1),it.activeTexture(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,et.texture),it.copyTexSubImage2D(it.TEXTURE_2D,0,0,0,tt.x,tt.y,tt.width,tt.height),it.bindFramebuffer(it.FRAMEBUFFER,null),it.bindTexture(it.TEXTURE_2D,null),this.onBatch(x),this.currentShader=this.copyShader,this.onDraw(et,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(x,E,P,S,M,b,A){P===void 0&&(P=!0),S===void 0&&(S=!0),M===void 0&&(M=!1),A===void 0&&(A=this.copyShader);var L=this.gl,R=this.tempSprite;b&&(A=this.colorMatrixShader),this.currentShader=A;var O=this.setVertexBuffer(this.quadVertexBuffer);if(A.bind(O,!1),this.set1i("uMainSampler",0),R.preFX.onFXCopy(this),this.onCopySprite(x,E,R),b&&(this.set1fv("uColorMatrix",b.getData()),this.set1f("uAlpha",b.alpha)),L.activeTexture(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,x.texture),x.height>E.height)L.viewport(0,0,x.width,x.height),this.setTargetUVs(x,E);else{var D=E.height-x.height;L.viewport(0,D,x.width,x.height),this.resetUVs()}if(L.bindFramebuffer(L.FRAMEBUFFER,E.framebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,E.texture,0),P&&(L.clearColor(0,0,0,Number(!S)),L.clear(L.COLOR_BUFFER_BIT)),M){var B=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}L.bufferData(L.ARRAY_BUFFER,this.quadVertexData,L.STATIC_DRAW),L.drawArrays(L.TRIANGLES,0,6),M&&this.renderer.setBlendMode(B),L.bindFramebuffer(L.FRAMEBUFFER,null)},copy:function(x,E){var P=this.gl;this.set1i("uMainSampler",0),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,x.texture),P.viewport(0,0,x.width,x.height),this.setUVs(0,0,0,1,1,1,1,0),P.bindFramebuffer(P.FRAMEBUFFER,E.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,E.texture,0),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.quadVertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null)},blendFrames:function(x,E,P,S,M){this.manager.blendFrames(x,E,P,S,M)},blendFramesAdditive:function(x,E,P,S,M){this.manager.blendFramesAdditive(x,E,P,S,M)},drawToGame:function(x){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(x)},copyToGame:function(x){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(x)},bindAndDraw:function(x){var E=this.gl,P=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(x.texture);var S=this._tempMatrix1.loadIdentity(),M=this.targetBounds.x,b=this.targetBounds.y,A=M+x.width,L=b+x.height,R=S.getX(M,b),O=S.getX(M,L),D=S.getX(A,L),B=S.getX(A,b),G=S.getY(M,b),z=S.getY(M,L),X=S.getY(A,L),U=S.getY(A,b),V=16777215;this.batchVert(R,G,0,0,0,0,V),this.batchVert(O,z,0,1,0,0,V),this.batchVert(D,X,1,1,0,0,V),this.batchVert(R,G,0,0,0,0,V),this.batchVert(D,X,1,1,0,0,V),this.batchVert(B,U,1,0,0,0,V),P.restoreFramebuffer(!1,!0),P.currentFramebuffer||E.viewport(0,0,P.width,P.height),P.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(x){this.drawToGame(x)},setUVs:function(x,E,P,S,M,b,A,L){var R=this.quadVertexViewF32;R[2]=x,R[3]=E,R[9]=P,R[10]=S,R[16]=M,R[17]=b,R[23]=x,R[24]=E,R[30]=M,R[31]=b,R[37]=A,R[38]=L},setTargetUVs:function(x,E){var P=E.height/x.height;P>.5?P=.5-(P-.5):P=.5+(.5-P),this.setUVs(0,P,0,1+P,1,1+P,1,P)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});a.exports=g},21213:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(77310),l=new u({Extends:d,initialize:function(r){r.topology=5,r.batchSize=y(r,"batchSize",256),d.call(this,r)}});a.exports=l},51212:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(77310),l=e(85060),h=e(18166),r=e(44775),n=new u({Extends:d,initialize:function(o){o.fragShader=y(o,"fragShader",l),o.vertShader=y(o,"vertShader",h),o.forceZero=!0,d.call(this,o)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});a.exports=n},60848:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(2529),y=e(95723),d=e(56694),l=e(65246),h=e(37486),r=e(79060),n=e(72632),v=e(98921),o=e(99365),c=e(44775),m=new d({Extends:c,initialize:function(g){g.renderTarget=n(g,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),g.vertShader=n(g,"vertShader",o),g.shaders=n(g,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:u},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:h}]),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),g.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],g.batchSize=1,c.call(this,g),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){c.prototype.boot.call(this);var p=this.shaders,g=this.renderTargets;this.copyShader=p[0],this.addShader=p[1],this.linearShader=p[2],this.colorMatrixShader=p[3],this.fullFrame1=g[0],this.fullFrame2=g[1],this.halfFrame1=g[2],this.halfFrame2=g[3]},copyFrame:function(p,g,x,E,P){x===void 0&&(x=1),E===void 0&&(E=!0),P===void 0&&(P=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,p.texture),g?(S.viewport(0,0,g.width,g.height),S.bindFramebuffer(S.FRAMEBUFFER,g.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,g.texture,0)):S.viewport(0,0,p.width,p.height),E&&(P?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(p,g,x,E,P,S,M){x===void 0&&(x=1),E===void 0&&(E=!0),P===void 0&&(P=!0),S===void 0&&(S=!1),M===void 0&&(M=!1);var b=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,p.texture),p.height>g.height)b.viewport(0,0,p.width,p.height),this.setTargetUVs(p,g);else{var A=g.height-p.height;b.viewport(0,A,p.width,p.height)}if(b.bindFramebuffer(b.FRAMEBUFFER,g.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,g.texture,0),E&&(P?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)),S){var L=this.renderer.currentBlendMode;this.renderer.setBlendMode(y.ERASE)}M&&this.flipY(),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),S&&this.renderer.setBlendMode(L),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(p,g,x,E,P,S,M,b){M===void 0&&(M=!0),b===void 0&&(b=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,p.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,p.texture,0),M&&(b?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,g.texture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,x,E,P,S),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(p){var g=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,p.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6)},drawFrame:function(p,g,x,E){x===void 0&&(x=!0),E===void 0&&(E=this.colorMatrix);var P=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,p.texture),g?(P.viewport(0,0,g.width,g.height),P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0)):P.viewport(0,0,p.width,p.height),x?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blendFrames:function(p,g,x,E,P,S){E===void 0&&(E=1),P===void 0&&(P=!0),S===void 0&&(S=this.linearShader);var M=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,p.texture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,g.texture),x?(M.bindFramebuffer(M.FRAMEBUFFER,x.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,x.texture,0),M.viewport(0,0,x.width,x.height)):M.viewport(0,0,p.width,p.height),P?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFramesAdditive:function(p,g,x,E,P){this.blendFrames(p,g,x,E,P,this.addShader)},clearFrame:function(p,g){g===void 0&&(g=!0);var x=this.gl;x.viewport(0,0,p.width,p.height),x.bindFramebuffer(x.FRAMEBUFFER,p.framebuffer),g?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,E)},setUVs:function(p,g,x,E,P,S,M,b){var A=this.vertexViewF32;A[2]=p,A[3]=g,A[6]=x,A[7]=E,A[10]=P,A[11]=S,A[14]=p,A[15]=g,A[18]=P,A[19]=S,A[22]=M,A[23]=b},setTargetUVs:function(p,g){var x=g.height/p.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});a.exports=m},65641:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};a.exports=T},68726:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelineafterflush"},67186:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinebeforeflush"},22709:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinebind"},74469:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelineboot"},93953:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinedestroy"},51687:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelinerebind"},25034:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pipelineresize"},18970:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(87751),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.amount=1},onPreRender:function(h,r){h=this.getController(h),this.set1f("amount",h.amount,r)}});a.exports=l},2134:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(88222),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var r=this.getController(),n=this.fullFrame1,v=this.fullFrame2;this.copyFrame(h,v);for(var o=2/h.width*r.offsetX,c=2/h.height*r.offsetY,m=0;m<r.steps;m++)this.set2f("offset",o,0),this.copySprite(h,n),this.set2f("offset",0,c),this.copySprite(n,h);this.blendFrames(v,h,n,r.strength),this.copyToGame(n)}});a.exports=l},63377:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(35491),d=e(75568),l=e(44481),h=e(80486),r=new u({Extends:h,initialize:function(v){h.call(this,{game:v,shaders:[{name:"Gaussian5",fragShader:y},{name:"Gaussian9",fragShader:d},{name:"Gaussian13",fragShader:l}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(n){var v=this.getController(),o=this.gl,c=this.fullFrame1,m=o.getParameter(o.FRAMEBUFFER_BINDING);this.bind(this.activeShader),o.activeTexture(o.TEXTURE0),o.viewport(0,0,n.width,n.height),this.set1i("uMainSampler",0),this.set2f("resolution",n.width,n.height),this.set1f("strength",v.strength),this.set3fv("color",v.glcolor);for(var p=0;p<v.steps;p++)this.set2f("offset",v.x,0),this.copySprite(n,c),this.set2f("offset",0,v.y),this.copySprite(c,n);o.bindFramebuffer(o.FRAMEBUFFER,m),o.bindTexture(o.TEXTURE_2D,null),this.copyToGame(n)}});a.exports=r},49745:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(69960),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,r,n,v){h=this.getController(h),this.set1f("radius",h.radius,r),this.set1f("amount",h.amount,r),this.set1f("contrast",h.contrast,r),this.set1f("strength",h.strength,r),this.set2f("blur",h.blurX,h.blurY,r),this.setBoolean("isTiltShift",h.isTiltShift,r),n&&v&&this.set2f("resolution",n,v,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});a.exports=l},4323:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(33754),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,r,n,v){h=this.getController(h),this.set1f("scale",h.scale,r),this.set1f("feather",h.feather,r),this.set1f("thickness",h.thickness,r),this.set3fv("color",h.glcolor,r),this.set4fv("backgroundColor",h.glcolor2,r),n&&v&&this.set2f("resolution",n,v,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});a.exports=l},92066:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(80486),d=new u({Extends:y,initialize:function(h){y.call(this,{game:h})},onDraw:function(l){var h=this.fullFrame1;this.controller?this.manager.drawFrame(l,h,!0,this.controller):this.drawFrame(l,h),this.copyToGame(h)}});a.exports=d},89581:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(35668),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var r=this.game.textures.getFrame(h);r&&(this.glTexture=r.glTexture)},onDraw:function(h){var r=this.getController(),n=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(h,n),this.copyToGame(n)}});a.exports=l},55084:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=e(69675),l=e(80486),h=e(75512),r=new u({Extends:l,initialize:function(v,o){var c=y(o,"quality",.1),m=y(o,"distance",10);l.call(this,{game:v,fragShader:h.setGlowQuality(d,v,c,m)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(n,v,o,c){n=this.getController(n),this.set1f("outerStrength",n.outerStrength,v),this.set1f("innerStrength",n.innerStrength,v),this.set4fv("glowColor",n.glcolor,v),this.setBoolean("knockout",n.knockout,v),o&&c&&this.set2f("resolution",o,c,v)},onDraw:function(n){this.set2f("resolution",n.width,n.height),this.bindAndDraw(n)}});a.exports=r},41653:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(90993),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,r){h=this.getController(h),this.set1f("alpha",h.alpha,r),this.set1i("size",h.size,r),this.set3fv("color1",h.glcolor1,r),this.set3fv("color2",h.glcolor2,r),this.set2f("positionFrom",h.fromX,h.fromY,r),this.set2f("positionTo",h.toX,h.toY,r)}});a.exports=l},73416:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(37945),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.amount=1},onPreRender:function(h,r,n,v){h=this.getController(h),this.set1f("amount",h.amount,r),n&&v&&this.set2f("resolution",n,v,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});a.exports=l},58049:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(85718),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,r){h=this.getController(h);var n=h.samples;this.set1i("samples",n,r),this.set1f("intensity",h.intensity,r),this.set1f("decay",h.decay,r),this.set1f("power",h.power/n,r),this.set2f("lightPosition",h.x,h.y,r),this.set4fv("color",h.glcolor,r)}});a.exports=l},18026:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(13740),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,r,n,v){h=this.getController(h),this.setTime("time",r),this.set1f("speed",h.speed,r),this.set1f("lineWidth",h.lineWidth,r),this.set1f("gradient",h.gradient,r),this.setBoolean("reveal",h.reveal,r),n&&v&&this.set2f("resolution",n,v,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});a.exports=l},72381:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(80617),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,r){h=this.getController(h),this.set1f("radius",h.radius,r),this.set1f("strength",h.strength,r),this.set2f("position",h.x,h.y,r)}});a.exports=l},80542:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(62879),d=e(80486),l=new u({Extends:d,initialize:function(r){d.call(this,{game:r,fragShader:y}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,r){h=this.getController(h);var n=h.progress,v=h.wipeWidth,o=h.direction,c=h.axis;this.set4f("config",n,v,o,c,r),this.setBoolean("reveal",h.reveal,r)}});a.exports=l},58136:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};a.exports=u},62253:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65641),y=e(98611),d={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};d=y(!1,d,u),a.exports=d},2529:a=>{a.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:a=>{a.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:a=>{a.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:a=>{a.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:a=>{a.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:a=>{a.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:a=>{a.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:a=>{a.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:a=>{a.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:a=>{a.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:a=>{a.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:a=>{a.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:a=>{a.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:a=>{a.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:a=>{a.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:a=>{a.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:a=>{a.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:a=>{a.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:a=>{a.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:a=>{a.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:a=>{a.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:a=>{a.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:a=>{a.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:a=>{a.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:a=>{a.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:a=>{a.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:a=>{a.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:a=>{a.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:a=>{a.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:a=>{a.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:a=>{a.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:a=>{a.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:a=>{a.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:a=>{a.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(55301),y=e(56694),d=e(6659),l=e(40444),h=e(97081),r=e(74181),n=e(2893),v=e(9229),o=e(72283),c=e(74118),m=e(90881),p=e(84314),g=e(93736),x=e(47751),E=new y({Extends:d,initialize:function(S){d.call(this),this.game=S,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new m,this.gameSize=new m,this.baseSize=new m,this.displaySize=new m,this.scaleMode=u.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=u.CENTER.NO_CENTER,this.orientation=u.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:o,windowResize:o,fullScreenChange:o,fullScreenError:o}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var P=this.game;this.canvas=P.canvas,this.fullscreen=P.device.fullscreen,this.scaleMode!==u.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===u.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),P.events.on(h.PRE_STEP,this.step,this),P.events.once(h.READY,this.refresh,this),P.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(P){this.getParent(P),this.getParentBounds();var S=P.width,M=P.height,b=P.scaleMode,A=P.zoom,L=P.autoRound;if(typeof S=="string"){var R=this.parentSize.width;R===0&&(R=window.innerWidth);var O=parseInt(S,10)/100;S=Math.floor(R*O)}if(typeof M=="string"){var D=this.parentSize.height;D===0&&(D=window.innerHeight);var B=parseInt(M,10)/100;M=Math.floor(D*B)}this.scaleMode=b,this.autoRound=L,this.autoCenter=P.autoCenter,this.resizeInterval=P.resizeInterval,L&&(S=Math.floor(S),M=Math.floor(M)),this.gameSize.setSize(S,M),A===u.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),this.zoom=A,A!==1&&(this._resetZoom=!0),this.baseSize.setSize(S,M),L&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),P.minWidth>0&&this.displaySize.setMin(P.minWidth*A,P.minHeight*A),P.maxWidth>0&&this.displaySize.setMax(P.maxWidth*A,P.maxHeight*A),this.displaySize.setSize(S,M),this.orientation=v(S,M)},getParent:function(P){var S=P.parent;if(S!==null){if(this.parent=n(S),this.parentIsWindow=this.parent===document.body,P.expandParent&&P.scaleMode!==u.SCALE_MODE.NONE){var M=this.parent.getBoundingClientRect();(this.parentIsWindow||M.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",M=this.parent.getBoundingClientRect(),!this.parentIsWindow&&M.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}P.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=n(P.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var P=this.parentSize,S=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(S.height=r(!0));var M=S.width,b=S.height;if(P.width!==M||P.height!==b)return P.setSize(M,b),!0;if(this.canvas){var A=this.canvasBounds,L=this.canvas.getBoundingClientRect();if(L.x!==A.x||L.y!==A.y)return!0}return!1},lockOrientation:function(P){var S=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return S?S.call(screen,P):!1},setParentSize:function(P,S){return this.parentSize.setSize(P,S),this.refresh()},setGameSize:function(P,S){var M=this.autoRound;M&&(P=Math.floor(P),S=Math.floor(S));var b=this.width,A=this.height;return this.gameSize.resize(P,S),this.baseSize.resize(P,S),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(P/S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(b,A)},resize:function(P,S){var M=this.zoom,b=this.autoRound;b&&(P=Math.floor(P),S=Math.floor(S));var A=this.width,L=this.height;this.gameSize.resize(P,S),this.baseSize.resize(P,S),b&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(P*M,S*M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,O=P*M,D=S*M;return b&&(O=Math.floor(O),D=Math.floor(D)),(O!==P||D!==S)&&(R.width=O+"px",R.height=D+"px"),this.refresh(A,L)},setZoom:function(P){return this.zoom=P,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(P,S){P===void 0&&(P=this.width),S===void 0&&(S=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var M=this.game.domContainer;if(M){this.baseSize.setCSS(M);var b=this.canvas.style,A=M.style;A.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",A.marginLeft=b.marginLeft,A.marginTop=b.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,P,S),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var P=v(this.width,this.height);P!==this.orientation&&(this.orientation=P,this.emit(l.ORIENTATION_CHANGE,P))}},updateScale:function(){var P=this.canvas.style,S=this.gameSize.width,M=this.gameSize.height,b,A,L=this.zoom,R=this.autoRound;this.scaleMode===u.SCALE_MODE.NONE?(this.displaySize.setSize(S*L,M*L),b=this.displaySize.width,A=this.displaySize.height,R&&(b=Math.floor(b),A=Math.floor(A)),this._resetZoom&&(P.width=b+"px",P.height=A+"px",this._resetZoom=!1)):this.scaleMode===u.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),b=this.displaySize.width,A=this.displaySize.height,R&&(b=Math.floor(b),A=Math.floor(A)),this.canvas.width=b,this.canvas.height=A):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),b=this.displaySize.width,A=this.displaySize.height,R&&(b=Math.floor(b),A=Math.floor(A)),P.width=b+"px",P.height=A+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var P=p(this.parentSize.width,this.gameSize.width,0,!0),S=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(P,S),1)},updateCenter:function(){var P=this.autoCenter;if(P!==u.CENTER.NO_CENTER){var S=this.canvas,M=S.style,b=S.getBoundingClientRect(),A=b.width,L=b.height,R=Math.floor((this.parentSize.width-A)/2),O=Math.floor((this.parentSize.height-L)/2);P===u.CENTER.CENTER_HORIZONTALLY?O=0:P===u.CENTER.CENTER_VERTICALLY&&(R=0),M.marginLeft=R+"px",M.marginTop=O+"px"}},updateBounds:function(){var P=this.canvasBounds,S=this.canvas.getBoundingClientRect();P.x=S.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),P.y=S.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),P.width=S.width,P.height=S.height},transformX:function(P){return(P-this.canvasBounds.left)*this.displayScale.x},transformY:function(P){return(P-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(P){P===void 0&&(P={navigationUI:"hide"});var S=this.fullscreen;if(!S.available){this.emit(l.FULLSCREEN_UNSUPPORTED);return}if(!S.active){var M=this.getFullscreenTarget();S.keyboard?M[S.request](Element.ALLOW_KEYBOARD_INPUT):M[S.request](P)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(P){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,P)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var P=document.createElement("div");P.style.margin="0",P.style.padding="0",P.style.width="100%",P.style.height="100%",this.fullscreenTarget=P,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var S=this.canvas.parentNode;S.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var P=this.fullscreenTarget;if(P&&P.parentNode){var S=P.parentNode;S.insertBefore(this.canvas,P),S.removeChild(P)}}},stopFullscreen:function(){var P=this.fullscreen;if(!P.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;P.active&&document[P.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(P){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(P)},startListeners:function(){var P=this,S=this.domlisteners;if(S.orientationChange=function(){P.updateBounds(),P._checkOrientation=!0,P.dirty=!0},S.windowResize=function(){P.updateBounds(),P.dirty=!0},window.addEventListener("orientationchange",S.orientationChange,!1),window.addEventListener("resize",S.windowResize,!1),this.fullscreen.available){S.fullScreenChange=function(b){return P.onFullScreenChange(b)},S.fullScreenError=function(b){return P.onFullScreenError(b)};var M=["webkit","moz",""];M.forEach(function(b){document.addEventListener(b+"fullscreenchange",S.fullScreenChange,!1),document.addEventListener(b+"fullscreenerror",S.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",S.fullScreenChange,!1),document.addEventListener("MSFullscreenError",S.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(P,S){P instanceof x||(S=P,P=void 0),S===void 0&&(S=new c);var M=this.baseSize,b=this.parentSize,A=this.canvasBounds,L=this.displayScale,R=A.x>=0?0:-(A.x*L.x),O=A.y>=0?0:-(A.y*L.y),D;b.width>=A.width?D=M.width:D=M.width-(A.width-b.width)*L.x;var B;return b.height>=A.height?B=M.height:B=M.height-(A.height-b.height)*L.y,S.setTo(R,O,D,B),P&&(S.width/=P.zoomX,S.height/=P.zoomY,S.centerX=P.centerX+P.scrollX,S.centerY=P.centerY+P.scrollY),S},step:function(P,S){!this.parent||(this._lastCheck+=S,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var P=this.domlisteners;window.removeEventListener("orientationchange",P.orientationChange,!1),window.removeEventListener("resize",P.windowResize,!1);var S=["webkit","moz",""];S.forEach(function(M){document.removeEventListener(M+"fullscreenchange",P.fullScreenChange,!1),document.removeEventListener(M+"fullscreenerror",P.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",P.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===u.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===u.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});a.exports=E},35098:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};a.exports=u},82085:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="enterfullscreen"},11826:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="fullscreenfailed"},56691:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="fullscreenunsupported"},34739:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="leavefullscreen"},26681:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="orientationchange"},11428:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resize"},40444:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),y=e(55301),d={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};d=u(!1,d,y.CENTER),d=u(!1,d,y.ORIENTATION),d=u(!1,d,y.SCALE_MODE),d=u(!1,d,y.ZOOM),a.exports=d},47736:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=e(40587),d=function(l){var h=l.game.config.defaultPhysicsSystem,r=u(l.settings,"physics",!1);if(!(!h&&!r)){var n=[];if(h&&n.push(y(h+"Physics")),r)for(var v in r)v=y(v.concat("Physics")),n.indexOf(v)===-1&&n.push(v);return n}};a.exports=d},91088:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=function(d){var l=d.plugins.getDefaultScenePlugins(),h=u(d.settings,"plugins",!1);return Array.isArray(h)?h:l||[]};a.exports=y},90415:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};a.exports=T},87157:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(63946),d=new u({initialize:function(h){this.sys=new y(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});a.exports=d},13553:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(92980),d=e(7599),l=e(97081),h=e(10850),r=e(683),n=e(72283),v=e(87157),o=e(63946),c=new u({initialize:function(p,g){if(this.game=p,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,g){Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++)this._pending.push({key:"default",scene:g[x],autoStart:x===0,data:{}})}p.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new v);var m,p,g,x;for(m=0;m<this._pending.length;m++){p=this._pending[m],g=p.key,x=p.scene;var E;x instanceof v?E=this.createSceneFromInstance(g,x):typeof x=="object"?E=this.createSceneFromObject(g,x):typeof x=="function"&&(E=this.createSceneFromFunction(g,x)),g=E.sys.settings.key,this.keys[g]=E,this.scenes.push(E),this._data[g]&&(E.sys.settings.data=this._data[g].data,this._data[g].autoStart&&(p.autoStart=!0)),(p.autoStart||E.sys.settings.active)&&this._start.push(g)}for(this._pending.length=0,this._data={},this.isBooted=!0,m=0;m<this._start.length;m++)p=this._start[m],this.start(p);this._start.length=0}},processQueue:function(){var m=this._pending.length,p=this._queue.length;if(!(m===0&&p===0)){var g,x;if(m){for(g=0;g<m;g++)x=this._pending[g],this.add(x.key,x.scene,x.autoStart,x.data);for(g=0;g<this._start.length;g++)x=this._start[g],this.start(x);this._start.length=0,this._pending.length=0}for(g=0;g<this._queue.length;g++)x=this._queue[g],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(m,p,g,x){if(g===void 0&&(g=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:m,scene:p,autoStart:g,data:x}),this.isBooted||(this._data[m]={data:x}),null;m=this.getKey(m,p);var E;return p instanceof v?E=this.createSceneFromInstance(m,p):typeof p=="object"?(p.key=m,E=this.createSceneFromObject(m,p)):typeof p=="function"&&(E=this.createSceneFromFunction(m,p)),E.sys.settings.data=x,m=E.sys.settings.key,this.keys[m]=E,this.scenes.push(E),(g||E.sys.settings.active)&&(this._pending.length?this._start.push(m):this.start(m)),E},remove:function(m){if(this.isProcessing)this._queue.push({op:"remove",keyA:m,keyB:null});else{var p=this.getScene(m);if(!p||p.sys.isTransitioning())return this;var g=this.scenes.indexOf(p),x=p.sys.settings.key;g>-1&&(delete this.keys[x],this.scenes.splice(g,1),this._start.indexOf(x)>-1&&(g=this._start.indexOf(x),this._start.splice(g,1)),p.sys.destroy())}return this},bootScene:function(m){var p=m.sys,g=p.settings;p.sceneUpdate=n,m.init&&(m.init.call(m,g.data),g.status=y.INIT,g.isTransition&&p.events.emit(d.TRANSITION_INIT,g.transitionFrom,g.transitionDuration));var x;p.load&&(x=p.load,x.reset()),x&&m.preload?(m.preload.call(m),g.status=y.LOADING,x.once(r.COMPLETE,this.loadComplete,this),x.start()):this.create(m)},loadComplete:function(m){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(m.scene)},payloadComplete:function(m){this.bootScene(m.scene)},update:function(m,p){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;g>=0;g--){var x=this.scenes[g].sys;x.settings.status>y.START&&x.settings.status<=y.RUNNING&&x.step(m,p),x.scenePlugin._target&&x.scenePlugin.step(m,p)}},render:function(m){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.settings.visible&&g.settings.status>=y.LOADING&&g.settings.status<y.SLEEPING&&g.render(m)}this.isProcessing=!1},create:function(m){var p=m.sys,g=p.settings;m.create&&(g.status=y.CREATING,m.create.call(m,g.data),g.status===y.DESTROYED)||(g.isTransition&&p.events.emit(d.TRANSITION_START,g.transitionFrom,g.transitionDuration),m.update&&(p.sceneUpdate=m.update),g.status=y.RUNNING,p.events.emit(d.CREATE,m))},createSceneFromFunction:function(m,p){var g=new p;if(g instanceof v){var x=g.sys.settings.key;if(x!==""&&(m=x),this.keys.hasOwnProperty(m))throw new Error("Cannot add a Scene with duplicate key: "+m);return this.createSceneFromInstance(m,g)}else return g.sys=new o(g),g.sys.settings.key=m,g.sys.init(this.game),g},createSceneFromInstance:function(m,p){var g=p.sys.settings.key;return g===""&&(p.sys.settings.key=m),p.sys.init(this.game),p},createSceneFromObject:function(m,p){var g=new v(p),x=g.sys.settings.key;x!==""?m=x:g.sys.settings.key=m,g.sys.init(this.game);for(var E=["init","preload","create","update","render"],P=0;P<E.length;P++){var S=h(p,E[P],null);S&&(g[E[P]]=S)}if(p.hasOwnProperty("extend")){for(var M in p.extend)if(!!p.extend.hasOwnProperty(M)){var b=p.extend[M];M==="data"&&g.hasOwnProperty("data")&&typeof b=="object"?g.data.merge(b):M!=="sys"&&(g[M]=b)}}return g},getKey:function(m,p){if(m||(m="default"),typeof p=="function")return m;if(p instanceof v?m=p.sys.settings.key:typeof p=="object"&&p.hasOwnProperty("key")&&(m=p.key),this.keys.hasOwnProperty(m))throw new Error("Cannot add a Scene with duplicate key: "+m);return m},getScenes:function(m,p){m===void 0&&(m=!0),p===void 0&&(p=!1);for(var g=[],x=this.scenes,E=0;E<x.length;E++){var P=x[E];P&&(!m||m&&P.sys.isActive())&&g.push(P)}return p?g.reverse():g},getScene:function(m){if(typeof m=="string"){if(this.keys[m])return this.keys[m]}else for(var p=0;p<this.scenes.length;p++)if(m===this.scenes[p])return m;return null},isActive:function(m){var p=this.getScene(m);return p?p.sys.isActive():null},isPaused:function(m){var p=this.getScene(m);return p?p.sys.isPaused():null},isVisible:function(m){var p=this.getScene(m);return p?p.sys.isVisible():null},isSleeping:function(m){var p=this.getScene(m);return p?p.sys.isSleeping():null},pause:function(m,p){var g=this.getScene(m);return g&&g.sys.pause(p),this},resume:function(m,p){var g=this.getScene(m);return g&&g.sys.resume(p),this},sleep:function(m,p){var g=this.getScene(m);return g&&!g.sys.isTransitioning()&&g.sys.sleep(p),this},wake:function(m,p){var g=this.getScene(m);return g&&g.sys.wake(p),this},run:function(m,p){var g=this.getScene(m);if(!g){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===m){this.queueOp("start",m,p);break}return this}g.sys.isSleeping()?g.sys.wake(p):g.sys.isPaused()?g.sys.resume(p):this.start(m,p)},start:function(m,p){if(!this.isBooted)return this._data[m]={autoStart:!0,data:p},this;var g=this.getScene(m);if(!g)return console.warn("Scene not found for key: "+m),this;var x=g.sys,E=x.settings.status;if(E>=y.START&&E<=y.CREATING)return this;if(E>=y.RUNNING&&E<=y.SLEEPING)x.shutdown(),x.sceneUpdate=n,x.start(p);else{x.sceneUpdate=n,x.start(p);var P;if(x.load&&(P=x.load),P&&x.settings.hasOwnProperty("pack")&&(P.reset(),P.addPack({payload:x.settings.pack})))return x.settings.status=y.LOADING,P.once(r.COMPLETE,this.payloadComplete,this),P.start(),this}return this.bootScene(g),this},stop:function(m,p){var g=this.getScene(m);if(g&&!g.sys.isTransitioning()&&g.sys.settings.status!==y.SHUTDOWN){var x=g.sys.load;x&&(x.off(r.COMPLETE,this.loadComplete,this),x.off(r.COMPLETE,this.payloadComplete,this)),g.sys.shutdown(p)}return this},switch:function(m,p){var g=this.getScene(m),x=this.getScene(p);return g&&x&&g!==x&&(this.sleep(m),this.isSleeping(p)?this.wake(p):this.start(p)),this},getAt:function(m){return this.scenes[m]},getIndex:function(m){var p=this.getScene(m);return this.scenes.indexOf(p)},bringToTop:function(m){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:m,keyB:null});else{var p=this.getIndex(m);if(p!==-1&&p<this.scenes.length){var g=this.getScene(m);this.scenes.splice(p,1),this.scenes.push(g)}}return this},sendToBack:function(m){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:m,keyB:null});else{var p=this.getIndex(m);if(p!==-1&&p>0){var g=this.getScene(m);this.scenes.splice(p,1),this.scenes.unshift(g)}}return this},moveDown:function(m){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:m,keyB:null});else{var p=this.getIndex(m);if(p>0){var g=p-1,x=this.getScene(m),E=this.getAt(g);this.scenes[p]=E,this.scenes[g]=x}}return this},moveUp:function(m){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:m,keyB:null});else{var p=this.getIndex(m);if(p<this.scenes.length-1){var g=p+1,x=this.getScene(m),E=this.getAt(g);this.scenes[p]=E,this.scenes[g]=x}}return this},moveAbove:function(m,p){if(m===p)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:m,keyB:p});else{var g=this.getIndex(m),x=this.getIndex(p);if(g!==-1&&x!==-1&&x<g){var E=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(g+(x>g),0,E)}}return this},moveBelow:function(m,p){if(m===p)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:m,keyB:p});else{var g=this.getIndex(m),x=this.getIndex(p);if(g!==-1&&x!==-1&&x>g){var E=this.getAt(x);this.scenes.splice(x,1),g===0?this.scenes.unshift(E):this.scenes.splice(g-(x<g),0,E)}}return this},queueOp:function(m,p,g){return this._queue.push({op:m,keyA:p,keyB:g}),this},swapPosition:function(m,p){if(m===p)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:m,keyB:p});else{var g=this.getIndex(m),x=this.getIndex(p);if(g!==x&&g!==-1&&x!==-1){var E=this.getAt(g);this.scenes[g]=this.scenes[x],this.scenes[x]=E}}return this},dump:function(){for(var m=[],p=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var x=this.scenes[g].sys,E=x.settings.visible&&(x.settings.status===y.RUNNING||x.settings.status===y.PAUSED)?"[*] ":"[-] ";E+=x.settings.key+" ("+p[x.settings.status]+")",m.push(E)}console.log(m.join(`
`))},destroy:function(){for(var m=0;m<this.scenes.length;m++){var p=this.scenes[m].sys;p.destroy()}this.systemScene.sys.destroy(),this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});a.exports=c},64051:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(7599),l=e(72632),h=e(91963),r=new y({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(d.BOOT,this.boot,this),v.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},start:function(n,v){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,v),this},restart:function(n){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,n),this},transition:function(n){n===void 0&&(n={});var v=l(n,"target",!1),o=this.manager.getScene(v);if(!v||!this.checkValidTransition(o))return!1;var c=l(n,"duration",1e3);this._elapsed=0,this._target=o,this._duration=c,this._willSleep=l(n,"sleep",!1),this._willRemove=l(n,"remove",!1);var m=l(n,"onUpdate",null);m&&(this._onUpdate=m,this._onUpdateScope=l(n,"onUpdateScope",this.scene));var p=l(n,"allowInput",!1);this.settings.transitionAllowInput=p;var g=o.sys.settings;g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=c,g.transitionAllowInput=p,l(n,"moveAbove",!1)?this.manager.moveAbove(this.key,v):l(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),o.sys.isSleeping()?o.sys.wake(l(n,"data")):this.manager.start(v,l(n,"data"));var x=l(n,"onStart",null),E=l(n,"onStartScope",this.scene);return x&&x.call(E,this.scene,o,c),this.systems.events.emit(d.TRANSITION_OUT,o,c),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,v){this._elapsed+=v,this.transitionProgress=u(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,v=this._target.sys.settings;n.events.emit(d.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,v,o,c){return this.manager.add(n,v,o,c)},launch:function(n,v){return n&&n!==this.key&&this.manager.queueOp("start",n,v),this},run:function(n,v){return n&&n!==this.key&&this.manager.queueOp("run",n,v),this},pause:function(n,v){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,v),this},resume:function(n,v){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,v),this},sleep:function(n,v){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,v),this},wake:function(n,v){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,v),this},switch:function(n){return n!==this.key&&this.manager.queueOp("switch",this.key,n),this},stop:function(n,v){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,v),this},setActive:function(n,v,o){v===void 0&&(v=this.key);var c=this.manager.getScene(v);return c&&c.sys.setActive(n,o),this},setVisible:function(n,v){v===void 0&&(v=this.key);var o=this.manager.getScene(v);return o&&o.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,v){return v===void 0&&(v=this.key),n!==v&&this.manager.swapPosition(n,v),this},moveAbove:function(n,v){return v===void 0&&(v=this.key),n!==v&&this.manager.moveAbove(n,v),this},moveBelow:function(n,v){return v===void 0&&(v=this.key),n!==v&&this.manager.moveBelow(n,v),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getStatus:function(n){var v=this.manager.getScene(n);if(v)return v.sys.getStatus()},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(d.SHUTDOWN,this.shutdown,this),n.off(d.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",r,"scenePlugin"),a.exports=r},36765:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92980),y=e(10850),d=e(30657),l=e(90415),h={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:u.PENDING,key:y(r,"key",""),active:y(r,"active",!1),visible:y(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:y(r,"pack",!1),cameras:y(r,"cameras",null),map:y(r,"map",d(l,y(r,"mapAdd",{}))),physics:y(r,"physics",{}),loader:y(r,"loader",{}),plugins:y(r,"plugins",!1),input:y(r,"input",{})}}};a.exports=h},63946:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(92980),d=e(18360),l=e(7599),h=e(47736),r=e(91088),n=e(72283),v=e(36765),o=new u({initialize:function(m,p){this.scene=m,this.game,this.renderer,this.config=p,this.settings=v.create(p),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=n},init:function(c){this.settings.status=y.INIT,this.sceneUpdate=n,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var m=c.plugins;this.plugins=m,m.addToScene(this,d.Global,[d.CoreScene,r(this),h(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(c,m){var p=this.events;p.emit(l.PRE_UPDATE,c,m),p.emit(l.UPDATE,c,m),this.sceneUpdate.call(this.scene,c,m),p.emit(l.POST_UPDATE,c,m)},render:function(c){var m=this.displayList;m.depthSort(),this.events.emit(l.PRE_RENDER,c),this.cameras.render(c,m),this.events.emit(l.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var m=this.settings,p=this.getStatus();return p!==y.CREATING&&p!==y.RUNNING?console.warn("Cannot pause non-running Scene",m.key):this.settings.active&&(m.status=y.PAUSED,m.active=!1,this.events.emit(l.PAUSE,this,c)),this},resume:function(c){var m=this.events,p=this.settings;return this.settings.active||(p.status=y.RUNNING,p.active=!0,m.emit(l.RESUME,this,c)),this},sleep:function(c){var m=this.settings,p=this.getStatus();return p!==y.CREATING&&p!==y.RUNNING?console.warn("Cannot sleep non-running Scene",m.key):(m.status=y.SLEEPING,m.active=!1,m.visible=!1,this.events.emit(l.SLEEP,this,c)),this},wake:function(c){var m=this.events,p=this.settings;return p.status=y.RUNNING,p.active=!0,p.visible=!0,m.emit(l.WAKE,this,c),p.isTransition&&m.emit(l.TRANSITION_WAKE,p.transitionFrom,p.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var c=this.settings.status;return c>y.PENDING&&c<=y.RUNNING},isSleeping:function(){return this.settings.status===y.SLEEPING},isActive:function(){return this.settings.status===y.RUNNING},isPaused:function(){return this.settings.status===y.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,m){return c?this.resume(m):this.pause(m)},start:function(c){var m=this.events,p=this.settings;c&&(p.data=c),p.status=y.START,p.active=!0,p.visible=!0,m.emit(l.START,this),m.emit(l.READY,this,c)},shutdown:function(c){var m=this.events,p=this.settings;m.off(l.TRANSITION_INIT),m.off(l.TRANSITION_START),m.off(l.TRANSITION_COMPLETE),m.off(l.TRANSITION_OUT),p.status=y.SHUTDOWN,p.active=!1,p.visible=!1,m.emit(l.SHUTDOWN,this,c)},destroy:function(){var c=this.events,m=this.settings;m.status=y.DESTROYED,m.active=!1,m.visible=!1,c.emit(l.DESTROY,this),c.removeAllListeners();for(var p=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<p.length;g++)this[p[g]]=null}});a.exports=o},92980:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};a.exports=T},31803:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addedtoscene"},94817:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="boot"},28977:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="create"},91959:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},363:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},15643:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="postupdate"},17058:a=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="prerender"},77125:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="preupdate"},76018:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="ready"},28620:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removedfromscene"},41538:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="render"},34268:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},2342:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="shutdown"},96541:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="sleep"},74244:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},17046:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitioncomplete"},13637:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitioninit"},14733:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitionout"},33899:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitionstart"},52418:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="transitionwake"},31735:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},8470:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="wake"},7599:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92980),y=e(98611),d={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};d=y(!1,d,u),a.exports=d},25798:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(76038),l=e(98611),h=e(72283),r=new u({Extends:y,initialize:function(v,o,c){y.call(this),this.manager=v,this.key=o,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,c),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),!1):(n=l(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,!0)},updateMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(this.markers[n.name]=l(!0,this.markers[n.name],n),!0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),!1)},removeMarker:function(n){var v=this.markers[n];return v?(this.markers[n]=null,v):null},play:function(n,v){if(n===void 0&&(n=""),typeof n=="object"&&(v=n,n=""),typeof n!="string")return!1;if(!n)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=l(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var n=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,o=Math.pow(n,v);this.totalRate=this.currentConfig.rate*this.manager.rate*o},destroy:function(){this.pendingRemove||(this.emit(d.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});a.exports=r},12486:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(32742),d=e(6659),l=e(76038),h=e(97081),r=e(71608),n=e(51463),v=e(72283),o=e(93736),c=new u({Extends:d,initialize:function(p){d.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.listenerPosition=new o,p.events.on(h.BLUR,this.onGameBlur,this),p.events.on(h.FOCUS,this.onGameFocus,this),p.events.on(h.PRE_STEP,this.update,this),p.events.once(h.DESTROY,this.destroy,this)},add:v,addAudioSprite:function(m,p){p===void 0&&(p={});var g=this.add(m,p);g.spritemap=this.jsonCache.get(m).spritemap;for(var x in g.spritemap)if(!!g.spritemap.hasOwnProperty(x)){var E=y(p),P=g.spritemap[x];E.loop=P.hasOwnProperty("loop")?P.loop:!1,g.addMarker({name:x,start:P.start,duration:P.end-P.start,config:E})}return g},get:function(m){return n(this.sounds,"key",m)},getAll:function(m){return m?r(this.sounds,"key",m):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(m,p){var g=this.add(m);return g.once(l.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(m,p,g){var x=this.addAudioSprite(m);return x.once(l.COMPLETE,x.destroy,x),x.play(p,g)},remove:function(m){var p=this.sounds.indexOf(m);return p!==-1?(m.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(m){m.destroy()}),this.sounds.length=0},removeByKey:function(m){for(var p=0,g=this.sounds.length-1;g>=0;g--){var x=this.sounds[g];x.key===m&&(x.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(m){m.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(m){m.resume()}),this.emit(l.RESUME_ALL,this)},setListenerPosition:v,stopAll:function(){this.forEachActiveSound(function(m){m.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(m){var p=0;return this.getAll(m).forEach(function(g){g.stop()&&p++}),p},unlock:v,onBlur:v,onFocus:v,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(m,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(x){x.update(m,p)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(m,p){var g=this;this.sounds.forEach(function(x,E){x&&!x.pendingRemove&&m.call(p||g,x,E,g.sounds)})},setRate:function(m){return this.rate=m,this},rate:{get:function(){return this._rate},set:function(m){this._rate=m,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(l.GLOBAL_RATE,this,m)}},setDetune:function(m){return this.detune=m,this},detune:{get:function(){return this._detune},set:function(m){this._detune=m,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,m)}}});a.exports=c},84191:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27622),y=e(17546),d=e(55491),l={create:function(h){var r=h.config.audio,n=h.device.audio;return r.noAudio||!n.webAudio&&!n.audioData?new y(h):n.webAudio&&!r.disableWebAudio?new d(h):new u(h)}};a.exports=l},77578:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},19679:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="decodedall"},56951:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="decoded"},16436:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="destroy"},55154:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="detune"},57818:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="detune"},57890:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="mute"},83022:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="rate"},99170:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="volume"},64289:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="looped"},67214:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},53128:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="mute"},73078:a=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pan"},76763:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pauseall"},88426:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},13765:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="play"},80291:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="rate"},11124:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resumeall"},55382:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},71157:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="seek"},31776:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stopall"},39450:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},21939:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="unlocked"},33019:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="volume"},76038:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25798),y=e(56694),d=e(76038),l=e(82897),h=new y({Extends:u,initialize:function(n,v,o){if(o===void 0&&(o={}),this.tags=n.game.cache.audio.get(v),!this.tags)throw new Error('No cached audio asset with key "'+v);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,u.call(this,n,v,o)},play:function(r,n){return this.manager.isLocked(this,"play",[r,n])||!u.prototype.play.call(this,r,n)||!this.pickAndPlayAudioTag()?!1:(this.emit(d.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(d.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!u.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(d.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!u.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(d.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,n=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+n*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var n=this.tags[r];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&v.push(c)},this),v.sort(function(c,m){return c.loop===m.loop?m.seek/m.duration-c.seek/c.duration:c.loop?1:-1});var o=v[0];return this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){u.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(!!this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var n=this.currentMarker?this.currentMarker.start:0,v=n+this.duration,o=this.audio.currentTime;if(this.currentConfig.loop)o>=v-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,o-v),o=this.audio.currentTime):o<n&&(this.audio.currentTime+=n,o=this.audio.currentTime),o<this.previousTime&&this.emit(d.LOOPED,this);else if(o>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(d.COMPLETE,this);return}this.previousTime=o}},destroy:function(){u.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){u.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(d.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(d.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,d.RATE,r)&&(this.calculateRate(),this.emit(d.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,d.DETUNE,r)&&(this.calculateRate(),this.emit(d.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(d.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(d.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(d.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});a.exports=h},27622:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12486),y=e(56694),d=e(76038),l=e(34350),h=new y({Extends:u,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,u.call(this,n)},add:function(r,n){var v=new l(this,r,n);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(c,m){for(var p=0;p<m.length;p++)if(m[p].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var n=!1,v=function(){n=!0},o=function(){if(n){n=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",o);var c=[];if(r.game.cache.audio.entries.each(function(p,g){for(var x=0;x<g.length;x++){var E=g[x];E.dataset.locked==="true"&&c.push(E)}return!0}),c.length!==0){var m=c[c.length-1];m.oncanplaythrough=function(){m.oncanplaythrough=null,c.forEach(function(p){p.dataset.locked="false"}),r.unlocked=!0},c.forEach(function(p){p.load()})}};this.once(d.UNLOCKED,function(){for(this.forEachActiveSound(function(m){m.currentMarker===null&&m.duration===0&&(m.duration=m.tags[0].duration),m.totalDuration=m.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",o,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){u.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,n,v){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:n,value:v}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(d.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(d.GLOBAL_VOLUME,this,r)}}});a.exports=h},56751:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25798),y=e(56694),d=e(6659),l=e(98611),h=e(72283),r=function(){return!1},n=function(){return null},v=function(){return this},o=new y({Extends:d,initialize:function(m,p,g){g===void 0&&(g={}),d.call(this),this.manager=m,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:n,play:r,pause:r,resume:r,stop:r,setMute:v,setVolume:v,setRate:v,setDetune:v,setSeek:v,setLoop:v,setPan:v,applyConfig:n,resetConfig:n,update:h,calculateRate:n,destroy:function(){u.prototype.destroy.call(this)}});a.exports=o},17546:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12486),y=e(56694),d=e(6659),l=e(38662),h=e(72283),r=new y({Extends:d,initialize:function(v){d.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,v){var o=new l(this,n,v);return this.sounds.push(o),o},addAudioSprite:function(n,v){var o=this.add(n,v);return o.spritemap={},o},get:function(n){return u.prototype.get.call(this,n)},getAll:function(n){return u.prototype.getAll.call(this,n)},play:function(n,v){return!1},playAudioSprite:function(n,v,o){return!1},remove:function(n){return u.prototype.remove.call(this,n)},removeAll:function(){return u.prototype.removeAll.call(this)},removeByKey:function(n){return u.prototype.removeByKey.call(this,n)},stopByKey:function(n){return u.prototype.stopByKey.call(this,n)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(n,v){u.prototype.forEachActiveSound.call(this,n,v)},destroy:function(){u.prototype.destroy.call(this)}});a.exports=r},96008:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25798),y=e(56694),d=e(76038),l=e(72632),h=new y({Extends:u,initialize:function(n,v,o){if(o===void 0&&(o={}),this.audioBuffer=n.game.cache.audio.get(v),!this.audioBuffer)throw new Error('Audio key "'+v+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=n.context.createGain(),this.volumeNode=n.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),n.context.createPanner&&(this.spatialNode=n.context.createPanner(),this.volumeNode.connect(this.spatialNode)),n.context.createStereoPanner?(this.pannerNode=n.context.createStereoPanner(),n.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(n.destination)):n.context.createPanner?this.spatialNode.connect(n.destination):this.volumeNode.connect(n.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,u.call(this,n,v,o)},play:function(r,n){return u.prototype.play.call(this,r,n)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(d.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(d.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(d.RESUME,this),!0)},stop:function(){return u.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(d.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,n=this.currentConfig.delay,v=this.manager.context.currentTime+n,o=(this.currentMarker?this.currentMarker.start:0)+r,c=this.duration-r;this.playTime=v-r,this.startTime=v,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,v),Math.max(0,o),Math.max(0,c)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),n=this.currentMarker?this.currentMarker.start:0,v=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,n),Math.max(0,v))},createBufferSource:function(){var r=this,n=this.manager.context.createBufferSource();return n.buffer=this.audioBuffer,n.connect(this.muteNode),n.onended=function(v){v.target===r.source&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},n},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var n=this.spatialNode;n.panningModel=l(r,"panningModel","equalpower"),n.distanceModel=l(r,"distanceModel","inverse"),n.orientationX.value=l(r,"orientationX",0),n.orientationY.value=l(r,"orientationY",0),n.orientationZ.value=l(r,"orientationZ",-1),n.refDistance=l(r,"refDistance",1),n.maxDistance=l(r,"maxDistance",1e4),n.rolloffFactor=l(r,"rolloffFactor",1),n.coneInnerAngle=l(r,"coneInnerAngle",360),n.coneOuterAngle=l(r,"coneOuterAngle",0),n.coneOuterGain=l(r,"coneOuterGain",0),this.spatialSource=l(r,"follow",null),this.spatialSource||(n.positionX.value=l(r,"x",0),n.positionY.value=l(r,"y",0),n.positionZ.value=l(r,"z",0))}u.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=l(this.spatialSource,"x",null),n=l(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),n&&n!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=n)}this.hasEnded?(this.hasEnded=!1,u.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(d.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(d.LOOPED,this))},destroy:function(){this.pendingRemove||(u.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){u.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,n=0;n<this.rateUpdates.length;n++){var v=0;n<this.rateUpdates.length-1?v=this.rateUpdates[n+1].time:v=this.manager.context.currentTime-this.playTime,r+=(v-this.rateUpdates[n].time)*this.rateUpdates[n].rate}return r},getLoopTime:function(){for(var r=0,n=0;n<this.rateUpdates.length-1;n++)r+=(this.rateUpdates[n+1].time-this.rateUpdates[n].time)*this.rateUpdates[n].rate;var v=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+v.time+(this.duration-r)/v.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(d.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(d.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(d.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(d.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(d.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(d.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(d.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});a.exports=h},55491:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82329),y=e(12486),d=e(56694),l=e(76038),h=e(97081),r=e(96008),n=e(72632),v=new d({Extends:y,initialize:function(c){this.context=this.createAudioContext(c),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),y.call(this,c),this.locked&&c.isBooted?this.unlock():c.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(o){var c=o.config.audio;if(c.context)return c.context.resume(),c.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(o){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=o,this.masterMuteNode=o.createGain(),this.masterVolumeNode=o.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(o.destination),this.destination=this.masterMuteNode,this},add:function(o,c){var m=new r(this,o,c);return this.sounds.push(m),m},decodeAudio:function(o,c){var m;Array.isArray(o)?m=o:m=[{key:o,data:c}];for(var p=this.game.cache.audio,g=m.length,x=0;x<m.length;x++){var E=m[x],P=E.key,S=E.data;typeof S=="string"&&(S=u(S));var M=function(A,L){p.add(A,L),this.emit(l.DECODED,A),g--,g===0&&this.emit(l.DECODED_ALL)}.bind(this,P),b=function(A,L){console.error("Error decoding audio: "+A+" - ",L?L.message:""),g--,g===0&&this.emit(l.DECODED_ALL)}.bind(this,P);this.context.decodeAudioData(S,M,b)}},setListenerPosition:function(o,c){return o===void 0&&(o=this.game.scale.width/2),c===void 0&&(c=this.game.scale.height/2),this.listenerPosition.set(o,c),this},unlock:function(){var o=this,c=document.body,m=function p(){if(o.context&&c){var g=c.removeEventListener;o.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),o.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};c&&(c.addEventListener("touchstart",m,!1),c.addEventListener("touchend",m,!1),c.addEventListener("click",m,!1),c.addEventListener("keydown",m,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var o=this.context;o&&!this.locked&&(o.state==="suspended"||o.state==="interrupted")&&o.resume()},update:function(o,c){var m=this.context.listener;if(m&&m.positionX!==void 0){var p=n(this.listenerPosition,"x",null),g=n(this.listenerPosition,"y",null);p&&p!==this._spatialx&&(this._spatialx=m.positionX.value=p),g&&g!==this._spatialy&&(this._spatialy=m.positionY.value=g)}y.prototype.update.call(this,o,c),this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var o=this;this.context.close().then(function(){o.context=null})}y.prototype.destroy.call(this)},setMute:function(o){return this.mute=o,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(o){this.masterMuteNode.gain.setValueAtTime(o?0:1,0),this.emit(l.GLOBAL_MUTE,this,o)}},setVolume:function(o){return this.volume=o,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(o){this.masterVolumeNode.gain.setValueAtTime(o,0),this.emit(l.GLOBAL_VOLUME,this,o)}}});a.exports=v},71207:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59959),y=e(56694),d=e(72283),l=e(17922),h=new y({initialize:function(n){this.parent=n,this.list=[],this.position=0,this.addCallback=d,this.removeCallback=d,this._sortKey=""},add:function(r,n){return n?u.Add(this.list,r):u.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,n,v){return v?u.AddAt(this.list,r,n):u.AddAt(this.list,r,n,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,n){return r?(n===void 0&&(n=function(v,o){return v[r]-o[r]}),l(this.list,n),this):this},getByName:function(r){return u.GetFirst(this.list,"name",r)},getRandom:function(r,n){return u.GetRandom(this.list,r,n)},getFirst:function(r,n,v,o){return u.GetFirst(this.list,r,n,v,o)},getAll:function(r,n,v,o){return u.GetAll(this.list,r,n,v,o)},count:function(r,n){return u.CountAllMatching(this.list,r,n)},swap:function(r,n){u.Swap(this.list,r,n)},moveTo:function(r,n){return u.MoveTo(this.list,r,n)},moveAbove:function(r,n){return u.MoveAbove(this.list,r,n)},moveBelow:function(r,n){return u.MoveBelow(this.list,r,n)},remove:function(r,n){return n?u.Remove(this.list,r):u.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,n){return n?u.RemoveAt(this.list,r):u.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,n,v){return v?u.RemoveBetween(this.list,r,n):u.RemoveBetween(this.list,r,n,this.removeCallback,this)},removeAll:function(r){for(var n=this.list.length;n--;)this.remove(this.list[n],r);return this},bringToTop:function(r){return u.BringToTop(this.list,r)},sendToBack:function(r){return u.SendToBack(this.list,r)},moveUp:function(r){return u.MoveUp(this.list,r),r},moveDown:function(r){return u.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(r,n){return u.Replace(this.list,r,n)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,n,v,o){return u.SetAll(this.list,r,n,v,o),this},each:function(r,n){for(var v=[null],o=2;o<arguments.length;o++)v.push(arguments[o]);for(o=0;o<this.list.length;o++)v[0]=this.list[o],r.apply(n,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});a.exports=h},33885:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l){if(this.entries={},this.size=0,Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h][0],l[h][1])},set:function(d,l){return this.has(d)||this.size++,this.entries[d]=l,this},get:function(d){if(this.has(d))return this.entries[d]},getArray:function(){var d=[],l=this.entries;for(var h in l)d.push(l[h]);return d},has:function(d){return this.entries.hasOwnProperty(d)},delete:function(d){return this.has(d)&&(delete this.entries[d],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(d){delete this.entries[d]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var d=[],l=this.entries;for(var h in l)d.push(l[h]);return d},dump:function(){var d=this.entries;console.group("Map");for(var l in d)console.log(l,d[l]);console.groupEnd()},each:function(d){var l=this.entries;for(var h in l)if(d(h,l[h])===!1)break;return this},contains:function(d){var l=this.entries;for(var h in l)if(l[h]===d)return!0;return!1},merge:function(d,l){l===void 0&&(l=!1);var h=this.entries,r=d.entries;for(var n in r)h.hasOwnProperty(n)&&l?h[n]=r[n]:this.set(n,r[n]);return this}});a.exports=y},74623:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(36716),l=new u({Extends:y,initialize:function(){y.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var r=this._pending,n=r.indexOf(h);n!==-1&&r.splice(n,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,r=this._destroy,n=h.length;n--;)r.push(h[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,r=this._active,n,v;for(n=0;n<h.length;n++){v=h[n];var o=r.indexOf(v);o!==-1&&(r.splice(o,1),this.emit(d.PROCESS_QUEUE_REMOVE,v))}for(h.length=0,h=this._pending,n=0;n<h.length;n++)v=h[n],(!this.checkQueue||this.checkQueue&&r.indexOf(v)===-1)&&(r.push(v),this.emit(d.PROCESS_QUEUE_ADD,v));return h.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});a.exports=l},68687:(a,T,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53466);function y(S){if(!(this instanceof y))return new y(S);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}y.prototype={all:function(){return this._all(this.data,[])},search:function(S){var M=this.data,b=[],A=this.toBBox;if(!x(S,M))return b;for(var L=[],R,O,D,B;M;){for(R=0,O=M.children.length;R<O;R++)D=M.children[R],B=M.leaf?A(D):D,x(S,B)&&(M.leaf?b.push(D):g(S,B)?this._all(D,b):L.push(D));M=L.pop()}return b},collides:function(S){var M=this.data,b=this.toBBox;if(!x(S,M))return!1;for(var A=[],L,R,O,D;M;){for(L=0,R=M.children.length;L<R;L++)if(O=M.children[L],D=M.leaf?b(O):O,x(S,D)){if(M.leaf||g(S,D))return!0;A.push(O)}M=A.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var M=0,b=S.length;M<b;M++)this.insert(S[M]);return this}var A=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var L=this.data;this.data=A,A=L}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(S,M){if(!S)return this;for(var b=this.data,A=this.toBBox(S),L=[],R=[],O,D,B,G;b||L.length;){if(b||(b=L.pop(),D=L[L.length-1],O=R.pop(),G=!0),b.leaf&&(B=d(S,b.children,M),B!==-1))return b.children.splice(B,1),L.push(b),this._condense(L),this;!G&&!b.leaf&&g(b,A)?(L.push(b),R.push(O),O=0,D=b,b=b.children[0]):D?(O++,b=D.children[O],G=!1):b=null}return this},toBBox:function(S){return S},compareMinX:n,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,M){for(var b=[];S;)S.leaf?M.push.apply(M,S.children):b.push.apply(b,S.children),S=b.pop();return M},_build:function(S,M,b,A){var L=b-M+1,R=this._maxEntries,O;if(L<=R)return O=E(S.slice(M,b+1)),l(O,this.toBBox),O;A||(A=Math.ceil(Math.log(L)/Math.log(R)),R=Math.ceil(L/Math.pow(R,A-1))),O=E([]),O.leaf=!1,O.height=A;var D=Math.ceil(L/R),B=D*Math.ceil(Math.sqrt(R)),G,z,X,U;for(P(S,M,b,B,this.compareMinX),G=M;G<=b;G+=B)for(X=Math.min(G+B-1,b),P(S,G,X,D,this.compareMinY),z=G;z<=X;z+=D)U=Math.min(z+D-1,X),O.children.push(this._build(S,z,U,A-1));return l(O,this.toBBox),O},_chooseSubtree:function(S,M,b,A){for(var L,R,O,D,B,G,z,X;A.push(M),!(M.leaf||A.length-1===b);){for(z=X=1/0,L=0,R=M.children.length;L<R;L++)O=M.children[L],B=o(O),G=m(S,O)-B,G<X?(X=G,z=B<z?B:z,D=O):G===X&&B<z&&(z=B,D=O);M=D||M.children[0]}return M},_insert:function(S,M,b){var A=this.toBBox,L=b?S:A(S),R=[],O=this._chooseSubtree(L,this.data,M,R);for(O.children.push(S),r(O,L);M>=0&&R[M].children.length>this._maxEntries;)this._split(R,M),M--;this._adjustParentBBoxes(L,R,M)},_split:function(S,M){var b=S[M],A=b.children.length,L=this._minEntries;this._chooseSplitAxis(b,L,A);var R=this._chooseSplitIndex(b,L,A),O=E(b.children.splice(R,b.children.length-R));O.height=b.height,O.leaf=b.leaf,l(b,this.toBBox),l(O,this.toBBox),M?S[M-1].children.push(O):this._splitRoot(b,O)},_splitRoot:function(S,M){this.data=E([S,M]),this.data.height=S.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(S,M,b){var A,L,R,O,D,B,G,z;for(B=G=1/0,A=M;A<=b-M;A++)L=h(S,0,A,this.toBBox),R=h(S,A,b,this.toBBox),O=p(L,R),D=o(L)+o(R),O<B?(B=O,z=A,G=D<G?D:G):O===B&&D<G&&(G=D,z=A);return z},_chooseSplitAxis:function(S,M,b){var A=S.leaf?this.compareMinX:n,L=S.leaf?this.compareMinY:v,R=this._allDistMargin(S,M,b,A),O=this._allDistMargin(S,M,b,L);R<O&&S.children.sort(A)},_allDistMargin:function(S,M,b,A){S.children.sort(A);var L=this.toBBox,R=h(S,0,M,L),O=h(S,b-M,b,L),D=c(R)+c(O),B,G;for(B=M;B<b-M;B++)G=S.children[B],r(R,S.leaf?L(G):G),D+=c(R);for(B=b-M-1;B>=M;B--)G=S.children[B],r(O,S.leaf?L(G):G),D+=c(O);return D},_adjustParentBBoxes:function(S,M,b){for(var A=b;A>=0;A--)r(M[A],S)},_condense:function(S){for(var M=S.length-1,b;M>=0;M--)S[M].children.length===0?M>0?(b=S[M-1].children,b.splice(b.indexOf(S[M]),1)):this.clear():l(S[M],this.toBBox)},compareMinX:function(S,M){return S.left-M.left},compareMinY:function(S,M){return S.top-M.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function d(S,M,b){if(!b)return M.indexOf(S);for(var A=0;A<M.length;A++)if(b(S,M[A]))return A;return-1}function l(S,M){h(S,0,S.children.length,M,S)}function h(S,M,b,A,L){L||(L=E(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var R=M,O;R<b;R++)O=S.children[R],r(L,S.leaf?A(O):O);return L}function r(S,M){return S.minX=Math.min(S.minX,M.minX),S.minY=Math.min(S.minY,M.minY),S.maxX=Math.max(S.maxX,M.maxX),S.maxY=Math.max(S.maxY,M.maxY),S}function n(S,M){return S.minX-M.minX}function v(S,M){return S.minY-M.minY}function o(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function c(S){return S.maxX-S.minX+(S.maxY-S.minY)}function m(S,M){return(Math.max(M.maxX,S.maxX)-Math.min(M.minX,S.minX))*(Math.max(M.maxY,S.maxY)-Math.min(M.minY,S.minY))}function p(S,M){var b=Math.max(S.minX,M.minX),A=Math.max(S.minY,M.minY),L=Math.min(S.maxX,M.maxX),R=Math.min(S.maxY,M.maxY);return Math.max(0,L-b)*Math.max(0,R-A)}function g(S,M){return S.minX<=M.minX&&S.minY<=M.minY&&M.maxX<=S.maxX&&M.maxY<=S.maxY}function x(S,M){return M.minX<=S.maxX&&M.minY<=S.maxY&&M.maxX>=S.minX&&M.maxY>=S.minY}function E(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function P(S,M,b,A,L){for(var R=[M,b],O;R.length;)b=R.pop(),M=R.pop(),!(b-M<=A)&&(O=M+Math.ceil((b-M)/A/2)*A,u(S,O,M,b,L),R.push(M,O,O,b))}a.exports=y},58403:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l){if(this.entries=[],Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h])},set:function(d){return this.entries.indexOf(d)===-1&&this.entries.push(d),this},get:function(d,l){for(var h=0;h<this.entries.length;h++){var r=this.entries[h];if(r[d]===l)return r}},getArray:function(){return this.entries.slice(0)},delete:function(d){var l=this.entries.indexOf(d);return l>-1&&this.entries.splice(l,1),this},dump:function(){console.group("Set");for(var d=0;d<this.entries.length;d++){var l=this.entries[d];console.log(l)}console.groupEnd()},each:function(d,l){var h,r=this.entries.slice(),n=r.length;if(l)for(h=0;h<n&&d.call(l,r[h],h)!==!1;h++);else for(h=0;h<n&&d(r[h],h)!==!1;h++);return this},iterate:function(d,l){var h,r=this.entries.length;if(l)for(h=0;h<r&&d.call(l,this.entries[h],h)!==!1;h++);else for(h=0;h<r&&d(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(d){var l,h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);var r=this.entries.length;for(l=0;l<r;l++){var n=this.entries[l];n[d].apply(n,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(d){return this.entries.indexOf(d)>-1},union:function(d){var l=new y;return d.entries.forEach(function(h){l.set(h)}),this.entries.forEach(function(h){l.set(h)}),l},intersect:function(d){var l=new y;return this.entries.forEach(function(h){d.contains(h)&&l.set(h)}),l},difference:function(d){var l=new y;return this.entries.forEach(function(h){d.contains(h)||l.set(h)}),l},size:{get:function(){return this.entries.length},set:function(d){return d<this.entries.length?this.entries.length=d:this.entries.length}}});a.exports=y},90881:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),y=e(56694),d=e(84314),l=e(93736),h=new y({initialize:function(n,v,o,c){n===void 0&&(n=0),v===void 0&&(v=n),o===void 0&&(o=0),c===void 0&&(c=null),this._width=n,this._height=v,this._parent=c,this.aspectMode=o,this.aspectRatio=v===0?1:n/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,n){return r===void 0&&(r=0),n===void 0&&(n=r),this.snapTo.set(r,n),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,n){return r===void 0&&(r=0),n===void 0&&(n=r),this.minWidth=u(r,0,this.maxWidth),this.minHeight=u(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,n){return r===void 0&&(r=Number.MAX_VALUE),n===void 0&&(n=r),this.maxWidth=u(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=u(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,n){switch(r===void 0&&(r=0),n===void 0&&(n=r),this.aspectMode){case h.NONE:this._width=this.getNewWidth(d(r,this.snapTo.x)),this._height=this.getNewHeight(d(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(d(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(d(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(r,n,!0);break;case h.ENVELOP:this.constrain(r,n,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,n){return this._width=this.getNewWidth(d(r,this.snapTo.x)),this._height=this.getNewHeight(d(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,n){return n===void 0&&(n=!0),r=u(r,this.minWidth,this.maxWidth),n&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,n){return n===void 0&&(n=!0),r=u(r,this.minHeight,this.maxHeight),n&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,n,v){r===void 0&&(r=0),n===void 0&&(n=r),v===void 0&&(v=!0),r=this.getNewWidth(r),n=this.getNewHeight(n);var o=this.snapTo,c=n===0?1:r/n;return v&&this.aspectRatio>c||!v&&this.aspectRatio<c?(r=d(r,o.x),n=r/this.aspectRatio,o.y>0&&(n=d(n,o.y),r=n*this.aspectRatio)):(v&&this.aspectRatio<c||!v&&this.aspectRatio>c)&&(n=d(n,o.y),r=n*this.aspectRatio,o.x>0&&(r=d(r,o.x),n=r*(1/this.aspectRatio))),this._width=r,this._height=n,this},fitTo:function(r,n){return this.constrain(r,n,!0)},envelop:function(r,n){return this.constrain(r,n,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,a.exports=h},94160:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="add"},95393:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="remove"},36716:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(82897),d=e(27119),l=e(86459),h=e(28621),r=e(31673),n=new u({Extends:r,initialize:function(o,c,m,p,g){r.call(this,o,c,m,p,g),this.add("__BASE",0,0,0,p,g),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=p,this.height=g,this.imageData=this.context.getImageData(0,0,p,g),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(v,o,c,m){return m===void 0&&(m=!0),this.context.drawImage(c,v,o),m&&this.update(),this},drawFrame:function(v,o,c,m,p){c===void 0&&(c=0),m===void 0&&(m=0),p===void 0&&(p=!0);var g=this.manager.getFrame(v,o);if(g){var x=g.canvasData,E=g.cutWidth,P=g.cutHeight,S=g.source.resolution;this.context.drawImage(g.source.image,x.x,x.y,E,P,c,m,E/S,P/S),p&&this.update()}return this},setPixel:function(v,o,c,m,p,g){g===void 0&&(g=255),v=Math.abs(Math.floor(v)),o=Math.abs(Math.floor(o));var x=this.getIndex(v,o);if(x>-1){var E=this.context.getImageData(v,o,1,1);E.data[0]=c,E.data[1]=m,E.data[2]=p,E.data[3]=g,this.context.putImageData(E,v,o)}return this},putData:function(v,o,c,m,p,g,x){return m===void 0&&(m=0),p===void 0&&(p=0),g===void 0&&(g=v.width),x===void 0&&(x=v.height),this.context.putImageData(v,o,c,m,p,g,x),this},getData:function(v,o,c,m){v=y(Math.floor(v),0,this.width-1),o=y(Math.floor(o),0,this.height-1),c=y(c,1,this.width-v),m=y(m,1,this.height-o);var p=this.context.getImageData(v,o,c,m);return p},getPixel:function(v,o,c){c||(c=new d);var m=this.getIndex(v,o);if(m>-1){var p=this.data,g=p[m+0],x=p[m+1],E=p[m+2],P=p[m+3];c.setTo(g,x,E,P)}return c},getPixels:function(v,o,c,m){v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=this.width),m===void 0&&(m=c),v=Math.abs(Math.round(v)),o=Math.abs(Math.round(o));for(var p=y(v,0,this.width),g=y(v+c,0,this.width),x=y(o,0,this.height),E=y(o+m,0,this.height),P=new d,S=[],M=x;M<E;M++){for(var b=[],A=p;A<g;A++)P=this.getPixel(A,M,P),b.push({x:A,y:M,color:P.color,alpha:P.alphaGL});S.push(b)}return S},getIndex:function(v,o){return v=Math.abs(Math.round(v)),o=Math.abs(Math.round(o)),v<this.width&&o<this.height?(v+o*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,o,c,m,p){return v===void 0&&(v=0),o===void 0&&(o=0),c===void 0&&(c=this.width),m===void 0&&(m=this.height),p===void 0&&(p=!0),this.context.clearRect(v,o,c,m),p&&this.update(),this},setSize:function(v,o){return o===void 0&&(o=v),(v!==this.width||o!==this.height)&&(this.canvas.width=v,this.canvas.height=o,this._source.width=v,this._source.height=o,this._source.isPowerOf2=h(v,o),this.frames.__BASE.setSize(v,o,0,0),this.width=v,this.height=o,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});a.exports=n},845:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),y=e(51052),d=e(61068),l=e(56694),h=e(86459),r=e(82047),n=e(72632),v=e(65641),o=e(37410),c=e(31673),m=e(75512),p=new l({Extends:c,initialize:function(x,E,P,S){P===void 0&&(P=256),S===void 0&&(S=256),this.type="DynamicTexture";var M=x.game.renderer,b=M&&M.type===h.CANVAS,A=b?d.create2D(this,P,S):[this];c.call(this,x,E,A,P,S),this.add("__BASE",0,0,0,P,S),this.renderer=M,this.isDrawing=!1,this.canvas=b?A:null,this.context=b?A.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new y(0,0,P,S).setScene(x.game.scene.systemScene,!1),this.renderTarget=b?null:new o(M,P,S,1,0,!1,!0),this.pipeline=b?null:M.pipelines.get(v.SINGLE_PIPELINE),this.setSize(P,S)},setSize:function(g,x){x===void 0&&(x=g);var E=this.get(),P=E.source;if(g!==this.width||x!==this.height){this.canvas&&(this.canvas.width=g,this.canvas.height=x);var S=this.renderTarget;S&&(S.resize(g,x),E.glTexture=S.texture,P.isRenderTexture=!0,P.isGLTexture=!0,P.glTexture=S.texture,P.glTexture.flipY=!0),this.camera.setSize(g,x),P.width=g,P.height=x,E.setSize(g,x),this.width=g,this.height=x}else{var M=this.getSourceImage();E.cutX+g>M.width&&(g=M.width-E.cutX),E.cutY+x>M.height&&(x=M.height-E.cutY),E.setSize(g,x,E.cutX,E.cutY)}return this},setIsSpriteTexture:function(g){return this.isSpriteTexture=g,this},fill:function(g,x,E,P,S,M){var b=this.camera,A=this.renderer;x===void 0&&(x=1),E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=this.width),M===void 0&&(M=this.height);var L=g>>16&255,R=g>>8&255,O=g&255,D=this.renderTarget;if(b.preRender(),D){D.bind(!0);var B=this.pipeline.manager.set(this.pipeline),G=A.width/D.width,z=A.height/D.height;B.drawFillRect(E*G,P*z,S*G,M*z,m.getTintFromFloats(O/255,R/255,L/255,1),x),D.unbind(!0)}else{var X=this.context;A.setContext(X),X.globalCompositeOperation="source-over",X.fillStyle="rgba("+L+","+R+","+O+","+x+")",X.fillRect(E,P,S,M),A.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var g=this.context,x=this.renderTarget;x?x.clear():g&&(g.save(),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,this.width,this.height),g.restore()),this.dirty=!1}return this},stamp:function(g,x,E,P,S){E===void 0&&(E=0),P===void 0&&(P=0);var M=n(S,"alpha",1),b=n(S,"tint",16777215),A=n(S,"angle",0),L=n(S,"rotation",0),R=n(S,"scale",1),O=n(S,"scaleX",R),D=n(S,"scaleY",R),B=n(S,"originX",.5),G=n(S,"originY",.5),z=n(S,"blendMode",0),X=n(S,"erase",!1),U=this.manager.resetStamp(M,b);return U.setAngle(0),A!==0?U.setAngle(A):L!==0&&U.setRotation(L),U.setScale(O,D),U.setTexture(g,x),U.setOrigin(B,G),U.setBlendMode(z),X&&(this._eraseMode=!0),this.draw(U,E,P),X&&(this._eraseMode=!1),this},erase:function(g,x,E){return this._eraseMode=!0,this.draw(g,x,E),this._eraseMode=!1,this},draw:function(g,x,E,P,S){return this.beginDraw(),this.batchDraw(g,x,E,P,S),this.endDraw(),this},drawFrame:function(g,x,E,P,S,M){return this.beginDraw(),this.batchDrawFrame(g,x,E,P,S,M),this.endDraw(),this},repeat:function(g,x,E,P,S,M,b,A,L){if(E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=this.width),M===void 0&&(M=this.height),b===void 0&&(b=1),A===void 0&&(A=16777215),L===void 0&&(L=!1),g instanceof r?x=g:x=this.manager.getFrame(g,x),!x)return this;var R=this.manager.resetStamp(b,A);R.setFrame(x),R.setOrigin(0);var O=x.width,D=x.height;S=Math.floor(S),M=Math.floor(M);var B=Math.ceil(S/O),G=Math.ceil(M/D),z=B*O-S,X=G*D-M;z>0&&(z=O-z),X>0&&(X=D-X),E<0&&(B+=Math.ceil(Math.abs(E)/O)),P<0&&(G+=Math.ceil(Math.abs(P)/D));var U=E,V=P,N=!1,W=this.manager.stampCrop.setTo(0,0,O,D);L||this.beginDraw();for(var F=0;F<G;F++){if(V+D<0){V+=D;continue}for(var I=0;I<B;I++){if(N=!1,U+O<0){U+=O;continue}else U<0&&(N=!0,W.width=O+U,W.x=O-W.width);V<0&&(N=!0,W.height=D+V,W.y=D-W.height),z>0&&I===B-1&&(N=!0,W.width=z),X>0&&F===G-1&&(N=!0,W.height=X),N&&R.setCrop(W),this.batchGameObject(R,U,V),R.isCropped=!1,W.setTo(0,0,O,D),U+=O}U=E,V+=D}return L||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var g=this.camera,x=this.renderer,E=this.renderTarget;g.preRender(),E?x.beginCapture(E.width,E.height):x.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(g,x,E,P,S){return Array.isArray(g)||(g=[g]),this.batchList(g,x,E,P,S),this},batchDrawFrame:function(g,x,E,P,S,M){E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=1),M===void 0&&(M=16777215);var b=this.manager.getFrame(g,x);return b&&(this.renderTarget?this.pipeline.batchTextureFrame(b,E,P,M,S,this.camera.matrix,null):this.batchTextureFrame(b,E,P,S,M)),this},endDraw:function(g){if(g===void 0&&(g=this._eraseMode),this.isDrawing){var x=this.renderer,E=this.renderTarget;if(E){var P=x.endCapture(),S=x.pipelines.setUtility();S.blitFrame(P,E,1,!1,!1,g,this.isSpriteTexture),x.resetScissor(),x.resetViewport()}else x.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(g,x,E,P,S){var M=g.length;if(M!==0)for(var b=0;b<M;b++){var A=g[b];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,x,E):A.isParent||A.list?this.batchGroup(A.getChildren(),x,E):typeof A=="string"?this.batchTextureFrameKey(A,null,x,E,P,S):A instanceof r?this.batchTextureFrame(A,x,E,P,S):Array.isArray(A)&&this.batchList(A,x,E,P,S))}},batchGroup:function(g,x,E){x===void 0&&(x=0),E===void 0&&(E=0);for(var P=0;P<g.length;P++){var S=g[P];S.willRender(this.camera)&&this.batchGameObject(S,S.x+x,S.y+E)}},batchGameObject:function(g,x,E){x===void 0&&(x=g.x),E===void 0&&(E=g.y);var P=g.x,S=g.y,M=this.camera,b=this.renderer,A=this._eraseMode,L=g.mask;if(g.setPosition(x,E),this.canvas){if(A){var R=g.blendMode;g.blendMode=u.ERASE}L&&L.preRenderCanvas(b,g,M),g.renderCanvas(b,g,M,null),L&&L.postRenderCanvas(b,g,M),A&&(g.blendMode=R)}else b&&(L&&L.preRenderWebGL(b,g,M),A||b.setBlendMode(g.blendMode),g.renderWebGL(b,g,M),L&&L.postRenderWebGL(b,M,this.renderTarget));g.setPosition(P,S)},batchTextureFrameKey:function(g,x,E,P,S,M){var b=this.manager.getFrame(g,x);b&&this.batchTextureFrame(b,E,P,S,M)},batchTextureFrame:function(g,x,E,P,S){x===void 0&&(x=0),E===void 0&&(E=0),P===void 0&&(P=1),S===void 0&&(S=16777215);var M=this.camera.matrix,b=this.renderTarget;if(b)this.pipeline.batchTextureFrame(g,x,E,S,P,M,null);else{var A=this.context,L=g.canvasData,R=g.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=P,M.setToContext(A),L.width>0&&L.height>0&&A.drawImage(R,L.x,L.y,L.width,L.height,x,E,L.width,L.height),A.restore()}},snapshotArea:function(g,x,E,P,S,M,b){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!1,g,x,E,P,M,b):this.renderer.snapshotCanvas(this.canvas,S,!1,g,x,E,P,M,b),this},snapshot:function(g,x,E){return this.snapshotArea(0,0,this.width,this.height,g,x,E)},snapshotPixel:function(g,x,E){return this.snapshotArea(g,x,1,1,E,"pixel")},renderWebGL:function(g,x,E,P){var S=this.manager.resetStamp();S.setTexture(this),S.setOrigin(0),S.renderWebGL(g,S,E,P)},renderCanvas:function(){},preDestroy:function(){d.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});a.exports=p},82047:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(82897),d=e(98611),l=new u({initialize:function(r,n,v,o,c,m,p){this.texture=r,this.name=n,this.source=r.source[v],this.sourceIndex=v,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(m,p,o,c)},setSize:function(h,r,n,v){n===void 0&&(n=0),v===void 0&&(v=0),this.cutX=n,this.cutY=v,this.cutWidth=h,this.cutHeight=r,this.width=h,this.height=r,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(r/2);var o=this.data,c=o.cut;c.x=n,c.y=v,c.w=h,c.h=r,c.r=n+h,c.b=v+r,o.sourceSize.w=h,o.sourceSize.h=r,o.spriteSourceSize.w=h,o.spriteSourceSize.h=r,o.radius=.5*Math.sqrt(h*h+r*r);var m=o.drawImage;return m.x=n,m.y=v,m.width=h,m.height=r,this.updateUVs()},setTrim:function(h,r,n,v,o,c){var m=this.data,p=m.spriteSourceSize;return m.trim=!0,m.sourceSize.w=h,m.sourceSize.h=r,p.x=n,p.y=v,p.w=o,p.h=c,p.r=n+o,p.b=v+c,this.x=n,this.y=v,this.width=o,this.height=c,this.halfWidth=o*.5,this.halfHeight=c*.5,this.centerX=Math.floor(o/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(h,r,n,v,o,c,m){var p=this.cutX,g=this.cutY,x=this.cutWidth,E=this.cutHeight,P=this.realWidth,S=this.realHeight;r=y(r,0,P),n=y(n,0,S),v=y(v,0,P-r),o=y(o,0,S-n);var M=p+r,b=g+n,A=v,L=o,R=this.data;if(R.trim){var O=R.spriteSourceSize;v=y(v,0,x-r),o=y(o,0,E-n);var D=r+v,B=n+o,G=!(O.r<r||O.b<n||O.x>D||O.y>B);if(G){var z=Math.max(O.x,r),X=Math.max(O.y,n),U=Math.min(O.r,D)-z,V=Math.min(O.b,B)-X;A=U,L=V,c?M=p+(x-(z-O.x)-U):M=p+(z-O.x),m?b=g+(E-(X-O.y)-V):b=g+(X-O.y),r=z,n=X,v=U,o=V}else M=0,b=0,A=0,L=0}else c&&(M=p+(x-r-v)),m&&(b=g+(E-n-o));var N=this.source.width,W=this.source.height;return h.u0=Math.max(0,M/N),h.v0=Math.max(0,b/W),h.u1=Math.min(1,(M+A)/N),h.v1=Math.min(1,(b+L)/W),h.x=r,h.y=n,h.cx=M,h.cy=b,h.cw=A,h.ch=L,h.width=v,h.height=o,h.flipX=c,h.flipY=m,h},updateCropUVs:function(h,r,n){return this.setCropUVs(h,h.x,h.y,h.width,h.height,r,n)},setUVs:function(h,r,n,v,o,c){var m=this.data.drawImage;return m.width=h,m.height=r,this.u0=n,this.v0=v,this.u1=o,this.v1=c,this},updateUVs:function(){var h=this.cutX,r=this.cutY,n=this.cutWidth,v=this.cutHeight,o=this.data.drawImage;o.width=n,o.height=v;var c=this.source.width,m=this.source.height;return this.u0=h/c,this.v0=r/m,this.u1=(h+n)/c,this.v1=(r+v)/m,this},updateUVsInverted:function(){var h=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/r,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var h=new l(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=d(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});a.exports=l},31673:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(82047),d=e(32547),l='Texture "%s" has no frame "%s"',h=new u({initialize:function(n,v,o,c,m){Array.isArray(o)||(o=[o]),this.manager=n,this.key=v,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var p=0;p<o.length;p++)this.source.push(new d(this,o[p],c,m))},add:function(r,n,v,o,c,m){if(this.has(r))return null;var p=new y(this,r,n,v,o,c,m);return this.frames[r]=p,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,p},remove:function(r){if(this.has(r)){var n=this.get(r);return n.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var n=this.frames[r];return n||(console.warn(l,this.key,r),n=this.frames[this.firstFrame]),n},getTextureSourceIndex:function(r){for(var n=0;n<this.source.length;n++)if(this.source[n]===r)return n;return-1},getFramesFromTextureSource:function(r,n){n===void 0&&(n=!1);var v=[];for(var o in this.frames)if(!(o==="__BASE"&&!n)){var c=this.frames[o];c.sourceIndex===r&&v.push(c)}return v},getFrameNames:function(r){r===void 0&&(r=!1);var n=Object.keys(this.frames);if(!r){var v=n.indexOf("__BASE");v!==-1&&n.splice(v,1)}return n},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var n=this.frames[r];return n?n.source.image:(console.warn(l,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var n=this.frames[r],v;return n?v=n.sourceIndex:(console.warn(l,this.key,r),v=this.frames.__BASE.sourceIndex),this.dataSource[v].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++){var v=this.source[n];this.dataSource.push(new d(this,r[n],v.width,v.height))}},setFilter:function(r){var n;for(n=0;n<this.source.length;n++)this.source[n].setFilter(r);for(n=0;n<this.dataSource.length;n++)this.dataSource[n].setFilter(r)},destroy:function(){var r,n=this.source,v=this.dataSource;for(r=0;r<n.length;r++)n[r]&&n[r].destroy();for(r=0;r<v.length;r++)v[r]&&v[r].destroy();for(var o in this.frames){var c=this.frames[o];c&&c.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});a.exports=h},6237:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y=e(17487),d=e(56694),l=e(27119),h=e(86459),r=e(845),n=e(6659),v=e(38203),o=e(82047),c=e(97081),m=e(52780),p=e(10850),g=e(1539),x=e(42911),E=e(69150),P=e(74118),S=e(31673),M=new d({Extends:n,initialize:function(A){n.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=u.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new P,this.silentWarnings=!1,A.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(v.LOAD,this.updatePending,this),this.on(v.ERROR,this.updatePending,this);var b=this.game.config;this.addBase64("__DEFAULT",b.defaultImage),this.addBase64("__MISSING",b.missingImage),this.addBase64("__WHITE",b.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(v.LOAD),this.off(v.ERROR),this.emit(v.READY),this.stamp=new g(this.game.scene.systemScene).setOrigin(0))},checkKey:function(b){return this.exists(b)?(this.silentWarnings||console.error("Texture key already in use: "+b),!1):!0},remove:function(b){if(typeof b=="string")if(this.exists(b))b=this.get(b);else return this.silentWarnings||console.warn("No texture found matching key: "+b),this;return this.list.hasOwnProperty(b.key)&&(b.destroy(),this.emit(v.REMOVE,b.key),this.emit(v.REMOVE_KEY+b.key)),this},removeKey:function(b){return this.list.hasOwnProperty(b)&&delete this.list[b],this},addBase64:function(b,A){if(this.checkKey(b)){var L=this,R=new Image;R.onerror=function(){L.emit(v.ERROR,b)},R.onload=function(){var O=L.create(b,R);E.Image(O,0),L.emit(v.ADD,b,O),L.emit(v.ADD_KEY+b,O),L.emit(v.LOAD,b,O)},R.src=A}return this},getBase64:function(b,A,L,R){L===void 0&&(L="image/png"),R===void 0&&(R=.92);var O="",D=this.getFrame(b,A);if(D&&(D.source.isRenderTexture||D.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(D){var B=D.canvasData,G=u.create2D(this,B.width,B.height),z=G.getContext("2d",{willReadFrequently:!0});B.width>0&&B.height>0&&z.drawImage(D.source.image,B.x,B.y,B.width,B.height,0,0,B.width,B.height),O=G.toDataURL(L,R),u.remove(G)}return O},addImage:function(b,A,L){var R=null;return this.checkKey(b)&&(R=this.create(b,A),E.Image(R,0),L&&R.setDataSource(L),this.emit(v.ADD,b,R),this.emit(v.ADD_KEY+b,R)),R},addGLTexture:function(b,A,L,R){var O=null;return this.checkKey(b)&&(L===void 0&&(L=A.width),R===void 0&&(R=A.height),O=this.create(b,A,L,R),O.add("__BASE",0,0,0,L,R),this.emit(v.ADD,b,O),this.emit(v.ADD_KEY+b,O)),O},addCompressedTexture:function(b,A,L){var R=null;if(this.checkKey(b)){if(R=this.create(b,A),R.add("__BASE",0,0,0,A.width,A.height),L)if(Array.isArray(L))for(var O=0;O<L.length;O++)E.JSONHash(R,O,L[O]);else E.JSONHash(R,0,L);this.emit(v.ADD,b,R),this.emit(v.ADD_KEY+b,R)}return R},addRenderTexture:function(b,A){var L=null;return this.checkKey(b)&&(L=this.create(b,A),L.add("__BASE",0,0,0,A.width,A.height),this.emit(v.ADD,b,L),this.emit(v.ADD_KEY+b,L)),L},generate:function(b,A){if(this.checkKey(b)){var L=u.create(this,1,1);return A.canvas=L,m(A),this.addCanvas(b,L)}else return null},createCanvas:function(b,A,L){if(A===void 0&&(A=256),L===void 0&&(L=256),this.checkKey(b)){var R=u.create(this,A,L,h.CANVAS,!0);return this.addCanvas(b,R)}return null},addCanvas:function(b,A,L){L===void 0&&(L=!1);var R=null;return L?R=new y(this,b,A,A.width,A.height):this.checkKey(b)&&(R=new y(this,b,A,A.width,A.height),this.list[b]=R,this.emit(v.ADD,b,R),this.emit(v.ADD_KEY+b,R)),R},addDynamicTexture:function(b,A,L){var R=null;return typeof b=="string"&&!this.exists(b)?R=new r(this,b,A,L):(R=b,b=R.key),this.checkKey(b)?(this.list[b]=R,this.emit(v.ADD,b,R),this.emit(v.ADD_KEY+b,R)):R=null,R},addAtlas:function(b,A,L,R){return Array.isArray(L.textures)||Array.isArray(L.frames)?this.addAtlasJSONArray(b,A,L,R):this.addAtlasJSONHash(b,A,L,R)},addAtlasJSONArray:function(b,A,L,R){var O=null;if(A instanceof S?(b=O.key,O=A):this.checkKey(b)&&(O=this.create(b,A)),O){if(Array.isArray(L))for(var D=L.length===1,B=0;B<O.source.length;B++){var G=D?L[0]:L[B];E.JSONArray(O,B,G)}else E.JSONArray(O,0,L);R&&O.setDataSource(R),this.emit(v.ADD,b,O),this.emit(v.ADD_KEY+b,O)}return O},addAtlasJSONHash:function(b,A,L,R){var O=null;if(A instanceof S?(b=O.key,O=A):this.checkKey(b)&&(O=this.create(b,A)),O){if(Array.isArray(L))for(var D=0;D<L.length;D++)E.JSONHash(O,D,L[D]);else E.JSONHash(O,0,L);R&&O.setDataSource(R),this.emit(v.ADD,b,O),this.emit(v.ADD_KEY+b,O)}return O},addAtlasXML:function(b,A,L,R){var O=null;return A instanceof S?(b=O.key,O=A):this.checkKey(b)&&(O=this.create(b,A)),O&&(E.AtlasXML(O,0,L),R&&O.setDataSource(R),this.emit(v.ADD,b,O),this.emit(v.ADD_KEY+b,O)),O},addUnityAtlas:function(b,A,L,R){var O=null;return A instanceof S?(b=O.key,O=A):this.checkKey(b)&&(O=this.create(b,A)),O&&(E.UnityYAML(O,0,L),R&&O.setDataSource(R),this.emit(v.ADD,b,O),this.emit(v.ADD_KEY+b,O)),O},addSpriteSheet:function(b,A,L){var R=null;if(A instanceof S?(b=R.key,R=A):this.checkKey(b)&&(R=this.create(b,A)),R){var O=R.source[0].width,D=R.source[0].height;E.SpriteSheet(R,0,0,0,O,D,L),this.emit(v.ADD,b,R),this.emit(v.ADD_KEY+b,R)}return R},addSpriteSheetFromAtlas:function(b,A){if(!this.checkKey(b))return null;var L=p(A,"atlas",null),R=p(A,"frame",null);if(!(!L||!R)){var O=this.get(L),D=O.get(R);if(D){var B=this.create(b,D.source.image);return D.trimmed?E.SpriteSheetFromAtlas(B,D,A):E.SpriteSheet(B,0,D.cutX,D.cutY,D.cutWidth,D.cutHeight,A),this.emit(v.ADD,b,B),this.emit(v.ADD_KEY+b,B),B}}},create:function(b,A,L,R){var O=null;return this.checkKey(b)&&(O=new S(this,b,A,L,R),this.list[b]=O),O},exists:function(b){return this.list.hasOwnProperty(b)},get:function(b){return b===void 0&&(b="__DEFAULT"),this.list[b]?this.list[b]:b instanceof S?b:b instanceof o?b.texture:this.list.__MISSING},cloneFrame:function(b,A){if(this.list[b])return this.list[b].get(A).clone()},getFrame:function(b,A){if(this.list[b])return this.list[b].get(A)},parseFrame:function(b){if(b){if(typeof b=="string")return this.getFrame(b);if(Array.isArray(b)&&b.length===2)return this.getFrame(b[0],b[1]);if(x(b))return this.getFrame(b.key,b.frame);if(b instanceof S)return b.get();if(b instanceof o)return b}else return},getTextureKeys:function(){var b=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&b.push(A);return b},getPixel:function(b,A,L,R){var O=this.getFrame(L,R);if(O){b-=O.x,A-=O.y;var D=O.data.cut;if(b+=D.x,A+=D.y,b>=D.x&&b<D.r&&A>=D.y&&A<D.b){var B=this._tempContext;B.clearRect(0,0,1,1),B.drawImage(O.source.image,b,A,1,1,0,0,1,1);var G=B.getImageData(0,0,1,1);return new l(G.data[0],G.data[1],G.data[2],G.data[3])}}return null},getPixelAlpha:function(b,A,L,R){var O=this.getFrame(L,R);if(O){b-=O.x,A-=O.y;var D=O.data.cut;if(b+=D.x,A+=D.y,b>=D.x&&b<D.r&&A>=D.y&&A<D.b){var B=this._tempContext;B.clearRect(0,0,1,1),B.drawImage(O.source.image,b,A,1,1,0,0,1,1);var G=B.getImageData(0,0,1,1);return G.data[3]}}return null},setTexture:function(b,A,L){return this.list[A]&&(b.texture=this.list[A],b.frame=b.texture.get(L)),b},renameTexture:function(b,A){var L=this.get(b);return L&&b!==A?(L.key=A,this.list[A]=L,delete this.list[b],!0):!1},each:function(b,A){for(var L=[null],R=1;R<arguments.length;R++)L.push(arguments[R]);for(var O in this.list)L[0]=this.list[O],b.apply(A,L)},resetStamp:function(b,A){b===void 0&&(b=1),A===void 0&&(A=16777215);var L=this.stamp;return L.setCrop(),L.setPosition(0),L.setAngle(0),L.setScale(1),L.setAlpha(b),L.setTint(A),L},destroy:function(){for(var b in this.list)this.list[b].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,u.remove(this._tempCanvas)}});a.exports=M},32547:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),y=e(56694),d=e(28621),l=e(27394),h=new y({initialize:function(n,v,o,c,m){m===void 0&&(m=!1);var p=n.manager.game;this.renderer=p.renderer,this.texture=n,this.source=v,this.image=v.compressed?null:v,this.compressionAlgorithm=v.compressed?v.format:null,this.resolution=1,this.width=o||v.naturalWidth||v.videoWidth||v.width||0,this.height=c||v.naturalHeight||v.videoHeight||v.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=v instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&v instanceof HTMLVideoElement,this.isRenderTexture=v.type==="RenderTexture"||v.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&v instanceof WebGLTexture,this.isPowerOf2=d(this.width,this.height),this.glTexture=null,this.flipY=m,this.init(p)},init:function(r){var n=this.renderer;if(n){var v=this.source;if(n.gl){var o=this.image,c=this.flipY,m=this.width,p=this.height,g=this.scaleMode;this.isCanvas?this.glTexture=n.createCanvasTexture(o,!1,c):this.isVideo?this.glTexture=n.createVideoTexture(o,!1,c):this.isRenderTexture?this.glTexture=n.createTextureFromSource(null,m,p,g):this.isGLTexture?this.glTexture=v:this.compressionAlgorithm?this.glTexture=n.createTextureFromSource(v):this.glTexture=n.createTextureFromSource(o,m,p,g)}else this.isRenderTexture&&(this.image=v.canvas)}r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return r===void 0&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer,n=this.image,v=this.flipY,o=r.gl;o&&this.isCanvas?this.glTexture=r.updateCanvasTexture(n,this.glTexture,v):o&&this.isVideo&&(this.glTexture=r.updateVideoTexture(n,this.glTexture,v))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&u.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});a.exports=h},65154:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LINEAR:0,NEAREST:1};a.exports=T},49644:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addtexture"},29569:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="addtexture-"},60079:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="onerror"},72665:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="onload"},93006:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="ready"},69018:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removetexture"},85549:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="removetexture-"},38203:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),y=e(65154),d={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:y,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};d=u(!1,d,y),a.exports=d},35082:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(!y.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var d=e.source[u];e.add("__BASE",u,0,0,d.width,d.height);for(var l=y.getElementsByTagName("SubTexture"),h,r=0;r<l.length;r++){var n=l[r].attributes,v=n.name.value,o=parseInt(n.x.value,10),c=parseInt(n.y.value,10),m=parseInt(n.width.value,10),p=parseInt(n.height.value,10);if(h=e.add(v,u,o,c,m,p),n.frameX){var g=Math.abs(parseInt(n.frameX.value,10)),x=Math.abs(parseInt(n.frameY.value,10)),E=parseInt(n.frameWidth.value,10),P=parseInt(n.frameHeight.value,10);h.setTrim(m,p,g,x,E,P)}}return e};a.exports=T},83332:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.source[u];return e.add("__BASE",u,0,0,y.width,y.height),e};a.exports=T},21560:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.source[u];return e.add("__BASE",u,0,0,y.width,y.height),e};a.exports=T},64423:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),y=function(d,l,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=d.source[l];d.add("__BASE",l,0,0,r.width,r.height);for(var n=Array.isArray(h.textures)?h.textures[l].frames:h.frames,v,o=0;o<n.length;o++){var c=n[o];if(v=d.add(c.filename,l,c.frame.x,c.frame.y,c.frame.w,c.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+c.filename);continue}c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var m=c.anchor||c.pivot;m&&(v.customPivot=!0,v.pivotX=m.x,v.pivotY=m.y),v.customData=u(c)}for(var p in h)p!=="frames"&&(Array.isArray(h[p])?d.customData[p]=h[p].slice(0):d.customData[p]=h[p]);return d};a.exports=y},17264:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),y=function(d,l,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=d.source[l];d.add("__BASE",l,0,0,r.width,r.height);var n=h.frames,v;for(var o in n)if(!!n.hasOwnProperty(o)){var c=n[o];if(v=d.add(o,l,c.frame.x,c.frame.y,c.frame.w,c.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+o);continue}c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var m=c.anchor||c.pivot;m&&(v.customPivot=!0,v.pivotX=m.x,v.pivotY=m.y),v.customData=u(c)}for(var p in h)p!=="frames"&&(Array.isArray(h[p])?d.customData[p]=h[p].slice(0):d.customData[p]=h[p]);return d};a.exports=y},67409:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=[171,75,84,88,32,49,49,187,13,10,26,10],y,d=new Uint8Array(e,0,12);for(y=0;y<d.length;y++)if(d[y]!==u[y]){console.warn("KTXParser - Invalid file format");return}var l=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(e,12,13*l),r=h.getUint32(0,!0)===67305985,n=h.getUint32(1*l,r);if(n!==0){console.warn("KTXParser - Only compressed formats supported");return}var v=h.getUint32(4*l,r),o=h.getUint32(6*l,r),c=h.getUint32(7*l,r),m=Math.max(1,h.getUint32(11*l,r)),p=h.getUint32(12*l,r),g=new Array(m),x=12+13*4+p,E=o,P=c;for(y=0;y<m;y++){var S=new Int32Array(e,x,1)[0];x+=4,g[y]={data:new Uint8Array(e,x,S),width:E,height:P},E=Math.max(1,E>>1),P=Math.max(1,P>>1),x+=S}return{mipmaps:g,width:o,height:c,internalFormat:v,compressed:!0,generateMipmap:!1}};a.exports=T},24904:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(b,A,L,R,O,D,B){return B===void 0&&(B=16),Math.floor((b+L)/O)*Math.floor((A+R)/D)*B}function e(b,A){return b=Math.max(b,16),A=Math.max(A,8),b*A/4}function u(b,A){return b=Math.max(b,8),A=Math.max(A,8),b*A/2}function y(b,A){return T(b,A,3,3,4,4,8)}function d(b,A){return T(b,A,3,3,4,4)}function l(b,A){return T(b,A,4,3,5,4)}function h(b,A){return T(b,A,4,4,5,5)}function r(b,A){return T(b,A,5,4,6,5)}function n(b,A){return T(b,A,5,5,6,6)}function v(b,A){return T(b,A,7,4,8,5)}function o(b,A){return T(b,A,7,5,8,6)}function c(b,A){return T(b,A,7,7,8,8)}function m(b,A){return T(b,A,9,4,10,5)}function p(b,A){return T(b,A,9,5,10,6)}function g(b,A){return T(b,A,9,7,10,8)}function x(b,A){return T(b,A,9,9,10,10)}function E(b,A){return T(b,A,11,9,12,10)}function P(b,A){return T(b,A,11,11,12,12)}var S={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:u,glFormat:35840},3:{sizeFunc:u,glFormat:35842},6:{sizeFunc:y,glFormat:36196},7:{sizeFunc:y,glFormat:33776},8:{sizeFunc:d,glFormat:33777},9:{sizeFunc:d,glFormat:33778},11:{sizeFunc:d,glFormat:33779},22:{sizeFunc:y,glFormat:37492},23:{sizeFunc:d,glFormat:37496},24:{sizeFunc:y,glFormat:37494},25:{sizeFunc:y,glFormat:37488},26:{sizeFunc:d,glFormat:37490},27:{sizeFunc:d,glFormat:37808},28:{sizeFunc:l,glFormat:37809},29:{sizeFunc:h,glFormat:37810},30:{sizeFunc:r,glFormat:37811},31:{sizeFunc:n,glFormat:37812},32:{sizeFunc:v,glFormat:37813},33:{sizeFunc:o,glFormat:37814},34:{sizeFunc:c,glFormat:37815},35:{sizeFunc:m,glFormat:37816},36:{sizeFunc:p,glFormat:37817},37:{sizeFunc:g,glFormat:37818},38:{sizeFunc:x,glFormat:37819},39:{sizeFunc:E,glFormat:37820},40:{sizeFunc:P,glFormat:37821}},M=function(b){for(var A=new Uint32Array(b,0,13),L=A[2],R=S[L].glFormat,O=S[L].sizeFunc,D=A[11],B=A[7],G=A[6],z=52+A[12],X=new Uint8Array(b,z),U=new Array(D),V=0,N=B,W=G,F=0;F<D;F++){var I=O(N,W);U[F]={data:new Uint8Array(X.buffer,X.byteOffset+V,I),width:N,height:W},N=Math.max(1,N>>1),W=Math.max(1,W>>1),V+=I}return{mipmaps:U,width:B,height:G,internalFormat:R,compressed:!0,generateMipmap:!1}};a.exports=M},6143:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=function(d,l,h,r,n,v,o){var c=u(o,"frameWidth",null),m=u(o,"frameHeight",c);if(c===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var p=d.source[l];d.add("__BASE",l,0,0,p.width,p.height);var g=u(o,"startFrame",0),x=u(o,"endFrame",-1),E=u(o,"margin",0),P=u(o,"spacing",0),S=Math.floor((n-E+P)/(c+P)),M=Math.floor((v-E+P)/(m+P)),b=S*M;b===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",d.key),(g>b||g<-b)&&(g=0),g<0&&(g=b+g),(x===-1||x>b||x<g)&&(x=b);for(var A=E,L=E,R=0,O=0,D=0,B=0;B<b;B++){R=0,O=0;var G=A+c,z=L+m;G>n&&(R=G-n),z>v&&(O=z-v),B>=g&&B<=x&&(d.add(D,l,h+A,r+L,c-R,m-O),D++),A+=c+P,A+c>n&&(A=E,L+=m+P)}return d};a.exports=y},20030:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=function(d,l,h){var r=u(h,"frameWidth",null),n=u(h,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=d.source[0];d.add("__BASE",0,0,0,v.width,v.height),u(h,"startFrame",0),u(h,"endFrame",-1);for(var o=u(h,"margin",0),c=u(h,"spacing",0),m=l.cutX,p=l.cutY,g=l.cutWidth,x=l.cutHeight,E=l.realWidth,P=l.realHeight,S=Math.floor((E-o+c)/(r+c)),M=Math.floor((P-o+c)/(n+c)),b=l.x,A=r-b,L=r-(E-g-b),R=l.y,O=n-R,D=n-(P-x-R),B,G=o,z=o,X=0,U=0,V=0;V<M;V++){for(var N=V===0,W=V===M-1,F=0;F<S;F++){var I=F===0,k=F===S-1;if(B=d.add(X,U,m+G,p+z,r,n),I||N||k||W){var Y=I?b:0,H=N?R:0,K=0,j=0;I&&(K+=r-A),k&&(K+=r-L),N&&(j+=n-O),W&&(j+=n-D);var J=r-K,Q=n-j;B.cutWidth=J,B.cutHeight=Q,B.setTrim(r,n,Y,H,J,Q)}G+=c,I?G+=A:k?G+=L:G+=r,X++}G=o,z+=c,N?z+=O:W?z+=D:z+=n}return d};a.exports=y},89187:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=0,e=function(y,d,l,h){var r=T-h.y-h.height;y.add(l,d,h.x,r,h.width,h.height)},u=function(y,d,l){var h=y.source[d];y.add("__BASE",d,0,0,h.width,h.height),T=h.height;for(var r=l.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,v="",o="",c={x:0,y:0,width:0,height:0},m=0;m<r.length;m++){var p=r[m].match(n);if(!!p){var g=p[1]==="- ",x=p[2],E=p[3];if(g&&(o!==v&&(e(y,d,o,c),v=o),c={x:0,y:0,width:0,height:0}),x==="name"){o=E;continue}switch(x){case"x":case"y":case"width":case"height":c[x]=parseInt(E,10);break}}}return o!==v&&e(y,d,o,c),y};a.exports=u},69150:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l,h,r,n,v,o,c){(r===void 0||r<=0)&&(r=32),(n===void 0||n<=0)&&(n=32),v===void 0&&(v=0),o===void 0&&(o=0),this.name=l,this.firstgid=h|0,this.imageWidth=r|0,this.imageHeight=n|0,this.imageMargin=v|0,this.imageSpacing=o|0,this.properties=c||{},this.images=[],this.total=0},containsImageIndex:function(d){return d>=this.firstgid&&d<this.firstgid+this.total},addImage:function(d,l){return this.images.push({gid:d,image:l}),this.total++,this}});a.exports=y},46422:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=new u({initialize:function(l){if(this.gids=[],l!==void 0)for(var h=0;h<l.length;++h)for(var r=l[h],n=0;n<r.total;++n)this.gids[r.firstgid+n]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(d){this.gids=d?this._gids:void 0}},getTypeIncludingTile:function(d){if(d.type!==void 0&&d.type!=="")return d.type;if(!(!this.gids||d.gid===void 0)){var l=this.gids[d.gid];if(!!l){var h=l.getTileData(d.gid);if(!!h)return h.type}}},setTextureAndFrame:function(d,l,h,r){if(l===null&&this.gids&&r.gid!==void 0){var n=this.gids[r.gid];n&&(l===null&&n.image!==void 0&&(l=n.image.key),h===null&&(h=r.gid-n.firstgid),d.scene.textures.getFrame(l,h)||(l=null,h=null))}d.setTexture(l,h)},setPropertiesFromTiledObject:function(d,l){if(this.gids!==void 0&&l.gid!==void 0){var h=this.gids[l.gid];h!==void 0&&this.setFromJSON(d,h.getTileProperties(l.gid))}this.setFromJSON(d,l.properties)},setFromJSON:function(d,l){if(!!l){if(Array.isArray(l)){l.forEach(function(r){d.setData(r.name,r.value)});return}for(var h in l)d[h]!==void 0?d[h]=l[h]:d.setData(h,l[h])}}});a.exports=y},15043:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),y=e(16586),d=e(90715),l=e(89797),h=function(r,n,v,o,c,m,p,g){v===void 0&&(v=32),o===void 0&&(o=32),c===void 0&&(c=10),m===void 0&&(m=10),g===void 0&&(g=!1);var x=null;if(Array.isArray(p)){var E=n!==void 0?n:"map";x=d(E,u.ARRAY_2D,p,v,o,g)}else if(n!==void 0){var P=r.cache.tilemap.get(n);P?x=d(n,P.format,P.data,v,o,g):console.warn("No map data found for key "+n)}return x===null&&(x=new y({tileWidth:v,tileHeight:o,width:c,height:m})),new l(r,x)};a.exports=h},29633:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(12920),l=e(28699),h=e(66658),r=new u({Mixins:[y.Alpha,y.Flip,y.Visible],initialize:function(v,o,c,m,p,g,x,E){this.layer=v,this.index=o,this.x=c,this.y=m,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=x!==void 0?x:p,this.baseHeight=E!==void 0?E:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(n,v){return!(n<this.pixelX||v<this.pixelY||n>this.right||v>this.bottom)},copy:function(n){return this.index=n.index,this.alpha=n.alpha,this.properties=l(n.properties),this.visible=n.visible,this.setFlip(n.flipX,n.flipY),this.tint=n.tint,this.rotation=n.rotation,this.collideUp=n.collideUp,this.collideDown=n.collideDown,this.collideLeft=n.collideLeft,this.collideRight=n.collideRight,this.collisionCallback=n.collisionCallback,this.collisionCallbackContext=n.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(n){var v=this.tilemapLayer;if(v){var o=v.tileToWorldXY(this.x,this.y,void 0,n);return o.x}return this.x*this.baseWidth},getRight:function(n){var v=this.tilemapLayer;return v?this.getLeft(n)+this.width*v.scaleX:this.getLeft(n)+this.width},getTop:function(n){var v=this.tilemapLayer;if(v){var o=v.tileToWorldXY(this.x,this.y,void 0,n);return o.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(n){var v=this.tilemapLayer;return v?this.getTop(n)+this.height*v.scaleY:this.getTop(n)+this.height},getBounds:function(n,v){return v===void 0&&(v=new h),v.x=this.getLeft(n),v.y=this.getTop(n),v.width=this.getRight(n)-v.x,v.height=this.getBottom(n)-v.y,v},getCenterX:function(n){return(this.getLeft(n)+this.getRight(n))/2},getCenterY:function(n){return(this.getTop(n)+this.getBottom(n))/2},intersects:function(n,v,o,c){return!(o<=this.pixelX||c<=this.pixelY||n>=this.right||v>=this.bottom)},isInteresting:function(n,v){return n&&v?this.canCollide||this.hasInterestingFace:n?this.collides:v?this.hasInterestingFace:!1},resetCollision:function(n){if(n===void 0&&(n=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,n){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(n,v,o,c,m){if(v===void 0&&(v=n),o===void 0&&(o=n),c===void 0&&(c=n),m===void 0&&(m=!0),this.collideLeft=n,this.collideRight=v,this.collideUp=o,this.collideDown=c,this.faceLeft=n,this.faceRight=v,this.faceTop=o,this.faceBottom=c,m){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(n,v){return n===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=n,this.collisionCallbackContext=v),this},setSize:function(n,v,o,c){return n!==void 0&&(this.width=n),v!==void 0&&(this.height=v),o!==void 0&&(this.baseWidth=o),c!==void 0&&(this.baseHeight=c),this.updatePixelXY(),this},updatePixelXY:function(){var n=this.layer.orientation;if(n===d.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(n===d.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(n===d.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(n===d.HEXAGONAL){var v=this.layer.hexSideLength,o=(this.baseHeight-v)/2+v;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*o}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var n=this.layer.tilemapLayer;if(n){var v=n.gidMap[this.index];if(v)return v}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var n=this.tilemapLayer;return n?n.tilemap:null}}});a.exports=r},89797:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(75606),d=e(93560),l=e(72632),h=e(94990),r=e(46422),n=e(12920),v=e(52257),o=e(72677),c=e(13747),m=e(29633),p=e(5047),g=e(87177),x=e(47975),E=new u({initialize:function(S,M){this.scene=S,this.tileWidth=M.tileWidth,this.tileHeight=M.tileHeight,this.width=M.width,this.height=M.height,this.orientation=M.orientation,this.renderOrder=M.renderOrder,this.format=M.format,this.version=M.version,this.properties=M.properties,this.widthInPixels=M.widthInPixels,this.heightInPixels=M.heightInPixels,this.imageCollections=M.imageCollections,this.images=M.images,this.layers=M.layers,this.tilesets=M.tilesets,this.objects=M.objects,this.currentLayerIndex=0,this.hexSideLength=M.hexSideLength;var b=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(b),WorldToTileX:p.GetWorldToTileXFunction(b),WorldToTileY:p.GetWorldToTileYFunction(b),TileToWorldXY:p.GetTileToWorldXYFunction(b),TileToWorldX:p.GetTileToWorldXFunction(b),TileToWorldY:p.GetTileToWorldYFunction(b),GetTileCorners:p.GetTileCornersFunction(b)}},setRenderOrder:function(P){var S=["right-down","left-down","right-up","left-up"];return typeof P=="number"&&(P=S[P]),S.indexOf(P)>-1&&(this.renderOrder=P),this},addTilesetImage:function(P,S,M,b,A,L,R){if(P===void 0)return null;if(S==null&&(S=P),!this.scene.sys.textures.exists(S))return console.warn("Invalid Tileset Image: "+S),null;var O=this.scene.sys.textures.get(S),D=this.getTilesetIndex(P);if(D===null&&this.format===d.TILED_JSON)return console.warn("No data found for Tileset: "+P),null;var B=this.tilesets[D];return B?(B.setTileSize(M,b),B.setSpacing(A,L),B.setImage(O),B):(M===void 0&&(M=this.tileWidth),b===void 0&&(b=this.tileHeight),A===void 0&&(A=0),L===void 0&&(L=0),R===void 0&&(R=0),B=new x(P,R,M,b,A,L),B.setImage(O),this.tilesets.push(B),B)},copy:function(P,S,M,b,A,L,R,O){return O=this.getLayer(O),O!==null?(p.Copy(P,S,M,b,A,L,R,O),this):null},createBlankLayer:function(P,S,M,b,A,L,R,O){M===void 0&&(M=0),b===void 0&&(b=0),A===void 0&&(A=this.width),L===void 0&&(L=this.height),R===void 0&&(R=this.tileWidth),O===void 0&&(O=this.tileHeight);var D=this.getLayerIndex(P);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+P),null;for(var B=new h({name:P,tileWidth:R,tileHeight:O,width:A,height:L,orientation:this.orientation}),G,z=0;z<L;z++){G=[];for(var X=0;X<A;X++)G.push(new m(B,-1,X,z,R,O,this.tileWidth,this.tileHeight));B.data.push(G)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var U=new g(this.scene,this,this.currentLayerIndex,S,M,b);return U.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(U),U},createLayer:function(P,S,M,b){var A=this.getLayerIndex(P);if(A===null)return console.warn("Invalid Tilemap Layer ID: "+P),typeof P=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var L=this.layers[A];if(L.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+P),null;this.currentLayerIndex=A,M===void 0&&(M=L.x),b===void 0&&(b=L.y);var R=new g(this.scene,this,A,S,M,b);return R.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(R),R},createFromObjects:function(P,S,M){M===void 0&&(M=!0);var b=[],A=this.getObjectLayer(P);if(!A)return console.warn("createFromObjects: Invalid objectLayerName given: "+P),b;var L=new r(M?this.tilesets:void 0);Array.isArray(S)||(S=[S]);for(var R=A.objects,O=0;O<S.length;O++){var D=S[O],B=l(D,"id",null),G=l(D,"gid",null),z=l(D,"name",null),X=l(D,"type",null);L.enabled=!l(D,"ignoreTileset",null);for(var U,V=[],N=0;N<R.length;N++)U=R[N],(B===null&&G===null&&z===null&&X===null||B!==null&&U.id===B||G!==null&&U.gid===G||z!==null&&U.name===z||X!==null&&L.getTypeIncludingTile(U)===X)&&V.push(U);for(var W=l(D,"classType",c),F=l(D,"scene",this.scene),I=l(D,"container",null),k=l(D,"key",null),Y=l(D,"frame",null),H=0;H<V.length;H++){U=V[H];var K=new W(F);if(K.setName(U.name),K.setPosition(U.x,U.y),L.setTextureAndFrame(K,k,Y,U),U.width&&(K.displayWidth=U.width),U.height&&(K.displayHeight=U.height),this.orientation===n.ISOMETRIC){var j=this.tileWidth/this.tileHeight,J={x:K.x-K.y,y:(K.x+K.y)/j};K.x=J.x,K.y=J.y}var Q={x:K.originX*U.width,y:(K.originY-(U.gid?1:0))*U.height};if(U.rotation){var Z=y(U.rotation);v(Q,Z),K.rotation=Z}K.x+=Q.x,K.y+=Q.y,(U.flippedHorizontal!==void 0||U.flippedVertical!==void 0)&&K.setFlip(U.flippedHorizontal,U.flippedVertical),U.visible||(K.visible=!1),L.setPropertiesFromTiledObject(K,U),I?I.add(K):F.add.existing(K),b.push(K)}}return b},createFromTiles:function(P,S,M,b,A,L){return L=this.getLayer(L),L===null?null:p.CreateFromTiles(P,S,M,b,A,L)},fill:function(P,S,M,b,A,L,R){return L===void 0&&(L=!0),R=this.getLayer(R),R===null?null:(p.Fill(P,S,M,b,A,L,R),this)},filterObjects:function(P,S,M){if(typeof P=="string"){var b=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+b),null}return P.objects.filter(S,M)},filterTiles:function(P,S,M,b,A,L,R,O){return O=this.getLayer(O),O===null?null:p.FilterTiles(P,S,M,b,A,L,R,O)},findByIndex:function(P,S,M,b){return b=this.getLayer(b),b===null?null:p.FindByIndex(P,S,M,b)},findObject:function(P,S,M){if(typeof P=="string"){var b=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+b),null}return P.objects.find(S,M)||null},findTile:function(P,S,M,b,A,L,R,O){return O=this.getLayer(O),O===null?null:p.FindTile(P,S,M,b,A,L,R,O)},forEachTile:function(P,S,M,b,A,L,R,O){return O=this.getLayer(O),O===null?null:(p.ForEachTile(P,S,M,b,A,L,R,O),this)},getImageIndex:function(P){return this.getIndex(this.images,P)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(P){return P.name})},getIndex:function(P,S){for(var M=0;M<P.length;M++)if(P[M].name===S)return M;return null},getLayer:function(P){var S=this.getLayerIndex(P);return S!==null?this.layers[S]:null},getObjectLayer:function(P){var S=this.getIndex(this.objects,P);return S!==null?this.objects[S]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(P){return P.name})},getLayerIndex:function(P){return P===void 0?this.currentLayerIndex:typeof P=="string"?this.getLayerIndexByName(P):typeof P=="number"&&P<this.layers.length?P:P instanceof g?P.layerIndex:null},getLayerIndexByName:function(P){return this.getIndex(this.layers,P)},getTileAt:function(P,S,M,b){return b=this.getLayer(b),b===null?null:p.GetTileAt(P,S,M,b)},getTileAtWorldXY:function(P,S,M,b,A){return A=this.getLayer(A),A===null?null:p.GetTileAtWorldXY(P,S,M,b,A)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(P){return P.name})},getTilesWithin:function(P,S,M,b,A,L){return L=this.getLayer(L),L===null?null:p.GetTilesWithin(P,S,M,b,A,L)},getTilesWithinShape:function(P,S,M,b){return b=this.getLayer(b),b===null?null:p.GetTilesWithinShape(P,S,M,b)},getTilesWithinWorldXY:function(P,S,M,b,A,L,R){return R=this.getLayer(R),R===null?null:p.GetTilesWithinWorldXY(P,S,M,b,A,L,R)},getTileset:function(P){var S=this.getIndex(this.tilesets,P);return S!==null?this.tilesets[S]:null},getTilesetIndex:function(P){return this.getIndex(this.tilesets,P)},hasTileAt:function(P,S,M){return M=this.getLayer(M),M===null?null:p.HasTileAt(P,S,M)},hasTileAtWorldXY:function(P,S,M,b){return b=this.getLayer(b),b===null?null:p.HasTileAtWorldXY(P,S,M,b)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(P){this.setLayer(P)}},putTileAt:function(P,S,M,b,A){return b===void 0&&(b=!0),A=this.getLayer(A),A===null?null:p.PutTileAt(P,S,M,b,A)},putTileAtWorldXY:function(P,S,M,b,A,L){return b===void 0&&(b=!0),L=this.getLayer(L),L===null?null:p.PutTileAtWorldXY(P,S,M,b,A,L)},putTilesAt:function(P,S,M,b,A){return b===void 0&&(b=!0),A=this.getLayer(A),A===null?null:(p.PutTilesAt(P,S,M,b,A),this)},randomize:function(P,S,M,b,A,L){return L=this.getLayer(L),L===null?null:(p.Randomize(P,S,M,b,A,L),this)},calculateFacesAt:function(P,S,M){return M=this.getLayer(M),M===null?null:(p.CalculateFacesAt(P,S,M),this)},calculateFacesWithin:function(P,S,M,b,A){return A=this.getLayer(A),A===null?null:(p.CalculateFacesWithin(P,S,M,b,A),this)},removeLayer:function(P){var S=this.getLayerIndex(P);if(S!==null){o(this.layers,S);for(var M=S;M<this.layers.length;M++)this.layers[M].tilemapLayer&&this.layers[M].tilemapLayer.layerIndex--;return this.currentLayerIndex===S&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(P){var S=this.getLayerIndex(P);return S!==null?(P=this.layers[S],P.tilemapLayer.destroy(),o(this.layers,S),this.currentLayerIndex===S&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var P=this.layers,S=0;S<P.length;S++)P[S].tilemapLayer&&P[S].tilemapLayer.destroy(!1);return P.length=0,this.currentLayerIndex=0,this},removeTile:function(P,S,M){S===void 0&&(S=-1),M===void 0&&(M=!0);var b=[];Array.isArray(P)||(P=[P]);for(var A=0;A<P.length;A++){var L=P[A];b.push(this.removeTileAt(L.x,L.y,!0,M,L.tilemapLayer)),S>-1&&this.putTileAt(S,L.x,L.y,M,L.tilemapLayer)}return b},removeTileAt:function(P,S,M,b,A){return M===void 0&&(M=!0),b===void 0&&(b=!0),A=this.getLayer(A),A===null?null:p.RemoveTileAt(P,S,M,b,A)},removeTileAtWorldXY:function(P,S,M,b,A,L){return M===void 0&&(M=!0),b===void 0&&(b=!0),L=this.getLayer(L),L===null?null:p.RemoveTileAtWorldXY(P,S,M,b,A,L)},renderDebug:function(P,S,M){return M=this.getLayer(M),M===null?null:(this.orientation===n.ORTHOGONAL&&p.RenderDebug(P,S,M),this)},renderDebugFull:function(P,S){for(var M=this.layers,b=0;b<M.length;b++)p.RenderDebug(P,S,M[b]);return this},replaceByIndex:function(P,S,M,b,A,L,R){return R=this.getLayer(R),R===null?null:(p.ReplaceByIndex(P,S,M,b,A,L,R),this)},setCollision:function(P,S,M,b,A){return S===void 0&&(S=!0),M===void 0&&(M=!0),A===void 0&&(A=!0),b=this.getLayer(b),b===null?null:(p.SetCollision(P,S,M,b,A),this)},setCollisionBetween:function(P,S,M,b,A){return M===void 0&&(M=!0),b===void 0&&(b=!0),A=this.getLayer(A),A===null?null:(p.SetCollisionBetween(P,S,M,b,A),this)},setCollisionByProperty:function(P,S,M,b){return S===void 0&&(S=!0),M===void 0&&(M=!0),b=this.getLayer(b),b===null?null:(p.SetCollisionByProperty(P,S,M,b),this)},setCollisionByExclusion:function(P,S,M,b){return S===void 0&&(S=!0),M===void 0&&(M=!0),b=this.getLayer(b),b===null?null:(p.SetCollisionByExclusion(P,S,M,b),this)},setCollisionFromCollisionGroup:function(P,S,M){return P===void 0&&(P=!0),S===void 0&&(S=!0),M=this.getLayer(M),M===null?null:(p.SetCollisionFromCollisionGroup(P,S,M),this)},setTileIndexCallback:function(P,S,M,b){return b=this.getLayer(b),b===null?null:(p.SetTileIndexCallback(P,S,M,b),this)},setTileLocationCallback:function(P,S,M,b,A,L,R){return R=this.getLayer(R),R===null?null:(p.SetTileLocationCallback(P,S,M,b,A,L,R),this)},setLayer:function(P){var S=this.getLayerIndex(P);return S!==null&&(this.currentLayerIndex=S),this},setBaseTileSize:function(P,S){this.tileWidth=P,this.tileHeight=S,this.widthInPixels=this.width*P,this.heightInPixels=this.height*S;for(var M=0;M<this.layers.length;M++){this.layers[M].baseTileWidth=P,this.layers[M].baseTileHeight=S;for(var b=this.layers[M].data,A=this.layers[M].width,L=this.layers[M].height,R=0;R<L;R++)for(var O=0;O<A;O++){var D=b[R][O];D!==null&&D.setSize(void 0,void 0,P,S)}}return this},setLayerTileSize:function(P,S,M){if(M=this.getLayer(M),M===null)return this;M.tileWidth=P,M.tileHeight=S;for(var b=M.data,A=M.width,L=M.height,R=0;R<L;R++)for(var O=0;O<A;O++){var D=b[R][O];D!==null&&D.setSize(P,S)}return this},shuffle:function(P,S,M,b,A){return A=this.getLayer(A),A===null?null:(p.Shuffle(P,S,M,b,A),this)},swapByIndex:function(P,S,M,b,A,L,R){return R=this.getLayer(R),R===null?null:(p.SwapByIndex(P,S,M,b,A,L,R),this)},tileToWorldX:function(P,S,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldX(P,S,M)},tileToWorldY:function(P,S,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldY(P,S,M)},tileToWorldXY:function(P,S,M,b,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldXY(P,S,M,b,A)},getTileCorners:function(P,S,M,b){return b=this.getLayer(b),b===null?null:this._convert.GetTileCorners(P,S,M,b)},weightedRandomize:function(P,S,M,b,A,L){return L=this.getLayer(L),L===null?null:(p.WeightedRandomize(S,M,b,A,P,L),this)},worldToTileX:function(P,S,M,b){return b=this.getLayer(b),b===null?null:this._convert.WorldToTileX(P,S,M,b)},worldToTileY:function(P,S,M,b){return b=this.getLayer(b),b===null?null:this._convert.WorldToTileY(P,S,M,b)},worldToTileXY:function(P,S,M,b,A,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileXY(P,S,M,b,A,L)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});a.exports=E},4843:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),y=e(15043);u.register("tilemap",function(d){var l=d!==void 0?d:{};return y(this.scene,l.key,l.tileWidth,l.tileHeight,l.width,l.height,l.data,l.insertNull)})},37940:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),y=e(15043);u.register("tilemap",function(d,l,h,r,n,v,o){return d===null&&(d=void 0),l===null&&(l=void 0),h===null&&(h=void 0),r===null&&(r=void 0),n===null&&(n=void 0),y(this.scene,d,l,h,r,n,v,o)})},87177:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(64937),d=e(89980),l=e(5047),h=e(96193),r=e(93736),n=new u({Extends:d,Mixins:[y.Alpha,y.BlendMode,y.ComputedSize,y.Depth,y.Flip,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.Transform,y.Visible,y.ScrollFactor,h],initialize:function(o,c,m,p,g,x){d.call(this,o,"TilemapLayer"),this.isTilemap=!0,this.tilemap=c,this.layerIndex=m,this.layer=c.layers[m],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new r,this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,x),this.setOrigin(0,0),this.setSize(c.tileWidth*this.layer.width,c.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(v){var o=[],c=[],m=this.tilemap;Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=v[p];if(typeof g=="string"&&(g=m.getTileset(g)),g){c.push(g);for(var x=g.firstgid,E=0;E<g.total;E++)o[x+E]=g}}this.gidMap=o,this.tileset=c},setRenderOrder:function(v){var o=["right-down","left-down","right-up","left-up"];return typeof v=="string"&&(v=o.indexOf(v)),v>=0&&v<4&&(this._renderOrder=v),this},calculateFacesAt:function(v,o){return l.CalculateFacesAt(v,o,this.layer),this},calculateFacesWithin:function(v,o,c,m){return l.CalculateFacesWithin(v,o,c,m,this.layer),this},createFromTiles:function(v,o,c,m,p){return l.CreateFromTiles(v,o,c,m,p,this.layer)},cull:function(v){return this.cullCallback(this.layer,v,this.culledTiles,this._renderOrder)},copy:function(v,o,c,m,p,g,x){return l.Copy(v,o,c,m,p,g,x,this.layer),this},fill:function(v,o,c,m,p,g){return l.Fill(v,o,c,m,p,g,this.layer),this},filterTiles:function(v,o,c,m,p,g,x){return l.FilterTiles(v,o,c,m,p,g,x,this.layer)},findByIndex:function(v,o,c){return l.FindByIndex(v,o,c,this.layer)},findTile:function(v,o,c,m,p,g,x){return l.FindTile(v,o,c,m,p,g,x,this.layer)},forEachTile:function(v,o,c,m,p,g,x){return l.ForEachTile(v,o,c,m,p,g,x,this.layer),this},setTint:function(v,o,c,m,p,g){v===void 0&&(v=16777215);var x=function(E){E.tint=v};return this.forEachTile(x,this,o,c,m,p,g)},getTileAt:function(v,o,c){return l.GetTileAt(v,o,c,this.layer)},getTileAtWorldXY:function(v,o,c,m){return l.GetTileAtWorldXY(v,o,c,m,this.layer)},getIsoTileAtWorldXY:function(v,o,c,m,p){c===void 0&&(c=!0);var g=this.tempVec;return l.IsometricWorldToTileXY(v,o,!0,g,p,this.layer,c),this.getTileAt(g.x,g.y,m)},getTilesWithin:function(v,o,c,m,p){return l.GetTilesWithin(v,o,c,m,p,this.layer)},getTilesWithinShape:function(v,o,c){return l.GetTilesWithinShape(v,o,c,this.layer)},getTilesWithinWorldXY:function(v,o,c,m,p,g){return l.GetTilesWithinWorldXY(v,o,c,m,p,g,this.layer)},hasTileAt:function(v,o){return l.HasTileAt(v,o,this.layer)},hasTileAtWorldXY:function(v,o,c){return l.HasTileAtWorldXY(v,o,c,this.layer)},putTileAt:function(v,o,c,m){return l.PutTileAt(v,o,c,m,this.layer)},putTileAtWorldXY:function(v,o,c,m,p){return l.PutTileAtWorldXY(v,o,c,m,p,this.layer)},putTilesAt:function(v,o,c,m){return l.PutTilesAt(v,o,c,m,this.layer),this},randomize:function(v,o,c,m,p){return l.Randomize(v,o,c,m,p,this.layer),this},removeTileAt:function(v,o,c,m){return l.RemoveTileAt(v,o,c,m,this.layer)},removeTileAtWorldXY:function(v,o,c,m,p){return l.RemoveTileAtWorldXY(v,o,c,m,p,this.layer)},renderDebug:function(v,o){return l.RenderDebug(v,o,this.layer),this},replaceByIndex:function(v,o,c,m,p,g){return l.ReplaceByIndex(v,o,c,m,p,g,this.layer),this},setSkipCull:function(v){return v===void 0&&(v=!0),this.skipCull=v,this},setCullPadding:function(v,o){return v===void 0&&(v=1),o===void 0&&(o=1),this.cullPaddingX=v,this.cullPaddingY=o,this},setCollision:function(v,o,c,m){return l.SetCollision(v,o,c,this.layer,m),this},setCollisionBetween:function(v,o,c,m){return l.SetCollisionBetween(v,o,c,m,this.layer),this},setCollisionByProperty:function(v,o,c){return l.SetCollisionByProperty(v,o,c,this.layer),this},setCollisionByExclusion:function(v,o,c){return l.SetCollisionByExclusion(v,o,c,this.layer),this},setCollisionFromCollisionGroup:function(v,o){return l.SetCollisionFromCollisionGroup(v,o,this.layer),this},setTileIndexCallback:function(v,o,c){return l.SetTileIndexCallback(v,o,c,this.layer),this},setTileLocationCallback:function(v,o,c,m,p,g){return l.SetTileLocationCallback(v,o,c,m,p,g,this.layer),this},shuffle:function(v,o,c,m){return l.Shuffle(v,o,c,m,this.layer),this},swapByIndex:function(v,o,c,m,p,g){return l.SwapByIndex(v,o,c,m,p,g,this.layer),this},tileToWorldX:function(v,o){return this.tilemap.tileToWorldX(v,o,this)},tileToWorldY:function(v,o){return this.tilemap.tileToWorldY(v,o,this)},tileToWorldXY:function(v,o,c,m){return this.tilemap.tileToWorldXY(v,o,c,m,this)},getTileCorners:function(v,o,c){return this.tilemap.getTileCorners(v,o,c,this)},weightedRandomize:function(v,o,c,m,p){return l.WeightedRandomize(o,c,m,p,v,this.layer),this},worldToTileX:function(v,o,c){return this.tilemap.worldToTileX(v,o,c,this)},worldToTileY:function(v,o,c){return this.tilemap.worldToTileY(v,o,c,this)},worldToTileXY:function(v,o,c,m,p){return this.tilemap.worldToTileXY(v,o,c,m,p,this)},destroy:function(v){v===void 0&&(v=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),v&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],d.prototype.destroy.call(this))}});a.exports=n},17394:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(69360),y=new u,d=new u,l=new u,h=function(r,n,v,o){var c=n.cull(v),m=c.length,p=v.alpha*n.alpha;if(!(m===0||p<=0)){var g=y,x=d,E=l;x.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),g.copyFrom(v.matrix);var P=r.currentContext,S=n.gidMap;P.save(),o?(g.multiplyWithOffset(o,-v.scrollX*n.scrollFactorX,-v.scrollY*n.scrollFactorY),x.e=n.x,x.f=n.y,g.multiply(x,E),E.copyToContext(P)):(x.e-=v.scrollX*n.scrollFactorX,x.f-=v.scrollY*n.scrollFactorY,x.copyToContext(P)),(!r.antialias||n.scaleX>1||n.scaleY>1)&&(P.imageSmoothingEnabled=!1);for(var M=0;M<m;M++){var b=c[M],A=S[b.index];if(!!A){var L=A.image.getSourceImage(),R=A.getTileTextureCoordinates(b.index),O=A.tileWidth,D=A.tileHeight;if(!(R===null||O===0||D===0)){var B=O*.5,G=D*.5;R.x+=A.tileOffset.x,R.y+=A.tileOffset.y,P.save(),P.translate(b.pixelX+B,b.pixelY+G),b.rotation!==0&&P.rotate(b.rotation),(b.flipX||b.flipY)&&P.scale(b.flipX?-1:1,b.flipY?-1:1),P.globalAlpha=p*b.alpha,P.drawImage(L,R.x,R.y,O,D,-B,-G,O,D),P.restore()}}}P.restore()}};a.exports=h},96193:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),y=u,d=u;y=e(51395),d=e(17394),a.exports={renderWebGL:y,renderCanvas:d}},51395:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),y=function(d,l,h){var r=l.cull(h),n=r.length,v=h.alpha*l.alpha;if(!(n===0||v<=0)){var o=l.gidMap,c=d.pipelines.set(l.pipeline,l),m=u.getTintAppendFloatAlpha,p=l.scrollFactorX,g=l.scrollFactorY,x=l.x,E=l.y,P=l.scaleX,S=l.scaleY;d.pipelines.preBatch(l);for(var M=0;M<n;M++){var b=r[M],A=o[b.index];if(!!A){var L=A.getTileTextureCoordinates(b.index);if(L!==null){var R=A.glTexture,O=c.setTexture2D(R,l),D=A.tileWidth,B=A.tileHeight,G=L.x,z=L.y,X=A.tileWidth*.5,U=A.tileHeight*.5,V=A.tileOffset.x,N=A.tileOffset.y,W=m(b.tint,v*b.alpha);c.batchTexture(l,R,R.width,R.height,x+b.pixelX*P+(X*P-V),E+b.pixelY*S+(U*S-N),b.width,b.height,P,S,b.rotation,b.flipX,b.flipY,p,g,X,U,G,z,D,B,W,W,W,W,!1,0,0,h,null,!0,O)}}}d.pipelines.postBatch(l)}};a.exports=y},47975:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(93736),d=new u({initialize:function(h,r,n,v,o,c,m,p,g){(n===void 0||n<=0)&&(n=32),(v===void 0||v<=0)&&(v=32),o===void 0&&(o=0),c===void 0&&(c=0),m===void 0&&(m={}),p===void 0&&(p={}),this.name=h,this.firstgid=r,this.tileWidth=n,this.tileHeight=v,this.tileMargin=o,this.tileSpacing=c,this.tileProperties=m,this.tileData=p,this.tileOffset=new y,g!==void 0&&this.tileOffset.set(g.x,g.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(l){return this.containsTileIndex(l)?this.tileProperties[l-this.firstgid]:null},getTileData:function(l){return this.containsTileIndex(l)?this.tileData[l-this.firstgid]:null},getTileCollisionGroup:function(l){var h=this.getTileData(l);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},getTileTextureCoordinates:function(l){return this.containsTileIndex(l)?this.texCoordinates[l-this.firstgid]:null},setImage:function(l){return this.image=l,this.glTexture=l.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(l,h){return l!==void 0&&(this.tileWidth=l),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(l,h){return l!==void 0&&(this.tileMargin=l),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(l,h){var r=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(l-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(r%1!==0||n%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),r=Math.floor(r),n=Math.floor(n),this.rows=r,this.columns=n,this.total=r*n,this.texCoordinates.length=0;for(var v=this.tileMargin,o=this.tileMargin,c=0;c<this.rows;c++){for(var m=0;m<this.columns;m++)this.texCoordinates.push({x:v,y:o}),v+=this.tileWidth+this.tileSpacing;v=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});a.exports=d},92839:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15494),y=function(d,l,h){var r=u(d,l,!0,h),n=u(d,l-1,!0,h),v=u(d,l+1,!0,h),o=u(d-1,l,!0,h),c=u(d+1,l,!0,h),m=r&&r.collides;return m&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),n&&n.collides&&(m&&(r.faceTop=!1),n.faceBottom=!m),v&&v.collides&&(m&&(r.faceBottom=!1),v.faceTop=!m),o&&o.collides&&(m&&(r.faceLeft=!1),o.faceRight=!m),c&&c.collides&&(m&&(r.faceRight=!1),c.faceLeft=!m),r&&!r.collides&&r.resetFaces(),r};a.exports=y},60386:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15494),y=e(50811),d=function(l,h,r,n,v){for(var o=null,c=null,m=null,p=null,g=y(l,h,r,n,null,v),x=0;x<g.length;x++){var E=g[x];E&&(E.collides?(o=u(E.x,E.y-1,!0,v),c=u(E.x,E.y+1,!0,v),m=u(E.x-1,E.y,!0,v),p=u(E.x+1,E.y,!0,v),E.faceTop=!(o&&o.collides),E.faceBottom=!(c&&c.collides),E.faceLeft=!(m&&m.collides),E.faceRight=!(p&&p.collides)):E.resetFaces())}};a.exports=d},13125:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=new u,d=function(l,h,r,n){var v=r.tilemapLayer,o=v.cullPaddingX,c=v.cullPaddingY,m=v.tilemap.tileToWorldXY(l,h,y,n,v);return m.x>n.worldView.x+v.scaleX*r.tileWidth*(-o-.5)&&m.x<n.worldView.right+v.scaleX*r.tileWidth*(o-.5)&&m.y>n.worldView.y+v.scaleY*r.tileHeight*(-c-1)&&m.y<n.worldView.bottom+v.scaleY*r.tileHeight*(c-.5)};a.exports=d},17347:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60386),y=e(50811),d=e(62839),l=e(29633),h=function(r,n,v,o,c,m,p,g){p===void 0&&(p=!0);var x=y(r,n,v,o,null,g),E=[];x.forEach(function(R){var O=new l(R.layer,R.index,R.x,R.y,R.width,R.height,R.baseWidth,R.baseHeight);O.copy(R),E.push(O)});for(var P=c-r,S=m-n,M=0;M<E.length;M++){var b=E[M],A=b.x+P,L=b.y+S;d(A,L,g)&&g.data[L][A]&&(b.x=A,b.y=L,b.updatePixelXY(),g.data[L][A]=b)}p&&u(c-1,m-1,v+2,o+2,g),x.length=0,E.length=0};a.exports=h},93604:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=e(51202),d=function(l,h,r,n,v,o){r||(r={}),Array.isArray(l)||(l=[l]);var c=o.tilemapLayer;n||(n=c.scene),v||(v=n.cameras.main);var m=u(0,0,o.width,o.height,null,o),p=[],g;for(g=0;g<m.length;g++){var x=m[g];if(l.indexOf(x.index)!==-1){var E=c.tileToWorldXY(x.x,x.y,void 0,v,o);r.x=E.x,r.y=E.y,p.push(n.make.sprite(r))}}if(typeof h=="number")for(g=0;g<l.length;g++)y(l[g],h,0,0,o.width,o.height,o);else if(Array.isArray(h))for(g=0;g<l.length;g++)y(l[g],h[g],0,0,o.width,o.height,o);return p};a.exports=d},71586:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),y=e(82127),d=e(84314),l=new u,h=function(r,n){var v=r.tilemapLayer.tilemap,o=r.tilemapLayer,c=Math.floor(v.tileWidth*o.scaleX),m=Math.floor(v.tileHeight*o.scaleY),p=d(n.worldView.x-o.x,c,0,!0)-o.cullPaddingX,g=y(n.worldView.right-o.x,c,0,!0)+o.cullPaddingX,x=d(n.worldView.y-o.y,m,0,!0)-o.cullPaddingY,E=y(n.worldView.bottom-o.y,m,0,!0)+o.cullPaddingY;return l.setTo(p,x,g-p,E-x)};a.exports=h},381:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(71586),y=e(6987),d=function(l,h,r,n){r===void 0&&(r=[]),n===void 0&&(n=0),r.length=0;var v=l.tilemapLayer,o=u(l,h);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(o.left=0,o.right=l.width,o.top=0,o.bottom=l.height),y(l,o,n,r),r};a.exports=d},97734:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=e(60386),d=e(68234),l=function(h,r,n,v,o,c,m){for(var p=m.collideIndexes.indexOf(h)!==-1,g=u(r,n,v,o,null,m),x=0;x<g.length;x++)g[x].index=h,d(g[x],p);c&&y(r-1,n-1,v+2,o+2,m)};a.exports=l},63555:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v,o,c){var m=u(h,r,n,v,o,c);return m.filter(d,l)};a.exports=y},37982:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u===void 0&&(u=0),y===void 0&&(y=!1);var l=0,h,r,n;if(y){for(r=d.height-1;r>=0;r--)for(h=d.width-1;h>=0;h--)if(n=d.data[r][h],n&&n.index===e){if(l===u)return n;l+=1}}else for(r=0;r<d.height;r++)for(h=0;h<d.width;h++)if(n=d.data[r][h],n&&n.index===e){if(l===u)return n;l+=1}return null};a.exports=T},48297:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v,o,c){var m=u(h,r,n,v,o,c);return m.find(d,l)||null};a.exports=y},80916:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v,o,c){var m=u(h,r,n,v,o,c);m.forEach(d,l)};a.exports=y},31493:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(381),d=e(37524),l=e(20887),h=e(72283),r=e(19242),n=function(v){return v===u.ORTHOGONAL?y:v===u.HEXAGONAL?d:v===u.STAGGERED?r:v===u.ISOMETRIC?l:h};a.exports=n},15494:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(62839),y=function(d,l,h,r){if(h===void 0&&(h=!1),u(d,l,r)){var n=r.data[l][d]||null;return n?n.index===-1?h?n:null:n:null}else return null};a.exports=y},24640:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15494),y=e(93736),d=new y,l=function(h,r,n,v,o){return o.tilemapLayer.worldToTileXY(h,r,!0,d,v),u(d.x,d.y,n,o)};a.exports=l},48495:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r){var n=r.baseTileWidth,v=r.baseTileHeight,o=r.tilemapLayer,c=0,m=0;o&&(h||(h=o.scene.cameras.main),c=o.x+h.scrollX*(1-o.scrollFactorX),m=o.y+h.scrollY*(1-o.scrollFactorY),n*=o.scaleX,v*=o.scaleY);var p=c+d*n,g=m+l*v;return[new u(p,g),new u(p+n,g),new u(p+n,g+v),new u(p,g+v)]};a.exports=y},7160:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(63634),d=e(72283),l=e(48495),h=function(r){return r===u.ORTHOGONAL?l:r===u.ISOMETRIC?d:r===u.HEXAGONAL?y:(r===u.STAGGERED,d)};a.exports=h},16884:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(72283),d=e(44150),l=function(h){return h===u.ORTHOGONAL?d:y};a.exports=l},68182:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(21715),d=e(21808),l=e(72283),h=e(33388),r=e(46836),n=function(v){return v===u.ORTHOGONAL?r:v===u.ISOMETRIC?d:v===u.HEXAGONAL?y:v===u.STAGGERED?h:l};a.exports=n},3752:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(72283),d=e(84132),l=e(42477),h=function(r){return r===u.ORTHOGONAL?l:r===u.STAGGERED?d:y};a.exports=h},50811:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=function(d,l,h,r,n,v){d===void 0&&(d=0),l===void 0&&(l=0),h===void 0&&(h=v.width),r===void 0&&(r=v.height),n||(n={});var o=u(n,"isNotEmpty",!1),c=u(n,"isColliding",!1),m=u(n,"hasInterestingFace",!1);d<0&&(h+=d,d=0),l<0&&(r+=l,l=0),d+h>v.width&&(h=Math.max(v.width-d,0)),l+r>v.height&&(r=Math.max(v.height-l,0));for(var p=[],g=l;g<l+r;g++)for(var x=d;x<d+h;x++){var E=v.data[g][x];if(E!==null){if(o&&E.index===-1||c&&!E.collides||m&&!E.hasInterestingFace)continue;p.push(E)}}return p};a.exports=y},31674:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84068),y=e(50811),d=e(7563),l=e(72283),h=e(93736),r=function(m,p){return d.RectangleToTriangle(p,m)},n=new h,v=new h,o=new h,c=function(m,p,g,x){if(m===void 0)return[];var E=l;m instanceof u.Circle?E=d.CircleToRectangle:m instanceof u.Rectangle?E=d.RectangleToRectangle:m instanceof u.Triangle?E=r:m instanceof u.Line&&(E=d.LineToRectangle),x.tilemapLayer.worldToTileXY(m.left,m.top,!0,v,g);var P=v.x,S=v.y;x.tilemapLayer.worldToTileXY(m.right,m.bottom,!1,o,g);var M=Math.ceil(o.x),b=Math.ceil(o.y),A=Math.max(M-P,1),L=Math.max(b-S,1),R=y(P,S,A,L,p,x),O=x.tileWidth,D=x.tileHeight;x.tilemapLayer&&(O*=x.tilemapLayer.scaleX,D*=x.tilemapLayer.scaleY);for(var B=[],G=new u.Rectangle(0,0,O,D),z=0;z<R.length;z++){var X=R[z];x.tilemapLayer.tileToWorldXY(X.x,X.y,n,g),G.x=n.x,G.y=n.y,E(m,G)&&B.push(X)}return B};a.exports=c},44662:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=e(93736),d=new y,l=new y,h=function(r,n,v,o,c,m,p){var g=p.tilemapLayer.tilemap._convert.WorldToTileXY;g(r,n,!0,d,m,p);var x=d.x,E=d.y;g(r+v,n+o,!1,l,m,p);var P=Math.ceil(l.x),S=Math.ceil(l.y);return u(x,E,P-x,S-E,c,p)};a.exports=h},29296:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(10618),d=e(806),l=function(h){return h===u.ORTHOGONAL?d:y};a.exports=l},32688:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(11516),d=e(18750),l=e(72283),h=e(90562),r=e(45676),n=function(v){return v===u.ORTHOGONAL?r:v===u.ISOMETRIC?d:v===u.HEXAGONAL?y:v===u.STAGGERED?h:l};a.exports=n},74326:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=e(10618),d=e(3689),l=e(70520),h=function(r){return r===u.ORTHOGONAL?l:r===u.STAGGERED?d:y};a.exports=h},46598:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(62839),y=function(d,l,h){if(u(d,l,h)){var r=h.data[l][d];return r!==null&&r.index>-1}else return!1};a.exports=y},28654:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(46598),y=e(93736),d=new y,l=function(h,r,n,v){v.tilemapLayer.worldToTileXY(h,r,!0,d,n);var o=d.x,c=d.y;return u(o,c,v)};a.exports=l},6358:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82127),y=e(84314),d=function(l,h){var r=l.tilemapLayer.tilemap,n=l.tilemapLayer,v=Math.floor(r.tileWidth*n.scaleX),o=Math.floor(r.tileHeight*n.scaleY),c=l.hexSideLength,m=(o-c)/2+c,p=y(h.worldView.x-n.x,v,0,!0)-n.cullPaddingX,g=u(h.worldView.right-n.x,v,0,!0)+n.cullPaddingX,x=y(h.worldView.y-n.y,m,0,!0)-n.cullPaddingY,E=u(h.worldView.bottom-n.y,m,0,!0)+n.cullPaddingY;return{left:p,right:g,top:x,bottom:E}};a.exports=d},37524:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6358),y=e(6987),d=function(l,h,r,n){r===void 0&&(r=[]),n===void 0&&(n=0),r.length=0;var v=l.tilemapLayer,o=u(l,h);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(o.left=0,o.right=l.width,o.top=0,o.bottom=l.height),y(l,o,n,r),r};a.exports=d},63634:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(21715),y=e(93736),d=new y,l=function(h,r,n,v){var o=v.baseTileWidth,c=v.baseTileHeight,m=v.tilemapLayer;m&&(o*=m.scaleX,c*=m.scaleY);for(var p=u(h,r,d,n,v),g=[],x=.5773502691896257,E=x*o,P=c/2,S=0;S<6;S++){var M=2*Math.PI*(.5-S)/6;g.push(new y(p.x+E*Math.cos(M),p.y+P*Math.sin(M)))}return g};a.exports=l},21715:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n){h||(h=new u);var v=n.baseTileWidth,o=n.baseTileHeight,c=n.tilemapLayer,m=0,p=0;c&&(r||(r=c.scene.cameras.main),m=c.x+r.scrollX*(1-c.scrollFactorX),p=c.y+r.scrollY*(1-c.scrollFactorY),v*=c.scaleX,o*=c.scaleY);var g=v/2,x=o/2,E=m+v*d+v,P=p+1.5*l*x+x;return l%2===0&&(E-=g),h.set(E,P)};a.exports=y},11516:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n,v){r||(r=new u);var o=v.baseTileWidth,c=v.baseTileHeight,m=v.tilemapLayer;m&&(n||(n=m.scene.cameras.main),d=d-(m.x+n.scrollX*(1-m.scrollFactorX)),l=l-(m.y+n.scrollY*(1-m.scrollFactorY)),o*=m.scaleX,c*=m.scaleY);var p=.5773502691896257,g=-.3333333333333333,x=0,E=.6666666666666666,P=o/2,S=c/2,M=(d-P)/(p*o),b=(l-S)/S,A=p*M+g*b,L=x*M+E*b,R=-A-L,O=Math.round(A),D=Math.round(L),B=Math.round(R),G=Math.abs(O-A),z=Math.abs(D-L),X=Math.abs(B-R);G>z&&G>X?O=-D-B:z>X&&(D=-O-B);var U=D,V=U%2===0?D/2+O:D/2+O-.5;return r.set(V,U)};a.exports=y},62839:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e>=0&&e<y.width&&u>=0&&u<y.height};a.exports=T},20887:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(13125),y=function(d,l,h,r){h===void 0&&(h=[]),r===void 0&&(r=0),h.length=0;var n=d.tilemapLayer,v=d.data,o=d.width,c=d.height,m=n.skipCull,p=0,g=o,x=0,E=c,P,S,M;if(r===0){for(S=x;S<E;S++)for(P=p;P<g;P++)if(m||u(P,S,d,l)){if(M=v[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;h.push(M)}}else if(r===1){for(S=x;S<E;S++)for(P=g;P>=p;P--)if(m||u(P,S,d,l)){if(M=v[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;h.push(M)}}else if(r===2){for(S=E;S>=x;S--)for(P=p;P<g;P++)if(m||u(P,S,d,l)){if(M=v[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;h.push(M)}}else if(r===3){for(S=E;S>=x;S--)for(P=g;P>=p;P--)if(m||u(P,S,d,l)){if(M=v[S][P],!M||M.index===-1||!M.visible||M.alpha===0)continue;h.push(M)}}return n.tilesDrawn=h.length,n.tilesTotal=o*c,h};a.exports=y},21808:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n){h||(h=new u);var v=n.baseTileWidth,o=n.baseTileHeight,c=n.tilemapLayer,m=0,p=0;c&&(r||(r=c.scene.cameras.main),m=c.x+r.scrollX*(1-c.scrollFactorX),v*=c.scaleX,p=c.y+r.scrollY*(1-c.scrollFactorY),o*=c.scaleY);var g=m+(d-l)*(v/2),x=p+(d+l)*(o/2);return h.set(g,x)};a.exports=y},18750:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n,v,o){r||(r=new u);var c=v.baseTileWidth,m=v.baseTileHeight,p=v.tilemapLayer;p&&(n||(n=p.scene.cameras.main),l=l-(p.y+n.scrollY*(1-p.scrollFactorY)),m*=p.scaleY,d=d-(p.x+n.scrollX*(1-p.scrollFactorX)),c*=p.scaleX);var g=c/2,x=m/2;d=d-g,o||(l=l-m);var E=.5*(d/g+l/x),P=.5*(-d/g+l/x);return h&&(E=Math.floor(E),P=Math.floor(P)),r.set(E,P)};a.exports=y},29003:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29633),y=e(62839),d=e(92839),l=e(68234),h=e(14556),r=function(n,v,o,c,m){if(c===void 0&&(c=!0),!y(v,o,m))return null;var p,g=m.data[o][v],x=g&&g.collides;n instanceof u?(m.data[o][v]===null&&(m.data[o][v]=new u(m,n.index,v,o,m.tileWidth,m.tileHeight)),m.data[o][v].copy(n)):(p=n,m.data[o][v]===null?m.data[o][v]=new u(m,p,v,o,m.tileWidth,m.tileHeight):m.data[o][v].index=p);var E=m.data[o][v],P=m.collideIndexes.indexOf(E.index)!==-1,S=h(m.tilemapLayer.tilemap);p=n instanceof u?n.index:n;var M=S[p][2],b=m.tilemapLayer.tileset[M];return E.width=b.tileWidth,E.height=b.tileHeight,l(E,P),c&&x!==E.collides&&d(v,o,m),E};a.exports=r},48565:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29003),y=e(93736),d=new y,l=function(h,r,n,v,o,c){return c.tilemapLayer.worldToTileXY(r,n,!0,d,o,c),u(h,d.x,d.y,v,c)};a.exports=l},56547:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60386),y=e(29003),d=function(l,h,r,n,v){if(n===void 0&&(n=!0),!Array.isArray(l))return null;Array.isArray(l[0])||(l=[l]);for(var o=l.length,c=l[0].length,m=0;m<o;m++)for(var p=0;p<c;p++){var g=l[m][p];y(g,h+p,r+m,!1,v)}n&&u(h-1,r-1,c+2,o+2,v)};a.exports=d},91180:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=e(72861),d=function(l,h,r,n,v,o){var c,m=u(l,h,r,n,{},o);if(!v)for(v=[],c=0;c<m.length;c++)v.indexOf(m[c].index)===-1&&v.push(m[c].index);for(c=0;c<m.length;c++)m[c].index=y(v)};a.exports=d},929:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29633),y=e(62839),d=e(92839),l=function(h,r,n,v,o){if(n===void 0&&(n=!0),v===void 0&&(v=!0),!y(h,r,o))return null;var c=o.data[r][h];if(c)o.data[r][h]=n?null:new u(o,-1,h,r,o.tileWidth,o.tileHeight);else return null;return v&&c&&c.collides&&d(h,r,o),c};a.exports=l},17384:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(929),y=e(93736),d=new y,l=function(h,r,n,v,o,c){return c.tilemapLayer.worldToTileXY(h,r,!0,d,o,c),u(d.x,d.y,n,v,c)};a.exports=l},93763:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=e(95509),d=new y(105,210,231,150),l=new y(243,134,48,200),h=new y(40,39,37,150),r=function(n,v,o){v===void 0&&(v={});var c=v.tileColor!==void 0?v.tileColor:d,m=v.collidingTileColor!==void 0?v.collidingTileColor:l,p=v.faceColor!==void 0?v.faceColor:h,g=u(0,0,o.width,o.height,null,o);n.translateCanvas(o.tilemapLayer.x,o.tilemapLayer.y),n.scaleCanvas(o.tilemapLayer.scaleX,o.tilemapLayer.scaleY);for(var x=0;x<g.length;x++){var E=g[x],P=E.width,S=E.height,M=E.pixelX,b=E.pixelY,A=E.collides?m:c;A!==null&&(n.fillStyle(A.color,A.alpha/255),n.fillRect(M,b,P,S)),M+=1,b+=1,P-=2,S-=2,p!==null&&(n.lineStyle(1,p.color,p.alpha/255),E.faceTop&&n.lineBetween(M,b,M+P,b),E.faceRight&&n.lineBetween(M+P,b,M+P,b+S),E.faceBottom&&n.lineBetween(M,b+S,M+P,b+S),E.faceLeft&&n.lineBetween(M,b,M,b+S))}};a.exports=r},51202:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v,o){for(var c=u(h,r,n,v,null,o),m=0;m<c.length;m++)c[m]&&c[m].index===d&&(c[m].index=l)};a.exports=y},6987:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=e.data,h=e.width,r=e.height,n=e.tilemapLayer,v=Math.max(0,u.left),o=Math.min(h,u.right),c=Math.max(0,u.top),m=Math.min(r,u.bottom),p,g,x;if(y===0)for(g=c;g<m;g++)for(p=v;l[g]&&p<o;p++)x=l[g][p],!(!x||x.index===-1||!x.visible||x.alpha===0)&&d.push(x);else if(y===1)for(g=c;g<m;g++)for(p=o;l[g]&&p>=v;p--)x=l[g][p],!(!x||x.index===-1||!x.visible||x.alpha===0)&&d.push(x);else if(y===2)for(g=m;g>=c;g--)for(p=v;l[g]&&p<o;p++)x=l[g][p],!(!x||x.index===-1||!x.visible||x.alpha===0)&&d.push(x);else if(y===3)for(g=m;g>=c;g--)for(p=o;l[g]&&p>=v;p--)x=l[g][p],!(!x||x.index===-1||!x.visible||x.alpha===0)&&d.push(x);return n.tilesDrawn=d.length,n.tilesTotal=h*r,d};a.exports=T},51710:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),y=e(60386),d=e(91181),l=function(h,r,n,v,o){r===void 0&&(r=!0),n===void 0&&(n=!0),o===void 0&&(o=!0),Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++)d(h[c],r,v);if(o)for(var m=0;m<v.height;m++)for(var p=0;p<v.width;p++){var g=v.data[m][p];g&&h.indexOf(g.index)!==-1&&u(g,r)}n&&y(0,0,v.width,v.height,v)};a.exports=l},15216:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),y=e(60386),d=e(91181),l=function(h,r,n,v,o,c){if(n===void 0&&(n=!0),v===void 0&&(v=!0),c===void 0&&(c=!0),!(h>r)){for(var m=h;m<=r;m++)d(m,n,o);if(c)for(var p=0;p<o.height;p++)for(var g=0;g<o.width;g++){var x=o.data[p][g];x&&x.index>=h&&x.index<=r&&u(x,n)}v&&y(0,0,o.width,o.height,o)}};a.exports=l},33158:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),y=e(60386),d=e(91181),l=function(h,r,n,v){r===void 0&&(r=!0),n===void 0&&(n=!0),Array.isArray(h)||(h=[h]);for(var o=0;o<v.height;o++)for(var c=0;c<v.width;c++){var m=v.data[o][c];m&&h.indexOf(m.index)===-1&&(u(m,r),d(m.index,r,v))}n&&y(0,0,v.width,v.height,v)};a.exports=l},4180:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),y=e(60386),d=e(19256),l=function(h,r,n,v){r===void 0&&(r=!0),n===void 0&&(n=!0);for(var o=0;o<v.height;o++)for(var c=0;c<v.width;c++){var m=v.data[o][c];if(!!m){for(var p in h)if(!!d(m.properties,p)){var g=h[p];Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++)m.properties[p]===g[x]&&u(m,r)}}}n&&y(0,0,v.width,v.height,v)};a.exports=l},18625:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),y=e(60386),d=function(l,h,r){l===void 0&&(l=!0),h===void 0&&(h=!0);for(var n=0;n<r.height;n++)for(var v=0;v<r.width;v++){var o=r.data[n][v];if(!!o){var c=o.getCollisionGroup();c&&c.objects&&c.objects.length>0&&u(o,l)}}h&&y(0,0,r.width,r.height,r)};a.exports=d},91181:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=y.collideIndexes.indexOf(e);u&&d===-1?y.collideIndexes.push(e):!u&&d!==-1&&y.collideIndexes.splice(d,1)};a.exports=T},68234:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};a.exports=T},11628:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){if(typeof e=="number")d.callbacks[e]=u!==null?{callback:u,callbackContext:y}:void 0;else for(var l=0,h=e.length;l<h;l++)d.callbacks[e[l]]=u!==null?{callback:u,callbackContext:y}:void 0};a.exports=T},72732:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v,o){for(var c=u(d,l,h,r,null,o),m=0;m<c.length;m++)c[m].setCollisionCallback(n,v)};a.exports=y},34397:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=e(18592),d=function(l,h,r,n,v){var o=u(l,h,r,n,null,v),c=o.map(function(p){return p.index});y(c);for(var m=0;m<o.length;m++)o[m].index=c[m]};a.exports=d},53945:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82127),y=e(84314),d=function(l,h){var r=l.tilemapLayer.tilemap,n=l.tilemapLayer,v=Math.floor(r.tileWidth*n.scaleX),o=Math.floor(r.tileHeight*n.scaleY),c=y(h.worldView.x-n.x,v,0,!0)-n.cullPaddingX,m=u(h.worldView.right-n.x,v,0,!0)+n.cullPaddingX,p=y(h.worldView.y-n.y,o/2,0,!0)-n.cullPaddingY,g=u(h.worldView.bottom-n.y,o/2,0,!0)+n.cullPaddingY;return{left:c,right:m,top:p,bottom:g}};a.exports=d},19242:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53945),y=e(6987),d=function(l,h,r,n){r===void 0&&(r=[]),n===void 0&&(n=0),r.length=0;var v=l.tilemapLayer,o=u(l,h);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(o.left=0,o.right=l.width,o.top=0,o.bottom=l.height),y(l,o,n,r),r};a.exports=d},33388:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n){h||(h=new u);var v=n.baseTileWidth,o=n.baseTileHeight,c=n.tilemapLayer,m=0,p=0;c&&(r||(r=c.scene.cameras.main),m=c.x+r.scrollX*(1-c.scrollFactorX),v*=c.scaleX,p=c.y+r.scrollY*(1-c.scrollFactorY),o*=c.scaleY);var g=m+d*v+l%2*(v/2),x=p+l*(o/2);return h.set(g,x)};a.exports=y},84132:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=y.baseTileHeight,l=y.tilemapLayer,h=0;return l&&(u===void 0&&(u=l.scene.cameras.main),h=l.y+u.scrollY*(1-l.scrollFactorY),d*=l.scaleY),h+e*(d/2)+d};a.exports=T},90562:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n,v){r||(r=new u);var o=v.baseTileWidth,c=v.baseTileHeight,m=v.tilemapLayer;m&&(n||(n=m.scene.cameras.main),l=l-(m.y+n.scrollY*(1-m.scrollFactorY)),c*=m.scaleY,d=d-(m.x+n.scrollX*(1-m.scrollFactorX)),o*=m.scaleX);var p=h?Math.floor(l/(c/2)):l/(c/2),g=h?Math.floor((d+p%2*.5*o)/o):(d+p%2*.5*o)/o;return r.set(g,p)};a.exports=y},3689:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=d.baseTileHeight,h=d.tilemapLayer;return h&&(y||(y=h.scene.cameras.main),e=e-(h.y+y.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),u?Math.floor(e/(l/2)):e/(l/2)};a.exports=T},55217:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v,o){for(var c=u(h,r,n,v,null,o),m=0;m<c.length;m++)c[m]&&(c[m].index===d?c[m].index=l:c[m].index===l&&(c[m].index=d))};a.exports=y},44150:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=y.baseTileWidth,l=y.tilemapLayer,h=0;return l&&(u||(u=l.scene.cameras.main),h=l.x+u.scrollX*(1-l.scrollFactorX),d*=l.scaleX),h+e*d};a.exports=T},46836:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44150),y=e(42477),d=e(93736),l=function(h,r,n,v,o){return n||(n=new d(0,0)),n.x=u(h,v,o),n.y=y(r,v,o),n};a.exports=l},42477:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=y.baseTileHeight,l=y.tilemapLayer,h=0;return l&&(u||(u=l.scene.cameras.main),h=l.y+u.scrollY*(1-l.scrollFactorY),d*=l.scaleY),h+e*d};a.exports=T},39677:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),y=function(d,l,h,r,n,v){if(!!n){var o,c=u(d,l,h,r,null,v),m=0;for(o=0;o<n.length;o++)m+=n[o].weight;if(!(m<=0))for(o=0;o<c.length;o++){for(var p=Math.random()*m,g=0,x=-1,E=0;E<n.length;E++)if(g+=n[E].weight,p<=g){var P=n[E].index;x=Array.isArray(P)?P[Math.floor(Math.random()*P.length)]:P;break}c[o].index=x}}};a.exports=y},806:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45676),y=e(93736),d=new y,l=function(h,r,n,v){return u(h,0,r,d,n,v),d.x};a.exports=l},45676:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),y=function(d,l,h,r,n,v){h===void 0&&(h=!0),r||(r=new u);var o=v.baseTileWidth,c=v.baseTileHeight,m=v.tilemapLayer;m&&(n||(n=m.scene.cameras.main),d=d-(m.x+n.scrollX*(1-m.scrollFactorX)),l=l-(m.y+n.scrollY*(1-m.scrollFactorY)),o*=m.scaleX,c*=m.scaleY);var p=d/o,g=l/c;return h&&(p=Math.floor(p),g=Math.floor(g)),r.set(p,g)};a.exports=y},70520:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45676),y=e(93736),d=new y,l=function(h,r,n,v){return u(0,h,r,d,n,v),d.y};a.exports=l},5047:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={ORIENTATION:e(12920)};a.exports=u},52678:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),y=e(84758),d={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};d=u(!1,d,y.ORIENTATION),a.exports=d},94990:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12920),d=e(72632),l=new u({initialize:function(r){r===void 0&&(r={}),this.name=d(r,"name","layer"),this.x=d(r,"x",0),this.y=d(r,"y",0),this.width=d(r,"width",0),this.height=d(r,"height",0),this.tileWidth=d(r,"tileWidth",0),this.tileHeight=d(r,"tileHeight",0),this.baseTileWidth=d(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=d(r,"baseTileHeight",this.tileHeight),this.orientation=d(r,"orientation",y.ORTHOGONAL),this.widthInPixels=d(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=d(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=d(r,"alpha",1),this.visible=d(r,"visible",!0),this.properties=d(r,"properties",[]),this.indexes=d(r,"indexes",[]),this.collideIndexes=d(r,"collideIndexes",[]),this.callbacks=d(r,"callbacks",[]),this.bodies=d(r,"bodies",[]),this.data=d(r,"data",[]),this.tilemapLayer=d(r,"tilemapLayer",null),this.hexSideLength=d(r,"hexSideLength",0)}});a.exports=l},16586:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(12920),d=e(72632),l=new u({initialize:function(r){r===void 0&&(r={}),this.name=d(r,"name","map"),this.width=d(r,"width",0),this.height=d(r,"height",0),this.infinite=d(r,"infinite",!1),this.tileWidth=d(r,"tileWidth",0),this.tileHeight=d(r,"tileHeight",0),this.widthInPixels=d(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=d(r,"heightInPixels",this.height*this.tileHeight),this.format=d(r,"format",null),this.orientation=d(r,"orientation",y.ORTHOGONAL),this.renderOrder=d(r,"renderOrder","right-down"),this.version=d(r,"version","1"),this.properties=d(r,"properties",{}),this.layers=d(r,"layers",[]),this.images=d(r,"images",[]),this.objects=d(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=d(r,"collision",{}),this.tilesets=d(r,"tilesets",[]),this.imageCollections=d(r,"imageCollections",[]),this.tiles=d(r,"tiles",[]),this.hexSideLength=d(r,"hexSideLength",0),this.staggerAxis=d(r,"staggerAxis","y"),this.staggerIndex=d(r,"staggerIndex","odd")}});a.exports=l},15256:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=new u({initialize:function(h){h===void 0&&(h={}),this.name=y(h,"name","object layer"),this.opacity=y(h,"opacity",1),this.properties=y(h,"properties",{}),this.propertyTypes=y(h,"propertytypes",{}),this.type=y(h,"type","objectgroup"),this.visible=y(h,"visible",!0),this.objects=y(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});a.exports=d},21394:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),y=function(d){return d=d.toLowerCase(),d==="isometric"?u.ISOMETRIC:d==="staggered"?u.STAGGERED:d==="hexagonal"?u.HEXAGONAL:u.ORTHOGONAL};a.exports=y},90715:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),y=e(84346),d=e(96097),l=e(2378),h=e(44909),r=function(n,v,o,c,m,p){var g;switch(v){case u.ARRAY_2D:g=y(n,o,c,m,p);break;case u.CSV:g=d(n,o,c,m,p);break;case u.TILED_JSON:g=l(n,o,p);break;case u.WELTMEISTER:g=h(n,o,p);break;default:console.warn("Unrecognized tilemap data format: "+v),g=null}return g};a.exports=r},84346:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),y=e(94990),d=e(16586),l=e(29633),h=function(r,n,v,o,c){for(var m=new y({tileWidth:v,tileHeight:o}),p=new d({name:r,tileWidth:v,tileHeight:o,format:u.ARRAY_2D,layers:[m]}),g=[],x=n.length,E=0,P=0;P<n.length;P++){g[P]=[];for(var S=n[P],M=0;M<S.length;M++){var b=parseInt(S[M],10);isNaN(b)||b===-1?g[P][M]=c?null:new l(m,-1,M,P,v,o):g[P][M]=new l(m,b,M,P,v,o)}E===0&&(E=S.length)}return p.width=m.width=E,p.height=m.height=x,p.widthInPixels=m.widthInPixels=E*v,p.heightInPixels=m.heightInPixels=x*o,m.data=g,p};a.exports=h},96097:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),y=e(84346),d=function(l,h,r,n,v){var o=h.trim().split(`
`).map(function(m){return m.split(",")}),c=y(l,o,r,n,v);return c.format=u.CSV,c};a.exports=d},30951:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(94990),y=e(29633),d=function(l,h){for(var r=[],n=0;n<l.layer.length;n++){for(var v=l.layer[n],o=new u({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),c=[],m=[],p=0;p<v.data.length;p++){for(var g=0;g<v.data[p].length;g++){var x=v.data[p][g]-1,E;x>-1?E=new y(o,x,g,p,v.tilesize,v.tilesize):E=h?null:new y(o,-1,g,p,v.tilesize,v.tilesize),c.push(E)}m.push(c),c=[]}o.data=m,r.push(o)}return r};a.exports=d},47488:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47975),y=function(d){for(var l=[],h=[],r=0;r<d.layer.length;r++){var n=d.layer[r],v=n.tilesetName;v!==""&&h.indexOf(v)===-1&&(h.push(v),l.push(new u(v,0,n.tilesize,n.tilesize,0,0)))}return l};a.exports=y},44909:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),y=e(16586),d=e(30951),l=e(47488),h=function(r,n,v){if(n.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var o=0,c=0,m=0;m<n.layer.length;m++)n.layer[m].width>o&&(o=n.layer[m].width),n.layer[m].height>c&&(c=n.layer[m].height);var p=new y({width:o,height:c,name:r,tileWidth:n.layer[0].tilesize,tileHeight:n.layer[0].tilesize,format:u.WELTMEISTER});return p.layers=d(n,v),p.tilesets=l(n),p};a.exports=h},24507:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),y=function(d){for(var l,h,r,n,v,o=0;o<d.layers.length;o++){l=d.layers[o],n=null;for(var c=0;c<l.data.length;c++){v=l.data[c];for(var m=0;m<v.length;m++)h=v[m],!(h===null||h.index<0)&&(r=d.tiles[h.index][2],n=d.tilesets[r],h.width=n.tileWidth,h.height=n.tileHeight,n.tileProperties&&n.tileProperties[h.index-n.firstgid]&&(h.properties=u(h.properties,n.tileProperties[h.index-n.firstgid])))}}};a.exports=y},43908:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var u=window.atob(e),y=u.length,d=new Array(y/4),l=0;l<y;l+=4)d[l/4]=(u.charCodeAt(l)|u.charCodeAt(l+1)<<8|u.charCodeAt(l+2)<<16|u.charCodeAt(l+3)<<24)>>>0;return d};a.exports=T},14556:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47975),y=function(d){var l,h,r=[];for(l=0;l<d.imageCollections.length;l++)for(var n=d.imageCollections[l],v=n.images,o=0;o<v.length;o++){var c=v[o];h=new u(c.image,c.gid,n.imageWidth,n.imageHeight,0,0),h.updateTileData(n.imageWidth,n.imageHeight),d.tilesets.push(h)}for(l=0;l<d.tilesets.length;l++){h=d.tilesets[l];for(var m=h.tileMargin,p=h.tileMargin,g=0,x=0,E=0,P=h.firstgid;P<h.firstgid+h.total&&(r[P]=[m,p,l],m+=h.tileWidth+h.tileSpacing,g++,!(g===h.total||(x++,x===h.columns&&(m=h.tileMargin,p+=h.tileHeight+h.tileSpacing,x=0,E++,E===h.rows))));P++);}return r};a.exports=y},92044:(a,T,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=function(d,l,h){if(!l)return{i:0,layers:d.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=l.x+u(l,"startx",0)*d.tilewidth+u(l,"offsetx",0),n=l.y+u(l,"starty",0)*d.tileheight+u(l,"offsety",0);return{i:0,layers:l.layers,name:h.name+l.name+"/",opacity:h.opacity*l.opacity,visible:h.visible&&l.visible,x:h.x+r,y:h.y+n}};a.exports=y},8847:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=2147483648,e=1073741824,u=536870912,y=function(d){var l=Boolean(d&T),h=Boolean(d&e),r=Boolean(d&u);d=d&~(T|e|u);var n=0,v=!1;return l&&h&&r?(n=Math.PI/2,v=!0):l&&h&&!r?(n=Math.PI,v=!1):l&&!h&&r?(n=Math.PI/2,v=!1):l&&!h&&!r?(n=0,v=!0):!l&&h&&r?(n=3*Math.PI/2,v=!1):!l&&h&&!r?(n=Math.PI,v=!0):!l&&!h&&r?(n=3*Math.PI/2,v=!0):!l&&!h&&!r&&(n=0,v=!1),{gid:d,flippedHorizontal:l,flippedVertical:h,flippedAntiDiagonal:r,rotation:n,flipped:v}};a.exports=y},78339:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=e(92044),d=function(l){for(var h=[],r=[],n=y(l);n.i<n.layers.length||r.length>0;){if(n.i>=n.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=r.pop();continue}var v=n.layers[n.i];if(n.i++,v.type!=="imagelayer"){if(v.type==="group"){var o=y(l,v,n);r.push(n),n=o}continue}var c=u(v,"offsetx",0)+u(v,"startx",0),m=u(v,"offsety",0)+u(v,"starty",0);h.push({name:n.name+v.name,image:v.image,x:n.x+c+v.x,y:n.y+m+v.y,alpha:n.opacity*v.opacity,visible:n.visible&&v.visible,properties:u(v,"properties",{})})}return h};a.exports=d},2378:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(48646),y=e(14556),d=e(12920),l=e(28699),h=e(93560),r=e(21394),n=e(16586),v=e(78339),o=e(61136),c=e(95925),m=e(93392),p=function(g,x,E){var P=l(x),S=new n({width:P.width,height:P.height,name:g,tileWidth:P.tilewidth,tileHeight:P.tileheight,orientation:r(P.orientation),format:h.TILED_JSON,version:P.version,properties:P.properties,renderOrder:P.renderorder,infinite:P.infinite});S.orientation===d.HEXAGONAL&&(S.hexSideLength=P.hexsidelength,S.staggerAxis=P.staggeraxis,S.staggerIndex=P.staggerindex),S.layers=c(P,E),S.images=v(P);var M=m(P);return S.tilesets=M.tilesets,S.imageCollections=M.imageCollections,S.objects=o(P),S.tiles=y(S),u(S),S};a.exports=p},4281:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28820),y=e(8847),d=function(r){return{x:r.x,y:r.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(r,n,v){n===void 0&&(n=0),v===void 0&&(v=0);var o=u(r,l);if(o.x+=n,o.y+=v,r.gid){var c=y(r.gid);o.gid=c.gid,o.flippedHorizontal=c.flippedHorizontal,o.flippedVertical=c.flippedVertical,o.flippedAntiDiagonal=c.flippedAntiDiagonal}else r.polyline?o.polyline=r.polyline.map(d):r.polygon?o.polygon=r.polygon.map(d):r.ellipse?o.ellipse=r.ellipse:r.text?o.text=r.text:r.point?o.point=!0:o.rectangle=!0;return o};a.exports=h},61136:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),y=e(4281),d=e(15256),l=e(92044),h=function(r){for(var n=[],v=[],o=l(r);o.i<o.layers.length||v.length>0;){if(o.i>=o.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=v.pop();continue}var c=o.layers[o.i];if(o.i++,c.opacity*=o.opacity,c.visible=o.visible&&c.visible,c.type!=="objectgroup"){if(c.type==="group"){var m=l(r,c,o);v.push(o),o=m}continue}c.name=o.name+c.name;for(var p=o.x+u(c,"startx",0)+u(c,"offsetx",0),g=o.y+u(c,"starty",0)+u(c,"offsety",0),x=[],E=0;E<c.objects.length;E++){var P=y(c.objects[E],p,g);x.push(P)}var S=new d(c);S.objects=x,n.push(S)}return n};a.exports=h},95925:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(43908),y=e(12920),d=e(92044),l=e(21394),h=e(72632),r=e(94990),n=e(8847),v=e(29633),o=function(c,m){for(var p=h(c,"infinite",!1),g=[],x=[],E=d(c);E.i<E.layers.length||x.length>0;){if(E.i>=E.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=x.pop();continue}var P=E.layers[E.i];if(E.i++,P.type!=="tilelayer"){if(P.type==="group"){var S=d(c,P,E);x.push(E),E=S}continue}if(P.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+P.name+"'");continue}else if(P.encoding&&P.encoding==="base64"){if(P.chunks)for(var M=0;M<P.chunks.length;M++)P.chunks[M].data=u(P.chunks[M].data);P.data&&(P.data=u(P.data)),delete P.encoding}var b,A,L,R,O=[],D=0;if(p){var B=h(P,"startx",0)+P.x,G=h(P,"starty",0)+P.y;b=new r({name:E.name+P.name,x:E.x+h(P,"offsetx",0)+B*c.tilewidth,y:E.y+h(P,"offsety",0)+G*c.tileheight,width:P.width,height:P.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:E.opacity*P.opacity,visible:E.visible&&P.visible,properties:h(P,"properties",[]),orientation:l(c.orientation)}),b.orientation===y.HEXAGONAL&&(b.hexSideLength=c.hexsidelength);for(var z=0;z<P.height;z++){O[z]=[null];for(var X=0;X<P.width;X++)O[z][X]=null}for(z=0,j=P.chunks.length;z<j;z++)for(var U=P.chunks[z],V=U.x-B,N=U.y-G,W=0,F=0,I=U.data.length;F<I;F++){var k=D+V,Y=W+N;A=n(U.data[F]),A.gid>0?(L=new v(b,A.gid,k,Y,c.tilewidth,c.tileheight),L.rotation=A.rotation,L.flipX=A.flipped,O[Y][k]=L):(R=m?null:new v(b,-1,k,Y,c.tilewidth,c.tileheight),O[Y][k]=R),D++,D===U.width&&(W++,D=0)}}else{b=new r({name:E.name+P.name,x:E.x+h(P,"offsetx",0)+P.x,y:E.y+h(P,"offsety",0)+P.y,width:P.width,height:P.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:E.opacity*P.opacity,visible:E.visible&&P.visible,properties:h(P,"properties",[]),orientation:l(c.orientation)}),b.orientation===y.HEXAGONAL&&(b.hexSideLength=c.hexsidelength);for(var H=[],K=0,j=P.data.length;K<j;K++)A=n(P.data[K]),A.gid>0?(L=new v(b,A.gid,D,O.length,c.tilewidth,c.tileheight),L.rotation=A.rotation,L.flipX=A.flipped,H.push(L)):(R=m?null:new v(b,-1,D,O.length,c.tilewidth,c.tileheight),H.push(R)),D++,D===P.width&&(O.push(H),D=0,H=[])}b.data=O,g.push(b)}return g};a.exports=o},93392:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47975),y=e(97042),d=e(4281),l=e(39642),h=function(r){for(var n=[],v=[],o=null,c,m=0;m<r.tilesets.length;m++){var p=r.tilesets[m];if(p.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(p.image){var g=new u(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,void 0,void 0,p.tileoffset);if(r.version>1){var x=void 0,E=void 0;if(Array.isArray(p.tiles)){x=x||{},E=E||{};for(var P=0;P<p.tiles.length;P++){var S=p.tiles[P];if(S.properties){var M={};S.properties.forEach(function(z){M[z.name]=z.value}),E[S.id]=M}if(S.objectgroup&&((x[S.id]||(x[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var b=S.objectgroup.objects.map(function(z){return d(z)});x[S.id].objectgroup.objects=b}S.animation&&((x[S.id]||(x[S.id]={})).animation=S.animation),S.type&&((x[S.id]||(x[S.id]={})).type=S.type)}}Array.isArray(p.wangsets)&&(x=x||{},E=E||{},l(p.wangsets,x)),x&&(g.tileData=x,g.tileProperties=E)}else if(p.tileproperties&&(g.tileProperties=p.tileproperties),p.tiles){g.tileData=p.tiles;for(c in g.tileData){var A=g.tileData[c].objectgroup;if(A&&A.objects){var L=A.objects.map(function(z){return d(z)});g.tileData[c].objectgroup.objects=L}}}g.updateTileData(p.imagewidth,p.imageheight),n.push(g)}else{var R=new y(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,p.properties),O=0;for(P=0;P<p.tiles.length;P++){S=p.tiles[P];var D=S.image,B=parseInt(S.id,10),G=p.firstgid+B;R.addImage(G,D),O=Math.max(B,O)}R.maxId=O,v.push(R)}o&&(o.lastgid=p.firstgid-1),o=p}return{tilesets:n,imageCollections:v}};a.exports=h},39642:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){for(var y=0;y<e.length;y++){var d=e[y],l=y;if(d.name&&d.name!==""&&(l=d.name),Array.isArray(d.wangtiles)&&d.wangtiles.length>0){var h={},r={},n,v,o;if(Array.isArray(d.edgecolors))for(n=0;n<d.edgecolors.length;n++)o=1+n,v=d.edgecolors[n],v.name!==""&&(h[o]=v.name);if(Array.isArray(d.cornercolors))for(n=0;n<d.cornercolors.length;n++)o=1+n,v=d.cornercolors[n],v.name!==""&&(r[o]=v.name);if(Array.isArray(d.colors))for(n=0;n<d.colors.length;n++)v=d.colors[n],o=1+n,v.name!==""&&(h[o]=r[o]=v.name);for(var c=[h,r,h,r,h,r,h,r],m=0;m<d.wangtiles.length;m++){var p=d.wangtiles[m],g=u[p.tileid]||(u[p.tileid]={});g=g.wangid||(g.wangid={});for(var x=[],E=0;E<Math.min(c.length,p.wangid.length);E++){if(v=p.wangid[E],v===0){x.push(void 0);continue}var P=c[E][v];if(P!==void 0){x.push(P);continue}x.push(v)}g[l]=x}}}};a.exports=T},50044:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(91963),d=e(7599),l=e(57911),h=e(66458),r=new u({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(d.BOOT,this.boot,this),v.sys.events.on(d.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var n=this.systems.events;n.on(d.PRE_UPDATE,this.preUpdate,this),n.on(d.UPDATE,this.update,this),n.once(d.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var v;return n instanceof l?(v=n,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new l(n),this._pendingInsertion.push(v),v},delayedCall:function(n,v,o,c){return this.addEvent({delay:n,callback:v,args:o,callbackScope:c})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var v=0;v<n.length;v++){var o=n[v];h(this._pendingRemoval,o),h(this._pendingInsertion,o),h(this._active,o)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(n===0&&v===0)){var o,c;for(o=0;o<n;o++){c=this._pendingRemoval[o];var m=this._active.indexOf(c);m>-1&&this._active.splice(m,1),c.destroy()}for(o=0;o<v;o++)c=this._pendingInsertion[o],this._active.push(c);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,v){if(this.now=n,!this.paused){v*=this.timeScale;for(var o=0;o<this._active.length;o++){var c=this._active[o];if(!c.paused&&(c.elapsed+=v*c.timeScale,c.elapsed>=c.delay)){var m=c.elapsed-c.delay;if(c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),c.repeatCount>0){if(c.repeatCount--,m>=c.delay)for(;m>=c.delay&&c.repeatCount>0;)c.callback&&c.callback.apply(c.callbackScope,c.args),m-=c.delay,c.repeatCount--;c.elapsed=m,c.hasDispatched=!1}else c.hasDispatched&&this._pendingRemoval.push(c)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(d.PRE_UPDATE,this.preUpdate,this),v.off(d.UPDATE,this.update,this),v.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});y.register("Clock",r,"time"),a.exports=r},57911:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(72632),d=new u({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(l){if(this.delay=y(l,"delay",0),this.repeat=y(l,"repeat",0),this.loop=y(l,"loop",!1),this.callback=y(l,"callback",void 0),this.callbackScope=y(l,"callbackScope",this.callback),this.args=y(l,"args",[]),this.timeScale=y(l,"timeScale",1),this.startAt=y(l,"startAt",0),this.paused=y(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var l=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/l}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(l){l===void 0&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});a.exports=d},97121:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Clock:e(73779),TimerEvent:e(57911)}},64532:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),y=e(56694),d=e(5454),l=e(68710),h=e(91963),r=e(7599),n=e(91944),v=e(39366),o=e(68061),c=e(45641),m=e(56034),p=new y({initialize:function(x){this.scene=x,this.events=x.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(g){Array.isArray(g)||(g=[g]);for(var x=[],E=0;E<g.length;E++){var P=g[E];P instanceof v||P instanceof c?x.push(P):Array.isArray(P.tweens)?x.push(m(this,P)):x.push(o(this,P))}return x.length===1?x[0]:x},add:function(g){var x=g,E=this.tweens;return x instanceof v||x instanceof c||(Array.isArray(x.tweens)?x=m(this,x):x=o(this,x)),E.push(x.reset()),x},addMultiple:function(g){for(var x,E=[],P=this.tweens,S=0;S<g.length;S++)x=g[S],x instanceof v||x instanceof c||(Array.isArray(x.tweens)?x=m(this,x):x=o(this,x)),P.push(x.reset()),E.push(x);return E},chain:function(g){var x=m(this,g);return this.tweens.push(x.init()),x},getChainedTweens:function(g){return g.getChainedTweens()},has:function(g){return this.tweens.indexOf(g)>-1},existing:function(g){return this.has(g)||this.tweens.push(g.reset()),this},addCounter:function(g){var x=l(this,g);return this.tweens.push(x.reset()),x},stagger:function(g,x){return n(g,x)},setLagSmooth:function(g,x){return g===void 0&&(g=1/1e-8),x===void 0&&(x=0),this.maxLag=g,this.lagSkip=Math.min(x,this.maxLag),this},setFps:function(g){return g===void 0&&(g=240),this.gap=1e3/g,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(g){var x=Date.now()-this.prevTime;x>this.maxLag&&(this.startTime+=x-this.lagSkip),this.prevTime+=x;var E=this.prevTime-this.startTime,P=E-this.nextTime,S=E-this.time*1e3;return P>0||g?(E/=1e3,this.time=E,this.nextTime+=P+(P>=this.gap?4:this.gap-P)):S=0,S},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(g){g===void 0&&(g=!1);var x=this.getDelta(g);if(!(x<=0)){this.processing=!0;var E,P,S=[],M=this.tweens;for(E=0;E<M.length;E++)P=M[E],P.update(x)&&S.push(P);var b=S.length;if(b&&M.length>0){for(E=0;E<b;E++){P=S[E];var A=M.indexOf(P);A>-1&&(P.isPendingRemove()||P.isDestroyed())&&(M.splice(A,1),P.destroy())}S.length=0}this.processing=!1}},remove:function(g){return this.processing?g.setPendingRemoveState():(u(this.tweens,g),g.setRemovedState()),this},reset:function(g){return this.existing(g),g.seek(),g.setActiveState(),this},makeActive:function(g){return this.existing(g),g.setActiveState(),this},each:function(g,x){var E,P=[null];for(E=1;E<arguments.length;E++)P.push(arguments[E]);return this.tweens.forEach(function(S){P[0]=S,g.apply(x,P)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(g){var x=[],E=this.tweens;Array.isArray(g)?g=d(g):g=[g];for(var P=g.length,S=0;S<E.length;S++)for(var M=E[S],b=0;b<P;b++)!M.isDestroyed()&&M.hasTarget(g[b])&&x.push(M);return x},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(g){return this.timeScale=g,this},isTweening:function(g){for(var x=this.tweens,E,P=0;P<x.length;P++)if(E=x[P],E.isPlaying()&&E.hasTarget(g))return!0;return!1},killAll:function(){for(var g=this.processing?this.getTweens():this.tweens,x=0;x<g.length;x++)g[x].destroy();return this.processing||(g.length=0),this},killTweensOf:function(g){for(var x=this.getTweensOf(g),E=0;E<x.length;E++)x[E].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",p,"tweens"),a.exports=p},63130:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){return e&&e.hasOwnProperty(u)?e[u]:y};a.exports=T},21902:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(35060),y=e(40587),d=function(l,h){var r=u.Power0;if(typeof l=="string")if(u.hasOwnProperty(l))r=u[l];else{var n="";if(l.indexOf(".")){n=l.substring(l.indexOf(".")+1);var v=n.toLowerCase();v==="in"?n="easeIn":v==="out"?n="easeOut":v==="inout"&&(n="easeInOut")}l=y(l.substring(0,l.indexOf(".")+1)+n),u.hasOwnProperty(l)&&(r=u[l])}else typeof l=="function"&&(r=l);if(!h)return r;var o=h.slice(0);return o.unshift(0),function(c){return o[0]=c,r.apply(this,o)}};a.exports=d},4840:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63210),y=e(88332),d=e(47614),l={bezier:u,catmull:y,catmullrom:y,linear:d},h=function(r){if(r===null)return null;var n=l.linear;return typeof r=="string"?l.hasOwnProperty(r)&&(n=l[r]):typeof r=="function"&&(n=r),n};a.exports=h},28348:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d;if(e.hasOwnProperty(u)){var l=typeof e[u];l==="function"?d=function(h,r,n,v,o,c){return e[u](h,r,n,v,o,c)}:d=function(){return e[u]}}else typeof y=="function"?d=y:d=function(){return y};return d};a.exports=T},92407:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53709),y=function(d){var l,h=[];if(d.hasOwnProperty("props"))for(l in d.props)l.substring(0,1)!=="_"&&h.push({key:l,value:d.props[l]});else for(l in d)u.indexOf(l)===-1&&l.substring(0,1)!=="_"&&h.push({key:l,value:d[l]});return h};a.exports=y},65868:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),y=function(d){var l=u(d,"targets",null);return l===null||(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l])),l};a.exports=y},9744:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),y=e(61616);function d(v){return!!v.getActive&&typeof v.getActive=="function"}function l(v){return!!v.getStart&&typeof v.getStart=="function"}function h(v){return!!v.getEnd&&typeof v.getEnd=="function"}function r(v){return l(v)||h(v)||d(v)}var n=function(v,o){var c,m=function(U,V,N){return N},p=function(U,V,N){return N},g=null,x=typeof o;if(x==="number")m=function(){return o};else if(Array.isArray(o))p=function(){return o[0]},m=function(){return o[o.length-1]};else if(x==="string"){var E=o.toLowerCase(),P=E.substring(0,6)==="random",S=E.substring(0,3)==="int";if(P||S){var M=E.indexOf("("),b=E.indexOf(")"),A=E.indexOf(",");if(M&&b&&A){var L=parseFloat(E.substring(M+1,A)),R=parseFloat(E.substring(A+1,b));P?m=function(){return y(L,R)}:m=function(){return u(L,R)}}else throw new Error("invalid random() format")}else{E=E[0];var O=parseFloat(o.substr(2));switch(E){case"+":m=function(U,V,N){return N+O};break;case"-":m=function(U,V,N){return N-O};break;case"*":m=function(U,V,N){return N*O};break;case"/":m=function(U,V,N){return N/O};break;default:m=function(){return parseFloat(o)}}}}else if(x==="function")m=o;else if(x==="object")if(r(o))d(o)&&(g=o.getActive),h(o)&&(m=o.getEnd),l(o)&&(p=o.getStart);else if(o.hasOwnProperty("value"))c=n(v,o.value);else{var D=o.hasOwnProperty("to"),B=o.hasOwnProperty("from"),G=o.hasOwnProperty("start");if(D&&(B||G)){if(c=n(v,o.to),G){var z=n(v,o.start);c.getActive=z.getEnd}if(B){var X=n(v,o.from);c.getStart=X.getEnd}}}return c||(c={getActive:g,getEnd:m,getStart:p}),c};a.exports=n},68710:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),y=e(99730),d=e(20494),l=e(63130),h=e(21902),r=e(28348),n=e(10850),v=e(9744),o=e(72066),c=e(39366),m=function(p,g,x){if(g instanceof c)return g.parent=p,g;x===void 0?x=y:x=o(y,x);var E=n(g,"from",0),P=n(g,"to",1),S=[{value:E}],M=n(g,"delay",x.delay),b=n(g,"easeParams",x.easeParams),A=n(g,"ease",x.ease),L=v("value",P),R=new c(p,S),O=R.add(0,"value",L.getEnd,L.getStart,L.getActive,h(n(g,"ease",A),n(g,"easeParams",b)),r(g,"delay",M),n(g,"duration",x.duration),l(g,"yoyo",x.yoyo),n(g,"hold",x.hold),n(g,"repeat",x.repeat),n(g,"repeatDelay",x.repeatDelay),!1,!1);O.start=E,O.current=E,R.completeDelay=d(g,"completeDelay",0),R.loop=Math.round(d(g,"loop",0)),R.loopDelay=Math.round(d(g,"loopDelay",0)),R.paused=l(g,"paused",!1),R.persist=l(g,"persist",!1),R.callbackScope=n(g,"callbackScope",R);for(var D=u.TYPES,B=0;B<D.length;B++){var G=D[B],z=n(g,G,!1);if(z){var X=n(g,G+"Params",[]);R.setCallback(G,z,X)}}return R};a.exports=m},91944:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(21902),y=e(10850),d=e(83392),l=function(h,r){r===void 0&&(r={});var n,v=y(r,"start",0),o=y(r,"ease",null),c=y(r,"grid",null),m=y(r,"from",0),p=m==="first",g=m==="center",x=m==="last",E=typeof m=="number",P=Array.isArray(h),S=parseFloat(P?h[0]:h),M=P?parseFloat(h[1]):0,b=Math.max(S,M);if(P&&(v+=S),c){var A=c[0],L=c[1],R=0,O=0,D=0,B=0,G=[];x?(R=A-1,O=L-1):E?(R=m%A,O=Math.floor(m/A)):g&&(R=(A-1)/2,O=(L-1)/2);for(var z=d.MIN_SAFE_INTEGER,X=0;X<L;X++){G[X]=[];for(var U=0;U<A;U++){D=R-U,B=O-X;var V=Math.sqrt(D*D+B*B);V>z&&(z=V),G[X][U]=V}}}var N=o?u(o):null;return c?n=function(W,F,I,k){var Y=0,H=k%A,K=Math.floor(k/A);H>=0&&H<A&&K>=0&&K<L&&(Y=G[K][H]);var j;if(P){var J=M-S;N?j=Y/z*J*N(Y/z):j=Y/z*J}else N?j=Y*S*N(Y/z):j=Y*S;return j+v}:n=function(W,F,I,k,Y){Y--;var H;p?H=k:g?H=Math.abs(Y/2-k):x?H=Y-k:E&&(H=Math.abs(m-k));var K;if(P){var j;g?j=(M-S)/Y*(H*2):j=(M-S)/Y*H,N?K=j*N(H/Y):K=j}else N?K=Y*b*N(H/Y):K=H*S;return K+v},n};a.exports=l},68061:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),y=e(99730),d=e(20494),l=e(63130),h=e(21902),r=e(4840),n=e(28348),v=e(92407),o=e(65868),c=e(10850),m=e(9744),p=e(72066),g=e(39366),x=function(E,P,S){if(P instanceof g)return P.parent=E,P;S===void 0?S=y:S=p(y,S);var M=o(P);!M&&S.targets&&(M=S.targets);for(var b=v(P),A=c(P,"delay",S.delay),L=c(P,"duration",S.duration),R=c(P,"easeParams",S.easeParams),O=c(P,"ease",S.ease),D=c(P,"hold",S.hold),B=c(P,"repeat",S.repeat),G=c(P,"repeatDelay",S.repeatDelay),z=l(P,"yoyo",S.yoyo),X=l(P,"flipX",S.flipX),U=l(P,"flipY",S.flipY),V=c(P,"interpolation",S.interpolation),N=function(Z,q,et,tt){if(et==="texture"){var it=tt,ut=void 0;Array.isArray(tt)?(it=tt[0],ut=tt[1]):tt.hasOwnProperty("value")?(it=tt.value,Array.isArray(tt.value)?(it=tt.value[0],ut=tt.value[1]):typeof tt.value=="string"&&(it=tt.value)):typeof tt=="string"&&(it=tt),Z.addFrame(q,it,ut,n(tt,"delay",A),c(tt,"duration",L),c(tt,"hold",D),c(tt,"repeat",B),c(tt,"repeatDelay",G),l(tt,"flipX",X),l(tt,"flipY",U))}else{var ot=m(et,tt),ht=r(c(tt,"interpolation",V));Z.add(q,et,ot.getEnd,ot.getStart,ot.getActive,h(c(tt,"ease",O),c(tt,"easeParams",R)),n(tt,"delay",A),c(tt,"duration",L),l(tt,"yoyo",z),c(tt,"hold",D),c(tt,"repeat",B),c(tt,"repeatDelay",G),l(tt,"flipX",X),l(tt,"flipY",U),ht,ht?tt:null)}},W=new g(E,M),F=0;F<b.length;F++)for(var I=b[F].key,k=b[F].value,Y=0;Y<M.length;Y++)I==="scale"&&!M[Y].hasOwnProperty("scale")?(N(W,Y,"scaleX",k),N(W,Y,"scaleY",k)):N(W,Y,I,k);W.completeDelay=d(P,"completeDelay",0),W.loop=Math.round(d(P,"loop",0)),W.loopDelay=Math.round(d(P,"loopDelay",0)),W.paused=l(P,"paused",!1),W.persist=l(P,"persist",!1),W.callbackScope=c(P,"callbackScope",W);for(var H=u.TYPES,K=0;K<H.length;K++){var j=H[K],J=c(P,j,!1);if(J){var Q=c(P,j+"Params",[]);W.setCallback(j,J,Q)}}return W};a.exports=x},56034:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),y=e(20494),d=e(63130),l=e(65868),h=e(10850),r=e(68061),n=e(45641),v=function(o,c){if(c instanceof n)return c.parent=o,c;var m=new n(o);m.startDelay=h(c,"delay",0),m.completeDelay=y(c,"completeDelay",0),m.loop=Math.round(y(c,"loop",h(c,"repeat",0))),m.loopDelay=Math.round(y(c,"loopDelay",h(c,"repeatDelay",0))),m.paused=d(c,"paused",!1),m.persist=d(c,"persist",!0),m.callbackScope=h(c,"callbackScope",m);var p,g=u.TYPES;for(p=0;p<g.length;p++){var x=g[p],E=h(c,x,!1);if(E){var P=h(c,x+"Params",[]);m.setCallback(x,E,P)}}var S=h(c,"tweens",null);if(Array.isArray(S)){var M=[],b=l(c),A=void 0;for(b&&(A={targets:b}),p=0;p<S.length;p++)M.push(r(m,S[p],A));m.add(M)}return m};a.exports=v},79619:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="active"},6383:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="complete"},72582:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="loop"},90281:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="pause"},80803:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="repeat"},13640:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="resume"},10472:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="start"},5379:a=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="stop"},43449:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="update"},61541:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports="yoyo"},54272:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};a.exports=u},502:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(6659),d=e(54272),l=e(55303),h=new u({Extends:y,initialize:function(n){y.call(this),this.parent=n,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(d.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(d.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(d.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(d.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(d.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(d.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(d.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,n,v){return v===void 0&&(v=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:n,params:v}),this},setPendingState:function(){this.state=l.PENDING},setActiveState:function(){this.state=l.ACTIVE},setLoopDelayState:function(){this.state=l.LOOP_DELAY},setCompleteDelayState:function(){this.state=l.COMPLETE_DELAY},setStartDelayState:function(){this.state=l.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=l.PENDING_REMOVE},setRemovedState:function(){this.state=l.REMOVED},setFinishedState:function(){this.state=l.FINISHED},setDestroyedState:function(){this.state=l.DESTROYED},isPending:function(){return this.state===l.PENDING},isActive:function(){return this.state===l.ACTIVE},isLoopDelayed:function(){return this.state===l.LOOP_DELAY},isCompleteDelayed:function(){return this.state===l.COMPLETE_DELAY},isStartDelayed:function(){return this.state===l.START_DELAY},isPendingRemove:function(){return this.state===l.PENDING_REMOVE},isRemoved:function(){return this.state===l.REMOVED},isFinished:function(){return this.state===l.FINISHED},isDestroyed:function(){return this.state===l.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],a.exports=h},65521:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),y=e(54272),d=e(55303),l=new u({initialize:function(r,n,v,o,c,m,p,g,x,E){this.tween=r,this.targetIndex=n,this.duration=o,this.totalDuration=0,this.delay=0,this.getDelay=v,this.yoyo=c,this.hold=m,this.repeat=p,this.repeatDelay=g,this.repeatCounter=0,this.flipX=x,this.flipY=E,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=d.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=d.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=d.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=d.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=d.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=d.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=d.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=d.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===d.CREATED},isDelayed:function(){return this.state===d.DELAY},isPendingRender:function(){return this.state===d.PENDING_RENDER},isPlayingForward:function(){return this.state===d.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===d.PLAYING_BACKWARD},isHolding:function(){return this.state===d.HOLD_DELAY},isRepeating:function(){return this.state===d.REPEAT_DELAY},isComplete:function(){return this.state===d.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,r=h.totalTargets,n=this.targetIndex,v=h.targets[n],o=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(v,o,0,n,r,h),this.repeatCounter=this.repeat===-1?d.MAX:this.repeat,this.setPendingRenderState();var c=this.duration+this.hold;this.yoyo&&(c+=this.duration);var m=c+this.repeatDelay;this.totalDuration=this.delay+c,this.repeat===-1?(this.totalDuration+=m*d.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=m*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,r,n){var v=this.tween,o=v.totalTargets,c=this.targetIndex,m=v.targets[c],p=this.key,g=p!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&m.toggleFlipX(),this.flipY&&m.toggleFlipY(),g&&(r||n)&&(this.start=this.getStartValue(m,p,this.start,c,o,v)),n){this.setPlayingBackwardState(),this.dispatchEvent(y.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,g&&(this.end=this.getEndValue(m,p,this.start,c,o,v)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,g&&(this.current=this.start,m[p]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(y.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});a.exports=l},99730:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};a.exports=T},53709:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),y=e(56694),d=e(54272),l=e(99325),h=e(61286),r=e(83392),n=e(55303),v=e(15718),o=e(96490),c=new y({Extends:u,initialize:function(p,g){u.call(this,p),this.targets=g,this.totalTargets=g.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(m,p,g,x,E,P,S,M,b,A,L,R,O,D,B,G){var z=new v(this,m,p,g,x,E,P,S,M,b,A,L,R,O,D,B,G);return this.totalData=this.data.push(z),z},addFrame:function(m,p,g,x,E,P,S,M,b,A){var L=new o(this,m,p,g,x,E,P,S,M,b,A);return this.totalData=this.data.push(L),L},getValue:function(m){m===void 0&&(m=0);var p=null;return this.data&&(p=this.data[m].current),p},hasTarget:function(m){return this.targets&&this.targets.indexOf(m)!==-1},updateTo:function(m,p,g){if(g===void 0&&(g=!1),m!=="texture")for(var x=0;x<this.totalData;x++){var E=this.data[x];E.key===m&&(E.isPlayingForward()||E.isPlayingBackward())&&(E.end=p,g&&(E.start=E.current))}return this},restart:function(){switch(this.state){case n.REMOVED:case n.FINISHED:this.seek(),this.parent.makeActive(this);break;case n.PENDING:case n.PENDING_REMOVE:this.parent.reset(this);break;case n.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(d.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,u.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(m,p,g){if(m===void 0&&(m=0),p===void 0&&(p=16.6),g===void 0&&(g=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;g||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(d.TWEEN_ACTIVE,"onActive");var x=this.paused;if(this.paused=!1,m>0){for(var E=Math.floor(m/p),P=m-E*p,S=0;S<E;S++)this.update(p);P>0&&this.update(P)}return this.paused=x,this.isSeeking=!1,this},initTweenData:function(m){m===void 0&&(m=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var p=this.data,g=0;g<this.totalData;g++)p[g].reset(m);this.duration=Math.max(this.duration,.01);var x=this.duration,E=this.completeDelay,P=this.loopCounter,S=this.loopDelay;P>0?this.totalDuration=x+E+(x+S)*P:this.totalDuration=x+E},reset:function(m){return m===void 0&&(m=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=n.MAX),m||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(d.TWEEN_ACTIVE,"onActive")),this},update:function(m){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(m*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(m),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(m),!1;this.hasStarted||(this.startDelay-=m,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(d.TWEEN_START,"onStart"),m=0));var p=!1;if(this.isActive())for(var g=this.data,x=0;x<this.totalData;x++)g[x].update(m)&&(p=!0);this.elapsed+=m,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=m,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),p||this.nextState();var E=this.isPendingRemove();return E&&this.persist&&(this.setFinishedState(),E=!1),E},forward:function(m){return this.update(m),this},rewind:function(m){return this.update(-m),this},dispatchEvent:function(m,p){if(!this.isSeeking){this.emit(m,this,this.targets);var g=this.callbacks[p];g&&g.func.apply(this.callbackScope,[this,this.targets].concat(g.params))}},destroy:function(){u.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(m){return this.scene.sys.tweens.add(m)}),l.register("tween",function(m){return this.scene.sys.tweens.create(m)}),a.exports=c},45641:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),y=e(502),d=e(56694),l=e(54272),h=e(99325),r=e(61286),n=e(55303),v=new d({Extends:y,initialize:function(c){y.call(this,c),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?n.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(l.TWEEN_ACTIVE,"onActive"),this},add:function(o){var c=this.parent.create(o);Array.isArray(c)||(c=[c]);for(var m=this.data,p=0;p<c.length;p++){var g=c[p];g.parent=this,m.push(g.reset())}return this.totalData=m.length,this},remove:function(o){return u(this.data,o),o.setRemovedState(),o===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(o){for(var c=this.data,m=0;m<this.totalData;m++)if(c[m].hasTarget(o))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(o){return o.seek(),o.setActiveState(),this},makeActive:function(o){return o.reset(),o.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(l.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var o=this.data,c=this.totalData,m=0;m<c;m++)o[m].reset(!1);this.currentIndex=0,this.currentTween=o[0]},update:function(o){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;o*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(o):this.isCompleteDelayed()?this.updateCompleteDelay(o):this.isStartDelayed()&&(o=this.updateStartCountdown(o));var c=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(o)&&this.nextTween()&&this.nextState(),c=this.isPendingRemove(),c&&this.persist&&(this.setFinishedState(),c=!1)),c},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(o){this.currentIndex=o,this.currentTween=this.data[o],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(l.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(o,c){this.emit(o,this);var m=this.callbacks[c];m&&m.func.apply(this.callbackScope,[this].concat(m.params))},destroy:function(){y.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(o){return this.scene.sys.tweens.chain(o)}),h.register("tweenchain",function(o){return this.scene.sys.tweens.create(o)}),a.exports=v},15718:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65521),y=e(82897),d=e(56694),l=e(54272),h=new d({Extends:u,initialize:function(n,v,o,c,m,p,g,x,E,P,S,M,b,A,L,R,O){u.call(this,n,v,x,E,P,S,M,b,A,L),this.key=o,this.getActiveValue=p,this.getEndValue=c,this.getStartValue=m,this.ease=g,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=R,this.interpolationData=O},reset:function(r){u.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex],v=this.key;r&&(n[v]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(n[v]=this.getActiveValue(n,v,0))},update:function(r){var n=this.tween,v=n.totalTargets,o=this.targetIndex,c=n.targets[o],m=this.key;if(!c)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(c,m,c[m],o,v,n),this.end=this.getEndValue(c,m,this.start,o,v,n),this.current=this.start,c[m]=this.start,this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),g=this.isPlayingBackward();if(p||g){var x=this.elapsed,E=this.duration,P=0,S=!1;x+=r,x>=E?(P=x-E,x=E,S=!0):x<0&&(x=0);var M=y(x/E,0,1);if(this.elapsed=x,this.progress=M,this.previous=this.current,S)p?(this.current=this.end,c[m]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(P)):(this.current=this.start,c[m]=this.start,this.setStateFromStart(P));else{p||(M=1-M);var b=this.ease(M);this.interpolation?this.current=this.interpolation(this.interpolationData,b):this.current=this.start+(this.end-this.start)*b,c[m]=this.current}this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,n){var v=this.tween;if(!v.isSeeking){var o=v.targets[this.targetIndex],c=this.key,m=this.current,p=this.previous;v.emit(r,v,c,o,m,p);var g=v.callbacks[n];g&&g.func.apply(v.callbackScope,[v,o,c,m,p].concat(g.params))}},destroy:function(){u.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});a.exports=h},96490:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65521),y=e(82897),d=e(56694),l=e(54272),h=new d({Extends:u,initialize:function(n,v,o,c,m,p,g,x,E,P,S){u.call(this,n,v,m,p,!1,g,x,E,P,S),this.key="texture",this.startTexture=null,this.endTexture=o,this.startFrame=null,this.endFrame=c,this.yoyo=x!==0},reset:function(r){u.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=n.texture.key,this.startFrame=n.frame.name),r&&n.setTexture(this.startTexture,this.startFrame)},update:function(r){var n=this.tween,v=this.targetIndex,o=n.targets[v];if(!o)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&o.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var c=this.isPlayingForward(),m=this.isPlayingBackward();if(c||m){var p=this.elapsed,g=this.duration,x=0,E=!1;p+=r,p>=g?(x=p-g,p=g,E=!0):p<0&&(p=0);var P=y(p/g,0,1);this.elapsed=p,this.progress=P,E&&(c?(o.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(x)):(o.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(x))),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,n){var v=this.tween;if(!v.isSeeking){var o=v.targets[this.targetIndex],c=this.key;v.emit(r,v,c,o);var m=v.callbacks[n];m&&m.func.apply(v.callbackScope,[v,o,c].concat(m.params))}},destroy:function(){u.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});a.exports=h},55303:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};a.exports=T},56694:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function e(h,r,n){var v=n?h[r]:Object.getOwnPropertyDescriptor(h,r);return!n&&v.value&&typeof v.value=="object"&&(v=v.value),v&&T(v)?(typeof v.enumerable>"u"&&(v.enumerable=!0),typeof v.configurable>"u"&&(v.configurable=!0),v):!1}function u(h,r){var n=Object.getOwnPropertyDescriptor(h,r);return n?(n.value&&typeof n.value=="object"&&(n=n.value),n.configurable===!1):!1}function y(h,r,n,v){for(var o in r)if(!!r.hasOwnProperty(o)){var c=e(r,o,n);if(c!==!1){var m=v||h;if(u(m.prototype,o)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,o,c)}else h.prototype[o]=r[o]}}function d(h,r){if(!!r){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++)y(h,r[n].prototype||r[n])}}function l(h){h||(h={});var r,n;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");r=h.initialize,delete h.initialize}else if(h.Extends){var v=h.Extends;r=function(){v.apply(this,arguments)}}else r=function(){};h.Extends?(r.prototype=Object.create(h.Extends.prototype),r.prototype.constructor=r,n=h.Extends,delete h.Extends):r.prototype.constructor=r;var o=null;return h.Mixins&&(o=h.Mixins,delete h.Mixins),d(r,o),y(r,h,!0,n),r}l.extend=y,l.mixin=d,l.ignoreFinals=!1,a.exports=l},72283:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};a.exports=T},10618:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return null};a.exports=T},78991:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l){if(l===void 0&&(l=e),y>0){var h=y-e.length;if(h<=0)return null}if(!Array.isArray(u))return e.indexOf(u)===-1?(e.push(u),d&&d.call(l,u),u):null;for(var r=u.length-1;r>=0;)e.indexOf(u[r])!==-1&&u.splice(r,1),r--;if(r=u.length,r===0)return null;y>0&&r>h&&(u.splice(h),r=h);for(var n=0;n<r;n++){var v=u[n];e.push(v),d&&d.call(l,v)}return u};a.exports=T},48522:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d,l,h){if(y===void 0&&(y=0),h===void 0&&(h=e),d>0){var r=d-e.length;if(r<=0)return null}if(!Array.isArray(u))return e.indexOf(u)===-1?(e.splice(y,0,u),l&&l.call(h,u),u):null;for(var n=u.length-1;n>=0;)e.indexOf(u[n])!==-1&&u.pop(),n--;if(n=u.length,n===0)return null;d>0&&n>r&&(u.splice(r),n=r);for(var v=n-1;v>=0;v--){var o=u[v];e.splice(y,0,o),l&&l.call(h,o)}return u};a.exports=T},58742:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.indexOf(u);return y!==-1&&y<e.length&&(e.splice(y,1),e.push(u)),u};a.exports=T},30164:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),y=function(d,l,h,r,n){r===void 0&&(r=0),n===void 0&&(n=d.length);var v=0;if(u(d,r,n))for(var o=r;o<n;o++){var c=d[o];c[l]===h&&v++}return v};a.exports=y},36337:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d,l=[null];for(d=3;d<arguments.length;d++)l.push(arguments[d]);for(d=0;d<e.length;d++)l[0]=e[d],u.apply(y,l);return e};a.exports=T},46208:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),y=function(d,l,h,r,n){if(r===void 0&&(r=0),n===void 0&&(n=d.length),u(d,r,n)){var v,o=[null];for(v=5;v<arguments.length;v++)o.push(arguments[v]);for(v=r;v<n;v++)o[0]=d[v],l.apply(h,o)}return d};a.exports=y},2406:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u.length){if(u.length===1)return u[0]}else return NaN;var d=1,l,h;if(y){if(e<u[0][y])return u[0];for(;u[d][y]<e;)d++}else for(;u[d]<e;)d++;return d>u.length&&(d=u.length),y?(l=u[d-1][y],h=u[d][y],h-e<=e-l?u[d]:u[d-1]):(l=u[d-1],h=u[d],h-e<=e-l?h:l)};a.exports=T},5454:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=[]);for(var y=0;y<e.length;y++)Array.isArray(e[y])?T(e[y],u):u.push(e[y]);return u};a.exports=T},71608:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),y=function(d,l,h,r,n){r===void 0&&(r=0),n===void 0&&(n=d.length);var v=[];if(u(d,r,n))for(var o=r;o<n;o++){var c=d[o];(!l||l&&h===void 0&&c.hasOwnProperty(l)||l&&h!==void 0&&c[l]===h)&&v.push(c)}return v};a.exports=y},51463:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),y=function(d,l,h,r,n){if(r===void 0&&(r=0),n===void 0&&(n=d.length),u(d,r,n))for(var v=r;v<n;v++){var o=d[v];if(!l||l&&h===void 0&&o.hasOwnProperty(l)||l&&h!==void 0&&o[l]===h)return o}return null};a.exports=y},72861:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){u===void 0&&(u=0),y===void 0&&(y=e.length);var d=u+Math.floor(Math.random()*y);return e[d]===void 0?null:e[d]};a.exports=T},24218:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u===y)return e;var d=e.indexOf(u),l=e.indexOf(y);if(d<0||l<0)throw new Error("Supplied items must be elements of the same array");return d>l||(e.splice(d,1),l===e.length-1?e.push(u):e.splice(l,0,u)),e};a.exports=T},58258:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u===y)return e;var d=e.indexOf(u),l=e.indexOf(y);if(d<0||l<0)throw new Error("Supplied items must be elements of the same array");return d<l||(e.splice(d,1),l===0?e.unshift(u):e.splice(l,0,u)),e};a.exports=T},51172:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.indexOf(u);if(y>0){var d=e[y-1],l=e.indexOf(d);e[y]=d,e[l]=u}return e};a.exports=T},68396:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=e.indexOf(u);if(d===-1||y<0||y>=e.length)throw new Error("Supplied index out of bounds");return d!==y&&(e.splice(d,1),e.splice(y,0,u)),u};a.exports=T},27555:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.indexOf(u);if(y!==-1&&y<e.length-1){var d=e[y+1],l=e.indexOf(d);e[y]=d,e[l]=u}return e};a.exports=T},13401:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=[],h,r=!1;if((y||d)&&(r=!0,y||(y=""),d||(d="")),u<e)for(h=e;h>=u;h--)r?l.push(y+h.toString()+d):l.push(h);else for(h=e;h<=u;h++)r?l.push(y+h.toString()+d):l.push(h);return l};a.exports=T},89955:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(67233),y=function(d,l,h){d===void 0&&(d=0),l===void 0&&(l=null),h===void 0&&(h=1),l===null&&(l=d,d=0);for(var r=[],n=Math.max(u((l-d)/(h||1)),0),v=0;v<n;v++)r.push(d),d+=h;return r};a.exports=y},53466:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(y,d,l){var h=y[d];y[d]=y[l],y[l]=h}function e(y,d){return y<d?-1:y>d?1:0}var u=function(y,d,l,h,r){for(l===void 0&&(l=0),h===void 0&&(h=y.length-1),r===void 0&&(r=e);h>l;){if(h-l>600){var n=h-l+1,v=d-l+1,o=Math.log(n),c=.5*Math.exp(2*o/3),m=.5*Math.sqrt(o*c*(n-c)/n)*(v-n/2<0?-1:1),p=Math.max(l,Math.floor(d-v*c/n+m)),g=Math.min(h,Math.floor(d+(n-v)*c/n+m));u(y,d,p,g,r)}var x=y[d],E=l,P=h;for(T(y,l,d),r(y[h],x)>0&&T(y,l,h);E<P;){for(T(y,E,P),E++,P--;r(y[E],x)<0;)E++;for(;r(y[P],x)>0;)P--}r(y[l],x)===0?T(y,l,P):(P++,T(y,P,h)),P<=d&&(l=P+1),d<=P&&(h=P-1)}};a.exports=u},75757:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),y=e(18592),d=function(h,r,n){for(var v=[],o=0;o<h.length;o++)for(var c=0;c<r.length;c++)for(var m=0;m<n;m++)v.push({a:h[o],b:r[c]});return v},l=function(h,r,n){var v=u(n,"max",0),o=u(n,"qty",1),c=u(n,"random",!1),m=u(n,"randomB",!1),p=u(n,"repeat",0),g=u(n,"yoyo",!1),x=[];if(m&&y(r),p===-1)if(v===0)p=0;else{var E=h.length*r.length*o;g&&(E*=2),p=Math.ceil(v/E)}for(var P=0;P<=p;P++){var S=d(h,r,o);c&&y(S),x=x.concat(S),g&&(S.reverse(),x=x.concat(S))}return v&&x.splice(v),x};a.exports=l},66458:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72677),y=function(d,l,h,r){r===void 0&&(r=d);var n;if(!Array.isArray(l))return n=d.indexOf(l),n!==-1?(u(d,n),h&&h.call(r,l),l):null;for(var v=l.length-1,o=[];v>=0;){var c=l[v];n=d.indexOf(c),n!==-1&&(u(d,n),o.push(c),h&&h.call(r,c)),v--}return o};a.exports=y},8324:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72677),y=function(d,l,h,r){if(r===void 0&&(r=d),l<0||l>d.length-1)throw new Error("Index out of bounds");var n=u(d,l);return h&&h.call(r,n),n};a.exports=y},47427:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),y=function(d,l,h,r,n){if(l===void 0&&(l=0),h===void 0&&(h=d.length),n===void 0&&(n=d),u(d,l,h)){var v=h-l,o=d.splice(l,v);if(r)for(var c=0;c<o.length;c++){var m=o[c];r.call(n,m)}return o}else return[]};a.exports=y},50147:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72677),y=function(d,l,h){l===void 0&&(l=0),h===void 0&&(h=d.length);var r=l+Math.floor(Math.random()*h);return u(d,r)};a.exports=y},80402:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=e.indexOf(u),l=e.indexOf(y);return d!==-1&&l===-1?(e[d]=y,!0):!1};a.exports=T},77640:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=1);for(var y=null,d=0;d<u;d++)y=e.shift(),e.push(y);return y};a.exports=T},38487:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){u===void 0&&(u=1);for(var y=null,d=0;d<u;d++)y=e.pop(),e.unshift(y);return y};a.exports=T},45838:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){var l=e.length;if(u<0||u>l||u>=y||y>l){if(d)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};a.exports=T},27847:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){var y=e.indexOf(u);return y!==-1&&y>0&&(e.splice(y,1),e.unshift(u)),u};a.exports=T},6034:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),y=function(d,l,h,r,n){if(r===void 0&&(r=0),n===void 0&&(n=d.length),u(d,r,n))for(var v=r;v<n;v++){var o=d[v];o.hasOwnProperty(l)&&(o[l]=h)}return d};a.exports=y},18592:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var u=e.length-1;u>0;u--){var y=Math.floor(Math.random()*(u+1)),d=e[u];e[u]=e[y],e[y]=d}return e};a.exports=T},28834:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u=/\D/g;return e.sort(function(y,d){return parseInt(y.replace(u,""),10)-parseInt(d.replace(u,""),10)}),e};a.exports=T},72677:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){if(!(u>=e.length)){for(var y=e.length-1,d=e[u],l=u;l<y;l++)e[l]=e[l+1];return e.length=y,d}};a.exports=T},17922:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(77290);function y(r,n){return String(r).localeCompare(n)}function d(r,n){var v=r.length;if(v<=1)return r;for(var o=new Array(v),c=1;c<v;c*=2){l(r,n,c,o);var m=r;r=o,o=m}return r}function l(r,n,v,o){var c=r.length,m=0,p=v*2,g,x,E,P,S;for(g=0;g<c;g+=p)for(x=g+v,E=x+v,x>c&&(x=c),E>c&&(E=c),P=g,S=x;;)if(P<x&&S<E)n(r[P],r[S])<=0?o[m++]=r[P++]:o[m++]=r[S++];else if(P<x)o[m++]=r[P++];else if(S<E)o[m++]=r[S++];else break}var h=function(r,n){if(n===void 0&&(n=y),!r||r.length<2)return r;if(u.features.stableSort)return r.sort(n);var v=d(r,n);return v!==r&&l(v,null,r.length,r),r};a.exports=h},96928:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(u===y)return e;var d=e.indexOf(u),l=e.indexOf(y);if(d<0||l<0)throw new Error("Supplied items must be elements of the same array");return e[d]=y,e[l]=u,e};a.exports=T},59959:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var u=e[0].length,y=1;y<e.length;y++)if(e[y].length!==u)return!1;return!0};a.exports=T},68428:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(76400),y=e(97494),d=function(l){var h="";if(!y(l))return h;for(var r=0;r<l.length;r++){for(var n=0;n<l[r].length;n++){var v=l[r][n].toString();v!=="undefined"?h+=u(v,2):h+="?",n<l[r].length-1&&(h+=" |")}if(r<l.length-1){h+=`
`;for(var o=0;o<l[r].length;o++)h+="---",o<l[r].length-1&&(h+="+");h+=`
`}}return h};a.exports=d},59521:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.reverse()};a.exports=T},51995:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var u=0;u<e.length;u++)e[u].reverse();return e};a.exports=T},89011:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63515),y=function(d){return u(d,180)};a.exports=y},42549:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63515),y=function(d){return u(d,90)};a.exports=y},63515:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97494),y=e(78581),d=function(l,h){if(h===void 0&&(h=90),!u(l))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")l=y(l),l.reverse();else if(h===-90||h===270||h==="rotateRight")l.reverse(),l=y(l);else if(Math.abs(h)===180||h==="rotate180"){for(var r=0;r<l.length;r++)l[r].reverse();l.reverse()}return l};a.exports=d},14305:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63515),y=function(d){return u(d,-90)};a.exports=y},27365:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(77640),y=e(38487),d=function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),r!==0&&(r<0?u(l,Math.abs(r)):y(l,r)),h!==0)for(var n=0;n<l.length;n++){var v=l[n];h<0?u(v,Math.abs(h)):y(v,h)}return l};a.exports=d},78581:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var u=e.length,y=e[0].length,d=new Array(y),l=0;l<y;l++){d[l]=new Array(u);for(var h=u-1;h>-1;h--)d[l][h]=e[h][l]}return d};a.exports=T},13515:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:a=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(u,y){for(var d=new Uint8Array(u),l=d.length,h=y?"data:"+y+";base64,":"",r=0;r<l;r+=3)h+=T[d[r]>>2],h+=T[(d[r]&3)<<4|d[r+1]>>4],h+=T[(d[r+1]&15)<<2|d[r+2]>>6],h+=T[d[r+2]&63];return l%3===2?h=h.substring(0,h.length-1)+"=":l%3===1&&(h=h.substring(0,h.length-2)+"=="),h};a.exports=e},82329:a=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),u=0;u<T.length;u++)e[T.charCodeAt(u)]=u;var y=function(d){d=d.substr(d.indexOf(",")+1);var l=d.length,h=l*.75,r=0,n,v,o,c;d[l-1]==="="&&(h--,d[l-2]==="="&&h--);for(var m=new ArrayBuffer(h),p=new Uint8Array(m),g=0;g<l;g+=4)n=e[d.charCodeAt(g)],v=e[d.charCodeAt(g+1)],o=e[d.charCodeAt(g+2)],c=e[d.charCodeAt(g+3)],p[r++]=n<<2|v>>4,p[r++]=(v&15)<<4|o>>2,p[r++]=(o&3)<<6|c&63;return m};a.exports=y},78417:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u={};for(var y in e)Array.isArray(e[y])?u[y]=e[y].slice(0):u[y]=e[y];return u};a.exports=T},28699:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var u,y,d;if(typeof e!="object"||e===null)return e;u=Array.isArray(e)?[]:{};for(d in e)y=e[d],u[d]=T(y);return u};a.exports=T},98611:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(42911),y=function(){var d,l,h,r,n,v,o=arguments[0]||{},c=1,m=arguments.length,p=!1;for(typeof o=="boolean"&&(p=o,o=arguments[1]||{},c=2),m===c&&(o=this,--c);c<m;c++)if((d=arguments[c])!=null)for(l in d)h=o[l],r=d[l],o!==r&&(p&&r&&(u(r)||(n=Array.isArray(r)))?(n?(n=!1,v=h&&Array.isArray(h)?h:[]):v=h&&u(h)?h:{},o[l]=y(p,v,r)):r!==void 0&&(o[l]=r));return o};a.exports=y},20494:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(5923),y=e(10850),d=function(l,h,r){var n=y(l,h,null);if(n===null)return r;if(Array.isArray(n))return u.RND.pick(n);if(typeof n=="object"){if(n.hasOwnProperty("randInt"))return u.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return u.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if(typeof n=="function")return n(h);return n};a.exports=d},72632:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){var d=typeof e;return!e||d==="number"||d==="string"?y:e.hasOwnProperty(u)&&e[u]!==void 0?e[u]:y};a.exports=T},94324:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),y=e(82897),d=function(l,h,r,n,v){v===void 0&&(v=r);var o=u(l,h,v);return y(o,r,n)};a.exports=d},10850:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){if(!e&&!d||typeof e=="number")return y;if(e&&e.hasOwnProperty(u))return e[u];if(d&&d.hasOwnProperty(u))return d[u];if(u.indexOf(".")!==-1){for(var l=u.split("."),h=e,r=d,n=y,v=y,o=!0,c=!0,m=0;m<l.length;m++)h&&h.hasOwnProperty(l[m])?(n=h[l[m]],h=h[l[m]]):o=!1,r&&r.hasOwnProperty(l[m])?(v=r[l[m]],r=r[l[m]]):c=!1;return o?n:c?v:y}else return y};a.exports=T},87701:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){for(var y=0;y<u.length;y++)if(!e.hasOwnProperty(u[y]))return!1;return!0};a.exports=T},53523:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){for(var y=0;y<u.length;y++)if(e.hasOwnProperty(u[y]))return!0;return!1};a.exports=T},19256:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.hasOwnProperty(u)};a.exports=T},42911:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};a.exports=T},30657:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),y=function(d,l){var h=u(d);for(var r in l)h.hasOwnProperty(r)||(h[r]=l[r]);return h};a.exports=y},72066:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),y=function(d,l){var h=u(d);for(var r in l)h.hasOwnProperty(r)&&(h[r]=l[r]);return h};a.exports=y},28820:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19256),y=function(d,l){for(var h={},r=0;r<l.length;r++){var n=l[r];u(d,n)&&(h[n]=d[n])}return h};a.exports=y},22440:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(u))return e[u]=y,!0;if(u.indexOf(".")!==-1){for(var d=u.split("."),l=e,h=e,r=0;r<d.length;r++)if(l.hasOwnProperty(d[r]))h=l,l=l[d[r]];else return!1;return h[d[d.length-1]]=y,!0}return!1};a.exports=T},64615:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return e.replace(/%([0-9]+)/g,function(y,d){return u[Number(d)-1]})};a.exports=T},76400:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u,y,d){u===void 0&&(u=0),y===void 0&&(y=" "),d===void 0&&(d=3),e=e.toString();var l=0;if(u+1>=e.length)switch(d){case 1:e=new Array(u+1-e.length).join(y)+e;break;case 3:var h=Math.ceil((l=u-e.length)/2),r=l-h;e=new Array(r+1).join(y)+e+new Array(h+1).join(y);break;default:e=e+new Array(u+1-e.length).join(y);break}return e};a.exports=T},76872:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,u){return u===0?e.slice(1):e.slice(0,u-1)+e.slice(u)};a.exports=T},8051:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.split("").reverse().join("")};a.exports=T},76583:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var u=Math.random()*16|0,y=e==="x"?u:u&3|8;return y.toString(16)})};a.exports=T},40587:a=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e&&e[0].toUpperCase()+e.slice(1)};a.exports=T},50379:(a,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */a.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},f={};function C(a){var T=f[a];if(T!==void 0)return T.exports;var e=f[a]={exports:{}};return i[a](e,e.exports,C),e.exports}C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var w=C(92491);return w})())})(Nn);const rt=Nn.exports,Er=(s,t)=>s+t;class op{constructor(){$(this,"obstacles",new Map);$(this,"sprites",new Map);$(this,"values",new Map)}add(t,i,f){const C=Er(t,f.id);if(this.obstacles.has(C))throw new Error("obstacle "+t+"."+f.id+" already exits at this key");this.obstacles.set(C,f),i!==void 0&&this.sprites.set(C,i)}addWithValues(t,i,f,C){const w=Er(t,f.id);if(this.obstacles.has(w))throw new Error("obstacle already exits at this key");this.values.set(w,C),this.obstacles.set(w,f),i!==void 0&&this.sprites.set(w,i)}getValues(t,i){const f=Er(t,i.id);return this.values.get(f)}get(t,i){const f=Er(t,i.id);return this.obstacles.get(f)}remove(t,i){const f=Er(t,i.id);return this.obstacles.delete(f)}isType(t,i){const f=Er(t,i.id);return this.obstacles.has(f)}destroy(t){this.sprites.forEach((i,f)=>{i.destroy(),this.obstacles.delete(f)}),this.obstacles.forEach(i=>{t.matter.world.remove(i)}),this.obstacles.clear(),this.values.clear(),this.sprites.clear()}}class fe{constructor(t,i){$(this,"context");$(this,"name");$(this,"currentState");$(this,"isSwitchingState",!1);$(this,"stateQueue",[]);$(this,"states",new Map);$(this,"paused",!1);this.context=t,this.name=i!=null?i:"ra8bit"}isCurrentState(t){return this.currentState?this.currentState.name===t:!1}addState(t,i){var f,C,w;return this.states.set(t,{name:t,onEnter:(f=i==null?void 0:i.onEnter)==null?void 0:f.bind(this.context),onUpdate:(C=i==null?void 0:i.onUpdate)==null?void 0:C.bind(this.context),onExit:(w=i==null?void 0:i.onExit)==null?void 0:w.bind(this.context)}),this}setState(t){var i,f;if(!this.states.has(t)){console.log("No such state",t);return}if(this.isSwitchingState){this.stateQueue.push(t);return}return this.isSwitchingState=!0,this.currentState&&this.currentState.onExit&&this.currentState.onExit(),this.currentState=this.states.get(t),(i=this.currentState)!=null&&i.onEnter&&((f=this.currentState)==null||f.onEnter()),this.isSwitchingState=!1,this}pause(){this.paused=!0}resume(){this.paused=!1}getCurrentState(){var t;return(t=this.currentState)==null?void 0:t.name}update(t){if(!this.paused){if(this.stateQueue.length>0){const i=this.stateQueue.shift();this.setState(i);return}!this.currentState||this.currentState.onUpdate&&this.currentState.onUpdate(t)}}destroy(){this.states.clear()}}const _=new rt.Events.EventEmitter;class Vy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"moveTime",0);$(this,"name");$(this,"velocityX",7);this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.velocityX=Phaser.Math.Between(6.55,7.25),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this),this.velocityX=Phaser.Math.FloatBetween(5,8)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-1*this.velocityX),this.moveTime>2e3&&this.stateMachine.setState("move-right")}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(this.velocityX),this.moveTime>2e3&&this.stateMachine.setState("move-left")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.play("dead"),this.sprite.on("animationcomplete",()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}keepObject(){return!this.garbage}createAnims(){const t=Phaser.Math.Between(8,12);this.sprite.anims.create({key:"idle",frameRate:t,repeat:-1,frames:this.sprite.anims.generateFrameNames("bat",{start:0,end:3,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:t,repeat:0,frames:this.sprite.anims.generateFrameNames("bat",{start:0,end:1,prefix:"1_Dead",suffix:".webp"})})}}class Uy{constructor(t,i,f,C){$(this,"scene");$(this,"sprite");$(this,"heart");$(this,"stateMachine");$(this,"garbage",!1);$(this,"name");$(this,"player");this.scene=t,this.sprite=i,this.name=f,t.add.image,this.createAnims(),this.garbage=!1,this.stateMachine=new fe(this),this.player=C==null?void 0:C.getSprite(),this.heart=void 0,this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),this.cleanup()}update(t){if(this.stateMachine.update(t),!(this.stateMachine.getCurrentState()!=="idle"||this.player===void 0)&&(this.player.body.position.x>this.sprite.body.position.x?this.sprite.flipX=!0:this.sprite.flipX=!1,this.heart===void 0&&Phaser.Math.Distance.BetweenPoints(this.sprite.body.position,this.player.body.position)<4*64)){this.heart=this.scene.add.image(this.sprite.x-4,this.sprite.y-this.sprite.height-8,"health",4).setScale(.5,.5);const i={targets:this.heart,scaleX:1.25,scaleY:1.25,duration:1500,ease:"Sine.easeInOut",yoyo:!0,repeat:0,onComplete:()=>{this.heart.destroy(),this.heart=void 0}};this.scene.tweens.add(i)}}getSprite(){return this.sprite}idleOnEnter(){this.sprite.play("idle")}handleStomped(t){this.sprite!==t&&!this.garbage||(_.off(this.name+"-stomped",this.handleStomped,this),this.garbage=!0,this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.on("animationcomplete",()=>{this.cleanup()}),this.heart!==void 0&&this.heart.setVisible(!1),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:2,repeat:-1,frames:this.sprite.anims.generateFrameNames("bear",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("bear",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}function Bs(s,t,i,f,C){const w=i.body.velocity.x<0?-1:1;let a=i.body.position.x;a+=w*C*64,a+=w*(i.width*i.centerOfMass.x);let T=i.body.position.y+i.centerOfMass.y*i.height;T+=32;const e=s.getTileAtWorldXY(a,T,void 0,t,"ground");return(e==null?void 0:e.properties.damage)>0?null:e!=null}class zy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"moveTime",0);$(this,"name");this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(3),this.moveTime>45e3&&this.stateMachine.setState("move-right")}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-3),this.moveTime>45e3&&this.stateMachine.setState("move-left")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.on("animationcomplete",()=>{this.cleanup()}),this.stateMachine.setState("dead"))}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-right"):this.stateMachine.setState("move-left"))}lookahead(t){var C;if(this.sprite.active==!1)return!1;const i=this.sprite.x;this.sprite.y;const f=t.widthInPixels;return i>=f-this.sprite.width?(this.stateMachine.setState("move-right"),!0):i<=this.sprite.width/2?(this.stateMachine.setState("move-left"),!0):Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((C=this.sprite.body)==null?void 0:C.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-right"):this.stateMachine.setState("move-left"),!0):!1}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("bird",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("bird",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class Xy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"moveTime",0);$(this,"name","");$(this,"garbage",!1);$(this,"myMoveTime",0);this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{onEnter:this.deadOnEnter}).setState("idle"),this.myMoveTime=Phaser.Math.Between(1500,2500),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-3),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-right")}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(3),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-left")}deadOnEnter(){this.moveTime=0,this.sprite.play("dead"),this.sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.cleanup()})}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"),!0):!1}idleOnEnter(){this.sprite.play("idle"),Math.random()>.5?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right")}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.flipX=!1,this.sprite.play("count"),this.sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.stateMachine.setState("dead"),this.cleanup()}))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}getEvent(){return this.name+"-stomped"}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({repeat:-1,key:"idle",frameRate:5,frames:this.sprite.anims.generateFrameNames("bomb",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"move",repeat:-1,frameRate:5,frames:this.sprite.anims.generateFrameNames("bomb",{start:0,end:0,prefix:"1_Move",suffix:".webp"})}),this.sprite.anims.create({key:"count",repeat:0,frameRate:5,frames:this.sprite.anims.generateFrameNames("bomb",{start:2,end:0,prefix:"2_Count",suffix:".webp"})}),this.sprite.anims.create({key:"dead",repeat:0,frameRate:5,frames:this.sprite.anims.generateFrameNames("bomb",{start:0,end:2,prefix:"3_Dead",suffix:".webp"})})}}class Yy extends Phaser.GameObjects.Particles.Particle{constructor(i){super(i);$(this,"time",0);$(this,"index",0);$(this,"anim")}update(i,f,C){const w=super.update(i,f,C);return this.time+=i,this.time>=this.anim.msPerFrame&&(this.index++,this.index>4&&(this.index=0),this.frame=this.anim.frames[this.index].frame,this.time-=this.anim.msPerFrame),w}}class Wy{constructor(t,i,f,C,w,a,T){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"name");$(this,"player");$(this,"playerController");$(this,"moneybag",new Map);$(this,"p4");$(this,"p3");$(this,"obstacles");$(this,"drops",[]);$(this,"state",0);$(this,"stateDuration",0);$(this,"hit1");$(this,"hit2");$(this,"enemyCat");$(this,"collideWith");$(this,"health",100);$(this,"healthbg");$(this,"healthbar");$(this,"soundSample",[]);this.scene=t,this.sprite=i,this.name=f,t.add.image,this.createAnims(),this.garbage=!1,this.stateMachine=new fe(this),this.player=a==null?void 0:a.getSprite(),this.playerController=a,this.hit1=_i(this.scene,"hit1",!1,!1),this.hit2=_i(this.scene,"hit2",!1,!1),this.enemyCat=C,this.obstacles=T,this.collideWith=w,this.p3=this.scene.add.particles(0,0,"money",{speed:250,scale:{start:1,end:1},blendMode:"",lifespan:3500,gravityY:-6,angle:{min:-90-90,max:-45-45},frequency:-1,frame:{frames:["Munney1.webp","Munney2.webp","Munney3.webp"],cycle:!1}}),this.p3.setDepth(20),this.p4=this.scene.add.particles(0,0,"plof",{speed:1,scale:{start:.75,end:1},blendMode:"SCREEN",alpha:.8,lifespan:500,gravityY:-15,angle:{min:-45-45,max:-25-25},frequency:-1,frame:{frames:["plof1.webp","plof2.webp","plof3.webp","plof4.webp","plof5.webp"],cycle:!1},particleClass:Yy,emitCallbackScope:this,emitCallback:u=>{u.anim=this.scene.anims.create({key:"plof",frameRate:7,repeat:-1,frames:this.sprite.anims.generateFrameNames("plof",{start:1,end:5,prefix:"plof",suffix:".webp"})})}}),this.p4.setDepth(12);const e=128+64;this.healthbg=this.scene.add.rectangle(this.sprite.x-e/2,this.sprite.y+196,e,24+2,0,.6).setOrigin(0,0),this.healthbar=this.scene.add.rectangle(this.sprite.x-e/2+4,this.sprite.y+196+4,e-8,18,65280).setOrigin(0,0),this.soundSample.push(_i(this.scene,"demon1",!1,!1)),this.soundSample.push(_i(this.scene,"demon2",!1,!1)),this.soundSample.push(_i(this.scene,"demon3",!1,!1)),this.soundSample.push(_i(this.scene,"demon4",!1,!1)),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("dead",{onEnter:this.deadOnEnter}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-hit",this.handleHit,this)}playSound(){this.soundSample[Phaser.Math.Between(0,this.soundSample.length-1)].play({volume:globalThis.soundVolume})}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-hit",this.handleHit,this),this.p3.destroy(),this.p4.destroy(),this.stateMachine.destroy()}update(t){this.stateMachine.update(t),!(this.stateMachine.getCurrentState()!=="idle"||this.player===void 0)&&(this.moneybag.forEach(i=>{i.getData("spawned")+180<this.scene.game.loop.frame&&(this.moneybag.delete(i.name),i.destroy())}),this.stateDuration>0&&(this.stateDuration=this.stateDuration-1),this.stateDuration==0&&this.changeState(this.state==0||this.state==2?1:0),this.state==1&&Phaser.Math.Between(0,100)<15&&this.moneyDrops())}getSprite(){return this.sprite}idleOnEnter(){this.changeState(0)}deadOnEnter(){this.changeState(3)}moneyDrops(){const t="dollarbill"+this.scene.game.loop.frame,i=this.scene.matter.add.sprite(Phaser.Math.Between(this.sprite.x-640,this.sprite.x+640),this.sprite.y-320,"money",void 0,{vertices:[{x:16,y:16},{x:48,y:16},{x:48,y:48},{x:16,y:48}],label:"dollarbill",angle:Phaser.Math.Between(5,55),restitution:1});i.setFriction(0),i.setFrictionAir(.1),i.setMass(.01),i.setDepth(16),i.setVelocityY(-10),i.setCollisionCategory(8),i.setCollidesWith([1,2]),i.setName(t),i.setData("type","dollarbill"),i.setData("spawned",this.scene.game.loop.frame),i.anims.create({key:"idle",frameRate:.5,repeat:-1,frames:this.sprite.anims.generateFrameNames("money",{start:1,end:3,prefix:"Munney",suffix:".webp"})}),i.setOnCollide(f=>{const C=f.bodyB,w=f.bodyA;(C.label==="player"||w.label==="player")&&this.playerController.takeDamage(5,"lava"),i.setCollidesWith([])}),i.play("idle"),this.moneybag.set(t,i)}hitTween(t=8,i=!0){const f=Phaser.Display.Color.ValueToColor(16777215),C=Phaser.Display.Color.ValueToColor(16711680);this.scene.tweens.addCounter({from:0,to:100,duration:100,repeat:t,yoyo:!0,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:w=>{const a=w.getValue(),T=Phaser.Display.Color.Interpolate.ColorWithColor(f,C,100,a),e=Phaser.Display.Color.GetColor(T.r,T.g,T.b);this.sprite.setTint(e)},onComplete:()=>{i&&this.bossDies()}})}spawnKey(){var t;No(this.scene,"key",this.sprite.body.position.x,((t=this.sprite.body)==null?void 0:t.position.y)-64,64,64,0,this.enemyCat,[0],this.obstacles,null,this)}bossDies(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-hit",this.handleHit,this),this.healthbg.setAlpha(0),this.healthbar.setAlpha(0),this.scene.tweens.add({targets:this.sprite,alpha:0,duration:2e3,ease:"Power2",onComplete:()=>{this.spawnKey(),this.cleanup()}})}updateHealthBar(){const t=this.healthbar.width/100;this.healthbar.displayWidth=Math.floor(this.health*t)}handleStomped(t){if(this.sprite===t){if(this.state!=0){this.playerController.takeDamage(25,"hit");return}this.changeState(2),this.health-=10,this.updateHealthBar(),this.health<=0&&(this.changeState(3),this.garbage=!0)}}handleHit(t){this.sprite===t&&(this.health-=this.state==2?5:2,this.hitTween(0,!1),this.updateHealthBar(),this.health<=0&&this.changeState(3))}cleanup(){this.sprite.destroy(),this.moneybag.forEach(t=>{this.moneybag.delete(t.name),t.destroy()}),this.scene.anims.remove("hit"),this.scene.anims.remove("idle"),this.scene.anims.remove("angry"),this.sprite.off(Phaser.Animations.Events.ANIMATION_UPDATE,function(t,i,f,C){},this)}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"angry",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("boss",{start:1,end:9,prefix:"angry",suffix:".webp"})}),this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("boss",{start:1,end:4,prefix:"idle",suffix:".webp"})}),this.sprite.anims.create({key:"hit",frameRate:8,repeat:-1,frames:this.sprite.anims.generateFrameNames("boss",{start:1,end:8,prefix:"hit",suffix:".webp"})}),this.sprite.on(Phaser.Animations.Events.ANIMATION_UPDATE,function(t,i,f,C){switch(C){case"angry4.webp":this.p3.emitParticle(Phaser.Math.Between(3,7),this.sprite.body.position.x-64,this.sprite.body.position.y-32);break;case"angry6.webp":this.p3.emitParticle(Phaser.Math.Between(3,7),this.sprite.body.position.x+64,this.sprite.body.position.y-32);break;case"angry7.webp":this.hit1.play({volume:globalThis.soundVolume}),this.scene.cameras.main.shake(100,.02),this.p4.emitParticle(1,this.sprite.body.position.x-48,this.sprite.body.position.y+88),this.p4.emitParticle(1,this.sprite.body.position.x+48,this.sprite.body.position.y+88);break;case"angry5.webp":case"angry1.webp":this.scene.cameras.main.shake(100,.01),this.hit2.play({volume:globalThis.soundVolume});break;case"idle1.webp":this.playSound();break}},this)}changeState(t){if(this.state!=t){switch(t){case 0:this.sprite.play("idle"),this.stateDuration=30*8;break;case 1:this.sprite.play("angry"),this.stateDuration=30*16;break;case 2:this.sprite.play("hit"),this.stateDuration=60;break;case 3:this.hitTween(),this.sprite.play("hit"),this.sprite.setCollidesWith([]),this.stateDuration=1e6,_.emit("boss-dies"),Ie(this.scene),wu(this.scene);break}this.state=t}}}class Hy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"moveTime",0);$(this,"name");$(this,"garbage",!1);$(this,"myMoveTime",0);this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),this.myMoveTime=Phaser.Math.Between(2500,3500),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-2),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-right")}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"),!0):!1}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(2),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-left")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.on("animationcomplete",()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("crab",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("crab",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class $y{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"moveTime",0);$(this,"name");$(this,"garbage",!1);this.scene=t,this.sprite=i,this.name=f,this.createAnims(),this.garbage=!1,this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-3),this.moveTime>45e3&&this.stateMachine.setState("move-right")}lookahead(t){if(this.sprite.active==!1)return!1;const i=this.sprite.x;this.sprite.y;const f=t.widthInPixels;return i>=f-this.sprite.width&&this.stateMachine.setState("move-left"),i<=this.sprite.width/2&&this.stateMachine.setState("move-right"),!1}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(3),this.moveTime>45e3&&this.stateMachine.setState("move-left")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}handleStomped(t){this.sprite!==t&&!this.garbage||(_.off(this.name+"-stomped",this.handleStomped,this),this.garbage=!0,this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.on("animationcomplete",()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:5,repeat:-1,frames:this.sprite.anims.generateFrameNames("crow",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("crow",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class Ky{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"sprite2");$(this,"sprite3");$(this,"sprite4");$(this,"stateMachine");$(this,"garbage",!1);$(this,"name");$(this,"moveTime",0);$(this,"openTime",0);$(this,"closeTime",0);$(this,"isOpen",!1);$(this,"interactive",!1);this.scene=t,this.sprite=i,this.sprite2=t.add.sprite(this.sprite.body.position.x,this.sprite.body.position.y-5,"family"),this.sprite3=t.add.sprite(this.sprite.body.position.x-108,this.sprite.body.position.y,"stoplight","Green.webp"),this.sprite4=t.add.sprite(this.sprite.body.position.x-108,this.sprite.body.position.y,"stoplight","Red.webp"),this.sprite2.setFrame(Phaser.Math.Between(0,299)),this.sprite2.setVisible(!1),this.sprite2.setDisplaySize(81,85),this.sprite3.setVisible(!1),this.sprite4.setVisible(!1),this.name=f,this.garbage=!1,this.createAnims(),this.openTime=Phaser.Math.Between(2,5)*1e3,this.closeTime=Phaser.Math.Between(15,20)*1e3,this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).setState("idle"),Phaser.Math.Between(0,1)==1?this.closeDoor():this.openDoor(),_.on("boss-dies",this.setInteractive,this)}setInteractive(){this.closeDoor(),this.interactive=!0}update(t){this.stateMachine.update(t),this.moveTime+=t,this.isOpen?this.moveTime>this.openTime&&this.closeDoor():this.moveTime>this.closeTime&&this.openDoor()}openDoor(){this.moveTime=0,this.sprite2.setVisible(!0),this.sprite3.setVisible(!0),this.sprite4.setVisible(!1),this.isOpen=!0,this.interactive&&this.sprite.setCollidesWith([1,4])}closeDoor(){this.moveTime=0,this.sprite2.setVisible(!1),this.isOpen=!1,this.sprite4.setVisible(!0),this.sprite3.setVisible(!1),this.interactive&&this.sprite.setCollidesWith([6])}getSprite(){return this.sprite}destroy(){this.sprite.destroy(),this.sprite2.destroy(),this.sprite3.destroy(),this.sprite4.destroy()}idleOnEnter(){this.sprite.play("idle")}keepObject(){return!this.garbage}createAnims(){const t=Phaser.Math.Between(1,6);this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("doors",{start:t,end:t,prefix:"Door",suffix:".webp"})})}}class jy{constructor(t,i,f,C,w,a){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"player");$(this,"moveTime",0);$(this,"velocityX",5);$(this,"name");$(this,"garbage",!1);$(this,"myMoveTime",0);$(this,"collideWith",[]);$(this,"collisionCat",0);$(this,"castFireAt");$(this,"fireballActiveTime",3);this.scene=t,this.sprite=i,this.name=C,this.garbage=!1,this.player=f,this.castFireAt=0,this.collideWith=a,this.collisionCat=w,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),this.myMoveTime=Phaser.Math.Between(5500,7500),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t),this.slumber()}getSprite(){return this.sprite}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-1*this.velocityX),this.moveTime>this.myMoveTime&&(this.myMoveTime=Phaser.Math.Between(5500,7500),this.stateMachine.setState("move-right"))}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(this.velocityX),this.moveTime>this.myMoveTime&&(this.myMoveTime=Phaser.Math.Between(5500,7500),this.stateMachine.setState("move-left"))}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"),!0):!1}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.cleanup()}),this.stateMachine.setState("dead"))}keepObject(){return!this.garbage}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}castFireball(t){if(this.castFireAt>this.scene.game.loop.frame)return;let i=this.player.getSprite().body.position.x-this.sprite.body.position.x>0?1:-1;if(this.sprite.flipX&&i!=-1&&!this.sprite.flipX&&i!=1)return;let f=this.scene.matter.add.sprite(this.sprite.body.position.x-12,this.sprite.body.position.y-15,"fireball",void 0,{vertices:[{x:0,y:0},{x:24,y:0},{x:24,y:24},{x:0,y:24}],label:"fireball",restitution:0});f.setCollidesWith(this.collideWith),f.setCollisionCategory(this.collisionCat),f.setVelocityX(t*11),this.fireballActiveTime=Phaser.Math.Between(1500,2500),f.setDepth(10),f.setIgnoreGravity(!0),f.setFriction(0),f.setData("ttl",this.scene.game.loop.frame+200),f.setOnCollide(w=>{var e,u;const a=w.bodyB,T=w.bodyA;T.label==="player"&&this.player.takeDamage(25,"lava"),a.label==="fireball"&&((e=a.gameObject)==null||e.destroy()),T.label==="fireball"&&((u=T.gameObject)==null||u.destroy())}),this.scene.time.delayedCall(this.fireballActiveTime,()=>{f.destroy()});const C=Phaser.Math.Between(60,200);this.castFireAt=this.scene.game.loop.frame+C,this.sprite.play("fire"),this.sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.sprite.play("idle")})}slumber(){if(this.player===void 0)return;if(Phaser.Math.Distance.BetweenPoints(this.player.getSprite(),this.sprite)<8*64){let i=this.player.getSprite().body.position.x-this.sprite.body.position.x<0?-1:1;this.castFireball(i)}}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("dragon",{start:0,end:0,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"fire",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("dragon",{start:0,end:2,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("dragon",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class Jy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"moveTime",0);$(this,"velocityX",4);$(this,"name");$(this,"myMoveTime",0);this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.myMoveTime=Phaser.Math.Between(1500,4500),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).setState("idle"),this.velocityX+=Phaser.Math.Between(-.95,.95),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(-1*this.velocityX),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-right")}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"),!0):!1}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(this.velocityX),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-left")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,this.cleanup())}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-right"):this.stateMachine.setState("move-left"))}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("fire",{start:1,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("fire",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class Zy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"moveTime",0);$(this,"velocityX");$(this,"name");$(this,"myMoveTime",0);this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),this.myMoveTime=Phaser.Math.Between(12e3,18e3),this.velocityX=Phaser.Math.FloatBetween(4.5,5.5),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-1*this.velocityX),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-right")}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(this.velocityX),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-left")}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"),!0):!1}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState(this.sprite.flipX?"move-right":"move-left")}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("firewalker",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("firewalker",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class Qy{constructor(t,i,f){$(this,"sprite");$(this,"stateMachine");$(this,"name");this.sprite=i,this.name=f,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}idleOnEnter(){this.sprite.play("idle")}handleStomped(t){this.sprite===t&&(_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.on("animationcomplete",()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}createAnims(){this.sprite.anims.create({key:"idle",frameRate:2,repeat:-1,frames:this.sprite.anims.generateFrameNames("flower",{start:1,end:4,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:15,repeat:0,frames:this.sprite.anims.generateFrameNames("flower",{start:1,end:3,prefix:"1_Dead",suffix:".webp"})})}}class qy{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"direction",0);$(this,"moveTime",0);$(this,"moveTargetTime",0);$(this,"name");$(this,"wingPower",3);this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-down",{onEnter:this.moveDownOnEnter,onUpdate:this.moveDownOnUpdate}).addState("move-up",{onEnter:this.moveUpOnEnter,onUpdate:this.moveUpOnUPdate}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this),this.wingPower=Phaser.Math.FloatBetween(2,4),this.moveTargetTime=Phaser.Math.Between(2e3,5e3)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveDownOnEnter(){this.moveTime=0,this.direction=0}moveDownOnUpdate(t){var i;this.moveTime+=t,(i=this.sprite)==null||i.setVelocityY(-1*this.wingPower),this.moveTime>this.moveTargetTime&&(this.stateMachine.setState("move-up"),this.moveTargetTime=Phaser.Math.Between(2e3,5e3))}moveUpOnEnter(){this.moveTime=0,this.direction=1}moveUpOnUPdate(t){var i;this.moveTime+=t,(i=this.sprite)==null||i.setVelocityY(4*this.wingPower),this.moveTime>this.moveTargetTime&&(this.stateMachine.setState("move-down"),this.moveTargetTime=Phaser.Math.Between(2e3,5e3))}lookahead(t){if(this.sprite===void 0||this.sprite.active==!1)return!1;const i=this.sprite.body.velocity.y>0?1:-1;let f=this.sprite.body.position.y;return f+=i*64,t.getTileAtWorldXY(this.sprite.body.x,f,void 0,this.scene.cameras.main,"ground")!=null?(this.direction==1?this.stateMachine.setState("move-down"):this.stateMachine.setState("move-up"),!0):!1}idleOnEnter(){var t;(t=this.sprite)==null||t.play("idle"),this.stateMachine.setState("move-down"),this.direction=0}handleStomped(t){var i,f,C;this.sprite===t&&(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),(i=this.sprite)==null||i.setStatic(!0),(f=this.sprite)==null||f.play("dead"),(C=this.sprite)==null||C.on("animationcomplete",()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}handleBlocked(t){var i,f;this.sprite!==t||this.sprite===void 0||(this.moveTime=0,((f=(i=this.sprite)==null?void 0:i.body)==null?void 0:f.velocity.y)>0?this.stateMachine.setState("move-down"):this.stateMachine.setState("move-up"))}keepObject(){return!this.garbage}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,frames:this.sprite.anims.generateFrameNames("fly",{start:0,end:1,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("fly",{start:0,end:2,prefix:"1_Dead",suffix:".webp"})})}}class _y{constructor(t,i,f){$(this,"sprite");$(this,"stateMachine");$(this,"name");this.sprite=i,this.name=f,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("dead",{}).setState("idle")}destroy(){this.sprite.destroy(),this.stateMachine.destroy()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}idleOnEnter(){this.sprite.play("idle")}createAnims(){this.sprite.anims.create({key:"idle",frameRate:10,repeat:-1,yoyo:!0,frames:this.sprite.anims.generateFrameNames(this.name,{start:1,end:this.name==="lava-center"?30:32,prefix:"lavatop-",suffix:".webp"})})}}class tx{constructor(t,i,f,C){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"player");$(this,"status",!1);$(this,"name");$(this,"spotlight");$(this,"layers",[]);this.scene=t,this.sprite=i,this.name=C,this.player=f,this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter,onUpdate:this.idleUpdate}).setState("idle"),this.spotlight=t.lights.addLight(0,0,200).setColor(16777215).setIntensity(2).setVisible(!1),_.on(this.name+"-touched",this.handleTouched,this)}destroy(){_.off(this.name+"-touched",this.handleTouched,this),this.sprite.destroy()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}setLayers(t){this.layers=t,this.layers.forEach(f=>f.setTint(2236962)),this.scene.children.list.filter(f=>f instanceof Phaser.Physics.Matter.Sprite).forEach(f=>{const C=f;C.tint=this.status?16777215:3288626})}idleOnEnter(){this.sprite.setFrame(this.status?1:0)}idleUpdate(){this.status&&(this.spotlight.x=this.player.getX(),this.spotlight.y=this.player.getY())}handleTouched(t){if(this.sprite!==t)return;this.status=!this.status,this.spotlight.setVisible(this.status),this.sprite.setFrame(this.status?1:0);const i=this.status?16777215:2236962;this.layers.forEach(C=>C.setTint(i)),this.scene.children.list.filter(C=>C instanceof Phaser.Physics.Matter.Sprite).forEach(C=>{const w=C;w.tint=this.status?16777215:3288626})}}class ex{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"garbage",!1);$(this,"moveTime",0);$(this,"name","");this.scene=t,this.sprite=i,this.name=f,this.garbage=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-blocked",this.handleBlocked,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-3),this.moveTime>2e3&&this.stateMachine.setState("move-right")}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(3),this.moveTime>2e3&&this.stateMachine.setState("move-left")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-left")}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"),!0):!1}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}handleStomped(t){this.sprite!==t&&!this.garbage||(this.garbage=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.play("dead"),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.on(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.cleanup()}),this.stateMachine.setState("dead"))}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}keepObject(){return!this.garbage}getEvent(){return this.name+"-stomped"}createAnims(){this.sprite.anims.create({key:"idle",frameRate:3,repeat:-1,frames:this.sprite.anims.generateFrameNames("monster",{start:1,end:3,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"dead",repeat:0,frameRate:10,frames:this.sprite.anims.generateFrameNames("monster",{start:1,end:3,prefix:"1_Dead",suffix:".webp"})})}}class ix{constructor(t,i,f){$(this,"sprite");$(this,"stateMachine");$(this,"touched");$(this,"dead");$(this,"name");this.sprite=i,this.name=f,this.touched=!1,this.dead=!1,this.createAnims(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("dead",{onEnter:this.deadOnEnter}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this),_.on(this.name+"-touched",this.handleTouched,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this),_.off(this.name+"-touched",this.handleTouched,this),this.cleanup()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}idleOnEnter(){this.dead||(this.touched?this.sprite.play("idle"):this.sprite.play("wait"))}deadOnEnter(){this.sprite.play("dead"),this.sprite.on(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.cleanup()})}handleStomped(t){this.sprite===t&&(this.touched?(_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0)):(this.touched=!0,this.grow(!0)),this.dead=!0)}handleTouched(t){this.sprite===t&&(this.touched==!0||this.dead||(this.touched=!0,_.off(this.name+"-touched",this.handleTouched,this)))}grow(t){const i=[0,0,16,64,96,128,0,0];this.sprite.play("grow").on(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.stateMachine.setState(t?"dead":"idle")}).on("animationupdate",(f,C)=>{if(f.key==="grow"){const w=C.index,a=i[w];this.sprite.setBody({height:a})}})}cleanup(){this.sprite!==void 0&&(this.sprite.destroy(),this.stateMachine.destroy()),this.sprite=void 0}createAnims(){this.sprite.anims.create({key:"idle",frameRate:.5,repeat:-1,frames:this.sprite.anims.generateFrameNames("plant",{start:4,end:5,prefix:"PlantTrap",suffix:".webp"})}),this.sprite.anims.create({key:"wait",frameRate:.5,repeat:-1,frames:this.sprite.anims.generateFrameNames("plant",{start:1,end:1,prefix:"PlantTrap",suffix:".webp"})}),this.sprite.anims.create({key:"grow",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("plant",{start:2,end:4,prefix:"PlantTrap",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:15,repeat:0,frames:this.sprite.anims.generateFrameNames("plant",{start:6,end:8,prefix:"PlantTrap",suffix:".webp"})})}}class sx{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"moveTime",0);$(this,"velocityX",4);$(this,"name");$(this,"myMoveTime",6e3);this.scene=t,this.sprite=i,this.name=f,this.createAnim(),this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-down",{onEnter:this.moveDownOnEnter,onUpdate:this.moveDownOnUpdate}).addState("move-up",{onEnter:this.moveUpOnEnter,onUpdate:this.moveUpOnUPdate}).setState("idle"),this.velocityX+=Phaser.Math.Between(-2.95,2.95),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-blocked",this.handleBlocked,this),this.sprite.destroy()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}lookahead(t){var i;return this.sprite.active==!1?!1:!Bs(t,this.scene.cameras.main,this.sprite,!0,0)&&((i=this.sprite.body)==null?void 0:i.velocity.y)==0?(this.sprite.flipX?this.stateMachine.setState("move-up"):this.stateMachine.setState("move-down"),!0):!1}moveDownOnEnter(){this.moveTime=0}moveDownOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(-1*this.velocityX),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-up")}moveUpOnEnter(){this.moveTime=0}moveUpOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(this.velocityX),this.moveTime>this.myMoveTime&&this.stateMachine.setState("move-down")}idleOnEnter(){this.sprite.play("idle"),this.stateMachine.setState("move-down")}handleStomped(t){this.sprite}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-up"):this.stateMachine.setState("move-down"))}createAnim(){this.sprite.anims.create({key:"idle",frameRate:25,repeat:-1,frames:this.sprite.anims.generateFrameNames("saw",{start:2,end:0,prefix:"0_Idle",suffix:".webp"})})}}class rx{constructor(t,i,f,C){$(this,"sprite");$(this,"stateMachine");$(this,"dead",!1);$(this,"player");$(this,"name");this.sprite=i,this.name=f,this.createAnims(),this.player=C,this.stateMachine=new fe(this),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("dead",{onEnter:this.deadOnEnter}).setState("idle"),_.on(this.name+"-stomped",this.handleStomped,this)}destroy(){_.off(this.name+"-stomped",this.handleStomped,this)}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}idleOnEnter(){this.dead||this.sprite.play("idle")}deadOnEnter(){this.sprite.play("dead"),this.sprite.on(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.cleanup()})}cleanup(){this.sprite.destroy()}handleStomped(t){var i;this.sprite===t&&(this.dead=!0,_.off(this.name+"-stomped",this.handleStomped,this),this.sprite.setStatic(!0),this.sprite.setCollisionCategory(0),this.sprite.play("active"),this.sprite.on(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.stateMachine.setState("dead")}),(i=this.player)==null||i.changeVelocity())}createAnims(){this.sprite.anims.create({key:"idle",frameRate:1,repeat:-1,frames:this.sprite.anims.generateFrameNames("tnt",{start:0,end:0,prefix:"0_Idle",suffix:".webp"})}),this.sprite.anims.create({key:"active",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("tnt",{start:0,end:0,prefix:"1_Pressed",suffix:".webp"})}),this.sprite.anims.create({key:"dead",frameRate:10,repeat:0,frames:this.sprite.anims.generateFrameNames("tnt",{start:0,end:1,prefix:"2_Dead",suffix:".webp"})})}}class hp{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"stateMachine");$(this,"moveTime",0);$(this,"name");$(this,"velocityX",2);$(this,"turnAfter",0);this.scene=t,this.sprite=i,this.name=f,this.stateMachine=new fe(this),this.velocityX=.5+Math.random()*this.velocityX,this.turnAfter=Phaser.Math.Between(4e3,8e3),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter}).addState("move-left",{onEnter:this.moveLeftOnEnter,onUpdate:this.moveLeftOnUpdate}).addState("move-right",{onEnter:this.moveRightOnEnter,onUpdate:this.moveRightOnUPdate}).addState("dead",{}).setState("idle"),_.on(this.name+"-blocked",this.handleBlocked,this)}destroy(){_.off(this.name+"-blocked",this.handleBlocked,this),this.sprite.destroy()}update(t){this.stateMachine.update(t)}getSprite(){return this.sprite}moveLeftOnEnter(){this.moveTime=0}moveLeftOnUpdate(t){this.moveTime+=t,this.sprite.flipX=!1,this.sprite.setVelocityX(-1*this.velocityX),this.moveTime>this.turnAfter&&this.stateMachine.setState("move-right")}moveRightOnEnter(){this.moveTime=0}moveRightOnUPdate(t){this.moveTime+=t,this.sprite.flipX=!0,this.sprite.setVelocityX(this.velocityX),this.moveTime>this.turnAfter&&this.stateMachine.setState("move-left")}lookahead(t){if(this.sprite.active==!1)return!1;const i=this.sprite.x;this.sprite.y;const f=t.widthInPixels;return i>=f-this.sprite.width/2&&this.stateMachine.setState("move-left"),i<=this.sprite.width/2&&this.stateMachine.setState("move-right"),!1}idleOnEnter(){this.stateMachine.setState("move-left")}handleBlocked(t){this.sprite===t&&(this.moveTime=0,this.sprite.flipX?this.stateMachine.setState("move-left"):this.stateMachine.setState("move-right"))}}function nx(s,t,i,f,C,w,a,T,e){const u=s.matter.add.sprite(t+f*.5,i+C*.5,"dragon",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:96},{x:0,y:96}],label:"dragon"}).setFixedRotation();return u.setMass(.1),u.setDepth(1),u.setCollisionCategory(w),u.setCollidesWith(a),u.setName("dragon"),u.setData("type","dragon"),T.add("dragon",u,u.body),new jy(s,u,e,u.name,w,a)}function ax(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"bomb",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"bomb"}).setFixedRotation();return e.setMass(.1),e.setDepth(1),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("bomb"),e.setData("type","bomb"),T.add("bomb",e,e.body),new Xy(s,e,e.name)}function ox(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"monster",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:128},{x:0,y:128}],label:"monster"}).setFixedRotation();return e.setMass(.1),e.setDepth(1),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("monster"),e.setData("type","monster"),T.add("monster",e,e.body),new ex(s,e,e.name)}function hx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"bat",void 0,{vertices:[{x:0,y:0},{x:48,y:0},{x:48,y:28},{x:0,y:28}],label:"bat"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setIgnoreGravity(!0),e.setCollidesWith(a),e.setName("bat"),e.setData("type","bat"),T.add("bat",e,e.body),new Vy(s,e,e.name)}function lx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"bird",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"bird"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setIgnoreGravity(!0),e.setCollidesWith(a),e.setName("bird"),e.setData("type","bird"),T.add("bird",e,e.body),new zy(s,e,e.name)}function ux(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"crow",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"crow"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setIgnoreGravity(!0),e.setCollidesWith(a),e.setName("crow"),e.setData("type","crow"),T.add("crow",e,e.body),new $y(s,e,e.name)}function dx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"fly",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"fly"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setIgnoreGravity(!0),e.setCollidesWith(a),e.setName("fly"),e.setData("type","fly"),e.set,T.add("fly",e,e.body),new qy(s,e,e.name)}function fx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"crab",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"crab"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("crab"),e.setData("type","crab"),T.add("crab",e,e.body),new Hy(s,e,e.name)}function cx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"fire",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"fire"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("fire"),T.add("fire",e,e.body),new Jy(s,e,e.name)}function vx(s,t,i,f,C,w,a,T,e){const u=s.matter.add.sprite(t+f*.5,i,"saw",void 0,{angle:w*Phaser.Math.DEG_TO_RAD,vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:32},{x:0,y:32}],label:"saw"}).setFixedRotation();return u.setDepth(10),u.setIgnoreGravity(!0),u.setMass(10),u.setCollisionCategory(a),u.setCollidesWith(T),u.setName("saw"),e.add("saw",u,u.body),new sx(s,u,u.name)}function px(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"firewalker",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"firewalker"}).setFixedRotation();return e.setDepth(1),e.setMass(.1),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("firewalker"),e.setData("type","firewalker"),T.add("firewalker",e,e.body),new Zy(s,e,e.name)}function mx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"flower",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"flower"}).setFixedRotation();return e.setStatic(!0),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("flower"),e.setData("type","flower"),T.add("flower",e,e.body),new Qy(s,e,e.name)}function gx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"plant",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:16},{x:0,y:16}],label:"plant"}).setFixedRotation();return e.setStatic(!0),e.setCollisionCategory(w),e.setCollidesWith(a),e.setName("plant"),T.add("plant",e,e.body),new ix(s,e,e.name)}function yx(s,t,i,f,C,w,a,T,e){const u=s.matter.add.sprite(i+C*.5,f+w*.5,t,void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:t}).setFixedRotation();return u.setStatic(!0),u.setCollisionCategory(a),t==="lava-center"?(u.setCollidesWith(T),u.setDepth(4)):(u.setDepth(10),u.setCollidesWith(6)),u.setName(t),u.setData("type",t),e.add(t,u,u.body),new _y(s,u,u.name)}function xx(s,t,i,f,C,w,a,T,e){const u=s.matter.add.sprite(t+f*.5,i+C*.5,"bear",void 0,{vertices:[{x:0,y:0},{x:68,y:0},{x:64,y:68},{x:0,y:68}],label:"bear"}).setFixedRotation();return u.setStatic(!0),u.setCollisionCategory(w),u.setCollidesWith(a),u.setName("bear"),T.add("bear",u,u.body),new Uy(s,u,u.name,e)}function Tx(s,t,i,f,C,w,a,T,e){const u=s.matter.add.sprite(t+f*.5,i+C*.5,"boss",void 0,{vertices:[{x:98,y:92},{x:190,y:92},{x:190,y:155},{x:98,y:155}],label:"boss"}).setFixedRotation();return u.setStatic(!0),u.setCollisionCategory(w),u.setCollidesWith(a),u.setName("boss"),T.add("boss",u,u.body),new Wy(s,u,u.name,w,a,e,T)}function Cx(s,t,i,f,C,w,a,T,e){const u=s.matter.add.sprite(t+f*.5,i+C*.5,"tnt",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:68},{x:0,y:68}],label:"tnt"}).setFixedRotation();return u.setStatic(!0),u.setCollisionCategory(w),u.setCollidesWith(a),u.setName("tnt"),T.add("tnt",u,u.body),new rx(s,u,u.name,e)}function Sx(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"zeppelin1",void 0,{vertices:[{x:0,y:0},{x:128,y:0},{x:128,y:78},{x:0,y:78}],label:"zeppelin1"}).setFixedRotation();return e.setDepth(1),e.setMass(5),e.setIgnoreGravity(!0),e.setCollisionCategory(8),e.setCollidesWith([]),e.setName("zeppelin1"),e.setData("type","zeppelin"),T.add("zeppelin1",e,e.body),new hp(s,e,e.name)}function Ex(s,t,i,f,C,w,a,T){const e=s.matter.add.sprite(t+f*.5,i+C*.5,"zeppelin2",void 0,{vertices:[{x:0,y:0},{x:128,y:0},{x:128,y:78},{x:0,y:78}],label:"zeppelin2"}).setFixedRotation();return e.setDepth(1),e.setMass(5),e.setIgnoreGravity(!0),e.setCollisionCategory(8),e.setCollidesWith([]),e.setName("zeppelin1"),e.setData("type","zeppelin"),e.setName("zeppelin2"),T.add("zeppelin2",e,e.body),new hp(s,e,e.name)}function Px(s,t,i,f,C,w,a,T,e,u){const y=s.matter.add.sprite(t+f*.5,i+C*.5,"lightswitch",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,label:"lightswitch"}).setFixedRotation();return y.setData("type","lightswitch"),y.setName("lightswitch"),y.setCollisionCategory(a),y.setCollidesWith(T),e.add("lightswitch",y,y.body),new tx(s,y,u,y.name)}function wx(s,t,i,f,C,w,a,T,e,u){const y=s.matter.add.sprite(t+f*.5,i+C*.5,"doors",void 0,{isStatic:!0,label:"window",vertices:[{x:0,y:0},{x:132,y:0},{x:132,y:148},{x:0,y:148}]}).setFixedRotation();return y.setData("type","window"),y.setName("window"),y.setCollisionCategory(a),y.setCollidesWith([6]),e.add("window",y,y.body),new Ky(s,y,"window")}function Mx(s,t,i,f,C){s.anims.create({key:"carrot",frameRate:5,frames:s.anims.generateFrameNumbers("carrot",{start:0,end:5}),repeat:-1});const w=s.matter.add.sprite(t+f*.5,i+C*.5,"carrot",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,isSensor:!0,label:"carrot"}).play({key:"carrot",startFrame:Phaser.Math.Between(0,5)},!0);return w.setData("type","carrot"),w.setCollidesWith([1,2]),w}function bx(s,t,i,f,C){s.anims.create({key:"coin",frameRate:5,frames:s.anims.generateFrameNumbers("coin",{start:0,end:4}),repeat:-1});const w=s.matter.add.sprite(t+f*.5,i+C*.5,"coin",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,isSensor:!0,label:"coin"}).play({key:"coin",startFrame:Phaser.Math.Between(0,4)},!0);return w.setData("type","coin"),w.setCollidesWith([1,2]),w}function Ax(s,t,i,f,C){s.anims.create({key:"lab",frameRate:8,frames:s.anims.generateFrameNumbers("lab",{start:0,end:3,first:0}),repeat:-1});const w=s.matter.add.sprite(t+f*.5,i+C*.5,"lab",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:136},{x:0,y:136}],isStatic:!0,isSensor:!0,label:"lab"}).play("lab");return w.setData("type","lab"),w}function Rx(s,t,i,f,C){const w=s.matter.add.sprite(t+f*.5,i+C*.5,"heart",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,isSensor:!0});return w.setData("type","heart"),w.setData("healthPoints",25),w}function Ox(s,t,i,f,C){const w=s.matter.add.sprite(t+f*.5,i+C*.5,"trashcan",void 0,{vertices:[{x:0,y:0},{x:82,y:0},{x:82,y:74},{x:0,y:74}],isStatic:!0,isSensor:!0});return w.setData("type","heart"),w.setData("healthPoints",25),w.setCollidesWith([8]),w}function Lx(s,t,i,f,C){const w=s.matter.add.sprite(t+f*.5,i+C*.5,"crate",void 0,{vertices:[{x:1,y:1},{x:64,y:1},{x:64,y:64},{x:1,y:64}]});return w.setMass(.1),w.setData("type","crate"),w}function Fx(s,t,i,f,C,w){const a=s.matter.add.sprite(t+f*.5,i+C*.5,"key",void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"key"});return a.setCollidesWith([1,2]),a.setCollisionGroup(4),a.setMass(.1),a.setData("type","key"),a.setIgnoreGravity(!1),a.setName("key"),a}class Dx{constructor(t,i,f,C,w,a,T,e,u,y){$(this,"startY",0);$(this,"startX",0);$(this,"to",0);$(this,"duration",0);$(this,"vertical",!1);$(this,"sprite");$(this,"scene");$(this,"player");$(this,"vx",0);$(this,"vy",0);$(this,"lastX",0);$(this,"id",0);$(this,"lastY",0);$(this,"noautostart",!1);this.startX=i,this.startY=f,this.to=C*64,this.duration=w,this.sprite=T,this.scene=t,this.vertical=a,this.sprite.setData("type","platform"),this.sprite.setDepth(16),this.lastX=i,this.lastY=f,this.id=u,this.noautostart=e,this.player=y,this.noautostart?(this.disable(),_.on("wakeup-object",this.enable,this)):(this.enable(),this.start())}disable(){this.sprite.setAlpha(0),this.sprite.setCollidesWith([6])}enable(){this.sprite.setAlpha(1),this.sprite.setCollidesWith([1,4]),this.start()}start(){this.vertical?this.moveVertically():this.moveHorizontally()}destroy(){this.noautostart||_.off("wakeup-object",this.start),this.sprite.destroy()}moveVertically(){this.scene.tweens.addCounter({from:0,to:this.to,duration:this.duration,ease:rt.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(t,i)=>{var w;const f=rt.Math.RoundTo(this.startY+i.value,0),C=f-this.lastY;this.sprite.setVelocityY(C),this.sprite.setPosition(this.lastX,f),this.vy=C,this.vx=0,(w=this.player)==null||w.changePosition(this.vx,this.vy,this.sprite),this.lastX=this.sprite.body.position.x,this.lastY=this.sprite.body.position.y}})}moveHorizontally(){this.scene.tweens.addCounter({from:0,to:this.to,duration:this.duration,ease:rt.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(t,i)=>{const f=rt.Math.RoundTo(this.startX+i.value,0),C=f-this.sprite.x;this.sprite.setVelocityX(C),this.sprite.setPosition(f,this.lastY),this.vy=this.sprite.body.velocity.y,this.vx=C,this.vx!=0&&this.sprite.setData("relpos"+this.id,{x:this.vx,y:this.vy}),this.lastX=this.sprite.body.position.x,this.lastY=this.sprite.body.position.y}})}}class Bx{constructor(t,i,f,C,w,a,T,e,u,y){$(this,"startY",0);$(this,"startX",0);$(this,"to",0);$(this,"duration",0);$(this,"vertical",!1);$(this,"sprite");$(this,"scene");$(this,"player");$(this,"vx",0);$(this,"vy",0);$(this,"lastX",0);$(this,"id",0);$(this,"lastY",0);$(this,"noautostart",!1);this.startX=i,this.startY=f,this.to=C*64,this.duration=w,this.sprite=T,this.scene=t,this.vertical=a,this.sprite.setData("type","mushroom-platform"),this.sprite.setDepth(16),this.lastX=i,this.lastY=f,this.id=u,this.noautostart=e,this.player=y,this.noautostart?(this.disable(),_.on("wakeup-object",this.enable,this)):(this.enable(),this.start())}disable(){this.sprite.setAlpha(0),this.sprite.setCollidesWith([6])}enable(){this.sprite.setAlpha(1),this.sprite.setCollidesWith([1,4]),this.start()}start(){this.vertical?this.moveVertically():this.moveHorizontally()}destroy(){this.noautostart||_.off("wakeup-object",this.start),this.sprite.destroy()}moveVertically(){this.scene.tweens.addCounter({from:0,to:this.to,duration:this.duration,ease:rt.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(t,i)=>{var w;const f=rt.Math.RoundTo(this.startY+i.value,0),C=f-this.lastY;this.sprite.setVelocityY(C),this.sprite.setPosition(this.lastX,f),this.vy=C,this.vx=0,(w=this.player)==null||w.changePosition(this.vx,this.vy,this.sprite),this.lastX=this.sprite.body.position.x,this.lastY=this.sprite.body.position.y}})}moveHorizontally(){this.scene.tweens.addCounter({from:0,to:this.to,duration:this.duration,ease:rt.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(t,i)=>{var w;const f=rt.Math.RoundTo(this.startX+i.value,0),C=f-this.sprite.x;this.sprite.setVelocityX(C),this.sprite.setPosition(f,this.lastY),this.vy=this.sprite.body.velocity.y,this.vx=C,(w=this.player)==null||w.changePosition(this.vx,this.vy,this.sprite),this.lastX=this.sprite.body.position.x,this.lastY=this.sprite.body.position.y}})}}class Ix{constructor(t,i,f,C,w,a){$(this,"sprite");$(this,"emitter");$(this,"scene");$(this,"layers",["ground","layer1"]);this.scene=t,this.sprite=a,this.emitter=this.scene.add.particles(0,0,w,{speed:400,scale:{start:.66,end:0},blendMode:"",lifespan:2e3,gravityY:1e3,angle:{min:-90-35,max:-45-35},frequency:-1})}removeBrick(t,i){const f=~~(i.position.x/64),C=~~(i.position.y/64);this.layers.forEach(w=>{const a=t.getTileAt(f,C,!1,w);a!=null&&a.setVisible(!1)}),this.scene.matter.world.remove(i),this.emitter.destroy()}emitParticle(t,i){const f=~~(i.position.x/64),C=~~(i.position.y/64),w=t.getTileAt(f,C,!1,"ground");w!=null&&this.scene.tweens.add({targets:w,pixelY:w.pixelY-32,duration:100,ease:"Bounce",onComplete:()=>{w.pixelY=w.y*64},repeat:0,yoyo:!0}),this.emitter.emitParticle(rt.Math.Between(3,5),i.position.x,i.position.y)}}class Gx{constructor(t,i){$(this,"sprite");$(this,"frame",0);this.sprite=i,this.frame=rt.Math.Between(0,34),this.sprite.setData("type","billboard"),this.sprite.setFrame(this.frame);const f=27+rt.Math.Between(3,7);t.time.addEvent({delay:f*1e3,callback:this.rotateBillBoard,callbackScope:this,loop:!0})}rotateBillBoard(){this.sprite.setFrame((this.frame+1)%34)}destroy(){this.sprite.destroy()}}class Nx{constructor(t,i,f){$(this,"sprite");$(this,"name");this.sprite=i,this.sprite.setData("type","changeskin"),this.sprite.setName("changeskin"),this.name=f,_.on(this.name+"-touched",this.handleTouched,this)}destroy(){_.off(this.name+"-touched",this.handleTouched,this)}handleTouched(t,i){this.sprite===t&&i.toggle()}}class kx{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"onTime",0);$(this,"powerSurge",0);$(this,"name");this.scene=t,this.sprite=i,this.name=f,this.createAnims(),this.sprite.play("idle"),this.newSurge()}newSurge(){this.onTime=0,this.powerSurge=Phaser.Math.Between(1e3,5e3)}getSprite(){return this.sprite}destroy(){this.sprite.destroy()}update(t){this.onTime+=t,this.onTime>this.powerSurge&&(this.sprite.play("flicker"),this.newSurge(),this.scene.time.delayedCall(100,()=>{this.sprite.play("idle")}))}createAnims(){this.sprite.anims.create({key:"idle",frameRate:15,repeat:0,frames:this.sprite.anims.generateFrameNames(this.name,{start:0,end:1,prefix:"neon-",suffix:".webp"})}),this.sprite.anims.create({key:"flicker",frameRate:15,repeat:6,frames:this.sprite.anims.generateFrameNames(this.name,{start:0,end:1,prefix:"neon-",suffix:".webp"})})}}class Vx{constructor(t,i,f){$(this,"scene");$(this,"sprite");$(this,"name");this.scene=t,this.sprite=i,this.name=f,_.on("wakeup-object",this.setInteractive,this)}setInteractive(){this.sprite.setCollidesWith([1,4])}getSprite(){return this.sprite}destroy(){this.sprite.destroy()}}function Bt(s,t){const i=s.get(t);i!==void 0?i.play({volume:globalThis.soundVolume}):console.log("Sound "+t+" is undefined")}function Pr(s,t,i=!1){if(globalThis.krasota==!1){Ux();let f=t;globalThis.voice!==void 0&&(f+=globalThis.voice);const C=s.get(f);C===void 0&&console.log("No such sound '"+f+"'"),C==null||C.on("play",()=>{i&&(globalThis.krasotaPlayStarted=!0)}),C==null||C.on("complete",()=>{globalThis.krasotaPlayStarted=!1,_l()}),C==null||C.play({volume:globalThis.soundVolume})}}function Ux(){globalThis.krasota=!0}function _l(){globalThis.krasota=!1}function Id(){return globalThis.krasotaPlayStarted}function zx(s,t,i,f){const C=Phaser.Math.Between(i,f),w=s.get(t+C);w!==void 0&&w.play({volume:globalThis.soundVolume})}function _i(s,t,i,f=!0){const C=s.sound.add(t,{loop:i,volume:globalThis.soundVolume});return f&&(s.sound.locked?s.sound.once(Phaser.Sound.Events.UNLOCKED,()=>{C.play({volume:globalThis.soundVolume})}):C.play({volume:globalThis.soundVolume})),C}function Eu(s,t){const i=s.sound.add(t,{loop:!1,delay:2,volume:globalThis.musicVolume});return s.sound.locked?s.sound.once(Phaser.Sound.Events.UNLOCKED,()=>{i.play(),globalThis.musicTune=!0,globalThis.musicTitle=t}):(i.play(),globalThis.musicTune=!0,globalThis.musicTitle=t),i.once(Phaser.Sound.Events.COMPLETE,()=>{globalThis.musicTune=!1,i.stop(),s.time.delayedCall(2e3,()=>{wu(s)})}),i.once(Phaser.Sound.Events.STOP,()=>{globalThis.musicTune=!1}),i}function Pu(s,t){const i=s.sound.add(t,{loop:!1,delay:2,volume:globalThis.musicVolume});return s.sound.locked?s.sound.once(Phaser.Sound.Events.UNLOCKED,()=>{i.play(),globalThis.musicTune=!0,globalThis.musicTitle=t}):(i.play(),globalThis.musicTune=!0,globalThis.musicTitle=t),i.once(Phaser.Sound.Events.COMPLETE,()=>{globalThis.musicTune=!1,i.stop(),Pu(s,t)}),i.once(Phaser.Sound.Events.STOP,()=>{globalThis.musicTune=!1}),i}function lp(s,t){const i=t-s,f=Math.ceil(Math.log2(i)/8),C=new Uint8Array(f);let w=0;do{C.fill(0),C.set(window.crypto.getRandomValues(C));const a=C.length*8-Math.ceil(Math.log2(i));w=C.reduce((T,e,u)=>{const y=e<<u*8;return T+y},0)>>>a}while(w>i);return w+s}function wu(s){if(globalThis.musicTune){console.log("Already playing "+globalThis.musicTitle);return}const t=["01_main_screen_trailer","02_level_grass","03_level_forest","04_level_rain","05_level_desert","bgm_alpha","bgm_beta","bgm_delta","bgm_epsilon","bgm_gamma","bgm_menu","bgm_omega","bottomlesspitman","dawn_of_hope_low","greengray","junglegroove","onmyway","propersummer","spy","thevillage","heroimmortal","juhanijunkala","juhanjunkala2","thecreeper","redheels","freejump","longawayhome","swinginglevel","happylevel","8bitmetal","catchy","enchantedwoods","galaticfunk","chiptune-stage1","chiptune-stage2","x-pixeladventures"],i=t[lp(0,t.length-1)];Eu(s,i)}function Go(s){const t=new Map;["jump","pickupcoin","droppinghits","droppingbounces","pickupcarrot","pickuphealth","pickupdropping","stomped","hit","bonustile","rubber1","rubber2","rubber3","star","pow","berry","lava","splash","nothrow","explosion1","explosion2","explosion3","explosion4","explosion5","explosion6","hit1","hit2","breakingtile","click","lightswitch","changeskin","100coins","blip","winneris","hiscore"].forEach(a=>t.set(a,s.sound.add(a,{loop:!1})));const f=["breakmybed","donttellmewhattodo","imsothirsty","titanic","todo","uber","underneath","youcanstaybut"];f.forEach(a=>t.set(a,s.sound.add(a,{loop:!1}))),f.forEach(a=>t.set(a+"-cs",s.sound.add(a+"-cs",{loop:!1}))),f.forEach(a=>t.set(a+"-vd",s.sound.add(a+"-vd",{loop:!1})));const C=["mymomcandothattoo","strongboysnevergiveup","takeitslow","whatareyou","wrongbutton","youcametooquick","yourfaceyourass"];C.forEach(a=>t.set(a,s.sound.add(a,{loop:!1}))),C.forEach(a=>t.set(a+"-cs",s.sound.add(a+"-cs",{loop:!1}))),C.forEach(a=>t.set(a+"-vd",s.sound.add(a+"-vd",{loop:!1})));const w=["beginatthebeginning","equalopportunity","hailtotheking","offtoday","therightmaninthewrong","wishtogoanywhere"];return w.forEach(a=>t.set(a,s.sound.add(a,{loop:!1}))),w.forEach(a=>t.set(a+"-cs",s.sound.add(a+"-cs",{loop:!1}))),w.forEach(a=>t.set(a+"-vd",s.sound.add(a+"-vd",{loop:!1}))),t.set("blowitoutofyourass",s.sound.add("blowitoutofyourass",{loop:!1})),t.set("timetokickass",s.sound.add("timetokickass",{loop:!1})),t}function Ca(s,t){if(s==0){const i=["breakmybed","donttellmewhattodo","imsothirsty","titanic","todo","uber","underneath","youcanstaybut"];return i[Phaser.Math.Between(0,i.length-1)]}else if(s==1){const i=["mymomcandothattoo","strongboysnevergiveup","takeitslow","whatareyou","wrongbutton","youcametooquick","yourfaceyourass"];return i[Phaser.Math.Between(0,i.length-1)]}else if(s==2){const i=["beginatthebeginning","offtoday","therightmaninthewrong","timetokickass","wishtogoanywhere"];return i[Phaser.Math.Between(0,i.length-1)]}return t}function Ie(s){s.game.sound.stopAll(),globalThis.musicTune=!1}function mr(s){s.game.sound.removeAll(),globalThis.musicTitle=void 0}function Xx(){let s;const t=window.localStorage.getItem("ra8bit.audio");globalThis.musicVolume===void 0&&(globalThis.musicVolume=.5),globalThis.soundVolume===void 0&&(globalThis.soundVolume=1),globalThis.krasota=!1,t!=null&&(s=JSON.parse(t),globalThis.musicVolume=s.musicVolume,globalThis.soundVolume=s.soundVolume,globalThis.musicVolume<0?globalThis.musicVolume=0:globalThis.musicVolume>1&&(globalThis.musicVolume=1),globalThis.soundVolume<0?globalThis.soundVolume=0:globalThis.soundVolume>1&&(globalThis.soundVolume=1))}function Ge(s){Xx(),s.load.image("sky","assets/back1.webp"),s.load.image("groundTiles","assets/terrainv3.webp"),s.load.image("propTiles","assets/spritesheet_props_extruded.webp"),s.load.image("grasTiles","assets/gras.webp"),s.load.image("grasPurpleTiles","assets/gras-purple.webp"),s.load.image("cocoonTiles","assets/cocoons.webp"),s.load.image("stonesTiles","assets/stones.webp"),s.load.image("logo","assets/logo.webp"),s.load.image("bg_cocoons","assets/bg_cocoons.webp"),s.load.image("ra8bitTiles","assets/minira8bits.webp"),s.load.bitmapFont("press_start","assets/press_start_2p.webp","assets/press_start_2p.fnt"),s.load.spritesheet("health","assets/health.webp",{frameWidth:64,frameHeight:64,startFrame:0,endFrame:4}),s.load.image("bg-ui","assets/bg-ui.webp"),s.load.image("mushyroom","assets/label-mushyroom.webp"),s.load.atlas("lava-top","assets/lava-top.webp","assets/lava-top.json"),s.load.atlas("lava-center","assets/lava-center.webp","assets/lava-center.json"),s.load.atlas("rabbit","assets/rabbit.webp","assets/rabbit.json"),s.load.atlas("choclate","assets/choclate.webp","assets/choclate.json"),s.load.atlas("bird","assets/bird.webp","assets/bird.json"),s.load.atlas("crab","assets/crab.webp","assets/crab.json"),s.load.atlas("firewalker","assets/firewalk.webp","assets/firewalk.json"),s.load.atlas("bat","assets/bat.webp","assets/bat.json"),s.load.atlas("monster","assets/monster.webp","assets/monster.json"),s.load.atlas("plant","assets/plant.webp","assets/plant.json"),s.load.atlas("flower","assets/flower.webp","assets/flower.json"),s.load.atlas("fire","assets/fire.webp","assets/fire.json"),s.load.atlas("dragon","assets/dragon.webp","assets/dragon.json"),s.load.atlas("bomb","assets/bomb.webp","assets/bomb.json"),s.load.atlas("dropping-splash","assets/dropping-splash.webp","assets/dropping-splash.json"),s.load.atlas("moonshot-splash","assets/moonshot-splash.webp","assets/moonshot-splash.json"),s.load.atlas("cracks","assets/cracks.webp","assets/cracks.json"),s.load.atlas("crow","assets/crow.webp","assets/crow.json"),s.load.atlas("bear","assets/bear.webp","assets/bear.json"),s.load.atlas("fly","assets/fly.webp","assets/fly.json"),s.load.atlas("tnt","assets/tnt.webp","assets/tnt.json"),s.load.atlas("saw","assets/saw.webp","assets/saw.json"),s.load.spritesheet("coin","assets/coin.webp",{frameWidth:64,frameHeight:64,startFrame:0,endFrame:5}),s.load.spritesheet("carrot","assets/carrot.webp",{frameWidth:64,frameHeight:64,startFrame:0,endFrame:5}),s.load.spritesheet("lab","assets/lab.webp",{frameWidth:64,frameHeight:136,startFrame:0,endFrame:3}),s.load.spritesheet("billboards","assets/billboards.webp",{frameWidth:192,frameHeight:220,startFrame:0,endFrame:34}),s.load.spritesheet("lightswitch","assets/lightswitch.webp",{frameWidth:64,frameHeight:64,startFrame:0,endFrame:1}),s.load.spritesheet("fireball","assets/fireball.webp",{frameWidth:32,frameHeight:32,startFrame:0,endFrame:3}),s.load.image("heart","assets/heart.webp"),s.load.image("berry","assets/berry.webp"),s.load.image("pow","assets/pow.webp"),s.load.image("star","assets/star.webp"),s.load.image("toad","assets/toad.webp"),s.load.image("rubber1","assets/rubber_1.webp"),s.load.image("rubber2","assets/rubber_2.webp"),s.load.image("rubber3","assets/rubber_3.webp"),s.load.image("dropping","assets/dropping.webp"),s.load.image("pokeball","assets/pokeball.webp"),s.load.image("moonshot-ball","assets/moonshot-ball.webp"),s.load.image("crate","assets/crate.webp"),s.load.image("zeppelin1","assets/zeppelin1.webp"),s.load.image("zeppelin2","assets/zeppelin2.webp"),s.load.image("platform","assets/platform.webp"),s.load.image("mushroom","assets/mushroom.webp"),s.load.image("brick1-2","assets/brick1-2.webp"),s.load.image("brick2-2","assets/brick2-2.webp"),s.load.image("changeskin","assets/changeskin.webp"),s.load.audio("jump",["assets/jump.mp3","assets/jump.m4a"]),s.load.audio("pickupcoin",["assets/coinpickup.mp3","assets/coinpickup.m4a"]),s.load.audio("droppinghits",["assets/droppinghits.mp3","assets/droppinghits.m4a"]),s.load.audio("droppingbounces",["assets/droppingbounces.mp3","assets/droppingbounces.m4a"]),s.load.audio("pickupcarrot",["assets/pickupcarrot.mp3","assets/pickupcarrot.m4a"]),s.load.audio("pickuphealth",["assets/pickuphealth.mp3","assets/pickuphealth.m4a"]),s.load.audio("pickupdropping",["assets/pickupdropping.mp3","assets/pickupdropping.m4a"]),s.load.audio("stomped",["assets/stomped2.mp3","assets/stomped2.m4a"]),s.load.audio("hit",["assets/hit.mp3","assets/hit.m4a"]),s.load.audio("bonustile",["assets/bonustile.mp3","assets/bonustile.m4a"]),s.load.audio("rubber1",["assets/rubber1.mp3","assets/rubber1.m4a"]),s.load.audio("rubber2",["assets/rubber1.mp3","assets/rubber1.m4a"]),s.load.audio("rubber3",["assets/rubber1.mp3","assets/rubber1.m4a"]),s.load.audio("star",["assets/star.mp3","assets/star.m4a"]),s.load.audio("pow",["assets/pow.mp3","assets/pow.m4a"]),s.load.audio("berry",["assets/berry.mp3","assets/berry.m4a"]),s.load.audio("lava",["assets/lava.mp3","assets/lava.m4a"]),s.load.audio("splash",["assets/splash.mp3","assets/splash.m4a"]),s.load.audio("nothrow",["assets/nothrow.mp3","assets/nothrow.m4a"]),s.load.audio("explosion1",["assets/explosion1.mp3","assets/explosion1.m4a"]),s.load.audio("explosion2",["assets/explosion2.mp3","assets/explosion2.m4a"]),s.load.audio("explosion3",["assets/explosion3.mp3","assets/explosion3.m4a"]),s.load.audio("explosion4",["assets/explosion4.mp3","assets/explosion4.m4a"]),s.load.audio("explosion5",["assets/explosion5.mp3","assets/explosion5.m4a"]),s.load.audio("explosion6",["assets/explosion6.mp3","assets/explosion6.m4a"]),s.load.audio("breakingtile",["assets/breakingtile.mp3","assets/breakingtile.m4a"]),s.load.audio("gameover",["assets/gameover.mp3","assets/gameover.m4a"]),s.load.audio("click",["assets/click2.mp3","assets/click2.m4a"]),s.load.audio("lightswitch",["assets/lightswitch.mp3","assets/lightswitch.m4a"]),s.load.audio("boss",["assets/boss.mp3","assets/boss.m4a"]),s.load.audio("changeskin",["assets/changeskin.mp3","assets/changeskin.m4a"]),s.load.audio("spectacle",["assets/spectacle.mp3","assets/spectacle.m4a"]),s.load.audio("theme",["assets/start.mp3","assets/start.m4a"]),s.load.audio("100coins",["assets/100coins.mp3","assets/100coins.m4a"]),s.load.audio("blip",["assets/blip.mp3","assets/blip.m4a"]),s.load.bitmapFont("press_start","assets/press_start_2p.webp","assets/press_start_2p.fnt"),s.load.audio("angel-eyes",["assets/angel-eyes.mp3","assets/angel-eyes.m4a"]),s.load.audio("01_main_screen_trailer",["assets/01_main_screen_trailer.mp3","assets/01_main_screen_trailer.m4a"]),s.load.audio("02_level_grass",["assets/02_level_grass.mp3","assets/02_level_grass.m4a"]),s.load.audio("03_level_forest",["assets/03_level_forest.mp3","assets/03_level_forest.m4a"]),s.load.audio("04_level_rain",["assets/04_level_rain.mp3","assets/04_level_rain.m4a"]),s.load.audio("05_level_desert",["assets/05_level_desert.mp3","assets/05_level_desert.m4a"]),s.load.audio("bgm_alpha",["assets/bgm_alpha.mp3","assets/bgm_alpha.m4a"]),s.load.audio("bgm_beta",["assets/bgm_beta.mp3","assets/bgm_beta.m4a"]),s.load.audio("bgm_delta",["assets/bgm_delta.mp3","assets/bgm_delta.m4a"]),s.load.audio("bgm_epsilon",["assets/bgm_epsilon.mp3","assets/bgm_epsilon.m4a"]),s.load.audio("bgm_gamma",["assets/bgm_gamma.mp3","assets/bgm_gamma.m4a"]),s.load.audio("bgm_menu",["assets/bgm_menu.mp3","assets/bgm_menu.m4a"]),s.load.audio("bgm_omega",["assets/bgm_omega.mp3","assets/bgm_omega.m4a"]),s.load.audio("bottomlesspitman",["assets/bottomlesspitman.mp3","assets/bottomlesspitman.m4a"]),s.load.audio("ch-ay-na",["assets/ch-ay-na.mp3","assets/ch-ay-na.m4a"]),s.load.audio("dawn_of_hope_low",["assets/dawn_of_hope_low.mp3","assets/dawn_of_hope_low.m4a"]),s.load.audio("greengray",["assets/greengray.mp3","assets/greengray.m4a"]),s.load.audio("junglegroove",["assets/junglegroove.mp3","assets/junglegroove.m4a"]),s.load.audio("onmyway",["assets/onmyway.mp3","assets/onmyway.m4a"]),s.load.audio("spy",["assets/spy.mp3","assets/spy.m4a"]),s.load.audio("thevillage",["assets/thevillage.mp3","assets/thevillage.m4a"]),s.load.audio("heroimmortal",["assets/heroimmortal.mp3","assets/heroimmortal.m4a"]),s.load.audio("juhanijunkala",["assets/juhanijunkala.mp3","assets/juhanijunkala.m4a"]),s.load.audio("juhanjunkala2",["assets/juhanjunkala2.mp3","assets/juhanjunkala2.m4a"]),s.load.audio("thecreeper",["assets/thecreeper.mp3","assets/thecreeper.m4a"]),s.load.audio("redheels",["assets/redheels.mp3","assets/redheels.m4a"]),s.load.audio("freejump",["assets/freejump.mp3","assets/freejump.m4a"]),s.load.audio("longawayhome",["assets/longawayhome.mp3","assets/longawayhome.m4a"]),s.load.audio("swinginglevel",["assets/swinginglevel.mp3","assets/swinginglevel.m4a"]),s.load.audio("happylevel",["assets/happylevel.mp3","assets/happylevel.m4a"]),s.load.audio("8bitmetal",["assets/8bitmetal.mp3","assets/8bitmetal.m4a"]),s.load.audio("catchy",["assets/catchy.mp3","assets/catchy.m4a"]),s.load.audio("boss6",["assets/boss6.mp3","assets/boss6.m4a"]),s.load.audio("hit1",["assets/hit1.mp3","assets/hit1.m4a"]),s.load.audio("hit2",["assets/hit2.mp3","assets/hit2.m4a"]),s.load.audio("enchantedwoods",["assets/enchantedwoods.mp3","assets/enchantedwoods.m4a"]),s.load.audio("galaticfunk",["assets/galaticfunk.mp3","assets/galaticfunk.m4a"]),s.load.audio("propersummer",["assets/proper_summer.mp3","assets/proper_summer.m4a"]),s.load.audio("chiptune-stage1",["assets/chiptune-stage1.mp3","assets/chiptune-stage1.m4a"]),s.load.audio("chiptune-stage2",["assets/chiptune-stage2.mp3","assets/chiptune-stage2.m4a"]),s.load.audio("x-pixeladventures",["assets/x-pixeladventures.mp3","assets/x-pixeladventures.m4a"]),s.load.audio("winneris",["assets/winneris.mp3","assets/winneris.m4a"]),s.load.audio("hiscore",["assets/hiscore.mp3","assets/hiscore.m4a"]),s.load.audio("finalbossbattle",["assets/finalbossbattle.mp3","assets/finalbossbattle.m4a"]),s.load.audio("beginatthebeginning",["assets/beginatthebeginning.mp3","assets/beginatthebeginning.m4a"]),s.load.audio("blowitoutofyourass",["assets/blowitoutofyourass.mp3","assets/blowitoutofyourass.m4a"]),s.load.audio("breakmybed",["assets/breakmybed.mp3","assets/breakmybed.m4a"]),s.load.audio("donttellmewhattodo",["assets/donttellmewhattodo.mp3","assets/donttellmewhattodo.m4a"]),s.load.audio("drunktoomuch",["assets/drunktoomuch.mp3","assets/drunktoomuch.m4a"]),s.load.audio("equalopportunity",["assets/equalopportunity.mp3","assets/equalopportunity.m4a"]),s.load.audio("hailtotheking",["assets/hailtotheking.mp3","assets/hailtotheking.m4a"]),s.load.audio("idontseehow",["assets/idontseehow.mp3","assets/idontseehow.m4a"]),s.load.audio("imsothirsty",["assets/imsothirsty.mp3","assets/imsothirsty.m4a"]),s.load.audio("mymomcandothattoo",["assets/mymomcandothattoo.mp3","assets/mymomcandothattoo.m4a"]),s.load.audio("offtoday",["assets/offtoday.mp3","assets/offtoday.m4a"]),s.load.audio("strongboysnevergiveup",["assets/strongboysnevergiveup.mp3","assets/strongboysnevergiveup.m4a"]),s.load.audio("takeitslow",["assets/takeitslow.mp3","assets/takeitslow.m4a"]),s.load.audio("therightmaninthewrong",["assets/therightmaninthewrong.mp3","assets/therightmaninthewrong.m4a"]),s.load.audio("timetokickass",["assets/timetokickass.mp3","assets/timetokickass.m4a"]),s.load.audio("titanic",["assets/titanic.mp3","assets/titanic.m4a"]),s.load.audio("todo",["assets/todo.mp3","assets/todo.m4a"]),s.load.audio("uber",["assets/uber.mp3","assets/uber.m4a"]),s.load.audio("underneath",["assets/underneath.mp3","assets/underneath.m4a"]),s.load.audio("weareallmadhere",["assets/weareallmadhere.mp3","assets/weareallmadhere.m4a"]),s.load.audio("whatareyou",["assets/whatareyou.mp3","assets/whatareyou.m4a"]),s.load.audio("wishtogoanywhere",["assets/wishtogoanywhere.mp3","assets/wishtogoanywhere.m4a"]),s.load.audio("wrongbutton",["assets/wrongbutton.mp3","assets/wrongbutton.m4a"]),s.load.audio("youcametooquick",["assets/youcametooquick.mp3","assets/youcametooquick.m4a"]),s.load.audio("youcanstaybut",["assets/youcanstaybut.mp3","assets/youcanstaybut.m4a"]),s.load.audio("yourfaceyourass",["assets/yourfaceyourass.mp3","assets/yourfaceyourass.m4a"]),s.load.audio("beginatthebeginning",["assets/beginatthebeginning.mp3","assets/beginatthebeginning.m4a"]),s.load.audio("blowitoutofyourass",["assets/blowitoutofyourass.mp3","assets/blowitoutofyourass.m4a"]),s.load.audio("breakmybed",["assets/breakmybed.mp3","assets/breakmybed.m4a"]),s.load.audio("donttellmewhattodo",["assets/donttellmewhattodo.mp3","assets/donttellmewhattodo.m4a"]),s.load.audio("drunktoomuch",["assets/drunktoomuch.mp3","assets/drunktoomuch.m4a"]),s.load.audio("equalopportunity",["assets/equalopportunity.mp3","assets/equalopportunity.m4a"]),s.load.audio("hailtotheking",["assets/hailtotheking.mp3","assets/hailtotheking.m4a"]),s.load.audio("idontseehow",["assets/idontseehow.mp3","assets/idontseehow.m4a"]),s.load.audio("imsothirsty",["assets/imsothirsty.mp3","assets/imsothirsty.m4a"]),s.load.audio("mymomcandothattoo",["assets/mymomcandothattoo.mp3","assets/mymomcandothattoo.m4a"]),s.load.audio("offtoday",["assets/offtoday.mp3","assets/offtoday.m4a"]),s.load.audio("strongboysnevergiveup",["assets/strongboysnevergiveup.mp3","assets/strongboysnevergiveup.m4a"]),s.load.audio("takeitslow",["assets/takeitslow.mp3","assets/takeitslow.m4a"]),s.load.audio("therightmaninthewrong",["assets/therightmaninthewrong.mp3","assets/therightmaninthewrong.m4a"]),s.load.audio("timetokickass",["assets/timetokickass.mp3","assets/timetokickass.m4a"]),s.load.audio("titanic",["assets/titanic.mp3","assets/titanic.m4a"]),s.load.audio("todo",["assets/todo.mp3","assets/todo.m4a"]),s.load.audio("uber",["assets/uber.mp3","assets/uber.m4a"]),s.load.audio("underneath",["assets/underneath.mp3","assets/underneath.m4a"]),s.load.audio("weareallmadhere",["assets/weareallmadhere.mp3","assets/weareallmadhere.m4a"]),s.load.audio("whatareyou",["assets/whatareyou.mp3","assets/whatareyou.m4a"]),s.load.audio("wishtogoanywhere",["assets/wishtogoanywhere.mp3","assets/wishtogoanywhere.m4a"]),s.load.audio("wrongbutton",["assets/wrongbutton.mp3","assets/wrongbutton.m4a"]),s.load.audio("youcametooquick",["assets/youcametooquick.mp3","assets/youcametooquick.m4a"]),s.load.audio("youcanstaybut",["assets/youcanstaybut.mp3","assets/youcanstaybut.m4a"]),s.load.audio("yourfaceyourass",["assets/yourfaceyourass.mp3","assets/yourfaceyourass.m4a"]),s.load.audio("beginatthebeginning-cs",["assets/beginatthebeginning-cs.mp3","assets/beginatthebeginning-cs.m4a"]),s.load.audio("breakmybed-cs",["assets/breakmybed-cs.mp3","assets/breakmybed-cs.m4a"]),s.load.audio("donttellmewhattodo-cs",["assets/donttellmewhattodo-cs.mp3","assets/donttellmewhattodo-cs.m4a"]),s.load.audio("drunktoomuch-cs",["assets/drunktoomuch-cs.mp3","assets/drunktoomuch-cs.m4a"]),s.load.audio("equalopportunity-cs",["assets/equalopportunity-cs.mp3","assets/equalopportunity-cs.m4a"]),s.load.audio("hailtotheking-cs",["assets/hailtotheking-cs.mp3","assets/hailtotheking-cs.m4a"]),s.load.audio("idontseehow-cs",["assets/idontseehow-cs.mp3","assets/idontseehow-cs.m4a"]),s.load.audio("imsothirsty-cs",["assets/imsothirsty-cs.mp3","assets/imsothirsty-cs.m4a"]),s.load.audio("mymomcandothattoo-cs",["assets/mymomcandothattoo-cs.mp3","assets/mymomcandothattoo-cs.m4a"]),s.load.audio("offtoday-cs",["assets/offtoday-cs.mp3","assets/offtoday-cs.m4a"]),s.load.audio("strongboysnevergiveup-cs",["assets/strongboysnevergiveup-cs.mp3","assets/strongboysnevergiveup-cs.m4a"]),s.load.audio("takeitslow-cs",["assets/takeitslow-cs.mp3","assets/takeitslow-cs.m4a"]),s.load.audio("therightmaninthewrong-cs",["assets/therightmaninthewrong-cs.mp3","assets/therightmaninthewrong-cs.m4a"]),s.load.audio("titanic-cs",["assets/titanic-cs.mp3","assets/titanic-cs.m4a"]),s.load.audio("todo-cs",["assets/todo-cs.mp3","assets/todo-cs.m4a"]),s.load.audio("uber-cs",["assets/uber-cs.mp3","assets/uber-cs.m4a"]),s.load.audio("underneath-cs",["assets/underneath-cs.mp3","assets/underneath-cs.m4a"]),s.load.audio("weareallmadhere-cs",["assets/weareallmadhere-cs.mp3","assets/weareallmadhere-cs.m4a"]),s.load.audio("whatareyou-cs",["assets/whatareyou-cs.mp3","assets/whatareyou-cs.m4a"]),s.load.audio("wishtogoanywhere-cs",["assets/wishtogoanywhere-cs.mp3","assets/wishtogoanywhere-cs.m4a"]),s.load.audio("wrongbutton-cs",["assets/wrongbutton-cs.mp3","assets/wrongbutton-cs.m4a"]),s.load.audio("youcametooquick-cs",["assets/youcametooquick-cs.mp3","assets/youcametooquick-cs.m4a"]),s.load.audio("youcanstaybut-cs",["assets/youcanstaybut-cs.mp3","assets/youcanstaybut-cs.m4a"]),s.load.audio("yourfaceyourass-cs",["assets/yourfaceyourass-cs.mp3","assets/yourfaceyourass-cs.m4a"]),s.load.audio("beginatthebeginning-vd",["assets/beginatthebeginning-vd.mp3","assets/beginatthebeginning-vd.m4a"]),s.load.audio("blowitoutofyourass-vd",["assets/blowitoutofyourass-vd.mp3","assets/blowitoutofyourass-vd.m4a"]),s.load.audio("breakmybed-vd",["assets/breakmybed-vd.mp3","assets/breakmybed-vd.m4a"]),s.load.audio("donttellmewhattodo-vd",["assets/donttellmewhattodo-vd.mp3","assets/donttellmewhattodo-vd.m4a"]),s.load.audio("drunktoomuch-vd",["assets/drunktoomuch-vd.mp3","assets/drunktoomuch-vd.m4a"]),s.load.audio("equalopportunity-vd",["assets/equalopportunity-vd.mp3","assets/equalopportunity-vd.m4a"]),s.load.audio("hailtotheking-vd",["assets/hailtotheking-vd.mp3","assets/hailtotheking-vd.m4a"]),s.load.audio("idontseehow-vd",["assets/idontseehow-vd.mp3","assets/idontseehow-vd.m4a"]),s.load.audio("imsothirsty-vd",["assets/imsothirsty-vd.mp3","assets/imsothirsty-vd.m4a"]),s.load.audio("mymomcandothattoo-vd",["assets/mymomcandothattoo-vd.mp3","assets/mymomcandothattoo-vd.m4a"]),s.load.audio("strongboysnevergiveup-vd",["assets/strongboysnevergiveup-vd.mp3","assets/strongboysnevergiveup-vd.m4a"]),s.load.audio("takeitslow-vd",["assets/takeitslow-vd.mp3","assets/takeitslow-vd.m4a"]),s.load.audio("therightmaninthewrong-vd",["assets/therightmaninthewrong-vd.mp3","assets/therightmaninthewrong-vd.m4a"]),s.load.audio("timetokickass-vd",["assets/timetokickass-vd.mp3","assets/timetokickass-vd.m4a"]),s.load.audio("underneath-vd",["assets/underneath-vd.mp3","assets/underneath-vd.m4a"]),s.load.audio("weareallmadhere-vd",["assets/weareallmadhere-vd.mp3","assets/weareallmadhere-vd.m4a"]),s.load.audio("whatareyou-vd",["assets/whatareyou-vd.mp3","assets/whatareyou-vd.m4a"]),s.load.audio("wishtogoanywhere-vd",["assets/wishtogoanywhere-vd.mp3","assets/wishtogoanywhere-vd.m4a"]),s.load.audio("wrongbutton-vd",["assets/wrongbutton-vd.mp3","assets/wrongbutton-vd.m4a"]),s.load.audio("youcametooquick-vd",["assets/youcametooquick-vd.mp3","assets/youcametooquick-vd.m4a"]),s.load.audio("youcanstaybut-vd",["assets/youcanstaybut-vd.mp3","assets/youcanstaybut-vd.m4a"]),s.load.audio("yourfaceyourass-vd",["assets/yourfaceyourass-vd.mp3","assets/yourfaceyourass-vd.m4a"]),s.load.audio("titanic-vd",["assets/titanic-vd.mp3","assets/titanic-vd.m4a"]),s.load.audio("todo-vd",["assets/todo-vd.mp3","assets/todo-vd.m4a"]),s.load.audio("uber-vd",["assets/uber-vd.mp3","assets/uber-vd.m4a"]),s.load.audio("offtoday-vd",["assets/offtoday-vd.mp3","assets/offtoday-vd.m4a"])}function up(s){const t=s.children.getChildren(),i=t.length;let f=0;for(;f<i;){const a=t[f];a instanceof Phaser.Physics.Matter.Sprite&&a.setVisible(!1),f++}const C=s.cameras.main.cull(t),w=C.length;for(f=0;f<w;){const a=C[f];a instanceof Phaser.Physics.Matter.Sprite&&a.setVisible(!0),f++}}function Yx(s,t,i,f,C,w){const a=s.matter.add.sprite(t+f*.5,i,"rabbit",void 0,{vertices:[{x:9,y:95},{x:1,y:79},{x:7,y:53},{x:11,y:45},{x:0,y:25},{x:0,y:7},{x:8,y:1},{x:19,y:12},{x:23,y:37},{x:33,y:35},{x:33,y:8},{x:40,y:1},{x:46,y:1},{x:54,y:7},{x:55,y:29},{x:49,y:43},{x:59,y:50},{x:59,y:82},{x:62,y:81},{x:62,y:96},{x:9,y:96}],restitution:.05,frictionAir:0,mass:1,label:"player"}).setFixedRotation();return a.setFixedRotation(),a.setBounce(0),a.setFriction(0),a.setFrictionAir(5e-4),a.setFrictionStatic(0),a.setCollisionGroup(w),a.setDepth(9),a.setMass(10),a.setData("type","player"),a.setData("collision",w),a}function No(s,t,i,f,C,w,a,T,e,u,y,d){var l,h,r,n,v,o,c,m,p,g,x;switch(t){case"neon":{const E=((l=y.properties.find(M=>M.name==="taste"))==null?void 0:l.value)||"neon",P=s.matter.add.sprite(i+C*.5,f+w*.5,E,void 0,{isStatic:!0,label:"neon",vertices:[{x:0,y:0},{x:256,y:0},{x:256,y:52},{x:0,y:52}]}),S=new kx(s,P,E);P.setCollisionGroup(6),P.setCollidesWith([6]),u.add("neon",P,P.body),s.neon.push(S);break}case"dragon":{s.dragons.push(nx(s,i,f,C,w,T,e,u,d));break}case"bomb":{s.bombs.push(ax(s,i,f,C,w,T,e,u));break}case"monster":{s.monsters.push(ox(s,i,f,C,w,T,e,u));break}case"bat":{s.bats.push(hx(s,i,f,C,w,T,e,u));break}case"bird":{s.birds.push(lx(s,i,f,C,w,T,e,u));break}case"crab":{s.crabs.push(fx(s,i,f,C,w,T,e,u));break}case"fire":{s.fires.push(cx(s,i,f,C,w,T,e,u));break}case"firewalker":{s.firewalkers.push(px(s,i,f,C,w,T,e,u));break}case"lava-top":case"lava-center":s.lava.push(yx(s,t,i,f,C,w,T,e,u));break;case"flower":{s.flowers.push(mx(s,i,f,C,w,T,e,u));break}case"plant":{s.plants.push(gx(s,i,f,C,w,T,e,u));break}case"zeppelin1":{s.zeps.push(Sx(s,i,f,C,w,T,e,u));break}case"zeppelin2":{s.zeps.push(Ex(s,i,f,C,w,T,e,u));break}case"fly":{s.flies.push(dx(s,i,f,C,w,T,e,u));break}case"bear":{s.bears.push(xx(s,i,f,C,w,T,e,u,d));break}case"boss":{s.boss.push(Tx(s,i,f,C,w,T,e,u,d));break}case"crow":{s.crows.push(ux(s,i,f,C,w,T,e,u));break}case"tnt":{s.tnts.push(Cx(s,i,f,C,w,T,e,u,d));break}case"saw":{s.saws.push(vx(s,i,f,C,w,a,T,e,u));break}case"lightswitch":{s.lightswitches.push(Px(s,i,f,C,w,a,T,e,u,d));break}case"carrot":{Mx(s,i,f,C,w);break}case"coin":{bx(s,i,f,C,w);break}case"key":{Fx(s,i,f,C,w);break}case"lab":{Ax(s,i,f,C,w);break}case"health":case"heart":{Rx(s,i,f,C,w);break}case"crate":{Lx(s,i,f,C,w);break}case"trashcan":{Ox(s,i,f,C,w);break}case"window":{s.doors.push(wx(s,i,f,C,w,a,T,e,u));break}case"pipe":{const E=(h=y.properties.find(O=>O.name==="dstx"))==null?void 0:h.value,P=(r=y.properties.find(O=>O.name==="dsty"))==null?void 0:r.value,S=((n=y.properties.find(O=>O.name==="delay"))==null?void 0:n.value)||0,M=((v=y.properties.find(O=>O.name==="duration"))==null?void 0:v.value)||0,b=((o=y.properties.find(O=>O.name==="room_width"))==null?void 0:o.value)||0,A=((c=y.properties.find(O=>O.name==="room_height"))==null?void 0:c.value)||0,L=(m=y.properties.find(O=>O.name==="level"))==null?void 0:m.value,R=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{isStatic:!0,label:"pipe"});u.addWithValues("pipe",void 0,R,{dstx:E,dsty:P,delay:S,duration:M,room_width:b,room_height:A,level:L});break}case"platform":{const E=y.properties.find(A=>A.name==="to").value,P=y.properties.find(A=>A.name==="duration").value,S=y.properties.find(A=>A.name==="vert").value,M=((p=y.properties.find(A=>A.name==="noautostart"))==null?void 0:p.value)||!1,b=s.matter.add.sprite(i+C*.5,f+w*.5,"platform",void 0,{isStatic:!0,label:"platform",vertices:[{x:0,y:0},{x:192,y:0},{x:192,y:32},{x:0,y:32}]});new Dx(s,i,f,E,P,S,b,M,b.body.id,d),u.add("platform",b,b.body);break}case"mushroom-platform":{const E=y.properties.find(A=>A.name==="to").value,P=y.properties.find(A=>A.name==="duration").value,S=y.properties.find(A=>A.name==="vert").value,M=((g=y.properties.find(A=>A.name==="noautostart"))==null?void 0:g.value)||!1,b=s.matter.add.sprite(i+C*.5,f+w*.5,"mushroom",void 0,{isStatic:!0,label:"mushroom-platform",vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}]});new Bx(s,i,f,E,P,S,b,M,b.body.id,d),u.add("mushroom-platform",b,b.body);break}case"bar":{const E=s.matter.add.sprite(i+C*.5,f+w*.5,"bar",void 0,{vertices:[{x:0,y:0},{x:937,y:0},{x:937,y:28},{x:0,y:28}],isStatic:!0,label:"bar"});E.setData("type","bar"),E.setCollidesWith([]),new Vx(s,E,"bar"),u.add("bar",E,E.body);break}case"sink":break;case"trap":break;case"brick":{const E=y.properties.find(b=>b.name==="hits").value,P=y.properties.find(b=>b.name==="emitter").value,S=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,label:"brick"}),M=new Ix(s,i,f,E,P,S);u.addWithValues("brick",void 0,S,{use:E,emitter:M});break}case"coinbrick":{const E=y.properties.find(S=>S.name==="hits").value,P=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,label:"coinbrick"});u.addWithValues("coinbrick",void 0,P,{use:E});break}case"spikes":{const E=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{isStatic:!0});u.add("spikes",void 0,E);break}case"bonus":{const E=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{vertices:[{x:1,y:1},{x:64,y:1},{x:64,y:64},{x:1,y:64}],isStatic:!0,label:"bonus"});u.addWithValues("bonus",void 0,E,{use:5,last:-1});break}case"exit":{const E=y.properties.find(M=>M.name==="event").value,P=((x=y.properties.find(M=>M.name==="room"))==null?void 0:x.value)||"start",S=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,label:"exit"});u.addWithValues("exit",void 0,S,{event:E,room:P});break}case"return":{const E=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,label:"return"}),P=y.properties.find(M=>M.name==="spawnx").value,S=y.properties.find(M=>M.name==="spawny").value;u.addWithValues("return",void 0,E,{spawnx:P,spawny:S});break}case"goto":{const E=s.matter.add.rectangle(i+C*.5,f+w*.5,C,w,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],isStatic:!0,label:"return"}),P=y.properties.find(A=>A.name==="spawnx").value,S=y.properties.find(A=>A.name==="spawny").value,M=y.properties.find(A=>A.name==="camera-width").value,b=y.properties.find(A=>A.name==="camera-height").value;u.addWithValues("goto",void 0,E,{spawnx:P,spawny:S,camw:M,camh:b});break}case"billboard":{const E=s.matter.add.sprite(i+C*.5,f+w*.5,"billboards",void 0,{isStatic:!0,label:"billboard",vertices:[{x:0,y:-60},{x:192,y:-60},{x:192,y:48},{x:0,y:48}],render:{sprite:{yOffset:64}}}).setOrigin(.5,.33);new Gx(s,E),u.add("billboard",E,E.body);break}case"changeskin":{const E=y.properties.find(S=>S.name==="use").value,P=s.matter.add.sprite(i+C*.5,f+w*.5,"changeskin",void 0,{isStatic:!0,label:"changeskin",vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}]});new Nx(s,P,"changeskin"),u.addWithValues("changeskin",P,P.body,{use:E});break}case"player":case"player-spawn":break;case"":console.log("Object "+y.id+" has no name");break;default:{const E=y.properties.find(P=>P.name==="label").value;s.add.image(C/2,w/2,t,E)}break}}function Mu(s){var i;return((i=s.input.gamepad)==null?void 0:i.getPad(0))!==void 0}function bu(s){var i;const t=(i=s.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[0].getValue()>0||t!=null&&t.buttons[15].pressed)}function Au(s){var i;const t=(i=s.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[0].getValue()<0||t!=null&&t.buttons[14].pressed)}function ko(s){var i;const t=(i=s.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[1].getValue()>0||t!=null&&t.buttons[13].pressed)}function rn(s){s.game.registry.remove("playerX"),s.game.registry.remove("playerY"),globalThis.spawnLocation=30*10}function Vo(s){var i;const t=(i=s.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[1].getValue()<0||t!=null&&t.buttons[12].pressed)}const Gd=8;let Sa=new Array(32).fill(0),Ea=0;function _e(s,t){var f;const i=(f=s.input.gamepad)==null?void 0:f.getPad(0);if(i===void 0)return!1;if(i!=null&&i.axes.length){if(t==-1){let C=!1;for(let w=0;w<i.buttons.length;w++)if(i.buttons[w].pressed){C=!0;break}if(Ea==0){if(Ea=Gd,C)return!0;Ea=0}else Ea--;return!1}if(Sa[t]==0){if(Sa[t]=Gd,i.buttons[t].pressed)return!0;Sa[t]=0}else Sa[t]--}return!1}class dp extends rt.Scene{constructor(i){super(i);$(this,"frameTime",0);$(this,"renderNow",!1);$(this,"MATTER_TIME_STEP",1e3/60);$(this,"TARGET_RATE",1e3/30);$(this,"accumulator",0)}init(){this.game.events.on(rt.Core.Events.BLUR,this.muteSound,this),this.game.events.on(rt.Core.Events.FOCUS,this.unmuteSound,this),document.addEventListener("visibilitychange",this.looseFocus)}create(){this.input.setDefaultCursor("none"),this.matter.world.autoUpdate=!1}update(i,f){for(this.frameTime+=f,this.accumulator+=f,this.renderNow=!1;this.accumulator>=this.MATTER_TIME_STEP;)this.accumulator-=this.MATTER_TIME_STEP,this.matter.world.enabled&&this.matter.world.step(this.MATTER_TIME_STEP);this.frameTime>=this.TARGET_RATE&&(this.frameTime-=this.TARGET_RATE,this.renderNow=!0)}doStep(){return this.renderNow}muteSound(){Ie(this)}unmuteSound(){!globalThis.musicTune&&globalThis.musicTitle!==void 0&&Eu(this,globalThis.musicTitle)}looseFocus(){document.hidden}destroy(){this.game.events.off(rt.Core.Events.BLUR,this.muteSound,this),this.game.events.off(rt.Core.Events.FOCUS,this.unmuteSound,this),document==null||document.removeEventListener("visibilitychange",this.looseFocus),Ie(this),mr(this)}}class Wx extends dp{constructor(){super({key:"start"});$(this,"obstaclesController");$(this,"flowers",[]);$(this,"monsters",[]);$(this,"fires",[]);$(this,"plants",[]);$(this,"firewalkers",[]);$(this,"crabs",[]);$(this,"birds",[]);$(this,"bats",[]);$(this,"bombs",[]);$(this,"dragons",[]);$(this,"zeps",[]);$(this,"tnts",[]);$(this,"bears",[]);$(this,"flies",[]);$(this,"crows",[]);$(this,"saws",[]);$(this,"boss",[]);$(this,"lava",[]);$(this,"index",0);$(this,"hsv");$(this,"shoutout");$(this,"credits");$(this,"map");$(this,"ground1");$(this,"cursors");$(this,"goFS",!1)}init(){var C;super.init(),this.cursors=(C=this.input.keyboard)==null?void 0:C.createCursorKeys(),this.sys.game.device.fullscreen.available&&(this.goFS=!0),this.obstaclesController=new op,this.monsters=[],this.fires=[],this.flowers=[],this.plants=[],this.firewalkers=[],this.crabs=[],this.birds=[],this.bats=[],this.dragons=[],this.bombs=[],this.zeps=[],this.bears=[],this.tnts=[],this.flies=[],this.crows=[],this.bears=[],this.tnts=[],this.flies=[],this.crows=[],this.saws=[],this.lava=[];const i={lastHealth:100,coinsCollected:0,carrotsCollected:0,currLevel:1,scorePoints:0,highScorePoints:0,livesRemaining:3,invincibility:!1,speedUp:!1,powerUp:!1,throw:!1,pokeBall:!1,voice:!1},f=JSON.stringify(i);window.localStorage.setItem("ra8bit.stats",f)}preload(){Ge(this),this.load.tilemapTiledJSON("start","assets/start.json")}create(){super.create(),this.hsv=rt.Display.Color.HSVColorWheel();const{width:i,height:f}=this.scale;this.map=this.make.tilemap({key:"start",tileWidth:64,tileHeight:64});const C=this.map.addTilesetImage("ground","groundTiles",64,64,0,2),w=this.map.addTilesetImage("minira8bits","ra8bitTiles",64,64,0,2);this.ground1=this.map.createLayer("ground",[C,w]),this.ground1.setCollisionByProperty({collides:!0,recalculateFaces:!1});const a=this.map.getObjectLayer("objects");a==null||a.objects.forEach(e=>{const{x:u=0,y=0,name:d,width:l=0,height:h=0,rotation:r=0}=e;switch(d){default:No(this,d,u,y,l,h,r,4,[1],this.obstaclesController,e,void 0);break}}),this.matter.world.convertTilemapLayer(this.ground1,{label:"ground",friction:0,frictionStatic:0}),this.matter.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.setBounds(0,-308,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.setAlpha(1),this.cameras.main.setZoom(.5),this.cameras.main.roundPixels=!0,this.matter.world.on("collisionstart",(e,u,y)=>{var l;const d=e.pairs;for(let h=0;h<d.length;h++){const r=d[h].bodyA,n=d[h].bodyB;~~(n.position.x-r.position.x),~~(n.position.y-r.position.y)<=32&&_.emit(((l=r.gameObject)==null?void 0:l.name)+"-blocked",r.gameObject)}}),Pu(this,"theme"),this.tweens.chain({targets:this.cameras.main,tweens:[{scrollX:80*64,delay:0,ease:"Sine.easeInOut",duration:5e3,yoyo:!0,repeat:-1,loop:-1,repeatDelay:0,hold:500}],loop:-1}),this.input.on("pointerdown",()=>{this.continueGame()}),this.input.on("keydown",()=>{this.continueGame()});const T=this.cameras.add(0,0,i,128);this.shoutout=this.add.bitmapText(i/2,-400,"press_start","PRESS SPACE TO PLAY",24).setTint(16741120).setOrigin(.5,.5),this.credits=this.add.bitmapText(320+640,-350,"press_start","Written by c0ntrol zero, Artwork by Pixel8it, Storyline by Dandybanger, C 2024 RBITS, C 2022 Ra8bits, C 2022 Moonshot, ",12).setTint(16741120).setOrigin(.5,.5),this.credits.setDropShadow(0,2,16711680,.5),T.startFollow(this.shoutout),T.setFollowOffset(0,-216),T.setViewport(320,0,640,512),T.roundPixels=!0,this.tweens.chain({targets:this.credits,tweens:[{x:320,delay:0,ease:"Sine.easeInOut",duration:3e3,repeat:-1,yoyo:!0,offset:0}],loop:-1}),localStorage.removeItem("player-position")}continueGame(){this.game.sound.stopAll(),this.scene.start("player-select")}preDestroy(){this.obstaclesController.destroy(this)}destroy(){super.destroy(),this.input.off("pointerdown",()=>{this.continueGame()}),this.input.off("keydown",()=>{this.continueGame()}),this.monsters.forEach(i=>i.destroy()),this.fires.forEach(i=>i.destroy()),this.plants.forEach(i=>i.destroy()),this.flowers.forEach(i=>i.destroy()),this.crabs.forEach(i=>i.destroy()),this.birds.forEach(i=>i.destroy()),this.firewalkers.forEach(i=>i.destroy()),this.bats.forEach(i=>i.destroy()),this.dragons.forEach(i=>i.destroy()),this.bombs.forEach(i=>i.destroy()),this.zeps.forEach(i=>i.destroy()),this.bears.forEach(i=>i.destroy()),this.tnts.forEach(i=>i.destroy()),this.flies.forEach(i=>i.destroy()),this.crows.forEach(i=>i.destroy()),this.saws.forEach(i=>i.destroy()),this.lava.forEach(i=>i.destroy()),this.shoutout.destroy(),this.credits.destroy(),this.tweens.destroy(),this.ground1.destroy(),this.map.destroy()}update(i,f){var a;if(super.update(i,f),!super.doStep())return;this.monsters.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.fires.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.firewalkers.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.zeps.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.flies.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.crabs.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.dragons.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.crows.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.flowers.forEach(T=>T.update(f)),this.plants.forEach(T=>T.update(f)),this.birds.forEach(T=>{T.update(f),T.lookahead(this.map)}),this.bats.forEach(T=>T.update(f)),this.bombs.forEach(T=>T.update(f)),this.bears.forEach(T=>T.update(f)),this.tnts.forEach(T=>T.update(f)),this.saws.forEach(T=>T.update(f)),this.lava.forEach(T=>{T.update(f)});const C=this.hsv[this.index].color,w=this.hsv[359-this.index].color;this.shoutout.setTint(C,w,C,w),this.index++,this.index>=360&&(this.index=0),up(this),(_e(this,-1)||((a=this.cursors)==null?void 0:a.space.isDown))&&this.continueGame()}}function Hx(){const s=Date.now().toString(36),t=Math.random().toString(36).substring(2);return s+t}class $x{constructor(t,i,f=!1){$(this,"hasInvincibility",!1);$(this,"hasSpeedUp",!1);$(this,"hasPower",!1);$(this,"hasPoop",!1);$(this,"hasPokeBall",!1);$(this,"hasVoice",!1);$(this,"hasBeserker",!1);$(this,"currLevel",1);$(this,"scene");$(this,"player");$(this,"hasEvents",!1);$(this,"oldSpeed",5);$(this,"blinkingTween");$(this,"timerEvent");this.player=t,this.scene=i,f||(_.on("card-6",this.activateSpeedUp,this),_.on("card-5",this.activatePowerUp,this),_.on("card-7",this.activateMystery,this),_.on("card-4",this.activateDroppings,this),_.on("card-8",this.activateWarp,this),_.on("card-3",this.activatePokeBall,this),_.on("card-2",this.activateDeadEnd,this),_.on("card-1",this.activateAnotherPlayer,this),_.on("card-9",this.activateVoice,this)),this.hasEvents=f;const C=window.localStorage.getItem("ra8bit.stats");if(C!=null){let a=JSON.parse(C);this.hasSpeedUp=a.speedUp,this.hasPower=a.powerUp,this.hasPokeBall=a.pokeBall,this.hasVoice=a.voice,this.hasPoop=a.throw,this.currLevel=a.currLevel,this.hasPokeBall&&this.player.setProjectile("moonshot-ball","moonshot-splash")}}destroy(){this.hasEvents||(_.off("card-6",this.activateSpeedUp,this),_.off("card-5",this.activatePowerUp,this),_.off("card-7",this.activateMystery,this),_.off("card-4",this.activateDroppings,this),_.off("card-8",this.activateWarp,this),_.off("card-3",this.activatePokeBall,this),_.off("card-2",this.activateDeadEnd,this),_.off("card-1",this.activateAnotherPlayer,this),_.off("card-9",this.activateVoice,this))}activateVoice(){this.hasVoice=!this.hasVoice,this.player.setVoice(this.hasVoice),_.emit("voice-random"),_.emit("save-state")}activatePokeBall(){this.hasPokeBall=!0,this.hasPokeBall&&this.player.setProjectile("moonshot-ball","moonshot-splash"),_.emit("power-pokeball",this.hasPokeBall),_.emit("save-state")}activateAnotherPlayer(){this.player.changeSkin(),this.closeInventory()}activateSpeedUp(){this.hasSpeedUp=!this.hasSpeedUp,this.player.setSpeed(this.hasSpeedUp?6:5),_.emit("power-speed",this.hasSpeedUp),_.emit("save-state")}activatePowerUp(){this.hasPower=!0,_.emit("power-power",this.hasPower),_.emit("save-state")}activateMystery(){this.player.toggle(),this.closeInventory()}activateDroppings(){this.hasPoop=!0,this.hasPokeBall=!1,this.hasPoop&&this.player.setProjectile("dropping","dropping-splash"),_.emit("power-poop",this.hasPoop),_.emit("save-state")}activateWarp(){Ie(this.scene),_.emit("warp-level",0),this.scene.scene.stop("inventory"),this.scene.scene.stop("level"+this.currLevel),this.scene.scene.start("warp")}activateDeadEnd(){this.closeInventory(),this.scene.scene.restart(),_.emit("restart")}reset(){this.hasInvincibility=!1,this.hasSpeedUp=!1,this.hasPower=!1,this.hasPoop=!1,this.hasPokeBall=!1,this.hasVoice=!1,this.hasBeserker=!1}isInvincible(){return this.hasInvincibility}isPoop(){return this.hasPoop||this.hasPokeBall}isSpeedUp(){return this.hasSpeedUp}isPower(){return this.hasPower}setPower(t){this.hasPower=!0,_.emit("power-power",this.hasPower)}setPokeball(){this.hasPokeBall=!0,this.hasPoop=!0,this.player.setProjectile("moonshot-ball","moonshot-splash"),_.emit("power-poop",this.hasPoop)}setVoice(){this.hasVoice=!0}setInvincibility(t){var i;this.hasInvincibility=!0,t.time.delayedCall(10*1e3,this.restoreInvincibility,void 0,this),(i=this.player.getSprite())==null||i.setCollidesWith([1]),_.emit("power-invincible",this.hasInvincibility),this.blink(16117297,10)}setCrazySpeed(t){this.hasSpeedUp=!0,this.hasPower=!0,this.player.setSpeed(8),this.hasBeserker&&this.player.setSpeed(9),_.emit("power-power",this.hasPower),_.emit("power-speed",this.hasSpeedUp),this.blink(10818397,10),t.time.delayedCall(10*1e3,this.restoreCrazySpeed,void 0,this)}restoreCrazySpeed(){this.player.setSpeed(this.oldSpeed),_.emit("power-speed",!1)}setBezerker(t){this.hasBeserker=!0,this.hasInvincibility=!0,this.hasPower=!0,t.time.delayedCall(10*1e3,this.restoreBezerker,void 0,this),Phaser.Display.Color.ValueToColor(3998254),Phaser.Display.Color.ValueToColor(15292100),_.emit("power-invincible",this.hasInvincibility),_.emit("power-power",this.hasPower),this.blink(15102637,10)}restoreBezerker(){this.hasBeserker=!1,this.hasInvincibility=!1,_.emit("power-invincible",this.hasInvincibility)}isBezerker(){return this.hasBeserker}restoreInvincibility(){var t;this.hasInvincibility=!1,(t=this.player.getSprite())==null||t.setCollidesWith([1,4]),_.emit("power-invincible",this.hasInvincibility)}setSpeed(t){this.hasSpeedUp=!0,this.oldSpeed=this.player.getSpeed(),this.player.setSpeed(6),t.time.delayedCall(20*1e3,this.restoreSpeed,void 0,this),_.emit("power-speed",this.hasSpeedUp)}setPoop(){this.hasPoop||this.player.setProjectile("dropping","dropping-splash"),this.hasPoop=!0,_.emit("power-poop",this.hasPoop)}restoreSpeed(){this.hasSpeedUp=!1,this.player.setSpeed(this.oldSpeed),_.emit("power-speed",this.hasSpeedUp)}restorePower(){this.hasPower=!1,_.emit("power-power",this.hasPower)}add(t,i){switch(t){case"berry":{this.setPoop();break}case"pow":{this.setPower(i);break}case"star":{this.setSpeed(i);break}case"rubber1":{this.setInvincibility(i);break}case"rubber2":{this.setBezerker(i);break}case"rubber3":{this.setCrazySpeed(i);break}}}closeInventory(){this.player.unpokeVirtualStick(this.scene),this.scene.scene.stop("inventory")}blink(t,i){var w,a,T;(w=this.blinkingTween)==null||w.stop(),(a=this.timerEvent)==null||a.remove(),(T=this.player.getSprite())==null||T.setTint(16777215);const f=Phaser.Display.Color.ValueToColor(16777215),C=Phaser.Display.Color.ValueToColor(t);this.blinkingTween=this.scene.tweens.addCounter({from:0,to:100,duration:100,repeat:-1,yoyo:!0,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:e=>{var l;const u=e.getValue(),y=Phaser.Display.Color.Interpolate.ColorWithColor(f,C,100,u),d=Phaser.Display.Color.GetColor(y.r,y.g,y.b);(l=this.player.getSprite())==null||l.setTint(d)}}),this.timerEvent=this.scene.time.addEvent({delay:i*1e3,callback:()=>{var e,u;(e=this.blinkingTween)==null||e.stop(),(u=this.player.getSprite())==null||u.setTint(16777215),this.timerEvent=void 0}})}}const Pa=Phaser.Input.Keyboard.Key,wa=Phaser.Input.Keyboard.KeyCodes;class Kx{constructor(t){this.cursorKeys={up:new Pa(t,wa.UP),down:new Pa(t,wa.DOWN),left:new Pa(t,wa.LEFT),right:new Pa(t,wa.RIGHT)},this.noKeyDown=!0}shutdown(t){for(var i in this.cursorKeys)this.cursorKeys[i].destroy();this.cursorKeys=void 0}destroy(t){shutdown(t)}createCursorKeys(){return this.cursorKeys}setKeyState(t,i){var f=this.cursorKeys[t];return f.enabled?(i&&(this.noKeyDown=!1),f.isDown!==i&&(Ma.timeStamp=Date.now(),Ma.keyCode=f.keyCode,i?f.onDown(Ma):f.onUp(Ma)),this):this}clearAllKeysState(){this.noKeyDown=!0;for(var t in this.cursorKeys)this.setKeyState(t,!1);return this}getKeyState(t){return this.cursorKeys[t]}get upKeyDown(){return this.cursorKeys.up.isDown}get downKeyDown(){return this.cursorKeys.down.isDown}get leftKeyDown(){return this.cursorKeys.left.isDown}get rightKeyDown(){return this.cursorKeys.right.isDown}get anyKeyDown(){return!this.noKeyDown}}var Ma={timeStamp:0,keyCode:0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,location:0};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var jx=180/Math.PI,Jx=function(s){return s*jx};const fp={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var cp=function(s,t,i){switch(i===void 0?i={}:i===!0&&(i=Zx),i.left=!1,i.right=!1,i.up=!1,i.down=!1,s=(s+360)%360,t){case 0:s<180?i.down=!0:i.up=!0;break;case 1:s>90&&s<=270?i.left=!0:i.right=!0;break;case 2:s>45&&s<=135?i.down=!0:s>135&&s<=225?i.left=!0:s>225&&s<=315?i.up=!0:i.right=!0;break;case 3:s>22.5&&s<=67.5?(i.down=!0,i.right=!0):s>67.5&&s<=112.5?i.down=!0:s>112.5&&s<=157.5?(i.down=!0,i.left=!0):s>157.5&&s<=202.5?i.left=!0:s>202.5&&s<=247.5?(i.left=!0,i.up=!0):s>247.5&&s<=292.5?i.up=!0:(s>292.5&&s<=337.5&&(i.up=!0),i.right=!0);break}return i},Zx={};const $s=Phaser.Utils.Objects.GetValue,Qx=Phaser.Math.Distance.Between,qx=Phaser.Math.Angle.Between;class _x extends Kx{constructor(t,i){super(t),this.resetFromJSON(i)}resetFromJSON(t){this.start==null&&(this.start={x:0,y:0}),this.end==null&&(this.end={x:0,y:0}),this._enable=void 0,this.setEnable($s(t,"enable",!0)),this.setMode($s(t,"dir","8dir")),this.setDistanceThreshold($s(t,"forceMin",16));var i=$s(t,"start.x",null),f=$s(t,"start.y",null),C=$s(t,"end.x",null),w=$s(t,"end.y",null);return this.setVector(i,f,C,w),this}toJSON(){return{enable:this.enable,dir:this.dirMode,forceMin:this.forceMin,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}setMode(t){return typeof t=="string"&&(t=fp[t]),this.dirMode=t,this}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.clearVector(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setDistanceThreshold(t){return t<0&&(t=0),this.forceMin=t,this}clearVector(){return this.start.x=0,this.start.y=0,this.end.x=0,this.end.y=0,this.clearAllKeysState(),this}setVector(t,i,f,C){if(!this.enable)return this;if(t===null)return this.clearVector(),this;if(f===void 0&&(f=t,t=0,C=i,i=0),this.start.x=t,this.start.y=i,this.end.x=f,this.end.y=C,this.forceMin>0&&this.force<this.forceMin)return this.clearVector(),this;this.noKeyDown=!0;var w=cp(this.angle,this.dirMode,!0);for(var a in w)this.setKeyState(a,w[a]);return this}get forceX(){return this.end.x-this.start.x}get forceY(){return this.end.y-this.start.y}get force(){return Qx(this.start.x,this.start.y,this.end.x,this.end.y)}get rotation(){return qx(this.start.x,this.start.y,this.end.x,this.end.y)}get angle(){return Jx(this.rotation)}get octant(){var t=0;return this.rightKeyDown?t=this.downKeyDown?45:0:this.downKeyDown?t=this.leftKeyDown?135:90:this.leftKeyDown?t=this.upKeyDown?225:180:this.upKeyDown&&(t=this.rightKeyDown?315:270),t}}const Is={setEventEmitter(s,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var vp=function(s,t,i,f){return f===void 0?f={}:f===!0&&(f=t1),i.getWorldPoint(s,t,f),f},t1={};const Rh=Phaser.Utils.Objects.GetValue,e1=Phaser.Geom.Circle,i1=Phaser.Geom.Circle.Contains;class pp extends _x{constructor(t,i){var f=t.scene;super(f,i);var C=Rh(i,"eventEmitter",void 0),w=Rh(i,"EventEmitterClass",void 0);this.setEventEmitter(C,w),this.scene=f,this.mainCamera=f.sys.cameras.main,this.pointer=void 0,this.gameObject=t,this.radius=Rh(i,"radius",100),t.setInteractive(new e1(t.displayOriginX,t.displayOriginY,this.radius),i1),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.pointer=void 0,this}toJSON(){var t=super.toJSON();return t.radius=this.radius,t}boot(){this.gameObject.on("pointerdown",this.onKeyDownStart,this),this.gameObject.on("pointerover",this.onKeyDownStart,this),this.scene.input.on("pointermove",this.onKeyDown,this),this.scene.input.on("pointerup",this.onKeyUp,this),this.gameObject.once("destroy",this.onParentDestroy,this)}shutdown(t){!this.scene||(this.scene.input.off("pointermove",this.onKeyDown,this),this.scene.input.off("pointerup",this.onKeyUp,this),this.destroyEventEmitter(),this.scene=void 0,this.mainCamera=void 0,this.pointer=void 0,this.gameObject=void 0,super.shutdown())}destroy(t){this.shutdown(t)}onParentDestroy(t,i){this.destroy(i)}onKeyDownStart(t){!t.isDown||this.pointer!==void 0||(this.pointer=t,this.onKeyDown(t),this.emit("pointerdown",t))}onKeyDown(t){if(this.pointer===t){var i=t.camera;if(!!i){var f=this.gameObject,C=this.end;i!==this.mainCamera?C=vp(t.x,t.y,i,C):(C.x=t.worldX,C.y=t.worldY);var w=f.x,a=f.y;f.scrollFactorX===0&&(w+=i.scrollX),f.scrollFactorY===0&&(a+=i.scrollY),this.setVector(w,a,C.x,C.y),this.emit("update")}}}onKeyUp(t){this.pointer===t&&(this.pointer=void 0,this.clearVector(),this.emit("update"),this.emit("pointerup",t))}}Object.assign(pp.prototype,Is);const ys=Phaser.Utils.Objects.GetValue;class mp{constructor(t,i){i===void 0&&(i={});var f=ys(i,"eventEmitter",void 0),C=ys(i,"EventEmitterClass",void 0);this.setEventEmitter(f,C),i.eventEmitter=this.getEventEmitter(),this.scene=t,this.base=void 0,this.thumb=void 0,this.touchCursor=void 0,this.setRadius(ys(i,"radius",100)),this.addBase(ys(i,"base",void 0),i),this.addThumb(ys(i,"thumb",void 0));var w=ys(i,"x",0),a=ys(i,"y",0);this.base.setPosition(w,a),this.thumb.setPosition(w,a),ys(i,"fixed",!0)&&this.setScrollFactor(0),this.boot()}destroy(){this.destroyEventEmitter(),this.base.destroy(),this.thumb.destroy(),this.scene=void 0,this.base=void 0,this.thumb=void 0,this.touchCursor=void 0}createCursorKeys(){return this.touchCursor.createCursorKeys()}get forceX(){return this.touchCursor.forceX}get forceY(){return this.touchCursor.forceY}get force(){return this.touchCursor.force}get rotation(){return this.touchCursor.rotation}get angle(){return this.touchCursor.angle}get up(){return this.touchCursor.upKeyDown}get down(){return this.touchCursor.downKeyDown}get left(){return this.touchCursor.leftKeyDown}get right(){return this.touchCursor.rightKeyDown}get noKey(){return this.touchCursor.noKeyDown}get pointerX(){return this.touchCursor.end.x}get pointerY(){return this.touchCursor.end.y}get pointer(){return this.touchCursor.pointer}setPosition(t,i){return this.x=t,this.y=i,this}set x(t){this.base.x=t,this.thumb.x=t}set y(t){this.base.y=t,this.thumb.y=t}get x(){return this.base.x}get y(){return this.base.y}setVisible(t){return this.visible=t,this}toggleVisible(){return this.visible=!this.visible,this}get visible(){return this.base.visible}set visible(t){this.base.visible=t,this.thumb.visible=t}get enable(){return this.touchCursor.enable}set enable(t){this.touchCursor.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setRadius(t){return this.radius=t,this}addBase(t,i){return this.base&&this.base.destroy(),t===void 0&&(t=this.scene.add.circle(0,0,this.radius).setStrokeStyle(3,255)),i===void 0&&(i={}),i.eventEmitter=this.getEventEmitter(),this.touchCursor=new pp(t,i),this.base=t,this}addThumb(t){return this.thumb&&this.thumb.destroy(),t===void 0&&(t=this.scene.add.circle(0,0,40).setStrokeStyle(3,65280)),this.thumb=t,this}setScrollFactor(t){return this.base.setScrollFactor(t),this.thumb.setScrollFactor(t),this}boot(){this.on("update",this.update,this)}update(){var t=this.touchCursor,i=this.base.x,f=this.base.y;if(t.anyKeyDown)if(t.force>this.radius){var C=t.rotation;i+=Math.cos(C)*this.radius,f+=Math.sin(C)*this.radius}else i+=t.forceX,f+=t.forceY;return this.thumb.x=i,this.thumb.y=f,this}}Object.assign(mp.prototype,Is);const s1=Phaser.Scene;var dr=function(s){return s instanceof s1},gp=function(s){return s==null||typeof s!="object"?null:dr(s)?s:s.scene&&dr(s.scene)?s.scene:s.parent&&s.parent.scene&&dr(s.parent.scene)?s.parent.scene:null};const r1=Phaser.Game;var Nd=function(s){return s instanceof r1},Uo=function(s){if(s==null||typeof s!="object")return null;if(Nd(s))return s;if(Nd(s.game))return s.game;if(dr(s))return s.sys.game;if(dr(s.scene))return s.scene.sys.game};const n1=Phaser.Utils.Objects.GetValue;class Ne{constructor(t,i){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(n1(i,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}setParent(t){return this.parent=t,this.scene=gp(t),this.game=Uo(t),this}}Object.assign(Ne.prototype,Is);const pn=Phaser.Utils.Objects.GetValue;class Fs extends Ne{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(pn(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(pn(t,"enable",!0)),this.setMode(pn(t,"mode",1)),this.setClickInterval(pn(t,"clickInterval",100)),this.setDragThreshold(pn(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=a1[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,i,f,C){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,C))}onRelease(t,i,f,C){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,C),this.pointer=void 0)}onPointOut(t,i){this.pointer===t&&this.cancel()}onMove(t,i,f,C){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,i,f){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,i,f),this;this.pointer=void 0;var C=this.lastClickTime;return C!==void 0&&t-C<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,i,f),this)}cancel(){return this.pointer=void 0,this}onOver(t,i,f,C){return this.enable?(this.emit("over",this,this.parent,t,C),this):this}onOut(t,i){return this.enable?(this.emit("out",this,this.parent,t,i),this):this}}const a1={press:0,pointerdown:0,release:1,pointerup:1};class kd{constructor(t,i){$(this,"joystick");$(this,"throwButton");$(this,"jumpButton");$(this,"outer",8947848);$(this,"inner",13421772);$(this,"alphaOn",.66);$(this,"alphaOff",.33);$(this,"A");$(this,"B");$(this,"scene");$(this,"stickRadius",160);$(this,"buttonRadius",88);$(this,"started",!1);this.scene=t,this.B=t.add.circle(i-96,500,this.buttonRadius,this.outer).setScrollFactor(0).setAlpha(this.alphaOn).setOrigin(.5,1).setStrokeStyle(2,this.inner).setDepth(99),this.A=t.add.circle(i-248,600,this.buttonRadius,this.outer).setScrollFactor(0).setAlpha(this.alphaOn).setOrigin(.5,1).setStrokeStyle(2,this.inner).setDepth(99),this.joystick=new mp(t,{x:172,y:512,radius:this.stickRadius,base:t.add.circle(0,0,160,this.outer,this.alphaOn).setDepth(99),thumb:t.add.circle(0,0,72,this.inner,this.alphaOn).setDepth(99),forceMin:20}),this.throwButton=new Fs(this.B,{enable:!0,mode:0,clickInterval:8,threshold:void 0}),this.jumpButton=new Fs(this.A,{enable:!0,mode:0,clickInterval:8,threshold:void 0})}destroy(){this.B.destroy(),this.A.destroy(),this.joystick.destroy(),this.throwButton.destroy(),this.jumpButton.destroy()}startTimer(){this.started||(this.joystick.down||this.joystick.up||this.joystick.left||this.joystick.right)&&(this.started=!0,_.emit("level-start"))}startTimerNow(){this.started||(_.emit("level-start"),this.started=!0)}getStick(){return this.joystick}getA(){return this.jumpButton}getB(){return this.throwButton}setBActive(t){this.B.setAlpha(t?this.alphaOn:this.alphaOff)}setAActive(t){this.A.setAlpha(t?this.alphaOn:this.alphaOff)}fireA(){}fireB(){}visualFeedback(t){this.scene.tweens.add({targets:t,tint:16777215,ease:"Cubic.easeOut",duration:50,repeat:-1,yoyo:!0})}lerp(t,i,f){return t*(1-f)+i*f}dampenVelocityX(t){const i=Phaser.Math.Clamp(this.joystick.force,0,this.stickRadius);return i==0?0:t/this.stickRadius*i}}class o1{constructor(t,i,f,C,w,a,T){$(this,"scene");$(this,"sprite");$(this,"cursors");$(this,"stateMachine");$(this,"obstacles");$(this,"powerUps");$(this,"stats");$(this,"jp");$(this,"jpI");$(this,"health",100);$(this,"playerSpeed",5);$(this,"playerJump",15);$(this,"lastHitBy");$(this,"sensors_bottom");$(this,"sensors_left");$(this,"sensors_right");$(this,"lasthit",0);$(this,"poopbag",new Map);$(this,"trashcan",new Map);$(this,"deltaS",0);$(this,"lastAction",0);$(this,"lastThrow",0);$(this,"throwDelay",0);$(this,"ACCEL_FRAMES",6);$(this,"DEACCEL_FRAMES",3);$(this,"bonusObjects",["berry","pow","star","rubber1","rubber2","rubber3"]);$(this,"standingOnFloor",!1);$(this,"standingOnPlatform",!1);$(this,"platformId",-1);$(this,"wasStandingOnFloor",!1);$(this,"cannotThrow",!1);$(this,"delayedJump",!1);$(this,"jumpCount",0);$(this,"jumpActionValidUntil",0);$(this,"sounds");$(this,"tilemap");$(this,"colCat",0);$(this,"spawn_x",0);$(this,"spawn_y",0);$(this,"playerButton1",!1);$(this,"playerButton2",!1);$(this,"LEANWAY",8);$(this,"isDead",!1);$(this,"wasd");$(this,"buttonRepeat",[]);$(this,"inventoryOpen",!1);$(this,"gameStopping",!1);$(this,"projectileName","dropping");$(this,"projectileSplash","dropping-splash");$(this,"joystick");$(this,"name");var e,u,y,d,l,h,r,n,v,o,c;this.scene=t,this.sprite=i,this.cursors=f,this.obstacles=C,this.sounds=w,this.tilemap=a,this.stats=T,this.throwDelay=8,this.lastThrow=0,this.name=globalThis.rabbit||"player1",this.powerUps=new $x(this,t,!1),this.spawn_x=((e=this.sprite.body)==null?void 0:e.position.x)||640,this.spawn_y=((u=this.sprite.body)==null?void 0:u.position.y)||-100,this.sprite!==void 0&&this.createAnims(globalThis.rabbitSpriteSheet),this.stateMachine=new fe(this,this.name),this.scene.events.on("preupdate",this.preupdate,this),(y=this.scene.input.gamepad)==null||y.once(rt.Input.Gamepad.Events.DISCONNECTED,this.onGamePadDisconnected,this),(d=this.scene.input.gamepad)==null||d.once(rt.Input.Gamepad.Events.CONNECTED,this.onGamePadConnected,this),this.wasd=(l=this.scene.input.keyboard)==null?void 0:l.addKeys({up:rt.Input.Keyboard.KeyCodes.W,down:rt.Input.Keyboard.KeyCodes.S,left:rt.Input.Keyboard.KeyCodes.A,right:rt.Input.Keyboard.KeyCodes.D}),this.buttonRepeat=Array(32).fill(0),(h=this.scene.input.keyboard)==null||h.once("keydown",()=>{_.emit("level-start")}),(r=this.scene.input.keyboard)==null||r.on("keydown-I",m=>{this.openInventory()}),(n=this.scene.input.keyboard)==null||n.once("keydown-ESC",()=>{this.stopGame()}),this.stateMachine.addState("idle",{onEnter:this.idleOnEnter,onUpdate:this.idleOnUpdate}).addState("walk",{onEnter:this.walkOnEnter,onUpdate:this.walkOnUPdate}).addState("jump",{onEnter:this.jumpOnEnter,onUpdate:this.jumpOnUpdate}).addState("spike-hit",{onEnter:this.spikeHitOnEnter}).addState("world-hit",{onEnter:this.worldHitOnEnter}).addState("hit",{onEnter:this.playerHitOnEnter}).addState("stomped",{onEnter:this.creatureStompOnEnter}).addState("dead",{onEnter:this.deadOnEnter}).addState("throw",{onEnter:this.throwOnEnter,onUpdate:this.throwOnUpdate}).setState("idle"),(v=this.sprite)==null||v.setOnCollideEnd(m=>{let p=m.bodyB,g=m.bodyA;p.label==="player"?p=m.bodyA:g.label!=="player"&&(g=p),(p.label==="platform"||p.label==="billboard"||p.label==="bar"||p.label=="mushroom-platform")&&(this.standingOnPlatform=!1)}),(o=this.sprite)==null||o.setOnCollideActive(m=>{var x;let p=m.bodyB,g=m.bodyA;p.label==="player"?p=m.bodyA:g.label!=="player"&&(g=p),(p.label==="platform"||p.label=="mushroom-platform")&&(this.handlePlatform(p),(g.position.x<p.position.x||g.position.x>=p.position.x+127)&&((x=g.gameObject)==null||x.setVelocityY(10))),p.label==="billboard"&&(this.standingOnPlatform=!0),(p.position.y>g.position.y&&p.position.y-g.position.y<96||this.standingOnPlatform)&&(this.standingOnFloor=!0,this.wasStandingOnFloor=!0,this.jumpCount=0),this.sprite.flipX?p.position.x<g.position.x&&g.position.x-p.position.x<=96&&Math.abs(p.position.y-g.position.y)<=64&&!this.standingOnPlatform&&(this.cannotThrow=!0):p.position.x>g.position.x&&p.position.x-g.position.x<=96&&Math.abs(p.position.y-g.position.y)<=64&&!this.standingOnPlatform&&(this.cannotThrow=!0)}),(c=this.sprite)==null||c.setOnCollide(m=>{var S;let p=m.bodyB,g=m.bodyA;if(p.label==="player"?p=m.bodyA:g.label!=="player"&&(g=p),this.obstacles.isType("spikes",p)){this.lastHitBy=p.gameObject,this.stateMachine.setState("spike-hit");return}if(this.obstacles.isType("exit",p)){const M=this.obstacles.getValues("exit",p),b=M.room,A=M.event;this.scene.cameras.main.fadeOut(500,0,0,0),this.scene.cameras.main.once(rt.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{_.emit(A),this.scene.scene.stop(),(globalThis.noWallet||globalThis.moonshotBalance==0&&globalThis.ra8bitBalance==0&&!globalThis.hasNFT)&&b!=="bonus"?(Ie(this.scene),this.scene.scene.start("hoppa")):(Ie(this.scene),this.scene.scene.start(b))})}if(this.obstacles.isType("return",p)){this.scene.matter.world.pause();const M=this.obstacles.getValues("return",p);this.sprite.setPosition(M.spawnx*64,M.spawny*64),this.scene.cameras.main.setBounds(0,0,336*64,50*64),this.scene.cameras.main.startFollow(this.sprite,!0),this.scene.matter.world.resume()}if(this.obstacles.isType("goto",p)&&this.isDown()){this.scene.matter.world.pause();const M=this.obstacles.getValues("goto",p);this.sprite.scene.tweens.add({targets:this.sprite,y:this.sprite.y+this.sprite.height,ease:"Cubic.easeOut",duration:2e3,onComplete:()=>{this.sprite.setPosition(M.spawnx*64,M.spawny*64),this.scene.cameras.main.setBounds(0,0,M.camw*64,M.camh*64),this.scene.cameras.main.startFollow(this.sprite,!0),this.scene.matter.world.resume()}})}if(this.obstacles.isType("pipe",p)&&this.isDown()){this.scene.matter.world.pause();const M=this.obstacles.getValues("pipe",p);M.level===void 0?this.downThePipe(M.duration,M.delay,p.position.x,this.sprite.y,M.room_hei,M.dstx,M.dsty):this.downTheWarpPipe(M.duration,M.delay,p.position.x,(S=this.sprite)==null?void 0:S.y,M.level)}if(this.obstacles.isType("bonus",p)){const M=this.obstacles.getValues("bonus",p);if(M.use>0&&g.position.y>p.position.y){Bt(this.sounds,"bonustile");let b=M.use==5?1:~~(Math.random()*this.bonusObjects.length);for(;M.last==b;)b=~~(Math.random()*this.bonusObjects.length);const A=this.bonusObjects[b],L=this.scene.matter.add.sprite(p.position.x,p.position.y-64,A,void 0,{vertices:[{x:0,y:0},{x:64,y:0},{x:64,y:64},{x:0,y:64}],label:"bonus"});L.setName(A),L.setData("type","bonus"),L.setBounce(.2),L.setFriction(.03),L.setMass(.1);const R=rt.Display.Color.ValueToColor(16777215),O=rt.Display.Color.ValueToColor(12725423);this.scene.tweens.addCounter({from:0,to:100,duration:100,repeat:2,yoyo:!0,ease:rt.Math.Easing.Sine.InOut,onUpdate:D=>{const B=D.getValue(),G=rt.Display.Color.Interpolate.ColorWithColor(R,O,100,B),z=rt.Display.Color.GetColor(G.r,G.g,G.b);L.setTint(z)}}),this.bounceTile(p),M.use=M.use-1,M.last=b}return}if(this.obstacles.isType("dragon",p)||this.obstacles.isType("monster",p)||this.obstacles.isType("plant",p)||this.obstacles.isType("flower",p)||this.obstacles.isType("bird",p)||this.obstacles.isType("bat",p)||this.obstacles.isType("bomb",p)||this.obstacles.isType("crab",p)||this.obstacles.isType("firewalker",p)||this.obstacles.isType("bear",p)||this.obstacles.isType("fly",p)||this.obstacles.isType("crow",p)||this.obstacles.isType("tnt",p)||this.obstacles.isType("boss",p)||this.obstacles.isType("fire",p)){this.lastHitBy=p.gameObject,g.position.y+31<p.position.y||this.powerUps.isBezerker()?this.stateMachine.setState("stomped"):(this.obstacles.isType("plant",p)&&_.emit("plant-touched",p.gameObject,this),this.stateMachine.setState("hit"));return}if(this.obstacles.isType("saw",p)){this.lastHitBy=p.gameObject,this.stateMachine.setState("hit");return}if(this.obstacles.isType("brick",p)&&this.powerUps.isPower()){this.handleBrick(p);return}if(this.obstacles.isType("coinbrick",p)&&this.powerUps.isPower()){if(g.position.y>p.position.y+32){const M=this.obstacles.getValues("coinbrick",p);M.use>0?(M.use=M.use-1,No(this.scene,"coin",p.position.x-32,p.position.y-96-64*M.use,64,64,0,4,[0],this.obstacles,null,this),this.bounceTile(p)):M.use==0&&(M.use=-1)}return}const x=p.gameObject;if(!x){p.label==="Rectangle Body"&&p.position.y>g.position.y&&this.stateMachine.setState("world-hit");return}if(x instanceof rt.Physics.Matter.TileBody){const M=x;if(!M.tile.visible){M.destroy();return}M.tile.properties.breakable==!0&&g.position.y<=p.position.y&&((M.tile.properties.hits||0)==0&&(Bt(this.sounds,"breakingtile"),this.scene.time.delayedCall(M.tile.properties.breakdelay,()=>{var A;(A=M.tile.tilemapLayer)==null||A.removeTileAt(M.tile.x,M.tile.y,!0,!0),M.destroy()},[M],this)),M.tile.properties.hits=M.tile.properties.hits>0?M.tile.properties.hits-1:0),M.tile.properties.sound!==void 0&&Bt(this.sounds,M.tile.properties.sound),M.tile.properties.damage>0&&this.setHealth(this.health-M.tile.properties.damage),g.position.y<p.position.y&&p.position.y-g.position.y<96&&(this.standingOnFloor=!0,this.wasStandingOnFloor=!0);return}const E=x;switch(E.getData("type")){case"bonus":{Bt(this.sounds,E.name),E.name==="berry"?Pr(this.sounds,"blowitoutofyourass"):E.name==="pow"&&Pr(this.sounds,"hailtotheking"),this.powerUps.add(E.name,this.scene),E.destroy();break}case"dropping":{Bt(this.sounds,"pickupdropping"),this.collectPoop(E,!1);break}case"coin":{_.emit("coin-collected"),Bt(this.sounds,"pickupcoin"),this.bounceSpriteAndDestroy(E),rt.Math.Between(0,25)==0&&Pr(this.sounds,Ca(0,""));break}case"key":{E.setCollidesWith(6),_.emit("key-collected"),Bt(this.sounds,"pickupcoin"),this.bounceSpriteAndDestroy(E),Pr(this.sounds,Ca(0,"")),_.emit("wakeup-object");break}case"window":{this.stateMachine.getCurrentState()==="jump"&&(_.emit("coin-taken"),this.sprite.body.velocity.x=0,this.sprite.body.velocity.y=0,this.sprite.setIgnoreGravity(!0),this.scene.cameras.main.fadeOut(1e3,0,0,0),this.scene.cameras.main.once(rt.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(M,b)=>{this.scene.scene.stop(),this.scene.scene.stop("ui"),this.scene.scene.start("win")}));break}case"carrot":{_.emit("carrot-collected"),Bt(this.sounds,"pickupcarrot"),this.health=rt.Math.Clamp(this.health+1,0,100),this.bounceSpriteAndDestroy(E);break}case"heart":{Bt(this.sounds,"pickuphealth"),this.stats.livesRemaining+=1,_.emit("lives-changed",this.stats.livesRemaining),this.health=100,_.emit("health-changed",this.health),this.bounceSpriteAndDestroy(E);break}case"platform":case"mushroom-platform":{this.handlePlatform(p);break}case"billboard":{Bt(this.sounds,"click"),E.setFrame(rt.Math.Between(0,34));break}case"lightswitch":{g.position.y>p.position.y&&(this.bounceSprite(E),Bt(this.sounds,"lightswitch"),_.emit(E.name+"-touched",E));break}case"changeskin":{if(g.position.y>p.position.y){const M=this.obstacles.getValues("changeskin",p);M.use>0&&(M.use=M.use-1,this.bounceSprite(E),Bt(this.sounds,"changeskin"),_.emit(E.name+"-touched",E,this),Bt(this.sounds,"equalopportunity"))}break}case"lava-center":{this.lastHitBy=p.gameObject,Bt(this.sounds,"lava"),this.stateMachine.setState("world-hit");break}}})}createVirtualJoystick(){this.jp!==void 0&&(this.jp.getB().on("click",()=>{var t,i;this.playerButton1=!0,this.playerButton1&&this.playerButton2||this.cannotThrow||(this.throwOnEnter(),(t=this.jp)==null||t.fireB(),(i=this.jp)==null||i.startTimerNow())},this),this.jp.getA().on("click",()=>{var t,i;this.playerButton2=!0,this.playerButton1&&this.playerButton2||((t=this.jp)==null||t.fireA(),(i=this.jp)==null||i.startTimerNow())},this),this.joystick=this.jp.getStick())}setJoystick(t,i){t.game.device.os.desktop||t.input.gamepad.total>0||this.jp===void 0&&(this.jp=new kd(t,i),this.createVirtualJoystick())}pokeVirtualStick(t,i){!t.game.device.os.desktop&&t.input.gamepad.total<=0?(this.jpI=this.jp,this.jp=new kd(t,i),this.createVirtualJoystick()):this.jpI=void 0}unpokeVirtualStick(t){var i;(i=this.jp)==null||i.destroy(),this.jp=this.jpI,!t.game.device.os.desktop&&t.input.gamepad.total<=0&&this.createVirtualJoystick(),this.jpI=void 0,this.inventoryOpen=!1}onGamePadConnected(){this.jp!==void 0&&(this.jp.destroy(),this.jp=void 0,this.joystick=void 0),console.log("Connected gamepads: ",this.scene.input.gamepad.total)}onGamePadDisconnected(){this.setJoystick(this.scene,this.scene.scale.width),console.log("Connected gamepads: ",this.scene.input.gamepad.total)}takeDamage(t,i){this.setHealth(this.health-t),Bt(this.sounds,i),this.hitTween(),this.lasthit=this.scene.time.now}getCollideWith(){return this.colCat}setCollideWith(t){this.colCat=t}getSprite(){return this.sprite}openInventory(){this.inventoryOpen=!this.inventoryOpen,this.inventoryOpen&&this.scene.scene.launch("inventory",{player:this})}collectPoop(t,i=!0){this.trashcan.has(t.name)?console.log("Already destroyed "+t.name):(Bt(this.sounds,"droppinghits"),i&&(t.flipX=this.sprite.flipX,t.play("splash").once("animationcomplete",()=>{this.trashcan.set(t.name,t)})))}destroy(){var t,i,f;this.scene.events.off("preupdate",this.preupdate,this),this.poopbag.clear(),this.trashcan.clear(),(t=this.sprite)==null||t.destroy(),this.stateMachine.destroy(),(i=this.sounds)==null||i.clear(),(f=this.jp)==null||f.destroy(),this.powerUps.destroy()}preupdate(t,i){this.trashcan.forEach((f,C)=>{this.poopbag.delete(C),f.setActive(!1),f.setStatic(!0),f.setCollidesWith(0),f.setCollisionGroup(8),f.setCollisionCategory(16),f.setAlpha(0),f.destroy()}),this.trashcan.clear(),this.poopbag.forEach(f=>{f.getData("spawned")!=-1&&(rt.Geom.Intersects.RectangleToRectangle(this.sprite.getBounds(),f.getBounds())||(f.setCollidesWith([1,2,4]),f.setData("spawned",-1)))}),this.updateSpawnlocation()}update(t){this.inventoryOpen||(this.stateMachine.update(t),this.cannotThrow=!this.powerUps.isPoop(),this.standingOnPlatform=!1,this.playerButton1=!1,this.playerButton2=!1,this.jp!==void 0&&(this.jp.setBActive(!this.cannotThrow),this.jp.startTimer()),this.sprite.body!=null&&this.sprite.body.position.y>this.tilemap.heightInPixels-32&&this.stateMachine.setState("world-hit"))}handleBrick(t){const i=this.obstacles.getValues("brick",t);i.use>0?(i.use=i.use-1,i.emitter.emitParticle(this.tilemap,t),Bt(this.sounds,"explosion1")):i.use==0&&(i.emitter.removeBrick(this.tilemap,t),this.obstacles.remove("brick",t),zx(this.sounds,"explosion",2,6),i.use=-1)}setHealth(t){if(this.powerUps.isInvincible()){if(t>0){const i=rt.Math.Clamp(t,0,100);i>this.health&&(this.health=i,_.emit("health-changed",this.health))}return}this.health=rt.Math.Clamp(t,0,100),_.emit("health-changed",this.health),this.health<=0&&this.stateMachine.setState("dead")}getX(){return this.sprite.x}getY(){return this.sprite.y}idleOnEnter(){this.changeAction()}playerJumps(){if(this.jumpActionValidUntil<this.scene.game.loop.frame&&(this.wasStandingOnFloor=!1),this.isSpace()){if(this.standingOnFloor&&this.jumpCount==0||this.jumpCount==1)return this.stateMachine.setState("jump"),!0;this.jumpActionValidUntil=this.scene.game.loop.frame+this.LEANWAY}else{if(this.jumpActionValidUntil>this.scene.game.loop.frame&&this.jumpCount<2&&!this.wasStandingOnFloor)return this.stateMachine.setState("jump"),!0;this.jumpActionValidUntil>this.scene.game.loop.frame&&this.jumpCount<2&&this.wasStandingOnFloor&&(this.delayedJump=!0)}return!1}playerThrows(){this.isShift()&&(this.cannotThrow||this.stateMachine.setState("throw"))}getEventName(t){return this.name+"-"+t}idleOnUpdate(){this.scene.game.loop.frame-this.lastAction>120?this.sprite.play(this.getEventName("facing")):this.sprite.play(this.getEventName("idle")),(this.isLeft()||this.isRight())&&this.stateMachine.setState("walk"),this.isR2()&&this.openInventory(),this.playerThrows(),this.playerJumps(),this.updateVelocities("idle"),this.isStart()&&this.stopGame()}jumpOnEnter(){this.changeAction(),this.scene.events.emit("player-jumped"),this.sprite.play(this.getEventName("jump")),this.sprite.once(rt.Animations.Events.ANIMATION_COMPLETE,()=>{this.stateMachine.setState("idle")}),this.jumpCount++,this.sprite.setVelocityY(this.jumpCount==1?-1*this.playerJump:-1*(this.playerJump*.75)),this.jumpActionValidUntil=this.scene.game.loop.frame}jumpOnUpdate(){this.isShift()&&(this.cannotThrow||this.throwOnEnter()),this.playerJumps(),this.updateVelocities("jump")}walkOnEnter(){this.sprite.play(this.getEventName("walk")),this.changeAction()}walkOnUPdate(){this.playerThrows(),this.playerJumps(),this.updateVelocities("walk")}throwOnUpdate(){this.playerJumps(),this.updateVelocities("throw")}throwOnEnter(){var T,e;const t=this.scene.game.loop.frame-this.lastThrow,i=((T=this.sprite.body)==null?void 0:T.position.x)||-1,f=((e=this.sprite.body)==null?void 0:e.position.y)||-1;if(i==-1&&f==-1)return;if(t<this.throwDelay){this.isLeft()||this.isRight()?this.stateMachine.setState("walk"):this.stateMachine.setState("idle");return}const C="dropping"+Hx(),w=this.scene.matter.add.sprite(i-12,f-21,this.projectileName,void 0,{vertices:[{x:0,y:0},{x:24,y:0},{x:24,y:24},{x:0,y:24}],label:"dropping",angle:45,restitution:1});this.poopbag.set(C,w);const a=24+(this.stats.pokeBall?8:0);w.setBounce(.9),w.setFriction(0),w.setFrictionAir(5e-4),w.setMass(.1),w.setDepth(10),w.setVelocityX(this.sprite.flipX?-a:a),w.setCollisionGroup(6),w.setCollidesWith(0),w.setName(C),w.setData("type","dropping"),w.setData("spawned",this.scene.game.loop.frame),this.lastThrow=this.scene.game.loop.frame,w.setOnCollide(u=>{var l,h,r;const y=u.bodyB,d=u.bodyA;if(this.obstacles.isType("brick",d)){this.handleBrick(d),this.collectPoop(y.gameObject);return}if(((l=d.gameObject)==null?void 0:l.name)===void 0){const n=this.tilemap.getTileAtWorldXY(d.position.x,d.position.y,void 0,this.scene.cameras.main,"ground");n!=null&&n.properties!==void 0&&n.properties.sound!==void 0&&(Bt(this.sounds,n.properties.sound),n.properties.damage>0&&this.collectPoop(y.gameObject))}if(d.gameObject!==void 0)switch(d.label){case"ground":case"coin":case"heart":case"berry":case"rubber1":case"star":case"crate":case"carrot":case"key":Bt(this.sounds,"droppingbounces");break;case"spikes":Bt(this.sounds,"lava");break;case"fire":break;case"player":((h=y.gameObject)==null?void 0:h.name)!==void 0&&this.collectPoop(y.gameObject,!1);break;case"boss":(y.velocity.x>4||y.velocity.x<-4)&&(_.emit(d.gameObject.name+"-hit",d.gameObject),this.collectPoop(y.gameObject));break;case"dropping":y.gameObject!==void 0&&this.collectPoop(y.gameObject),this.collectPoop(d.gameObject);break;default:if(((r=d.gameObject)==null?void 0:r.name)!==void 0&&(y.velocity.x>3||y.velocity.x<-3)&&d.gameObject!==void 0){d.gameObject.setCollidesWith(6),_.emit(d.gameObject.name+"-stomped",d.gameObject);const n=100,v=this.scene.add.bitmapText(d.position.x,d.position.y,"press_start","+100",24).setTint(4925961);v.setBlendMode("DIFFERENCE"),this.scene.add.tween({targets:v,alpha:0,duration:800,ease:"Power2",onComplete:()=>{v.destroy()}}),_.emit("enemy-killed",n)}this.collectPoop(y.gameObject);break}}),this.sprite.play(this.getEventName("throw")).once("animationcomplete",()=>{this.isLeft()||this.isDown()?this.stateMachine.setState("walk"):this.stateMachine.setState("idle")}),w.anims.create({key:"splash",frameRate:25,frames:this.sprite.anims.generateFrameNames(this.projectileSplash,{start:1,end:3,prefix:"Splash",suffix:".webp"}),repeat:0})}hitTween(){const t=rt.Display.Color.ValueToColor(16777215),i=rt.Display.Color.ValueToColor(16711680);this.scene.tweens.addCounter({from:0,to:100,duration:100,repeat:2,yoyo:!0,ease:rt.Math.Easing.Sine.InOut,onUpdate:f=>{const C=f.getValue(),w=rt.Display.Color.Interpolate.ColorWithColor(t,i,100,C),a=rt.Display.Color.GetColor(w.r,w.g,w.b);this.sprite.setTint(a)}})}worldHitOnEnter(){this.health<=0||(this.sprite.setVelocityY(-10),this.hitTween(),this.lasthit=this.scene.time.now,Bt(this.sounds,"lava"),this.health=rt.Math.Clamp(0,0,100),_.emit("health-changed",this.health),this.stateMachine.setState("dead"))}stopGame(){this.gameStopping||(this.gameStopping=!0,Ie(this.scene),this.scene.scene.stop("ui"),this.scene.scene.stop(),this.scene.scene.start("hoppa"))}spikeHitOnEnter(){this.sprite.setVelocityY(-10),this.hitTween(),this.stateMachine.setState("idle"),this.setHealth(this.health-25),this.lasthit=this.scene.time.now,Bt(this.sounds,"lava")}playerHitOnEnter(){if(this.lasthit>this.scene.time.now+1e3)return;this.lasthit=this.scene.time.now;const t=rt.Display.Color.ValueToColor(16777215),i=rt.Display.Color.ValueToColor(16711680);this.scene.tweens.addCounter({from:0,to:100,duration:100,repeat:2,yoyo:!0,ease:rt.Math.Easing.Sine.InOut,onUpdate:f=>{const C=f.getValue(),w=rt.Display.Color.Interpolate.ColorWithColor(t,i,100,C),a=rt.Display.Color.GetColor(w.r,w.g,w.b);this.sprite.setTint(a)}}),Bt(this.sounds,"hit"),this.setHealth(this.health-25),this.stateMachine.setState("idle"),this.lastHitBy!==void 0&&this.sprite!==void 0?this.sprite.x<this.lastHitBy.x?this.sprite.setVelocityX(-40):this.sprite.setVelocityX(40):this.sprite.setVelocityY(-20)}creatureStompOnEnter(){var t;if(this.sprite.setVelocityY(-10),this.lastHitBy!==void 0){const i=this.lastHitBy.body;if(i!=null){const C=this.scene.add.bitmapText(i.position.x,i.position.y,"press_start","+100",24).setTint(16777215);C.setBlendMode("DIFFERENCE"),this.scene.add.tween({targets:C,alpha:0,duration:800,ease:"Power2",onComplete:()=>{C.destroy()}}),_.emit("enemy-killed",100)}}_.emit(((t=this.lastHitBy)==null?void 0:t.name)+"-stomped",this.lastHitBy),Bt(this.sounds,"stomped"),this.scene.cameras.main.shake(100,.025),this.stateMachine.setState("idle")}deadOnEnter(){if(!this.isDead){if(this.isDead=!0,rn(this.scene),console.log("Player died! "),this.sprite.setInteractive(!1),this.sprite.setCollidesWith(6),this.sprite.setOnCollide(()=>{}),this.sprite.play(this.getEventName("dead")),this.scene.cameras.main.shake(500),this.scene.time.delayedCall(250,()=>{this.scene.cameras.main.fade(4e3)}),this.stats.livesRemaining=this.stats.livesRemaining>0?this.stats.livesRemaining-1:0,this.powerUps.reset(),_.emit("lives-changed",this.stats.livesRemaining),this.stats.livesRemaining==0){const t=Ca(2,""),i=this.sounds.get(t);i!==void 0?(i.on("complete",()=>{_l(),_.emit("reset-game"),this.scene.scene.start("game-over")}),Pr(this.sounds,t,!0)):(_.emit("reset-game"),this.scene.scene.start("game-over"))}else{const t=Ca(1,""),i=this.sounds.get(t);i!==void 0?(i.on("complete",()=>{_l(),this.scene.scene.restart(),_.emit("restart")}),Pr(this.sounds,t,!0)):(this.scene.scene.restart(),_.emit("restart"))}this.scene.time.delayedCall(5500,()=>{(!Id()||Id()&&globalThis.krasota)&&(this.stats.livesRemaining==0?(_.emit("reset-game"),this.scene.scene.start("game-over")):(this.scene.scene.restart(),_.emit("restart")))})}}changeAction(){this.lastAction=this.scene.game.loop.frame}setSpeed(t){this.playerSpeed=t}restoreSpeed(){this.playerSpeed=5}getSpeed(){return this.playerSpeed}enableAntiGravity(){this.sprite.setIgnoreGravity(!0)}disableAntiGravity(){this.sprite.setIgnoreGravity(!1)}toggle(){let t="";this.name==="player1"?(this.name="player2",t="-cs"):this.name==="player2"&&(this.name="player1"),globalThis.rabbit=this.name,globalThis.voice=t}changeSkin(){globalThis.rabbitSpriteSheet===void 0?globalThis.rabbitSpriteSheet="rabbit":globalThis.rabbitSpriteSheet==="rabbit"?globalThis.rabbitSpriteSheet="choclate":globalThis.rabbitSpriteSheet==="choclate"&&(globalThis.rabbitSpriteSheet="rabbit"),this.clearAnims(),this.createAnims(globalThis.rabbitSpriteSheet)}setVoice(t){t==!1?this.name==="player1"?globalThis.voice="-cs":globalThis.voice="":globalThis.voice="-vd",this.stats.voice=t}setProjectile(t,i){this.projectileName=t,this.projectileSplash=i,t==="moonshot-ball"?this.stats.pokeBall=!0:this.stats.pokeBall=!1}updateVelocities(t){const i=this.scene.game.loop.frame-this.lastAction;this.deltaS=i>this.ACCEL_FRAMES?this.playerSpeed:i/this.ACCEL_FRAMES*this.playerSpeed;let f=this.getSpeed(),C=!1;this.isLeft()?(this.sprite.flipX=!0,this.sprite.setVelocityX(-f),C=!0):this.isRight()?(this.sprite.flipX=!1,this.sprite.setVelocityX(f),C=!0):(f=0,this.sprite.setVelocityX(f)),t==="walk"&&!C&&this.stateMachine.setState("idle"),this.delayedJump&&(this.jumpActionValidUntil>this.scene.game.loop.frame&&this.jumpOnEnter(),this.delayedJump=!1),this.standingOnFloor=!1}isValidTile(t,i){var C,w,a;const f=this.tilemap.getTileAtWorldXY(t,i,!1,this.scene.cameras.main,"ground");if(f!=null&&f.canCollide&&f.visible&&f.collides){const T=((C=f.properties)==null?void 0:C.damage)||0,e=((w=f.properties)==null?void 0:w.breakable)||!1,u=((a=f.properties)==null?void 0:a.hits)||0;if((T===void 0||T<=0)&&(e===void 0||e==!1)&&u==0){const y=this.tilemap.getTileAtWorldXY(t,i-64,!1,this.scene.cameras.main,"ground");return!(y!=null&&y.canCollide&&y.visible&&y.collides)}}return!1}updateSpawnlocation(){var C,w;if(this.sprite===void 0||this.sprite.body===void 0)return;if(globalThis.spawnLocation>0){globalThis.spawnLocation--;return}if(!this.standingOnFloor||((C=this.sprite.body)==null?void 0:C.velocity.y)!=0||((w=this.sprite.body)==null?void 0:w.velocity.x)!=0)return;const t=~~(this.sprite.body.position.x/64)*64,i=~~((this.sprite.body.position.y+48)/64)*64,f=~~(this.sprite.body.position.y/64)*64;this.isValidTile(t,i)&&(this.scene.game.registry.set("playerX",t),this.scene.game.registry.set("playerY",f))}changePosition(t,i,f){f.body.id!=this.platformId||!this.standingOnPlatform||this.sprite.setPosition(rt.Math.RoundTo(this.sprite.body.position.x+t),rt.Math.RoundTo(this.sprite.body.position.y+i))}changeVelocity(){this.sprite.setVelocityY(-1*this.playerJump*2.55)}handlePlatform(t){var f;this.standingOnPlatform=!0,this.platformId=t.id;const i=(f=t.gameObject)==null?void 0:f.getData("relpos"+t.id);i!==void 0&&this.sprite.setPosition(rt.Math.RoundTo(this.sprite.body.position.x+i.x),rt.Math.RoundTo(this.sprite.body.position.y+i.y))}bounceTile(t){const i=this.tilemap.getTileAtWorldXY(t.position.x,t.position.y,!1,this.scene.cameras.main,"ground");i!=null&&this.scene.tweens.add({targets:i,pixelY:i.pixelY-32,duration:100,ease:"Bounce",onComplete:()=>{i.pixelY=i.y*64},repeat:0,yoyo:!0})}bounceSprite(t){var w,a;const i=((w=t.body)==null?void 0:w.position.y)||-1;if(t.getData("tween")!==void 0)return;const C=this.scene.tweens.add({targets:t,y:(((a=t.body)==null?void 0:a.position.y)||0)-32,duration:100,ease:"Bounce",onComplete:()=>{t.setY(i),t.setData("tween",void 0)},repeat:0,yoyo:!0});t.setData("tween",C)}bounceSpriteAndDestroy(t){t.setCollidesWith([]),t.body!=null&&this.scene.tweens.add({targets:t,alpha:0,y:t.body.position.y-64,duration:500,ease:"Bounce",onComplete:()=>{t.setActive(!1),t.setVisible(!1)},repeat:0,yoyo:!1})}clearAnims(){this.sprite.anims.remove("player1-idle"),this.sprite.anims.remove("player1-walk"),this.sprite.anims.remove("player1-facing"),this.sprite.anims.remove("player1-jump"),this.sprite.anims.remove("player1-dead"),this.sprite.anims.remove("player1-throw"),this.sprite.anims.remove("player2-idle"),this.sprite.anims.remove("player2-walk"),this.sprite.anims.remove("player2-facing"),this.sprite.anims.remove("player2-jump"),this.sprite.anims.remove("player2-dead"),this.sprite.anims.remove("player2-throw")}createAnims(t){this.sprite.anims.create({key:"player1-idle",frameRate:5,frames:this.sprite.anims.generateFrameNames(t,{start:1,end:2,prefix:"5_Turn",suffix:".webp"}),repeat:-1}),this.sprite.anims.create({key:"player1-walk",frameRate:5,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:3,prefix:"3_Walk",suffix:".webp"}),repeat:-1}),this.sprite.anims.create({key:"player1-facing",frameRate:5,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:1,prefix:"5_Turn",suffix:".webp"}),repeat:-1}),this.sprite.anims.create({key:"player1-jump",frameRate:8,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:4,prefix:"1_Jump",suffix:".webp"})}),this.sprite.anims.create({key:"player1-dead",frameRate:10,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:3,prefix:"4_Dead",suffix:".webp"})}),this.sprite.anims.create({key:"player1-throw",frameRate:20,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:4,prefix:"2_Throw",suffix:".webp"})}),this.sprite.anims.create({key:"player2-idle",frameRate:5,frames:this.sprite.anims.generateFrameNames(t,{start:1,end:2,prefix:"5_FemTurn",suffix:".webp"}),repeat:-1}),this.sprite.anims.create({key:"player2-walk",frameRate:5,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:3,prefix:"3_FemWalk",suffix:".webp"}),repeat:-1}),this.sprite.anims.create({key:"player2-facing",frameRate:5,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:1,prefix:"5_FemTurn",suffix:".webp"}),repeat:-1}),this.sprite.anims.create({key:"player2-jump",frameRate:8,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:3,prefix:"1_FemJump",suffix:".webp"})}),this.sprite.anims.create({key:"player2-dead",frameRate:10,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:3,prefix:"4_FemDead",suffix:".webp"})}),this.sprite.anims.create({key:"player2-throw",frameRate:20,frames:this.sprite.anims.generateFrameNames(t,{start:0,end:4,prefix:"2_FemThrow",suffix:".webp"})})}isDown(){var t;return this.isGamePadDown()||((t=this.joystick)==null?void 0:t.down)||this.cursors.down.isDown||this.wasd.down.isDown}isUp(){var t;return this.isGamePadUp()||((t=this.joystick)==null?void 0:t.up)||this.cursors.up.isDown||this.wasd.up.isDown}isLeft(){var t;return this.isGamePadLeft()||((t=this.joystick)==null?void 0:t.left)||this.cursors.left.isDown||this.wasd.left.isDown}isRight(){var t;return this.isGamePadRight()||((t=this.joystick)==null?void 0:t.right)||this.cursors.right.isDown||this.wasd.right.isDown}isShift(){return this.isGamePadButton(1)||this.cursors.shift.isDown||this.playerButton1}isSpace(){return this.isGamePadButton(0)||rt.Input.Keyboard.JustDown(this.cursors.space)||this.playerButton2}isR2(){return this.isGamePadButton(7)||this.playerButton1&&this.playerButton2}isStart(){return this.isGamePadButton(9)}downThePipe(t,i,f,C,w=0,a,T){var e;(e=this.sprite)==null||e.scene.tweens.add({targets:this.sprite,y:this.sprite.y+this.sprite.height,ease:"Cubic.easeOut",duration:t,delay:i,onStart:()=>{this.sprite.setPosition(f,C),this.stateMachine.setState("idle")},onComplete:()=>{var u;(u=this.sprite)==null||u.setPosition(a*64,T*64),w>0?this.scene.cameras.main.startFollow(this.sprite,!0,void 0,void 0,void 0,208):this.scene.cameras.main.startFollow(this.sprite,!0),this.scene.matter.world.resume()}})}downTheWarpPipe(t,i,f,C,w){var a;(a=this.sprite)==null||a.scene.tweens.add({targets:this.sprite,y:this.sprite.y+this.sprite.height,ease:"Cubic.easeOut",duration:t,delay:i,onStart:()=>{this.sprite.setPosition(f,C),this.stateMachine.setState("idle")},onComplete:()=>{rn(this.scene),this.scene.scene.stop("warp"),_.emit("warp-level",w)}})}isGamePadRight(){var i;const t=(i=this.scene.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[0].getValue()>0||t!=null&&t.buttons[15].pressed)}isGamePadLeft(){var i;const t=(i=this.scene.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[0].getValue()<0||t!=null&&t.buttons[14].pressed)}isGamePadDown(){var i;const t=(i=this.scene.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[1].getValue()<0||t!=null&&t.buttons[13].pressed)}isGamePadUp(){var i;const t=(i=this.scene.input.gamepad)==null?void 0:i.getPad(0);return!!(t!=null&&t.axes.length&&t.axes[1].getValue()>0||t!=null&&t.buttons[12].pressed)}isGamePadButton(t){var f;const i=(f=this.scene.input.gamepad)==null?void 0:f.getPad(0);if(i!=null&&i.axes.length)if(this.buttonRepeat[t]==0){if(this.buttonRepeat[t]=8,i.buttons[t].pressed)return!0;this.buttonRepeat[t]=0}else this.buttonRepeat[t]--;return!1}withForce(){return this.joystick===void 0?1:this.joystick.force}}function Ks(s,t,i,f,C,w){const a=s.textures.get(f).getSourceImage().width,T=Math.ceil(t/a)*C;let e=0;for(let u=0;u<T;++u){const y=s.add.image(e,i,f).setOrigin(0,1).setScale(w).setScrollFactor(C);e+=y.width}}class h1 extends dp{constructor(){super("level1");$(this,"info");$(this,"map");$(this,"cursors");$(this,"player");$(this,"playerController");$(this,"obstaclesController");$(this,"flowers",[]);$(this,"monsters",[]);$(this,"fires",[]);$(this,"plants",[]);$(this,"firewalkers",[]);$(this,"crabs",[]);$(this,"birds",[]);$(this,"bats",[]);$(this,"bombs",[]);$(this,"dragons",[]);$(this,"zeps",[]);$(this,"tnts",[]);$(this,"bears",[]);$(this,"flies",[]);$(this,"crows",[]);$(this,"saws",[]);$(this,"boss",[]);$(this,"lava",[]);$(this,"objects",[]);$(this,"ground1");$(this,"layer1");$(this,"playerX",-1);$(this,"playerY",-1);$(this,"sounds")}init(){var f;super.init(),this.cursors=(f=this.input.keyboard)==null?void 0:f.createCursorKeys(),this.obstaclesController=new op,this.monsters=[],this.fires=[],this.flowers=[],this.plants=[],this.firewalkers=[],this.crabs=[],this.birds=[],this.bats=[],this.dragons=[],this.bombs=[],this.zeps=[],this.bears=[],this.tnts=[],this.flies=[],this.crows=[],this.saws=[],this.boss=[],this.lava=[],this.objects=[],this.sounds=new Map,this.info={lastHealth:100,coinsCollected:0,carrotsCollected:0,currLevel:1,scorePoints:0,highScorePoints:0,livesRemaining:3,invincibility:!1,speedUp:!1,powerUp:!1,throw:!1,pokeBall:!1,voice:!1};const i=window.localStorage.getItem("ra8bit.stats");if(i!=null){const C=JSON.parse(i);this.info=C}this.info.currLevel=1,this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}preload(){this.load.image("bg_1","assets/back2.webp"),this.load.image("bg_2","assets/back3.webp"),this.load.image("bg_3","assets/back4.webp"),this.load.image("bg_4","assets/back5.webp"),this.load.image("bg_5","assets/back6.webp"),this.load.image("bg_6","assets/back7.webp"),Ge(this),this.load.tilemapTiledJSON("tilemap1","assets/map1.json")}create(){var h;super.create(),this.sounds=Go(this),this.scene.launch("ui"),wu(this),this.events.on("player-jumped",this.playerJumped,this);const{width:i,height:f}=this.scale,C=336*64,w=24*64,a=1;Ks(this,C,w,"sky",.4/a,1),Ks(this,C,w,"bg_1",.385/a,1),Ks(this,C,w,"bg_2",.375/a,1),Ks(this,C,w,"bg_3",.365/a,1),Ks(this,C,w,"bg_4",.35/a,1),Ks(this,C,w,"bg_5",.345/a,1),Ks(this,C,w,"bg_6",.36,1),this.map=this.make.tilemap({key:"tilemap1",tileWidth:64,tileHeight:64});const T=this.map.addTilesetImage("ground","groundTiles",64,64,0,2),e=this.map.addTilesetImage("props","propTiles",64,64,0,2);this.ground1=this.map.createLayer("ground",[T]),this.layer1=this.map.createLayer("layer1",[T]),this.ground1.setCollisionByProperty({collides:!0,recalculateFaces:!1}),this.map.createLayer("obstacles",e),this.layer1.setDepth(10);const u=2,y=4,d=[1,u];this.playerX=this.game.registry.get("playerX")||-1,this.playerY=this.game.registry.get("playerY")||-1;const l=this.map.getObjectLayer("objects");l==null||l.objects.forEach(r=>{const{x:n=0,y:v=0,name:o,width:c=0,height:m=0}=r;switch(o){case"player1-spawn":case"player2-spawn":case"player-spawn":{this.player=Yx(this,this.playerX==-1?n:this.playerX,this.playerY==-1?v:this.playerY,c,m,u),this.playerController=new o1(this,this.player,this.cursors,this.obstaclesController,this.sounds,this.map,this.info),this.playerController.setCollideWith(u),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.startFollow(this.player,!0),this.cameras.main.setAlpha(1),this.cameras.main.setViewport(0,0,1280,640),this.cameras.main.setZoom(1),this.cameras.main.roundPixels=!0;break}}}),l==null||l.objects.forEach(r=>{const{x:n=0,y:v=0,name:o,width:c=0,height:m=0,rotation:p=0}=r;switch(o){default:No(this,o,n,v,c,m,p,y,d,this.obstaclesController,r,this.playerController);break}}),this.matter.world.convertTilemapLayer(this.ground1,{label:"ground",friction:0,frictionStatic:0}),this.matter.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels,1,!0,!0,!1,!1,!1),this.matter.world.on("collisionstart",(r,n,v)=>{var c;const o=r.pairs;for(let m=0;m<o.length;m++){const p=o[m].bodyA,g=o[m].bodyB;if(p.gameObject===void 0)continue;~~(g.position.y-p.position.y)<=32&&_.emit(((c=p.gameObject)==null?void 0:c.name)+"-blocked",p.gameObject)}}),(h=this.playerController)==null||h.setJoystick(this,i)}destroy(){var i;super.destroy(),this.events.off("player-jumped",this.playerJumped,this),(i=this.playerController)==null||i.destroy(),this.monsters.forEach(f=>f.destroy()),this.fires.forEach(f=>f.destroy()),this.plants.forEach(f=>f.destroy()),this.flowers.forEach(f=>f.destroy()),this.crabs.forEach(f=>f.destroy()),this.birds.forEach(f=>f.destroy()),this.firewalkers.forEach(f=>f.destroy()),this.bats.forEach(f=>f.destroy()),this.dragons.forEach(f=>f.destroy()),this.bombs.forEach(f=>f.destroy()),this.zeps.forEach(f=>f.destroy()),this.bears.forEach(f=>f.destroy()),this.tnts.forEach(f=>f.destroy()),this.flies.forEach(f=>f.destroy()),this.crows.forEach(f=>f.destroy()),this.saws.forEach(f=>f.destroy()),this.boss.forEach(f=>f.destroy()),this.lava.forEach(f=>f.destroy()),this.objects.forEach(f=>f.destroy()),this.layer1.destroy(),this.ground1.destroy(),this.map.destroy(),this.sounds.clear()}preDestroy(){this.obstaclesController.destroy(this)}update(i,f){var C;super.update(i,f),super.doStep()&&(this.bombs=this.bombs.filter(w=>w.keepObject()),this.monsters=this.monsters.filter(w=>w.keepObject()),this.crabs=this.crabs.filter(w=>w.keepObject()),this.birds=this.birds.filter(w=>w.keepObject()),this.firewalkers=this.firewalkers.filter(w=>w.keepObject()),this.bats=this.bats.filter(w=>w.keepObject()),this.dragons=this.dragons.filter(w=>w.keepObject()),this.bears=this.bears.filter(w=>w.keepObject()),this.crows=this.crows.filter(w=>w.keepObject()),this.boss=this.boss.filter(w=>w.keepObject()),this.flies=this.flies.filter(w=>w.keepObject()),this.lava.forEach(w=>{w.update(f)}),this.monsters.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.fires.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.firewalkers.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.zeps.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.flies.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.crabs.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.dragons.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.crows.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.flowers.forEach(w=>w.update(f)),this.plants.forEach(w=>w.update(f)),this.birds.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.bats.forEach(w=>w.update(f)),this.bombs.forEach(w=>w.update(f)),this.bears.forEach(w=>w.update(f)),this.tnts.forEach(w=>w.update(f)),this.saws.forEach(w=>{w.update(f),w.lookahead(this.map)}),this.boss.forEach(w=>w.update(f)),(C=this.playerController)==null||C.update(f),up(this))}playerJumped(){Bt(this.sounds,"jump")}}class l1 extends rt.Scene{constructor(){super("player-select");$(this,"info");$(this,"backLabel");$(this,"backLabel2");$(this,"maleRabbit");$(this,"femaleRabbit");$(this,"arrow");$(this,"player1Selected");$(this,"cursors");$(this,"nextScene");$(this,"sounds");$(this,"stats");this.info={rabbit:"player1",voice:"krasota"},this.player1Selected=!0,this.nextScene="level1"}init(){var f;this.cursors=(f=this.input.keyboard)==null?void 0:f.createCursorKeys(),this.sounds=new Map;const i=window.localStorage.getItem("ra8bit.stats");if(i!=null){const C=JSON.parse(i);this.stats=C,this.nextScene="level"+this.stats.currLevel}this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}preload(){Ge(this),this.load.image("arrow","assets/arrow.webp");const i=window.localStorage.getItem("ra8bit.player");if(i!=null){const f=JSON.parse(i);this.info=f}globalThis.rabbit=this.info.rabbit||"player1",globalThis.rabbitSpriteSheet=this.info.rabbitSpriteSheet||"rabbit"}saveSettings(){this.info.rabbit=globalThis.rabbit;const i=JSON.stringify(this.info);window.localStorage.setItem("ra8bit.player",i)}selectPlayer1(){const{width:i,height:f}=this.scale;this.player1Selected=!0,this.arrow.setPosition(i/2-100,220),globalThis.rabbit="player1",globalThis.voice="",Bt(this.sounds,"blip"),rn(this)}selectPlayer2(){const{width:i,height:f}=this.scale;this.player1Selected=!1,this.arrow.setPosition(i/2+100,220),globalThis.rabbit="player2",globalThis.voice="-cs",Bt(this.sounds,"blip"),rn(this)}create(){var C;const{width:i,height:f}=this.scale;this.input.setDefaultCursor("url(assets/hand.cur), pointer"),this.sounds=Go(this),this.backLabel=this.add.bitmapText(i/2,64,"press_start","PLEASE SELECT",24).setTint(16741120).setOrigin(.5,0),this.backLabel2=this.add.bitmapText(i/2,116,"press_start","... PLAYER?",24).setTint(16741120).setOrigin(.5,0),this.maleRabbit=this.add.image(i/2-100,350,"rabbit","5_Turn1.webp"),this.femaleRabbit=this.add.image(i/2+100,350,"rabbit","5_FemTurn1.webp"),this.femaleRabbit.flipX=!0,this.arrow=this.add.image(i/2-100,220,"arrow").setDisplaySize(32,40),this.tweens.add({targets:this.arrow,y:256,duration:1e3,ease:rt.Math.Easing.Linear,delay:0,yoyo:!0,repeat:-1}),this.maleRabbit.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.selectPlayer1(),this.continueGame()}).on("pointerdown",()=>{this.selectPlayer1()}),this.femaleRabbit.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.selectPlayer2(),this.continueGame()}).on("pointerdown",()=>{this.selectPlayer2()}),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.saveSettings()}),(C=this.input.keyboard)==null||C.on("keydown-ESC",w=>{this.goBackScene()})}update(){var i,f,C,w;((i=this.cursors)==null?void 0:i.left.isDown)||Au(this)?this.selectPlayer1():((f=this.cursors)==null?void 0:f.right.isDown)||bu(this)?this.selectPlayer2():(((C=this.cursors)==null?void 0:C.shift.isDown)||((w=this.cursors)==null?void 0:w.space.isDown)||_e(this,0))&&this.continueGame(),_e(this,8)&&this.goBackScene()}goBackScene(){this.scene.stop(),this.scene.start("hoppa-select")}destroy(){this.backLabel.destroy(),this.backLabel2.destroy(),this.maleRabbit.destroy(),this.femaleRabbit.destroy(),this.arrow.destroy(),Ie(this),mr(this),this.sounds.clear()}continueGame(){this.scene.stop(),globalThis.chainId==56&&!globalThis.noWallet?(globalThis.adReturn=this.nextScene,this.scene.start("halloffame")):this.scene.start(this.nextScene)}}class u1 extends rt.Scene{constructor(){super("moonshot")}preload(){Ge(this),this.load.image("moonshot","assets/moonshot.webp"),globalThis.adReturn="hoppa"}create(){const{width:t,height:i}=this.scale;this.input.setDefaultCursor("none"),this.add.image(t/2,i/2,"moonshot").setOrigin(.5,.5),this.add.bitmapText(t*.5,i/2+96,"press_start","presents",22).setTint(16777215).setOrigin(.5),this.time.delayedCall(1e3,()=>{this.cameras.main.fadeOut(1e3,0,0,0),this.cameras.main.once(rt.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(f,C)=>{this.scene.stop(),this.scene.start("ad")})})}}class d1 extends rt.Scene{constructor(){super("hoppa");$(this,"rotate");$(this,"continueLabel");$(this,"optionsLabel");$(this,"helpLabel");$(this,"text");$(this,"cursors");$(this,"arrow");$(this,"activeItem",0);$(this,"arrowY",460);$(this,"arrowX",400);$(this,"lastUpdate",0)}init(){var i;this.cursors=(i=this.input.keyboard)==null?void 0:i.createCursorKeys(),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}preload(){Ge(this),this.load.image("arrow","assets/arrow.webp"),globalThis.adReturn="hoppa"}create(){const{width:i,height:f}=this.scale;this.add.image(i/2,f/2-172,"logo").setDisplaySize(460,196).setOrigin(.5,.5),this.text=this.add.bitmapText(i*.5,f/2,"press_start","A RBITS Production",48).setTint(12632256).setOrigin(.5).setAlpha(0),this.tweens.add({targets:this.text,alpha:1,duration:1e3,ease:"Power2"});let C=3e3;globalThis.dramaticIntro&&(C=1e3),this.time.delayedCall(C,()=>{this.input.setDefaultCursor("url(assets/hand.cur), pointer"),this.createArrow(),this.continueLabel=this.add.bitmapText(i*.5,f/2+108,"press_start","Connect",48).setTint(16777215).setOrigin(.5).setAlpha(0),this.tweens.add({targets:this.continueLabel,alpha:1,duration:500,ease:"Power2"}),this.optionsLabel=this.add.bitmapText(i*.5,f/2+176,"press_start","Options",48).setTint(16777215).setOrigin(.5).setAlpha(0),this.tweens.add({targets:this.optionsLabel,alpha:1,duration:500,ease:"Power2"}),this.helpLabel=this.add.bitmapText(i*.5,f/2+244,"press_start","Help",48).setTint(16777215).setOrigin(.5).setAlpha(0),this.tweens.add({targets:this.helpLabel,alpha:1,duration:500,ease:"Power2"}),this.continueLabel.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.hideInstaller(),this.continueGame()}).on("pointerdown",()=>{this.highlightActive(0)}),this.optionsLabel.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.hideInstaller(),this.scene.stop(),this.scene.start("options")}).on("pointerdown",()=>{this.highlightActive(1)}),this.helpLabel.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.hideInstaller(),this.scene.stop(),this.scene.start("help")}).on("pointerdown",()=>{this.highlightActive(2)}),this.scale.width<this.scale.height&&this.printWarning(i,f),globalThis.dramaticIntro=!0}),this.time.delayedCall(1e4,()=>{this.scene.stop();const w=rt.Math.Between(0,5);let a="ad";!globalThis.noWallet&&globalThis.chainId==56&&w<2&&(a="halloffame"),this.scene.start(a)})}createArrow(){this.arrow=this.add.image(this.arrowX,this.arrowY,"arrow"),this.arrow.setRotation(30),this.arrow.setVisible(!1)}highlightActive(i){var f,C,w,a,T,e,u,y,d;switch(i){case 0:(f=this.continueLabel)==null||f.setTint(16741120),(C=this.optionsLabel)==null||C.setTint(16777215),(w=this.helpLabel)==null||w.setTint(16777215);break;case 1:(a=this.continueLabel)==null||a.setTint(16777215),(T=this.optionsLabel)==null||T.setTint(16741120),(e=this.helpLabel)==null||e.setTint(16777215);break;case 2:(u=this.continueLabel)==null||u.setTint(16777215),(y=this.optionsLabel)==null||y.setTint(16777215),(d=this.helpLabel)==null||d.setTint(16741120);break}this.activeItem=i}update(i,f){var w,a,T,e,u,y,d;if(i<this.lastUpdate)return;let C=!1;if(Mu(this)&&(C=!0),this.lastUpdate=i+120,((w=this.cursors)==null?void 0:w.down.isDown)||Vo(this))this.activeItem--;else if(((a=this.cursors)==null?void 0:a.up.isDown)||ko(this))this.activeItem++;else if(((T=this.cursors)==null?void 0:T.shift.isDown)||((e=this.cursors)==null?void 0:e.space.isDown)||_e(this,-1))switch(this.activeItem){case 0:this.continueGame();break;case 1:this.scene.stop(),this.scene.start("options");break;case 2:this.scene.stop(),this.scene.start("help");break}this.activeItem<0?this.activeItem=2:this.activeItem>2&&(this.activeItem=0),this.highlightActive(this.activeItem),C?((u=this.arrow)==null||u.setVisible(!0),(y=this.arrow)==null||y.setPosition(this.arrowX,this.arrowY+64*this.activeItem)):(d=this.arrow)==null||d.setVisible(!1)}destroy(){var i,f,C,w,a,T;(i=this.optionsLabel)==null||i.destroy(),(f=this.continueLabel)==null||f.destroy(),(C=this.rotate)==null||C.destroy(),(w=this.text)==null||w.destroy(),(a=this.helpLabel)==null||a.destroy(),(T=this.arrow)==null||T.destroy(),Ie(this),mr(this)}printWarning(i,f){this.rotate=this.add.bitmapText(i*.5,f/2+348,"press_start","!rotate your device!",18).setTint(16741120).setOrigin(.5)}continueGame(){this.scene.stop(),this.scene.start("hoppa-select")}hideInstaller(){document.querySelector(".add-button")}}class f1 extends rt.Scene{constructor(){super("ui");$(this,"info");$(this,"coinsLabel");$(this,"levelLabel");$(this,"scoreLabel");$(this,"timeLabel");$(this,"graphics");$(this,"health");$(this,"lives",[]);$(this,"coin");$(this,"pwrSpeed");$(this,"pwrInvincible");$(this,"pwrPower");$(this,"pwrPoop");$(this,"time_start",0);$(this,"lasttick",0)}init(){const i=window.localStorage.getItem("ra8bit.stats");if(i!=null){const f=JSON.parse(i);this.info=f,this.info.currLevel===void 0&&(this.info.currLevel=0)}else this.info={lastHealth:100,coinsCollected:0,carrotsCollected:0,currLevel:1,scorePoints:0,highScorePoints:0,livesRemaining:3,invincibility:!1,speedUp:!1,powerUp:!1,throw:!1,pokeBall:!1,voice:!1};this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}destroy(){var i,f,C,w,a;this.disableEvents(),this.scoreLabel.destroy(),this.coinsLabel.destroy(),this.timeLabel.destroy(),this.levelLabel.destroy(),this.graphics.destroy(),(i=this.health)==null||i.destroy(),this.lives.forEach(T=>{T.destroy()}),(f=this.pwrInvincible)==null||f.destroy(),(C=this.pwrSpeed)==null||C.destroy(),(w=this.pwrPoop)==null||w.destroy(),(a=this.pwrPower)==null||a.destroy()}preload(){Ge(this)}create(){this.graphics=this.add.graphics(),this.setHealthBar(100),this.add.image(0,640,"bg-ui").setDisplaySize(this.cameras.main.width,80).setOrigin(0,0),this.levelLabel=this.add.bitmapText(16,676,"press_start",`Level ${this.info.currLevel}`,24).setTint(16741120),this.levelLabel.setDropShadow(0,2,16711680,.5),this.timeLabel=this.add.bitmapText(630,676,"press_start","0",24).setTint(16777215),this.timeLabel.setDropShadow(0,2,16711680,.5),this.coin=this.add.sprite(256+32*.5,670+32*.5,"coin").setDisplaySize(32,32),this.coinsLabel=this.add.bitmapText(256+48,676,"press_start",`x ${this.info.coinsCollected}`,24).setTint(16741120),this.coinsLabel.setDropShadow(0,2,16711680,.5),this.scoreLabel=this.add.bitmapText(448,676,"press_start",`${this.info.scorePoints}`,24).setTint(16777215),this.scoreLabel.setDropShadow(0,2,16711680,.5),this.pwrPoop=this.add.sprite(760,670+32*.5,"berry").setDisplaySize(32,32),this.pwrSpeed=this.add.sprite(760+48,670+32*.5,"star").setDisplaySize(32,32),this.pwrPower=this.add.sprite(760+48+48,670+32*.5,"pow").setDisplaySize(32,32),this.pwrInvincible=this.add.sprite(760+3*48,670+32*.5,"rubber1").setDisplaySize(32,32),this.pwrSpeed.setAlpha(this.info.speedUp?1:.1),this.pwrPoop.setAlpha(this.info.throw?1:.1),this.pwrInvincible.setAlpha(this.info.invincibility?1:.1),this.pwrPower.setAlpha(this.info.powerUp?1:.1),this.health=this.add.sprite(1230,678,"health",4),this.lives=[];let i=1230-208;const f=678;this.lives.push(this.add.sprite(i,f,"health",this.info.livesRemaining>0?4:0)),i+=64,this.lives.push(this.add.sprite(i,f,"health",this.info.livesRemaining>1?4:0)),i+=64,this.lives.push(this.add.sprite(i,f,"health",this.info.livesRemaining>2?4:0)),_.on("coin-collected",this.handleCoinCollected,this),_.on("coin-taken",this.handleCoinTaken,this),_.on("enemy-killed",this.handleEnemyKilled,this),_.on("health-changed",this.handleHealthChanged,this),_.on("reset-game",this.handleReset,this),_.on("next-level",this.handleNextLevel,this),_.on("warp-level",this.handleWarpLevel,this),_.on("bonus-level",this.handleBonusRound,this),_.on("power-invincible",this.handleInvincible,this),_.on("power-speed",this.handleSpeed,this),_.on("power-poop",this.handlePoop,this),_.on("power-power",this.handlePower,this),_.on("power-pokeball",this.handlePokeball,this),_.on("voice-random",this.handleVoice,this),_.on("score-changed",this.handleChangeScore,this),_.on("carrot-collected",this.handleCarrotCollected,this),_.on("lives-changed",this.handleLivesChanged,this),_.on("level-start",this.startGame,this),_.on("restart",this.handleRestart,this),_.on("save-state",this.save,this),_.once(rt.Scenes.Events.SHUTDOWN,()=>{this.disableEvents()})}update(){this.time_start>0&&this.lasttick<=this.game.loop.frame&&(this.timeLabel.text=`${rt.Math.FloorTo((this.time.now-this.time_start)*.001)}`,this.lasttick=this.game.loop.frame+20)}disableEvents(){_.off("coin-collected",this.handleCoinCollected,this),_.off("coin-taken",this.handleCoinTaken,this),_.off("enemy-killed",this.handleEnemyKilled,this),_.off("health-changed",this.handleHealthChanged,this),_.off("reset-game",this.handleReset,this),_.off("next-level",this.handleNextLevel,this),_.off("bonus-level",this.handleBonusRound,this),_.off("warp-level",this.handleWarpLevel,this),_.off("power-invincible",this.handleInvincible,this),_.off("power-speed",this.handleSpeed,this),_.off("power-poop",this.handlePoop,this),_.off("power-pokeball",this.handlePokeball,this),_.off("power-power",this.handlePower,this),_.off("score-changed",this.handleChangeScore,this),_.off("voice-random",this.handleVoice,this),_.off("carrot-collected",this.handleCarrotCollected,this),_.off("lives-changed",this.handleLivesChanged,this),_.off("level-start",this.startGame,this),_.off("restart",this.handleRestart,this),_.off("save-state",this.save,this)}startGame(){this.time_start=this.time_start==0?this.time.now:this.time_start,this.lasttick=0}setHealthBar(i){var w;const C=~~(rt.Math.Clamp(i,0,100)/25);this.info.lastHealth=i,(w=this.health)==null||w.setFrame(C)}handleLivesChanged(i){for(let f=0;f<3;f++)this.lives[f].setFrame(i<f?0:4);this.info.livesRemaining=i,this.save()}handleHealthChanged(i){this.setHealthBar(i)}handleEnemyKilled(i){this.updateScore(i)}handleInvincible(i){var f;(f=this.pwrInvincible)==null||f.setAlpha(i?1:.1),this.info.invincibility=i}handleSpeed(i){var f;(f=this.pwrSpeed)==null||f.setAlpha(i?1:.1),this.info.speedUp=i}handlePoop(i){var f;(f=this.pwrPoop)==null||f.setAlpha(i?1:.1),this.info.throw=i}handlePokeball(i){var f;this.info.pokeBall=i,(f=this.pwrPoop)==null||f.setAlpha(i?1:.1),this.info.throw=i}handleVoice(i){this.info.voice=i}handlePower(i){var f;(f=this.pwrPower)==null||f.setAlpha(i?1:.1),this.info.powerUp=i}handleChangeScore(i){this.updateScore(i)}handleCarrotCollected(){this.info.carrotsCollected++,this.updateScore(5)}handleSceneSwitch(){this.save(),this.time_start=0,this.lasttick=0,rn(this),this.resetSpawnPoint(),this.scene.stop()}handleBonusRound(){this.handleSceneSwitch()}handleWarpLevel(i){this.levelLabel.setText("Level "+this.info.currLevel),this.time_start=0,this.lasttick=0,this.resetSpawnPoint(),this.scene.stop(),i>0&&(this.info.currLevel=i,this.save(),this.scene.start("level"+this.info.currLevel))}handleNextLevel(){this.info.currLevel=1,this.handleSceneSwitch()}handleCoinCollected(){this.info.coinsCollected++,this.coinsLabel.text=`x ${this.info.coinsCollected}`,this.updateScore(10),this.info.coinsCollected==100&&(this.handleLivesChanged(this.info.livesRemaining+1),this.info.coinsCollected=0)}handleCoinTaken(){this.info.coinsCollected-=5,this.info.coinsCollected<0&&(this.info.coinsCollected=0),this.coinsLabel.text=`x ${this.info.coinsCollected}`;const i=rt.Display.Color.ValueToColor(16777215),f=rt.Display.Color.ValueToColor(16711680);this.tweens.addCounter({from:0,to:100,duration:100,repeat:2,yoyo:!0,ease:rt.Math.Easing.Sine.InOut,onUpdate:C=>{const w=C.getValue(),a=rt.Display.Color.Interpolate.ColorWithColor(i,f,100,w),T=rt.Display.Color.GetColor(a.r,a.g,a.b);this.coinsLabel.setTint(T)}})}handleReset(){var i;(i=this.health)==null||i.setFrame(0);for(let f=0;f<3;f++)this.lives[f].setFrame(0);this.info.highScorePoints=this.info.scorePoints>this.info.highScorePoints?this.info.scorePoints:this.info.highScorePoints,this.info.scorePoints=0,this.info.currLevel=1,this.info.lastHealth=100,this.info.livesRemaining=3,this.info.invincibility=!1,this.info.speedUp=!1,this.info.powerUp=!1,this.info.throw=!1,this.info.pokeBall=!1,this.info.voice=!1,this.save(),this.resetSpawnPoint(),this.scene.stop(),this.lasttick=0,this.time_start=0}handleRestart(){var i,f,C,w;this.info.invincibility=!1,this.info.speedUp=!1,this.info.powerUp=!1,this.info.throw=!1,this.info.pokeBall=!1,this.info.voice=!1,this.info.lastHealth=100,(i=this.pwrSpeed)==null||i.setAlpha(this.info.speedUp?1:.1),(f=this.pwrPoop)==null||f.setAlpha(this.info.throw?1:.1),(C=this.pwrInvincible)==null||C.setAlpha(this.info.invincibility?1:.1),(w=this.pwrPower)==null||w.setAlpha(this.info.powerUp?1:.1),this.save()}resetSpawnPoint(){globalThis.spawnLocation=30*10}updateScore(i){this.info.scorePoints+=i,this.scoreLabel.text=`${this.info.scorePoints}`}save(){const i=JSON.stringify(this.info);window.localStorage.setItem("ra8bit.stats",i)}}var yp={exports:{}};const c1={},v1=Object.freeze(Object.defineProperty({__proto__:null,default:c1},Symbol.toStringTag,{value:"Module"})),p1=ky(v1);(function(s){(function(t,i){function f(L,R){if(!L)throw new Error(R||"Assertion failed")}function C(L,R){L.super_=R;var O=function(){};O.prototype=R.prototype,L.prototype=new O,L.prototype.constructor=L}function w(L,R,O){if(w.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,L!==null&&((R==="le"||R==="be")&&(O=R,R=10),this._init(L||0,R||10,O||"be"))}typeof t=="object"?t.exports=w:i.BN=w,w.BN=w,w.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=p1.Buffer}catch{}w.isBN=function(R){return R instanceof w?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===w.wordSize&&Array.isArray(R.words)},w.max=function(R,O){return R.cmp(O)>0?R:O},w.min=function(R,O){return R.cmp(O)<0?R:O},w.prototype._init=function(R,O,D){if(typeof R=="number")return this._initNumber(R,O,D);if(typeof R=="object")return this._initArray(R,O,D);O==="hex"&&(O=16),f(O===(O|0)&&O>=2&&O<=36),R=R.toString().replace(/\s+/g,"");var B=0;R[0]==="-"&&(B++,this.negative=1),B<R.length&&(O===16?this._parseHex(R,B,D):(this._parseBase(R,O,B),D==="le"&&this._initArray(this.toArray(),O,D)))},w.prototype._initNumber=function(R,O,D){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(f(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),D==="le"&&this._initArray(this.toArray(),O,D)},w.prototype._initArray=function(R,O,D){if(f(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var G,z,X=0;if(D==="be")for(B=R.length-1,G=0;B>=0;B-=3)z=R[B]|R[B-1]<<8|R[B-2]<<16,this.words[G]|=z<<X&67108863,this.words[G+1]=z>>>26-X&67108863,X+=24,X>=26&&(X-=26,G++);else if(D==="le")for(B=0,G=0;B<R.length;B+=3)z=R[B]|R[B+1]<<8|R[B+2]<<16,this.words[G]|=z<<X&67108863,this.words[G+1]=z>>>26-X&67108863,X+=24,X>=26&&(X-=26,G++);return this._strip()};function T(L,R){var O=L.charCodeAt(R);if(O>=48&&O<=57)return O-48;if(O>=65&&O<=70)return O-55;if(O>=97&&O<=102)return O-87;f(!1,"Invalid character in "+L)}function e(L,R,O){var D=T(L,O);return O-1>=R&&(D|=T(L,O-1)<<4),D}w.prototype._parseHex=function(R,O,D){this.length=Math.ceil((R.length-O)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var G=0,z=0,X;if(D==="be")for(B=R.length-1;B>=O;B-=2)X=e(R,O,B)<<G,this.words[z]|=X&67108863,G>=18?(G-=18,z+=1,this.words[z]|=X>>>26):G+=8;else{var U=R.length-O;for(B=U%2===0?O+1:O;B<R.length;B+=2)X=e(R,O,B)<<G,this.words[z]|=X&67108863,G>=18?(G-=18,z+=1,this.words[z]|=X>>>26):G+=8}this._strip()};function u(L,R,O,D){for(var B=0,G=0,z=Math.min(L.length,O),X=R;X<z;X++){var U=L.charCodeAt(X)-48;B*=D,U>=49?G=U-49+10:U>=17?G=U-17+10:G=U,f(U>=0&&G<D,"Invalid character"),B+=G}return B}w.prototype._parseBase=function(R,O,D){this.words=[0],this.length=1;for(var B=0,G=1;G<=67108863;G*=O)B++;B--,G=G/O|0;for(var z=R.length-D,X=z%B,U=Math.min(z,z-X)+D,V=0,N=D;N<U;N+=B)V=u(R,N,N+B,O),this.imuln(G),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(X!==0){var W=1;for(V=u(R,N,R.length,O),N=0;N<X;N++)W*=O;this.imuln(W),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this._strip()},w.prototype.copy=function(R){R.words=new Array(this.length);for(var O=0;O<this.length;O++)R.words[O]=this.words[O];R.length=this.length,R.negative=this.negative,R.red=this.red};function y(L,R){L.words=R.words,L.length=R.length,L.negative=R.negative,L.red=R.red}if(w.prototype._move=function(R){y(R,this)},w.prototype.clone=function(){var R=new w(null);return this.copy(R),R},w.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},w.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},w.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{w.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{w.prototype.inspect=d}else w.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],r=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];w.prototype.toString=function(R,O){R=R||10,O=O|0||1;var D;if(R===16||R==="hex"){D="";for(var B=0,G=0,z=0;z<this.length;z++){var X=this.words[z],U=((X<<B|G)&16777215).toString(16);G=X>>>24-B&16777215,B+=2,B>=26&&(B-=26,z--),G!==0||z!==this.length-1?D=l[6-U.length]+U+D:D=U+D}for(G!==0&&(D=G.toString(16)+D);D.length%O!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}if(R===(R|0)&&R>=2&&R<=36){var V=h[R],N=r[R];D="";var W=this.clone();for(W.negative=0;!W.isZero();){var F=W.modrn(N).toString(R);W=W.idivn(N),W.isZero()?D=F+D:D=l[V-F.length]+F+D}for(this.isZero()&&(D="0"+D);D.length%O!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}f(!1,"Base should be between 2 and 36")},w.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},w.prototype.toJSON=function(){return this.toString(16,2)},a&&(w.prototype.toBuffer=function(R,O){return this.toArrayLike(a,R,O)}),w.prototype.toArray=function(R,O){return this.toArrayLike(Array,R,O)};var n=function(R,O){return R.allocUnsafe?R.allocUnsafe(O):new R(O)};w.prototype.toArrayLike=function(R,O,D){this._strip();var B=this.byteLength(),G=D||Math.max(1,B);f(B<=G,"byte array longer than desired length"),f(G>0,"Requested array length <= 0");var z=n(R,G),X=O==="le"?"LE":"BE";return this["_toArrayLike"+X](z,B),z},w.prototype._toArrayLikeLE=function(R,O){for(var D=0,B=0,G=0,z=0;G<this.length;G++){var X=this.words[G]<<z|B;R[D++]=X&255,D<R.length&&(R[D++]=X>>8&255),D<R.length&&(R[D++]=X>>16&255),z===6?(D<R.length&&(R[D++]=X>>24&255),B=0,z=0):(B=X>>>24,z+=2)}if(D<R.length)for(R[D++]=B;D<R.length;)R[D++]=0},w.prototype._toArrayLikeBE=function(R,O){for(var D=R.length-1,B=0,G=0,z=0;G<this.length;G++){var X=this.words[G]<<z|B;R[D--]=X&255,D>=0&&(R[D--]=X>>8&255),D>=0&&(R[D--]=X>>16&255),z===6?(D>=0&&(R[D--]=X>>24&255),B=0,z=0):(B=X>>>24,z+=2)}if(D>=0)for(R[D--]=B;D>=0;)R[D--]=0},Math.clz32?w.prototype._countBits=function(R){return 32-Math.clz32(R)}:w.prototype._countBits=function(R){var O=R,D=0;return O>=4096&&(D+=13,O>>>=13),O>=64&&(D+=7,O>>>=7),O>=8&&(D+=4,O>>>=4),O>=2&&(D+=2,O>>>=2),D+O},w.prototype._zeroBits=function(R){if(R===0)return 26;var O=R,D=0;return(O&8191)===0&&(D+=13,O>>>=13),(O&127)===0&&(D+=7,O>>>=7),(O&15)===0&&(D+=4,O>>>=4),(O&3)===0&&(D+=2,O>>>=2),(O&1)===0&&D++,D},w.prototype.bitLength=function(){var R=this.words[this.length-1],O=this._countBits(R);return(this.length-1)*26+O};function v(L){for(var R=new Array(L.bitLength()),O=0;O<R.length;O++){var D=O/26|0,B=O%26;R[O]=L.words[D]>>>B&1}return R}w.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,O=0;O<this.length;O++){var D=this._zeroBits(this.words[O]);if(R+=D,D!==26)break}return R},w.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},w.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},w.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},w.prototype.isNeg=function(){return this.negative!==0},w.prototype.neg=function(){return this.clone().ineg()},w.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},w.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]|R.words[O];return this._strip()},w.prototype.ior=function(R){return f((this.negative|R.negative)===0),this.iuor(R)},w.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},w.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},w.prototype.iuand=function(R){var O;this.length>R.length?O=R:O=this;for(var D=0;D<O.length;D++)this.words[D]=this.words[D]&R.words[D];return this.length=O.length,this._strip()},w.prototype.iand=function(R){return f((this.negative|R.negative)===0),this.iuand(R)},w.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},w.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},w.prototype.iuxor=function(R){var O,D;this.length>R.length?(O=this,D=R):(O=R,D=this);for(var B=0;B<D.length;B++)this.words[B]=O.words[B]^D.words[B];if(this!==O)for(;B<O.length;B++)this.words[B]=O.words[B];return this.length=O.length,this._strip()},w.prototype.ixor=function(R){return f((this.negative|R.negative)===0),this.iuxor(R)},w.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},w.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},w.prototype.inotn=function(R){f(typeof R=="number"&&R>=0);var O=Math.ceil(R/26)|0,D=R%26;this._expand(O),D>0&&O--;for(var B=0;B<O;B++)this.words[B]=~this.words[B]&67108863;return D>0&&(this.words[B]=~this.words[B]&67108863>>26-D),this._strip()},w.prototype.notn=function(R){return this.clone().inotn(R)},w.prototype.setn=function(R,O){f(typeof R=="number"&&R>=0);var D=R/26|0,B=R%26;return this._expand(D+1),O?this.words[D]=this.words[D]|1<<B:this.words[D]=this.words[D]&~(1<<B),this._strip()},w.prototype.iadd=function(R){var O;if(this.negative!==0&&R.negative===0)return this.negative=0,O=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,O=this.isub(R),R.negative=1,O._normSign();var D,B;this.length>R.length?(D=this,B=R):(D=R,B=this);for(var G=0,z=0;z<B.length;z++)O=(D.words[z]|0)+(B.words[z]|0)+G,this.words[z]=O&67108863,G=O>>>26;for(;G!==0&&z<D.length;z++)O=(D.words[z]|0)+G,this.words[z]=O&67108863,G=O>>>26;if(this.length=D.length,G!==0)this.words[this.length]=G,this.length++;else if(D!==this)for(;z<D.length;z++)this.words[z]=D.words[z];return this},w.prototype.add=function(R){var O;return R.negative!==0&&this.negative===0?(R.negative=0,O=this.sub(R),R.negative^=1,O):R.negative===0&&this.negative!==0?(this.negative=0,O=R.sub(this),this.negative=1,O):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},w.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var O=this.iadd(R);return R.negative=1,O._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var D=this.cmp(R);if(D===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,G;D>0?(B=this,G=R):(B=R,G=this);for(var z=0,X=0;X<G.length;X++)O=(B.words[X]|0)-(G.words[X]|0)+z,z=O>>26,this.words[X]=O&67108863;for(;z!==0&&X<B.length;X++)O=(B.words[X]|0)+z,z=O>>26,this.words[X]=O&67108863;if(z===0&&X<B.length&&B!==this)for(;X<B.length;X++)this.words[X]=B.words[X];return this.length=Math.max(this.length,X),B!==this&&(this.negative=1),this._strip()},w.prototype.sub=function(R){return this.clone().isub(R)};function o(L,R,O){O.negative=R.negative^L.negative;var D=L.length+R.length|0;O.length=D,D=D-1|0;var B=L.words[0]|0,G=R.words[0]|0,z=B*G,X=z&67108863,U=z/67108864|0;O.words[0]=X;for(var V=1;V<D;V++){for(var N=U>>>26,W=U&67108863,F=Math.min(V,R.length-1),I=Math.max(0,V-L.length+1);I<=F;I++){var k=V-I|0;B=L.words[k]|0,G=R.words[I]|0,z=B*G+W,N+=z/67108864|0,W=z&67108863}O.words[V]=W|0,U=N|0}return U!==0?O.words[V]=U|0:O.length--,O._strip()}var c=function(R,O,D){var B=R.words,G=O.words,z=D.words,X=0,U,V,N,W=B[0]|0,F=W&8191,I=W>>>13,k=B[1]|0,Y=k&8191,H=k>>>13,K=B[2]|0,j=K&8191,J=K>>>13,Q=B[3]|0,Z=Q&8191,q=Q>>>13,et=B[4]|0,tt=et&8191,it=et>>>13,ut=B[5]|0,ot=ut&8191,ht=ut>>>13,st=B[6]|0,at=st&8191,nt=st>>>13,gt=B[7]|0,dt=gt&8191,mt=gt>>>13,Ft=B[8]|0,pt=Ft&8191,ft=Ft>>>13,Mt=B[9]|0,xt=Mt&8191,Tt=Mt>>>13,zt=G[0]|0,Ct=zt&8191,At=zt>>>13,Le=G[1]|0,Rt=Le&8191,Ot=Le>>>13,Fe=G[2]|0,Xt=Fe&8191,Yt=Fe>>>13,Vs=G[3]|0,Wt=Vs&8191,Ht=Vs>>>13,Us=G[4]|0,$t=Us&8191,Kt=Us>>>13,zs=G[5]|0,jt=zs&8191,Jt=zs>>>13,Xs=G[6]|0,Zt=Xs&8191,Qt=Xs>>>13,Ys=G[7]|0,qt=Ys&8191,_t=Ys>>>13,Ws=G[8]|0,te=Ws&8191,ee=Ws>>>13,Hs=G[9]|0,ie=Hs&8191,se=Hs>>>13;D.negative=R.negative^O.negative,D.length=19,U=Math.imul(F,Ct),V=Math.imul(F,At),V=V+Math.imul(I,Ct)|0,N=Math.imul(I,At);var cs=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(cs>>>26)|0,cs&=67108863,U=Math.imul(Y,Ct),V=Math.imul(Y,At),V=V+Math.imul(H,Ct)|0,N=Math.imul(H,At),U=U+Math.imul(F,Rt)|0,V=V+Math.imul(F,Ot)|0,V=V+Math.imul(I,Rt)|0,N=N+Math.imul(I,Ot)|0;var vs=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(vs>>>26)|0,vs&=67108863,U=Math.imul(j,Ct),V=Math.imul(j,At),V=V+Math.imul(J,Ct)|0,N=Math.imul(J,At),U=U+Math.imul(Y,Rt)|0,V=V+Math.imul(Y,Ot)|0,V=V+Math.imul(H,Rt)|0,N=N+Math.imul(H,Ot)|0,U=U+Math.imul(F,Xt)|0,V=V+Math.imul(F,Yt)|0,V=V+Math.imul(I,Xt)|0,N=N+Math.imul(I,Yt)|0;var ps=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(ps>>>26)|0,ps&=67108863,U=Math.imul(Z,Ct),V=Math.imul(Z,At),V=V+Math.imul(q,Ct)|0,N=Math.imul(q,At),U=U+Math.imul(j,Rt)|0,V=V+Math.imul(j,Ot)|0,V=V+Math.imul(J,Rt)|0,N=N+Math.imul(J,Ot)|0,U=U+Math.imul(Y,Xt)|0,V=V+Math.imul(Y,Yt)|0,V=V+Math.imul(H,Xt)|0,N=N+Math.imul(H,Yt)|0,U=U+Math.imul(F,Wt)|0,V=V+Math.imul(F,Ht)|0,V=V+Math.imul(I,Wt)|0,N=N+Math.imul(I,Ht)|0;var ms=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(ms>>>26)|0,ms&=67108863,U=Math.imul(tt,Ct),V=Math.imul(tt,At),V=V+Math.imul(it,Ct)|0,N=Math.imul(it,At),U=U+Math.imul(Z,Rt)|0,V=V+Math.imul(Z,Ot)|0,V=V+Math.imul(q,Rt)|0,N=N+Math.imul(q,Ot)|0,U=U+Math.imul(j,Xt)|0,V=V+Math.imul(j,Yt)|0,V=V+Math.imul(J,Xt)|0,N=N+Math.imul(J,Yt)|0,U=U+Math.imul(Y,Wt)|0,V=V+Math.imul(Y,Ht)|0,V=V+Math.imul(H,Wt)|0,N=N+Math.imul(H,Ht)|0,U=U+Math.imul(F,$t)|0,V=V+Math.imul(F,Kt)|0,V=V+Math.imul(I,$t)|0,N=N+Math.imul(I,Kt)|0;var gs=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(gs>>>26)|0,gs&=67108863,U=Math.imul(ot,Ct),V=Math.imul(ot,At),V=V+Math.imul(ht,Ct)|0,N=Math.imul(ht,At),U=U+Math.imul(tt,Rt)|0,V=V+Math.imul(tt,Ot)|0,V=V+Math.imul(it,Rt)|0,N=N+Math.imul(it,Ot)|0,U=U+Math.imul(Z,Xt)|0,V=V+Math.imul(Z,Yt)|0,V=V+Math.imul(q,Xt)|0,N=N+Math.imul(q,Yt)|0,U=U+Math.imul(j,Wt)|0,V=V+Math.imul(j,Ht)|0,V=V+Math.imul(J,Wt)|0,N=N+Math.imul(J,Ht)|0,U=U+Math.imul(Y,$t)|0,V=V+Math.imul(Y,Kt)|0,V=V+Math.imul(H,$t)|0,N=N+Math.imul(H,Kt)|0,U=U+Math.imul(F,jt)|0,V=V+Math.imul(F,Jt)|0,V=V+Math.imul(I,jt)|0,N=N+Math.imul(I,Jt)|0;var ph=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(ph>>>26)|0,ph&=67108863,U=Math.imul(at,Ct),V=Math.imul(at,At),V=V+Math.imul(nt,Ct)|0,N=Math.imul(nt,At),U=U+Math.imul(ot,Rt)|0,V=V+Math.imul(ot,Ot)|0,V=V+Math.imul(ht,Rt)|0,N=N+Math.imul(ht,Ot)|0,U=U+Math.imul(tt,Xt)|0,V=V+Math.imul(tt,Yt)|0,V=V+Math.imul(it,Xt)|0,N=N+Math.imul(it,Yt)|0,U=U+Math.imul(Z,Wt)|0,V=V+Math.imul(Z,Ht)|0,V=V+Math.imul(q,Wt)|0,N=N+Math.imul(q,Ht)|0,U=U+Math.imul(j,$t)|0,V=V+Math.imul(j,Kt)|0,V=V+Math.imul(J,$t)|0,N=N+Math.imul(J,Kt)|0,U=U+Math.imul(Y,jt)|0,V=V+Math.imul(Y,Jt)|0,V=V+Math.imul(H,jt)|0,N=N+Math.imul(H,Jt)|0,U=U+Math.imul(F,Zt)|0,V=V+Math.imul(F,Qt)|0,V=V+Math.imul(I,Zt)|0,N=N+Math.imul(I,Qt)|0;var mh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(mh>>>26)|0,mh&=67108863,U=Math.imul(dt,Ct),V=Math.imul(dt,At),V=V+Math.imul(mt,Ct)|0,N=Math.imul(mt,At),U=U+Math.imul(at,Rt)|0,V=V+Math.imul(at,Ot)|0,V=V+Math.imul(nt,Rt)|0,N=N+Math.imul(nt,Ot)|0,U=U+Math.imul(ot,Xt)|0,V=V+Math.imul(ot,Yt)|0,V=V+Math.imul(ht,Xt)|0,N=N+Math.imul(ht,Yt)|0,U=U+Math.imul(tt,Wt)|0,V=V+Math.imul(tt,Ht)|0,V=V+Math.imul(it,Wt)|0,N=N+Math.imul(it,Ht)|0,U=U+Math.imul(Z,$t)|0,V=V+Math.imul(Z,Kt)|0,V=V+Math.imul(q,$t)|0,N=N+Math.imul(q,Kt)|0,U=U+Math.imul(j,jt)|0,V=V+Math.imul(j,Jt)|0,V=V+Math.imul(J,jt)|0,N=N+Math.imul(J,Jt)|0,U=U+Math.imul(Y,Zt)|0,V=V+Math.imul(Y,Qt)|0,V=V+Math.imul(H,Zt)|0,N=N+Math.imul(H,Qt)|0,U=U+Math.imul(F,qt)|0,V=V+Math.imul(F,_t)|0,V=V+Math.imul(I,qt)|0,N=N+Math.imul(I,_t)|0;var gh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(gh>>>26)|0,gh&=67108863,U=Math.imul(pt,Ct),V=Math.imul(pt,At),V=V+Math.imul(ft,Ct)|0,N=Math.imul(ft,At),U=U+Math.imul(dt,Rt)|0,V=V+Math.imul(dt,Ot)|0,V=V+Math.imul(mt,Rt)|0,N=N+Math.imul(mt,Ot)|0,U=U+Math.imul(at,Xt)|0,V=V+Math.imul(at,Yt)|0,V=V+Math.imul(nt,Xt)|0,N=N+Math.imul(nt,Yt)|0,U=U+Math.imul(ot,Wt)|0,V=V+Math.imul(ot,Ht)|0,V=V+Math.imul(ht,Wt)|0,N=N+Math.imul(ht,Ht)|0,U=U+Math.imul(tt,$t)|0,V=V+Math.imul(tt,Kt)|0,V=V+Math.imul(it,$t)|0,N=N+Math.imul(it,Kt)|0,U=U+Math.imul(Z,jt)|0,V=V+Math.imul(Z,Jt)|0,V=V+Math.imul(q,jt)|0,N=N+Math.imul(q,Jt)|0,U=U+Math.imul(j,Zt)|0,V=V+Math.imul(j,Qt)|0,V=V+Math.imul(J,Zt)|0,N=N+Math.imul(J,Qt)|0,U=U+Math.imul(Y,qt)|0,V=V+Math.imul(Y,_t)|0,V=V+Math.imul(H,qt)|0,N=N+Math.imul(H,_t)|0,U=U+Math.imul(F,te)|0,V=V+Math.imul(F,ee)|0,V=V+Math.imul(I,te)|0,N=N+Math.imul(I,ee)|0;var yh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(yh>>>26)|0,yh&=67108863,U=Math.imul(xt,Ct),V=Math.imul(xt,At),V=V+Math.imul(Tt,Ct)|0,N=Math.imul(Tt,At),U=U+Math.imul(pt,Rt)|0,V=V+Math.imul(pt,Ot)|0,V=V+Math.imul(ft,Rt)|0,N=N+Math.imul(ft,Ot)|0,U=U+Math.imul(dt,Xt)|0,V=V+Math.imul(dt,Yt)|0,V=V+Math.imul(mt,Xt)|0,N=N+Math.imul(mt,Yt)|0,U=U+Math.imul(at,Wt)|0,V=V+Math.imul(at,Ht)|0,V=V+Math.imul(nt,Wt)|0,N=N+Math.imul(nt,Ht)|0,U=U+Math.imul(ot,$t)|0,V=V+Math.imul(ot,Kt)|0,V=V+Math.imul(ht,$t)|0,N=N+Math.imul(ht,Kt)|0,U=U+Math.imul(tt,jt)|0,V=V+Math.imul(tt,Jt)|0,V=V+Math.imul(it,jt)|0,N=N+Math.imul(it,Jt)|0,U=U+Math.imul(Z,Zt)|0,V=V+Math.imul(Z,Qt)|0,V=V+Math.imul(q,Zt)|0,N=N+Math.imul(q,Qt)|0,U=U+Math.imul(j,qt)|0,V=V+Math.imul(j,_t)|0,V=V+Math.imul(J,qt)|0,N=N+Math.imul(J,_t)|0,U=U+Math.imul(Y,te)|0,V=V+Math.imul(Y,ee)|0,V=V+Math.imul(H,te)|0,N=N+Math.imul(H,ee)|0,U=U+Math.imul(F,ie)|0,V=V+Math.imul(F,se)|0,V=V+Math.imul(I,ie)|0,N=N+Math.imul(I,se)|0;var xh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(xh>>>26)|0,xh&=67108863,U=Math.imul(xt,Rt),V=Math.imul(xt,Ot),V=V+Math.imul(Tt,Rt)|0,N=Math.imul(Tt,Ot),U=U+Math.imul(pt,Xt)|0,V=V+Math.imul(pt,Yt)|0,V=V+Math.imul(ft,Xt)|0,N=N+Math.imul(ft,Yt)|0,U=U+Math.imul(dt,Wt)|0,V=V+Math.imul(dt,Ht)|0,V=V+Math.imul(mt,Wt)|0,N=N+Math.imul(mt,Ht)|0,U=U+Math.imul(at,$t)|0,V=V+Math.imul(at,Kt)|0,V=V+Math.imul(nt,$t)|0,N=N+Math.imul(nt,Kt)|0,U=U+Math.imul(ot,jt)|0,V=V+Math.imul(ot,Jt)|0,V=V+Math.imul(ht,jt)|0,N=N+Math.imul(ht,Jt)|0,U=U+Math.imul(tt,Zt)|0,V=V+Math.imul(tt,Qt)|0,V=V+Math.imul(it,Zt)|0,N=N+Math.imul(it,Qt)|0,U=U+Math.imul(Z,qt)|0,V=V+Math.imul(Z,_t)|0,V=V+Math.imul(q,qt)|0,N=N+Math.imul(q,_t)|0,U=U+Math.imul(j,te)|0,V=V+Math.imul(j,ee)|0,V=V+Math.imul(J,te)|0,N=N+Math.imul(J,ee)|0,U=U+Math.imul(Y,ie)|0,V=V+Math.imul(Y,se)|0,V=V+Math.imul(H,ie)|0,N=N+Math.imul(H,se)|0;var Th=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(Th>>>26)|0,Th&=67108863,U=Math.imul(xt,Xt),V=Math.imul(xt,Yt),V=V+Math.imul(Tt,Xt)|0,N=Math.imul(Tt,Yt),U=U+Math.imul(pt,Wt)|0,V=V+Math.imul(pt,Ht)|0,V=V+Math.imul(ft,Wt)|0,N=N+Math.imul(ft,Ht)|0,U=U+Math.imul(dt,$t)|0,V=V+Math.imul(dt,Kt)|0,V=V+Math.imul(mt,$t)|0,N=N+Math.imul(mt,Kt)|0,U=U+Math.imul(at,jt)|0,V=V+Math.imul(at,Jt)|0,V=V+Math.imul(nt,jt)|0,N=N+Math.imul(nt,Jt)|0,U=U+Math.imul(ot,Zt)|0,V=V+Math.imul(ot,Qt)|0,V=V+Math.imul(ht,Zt)|0,N=N+Math.imul(ht,Qt)|0,U=U+Math.imul(tt,qt)|0,V=V+Math.imul(tt,_t)|0,V=V+Math.imul(it,qt)|0,N=N+Math.imul(it,_t)|0,U=U+Math.imul(Z,te)|0,V=V+Math.imul(Z,ee)|0,V=V+Math.imul(q,te)|0,N=N+Math.imul(q,ee)|0,U=U+Math.imul(j,ie)|0,V=V+Math.imul(j,se)|0,V=V+Math.imul(J,ie)|0,N=N+Math.imul(J,se)|0;var Ch=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(Ch>>>26)|0,Ch&=67108863,U=Math.imul(xt,Wt),V=Math.imul(xt,Ht),V=V+Math.imul(Tt,Wt)|0,N=Math.imul(Tt,Ht),U=U+Math.imul(pt,$t)|0,V=V+Math.imul(pt,Kt)|0,V=V+Math.imul(ft,$t)|0,N=N+Math.imul(ft,Kt)|0,U=U+Math.imul(dt,jt)|0,V=V+Math.imul(dt,Jt)|0,V=V+Math.imul(mt,jt)|0,N=N+Math.imul(mt,Jt)|0,U=U+Math.imul(at,Zt)|0,V=V+Math.imul(at,Qt)|0,V=V+Math.imul(nt,Zt)|0,N=N+Math.imul(nt,Qt)|0,U=U+Math.imul(ot,qt)|0,V=V+Math.imul(ot,_t)|0,V=V+Math.imul(ht,qt)|0,N=N+Math.imul(ht,_t)|0,U=U+Math.imul(tt,te)|0,V=V+Math.imul(tt,ee)|0,V=V+Math.imul(it,te)|0,N=N+Math.imul(it,ee)|0,U=U+Math.imul(Z,ie)|0,V=V+Math.imul(Z,se)|0,V=V+Math.imul(q,ie)|0,N=N+Math.imul(q,se)|0;var Sh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(Sh>>>26)|0,Sh&=67108863,U=Math.imul(xt,$t),V=Math.imul(xt,Kt),V=V+Math.imul(Tt,$t)|0,N=Math.imul(Tt,Kt),U=U+Math.imul(pt,jt)|0,V=V+Math.imul(pt,Jt)|0,V=V+Math.imul(ft,jt)|0,N=N+Math.imul(ft,Jt)|0,U=U+Math.imul(dt,Zt)|0,V=V+Math.imul(dt,Qt)|0,V=V+Math.imul(mt,Zt)|0,N=N+Math.imul(mt,Qt)|0,U=U+Math.imul(at,qt)|0,V=V+Math.imul(at,_t)|0,V=V+Math.imul(nt,qt)|0,N=N+Math.imul(nt,_t)|0,U=U+Math.imul(ot,te)|0,V=V+Math.imul(ot,ee)|0,V=V+Math.imul(ht,te)|0,N=N+Math.imul(ht,ee)|0,U=U+Math.imul(tt,ie)|0,V=V+Math.imul(tt,se)|0,V=V+Math.imul(it,ie)|0,N=N+Math.imul(it,se)|0;var Eh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(Eh>>>26)|0,Eh&=67108863,U=Math.imul(xt,jt),V=Math.imul(xt,Jt),V=V+Math.imul(Tt,jt)|0,N=Math.imul(Tt,Jt),U=U+Math.imul(pt,Zt)|0,V=V+Math.imul(pt,Qt)|0,V=V+Math.imul(ft,Zt)|0,N=N+Math.imul(ft,Qt)|0,U=U+Math.imul(dt,qt)|0,V=V+Math.imul(dt,_t)|0,V=V+Math.imul(mt,qt)|0,N=N+Math.imul(mt,_t)|0,U=U+Math.imul(at,te)|0,V=V+Math.imul(at,ee)|0,V=V+Math.imul(nt,te)|0,N=N+Math.imul(nt,ee)|0,U=U+Math.imul(ot,ie)|0,V=V+Math.imul(ot,se)|0,V=V+Math.imul(ht,ie)|0,N=N+Math.imul(ht,se)|0;var Ph=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(Ph>>>26)|0,Ph&=67108863,U=Math.imul(xt,Zt),V=Math.imul(xt,Qt),V=V+Math.imul(Tt,Zt)|0,N=Math.imul(Tt,Qt),U=U+Math.imul(pt,qt)|0,V=V+Math.imul(pt,_t)|0,V=V+Math.imul(ft,qt)|0,N=N+Math.imul(ft,_t)|0,U=U+Math.imul(dt,te)|0,V=V+Math.imul(dt,ee)|0,V=V+Math.imul(mt,te)|0,N=N+Math.imul(mt,ee)|0,U=U+Math.imul(at,ie)|0,V=V+Math.imul(at,se)|0,V=V+Math.imul(nt,ie)|0,N=N+Math.imul(nt,se)|0;var wh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(wh>>>26)|0,wh&=67108863,U=Math.imul(xt,qt),V=Math.imul(xt,_t),V=V+Math.imul(Tt,qt)|0,N=Math.imul(Tt,_t),U=U+Math.imul(pt,te)|0,V=V+Math.imul(pt,ee)|0,V=V+Math.imul(ft,te)|0,N=N+Math.imul(ft,ee)|0,U=U+Math.imul(dt,ie)|0,V=V+Math.imul(dt,se)|0,V=V+Math.imul(mt,ie)|0,N=N+Math.imul(mt,se)|0;var Mh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(Mh>>>26)|0,Mh&=67108863,U=Math.imul(xt,te),V=Math.imul(xt,ee),V=V+Math.imul(Tt,te)|0,N=Math.imul(Tt,ee),U=U+Math.imul(pt,ie)|0,V=V+Math.imul(pt,se)|0,V=V+Math.imul(ft,ie)|0,N=N+Math.imul(ft,se)|0;var bh=(X+U|0)+((V&8191)<<13)|0;X=(N+(V>>>13)|0)+(bh>>>26)|0,bh&=67108863,U=Math.imul(xt,ie),V=Math.imul(xt,se),V=V+Math.imul(Tt,ie)|0,N=Math.imul(Tt,se);var Ah=(X+U|0)+((V&8191)<<13)|0;return X=(N+(V>>>13)|0)+(Ah>>>26)|0,Ah&=67108863,z[0]=cs,z[1]=vs,z[2]=ps,z[3]=ms,z[4]=gs,z[5]=ph,z[6]=mh,z[7]=gh,z[8]=yh,z[9]=xh,z[10]=Th,z[11]=Ch,z[12]=Sh,z[13]=Eh,z[14]=Ph,z[15]=wh,z[16]=Mh,z[17]=bh,z[18]=Ah,X!==0&&(z[19]=X,D.length++),D};Math.imul||(c=o);function m(L,R,O){O.negative=R.negative^L.negative,O.length=L.length+R.length;for(var D=0,B=0,G=0;G<O.length-1;G++){var z=B;B=0;for(var X=D&67108863,U=Math.min(G,R.length-1),V=Math.max(0,G-L.length+1);V<=U;V++){var N=G-V,W=L.words[N]|0,F=R.words[V]|0,I=W*F,k=I&67108863;z=z+(I/67108864|0)|0,k=k+X|0,X=k&67108863,z=z+(k>>>26)|0,B+=z>>>26,z&=67108863}O.words[G]=X,D=z,z=B}return D!==0?O.words[G]=D:O.length--,O._strip()}function p(L,R,O){return m(L,R,O)}w.prototype.mulTo=function(R,O){var D,B=this.length+R.length;return this.length===10&&R.length===10?D=c(this,R,O):B<63?D=o(this,R,O):B<1024?D=m(this,R,O):D=p(this,R,O),D},w.prototype.mul=function(R){var O=new w(null);return O.words=new Array(this.length+R.length),this.mulTo(R,O)},w.prototype.mulf=function(R){var O=new w(null);return O.words=new Array(this.length+R.length),p(this,R,O)},w.prototype.imul=function(R){return this.clone().mulTo(R,this)},w.prototype.imuln=function(R){var O=R<0;O&&(R=-R),f(typeof R=="number"),f(R<67108864);for(var D=0,B=0;B<this.length;B++){var G=(this.words[B]|0)*R,z=(G&67108863)+(D&67108863);D>>=26,D+=G/67108864|0,D+=z>>>26,this.words[B]=z&67108863}return D!==0&&(this.words[B]=D,this.length++),O?this.ineg():this},w.prototype.muln=function(R){return this.clone().imuln(R)},w.prototype.sqr=function(){return this.mul(this)},w.prototype.isqr=function(){return this.imul(this.clone())},w.prototype.pow=function(R){var O=v(R);if(O.length===0)return new w(1);for(var D=this,B=0;B<O.length&&O[B]===0;B++,D=D.sqr());if(++B<O.length)for(var G=D.sqr();B<O.length;B++,G=G.sqr())O[B]!==0&&(D=D.mul(G));return D},w.prototype.iushln=function(R){f(typeof R=="number"&&R>=0);var O=R%26,D=(R-O)/26,B=67108863>>>26-O<<26-O,G;if(O!==0){var z=0;for(G=0;G<this.length;G++){var X=this.words[G]&B,U=(this.words[G]|0)-X<<O;this.words[G]=U|z,z=X>>>26-O}z&&(this.words[G]=z,this.length++)}if(D!==0){for(G=this.length-1;G>=0;G--)this.words[G+D]=this.words[G];for(G=0;G<D;G++)this.words[G]=0;this.length+=D}return this._strip()},w.prototype.ishln=function(R){return f(this.negative===0),this.iushln(R)},w.prototype.iushrn=function(R,O,D){f(typeof R=="number"&&R>=0);var B;O?B=(O-O%26)/26:B=0;var G=R%26,z=Math.min((R-G)/26,this.length),X=67108863^67108863>>>G<<G,U=D;if(B-=z,B=Math.max(0,B),U){for(var V=0;V<z;V++)U.words[V]=this.words[V];U.length=z}if(z!==0)if(this.length>z)for(this.length-=z,V=0;V<this.length;V++)this.words[V]=this.words[V+z];else this.words[0]=0,this.length=1;var N=0;for(V=this.length-1;V>=0&&(N!==0||V>=B);V--){var W=this.words[V]|0;this.words[V]=N<<26-G|W>>>G,N=W&X}return U&&N!==0&&(U.words[U.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},w.prototype.ishrn=function(R,O,D){return f(this.negative===0),this.iushrn(R,O,D)},w.prototype.shln=function(R){return this.clone().ishln(R)},w.prototype.ushln=function(R){return this.clone().iushln(R)},w.prototype.shrn=function(R){return this.clone().ishrn(R)},w.prototype.ushrn=function(R){return this.clone().iushrn(R)},w.prototype.testn=function(R){f(typeof R=="number"&&R>=0);var O=R%26,D=(R-O)/26,B=1<<O;if(this.length<=D)return!1;var G=this.words[D];return!!(G&B)},w.prototype.imaskn=function(R){f(typeof R=="number"&&R>=0);var O=R%26,D=(R-O)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=D)return this;if(O!==0&&D++,this.length=Math.min(D,this.length),O!==0){var B=67108863^67108863>>>O<<O;this.words[this.length-1]&=B}return this._strip()},w.prototype.maskn=function(R){return this.clone().imaskn(R)},w.prototype.iaddn=function(R){return f(typeof R=="number"),f(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<=R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},w.prototype._iaddn=function(R){this.words[0]+=R;for(var O=0;O<this.length&&this.words[O]>=67108864;O++)this.words[O]-=67108864,O===this.length-1?this.words[O+1]=1:this.words[O+1]++;return this.length=Math.max(this.length,O+1),this},w.prototype.isubn=function(R){if(f(typeof R=="number"),f(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var O=0;O<this.length&&this.words[O]<0;O++)this.words[O]+=67108864,this.words[O+1]-=1;return this._strip()},w.prototype.addn=function(R){return this.clone().iaddn(R)},w.prototype.subn=function(R){return this.clone().isubn(R)},w.prototype.iabs=function(){return this.negative=0,this},w.prototype.abs=function(){return this.clone().iabs()},w.prototype._ishlnsubmul=function(R,O,D){var B=R.length+D,G;this._expand(B);var z,X=0;for(G=0;G<R.length;G++){z=(this.words[G+D]|0)+X;var U=(R.words[G]|0)*O;z-=U&67108863,X=(z>>26)-(U/67108864|0),this.words[G+D]=z&67108863}for(;G<this.length-D;G++)z=(this.words[G+D]|0)+X,X=z>>26,this.words[G+D]=z&67108863;if(X===0)return this._strip();for(f(X===-1),X=0,G=0;G<this.length;G++)z=-(this.words[G]|0)+X,X=z>>26,this.words[G]=z&67108863;return this.negative=1,this._strip()},w.prototype._wordDiv=function(R,O){var D=this.length-R.length,B=this.clone(),G=R,z=G.words[G.length-1]|0,X=this._countBits(z);D=26-X,D!==0&&(G=G.ushln(D),B.iushln(D),z=G.words[G.length-1]|0);var U=B.length-G.length,V;if(O!=="mod"){V=new w(null),V.length=U+1,V.words=new Array(V.length);for(var N=0;N<V.length;N++)V.words[N]=0}var W=B.clone()._ishlnsubmul(G,1,U);W.negative===0&&(B=W,V&&(V.words[U]=1));for(var F=U-1;F>=0;F--){var I=(B.words[G.length+F]|0)*67108864+(B.words[G.length+F-1]|0);for(I=Math.min(I/z|0,67108863),B._ishlnsubmul(G,I,F);B.negative!==0;)I--,B.negative=0,B._ishlnsubmul(G,1,F),B.isZero()||(B.negative^=1);V&&(V.words[F]=I)}return V&&V._strip(),B._strip(),O!=="div"&&D!==0&&B.iushrn(D),{div:V||null,mod:B}},w.prototype.divmod=function(R,O,D){if(f(!R.isZero()),this.isZero())return{div:new w(0),mod:new w(0)};var B,G,z;return this.negative!==0&&R.negative===0?(z=this.neg().divmod(R,O),O!=="mod"&&(B=z.div.neg()),O!=="div"&&(G=z.mod.neg(),D&&G.negative!==0&&G.iadd(R)),{div:B,mod:G}):this.negative===0&&R.negative!==0?(z=this.divmod(R.neg(),O),O!=="mod"&&(B=z.div.neg()),{div:B,mod:z.mod}):(this.negative&R.negative)!==0?(z=this.neg().divmod(R.neg(),O),O!=="div"&&(G=z.mod.neg(),D&&G.negative!==0&&G.isub(R)),{div:z.div,mod:G}):R.length>this.length||this.cmp(R)<0?{div:new w(0),mod:this}:R.length===1?O==="div"?{div:this.divn(R.words[0]),mod:null}:O==="mod"?{div:null,mod:new w(this.modrn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new w(this.modrn(R.words[0]))}:this._wordDiv(R,O)},w.prototype.div=function(R){return this.divmod(R,"div",!1).div},w.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},w.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},w.prototype.divRound=function(R){var O=this.divmod(R);if(O.mod.isZero())return O.div;var D=O.div.negative!==0?O.mod.isub(R):O.mod,B=R.ushrn(1),G=R.andln(1),z=D.cmp(B);return z<0||G===1&&z===0?O.div:O.div.negative!==0?O.div.isubn(1):O.div.iaddn(1)},w.prototype.modrn=function(R){var O=R<0;O&&(R=-R),f(R<=67108863);for(var D=(1<<26)%R,B=0,G=this.length-1;G>=0;G--)B=(D*B+(this.words[G]|0))%R;return O?-B:B},w.prototype.modn=function(R){return this.modrn(R)},w.prototype.idivn=function(R){var O=R<0;O&&(R=-R),f(R<=67108863);for(var D=0,B=this.length-1;B>=0;B--){var G=(this.words[B]|0)+D*67108864;this.words[B]=G/R|0,D=G%R}return this._strip(),O?this.ineg():this},w.prototype.divn=function(R){return this.clone().idivn(R)},w.prototype.egcd=function(R){f(R.negative===0),f(!R.isZero());var O=this,D=R.clone();O.negative!==0?O=O.umod(R):O=O.clone();for(var B=new w(1),G=new w(0),z=new w(0),X=new w(1),U=0;O.isEven()&&D.isEven();)O.iushrn(1),D.iushrn(1),++U;for(var V=D.clone(),N=O.clone();!O.isZero();){for(var W=0,F=1;(O.words[0]&F)===0&&W<26;++W,F<<=1);if(W>0)for(O.iushrn(W);W-- >0;)(B.isOdd()||G.isOdd())&&(B.iadd(V),G.isub(N)),B.iushrn(1),G.iushrn(1);for(var I=0,k=1;(D.words[0]&k)===0&&I<26;++I,k<<=1);if(I>0)for(D.iushrn(I);I-- >0;)(z.isOdd()||X.isOdd())&&(z.iadd(V),X.isub(N)),z.iushrn(1),X.iushrn(1);O.cmp(D)>=0?(O.isub(D),B.isub(z),G.isub(X)):(D.isub(O),z.isub(B),X.isub(G))}return{a:z,b:X,gcd:D.iushln(U)}},w.prototype._invmp=function(R){f(R.negative===0),f(!R.isZero());var O=this,D=R.clone();O.negative!==0?O=O.umod(R):O=O.clone();for(var B=new w(1),G=new w(0),z=D.clone();O.cmpn(1)>0&&D.cmpn(1)>0;){for(var X=0,U=1;(O.words[0]&U)===0&&X<26;++X,U<<=1);if(X>0)for(O.iushrn(X);X-- >0;)B.isOdd()&&B.iadd(z),B.iushrn(1);for(var V=0,N=1;(D.words[0]&N)===0&&V<26;++V,N<<=1);if(V>0)for(D.iushrn(V);V-- >0;)G.isOdd()&&G.iadd(z),G.iushrn(1);O.cmp(D)>=0?(O.isub(D),B.isub(G)):(D.isub(O),G.isub(B))}var W;return O.cmpn(1)===0?W=B:W=G,W.cmpn(0)<0&&W.iadd(R),W},w.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var O=this.clone(),D=R.clone();O.negative=0,D.negative=0;for(var B=0;O.isEven()&&D.isEven();B++)O.iushrn(1),D.iushrn(1);do{for(;O.isEven();)O.iushrn(1);for(;D.isEven();)D.iushrn(1);var G=O.cmp(D);if(G<0){var z=O;O=D,D=z}else if(G===0||D.cmpn(1)===0)break;O.isub(D)}while(!0);return D.iushln(B)},w.prototype.invm=function(R){return this.egcd(R).a.umod(R)},w.prototype.isEven=function(){return(this.words[0]&1)===0},w.prototype.isOdd=function(){return(this.words[0]&1)===1},w.prototype.andln=function(R){return this.words[0]&R},w.prototype.bincn=function(R){f(typeof R=="number");var O=R%26,D=(R-O)/26,B=1<<O;if(this.length<=D)return this._expand(D+1),this.words[D]|=B,this;for(var G=B,z=D;G!==0&&z<this.length;z++){var X=this.words[z]|0;X+=G,G=X>>>26,X&=67108863,this.words[z]=X}return G!==0&&(this.words[z]=G,this.length++),this},w.prototype.isZero=function(){return this.length===1&&this.words[0]===0},w.prototype.cmpn=function(R){var O=R<0;if(this.negative!==0&&!O)return-1;if(this.negative===0&&O)return 1;this._strip();var D;if(this.length>1)D=1;else{O&&(R=-R),f(R<=67108863,"Number is too big");var B=this.words[0]|0;D=B===R?0:B<R?-1:1}return this.negative!==0?-D|0:D},w.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var O=this.ucmp(R);return this.negative!==0?-O|0:O},w.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var O=0,D=this.length-1;D>=0;D--){var B=this.words[D]|0,G=R.words[D]|0;if(B!==G){B<G?O=-1:B>G&&(O=1);break}}return O},w.prototype.gtn=function(R){return this.cmpn(R)===1},w.prototype.gt=function(R){return this.cmp(R)===1},w.prototype.gten=function(R){return this.cmpn(R)>=0},w.prototype.gte=function(R){return this.cmp(R)>=0},w.prototype.ltn=function(R){return this.cmpn(R)===-1},w.prototype.lt=function(R){return this.cmp(R)===-1},w.prototype.lten=function(R){return this.cmpn(R)<=0},w.prototype.lte=function(R){return this.cmp(R)<=0},w.prototype.eqn=function(R){return this.cmpn(R)===0},w.prototype.eq=function(R){return this.cmp(R)===0},w.red=function(R){return new b(R)},w.prototype.toRed=function(R){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},w.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},w.prototype._forceRed=function(R){return this.red=R,this},w.prototype.forceRed=function(R){return f(!this.red,"Already a number in reduction context"),this._forceRed(R)},w.prototype.redAdd=function(R){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},w.prototype.redIAdd=function(R){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},w.prototype.redSub=function(R){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},w.prototype.redISub=function(R){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},w.prototype.redShl=function(R){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},w.prototype.redMul=function(R){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},w.prototype.redIMul=function(R){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},w.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},w.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},w.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},w.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},w.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},w.prototype.redPow=function(R){return f(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var g={k256:null,p224:null,p192:null,p25519:null};function x(L,R){this.name=L,this.p=new w(R,16),this.n=this.p.bitLength(),this.k=new w(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var R=new w(null);return R.words=new Array(Math.ceil(this.n/13)),R},x.prototype.ireduce=function(R){var O=R,D;do this.split(O,this.tmp),O=this.imulK(O),O=O.iadd(this.tmp),D=O.bitLength();while(D>this.n);var B=D<this.n?-1:O.ucmp(this.p);return B===0?(O.words[0]=0,O.length=1):B>0?O.isub(this.p):O.strip!==void 0?O.strip():O._strip(),O},x.prototype.split=function(R,O){R.iushrn(this.n,0,O)},x.prototype.imulK=function(R){return R.imul(this.k)};function E(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}C(E,x),E.prototype.split=function(R,O){for(var D=4194303,B=Math.min(R.length,9),G=0;G<B;G++)O.words[G]=R.words[G];if(O.length=B,R.length<=9){R.words[0]=0,R.length=1;return}var z=R.words[9];for(O.words[O.length++]=z&D,G=10;G<R.length;G++){var X=R.words[G]|0;R.words[G-10]=(X&D)<<4|z>>>22,z=X}z>>>=22,R.words[G-10]=z,z===0&&R.length>10?R.length-=10:R.length-=9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var O=0,D=0;D<R.length;D++){var B=R.words[D]|0;O+=B*977,R.words[D]=O&67108863,O=B*64+(O/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function P(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}C(P,x);function S(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}C(S,x);function M(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}C(M,x),M.prototype.imulK=function(R){for(var O=0,D=0;D<R.length;D++){var B=(R.words[D]|0)*19+O,G=B&67108863;B>>>=26,R.words[D]=G,O=B}return O!==0&&(R.words[R.length++]=O),R},w._prime=function(R){if(g[R])return g[R];var O;if(R==="k256")O=new E;else if(R==="p224")O=new P;else if(R==="p192")O=new S;else if(R==="p25519")O=new M;else throw new Error("Unknown prime "+R);return g[R]=O,O};function b(L){if(typeof L=="string"){var R=w._prime(L);this.m=R.p,this.prime=R}else f(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}b.prototype._verify1=function(R){f(R.negative===0,"red works only with positives"),f(R.red,"red works only with red numbers")},b.prototype._verify2=function(R,O){f((R.negative|O.negative)===0,"red works only with positives"),f(R.red&&R.red===O.red,"red works only with red numbers")},b.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):(y(R,R.umod(this.m)._forceRed(this)),R)},b.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},b.prototype.add=function(R,O){this._verify2(R,O);var D=R.add(O);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},b.prototype.iadd=function(R,O){this._verify2(R,O);var D=R.iadd(O);return D.cmp(this.m)>=0&&D.isub(this.m),D},b.prototype.sub=function(R,O){this._verify2(R,O);var D=R.sub(O);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},b.prototype.isub=function(R,O){this._verify2(R,O);var D=R.isub(O);return D.cmpn(0)<0&&D.iadd(this.m),D},b.prototype.shl=function(R,O){return this._verify1(R),this.imod(R.ushln(O))},b.prototype.imul=function(R,O){return this._verify2(R,O),this.imod(R.imul(O))},b.prototype.mul=function(R,O){return this._verify2(R,O),this.imod(R.mul(O))},b.prototype.isqr=function(R){return this.imul(R,R.clone())},b.prototype.sqr=function(R){return this.mul(R,R)},b.prototype.sqrt=function(R){if(R.isZero())return R.clone();var O=this.m.andln(3);if(f(O%2===1),O===3){var D=this.m.add(new w(1)).iushrn(2);return this.pow(R,D)}for(var B=this.m.subn(1),G=0;!B.isZero()&&B.andln(1)===0;)G++,B.iushrn(1);f(!B.isZero());var z=new w(1).toRed(this),X=z.redNeg(),U=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new w(2*V*V).toRed(this);this.pow(V,U).cmp(X)!==0;)V.redIAdd(X);for(var N=this.pow(V,B),W=this.pow(R,B.addn(1).iushrn(1)),F=this.pow(R,B),I=G;F.cmp(z)!==0;){for(var k=F,Y=0;k.cmp(z)!==0;Y++)k=k.redSqr();f(Y<I);var H=this.pow(N,new w(1).iushln(I-Y-1));W=W.redMul(H),N=H.redSqr(),F=F.redMul(N),I=Y}return W},b.prototype.invm=function(R){var O=R._invmp(this.m);return O.negative!==0?(O.negative=0,this.imod(O).redNeg()):this.imod(O)},b.prototype.pow=function(R,O){if(O.isZero())return new w(1).toRed(this);if(O.cmpn(1)===0)return R.clone();var D=4,B=new Array(1<<D);B[0]=new w(1).toRed(this),B[1]=R;for(var G=2;G<B.length;G++)B[G]=this.mul(B[G-1],R);var z=B[0],X=0,U=0,V=O.bitLength()%26;for(V===0&&(V=26),G=O.length-1;G>=0;G--){for(var N=O.words[G],W=V-1;W>=0;W--){var F=N>>W&1;if(z!==B[0]&&(z=this.sqr(z)),F===0&&X===0){U=0;continue}X<<=1,X|=F,U++,!(U!==D&&(G!==0||W!==0))&&(z=this.mul(z,B[X]),U=0,X=0)}V=26}return z},b.prototype.convertTo=function(R){var O=R.umod(this.m);return O===R?O.clone():O},b.prototype.convertFrom=function(R){var O=R.clone();return O.red=null,O},w.mont=function(R){return new A(R)};function A(L){b.call(this,L),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new w(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}C(A,b),A.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},A.prototype.convertFrom=function(R){var O=this.imod(R.mul(this.rinv));return O.red=null,O},A.prototype.imul=function(R,O){if(R.isZero()||O.isZero())return R.words[0]=0,R.length=1,R;var D=R.imul(O),B=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=D.isub(B).iushrn(this.shift),z=G;return G.cmp(this.m)>=0?z=G.isub(this.m):G.cmpn(0)<0&&(z=G.iadd(this.m)),z._forceRed(this)},A.prototype.mul=function(R,O){if(R.isZero()||O.isZero())return new w(0)._forceRed(this);var D=R.mul(O),B=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=D.isub(B).iushrn(this.shift),z=G;return G.cmp(this.m)>=0?z=G.isub(this.m):G.cmpn(0)<0&&(z=G.iadd(this.m)),z._forceRed(this)},A.prototype.invm=function(R){var O=this.imod(R._invmp(this.m).mul(this.r2));return O._forceRed(this)}})(s,Su)})(yp);const m1=yp.exports,g1="logger/5.7.0";let Vd=!1,Ud=!1;const po={debug:1,default:2,info:2,warning:3,error:4,off:5};let zd=po.default,Oh=null;function y1(){try{const s=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{s.push(t)}}),s.length)throw new Error("missing "+s.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(s){return s.message}return null}const Xd=y1();var tu;(function(s){s.DEBUG="DEBUG",s.INFO="INFO",s.WARNING="WARNING",s.ERROR="ERROR",s.OFF="OFF"})(tu||(tu={}));var gi;(function(s){s.UNKNOWN_ERROR="UNKNOWN_ERROR",s.NOT_IMPLEMENTED="NOT_IMPLEMENTED",s.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",s.NETWORK_ERROR="NETWORK_ERROR",s.SERVER_ERROR="SERVER_ERROR",s.TIMEOUT="TIMEOUT",s.BUFFER_OVERRUN="BUFFER_OVERRUN",s.NUMERIC_FAULT="NUMERIC_FAULT",s.MISSING_NEW="MISSING_NEW",s.INVALID_ARGUMENT="INVALID_ARGUMENT",s.MISSING_ARGUMENT="MISSING_ARGUMENT",s.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",s.CALL_EXCEPTION="CALL_EXCEPTION",s.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",s.NONCE_EXPIRED="NONCE_EXPIRED",s.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",s.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",s.TRANSACTION_REPLACED="TRANSACTION_REPLACED",s.ACTION_REJECTED="ACTION_REJECTED"})(gi||(gi={}));const Yd="0123456789abcdef";class lt{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,i){const f=t.toLowerCase();po[f]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(zd>po[f])&&console.log.apply(console,i)}debug(...t){this._log(lt.levels.DEBUG,t)}info(...t){this._log(lt.levels.INFO,t)}warn(...t){this._log(lt.levels.WARNING,t)}makeError(t,i,f){if(Ud)return this.makeError("censored error",i,{});i||(i=lt.errors.UNKNOWN_ERROR),f||(f={});const C=[];Object.keys(f).forEach(e=>{const u=f[e];try{if(u instanceof Uint8Array){let y="";for(let d=0;d<u.length;d++)y+=Yd[u[d]>>4],y+=Yd[u[d]&15];C.push(e+"=Uint8Array(0x"+y+")")}else C.push(e+"="+JSON.stringify(u))}catch{C.push(e+"="+JSON.stringify(f[e].toString()))}}),C.push(`code=${i}`),C.push(`version=${this.version}`);const w=t;let a="";switch(i){case gi.NUMERIC_FAULT:{a="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":a+="-"+e;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case gi.CALL_EXCEPTION:case gi.INSUFFICIENT_FUNDS:case gi.MISSING_NEW:case gi.NONCE_EXPIRED:case gi.REPLACEMENT_UNDERPRICED:case gi.TRANSACTION_REPLACED:case gi.UNPREDICTABLE_GAS_LIMIT:a=i;break}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),C.length&&(t+=" ("+C.join(", ")+")");const T=new Error(t);return T.reason=w,T.code=i,Object.keys(f).forEach(function(e){T[e]=f[e]}),T}throwError(t,i,f){throw this.makeError(t,i,f)}throwArgumentError(t,i,f){return this.throwError(t,lt.errors.INVALID_ARGUMENT,{argument:i,value:f})}assert(t,i,f,C){t||this.throwError(i,f,C)}assertArgument(t,i,f,C){t||this.throwArgumentError(i,f,C)}checkNormalize(t){Xd&&this.throwError("platform missing String.prototype.normalize",lt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Xd})}checkSafeUint53(t,i){typeof t=="number"&&(i==null&&(i="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(i,lt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(i,lt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,i,f){f?f=": "+f:f="",t<i&&this.throwError("missing argument"+f,lt.errors.MISSING_ARGUMENT,{count:t,expectedCount:i}),t>i&&this.throwError("too many arguments"+f,lt.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:i})}checkNew(t,i){(t===Object||t==null)&&this.throwError("missing new",lt.errors.MISSING_NEW,{name:i.name})}checkAbstract(t,i){t===i?this.throwError("cannot instantiate abstract class "+JSON.stringify(i.name)+" directly; use a sub-class",lt.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",lt.errors.MISSING_NEW,{name:i.name})}static globalLogger(){return Oh||(Oh=new lt(g1)),Oh}static setCensorship(t,i){if(!t&&i&&this.globalLogger().throwError("cannot permanently disable censorship",lt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Vd){if(!t)return;this.globalLogger().throwError("error censorship permanent",lt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ud=!!t,Vd=!!i}static setLogLevel(t){const i=po[t.toLowerCase()];if(i==null){lt.globalLogger().warn("invalid log level - "+t);return}zd=i}static from(t){return new lt(t)}}lt.errors=gi;lt.levels=tu;const x1="bytes/5.7.0",ss=new lt(x1);function xp(s){return!!s.toHexString}function Gn(s){return s.slice||(s.slice=function(){const t=Array.prototype.slice.call(arguments);return Gn(new Uint8Array(Array.prototype.slice.apply(s,t)))}),s}function T1(s){return $e(s)&&!(s.length%2)||zo(s)}function Wd(s){return typeof s=="number"&&s==s&&s%1===0}function zo(s){if(s==null)return!1;if(s.constructor===Uint8Array)return!0;if(typeof s=="string"||!Wd(s.length)||s.length<0)return!1;for(let t=0;t<s.length;t++){const i=s[t];if(!Wd(i)||i<0||i>=256)return!1}return!0}function we(s,t){if(t||(t={}),typeof s=="number"){ss.checkSafeUint53(s,"invalid arrayify value");const i=[];for(;s;)i.unshift(s&255),s=parseInt(String(s/256));return i.length===0&&i.push(0),Gn(new Uint8Array(i))}if(t.allowMissingPrefix&&typeof s=="string"&&s.substring(0,2)!=="0x"&&(s="0x"+s),xp(s)&&(s=s.toHexString()),$e(s)){let i=s.substring(2);i.length%2&&(t.hexPad==="left"?i="0"+i:t.hexPad==="right"?i+="0":ss.throwArgumentError("hex data is odd-length","value",s));const f=[];for(let C=0;C<i.length;C+=2)f.push(parseInt(i.substring(C,C+2),16));return Gn(new Uint8Array(f))}return zo(s)?Gn(new Uint8Array(s)):ss.throwArgumentError("invalid arrayify value","value",s)}function _r(s){const t=s.map(C=>we(C)),i=t.reduce((C,w)=>C+w.length,0),f=new Uint8Array(i);return t.reduce((C,w)=>(f.set(w,C),C+w.length),0),Gn(f)}function C1(s){let t=we(s);if(t.length===0)return t;let i=0;for(;i<t.length&&t[i]===0;)i++;return i&&(t=t.slice(i)),t}function $e(s,t){return!(typeof s!="string"||!s.match(/^0x[0-9A-Fa-f]*$/)||t&&s.length!==2+2*t)}const Lh="0123456789abcdef";function le(s,t){if(t||(t={}),typeof s=="number"){ss.checkSafeUint53(s,"invalid hexlify value");let i="";for(;s;)i=Lh[s&15]+i,s=Math.floor(s/16);return i.length?(i.length%2&&(i="0"+i),"0x"+i):"0x00"}if(typeof s=="bigint")return s=s.toString(16),s.length%2?"0x0"+s:"0x"+s;if(t.allowMissingPrefix&&typeof s=="string"&&s.substring(0,2)!=="0x"&&(s="0x"+s),xp(s))return s.toHexString();if($e(s))return s.length%2&&(t.hexPad==="left"?s="0x0"+s.substring(2):t.hexPad==="right"?s+="0":ss.throwArgumentError("hex data is odd-length","value",s)),s.toLowerCase();if(zo(s)){let i="0x";for(let f=0;f<s.length;f++){let C=s[f];i+=Lh[(C&240)>>4]+Lh[C&15]}return i}return ss.throwArgumentError("invalid hexlify value","value",s)}function S1(s){if(typeof s!="string")s=le(s);else if(!$e(s)||s.length%2)return null;return(s.length-2)/2}function Tp(s,t,i){return typeof s!="string"?s=le(s):(!$e(s)||s.length%2)&&ss.throwArgumentError("invalid hexData","value",s),t=2+2*t,i!=null?"0x"+s.substring(t,2+2*i):"0x"+s.substring(t)}function E1(s){let t="0x";return s.forEach(i=>{t+=le(i).substring(2)}),t}function Cp(s,t){for(typeof s!="string"?s=le(s):$e(s)||ss.throwArgumentError("invalid hex string","value",s),s.length>2*t+2&&ss.throwArgumentError("value out of range","value",arguments[1]);s.length<2*t+2;)s="0x0"+s.substring(2);return s}const P1="bignumber/5.7.0";var Eo=m1.BN;const qi=new lt(P1),Fh={},Hd=9007199254740991;let $d=!1;class bt{constructor(t,i){t!==Fh&&qi.throwError("cannot call constructor directly; use BigNumber.from",lt.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=i,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return Ve(Et(this).fromTwos(t))}toTwos(t){return Ve(Et(this).toTwos(t))}abs(){return this._hex[0]==="-"?bt.from(this._hex.substring(1)):this}add(t){return Ve(Et(this).add(Et(t)))}sub(t){return Ve(Et(this).sub(Et(t)))}div(t){return bt.from(t).isZero()&&ti("division-by-zero","div"),Ve(Et(this).div(Et(t)))}mul(t){return Ve(Et(this).mul(Et(t)))}mod(t){const i=Et(t);return i.isNeg()&&ti("division-by-zero","mod"),Ve(Et(this).umod(i))}pow(t){const i=Et(t);return i.isNeg()&&ti("negative-power","pow"),Ve(Et(this).pow(i))}and(t){const i=Et(t);return(this.isNegative()||i.isNeg())&&ti("unbound-bitwise-result","and"),Ve(Et(this).and(i))}or(t){const i=Et(t);return(this.isNegative()||i.isNeg())&&ti("unbound-bitwise-result","or"),Ve(Et(this).or(i))}xor(t){const i=Et(t);return(this.isNegative()||i.isNeg())&&ti("unbound-bitwise-result","xor"),Ve(Et(this).xor(i))}mask(t){return(this.isNegative()||t<0)&&ti("negative-width","mask"),Ve(Et(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&ti("negative-width","shl"),Ve(Et(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&ti("negative-width","shr"),Ve(Et(this).shrn(t))}eq(t){return Et(this).eq(Et(t))}lt(t){return Et(this).lt(Et(t))}lte(t){return Et(this).lte(Et(t))}gt(t){return Et(this).gt(Et(t))}gte(t){return Et(this).gte(Et(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Et(this).isZero()}toNumber(){try{return Et(this).toNumber()}catch{ti("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return qi.throwError("this platform does not support BigInt",lt.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?$d||($d=!0,qi.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?qi.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",lt.errors.UNEXPECTED_ARGUMENT,{}):qi.throwError("BigNumber.toString does not accept parameters",lt.errors.UNEXPECTED_ARGUMENT,{})),Et(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof bt)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new bt(Fh,kn(t)):t.match(/^-?[0-9]+$/)?new bt(Fh,kn(new Eo(t))):qi.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&ti("underflow","BigNumber.from",t),(t>=Hd||t<=-Hd)&&ti("overflow","BigNumber.from",t),bt.from(String(t));const i=t;if(typeof i=="bigint")return bt.from(i.toString());if(zo(i))return bt.from(le(i));if(i)if(i.toHexString){const f=i.toHexString();if(typeof f=="string")return bt.from(f)}else{let f=i._hex;if(f==null&&i.type==="BigNumber"&&(f=i.hex),typeof f=="string"&&($e(f)||f[0]==="-"&&$e(f.substring(1))))return bt.from(f)}return qi.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}}function kn(s){if(typeof s!="string")return kn(s.toString(16));if(s[0]==="-")return s=s.substring(1),s[0]==="-"&&qi.throwArgumentError("invalid hex","value",s),s=kn(s),s==="0x00"?s:"-"+s;if(s.substring(0,2)!=="0x"&&(s="0x"+s),s==="0x")return"0x00";for(s.length%2&&(s="0x0"+s.substring(2));s.length>4&&s.substring(0,4)==="0x00";)s="0x"+s.substring(4);return s}function Ve(s){return bt.from(kn(s))}function Et(s){const t=bt.from(s).toHexString();return t[0]==="-"?new Eo("-"+t.substring(3),16):new Eo(t.substring(2),16)}function ti(s,t,i){const f={fault:s,operation:t};return i!=null&&(f.value=i),qi.throwError(s,lt.errors.NUMERIC_FAULT,f)}function w1(s){return new Eo(s,36).toString(16)}const M1="properties/5.7.0";var b1=globalThis&&globalThis.__awaiter||function(s,t,i,f){function C(w){return w instanceof i?w:new i(function(a){a(w)})}return new(i||(i=Promise))(function(w,a){function T(y){try{u(f.next(y))}catch(d){a(d)}}function e(y){try{u(f.throw(y))}catch(d){a(d)}}function u(y){y.done?w(y.value):C(y.value).then(T,e)}u((f=f.apply(s,t||[])).next())})};const Sp=new lt(M1);function vt(s,t,i){Object.defineProperty(s,t,{enumerable:!0,value:i,writable:!1})}function In(s,t){for(let i=0;i<32;i++){if(s[t])return s[t];if(!s.prototype||typeof s.prototype!="object")break;s=Object.getPrototypeOf(s.prototype).constructor}return null}function Rs(s){return b1(this,void 0,void 0,function*(){const t=Object.keys(s).map(f=>{const C=s[f];return Promise.resolve(C).then(w=>({key:f,value:w}))});return(yield Promise.all(t)).reduce((f,C)=>(f[C.key]=C.value,f),{})})}function nn(s){const t={};for(const i in s)t[i]=s[i];return t}const A1={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Ep(s){if(s==null||A1[typeof s])return!0;if(Array.isArray(s)||typeof s=="object"){if(!Object.isFrozen(s))return!1;const t=Object.keys(s);for(let i=0;i<t.length;i++){let f=null;try{f=s[t[i]]}catch{continue}if(!Ep(f))return!1}return!0}return Sp.throwArgumentError(`Cannot deepCopy ${typeof s}`,"object",s)}function R1(s){if(Ep(s))return s;if(Array.isArray(s))return Object.freeze(s.map(t=>Vn(t)));if(typeof s=="object"){const t={};for(const i in s){const f=s[i];f!==void 0&&vt(t,i,Vn(f))}return t}return Sp.throwArgumentError(`Cannot deepCopy ${typeof s}`,"object",s)}function Vn(s){return R1(s)}class Xo{constructor(t){for(const i in t)this[i]=Vn(t[i])}}const ea="abi/5.7.0",wt=new lt(ea),fr={};let Kd={calldata:!0,memory:!0,storage:!0},O1={calldata:!0,memory:!0};function ba(s,t){if(s==="bytes"||s==="string"){if(Kd[t])return!0}else if(s==="address"){if(t==="payable")return!0}else if((s.indexOf("[")>=0||s==="tuple")&&O1[t])return!0;return(Kd[t]||t==="payable")&&wt.throwArgumentError("invalid modifier","name",t),!1}function L1(s,t){let i=s;function f(T){wt.throwArgumentError(`unexpected character at position ${T}`,"param",s)}s=s.replace(/\s/g," ");function C(T){let e={type:"",name:"",parent:T,state:{allowType:!0}};return t&&(e.indexed=!1),e}let w={type:"",name:"",state:{allowType:!0}},a=w;for(let T=0;T<s.length;T++){let e=s[T];switch(e){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||f(T),a.state.allowType=!1,a.type=$r(a.type),a.components=[C(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(t||f(T),a.indexed=!0,a.name=""),ba(a.type,a.name)&&(a.name=""),a.type=$r(a.type);let u=a;a=a.parent,a||f(T),delete u.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(t||f(T),a.indexed=!0,a.name=""),ba(a.type,a.name)&&(a.name=""),a.type=$r(a.type);let y=C(a.parent);a.parent.components.push(y),delete a.parent,a=y;break;case" ":a.state.allowType&&a.type!==""&&(a.type=$r(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(t||f(T),a.indexed&&f(T),a.indexed=!0,a.name=""):ba(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||f(T),a.type+=e,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||f(T),a.type+=e,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=e,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=e,delete a.state.allowArray):a.state.readArray?a.type+=e:f(T)}}return a.parent&&wt.throwArgumentError("unexpected eof","param",s),delete w.state,a.name==="indexed"?(t||f(i.length-7),a.indexed&&f(i.length-7),a.indexed=!0,a.name=""):ba(a.type,a.name)&&(a.name=""),w.type=$r(w.type),w}function mo(s,t){for(let i in t)vt(s,i,t[i])}const Dt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),F1=new RegExp(/^(.*)\[([0-9]*)\]$/);class Pe{constructor(t,i){t!==fr&&wt.throwError("use fromString",lt.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),mo(this,i);let f=this.type.match(F1);f?mo(this,{arrayLength:parseInt(f[2]||"-1"),arrayChildren:Pe.fromObject({type:f[1],components:this.components}),baseType:"array"}):mo(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=Dt.sighash),Dt[t]||wt.throwArgumentError("invalid format type","format",t),t===Dt.json){let f={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(f.indexed=this.indexed),this.components&&(f.components=this.components.map(C=>JSON.parse(C.format(t)))),JSON.stringify(f)}let i="";return this.baseType==="array"?(i+=this.arrayChildren.format(t),i+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(t!==Dt.sighash&&(i+=this.type),i+="("+this.components.map(f=>f.format(t)).join(t===Dt.full?", ":",")+")"):i+=this.type,t!==Dt.sighash&&(this.indexed===!0&&(i+=" indexed"),t===Dt.full&&this.name&&(i+=" "+this.name)),i}static from(t,i){return typeof t=="string"?Pe.fromString(t,i):Pe.fromObject(t)}static fromObject(t){return Pe.isParamType(t)?t:new Pe(fr,{name:t.name||null,type:$r(t.type),indexed:t.indexed==null?null:!!t.indexed,components:t.components?t.components.map(Pe.fromObject):null})}static fromString(t,i){function f(C){return Pe.fromObject({name:C.name,type:C.type,indexed:C.indexed,components:C.components})}return f(L1(t,!!i))}static isParamType(t){return!!(t!=null&&t._isParamType)}}function Un(s,t){return B1(s).map(i=>Pe.fromString(i,t))}class es{constructor(t,i){t!==fr&&wt.throwError("use a static from method",lt.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),mo(this,i),this._isFragment=!0,Object.freeze(this)}static from(t){return es.isFragment(t)?t:typeof t=="string"?es.fromString(t):es.fromObject(t)}static fromObject(t){if(es.isFragment(t))return t;switch(t.type){case"function":return Ni.fromObject(t);case"event":return ts.fromObject(t);case"constructor":return Gi.fromObject(t);case"error":return Ms.fromObject(t);case"fallback":case"receive":return null}return wt.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return t=t.replace(/\s/g," "),t=t.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),t=t.trim(),t.split(" ")[0]==="event"?ts.fromString(t.substring(5).trim()):t.split(" ")[0]==="function"?Ni.fromString(t.substring(8).trim()):t.split("(")[0].trim()==="constructor"?Gi.fromString(t.trim()):t.split(" ")[0]==="error"?Ms.fromString(t.substring(5).trim()):wt.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!!(t&&t._isFragment)}}class ts extends es{format(t){if(t||(t=Dt.sighash),Dt[t]||wt.throwArgumentError("invalid format type","format",t),t===Dt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(f=>JSON.parse(f.format(t)))});let i="";return t!==Dt.sighash&&(i+="event "),i+=this.name+"("+this.inputs.map(f=>f.format(t)).join(t===Dt.full?", ":",")+") ",t!==Dt.sighash&&this.anonymous&&(i+="anonymous "),i.trim()}static from(t){return typeof t=="string"?ts.fromString(t):ts.fromObject(t)}static fromObject(t){if(ts.isEventFragment(t))return t;t.type!=="event"&&wt.throwArgumentError("invalid event object","value",t);const i={name:zn(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(Pe.fromObject):[],type:"event"};return new ts(fr,i)}static fromString(t){let i=t.match(Xn);i||wt.throwArgumentError("invalid event string","value",t);let f=!1;return i[3].split(" ").forEach(C=>{switch(C.trim()){case"anonymous":f=!0;break;case"":break;default:wt.warn("unknown modifier: "+C)}}),ts.fromObject({name:i[1].trim(),anonymous:f,inputs:Un(i[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&t.type==="event"}}function Pp(s,t){t.gas=null;let i=s.split("@");return i.length!==1?(i.length>2&&wt.throwArgumentError("invalid human-readable ABI signature","value",s),i[1].match(/^[0-9]+$/)||wt.throwArgumentError("invalid human-readable ABI signature gas","value",s),t.gas=bt.from(i[1]),i[0]):s}function wp(s,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",s.split(" ").forEach(i=>{switch(i.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+i)}})}function Mp(s){let t={constant:!1,payable:!0,stateMutability:"payable"};return s.stateMutability!=null?(t.stateMutability=s.stateMutability,t.constant=t.stateMutability==="view"||t.stateMutability==="pure",s.constant!=null&&!!s.constant!==t.constant&&wt.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",s),t.payable=t.stateMutability==="payable",s.payable!=null&&!!s.payable!==t.payable&&wt.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",s)):s.payable!=null?(t.payable=!!s.payable,s.constant==null&&!t.payable&&s.type!=="constructor"&&wt.throwArgumentError("unable to determine stateMutability","value",s),t.constant=!!s.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&wt.throwArgumentError("cannot have constant payable function","value",s)):s.constant!=null?(t.constant=!!s.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):s.type!=="constructor"&&wt.throwArgumentError("unable to determine stateMutability","value",s),t}class Gi extends es{format(t){if(t||(t=Dt.sighash),Dt[t]||wt.throwArgumentError("invalid format type","format",t),t===Dt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(f=>JSON.parse(f.format(t)))});t===Dt.sighash&&wt.throwError("cannot format a constructor for sighash",lt.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let i="constructor("+this.inputs.map(f=>f.format(t)).join(t===Dt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(i+=this.stateMutability+" "),i.trim()}static from(t){return typeof t=="string"?Gi.fromString(t):Gi.fromObject(t)}static fromObject(t){if(Gi.isConstructorFragment(t))return t;t.type!=="constructor"&&wt.throwArgumentError("invalid constructor object","value",t);let i=Mp(t);i.constant&&wt.throwArgumentError("constructor cannot be constant","value",t);const f={name:null,type:t.type,inputs:t.inputs?t.inputs.map(Pe.fromObject):[],payable:i.payable,stateMutability:i.stateMutability,gas:t.gas?bt.from(t.gas):null};return new Gi(fr,f)}static fromString(t){let i={type:"constructor"};t=Pp(t,i);let f=t.match(Xn);return(!f||f[1].trim()!=="constructor")&&wt.throwArgumentError("invalid constructor string","value",t),i.inputs=Un(f[2].trim(),!1),wp(f[3].trim(),i),Gi.fromObject(i)}static isConstructorFragment(t){return t&&t._isFragment&&t.type==="constructor"}}class Ni extends Gi{format(t){if(t||(t=Dt.sighash),Dt[t]||wt.throwArgumentError("invalid format type","format",t),t===Dt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(f=>JSON.parse(f.format(t))),outputs:this.outputs.map(f=>JSON.parse(f.format(t)))});let i="";return t!==Dt.sighash&&(i+="function "),i+=this.name+"("+this.inputs.map(f=>f.format(t)).join(t===Dt.full?", ":",")+") ",t!==Dt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(i+=this.stateMutability+" "):this.constant&&(i+="view "),this.outputs&&this.outputs.length&&(i+="returns ("+this.outputs.map(f=>f.format(t)).join(", ")+") "),this.gas!=null&&(i+="@"+this.gas.toString()+" ")),i.trim()}static from(t){return typeof t=="string"?Ni.fromString(t):Ni.fromObject(t)}static fromObject(t){if(Ni.isFunctionFragment(t))return t;t.type!=="function"&&wt.throwArgumentError("invalid function object","value",t);let i=Mp(t);const f={type:t.type,name:zn(t.name),constant:i.constant,inputs:t.inputs?t.inputs.map(Pe.fromObject):[],outputs:t.outputs?t.outputs.map(Pe.fromObject):[],payable:i.payable,stateMutability:i.stateMutability,gas:t.gas?bt.from(t.gas):null};return new Ni(fr,f)}static fromString(t){let i={type:"function"};t=Pp(t,i);let f=t.split(" returns ");f.length>2&&wt.throwArgumentError("invalid function string","value",t);let C=f[0].match(Xn);if(C||wt.throwArgumentError("invalid function signature","value",t),i.name=C[1].trim(),i.name&&zn(i.name),i.inputs=Un(C[2],!1),wp(C[3].trim(),i),f.length>1){let w=f[1].match(Xn);(w[1].trim()!=""||w[3].trim()!="")&&wt.throwArgumentError("unexpected tokens","value",t),i.outputs=Un(w[2],!1)}else i.outputs=[];return Ni.fromObject(i)}static isFunctionFragment(t){return t&&t._isFragment&&t.type==="function"}}function jd(s){const t=s.format();return(t==="Error(string)"||t==="Panic(uint256)")&&wt.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",s),s}class Ms extends es{format(t){if(t||(t=Dt.sighash),Dt[t]||wt.throwArgumentError("invalid format type","format",t),t===Dt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(f=>JSON.parse(f.format(t)))});let i="";return t!==Dt.sighash&&(i+="error "),i+=this.name+"("+this.inputs.map(f=>f.format(t)).join(t===Dt.full?", ":",")+") ",i.trim()}static from(t){return typeof t=="string"?Ms.fromString(t):Ms.fromObject(t)}static fromObject(t){if(Ms.isErrorFragment(t))return t;t.type!=="error"&&wt.throwArgumentError("invalid error object","value",t);const i={type:t.type,name:zn(t.name),inputs:t.inputs?t.inputs.map(Pe.fromObject):[]};return jd(new Ms(fr,i))}static fromString(t){let i={type:"error"},f=t.match(Xn);return f||wt.throwArgumentError("invalid error signature","value",t),i.name=f[1].trim(),i.name&&zn(i.name),i.inputs=Un(f[2],!1),jd(Ms.fromObject(i))}static isErrorFragment(t){return t&&t._isFragment&&t.type==="error"}}function $r(s){return s.match(/^uint($|[^1-9])/)?s="uint256"+s.substring(4):s.match(/^int($|[^1-9])/)&&(s="int256"+s.substring(3)),s}const D1=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function zn(s){return(!s||!s.match(D1))&&wt.throwArgumentError(`invalid identifier "${s}"`,"value",s),s}const Xn=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function B1(s){s=s.trim();let t=[],i="",f=0;for(let C=0;C<s.length;C++){let w=s[C];w===","&&f===0?(t.push(i),i=""):(i+=w,w==="("?f++:w===")"&&(f--,f===-1&&wt.throwArgumentError("unbalanced parenthesis","value",s)))}return i&&t.push(i),t}const Ru=new lt(ea);function I1(s){const t=[],i=function(f,C){if(!!Array.isArray(C))for(let w in C){const a=f.slice();a.push(w);try{i(a,C[w])}catch(T){t.push({path:a,error:T})}}};return i([],s),t}class ls{constructor(t,i,f,C){this.name=t,this.type=i,this.localName=f,this.dynamic=C}_throwError(t,i){Ru.throwArgumentError(t,this.localName,i)}}class eu{constructor(t){vt(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return E1(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(_r(t._data))}writeBytes(t){let i=we(t);const f=i.length%this.wordSize;return f&&(i=_r([i,this._padding.slice(f)])),this._writeData(i)}_getValue(t){let i=we(bt.from(t));return i.length>this.wordSize&&Ru.throwError("value out-of-bounds",lt.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:i.length}),i.length%this.wordSize&&(i=_r([this._padding.slice(i.length%this.wordSize),i])),i}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,i=>{this._data[t]=this._getValue(i)}}}class Po{constructor(t,i,f,C){vt(this,"_data",we(t)),vt(this,"wordSize",i||32),vt(this,"_coerceFunc",f),vt(this,"allowLoose",C),this._offset=0}get data(){return le(this._data)}get consumed(){return this._offset}static coerce(t,i){let f=t.match("^u?int([0-9]+)$");return f&&parseInt(f[1])<=48&&(i=i.toNumber()),i}coerce(t,i){return this._coerceFunc?this._coerceFunc(t,i):Po.coerce(t,i)}_peekBytes(t,i,f){let C=Math.ceil(i/this.wordSize)*this.wordSize;return this._offset+C>this._data.length&&(this.allowLoose&&f&&this._offset+i<=this._data.length?C=i:Ru.throwError("data out-of-bounds",lt.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+C})),this._data.slice(this._offset,this._offset+C)}subReader(t){return new Po(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,i){let f=this._peekBytes(0,t,!!i);return this._offset+=f.length,f.slice(0,t)}readValue(){return bt.from(this.readBytes(this.wordSize))}}var bp={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(s){(function(){var t="input is invalid type",i="finalize already called",f=typeof window=="object",C=f?window:{};C.JS_SHA3_NO_WINDOW&&(f=!1);var w=!f&&typeof self=="object",a=!C.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?C=Su:w&&(C=self);var T=!C.JS_SHA3_NO_COMMON_JS&&!0&&s.exports,e=!C.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),y=[31,7936,2031616,520093696],d=[4,1024,262144,67108864],l=[1,256,65536,16777216],h=[6,1536,393216,100663296],r=[0,8,16,24],n=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],v=[224,256,384,512],o=[128,256],c=["hex","buffer","arrayBuffer","array","digest"],m={128:168,256:136};(C.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(F){return Object.prototype.toString.call(F)==="[object Array]"}),e&&(C.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(F){return typeof F=="object"&&F.buffer&&F.buffer.constructor===ArrayBuffer});for(var p=function(F,I,k){return function(Y){return new V(F,I,F).update(Y)[k]()}},g=function(F,I,k){return function(Y,H){return new V(F,I,H).update(Y)[k]()}},x=function(F,I,k){return function(Y,H,K,j){return R["cshake"+F].update(Y,H,K,j)[k]()}},E=function(F,I,k){return function(Y,H,K,j){return R["kmac"+F].update(Y,H,K,j)[k]()}},P=function(F,I,k,Y){for(var H=0;H<c.length;++H){var K=c[H];F[K]=I(k,Y,K)}return F},S=function(F,I){var k=p(F,I,"hex");return k.create=function(){return new V(F,I,F)},k.update=function(Y){return k.create().update(Y)},P(k,p,F,I)},M=function(F,I){var k=g(F,I,"hex");return k.create=function(Y){return new V(F,I,Y)},k.update=function(Y,H){return k.create(H).update(Y)},P(k,g,F,I)},b=function(F,I){var k=m[F],Y=x(F,I,"hex");return Y.create=function(H,K,j){return!K&&!j?R["shake"+F].create(H):new V(F,I,H).bytepad([K,j],k)},Y.update=function(H,K,j,J){return Y.create(K,j,J).update(H)},P(Y,x,F,I)},A=function(F,I){var k=m[F],Y=E(F,I,"hex");return Y.create=function(H,K,j){return new N(F,I,K).bytepad(["KMAC",j],k).bytepad([H],k)},Y.update=function(H,K,j,J){return Y.create(H,j,J).update(K)},P(Y,E,F,I)},L=[{name:"keccak",padding:l,bits:v,createMethod:S},{name:"sha3",padding:h,bits:v,createMethod:S},{name:"shake",padding:y,bits:o,createMethod:M},{name:"cshake",padding:d,bits:o,createMethod:b},{name:"kmac",padding:d,bits:o,createMethod:A}],R={},O=[],D=0;D<L.length;++D)for(var B=L[D],G=B.bits,z=0;z<G.length;++z){var X=B.name+"_"+G[z];if(O.push(X),R[X]=B.createMethod(G[z],B.padding),B.name!=="sha3"){var U=B.name+G[z];O.push(U),R[U]=R[X]}}function V(F,I,k){this.blocks=[],this.s=[],this.padding=I,this.outputBits=k,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(F<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=k>>5,this.extraBytes=(k&31)>>3;for(var Y=0;Y<50;++Y)this.s[Y]=0}V.prototype.update=function(F){if(this.finalized)throw new Error(i);var I,k=typeof F;if(k!=="string"){if(k==="object"){if(F===null)throw new Error(t);if(e&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!e||!ArrayBuffer.isView(F)))throw new Error(t)}else throw new Error(t);I=!0}for(var Y=this.blocks,H=this.byteCount,K=F.length,j=this.blockCount,J=0,Q=this.s,Z,q;J<K;){if(this.reset)for(this.reset=!1,Y[0]=this.block,Z=1;Z<j+1;++Z)Y[Z]=0;if(I)for(Z=this.start;J<K&&Z<H;++J)Y[Z>>2]|=F[J]<<r[Z++&3];else for(Z=this.start;J<K&&Z<H;++J)q=F.charCodeAt(J),q<128?Y[Z>>2]|=q<<r[Z++&3]:q<2048?(Y[Z>>2]|=(192|q>>6)<<r[Z++&3],Y[Z>>2]|=(128|q&63)<<r[Z++&3]):q<55296||q>=57344?(Y[Z>>2]|=(224|q>>12)<<r[Z++&3],Y[Z>>2]|=(128|q>>6&63)<<r[Z++&3],Y[Z>>2]|=(128|q&63)<<r[Z++&3]):(q=65536+((q&1023)<<10|F.charCodeAt(++J)&1023),Y[Z>>2]|=(240|q>>18)<<r[Z++&3],Y[Z>>2]|=(128|q>>12&63)<<r[Z++&3],Y[Z>>2]|=(128|q>>6&63)<<r[Z++&3],Y[Z>>2]|=(128|q&63)<<r[Z++&3]);if(this.lastByteIndex=Z,Z>=H){for(this.start=Z-H,this.block=Y[j],Z=0;Z<j;++Z)Q[Z]^=Y[Z];W(Q),this.reset=!0}else this.start=Z}return this},V.prototype.encode=function(F,I){var k=F&255,Y=1,H=[k];for(F=F>>8,k=F&255;k>0;)H.unshift(k),F=F>>8,k=F&255,++Y;return I?H.push(Y):H.unshift(Y),this.update(H),H.length},V.prototype.encodeString=function(F){var I,k=typeof F;if(k!=="string"){if(k==="object"){if(F===null)throw new Error(t);if(e&&F.constructor===ArrayBuffer)F=new Uint8Array(F);else if(!Array.isArray(F)&&(!e||!ArrayBuffer.isView(F)))throw new Error(t)}else throw new Error(t);I=!0}var Y=0,H=F.length;if(I)Y=H;else for(var K=0;K<F.length;++K){var j=F.charCodeAt(K);j<128?Y+=1:j<2048?Y+=2:j<55296||j>=57344?Y+=3:(j=65536+((j&1023)<<10|F.charCodeAt(++K)&1023),Y+=4)}return Y+=this.encode(Y*8),this.update(F),Y},V.prototype.bytepad=function(F,I){for(var k=this.encode(I),Y=0;Y<F.length;++Y)k+=this.encodeString(F[Y]);var H=I-k%I,K=[];return K.length=H,this.update(K),this},V.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var F=this.blocks,I=this.lastByteIndex,k=this.blockCount,Y=this.s;if(F[I>>2]|=this.padding[I&3],this.lastByteIndex===this.byteCount)for(F[0]=F[k],I=1;I<k+1;++I)F[I]=0;for(F[k-1]|=2147483648,I=0;I<k;++I)Y[I]^=F[I];W(Y)}},V.prototype.toString=V.prototype.hex=function(){this.finalize();for(var F=this.blockCount,I=this.s,k=this.outputBlocks,Y=this.extraBytes,H=0,K=0,j="",J;K<k;){for(H=0;H<F&&K<k;++H,++K)J=I[H],j+=u[J>>4&15]+u[J&15]+u[J>>12&15]+u[J>>8&15]+u[J>>20&15]+u[J>>16&15]+u[J>>28&15]+u[J>>24&15];K%F===0&&(W(I),H=0)}return Y&&(J=I[H],j+=u[J>>4&15]+u[J&15],Y>1&&(j+=u[J>>12&15]+u[J>>8&15]),Y>2&&(j+=u[J>>20&15]+u[J>>16&15])),j},V.prototype.arrayBuffer=function(){this.finalize();var F=this.blockCount,I=this.s,k=this.outputBlocks,Y=this.extraBytes,H=0,K=0,j=this.outputBits>>3,J;Y?J=new ArrayBuffer(k+1<<2):J=new ArrayBuffer(j);for(var Q=new Uint32Array(J);K<k;){for(H=0;H<F&&K<k;++H,++K)Q[K]=I[H];K%F===0&&W(I)}return Y&&(Q[H]=I[H],J=J.slice(0,j)),J},V.prototype.buffer=V.prototype.arrayBuffer,V.prototype.digest=V.prototype.array=function(){this.finalize();for(var F=this.blockCount,I=this.s,k=this.outputBlocks,Y=this.extraBytes,H=0,K=0,j=[],J,Q;K<k;){for(H=0;H<F&&K<k;++H,++K)J=K<<2,Q=I[H],j[J]=Q&255,j[J+1]=Q>>8&255,j[J+2]=Q>>16&255,j[J+3]=Q>>24&255;K%F===0&&W(I)}return Y&&(J=K<<2,Q=I[H],j[J]=Q&255,Y>1&&(j[J+1]=Q>>8&255),Y>2&&(j[J+2]=Q>>16&255)),j};function N(F,I,k){V.call(this,F,I,k)}N.prototype=new V,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),V.prototype.finalize.call(this)};var W=function(F){var I,k,Y,H,K,j,J,Q,Z,q,et,tt,it,ut,ot,ht,st,at,nt,gt,dt,mt,Ft,pt,ft,Mt,xt,Tt,zt,Ct,At,Le,Rt,Ot,Fe,Xt,Yt,Vs,Wt,Ht,Us,$t,Kt,zs,jt,Jt,Xs,Zt,Qt,Ys,qt,_t,Ws,te,ee,Hs,ie,se,cs,vs,ps,ms,gs;for(Y=0;Y<48;Y+=2)H=F[0]^F[10]^F[20]^F[30]^F[40],K=F[1]^F[11]^F[21]^F[31]^F[41],j=F[2]^F[12]^F[22]^F[32]^F[42],J=F[3]^F[13]^F[23]^F[33]^F[43],Q=F[4]^F[14]^F[24]^F[34]^F[44],Z=F[5]^F[15]^F[25]^F[35]^F[45],q=F[6]^F[16]^F[26]^F[36]^F[46],et=F[7]^F[17]^F[27]^F[37]^F[47],tt=F[8]^F[18]^F[28]^F[38]^F[48],it=F[9]^F[19]^F[29]^F[39]^F[49],I=tt^(j<<1|J>>>31),k=it^(J<<1|j>>>31),F[0]^=I,F[1]^=k,F[10]^=I,F[11]^=k,F[20]^=I,F[21]^=k,F[30]^=I,F[31]^=k,F[40]^=I,F[41]^=k,I=H^(Q<<1|Z>>>31),k=K^(Z<<1|Q>>>31),F[2]^=I,F[3]^=k,F[12]^=I,F[13]^=k,F[22]^=I,F[23]^=k,F[32]^=I,F[33]^=k,F[42]^=I,F[43]^=k,I=j^(q<<1|et>>>31),k=J^(et<<1|q>>>31),F[4]^=I,F[5]^=k,F[14]^=I,F[15]^=k,F[24]^=I,F[25]^=k,F[34]^=I,F[35]^=k,F[44]^=I,F[45]^=k,I=Q^(tt<<1|it>>>31),k=Z^(it<<1|tt>>>31),F[6]^=I,F[7]^=k,F[16]^=I,F[17]^=k,F[26]^=I,F[27]^=k,F[36]^=I,F[37]^=k,F[46]^=I,F[47]^=k,I=q^(H<<1|K>>>31),k=et^(K<<1|H>>>31),F[8]^=I,F[9]^=k,F[18]^=I,F[19]^=k,F[28]^=I,F[29]^=k,F[38]^=I,F[39]^=k,F[48]^=I,F[49]^=k,ut=F[0],ot=F[1],Jt=F[11]<<4|F[10]>>>28,Xs=F[10]<<4|F[11]>>>28,Tt=F[20]<<3|F[21]>>>29,zt=F[21]<<3|F[20]>>>29,vs=F[31]<<9|F[30]>>>23,ps=F[30]<<9|F[31]>>>23,$t=F[40]<<18|F[41]>>>14,Kt=F[41]<<18|F[40]>>>14,Ot=F[2]<<1|F[3]>>>31,Fe=F[3]<<1|F[2]>>>31,ht=F[13]<<12|F[12]>>>20,st=F[12]<<12|F[13]>>>20,Zt=F[22]<<10|F[23]>>>22,Qt=F[23]<<10|F[22]>>>22,Ct=F[33]<<13|F[32]>>>19,At=F[32]<<13|F[33]>>>19,ms=F[42]<<2|F[43]>>>30,gs=F[43]<<2|F[42]>>>30,te=F[5]<<30|F[4]>>>2,ee=F[4]<<30|F[5]>>>2,Xt=F[14]<<6|F[15]>>>26,Yt=F[15]<<6|F[14]>>>26,at=F[25]<<11|F[24]>>>21,nt=F[24]<<11|F[25]>>>21,Ys=F[34]<<15|F[35]>>>17,qt=F[35]<<15|F[34]>>>17,Le=F[45]<<29|F[44]>>>3,Rt=F[44]<<29|F[45]>>>3,pt=F[6]<<28|F[7]>>>4,ft=F[7]<<28|F[6]>>>4,Hs=F[17]<<23|F[16]>>>9,ie=F[16]<<23|F[17]>>>9,Vs=F[26]<<25|F[27]>>>7,Wt=F[27]<<25|F[26]>>>7,gt=F[36]<<21|F[37]>>>11,dt=F[37]<<21|F[36]>>>11,_t=F[47]<<24|F[46]>>>8,Ws=F[46]<<24|F[47]>>>8,zs=F[8]<<27|F[9]>>>5,jt=F[9]<<27|F[8]>>>5,Mt=F[18]<<20|F[19]>>>12,xt=F[19]<<20|F[18]>>>12,se=F[29]<<7|F[28]>>>25,cs=F[28]<<7|F[29]>>>25,Ht=F[38]<<8|F[39]>>>24,Us=F[39]<<8|F[38]>>>24,mt=F[48]<<14|F[49]>>>18,Ft=F[49]<<14|F[48]>>>18,F[0]=ut^~ht&at,F[1]=ot^~st&nt,F[10]=pt^~Mt&Tt,F[11]=ft^~xt&zt,F[20]=Ot^~Xt&Vs,F[21]=Fe^~Yt&Wt,F[30]=zs^~Jt&Zt,F[31]=jt^~Xs&Qt,F[40]=te^~Hs&se,F[41]=ee^~ie&cs,F[2]=ht^~at&gt,F[3]=st^~nt&dt,F[12]=Mt^~Tt&Ct,F[13]=xt^~zt&At,F[22]=Xt^~Vs&Ht,F[23]=Yt^~Wt&Us,F[32]=Jt^~Zt&Ys,F[33]=Xs^~Qt&qt,F[42]=Hs^~se&vs,F[43]=ie^~cs&ps,F[4]=at^~gt&mt,F[5]=nt^~dt&Ft,F[14]=Tt^~Ct&Le,F[15]=zt^~At&Rt,F[24]=Vs^~Ht&$t,F[25]=Wt^~Us&Kt,F[34]=Zt^~Ys&_t,F[35]=Qt^~qt&Ws,F[44]=se^~vs&ms,F[45]=cs^~ps&gs,F[6]=gt^~mt&ut,F[7]=dt^~Ft&ot,F[16]=Ct^~Le&pt,F[17]=At^~Rt&ft,F[26]=Ht^~$t&Ot,F[27]=Us^~Kt&Fe,F[36]=Ys^~_t&zs,F[37]=qt^~Ws&jt,F[46]=vs^~ms&te,F[47]=ps^~gs&ee,F[8]=mt^~ut&ht,F[9]=Ft^~ot&st,F[18]=Le^~pt&Mt,F[19]=Rt^~ft&xt,F[28]=$t^~Ot&Xt,F[29]=Kt^~Fe&Yt,F[38]=_t^~zs&Jt,F[39]=Ws^~jt&Xs,F[48]=ms^~te&Hs,F[49]=gs^~ee&ie,F[0]^=n[Y],F[1]^=n[Y+1]};if(T)s.exports=R;else for(D=0;D<O.length;++D)C[O[D]]=R[O[D]]})()})(bp);const G1=bp.exports;function Yn(s){return"0x"+G1.keccak_256(we(s))}const N1="rlp/5.7.0",k1=new lt(N1);function Jd(s){const t=[];for(;s;)t.unshift(s&255),s>>=8;return t}function Ap(s){if(Array.isArray(s)){let f=[];if(s.forEach(function(w){f=f.concat(Ap(w))}),f.length<=55)return f.unshift(192+f.length),f;const C=Jd(f.length);return C.unshift(247+C.length),C.concat(f)}T1(s)||k1.throwArgumentError("RLP object must be BytesLike","object",s);const t=Array.prototype.slice.call(we(s));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const i=Jd(t.length);return i.unshift(183+i.length),i.concat(t)}function V1(s){return le(Ap(s))}const U1="address/5.7.0",Jr=new lt(U1);function Zd(s){$e(s,20)||Jr.throwArgumentError("invalid address","address",s),s=s.toLowerCase();const t=s.substring(2).split(""),i=new Uint8Array(40);for(let C=0;C<40;C++)i[C]=t[C].charCodeAt(0);const f=we(Yn(i));for(let C=0;C<40;C+=2)f[C>>1]>>4>=8&&(t[C]=t[C].toUpperCase()),(f[C>>1]&15)>=8&&(t[C+1]=t[C+1].toUpperCase());return"0x"+t.join("")}const z1=9007199254740991;function X1(s){return Math.log10?Math.log10(s):Math.log(s)/Math.LN10}const Ou={};for(let s=0;s<10;s++)Ou[String(s)]=String(s);for(let s=0;s<26;s++)Ou[String.fromCharCode(65+s)]=String(10+s);const Qd=Math.floor(X1(z1));function Y1(s){s=s.toUpperCase(),s=s.substring(4)+s.substring(0,2)+"00";let t=s.split("").map(f=>Ou[f]).join("");for(;t.length>=Qd;){let f=t.substring(0,Qd);t=parseInt(f,10)%97+t.substring(f.length)}let i=String(98-parseInt(t,10)%97);for(;i.length<2;)i="0"+i;return i}function os(s){let t=null;if(typeof s!="string"&&Jr.throwArgumentError("invalid address","address",s),s.match(/^(0x)?[0-9a-fA-F]{40}$/))s.substring(0,2)!=="0x"&&(s="0x"+s),t=Zd(s),s.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==s&&Jr.throwArgumentError("bad address checksum","address",s);else if(s.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(s.substring(2,4)!==Y1(s)&&Jr.throwArgumentError("bad icap checksum","address",s),t=w1(s.substring(4));t.length<40;)t="0"+t;t=Zd("0x"+t)}else Jr.throwArgumentError("invalid address","address",s);return t}function W1(s){let t=null;try{t=os(s.from)}catch{Jr.throwArgumentError("missing from address","transaction",s)}const i=C1(we(bt.from(s.nonce).toHexString()));return os(Tp(Yn(V1([t,i])),12))}class H1 extends ls{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,i){try{i=os(i)}catch(f){this._throwError(f.message,i)}return t.writeValue(i)}decode(t){return os(Cp(t.readValue().toHexString(),20))}}class $1 extends ls{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,i){return this.coder.encode(t,i)}decode(t){return this.coder.decode(t)}}const Zr=new lt(ea);function Rp(s,t,i){let f=null;if(Array.isArray(i))f=i;else if(i&&typeof i=="object"){let e={};f=t.map(u=>{const y=u.localName;return y||Zr.throwError("cannot encode object for signature with missing names",lt.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:i}),e[y]&&Zr.throwError("cannot encode object for signature with duplicate names",lt.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:i}),e[y]=!0,i[y]})}else Zr.throwArgumentError("invalid tuple value","tuple",i);t.length!==f.length&&Zr.throwArgumentError("types/value length mismatch","tuple",i);let C=new eu(s.wordSize),w=new eu(s.wordSize),a=[];t.forEach((e,u)=>{let y=f[u];if(e.dynamic){let d=w.length;e.encode(w,y);let l=C.writeUpdatableValue();a.push(h=>{l(h+d)})}else e.encode(C,y)}),a.forEach(e=>{e(C.length)});let T=s.appendWriter(C);return T+=s.appendWriter(w),T}function Op(s,t){let i=[],f=s.subReader(0);t.forEach(w=>{let a=null;if(w.dynamic){let T=s.readValue(),e=f.subReader(T.toNumber());try{a=w.decode(e)}catch(u){if(u.code===lt.errors.BUFFER_OVERRUN)throw u;a=u,a.baseType=w.name,a.name=w.localName,a.type=w.type}}else try{a=w.decode(s)}catch(T){if(T.code===lt.errors.BUFFER_OVERRUN)throw T;a=T,a.baseType=w.name,a.name=w.localName,a.type=w.type}a!=null&&i.push(a)});const C=t.reduce((w,a)=>{const T=a.localName;return T&&(w[T]||(w[T]=0),w[T]++),w},{});t.forEach((w,a)=>{let T=w.localName;if(!T||C[T]!==1||(T==="length"&&(T="_length"),i[T]!=null))return;const e=i[a];e instanceof Error?Object.defineProperty(i,T,{enumerable:!0,get:()=>{throw e}}):i[T]=e});for(let w=0;w<i.length;w++){const a=i[w];a instanceof Error&&Object.defineProperty(i,w,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(i)}class K1 extends ls{constructor(t,i,f){const C=t.type+"["+(i>=0?i:"")+"]",w=i===-1||t.dynamic;super("array",C,f,w),this.coder=t,this.length=i}defaultValue(){const t=this.coder.defaultValue(),i=[];for(let f=0;f<this.length;f++)i.push(t);return i}encode(t,i){Array.isArray(i)||this._throwError("expected array value",i);let f=this.length;f===-1&&(f=i.length,t.writeValue(i.length)),Zr.checkArgumentCount(i.length,f,"coder array"+(this.localName?" "+this.localName:""));let C=[];for(let w=0;w<i.length;w++)C.push(this.coder);return Rp(t,C,i)}decode(t){let i=this.length;i===-1&&(i=t.readValue().toNumber(),i*32>t._data.length&&Zr.throwError("insufficient data length",lt.errors.BUFFER_OVERRUN,{length:t._data.length,count:i}));let f=[];for(let C=0;C<i;C++)f.push(new $1(this.coder));return t.coerce(this.name,Op(t,f))}}class j1 extends ls{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,i){return t.writeValue(i?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class Lp extends ls{constructor(t,i){super(t,t,i,!0)}defaultValue(){return"0x"}encode(t,i){i=we(i);let f=t.writeValue(i.length);return f+=t.writeBytes(i),f}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class J1 extends Lp{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,le(super.decode(t)))}}class Z1 extends ls{constructor(t,i){let f="bytes"+String(t);super(f,f,i,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,i){let f=we(i);return f.length!==this.size&&this._throwError("incorrect data length",i),t.writeBytes(f)}decode(t){return t.coerce(this.name,le(t.readBytes(this.size)))}}class Q1 extends ls{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,i){return i!=null&&this._throwError("not null",i),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}const q1=bt.from(-1),_1=bt.from(0),tT=bt.from(1),eT=bt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class iT extends ls{constructor(t,i,f){const C=(i?"int":"uint")+t*8;super(C,C,f,!1),this.size=t,this.signed=i}defaultValue(){return 0}encode(t,i){let f=bt.from(i),C=eT.mask(t.wordSize*8);if(this.signed){let w=C.mask(this.size*8-1);(f.gt(w)||f.lt(w.add(tT).mul(q1)))&&this._throwError("value out-of-bounds",i)}else(f.lt(_1)||f.gt(C.mask(this.size*8)))&&this._throwError("value out-of-bounds",i);return f=f.toTwos(this.size*8).mask(this.size*8),this.signed&&(f=f.fromTwos(this.size*8).toTwos(8*t.wordSize)),t.writeValue(f)}decode(t){let i=t.readValue().mask(this.size*8);return this.signed&&(i=i.fromTwos(this.size*8)),t.coerce(this.name,i)}}const sT="strings/5.7.0",Fp=new lt(sT);var wo;(function(s){s.current="",s.NFC="NFC",s.NFD="NFD",s.NFKC="NFKC",s.NFKD="NFKD"})(wo||(wo={}));var qe;(function(s){s.UNEXPECTED_CONTINUE="unexpected continuation byte",s.BAD_PREFIX="bad codepoint prefix",s.OVERRUN="string overrun",s.MISSING_CONTINUE="missing continuation byte",s.OUT_OF_RANGE="out of UTF-8 range",s.UTF16_SURROGATE="UTF-16 surrogate",s.OVERLONG="overlong representation"})(qe||(qe={}));function rT(s,t,i,f,C){return Fp.throwArgumentError(`invalid codepoint at offset ${t}; ${s}`,"bytes",i)}function Dp(s,t,i,f,C){if(s===qe.BAD_PREFIX||s===qe.UNEXPECTED_CONTINUE){let w=0;for(let a=t+1;a<i.length&&i[a]>>6===2;a++)w++;return w}return s===qe.OVERRUN?i.length-t-1:0}function nT(s,t,i,f,C){return s===qe.OVERLONG?(f.push(C),0):(f.push(65533),Dp(s,t,i))}const aT=Object.freeze({error:rT,ignore:Dp,replace:nT});function oT(s,t){t==null&&(t=aT.error),s=we(s);const i=[];let f=0;for(;f<s.length;){const C=s[f++];if(C>>7===0){i.push(C);continue}let w=null,a=null;if((C&224)===192)w=1,a=127;else if((C&240)===224)w=2,a=2047;else if((C&248)===240)w=3,a=65535;else{(C&192)===128?f+=t(qe.UNEXPECTED_CONTINUE,f-1,s,i):f+=t(qe.BAD_PREFIX,f-1,s,i);continue}if(f-1+w>=s.length){f+=t(qe.OVERRUN,f-1,s,i);continue}let T=C&(1<<8-w-1)-1;for(let e=0;e<w;e++){let u=s[f];if((u&192)!=128){f+=t(qe.MISSING_CONTINUE,f,s,i),T=null;break}T=T<<6|u&63,f++}if(T!==null){if(T>1114111){f+=t(qe.OUT_OF_RANGE,f-1-w,s,i,T);continue}if(T>=55296&&T<=57343){f+=t(qe.UTF16_SURROGATE,f-1-w,s,i,T);continue}if(T<=a){f+=t(qe.OVERLONG,f-1-w,s,i,T);continue}i.push(T)}}return i}function Bp(s,t=wo.current){t!=wo.current&&(Fp.checkNormalize(),s=s.normalize(t));let i=[];for(let f=0;f<s.length;f++){const C=s.charCodeAt(f);if(C<128)i.push(C);else if(C<2048)i.push(C>>6|192),i.push(C&63|128);else if((C&64512)==55296){f++;const w=s.charCodeAt(f);if(f>=s.length||(w&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((C&1023)<<10)+(w&1023);i.push(a>>18|240),i.push(a>>12&63|128),i.push(a>>6&63|128),i.push(a&63|128)}else i.push(C>>12|224),i.push(C>>6&63|128),i.push(C&63|128)}return we(i)}function hT(s){return s.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function lT(s,t){return hT(oT(s,t))}class uT extends Lp{constructor(t){super("string",t)}defaultValue(){return""}encode(t,i){return super.encode(t,Bp(i))}decode(t){return lT(super.decode(t))}}class Aa extends ls{constructor(t,i){let f=!1;const C=[];t.forEach(a=>{a.dynamic&&(f=!0),C.push(a.type)});const w="tuple("+C.join(",")+")";super("tuple",w,i,f),this.coders=t}defaultValue(){const t=[];this.coders.forEach(f=>{t.push(f.defaultValue())});const i=this.coders.reduce((f,C)=>{const w=C.localName;return w&&(f[w]||(f[w]=0),f[w]++),f},{});return this.coders.forEach((f,C)=>{let w=f.localName;!w||i[w]!==1||(w==="length"&&(w="_length"),t[w]==null&&(t[w]=t[C]))}),Object.freeze(t)}encode(t,i){return Rp(t,this.coders,i)}decode(t){return t.coerce(this.name,Op(t,this.coders))}}const Ra=new lt(ea),dT=new RegExp(/^bytes([0-9]*)$/),fT=new RegExp(/^(u?int)([0-9]*)$/);class cT{constructor(t){vt(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new H1(t.name);case"bool":return new j1(t.name);case"string":return new uT(t.name);case"bytes":return new J1(t.name);case"array":return new K1(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new Aa((t.components||[]).map(f=>this._getCoder(f)),t.name);case"":return new Q1(t.name)}let i=t.type.match(fT);if(i){let f=parseInt(i[2]||"256");return(f===0||f>256||f%8!==0)&&Ra.throwArgumentError("invalid "+i[1]+" bit length","param",t),new iT(f/8,i[1]==="int",t.name)}if(i=t.type.match(dT),i){let f=parseInt(i[1]);return(f===0||f>32)&&Ra.throwArgumentError("invalid bytes length","param",t),new Z1(f,t.name)}return Ra.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,i){return new Po(t,this._getWordSize(),this.coerceFunc,i)}_getWriter(){return new eu(this._getWordSize())}getDefaultValue(t){const i=t.map(C=>this._getCoder(Pe.from(C)));return new Aa(i,"_").defaultValue()}encode(t,i){t.length!==i.length&&Ra.throwError("types/values length mismatch",lt.errors.INVALID_ARGUMENT,{count:{types:t.length,values:i.length},value:{types:t,values:i}});const f=t.map(a=>this._getCoder(Pe.from(a))),C=new Aa(f,"_"),w=this._getWriter();return C.encode(w,i),w.data}decode(t,i,f){const C=t.map(a=>this._getCoder(Pe.from(a)));return new Aa(C,"_").decode(this._getReader(we(i),f))}}const vT=new cT;function Oa(s){return Yn(Bp(s))}const ne=new lt(ea);class pT extends Xo{}class mT extends Xo{}class gT extends Xo{}class iu extends Xo{static isIndexed(t){return!!(t&&t._isIndexed)}}const yT={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function qd(s,t){const i=new Error(`deferred error during ABI decoding triggered accessing ${s}`);return i.error=t,i}class _d{constructor(t){let i=[];typeof t=="string"?i=JSON.parse(t):i=t,vt(this,"fragments",i.map(f=>es.from(f)).filter(f=>f!=null)),vt(this,"_abiCoder",In(new.target,"getAbiCoder")()),vt(this,"functions",{}),vt(this,"errors",{}),vt(this,"events",{}),vt(this,"structs",{}),this.fragments.forEach(f=>{let C=null;switch(f.type){case"constructor":if(this.deploy){ne.warn("duplicate definition - constructor");return}vt(this,"deploy",f);return;case"function":C=this.functions;break;case"event":C=this.events;break;case"error":C=this.errors;break;default:return}let w=f.format();if(C[w]){ne.warn("duplicate definition - "+w);return}C[w]=f}),this.deploy||vt(this,"deploy",Gi.from({payable:!1,type:"constructor"})),vt(this,"_isInterface",!0)}format(t){t||(t=Dt.full),t===Dt.sighash&&ne.throwArgumentError("interface does not support formatting sighash","format",t);const i=this.fragments.map(f=>f.format(t));return t===Dt.json?JSON.stringify(i.map(f=>JSON.parse(f))):i}static getAbiCoder(){return vT}static getAddress(t){return os(t)}static getSighash(t){return Tp(Oa(t.format()),0,4)}static getEventTopic(t){return Oa(t.format())}getFunction(t){if($e(t)){for(const f in this.functions)if(t===this.getSighash(f))return this.functions[f];ne.throwArgumentError("no matching function","sighash",t)}if(t.indexOf("(")===-1){const f=t.trim(),C=Object.keys(this.functions).filter(w=>w.split("(")[0]===f);return C.length===0?ne.throwArgumentError("no matching function","name",f):C.length>1&&ne.throwArgumentError("multiple matching functions","name",f),this.functions[C[0]]}const i=this.functions[Ni.fromString(t).format()];return i||ne.throwArgumentError("no matching function","signature",t),i}getEvent(t){if($e(t)){const f=t.toLowerCase();for(const C in this.events)if(f===this.getEventTopic(C))return this.events[C];ne.throwArgumentError("no matching event","topichash",f)}if(t.indexOf("(")===-1){const f=t.trim(),C=Object.keys(this.events).filter(w=>w.split("(")[0]===f);return C.length===0?ne.throwArgumentError("no matching event","name",f):C.length>1&&ne.throwArgumentError("multiple matching events","name",f),this.events[C[0]]}const i=this.events[ts.fromString(t).format()];return i||ne.throwArgumentError("no matching event","signature",t),i}getError(t){if($e(t)){const f=In(this.constructor,"getSighash");for(const C in this.errors){const w=this.errors[C];if(t===f(w))return this.errors[C]}ne.throwArgumentError("no matching error","sighash",t)}if(t.indexOf("(")===-1){const f=t.trim(),C=Object.keys(this.errors).filter(w=>w.split("(")[0]===f);return C.length===0?ne.throwArgumentError("no matching error","name",f):C.length>1&&ne.throwArgumentError("multiple matching errors","name",f),this.errors[C[0]]}const i=this.errors[Ni.fromString(t).format()];return i||ne.throwArgumentError("no matching error","signature",t),i}getSighash(t){if(typeof t=="string")try{t=this.getFunction(t)}catch(i){try{t=this.getError(t)}catch{throw i}}return In(this.constructor,"getSighash")(t)}getEventTopic(t){return typeof t=="string"&&(t=this.getEvent(t)),In(this.constructor,"getEventTopic")(t)}_decodeParams(t,i){return this._abiCoder.decode(t,i)}_encodeParams(t,i){return this._abiCoder.encode(t,i)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,i){typeof t=="string"&&(t=this.getError(t));const f=we(i);return le(f.slice(0,4))!==this.getSighash(t)&&ne.throwArgumentError(`data signature does not match error ${t.name}.`,"data",le(f)),this._decodeParams(t.inputs,f.slice(4))}encodeErrorResult(t,i){return typeof t=="string"&&(t=this.getError(t)),le(_r([this.getSighash(t),this._encodeParams(t.inputs,i||[])]))}decodeFunctionData(t,i){typeof t=="string"&&(t=this.getFunction(t));const f=we(i);return le(f.slice(0,4))!==this.getSighash(t)&&ne.throwArgumentError(`data signature does not match function ${t.name}.`,"data",le(f)),this._decodeParams(t.inputs,f.slice(4))}encodeFunctionData(t,i){return typeof t=="string"&&(t=this.getFunction(t)),le(_r([this.getSighash(t),this._encodeParams(t.inputs,i||[])]))}decodeFunctionResult(t,i){typeof t=="string"&&(t=this.getFunction(t));let f=we(i),C=null,w="",a=null,T=null,e=null;switch(f.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,f)}catch{}break;case 4:{const u=le(f.slice(0,4)),y=yT[u];if(y)a=this._abiCoder.decode(y.inputs,f.slice(4)),T=y.name,e=y.signature,y.reason&&(C=a[0]),T==="Error"?w=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:T==="Panic"&&(w=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const d=this.getError(u);a=this._abiCoder.decode(d.inputs,f.slice(4)),T=d.name,e=d.format()}catch{}break}}return ne.throwError("call revert exception"+w,lt.errors.CALL_EXCEPTION,{method:t.format(),data:le(i),errorArgs:a,errorName:T,errorSignature:e,reason:C})}encodeFunctionResult(t,i){return typeof t=="string"&&(t=this.getFunction(t)),le(this._abiCoder.encode(t.outputs,i||[]))}encodeFilterTopics(t,i){typeof t=="string"&&(t=this.getEvent(t)),i.length>t.inputs.length&&ne.throwError("too many arguments for "+t.format(),lt.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:i});let f=[];t.anonymous||f.push(this.getEventTopic(t));const C=(w,a)=>w.type==="string"?Oa(a):w.type==="bytes"?Yn(le(a)):(w.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),w.type.match(/^u?int/)&&(a=bt.from(a).toHexString()),w.type==="address"&&this._abiCoder.encode(["address"],[a]),Cp(le(a),32));for(i.forEach((w,a)=>{let T=t.inputs[a];if(!T.indexed){w!=null&&ne.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+T.name,w);return}w==null?f.push(null):T.baseType==="array"||T.baseType==="tuple"?ne.throwArgumentError("filtering with tuples or arrays not supported","contract."+T.name,w):Array.isArray(w)?f.push(w.map(e=>C(T,e))):f.push(C(T,w))});f.length&&f[f.length-1]===null;)f.pop();return f}encodeEventLog(t,i){typeof t=="string"&&(t=this.getEvent(t));const f=[],C=[],w=[];return t.anonymous||f.push(this.getEventTopic(t)),i.length!==t.inputs.length&&ne.throwArgumentError("event arguments/values mismatch","values",i),t.inputs.forEach((a,T)=>{const e=i[T];if(a.indexed)if(a.type==="string")f.push(Oa(e));else if(a.type==="bytes")f.push(Yn(e));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");f.push(this._abiCoder.encode([a.type],[e]))}else C.push(a),w.push(e)}),{data:this._abiCoder.encode(C,w),topics:f}}decodeEventLog(t,i,f){if(typeof t=="string"&&(t=this.getEvent(t)),f!=null&&!t.anonymous){let l=this.getEventTopic(t);(!$e(f[0],32)||f[0].toLowerCase()!==l)&&ne.throwError("fragment/topic mismatch",lt.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:l,value:f[0]}),f=f.slice(1)}let C=[],w=[],a=[];t.inputs.forEach((l,h)=>{l.indexed?l.type==="string"||l.type==="bytes"||l.baseType==="tuple"||l.baseType==="array"?(C.push(Pe.fromObject({type:"bytes32",name:l.name})),a.push(!0)):(C.push(l),a.push(!1)):(w.push(l),a.push(!1))});let T=f!=null?this._abiCoder.decode(C,_r(f)):null,e=this._abiCoder.decode(w,i,!0),u=[],y=0,d=0;t.inputs.forEach((l,h)=>{if(l.indexed)if(T==null)u[h]=new iu({_isIndexed:!0,hash:null});else if(a[h])u[h]=new iu({_isIndexed:!0,hash:T[d++]});else try{u[h]=T[d++]}catch(r){u[h]=r}else try{u[h]=e[y++]}catch(r){u[h]=r}if(l.name&&u[l.name]==null){const r=u[h];r instanceof Error?Object.defineProperty(u,l.name,{enumerable:!0,get:()=>{throw qd(`property ${JSON.stringify(l.name)}`,r)}}):u[l.name]=r}});for(let l=0;l<u.length;l++){const h=u[l];h instanceof Error&&Object.defineProperty(u,l,{enumerable:!0,get:()=>{throw qd(`index ${l}`,h)}})}return Object.freeze(u)}parseTransaction(t){let i=this.getFunction(t.data.substring(0,10).toLowerCase());return i?new mT({args:this._abiCoder.decode(i.inputs,"0x"+t.data.substring(10)),functionFragment:i,name:i.name,signature:i.format(),sighash:this.getSighash(i),value:bt.from(t.value||"0")}):null}parseLog(t){let i=this.getEvent(t.topics[0]);return!i||i.anonymous?null:new pT({eventFragment:i,name:i.name,signature:i.format(),topic:this.getEventTopic(i),args:this.decodeEventLog(i,t.data,t.topics)})}parseError(t){const i=le(t);let f=this.getError(i.substring(0,10).toLowerCase());return f?new gT({args:this._abiCoder.decode(f.inputs,"0x"+i.substring(10)),errorFragment:f,name:f.name,signature:f.format(),sighash:this.getSighash(f)}):null}static isInterface(t){return!!(t&&t._isInterface)}}const xT="abstract-provider/5.7.0";var TT=globalThis&&globalThis.__awaiter||function(s,t,i,f){function C(w){return w instanceof i?w:new i(function(a){a(w)})}return new(i||(i=Promise))(function(w,a){function T(y){try{u(f.next(y))}catch(d){a(d)}}function e(y){try{u(f.throw(y))}catch(d){a(d)}}function u(y){y.done?w(y.value):C(y.value).then(T,e)}u((f=f.apply(s,t||[])).next())})};const CT=new lt(xT);class Lu{constructor(){CT.checkAbstract(new.target,Lu),vt(this,"_isProvider",!0)}getFeeData(){return TT(this,void 0,void 0,function*(){const{block:t,gasPrice:i}=yield Rs({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let f=null,C=null,w=null;return t&&t.baseFeePerGas&&(f=t.baseFeePerGas,w=bt.from("1500000000"),C=t.baseFeePerGas.mul(2).add(w)),{lastBaseFeePerGas:f,maxFeePerGas:C,maxPriorityFeePerGas:w,gasPrice:i}})}addListener(t,i){return this.on(t,i)}removeListener(t,i){return this.off(t,i)}static isProvider(t){return!!(t&&t._isProvider)}}const ST="abstract-signer/5.7.0";var hi=globalThis&&globalThis.__awaiter||function(s,t,i,f){function C(w){return w instanceof i?w:new i(function(a){a(w)})}return new(i||(i=Promise))(function(w,a){function T(y){try{u(f.next(y))}catch(d){a(d)}}function e(y){try{u(f.throw(y))}catch(d){a(d)}}function u(y){y.done?w(y.value):C(y.value).then(T,e)}u((f=f.apply(s,t||[])).next())})};const ni=new lt(ST),ET=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],PT=[lt.errors.INSUFFICIENT_FUNDS,lt.errors.NONCE_EXPIRED,lt.errors.REPLACEMENT_UNDERPRICED];class Yo{constructor(){ni.checkAbstract(new.target,Yo),vt(this,"_isSigner",!0)}getBalance(t){return hi(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)})}getTransactionCount(t){return hi(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)})}estimateGas(t){return hi(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const i=yield Rs(this.checkTransaction(t));return yield this.provider.estimateGas(i)})}call(t,i){return hi(this,void 0,void 0,function*(){this._checkProvider("call");const f=yield Rs(this.checkTransaction(t));return yield this.provider.call(f,i)})}sendTransaction(t){return hi(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const i=yield this.populateTransaction(t),f=yield this.signTransaction(i);return yield this.provider.sendTransaction(f)})}getChainId(){return hi(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return hi(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return hi(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(t){return hi(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)})}checkTransaction(t){for(const f in t)ET.indexOf(f)===-1&&ni.throwArgumentError("invalid transaction key: "+f,"transaction",t);const i=nn(t);return i.from==null?i.from=this.getAddress():i.from=Promise.all([Promise.resolve(i.from),this.getAddress()]).then(f=>(f[0].toLowerCase()!==f[1].toLowerCase()&&ni.throwArgumentError("from address mismatch","transaction",t),f[0])),i}populateTransaction(t){return hi(this,void 0,void 0,function*(){const i=yield Rs(this.checkTransaction(t));i.to!=null&&(i.to=Promise.resolve(i.to).then(C=>hi(this,void 0,void 0,function*(){if(C==null)return null;const w=yield this.resolveName(C);return w==null&&ni.throwArgumentError("provided ENS name resolves to null","tx.to",C),w})),i.to.catch(C=>{}));const f=i.maxFeePerGas!=null||i.maxPriorityFeePerGas!=null;if(i.gasPrice!=null&&(i.type===2||f)?ni.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t):(i.type===0||i.type===1)&&f&&ni.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t),(i.type===2||i.type==null)&&i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)i.type=2;else if(i.type===0||i.type===1)i.gasPrice==null&&(i.gasPrice=this.getGasPrice());else{const C=yield this.getFeeData();if(i.type==null)if(C.maxFeePerGas!=null&&C.maxPriorityFeePerGas!=null)if(i.type=2,i.gasPrice!=null){const w=i.gasPrice;delete i.gasPrice,i.maxFeePerGas=w,i.maxPriorityFeePerGas=w}else i.maxFeePerGas==null&&(i.maxFeePerGas=C.maxFeePerGas),i.maxPriorityFeePerGas==null&&(i.maxPriorityFeePerGas=C.maxPriorityFeePerGas);else C.gasPrice!=null?(f&&ni.throwError("network does not support EIP-1559",lt.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),i.gasPrice==null&&(i.gasPrice=C.gasPrice),i.type=0):ni.throwError("failed to get consistent fee data",lt.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else i.type===2&&(i.maxFeePerGas==null&&(i.maxFeePerGas=C.maxFeePerGas),i.maxPriorityFeePerGas==null&&(i.maxPriorityFeePerGas=C.maxPriorityFeePerGas))}return i.nonce==null&&(i.nonce=this.getTransactionCount("pending")),i.gasLimit==null&&(i.gasLimit=this.estimateGas(i).catch(C=>{if(PT.indexOf(C.code)>=0)throw C;return ni.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",lt.errors.UNPREDICTABLE_GAS_LIMIT,{error:C,tx:i})})),i.chainId==null?i.chainId=this.getChainId():i.chainId=Promise.all([Promise.resolve(i.chainId),this.getChainId()]).then(C=>(C[1]!==0&&C[0]!==C[1]&&ni.throwArgumentError("chainId address mismatch","transaction",t),C[0])),yield Rs(i)})}_checkProvider(t){this.provider||ni.throwError("missing provider",lt.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!!(t&&t._isSigner)}}class Fu extends Yo{constructor(t,i){super(),vt(this,"address",t),vt(this,"provider",i||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,i){return Promise.resolve().then(()=>{ni.throwError(t,lt.errors.UNSUPPORTED_OPERATION,{operation:i})})}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,i,f){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new Fu(this.address,t)}}const wT="transactions/5.7.0",Ip=new lt(wT);var tf;(function(s){s[s.legacy=0]="legacy",s[s.eip2930=1]="eip2930",s[s.eip1559=2]="eip1559"})(tf||(tf={}));function Dh(s,t){return{address:os(s),storageKeys:(t||[]).map((i,f)=>(S1(i)!==32&&Ip.throwArgumentError("invalid access list storageKey",`accessList[${s}:${f}]`,i),i.toLowerCase()))}}function MT(s){if(Array.isArray(s))return s.map((i,f)=>Array.isArray(i)?(i.length>2&&Ip.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${f}]`,i),Dh(i[0],i[1])):Dh(i.address,i.storageKeys));const t=Object.keys(s).map(i=>{const f=s[i].reduce((C,w)=>(C[w]=!0,C),{});return Dh(i,Object.keys(f).sort())});return t.sort((i,f)=>i.address.localeCompare(f.address)),t}const bT="contracts/5.7.0";var cr=globalThis&&globalThis.__awaiter||function(s,t,i,f){function C(w){return w instanceof i?w:new i(function(a){a(w)})}return new(i||(i=Promise))(function(w,a){function T(y){try{u(f.next(y))}catch(d){a(d)}}function e(y){try{u(f.throw(y))}catch(d){a(d)}}function u(y){y.done?w(y.value):C(y.value).then(T,e)}u((f=f.apply(s,t||[])).next())})};const ue=new lt(bT);function Mo(s,t){return cr(this,void 0,void 0,function*(){const i=yield t;typeof i!="string"&&ue.throwArgumentError("invalid address or ENS name","name",i);try{return os(i)}catch{}s||ue.throwError("a provider or signer is needed to resolve ENS names",lt.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const f=yield s.resolveName(i);return f==null&&ue.throwArgumentError("resolver or addr is not configured for ENS name","name",i),f})}function go(s,t,i){return cr(this,void 0,void 0,function*(){return Array.isArray(i)?yield Promise.all(i.map((f,C)=>go(s,Array.isArray(t)?t[C]:t[f.name],f))):i.type==="address"?yield Mo(s,t):i.type==="tuple"?yield go(s,t,i.components):i.baseType==="array"?Array.isArray(t)?yield Promise.all(t.map(f=>go(s,f,i.arrayChildren))):Promise.reject(ue.makeError("invalid value for array",lt.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t})}function Wo(s,t,i){return cr(this,void 0,void 0,function*(){let f={};i.length===t.inputs.length+1&&typeof i[i.length-1]=="object"&&(f=nn(i.pop())),ue.checkArgumentCount(i.length,t.inputs.length,"passed to contract"),s.signer?f.from?f.from=Rs({override:Mo(s.signer,f.from),signer:s.signer.getAddress()}).then(u=>cr(this,void 0,void 0,function*(){return os(u.signer)!==u.override&&ue.throwError("Contract with a Signer cannot override from",lt.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):f.from=s.signer.getAddress():f.from&&(f.from=Mo(s.provider,f.from));const C=yield Rs({args:go(s.signer||s.provider,i,t.inputs),address:s.resolvedAddress,overrides:Rs(f)||{}}),w=s.interface.encodeFunctionData(t,C.args),a={data:w,to:C.address},T=C.overrides;if(T.nonce!=null&&(a.nonce=bt.from(T.nonce).toNumber()),T.gasLimit!=null&&(a.gasLimit=bt.from(T.gasLimit)),T.gasPrice!=null&&(a.gasPrice=bt.from(T.gasPrice)),T.maxFeePerGas!=null&&(a.maxFeePerGas=bt.from(T.maxFeePerGas)),T.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=bt.from(T.maxPriorityFeePerGas)),T.from!=null&&(a.from=T.from),T.type!=null&&(a.type=T.type),T.accessList!=null&&(a.accessList=MT(T.accessList)),a.gasLimit==null&&t.gas!=null){let u=21e3;const y=we(w);for(let d=0;d<y.length;d++)u+=4,y[d]&&(u+=64);a.gasLimit=bt.from(t.gas).add(u)}if(T.value){const u=bt.from(T.value);!u.isZero()&&!t.payable&&ue.throwError("non-payable method cannot override value",lt.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:f.value}),a.value=u}T.customData&&(a.customData=nn(T.customData)),T.ccipReadEnabled&&(a.ccipReadEnabled=!!T.ccipReadEnabled),delete f.nonce,delete f.gasLimit,delete f.gasPrice,delete f.from,delete f.value,delete f.type,delete f.accessList,delete f.maxFeePerGas,delete f.maxPriorityFeePerGas,delete f.customData,delete f.ccipReadEnabled;const e=Object.keys(f).filter(u=>f[u]!=null);return e.length&&ue.throwError(`cannot override ${e.map(u=>JSON.stringify(u)).join(",")}`,lt.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:e}),a})}function AT(s,t){return function(...i){return Wo(s,t,i)}}function RT(s,t){const i=s.signer||s.provider;return function(...f){return cr(this,void 0,void 0,function*(){i||ue.throwError("estimate require a provider or signer",lt.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const C=yield Wo(s,t,f);return yield i.estimateGas(C)})}}function OT(s,t){const i=t.wait.bind(t);t.wait=f=>i(f).then(C=>(C.events=C.logs.map(w=>{let a=Vn(w),T=null;try{T=s.interface.parseLog(w)}catch{}return T&&(a.args=T.args,a.decode=(e,u)=>s.interface.decodeEventLog(T.eventFragment,e,u),a.event=T.name,a.eventSignature=T.signature),a.removeListener=()=>s.provider,a.getBlock=()=>s.provider.getBlock(C.blockHash),a.getTransaction=()=>s.provider.getTransaction(C.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(C),a}),C))}function Gp(s,t,i){const f=s.signer||s.provider;return function(...C){return cr(this,void 0,void 0,function*(){let w;if(C.length===t.inputs.length+1&&typeof C[C.length-1]=="object"){const e=nn(C.pop());e.blockTag!=null&&(w=yield e.blockTag),delete e.blockTag,C.push(e)}s.deployTransaction!=null&&(yield s._deployed(w));const a=yield Wo(s,t,C),T=yield f.call(a,w);try{let e=s.interface.decodeFunctionResult(t,T);return i&&t.outputs.length===1&&(e=e[0]),e}catch(e){throw e.code===lt.errors.CALL_EXCEPTION&&(e.address=s.address,e.args=C,e.transaction=a),e}})}}function LT(s,t){return function(...i){return cr(this,void 0,void 0,function*(){s.signer||ue.throwError("sending a transaction requires a signer",lt.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),s.deployTransaction!=null&&(yield s._deployed());const f=yield Wo(s,t,i),C=yield s.signer.sendTransaction(f);return OT(s,C),C})}}function ef(s,t,i){return t.constant?Gp(s,t,i):LT(s,t)}function Np(s){return s.address&&(s.topics==null||s.topics.length===0)?"*":(s.address||"*")+"@"+(s.topics?s.topics.map(t=>Array.isArray(t)?t.join("|"):t).join(":"):"")}class Wn{constructor(t,i){vt(this,"tag",t),vt(this,"filter",i),this._listeners=[]}addListener(t,i){this._listeners.push({listener:t,once:i})}removeListener(t){let i=!1;this._listeners=this._listeners.filter(f=>i||f.listener!==t?!0:(i=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(t=>t.listener)}listenerCount(){return this._listeners.length}run(t){const i=this.listenerCount();return this._listeners=this._listeners.filter(f=>{const C=t.slice();return setTimeout(()=>{f.listener.apply(this,C)},0),!f.once}),i}prepareEvent(t){}getEmit(t){return[t]}}class FT extends Wn{constructor(){super("error",null)}}class sf extends Wn{constructor(t,i,f,C){const w={address:t};let a=i.getEventTopic(f);C?(a!==C[0]&&ue.throwArgumentError("topic mismatch","topics",C),w.topics=C.slice()):w.topics=[a],super(Np(w),w),vt(this,"address",t),vt(this,"interface",i),vt(this,"fragment",f)}prepareEvent(t){super.prepareEvent(t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=(i,f)=>this.interface.decodeEventLog(this.fragment,i,f);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(i){t.args=null,t.decodeError=i}}getEmit(t){const i=I1(t.args);if(i.length)throw i[0].error;const f=(t.args||[]).slice();return f.push(t),f}}class rf extends Wn{constructor(t,i){super("*",{address:t}),vt(this,"address",t),vt(this,"interface",i)}prepareEvent(t){super.prepareEvent(t);try{const i=this.interface.parseLog(t);t.event=i.name,t.eventSignature=i.signature,t.decode=(f,C)=>this.interface.decodeEventLog(i.eventFragment,f,C),t.args=i.args}catch{}}}class DT{constructor(t,i,f){vt(this,"interface",In(new.target,"getInterface")(i)),f==null?(vt(this,"provider",null),vt(this,"signer",null)):Yo.isSigner(f)?(vt(this,"provider",f.provider||null),vt(this,"signer",f)):Lu.isProvider(f)?(vt(this,"provider",f),vt(this,"signer",null)):ue.throwArgumentError("invalid signer or provider","signerOrProvider",f),vt(this,"callStatic",{}),vt(this,"estimateGas",{}),vt(this,"functions",{}),vt(this,"populateTransaction",{}),vt(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(T=>{const e=this.interface.events[T];vt(this.filters,T,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(e,u)})),a[e.name]||(a[e.name]=[]),a[e.name].push(T)}),Object.keys(a).forEach(T=>{const e=a[T];e.length===1?vt(this.filters,T,this.filters[e[0]]):ue.warn(`Duplicate definition of ${T} (${e.join(", ")})`)})}if(vt(this,"_runningEvents",{}),vt(this,"_wrappedEmits",{}),t==null&&ue.throwArgumentError("invalid contract address or ENS name","addressOrName",t),vt(this,"address",t),this.provider)vt(this,"resolvedAddress",Mo(this.provider,t));else try{vt(this,"resolvedAddress",Promise.resolve(os(t)))}catch{ue.throwError("provider is required to use ENS name as contract address",lt.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const C={},w={};Object.keys(this.interface.functions).forEach(a=>{const T=this.interface.functions[a];if(w[a]){ue.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}w[a]=!0;{const e=T.name;C[`%${e}`]||(C[`%${e}`]=[]),C[`%${e}`].push(a)}this[a]==null&&vt(this,a,ef(this,T,!0)),this.functions[a]==null&&vt(this.functions,a,ef(this,T,!1)),this.callStatic[a]==null&&vt(this.callStatic,a,Gp(this,T,!0)),this.populateTransaction[a]==null&&vt(this.populateTransaction,a,AT(this,T)),this.estimateGas[a]==null&&vt(this.estimateGas,a,RT(this,T))}),Object.keys(C).forEach(a=>{const T=C[a];if(T.length>1)return;a=a.substring(1);const e=T[0];try{this[a]==null&&vt(this,a,this[e])}catch{}this.functions[a]==null&&vt(this.functions,a,this.functions[e]),this.callStatic[a]==null&&vt(this.callStatic,a,this.callStatic[e]),this.populateTransaction[a]==null&&vt(this.populateTransaction,a,this.populateTransaction[e]),this.estimateGas[a]==null&&vt(this.estimateGas,a,this.estimateGas[e])})}static getContractAddress(t){return W1(t)}static getInterface(t){return _d.isInterface(t)?t:new _d(t)}deployed(){return this._deployed()}_deployed(t){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,t).then(i=>(i==="0x"&&ue.throwError("contract not deployed",lt.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(t){this.signer||ue.throwError("sending a transactions require a signer",lt.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const i=nn(t||{});return["from","to"].forEach(function(f){i[f]!=null&&ue.throwError("cannot override "+f,lt.errors.UNSUPPORTED_OPERATION,{operation:f})}),i.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(i))}connect(t){typeof t=="string"&&(t=new Fu(t,this.provider));const i=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&vt(i,"deployTransaction",this.deployTransaction),i}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return iu.isIndexed(t)}_normalizeRunningEvent(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}_getRunningEvent(t){if(typeof t=="string"){if(t==="error")return this._normalizeRunningEvent(new FT);if(t==="event")return this._normalizeRunningEvent(new Wn("event",null));if(t==="*")return this._normalizeRunningEvent(new rf(this.address,this.interface));const i=this.interface.getEvent(t);return this._normalizeRunningEvent(new sf(this.address,this.interface,i))}if(t.topics&&t.topics.length>0){try{const f=t.topics[0];if(typeof f!="string")throw new Error("invalid topic");const C=this.interface.getEvent(f);return this._normalizeRunningEvent(new sf(this.address,this.interface,C,t.topics))}catch{}const i={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new Wn(Np(i),i))}return this._normalizeRunningEvent(new rf(this.address,this.interface))}_checkRunningEvents(t){if(t.listenerCount()===0){delete this._runningEvents[t.tag];const i=this._wrappedEmits[t.tag];i&&t.filter&&(this.provider.off(t.filter,i),delete this._wrappedEmits[t.tag])}}_wrapEvent(t,i,f){const C=Vn(i);return C.removeListener=()=>{!f||(t.removeListener(f),this._checkRunningEvents(t))},C.getBlock=()=>this.provider.getBlock(i.blockHash),C.getTransaction=()=>this.provider.getTransaction(i.transactionHash),C.getTransactionReceipt=()=>this.provider.getTransactionReceipt(i.transactionHash),t.prepareEvent(C),C}_addEventListener(t,i,f){if(this.provider||ue.throwError("events require a provider or a signer with a provider",lt.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(i,f),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){const C=w=>{let a=this._wrapEvent(t,w,i);if(a.decodeError==null)try{const T=t.getEmit(a);this.emit(t.filter,...T)}catch(T){a.decodeError=T.error}t.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[t.tag]=C,t.filter!=null&&this.provider.on(t.filter,C)}}queryFilter(t,i,f){const C=this._getRunningEvent(t),w=nn(C.filter);return typeof i=="string"&&$e(i,32)?(f!=null&&ue.throwArgumentError("cannot specify toBlock with blockhash","toBlock",f),w.blockHash=i):(w.fromBlock=i!=null?i:0,w.toBlock=f!=null?f:"latest"),this.provider.getLogs(w).then(a=>a.map(T=>this._wrapEvent(C,T,null)))}on(t,i){return this._addEventListener(this._getRunningEvent(t),i,!1),this}once(t,i){return this._addEventListener(this._getRunningEvent(t),i,!0),this}emit(t,...i){if(!this.provider)return!1;const f=this._getRunningEvent(t),C=f.run(i)>0;return this._checkRunningEvents(f),C}listenerCount(t){return this.provider?t==null?Object.keys(this._runningEvents).reduce((i,f)=>i+this._runningEvents[f].listenerCount(),0):this._getRunningEvent(t).listenerCount():0}listeners(t){if(!this.provider)return[];if(t==null){const i=[];for(let f in this._runningEvents)this._runningEvents[f].listeners().forEach(C=>{i.push(C)});return i}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider)return this;if(t==null){for(const f in this._runningEvents){const C=this._runningEvents[f];C.removeAllListeners(),this._checkRunningEvents(C)}return this}const i=this._getRunningEvent(t);return i.removeAllListeners(),this._checkRunningEvents(i),this}off(t,i){if(!this.provider)return this;const f=this._getRunningEvent(t);return f.removeListener(i),this._checkRunningEvents(f),this}removeListener(t,i){return this.off(t,i)}}class vr extends DT{}const Du="No wallet found or permission denied",BT="0x0",IT="0x0",GT="0x0",NT="0x0",Bu="0x0";async function ia(){try{await globalThis.provider.send("eth_requestAccounts",[]),globalThis.signer=globalThis.provider.getSigner(),globalThis.selectedAddress=await globalThis.signer.getAddress(),globalThis.noWallet=!1}catch(s){globalThis.noWallet=!0,console.log(s)}}async function kp(){if(globalThis.noWallet)return;const{chainId:s}=await provider.getNetwork();if(globalThis.chainId=s,globalThis.chainId!=56){console.log("Wallet is not connected with Binance Smart Chain: ",s);return}await globalThis.provider.send("eth_requestAccounts",[]),globalThis.signer=globalThis.provider.getSigner(),globalThis.selectedAddress=await globalThis.signer.getAddress();const t=["function balanceOf(address account) external view returns (uint256)"],i=new vr(BT,t,globalThis.signer);globalThis.moonshotBalance=await i.balanceOf(globalThis.selectedAddress);const f=new vr(IT,t,globalThis.signer);globalThis.ra8bitBalance=await f.balanceOf(globalThis.selectedAddress)}async function kT(){if(await ia(),globalThis.noWallet)return Du;const s=["function canWithdraw(address addr) public view returns (bool)","function getFreeRa8bit() external"],t=new vr(GT,s,globalThis.signer);if(await t.canWithdraw(globalThis.selectedAddress))try{await(await t.getFreeRa8bit()).wait(),await kp()}catch(f){return f.reason}return"You received $RA8BIT tokens"}async function VT(){if(await ia(),globalThis.noWallet)return"No wallet found";const s=["function canWithdraw(address addr) public view returns (bool)","function getFreeMoonshot() external"],t=new vr(NT,s,globalThis.signer);if(await t.canWithdraw(globalThis.selectedAddress))try{await(await t.getFreeMoonshot()).wait(),await kp()}catch(f){return f.reason}return"You received $RBITS tokens"}async function UT(s,t){if(await ia(),globalThis.noWallet)return Du;const i=["function updateScore(string memory initials, uint256 score) public"],f=new vr(Bu,i,globalThis.signer);try{await(await f.updateScore(s,t)).wait()}catch(C){return C.reason}return"OK"}const Vp=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"maker",type:"address"}],name:"GameMakerAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"maker",type:"address"}],name:"GameMakerRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"maker",type:"address"},{indexed:!1,internalType:"uint8",name:"position",type:"uint8"}],name:"HighscoreRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"maker",type:"address"}],name:"HighscoreReset",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"initials",type:"string"},{indexed:!1,internalType:"uint256",name:"score",type:"uint256"},{indexed:!1,internalType:"address",name:"player",type:"address"}],name:"HighscoreUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"gamemaker",type:"address"}],name:"addGameMaker",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"clearHallOfFame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"gameMakers",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getHallOfFame",outputs:[{components:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"score",type:"uint256"},{internalType:"string",name:"initials",type:"string"}],internalType:"struct HallOfFame.HighScores[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hallOfFame",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"score",type:"uint256"},{internalType:"string",name:"initials",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"gamemaker",type:"address"}],name:"removeGameMaker",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"score",type:"uint256"}],name:"removeScore",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"initials",type:"string"},{internalType:"uint256",name:"score",type:"uint256"}],name:"updateScore",outputs:[],stateMutability:"nonpayable",type:"function"}];async function zT(){if(await ia(),globalThis.noWallet)return Du;const s=new vr(Bu,Vp,globalThis.signer);try{return await s.getHallOfFame()}catch(t){return console.log("error "+t.reason),t.reason}return"OK"}async function Up(s){if(await ia(),globalThis.noWallet)return!1;await globalThis.provider.send("eth_requestAccounts",[]),globalThis.signer=globalThis.provider.getSigner(),globalThis.selectedAddress=await globalThis.signer.getAddress();const t=new vr(Bu,Vp,globalThis.signer);try{const i=await t.getHallOfFame();for(let f=0;f<i.length;f++){let C=i[f];if(s>C[1].toNumber())return!0}return i}catch(i){return console.log("error "+i.reason),!1}return!1}function XT(){return globalThis.noWallet||globalThis.moonshotBalance==0&&globalThis.ra8bitBalance==0&&!globalThis.hasNFT}class YT{constructor(t,i,f,C,w,a,T,e=0,u=0){$(this,"bitmapLetters",[]);$(this,"scene");$(this,"destY");let y=t.add.bitmapText(w,a,i,f,C);const d=y.width/2;y.destroy();for(let l=0;l<f.length;l++){const h=f[l];let r=t.add.bitmapText(w+l*C-d,a,i,h,C);r.setTint(16741120),r.setOrigin(e,u),this.bitmapLetters.push(r)}this.destY=a,this.scene=t}letterBounce(t,i,f,C,w=-1){for(let a=0;a<this.bitmapLetters.length;a++){const T=this.bitmapLetters[a].y,e=Nn.exports.Math.Between(t,i);this.scene.tweens.add({targets:this.bitmapLetters[a],y:T-Nn.exports.Math.Between(C/4,C),duration:e,ease:"Sine.easeInOut",yoyo:f,repeat:w,delay:500})}}destroy(){for(let t=0;t<this.bitmapLetters.length;t++)this.bitmapLetters[t].destroy();this.bitmapLetters=[]}}class WT extends rt.Scene{constructor(){super("game-over");$(this,"introMusic");$(this,"textDemo");$(this,"anyKey");$(this,"info");$(this,"offset",0);$(this,"amplitude",100);$(this,"frequency",.01)}preload(){Ge(this)}init(){this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}create(){const{width:i,height:f}=this.scale;globalThis.musicTune=!1,this.introMusic=_i(this,"gameover",!1),this.textDemo=new YT(this,"press_start","GAME OVER",48,i*.5,f*.5,16741120,.5),this.textDemo.letterBounce(500,800,!0,32,-1),this.input.on("pointerdown",()=>{this.continueGame()}),this.input.on("keydown",()=>{this.continueGame()}),this.cameras.main.shake(500),this.time.delayedCall(5e3,()=>{this.anyKey=this.add.bitmapText(i*.5,f*.5+96,"press_start","PRESS ANY KEY",24).setTint(16777215).setOrigin(.5)})}continueGame(){var i;(i=this.introMusic)==null||i.stop(),rn(this),this.hasNewHighscore()}update(){_e(this,-1)&&this.continueGame()}destroy(){var i,f;(i=this.introMusic)==null||i.destroy(),(f=this.anyKey)==null||f.destroy(),this.textDemo.destroy()}hasNewHighscore(){var f,C;const i=window.localStorage.getItem("ra8bit.stats");if(i!=null){const w=JSON.parse(i);this.info=w}if(globalThis.chainId==56&&!globalThis.noWallet){let w=((f=this.info)==null?void 0:f.highScorePoints)||0,a=((C=this.info)==null?void 0:C.scorePoints)||0;w>a&&(a=w),(async()=>{await Up(a)?(this.scene.stop(),this.scene.start("enter-hall")):(this.scene.stop(),this.scene.start("start"))})()}else this.scene.stop(),this.scene.start("start")}}class zp extends Phaser.Scene{constructor(i){super(i);$(this,"content",["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","RBITS presents","","a RBITS production","","HOPPA!","","Lead Cast","Male Ra8bit","","Supporting Cast","Female Ra8bit","","Casting Director","DandyBanger","","Music Composer","Loony chitptoon","Public Domain","jsfxr","","Costume Designer","Miley Cyrus","","Associate Producers","Juan Concreto","","Editors","The Lost Ra8bits","","Production Designer","Ninkwondo","","Director of Photography","DandyBanger","","Executive Producer","Crypt0 King","","Voice Over","Ms. Krasota","CryptoSeas","","Writers","c0ntrol zero","Pixel8bit","DandyBanger","","Director","CZ","","Game Designer","c0ntrol zero","Pixel8bit","DandyBanger","","Sound engineer","Retro OpenGame Art","FreeSound","","Musical Composition","Nicole Marie T","BGM The Slimeking's Tower","DeltaBreaker","Bottomless Pit Man","@wyver9","Snabisch http://audiojungle.net/user/Snabisch","Mega Pixel Music Lab","Christovix","Kim Lightyear","3xBlast","Trevor Lentz","(SubspaceAudio) Juhani Junkala","Tad Miller","Nene","SketchyLogic","Spring Spring","shiru8bit","marcelofg55","celestialghost8","congusbongus","IgnasD","","Technology used","Typescript","Phaser3","","Special thanks to","Vitalik","Shef","Crypt0 King","x22","Luis","Winnie","Joshua","Borris Stain","Shubham","Rony","Rohan","Jill","Akhi1","Genesis","Elon","Crypto Dasha","Crypto Baby","Juli Cold","Niki","Claire","Joy","Chad","Amber","Yeqi","Ms Krasota","CryptoSeas","Pure Evil","Smack","Rick","Crypto Hunter","David","Pratik","Joonas","Furkan","Light","Jackson","Joe","K","Akhi1","Hussam","Anastasia","","$RBITS",""])}}class HT extends zp{constructor(){super("win");$(this,"scroller");$(this,"shoutout");$(this,"index",0);$(this,"hsv");$(this,"fireworks");$(this,"particles");$(this,"info");$(this,"music")}init(){this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}preload(){Ge(this),this.load.spritesheet("player1-win","assets/player1-win.webp",{frameWidth:256,frameHeight:167,startFrame:0,endFrame:5}),this.load.spritesheet("player2-win","assets/player2-win.webp",{frameWidth:256,frameHeight:167,startFrame:0,endFrame:5}),this.load.atlas("flares","assets/flares.webp","assets/flares.json"),this.load.atlas("cocoon","assets/cocoons.webp","assets/cocoons.json")}create(){const{width:i,height:f}=this.scale;this.music=Pu(this,"boss"),this.hsv=rt.Display.Color.HSVColorWheel(),this.add.image(i/2,0,"logo").setDisplaySize(144,62).setOrigin(.5,0),this.time.delayedCall(3e3,()=>{const e={alpha:{start:1,end:0,ease:"Cubic.easeIn"},angle:{start:0,end:360,steps:100},blendMode:"ADD",frame:{frames:["red","yellow","green","blue"],cycle:!0,quantity:512},frequency:1024,gravityY:300,lifespan:2e3,quantity:500,reserve:500,scale:{min:.05,max:.15},speed:{min:100,max:200}};this.particles=this.add.particles(512,385,"flares",e),this.time.addEvent({delay:250,startAt:250,repeat:-1,callback:()=>{this.particles.setPosition(i*rt.Math.FloatBetween(.25,.75),f*rt.Math.FloatBetween(0,.5))}})});const C=this.textures;this.anims.create({key:"player1-wins",frameRate:15,frames:this.anims.generateFrameNumbers("player1-win",{start:0,end:5,first:0}),repeat:-1}),this.anims.create({key:"player2-wins",frameRate:15,frames:this.anims.generateFrameNumbers("player2-win",{start:0,end:5,first:0}),repeat:-1}),this.add.sprite(i/2-384,f/2,"player1-win").setOrigin(.5,0).play("player1-wins"),this.add.sprite(i/2+384,f/2,"player2-win").setOrigin(.5,0).play("player2-wins");const a=this.add.image(i/2,f/2,"cocoon","c1.webp").setDisplaySize(128,203).setOrigin(.5,.1).getTopLeft(),T={getRandomPoint:function(e){let u,y,d;do y=rt.Math.Between(0,128-1),d=rt.Math.Between(0,203-1),u=C.getPixel(y,d,"cocoon");while(u.alpha<255);return e.setTo(y+a.x,d+a.y)}};this.fireworks=this.add.particles(0,0,"flares",{lifespan:1e3,gravityY:10,scale:{start:0,end:.25,ease:"Quad.easeOut"},alpha:{start:1,end:0,ease:"Quad.easeIn"},blendMode:"ADD",emitZone:{type:"random",source:T}}),this.shoutout=this.add.bitmapText(i*.5,96,"press_start","YOU ARE A TRUE RABBIT!",48).setTint(16741120).setOrigin(.5,.1),this.scroller=this.add.dynamicBitmapText(640,360,"press_start",this.content,22).setOrigin(.5,.5),this.scroller.setCenterAlign(),this.scroller.scrollY=-2e3,this.input.on("pointerdown",()=>{this.continueGame()}),this.input.on("keydown",()=>{this.continueGame()})}update(i,f){this.scroller.scrollY+=.05*f,this.scroller.scrollY>3848&&(this.scroller.scrollY=-2e3);const C=this.hsv[this.index].color,w=this.hsv[359-this.index].color,a=this.hsv[(this.index+45)%360].color,T=this.hsv[(359-this.index+45)%360].color;this.shoutout.setTint(C,w,C,w),this.scroller.setTint(C,w,a,T),this.index++,this.index>=360&&(this.index=0)}continueGame(){this.hasNewHighscore()}destroy(){this.particles.destroy(),this.music.destroy(),this.shoutout.destroy(),this.scroller.destroy(),Ie(this),mr(this)}hasNewHighscore(){var f,C;const i=window.localStorage.getItem("ra8bit.stats");if(i!=null){const w=JSON.parse(i);this.info=w}if(globalThis.chainId==56&&!globalThis.noWallet){let w=((f=this.info)==null?void 0:f.highScorePoints)||0,a=((C=this.info)==null?void 0:C.scorePoints)||0;w>a&&(a=w),(async()=>{await Up(a)?(this.scene.stop(),this.scene.start("enter-hall")):(this.scene.stop(),this.scene.start("start"))})()}else this.scene.stop(),this.scene.start("start")}}class $T extends rt.Scene{constructor(i){super(i);$(this,"commandline");$(this,"ready")}init(){localStorage.clear()}preload(){const i=this.game.canvas.width,f=this.game.canvas.height,C=~~(i/12);this.cameras.main.setBackgroundColor(0),this.add.rectangle(C,C,i-C-C,f-C-C,0).setOrigin(0),this.make.text({x:C+C,y:C,text:"RBITS BASIC version 23.4",style:{font:"48px 'Press Start 2P'",color:"#ffffff"}}).setOrigin(0,0);const a=this.make.text({x:C+C/2,y:C+64,text:"4GB RAM SYSTEM    4294958080 Bytes free",style:{font:"48px 'Press Start 2P'",color:"#ffffff"}});a.setOrigin(0,0),this.make.text({x:C+C/2,y:C+64+64,text:"(C) RBITS",style:{font:"48px 'Press Start 2P'",color:"#ffffff"}}).setOrigin(0,0),this.ready=this.make.text({x:C+2,y:C+64+64+64+64,text:"",style:{font:"48px 'Press Start 2P'",color:"#ffffff"}}),a.setOrigin(0,0),this.commandline=this.add.text(2+C,C+256+64,""),this.commandline.setColor("#ffffff"),this.commandline.setFontSize(48);const e=this.add.graphics(),u=this.add.graphics(),y=this.make.text({x:4+C+128,y:C+256,text:"0%",style:{font:"48px 'Press Start 2P'"}});this.load.on("progress",function(d){const l=parseFloat(d),h=~~(l*100);y.setText(h+"%"),y.setColor("#ffffff"),e.clear(),e.fillStyle(16777215,1),u.fillRect(4+C,C+256,128*l,48)}),this.load.on("complete",()=>{this.ready.text="READY.",e.destroy(),u.destroy(),y.destroy()},this),Ge(this)}create(){this.typewriteText("POKE 53265,0: RUN"),this.time.delayedCall(1e3,()=>{this.cameras.main.shake(500,.02)},void 0,this),this.time.delayedCall(1500,this.nextScene,void 0,this)}nextScene(){this.scene.start("moonshot")}typewriteText(i){const f=i.length;let C=0;this.time.addEvent({callback:()=>{this.commandline.text+=i[C],++C},repeat:f-1,delay:40})}}class KT extends rt.Scene{constructor(){super("pause");$(this,"text")}preload(){this.load.bitmapFont("press_start","assets/press_start_2p.webp","assets/press_start_2p.fnt")}create(){const{width:i,height:f}=this.scale;this.text=this.add.bitmapText(i*.5,f*.5,"press_start","GAME PAUSED",64).setTint(16741120).setOrigin(.5)}destroy(){this.text.destroy()}}var jT=function(s){return s===void 0&&(s=JT),this.getFrameNameCallback=s,this},JT=function(s,t,i){return i==="__BASE"?`${s},${t}`:`${i}_${s},${t}`};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var ZT=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0},Si=function(s){var t,i,f;if(s==null||typeof s!="object")return s;if(t=Array.isArray(s)?[]:{},ZT(s))for(f in s)i=s[f],t[f]=Si(i);else t=s;return t},QT=function(s,t,i,f){Array.isArray(t)&&(f=i,i=t,t=void 0),t===void 0&&(t="__BASE"),i=Si(i),f=Si(f),this.textureKey=s,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var C=this.scene.sys.textures.get(s);if(!C)return this.clear(),this;if(!i||!f)return this.clear(),this;for(var w=C.get(t),a=w.width,T=0,e=0,u=i.length;e<u;e++)i[e]===void 0?T++:typeof i[e]=="number"?a-=i[e]:a-=i[e].width;for(var y=a/T,d=w.height,l=0,e=0,u=f.length;e<u;e++)f[e]===void 0?l++:typeof f[e]=="number"?d-=f[e]:d-=f[e].width;for(var h=d/l,r,n,v,o,c,m=0,p=0,g=0,x=f.length;g<x;g++){f[g]===void 0&&(f[g]=h),typeof f[g]=="number"&&(f[g]={height:f[g],stretch:g%2}),r=f[g],v=r.height,this.rows.stretch+=r.stretch|0,this.rows.minHeight+=r.stretch>0?0:v,m=0;for(var e=0,E=i.length;e<E;e++){if(i[e]===void 0&&(i[e]=y),typeof i[e]=="number"&&(i[e]={width:i[e],stretch:e%2}),n=i[e],o=n.width,g===0&&(this.columns.stretch+=n.stretch|0,this.columns.minWidth+=n.stretch>0?0:o),o>=1&&v>=1){c=this.getFrameNameCallback(e,g,t);var P=typeof c;(P==="string"||P==="number")&&C.add(c,0,m+w.cutX,p+w.cutY,o,v)}m+=o}p+=v}return this.updateTexture(),this},qT=function(){if(this.clear(),this.textureKey===void 0)return this;var s=this.scene.sys.textures.get(this.textureKey);if(!s)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,i=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-t,C=this.height-i,w=f>=0?this.maxFixedPartScaleX:this.width/t,a=C>=0?this.maxFixedPartScaleY:this.height/i;if(this.preserveRatio){var T=Math.min(w,a);if(w>T){var e=(w-T)*t;f>=0?f+=e:f=e,w=T}if(a>T){var u=(a-T)*i;C>=0?C+=u:C=u,a=T}}this.columns.scale=w,this.rows.scale=a;var y;f>0?y=this.columns.stretch>0?f/this.columns.stretch:0:y=0;var d;C>0?d=this.rows.stretch>0?C/this.rows.stretch:0:d=0;for(var l,h,r,n,v,o=0,c=0,m,p=0,g=this.rows.count;p<g;p++){r=this.rows.data[p],v=r.stretch===0?r.height*a:d*r.stretch,o=0;for(var x=0,E=this.columns.count;x<E;x++)h=this.columns.data[x],n=h.stretch===0?h.width*w:y*h.stretch,l=this.getFrameNameCallback(x,p,this.baseFrameName),s.has(l)&&n>0&&v>0&&(r.stretch===0&&h.stretch===0||this.getStretchMode(x,p)===0?m=0:m=1,m===0?this._drawImage(this.textureKey,l,o,c,n,v):this._drawTileSprite(this.textureKey,l,o,c,n,v)),o+=n;c+=v}};const _T=Phaser.Utils.Objects.IsPlainObject,nf=Phaser.Utils.Objects.GetValue;var tC=function(s){return _T(s)?(this.stretchMode.edge=Bh(nf(s,"edge",0)),this.stretchMode.internal=Bh(nf(s,"internal",0))):(s=Bh(s),this.stretchMode.edge=s,this.stretchMode.internal=s),this},Bh=function(s){return typeof s=="string"&&(s=eC[s]),s};const eC={scale:0,repeat:1};var iC=function(s,t){return s===0||s===this.columns.count-1||t===0||t===this.rows.count-1},sC=function(s,t){return iC.call(this,s,t)?this.stretchMode.edge:this.stretchMode.internal},rC=function(s){return s==null&&(s=!0),this.preserveRatio=s,this},nC=function(s,t){return t===void 0&&(t=s),this.maxFixedPartScaleX=s,this.maxFixedPartScaleY=t,this},Ui=function(){};const aC={_drawImage:Ui,_drawTileSprite:Ui,setGetFrameNameCallback:jT,setTexture:QT,updateTexture:qT,setStretchMode:tC,getStretchMode:sC,setPreserveRatio:rC,setMaxFixedPartScale:nC},mn=Phaser.Utils.Objects.IsPlainObject,Gt=Phaser.Utils.Objects.GetValue;var Xp=function(s,t){class i extends s{constructor(C,w,a,T,e,u,y,d,l,h){mn(w)?(h=w,w=Gt(h,"x",0),a=Gt(h,"y",0),T=Gt(h,"width",1),e=Gt(h,"height",1),u=Gt(h,"key",void 0),y=Gt(h,"baseFrame",void 0),d=Gt(h,"columns",void 0),l=Gt(h,"rows",void 0)):mn(T)?(h=T,T=Gt(h,"width",1),e=Gt(h,"height",1),u=Gt(h,"key",void 0),y=Gt(h,"baseFrame",void 0),d=Gt(h,"columns",void 0),l=Gt(h,"rows",void 0)):mn(u)?(h=u,u=Gt(h,"key",void 0),y=Gt(h,"baseFrame",void 0),d=Gt(h,"columns",void 0),l=Gt(h,"rows",void 0)):mn(y)?(h=y,y=Gt(h,"baseFrame",void 0),d=Gt(h,"columns",void 0),l=Gt(h,"rows",void 0)):Array.isArray(y)?(h=l,l=d,d=y,y=Gt(h,"baseFrame",void 0)):mn(d)&&(h=d,d=Gt(h,"columns",void 0),l=Gt(h,"rows",void 0)),super(C),this.type=t,this.setPosition(w,a).setSize(T,e).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(Gt(h,"getFrameNameCallback",void 0)),this.setStretchMode(Gt(h,"stretchMode",0)),this.setPreserveRatio(Gt(h,"preserveRatio",!0));var r=Gt(h,"maxFixedPartScale",1),n=Gt(h,"maxFixedPartScaleX",r),v=Gt(h,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(n,v),this.setTexture(u,y,d,l)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(C,w){return this.width===C&&this.height===w?this:(super.resize(C,w),this.updateTexture(),this)}}return Object.assign(i.prototype,aC),i},Yp=function(s,t,i){return i===void 0&&(i="image"),s[t]||(s[t]=s.scene.make[i]({add:!1,origin:{x:0,y:0}}),s.once("destroy",function(){s[t]&&(s[t].destroy(),s[t]=void 0)})),s[t]},oC=function(s,t,i,f,C,w){var a=Yp(this,"_image","image").setTexture(s,t).setDisplaySize(C,w);this.draw(a,i,f)},hC=function(s,t,i,f,C,w){var a=Yp(this,"_tileSprite","tileSprite").setTexture(s,t).setSize(C,w);this.draw(a,i,f)};const lC={_drawImage:oC,_drawTileSprite:hC},uC=Phaser.GameObjects.RenderTexture;class dC extends Xp(uC,"rexNinePatch"){}Object.assign(dC.prototype,lC);const fC=Phaser.GameObjects.GetCalcMatrix;var cC=function(s,t,i,f){var C=t.getRenderList();if(C.length!==0){i.addToRenderList(t);var w=s.pipelines.set(t.pipeline),a=t.frame.glTexture,T=w.setGameObject(t),e=i.roundPixels,u=fC(t,i,f),y=w.calcMatrix.copyFrom(u.calc),d=t._displayOriginX,l=t._displayOriginY,h=i.alpha*t.alpha;s.pipelines.preBatch(t);for(var r=0,n=C.length;r<n;r++)C[r].webglRender(w,y,h,d,l,a,T,e);s.pipelines.postBatch(t)}};const vC=Phaser.Renderer.Canvas.SetTransform;var pC=function(s,t,i,f){var C=s.currentContext,w=t.getRenderList();if(!(w.length===0||!vC(s,C,t,i,f))){i.addToRenderList(t);var a=i.roundPixels,T=-t._displayOriginX,e=-t._displayOriginY;C.translate(T,e);for(var u=0,y=w.length;u<y;u++)w[u].canvasRender(C,T,e,a);C.restore()}};const mC={renderWebGL:cC,renderCanvas:pC};var Wp=function(s,t){return this.texture=this.scene.sys.textures.get(s),this.frame=this.texture.get(t),this},af=function(s,t){if(this.width===s&&this.height===t)return this;this.width=s,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=s,i.hitArea.height=t),this},gC=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.add(s),this.lastAppendedChildren.push(...s)):(this.children.add(s),this.lastAppendedChildren.push(s)),this};const yC=Phaser.Utils.Array.Remove;var xC=function(s){return this.poolManager&&this.poolManager.free(s),yC(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},of=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},TC=function(){return this.lastAppendedChildren},CC=function(){return this.children.list};const SC={setTint(s){return this.tint=s,this.tintFill=!1,this},setTintFill(s){return this.tint=s,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var Hp={setTexture:Wp,resize:af,setSize:af,addChild:gC,removeChild:xC,removeChildren:of,clear:of,getLastAppendedChildren:TC,getChildren:CC};Object.assign(Hp,SC);class ki{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const EC=Phaser.Utils.Objects.GetValue;var PC={};class wC{constructor(t){this.pools=EC(t,"pools",PC)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new ki),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,f=t.length;i<f;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const MC=Phaser.GameObjects.GameObject,bC=Phaser.Utils.Objects.IsPlainObject,gn=Phaser.Utils.Objects.GetValue,AC=Phaser.Structs.List,RC=Phaser.Utils.Array.StableSort;class $p extends MC{constructor(t,i,f,C,w,a){bC(i)&&(a=i,i=gn(a,"x",0),f=gn(a,"y",0),C=gn(a,"texture"),w=gn(a,"frame")),i===void 0&&(i=0),f===void 0&&(f=0),super(t,"rexBlitter"),this.children=new AC,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var T=gn(a,"reuseBob",!0);this.poolManager=T?new wC(a):void 0,this.setTexture(C,w).setPosition(i,f).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,i=this.children.list,f=0,C=i.length;f<C;f++){var w=i[f];OC(w)&&(this.renderList.push(w),t||(t=w.depth!==0))}t&&RC(this.renderList,LC),this.displayListDirty=!1}return this.renderList}}var OC=function(s){return s.active&&s.visible&&s.alpha>0},LC=function(s,t){return s._depth-t._depth};const li=Phaser.GameObjects.Components;Phaser.Class.mixin($p,[li.Alpha,li.BlendMode,li.ComputedSize,li.Depth,li.GetBounds,li.Mask,li.Origin,li.Pipeline,li.ScrollFactor,li.Transform,li.Visible,mC,Hp]);const Kp="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var de=function(s,t,i){if(!s||typeof s=="number")return i;if(s.hasOwnProperty(t))return s[t];if(t.indexOf(".")!==-1){for(var f=t.split("."),C=s,w=i,a=0;a<f.length;a++)if(C.hasOwnProperty(f[a]))w=C[f[a]],C=C[f[a]];else{w=i;break}return w}else return i},rs=function(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))s.length=0;else for(var t in s)delete s[t];return s};const Ho={enableData(){return this.data===void 0&&(this.data={}),this},setData(s,t){if(this.enableData(),arguments.length===1){var i=s;for(s in i)this.data[s]=i[s]}else this.data[s]=t;return this},getData(s,t){return this.enableData(),s===void 0?this.data:de(this.data,s,t)},incData(s,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(s,this.getData(s,i)+t),this},mulData(s,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(s,this.getData(s,i)*t),this},clearData(){return this.data&&rs(this.data),this}};class jp{constructor(t,i){this.type=i,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(jp.prototype,Ho);const FC=Phaser.Math.DegToRad,DC=Phaser.Math.RadToDeg,wr=Phaser.Utils.Objects.GetValue;class BC extends jp{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setRotation(t){return this.rotation=t,this}get angle(){return DC(this.rotation)}set angle(t){this.rotation=FC(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,i){return i===void 0&&(i=!1),this.displayWidth=t,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,i){return i===void 0&&(i=!1),this.displayHeight=t,i&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,i){return i===void 0&&(i=t),this.setOriginX(t).setOriginY(i),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=wr(t,"width",void 0),f=wr(t,"height",void 0),C=wr(t,"scale",void 0),w=wr(t,"scaleX",C),a=wr(t,"scaleY",C);i!==void 0?f===void 0&&a===void 0?this.setWidth(i,!0):this.setWidth(i):w!==void 0?this.setScaleX(w):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),f!==void 0?i===void 0&&w===void 0?this.setHeight(f,!0):this.setHeight(f):a!==void 0?this.setScaleY(a):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var T=wr(t,"origin",void 0);return T!==void 0?this.setOrigin(T):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,i,f,C,w,a,T,e){}canvasRender(t,i,f,C){}}const IC=Phaser.GameObjects.Components.TransformMatrix,GC=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var ui=new IC,NC=function(s,t,i,f,C,w,a,T){var e=this._width,u=this._height,y=e*this.originX,d=u*this.originY,l=this.x-f,h=this.y-C,r=1,n=1;this.flipX&&(l+=e-y*2,r=-1),this.flipY&&(h+=u-d*2,n=-1),ui.applyITRS(l,h,this.rotation,this.scaleX*r,this.scaleY*n),t.multiply(ui,ui);var v=-y,o=-d,c=v+e,m=o+u,p=ui.getXRound(v,o,T),g=ui.getXRound(v,m,T),x=ui.getXRound(c,m,T),E=ui.getXRound(c,o,T),P=ui.getYRound(v,o,T),S=ui.getYRound(v,m,T),M=ui.getYRound(c,m,T),b=ui.getYRound(c,o,T),A=this.frame.u0,L=this.frame.v0,R=this.frame.u1,O=this.frame.v1,D=GC(this.tint,this.alpha*i);s.batchQuad(this.parent,p,P,g,S,x,M,E,b,A,L,R,O,D,D,D,D,this.tintFill,w,a)},kC=function(s,t,i,f){s.save();var C=this._width,w=this._height,a=C*this.originX,T=w*this.originY,e=this.x-a,u=this.y-T,y=1,d=1;this.flipX&&(e+=C,y=-1),this.flipY&&(u+=w,d=-1),f&&(e=Math.round(e),u=Math.round(u)),s.translate(e,u),s.rotate(this.rotation),s.scale(this.scaleX*y,this.scaleY*d);var l=this.frame;s.drawImage(l.source.image,l.cutX,l.cutY,C,w,0,0,C,w),s.restore()};const VC=Phaser.Utils.Objects.IsPlainObject;class Jp extends BC{constructor(t,i){super(t,Kp),this.setFrame(i)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!VC(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var UC={webglRender:NC,canvasRender:kC};Object.assign(Jp.prototype,UC);var Zp=function(s,t){typeof t=="string"&&(t={frame:t});var i=s.poolManager?s.poolManager.allocate(Kp):null;return i===null?i=new Jp(s):i.setParent(s).setActive(),i.modifyPorperties(t),s.addChild(i),i},zC=function(s,t,i,f,C,w){Zp(this,{frame:t,x:i,y:f,width:C,height:w})},XC=function(s,t,i,f,C,w){var a=this.texture.get(t),T=a.width,e=a.height,u=Math.floor(C/T),y=Math.floor(w/e);i+=(C-u*T)/2,f+=(w-y*e)/2;for(var d=0;d<u;d++)for(var l=0;l<y;l++)Zp(this,{frame:t,x:i+d*T,y:f+l*e})};const YC={_drawImage:zC,_drawTileSprite:XC};class WC extends Xp($p,"rexNinePatch2"){setTexture(t,i,f,C){return Wp.call(this,t,"__BASE"),this.columns?(super.setTexture(t,i,f,C),this):this}}Object.assign(WC.prototype,YC);const ws=Phaser.Utils.Objects.GetValue;class Qp{constructor(t,i,f,C,w){t===void 0&&(t=0),i===void 0&&(i=t),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,f,C,w)}setTo(t,i,f,C,w){return this.setPosition(t,i),this.setRadius(w),this.setSize(f,C),this}setPosition(t,i){return this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,f;typeof t=="number"?(i=t,f=t):(i=ws(t,"x",0),f=ws(t,"y",0));var C=this.cornerRadius;C.tl=La(ws(t,"tl",void 0),i,f),C.tr=La(ws(t,"tr",void 0),i,f),C.bl=La(ws(t,"bl",void 0),i,f),C.br=La(ws(t,"br",void 0),i,f)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Fa(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Fa(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Fa(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Fa(this.cornerRadius.br,t)}}var La=function(s,t,i){return s===void 0?s={x:t,y:i}:typeof s=="number"&&(s={x:s,y:s}),qp(s),s},Fa=function(s,t){typeof t=="number"?(s.x=t,s.y=t):(s.x=ws(t,"x",0),s.y=ws(t,"y",0)),qp(s)},qp=function(s){s.convex=s.x>=0||s.y>=0,s.x=Math.abs(s.x),s.y=Math.abs(s.y)},Vi=function(s,t,i){var f=i.length;if(f>=2){var C=i[f-2],w=i[f-1];if(s===C&&t===w)return i}return i.push(s,t),i};const hf=Phaser.Math.DegToRad;var Ee=function(s,t,i,f,C,w,a,T,e){a&&w>C?w-=360:!a&&w<C&&(w+=360);var u=w-C,y=hf(u)/T;C=hf(C);for(var d=0;d<=T;d++){var l=C+y*d,h=s+i*Math.cos(l),r=t+f*Math.sin(l);Vi(h,r,e)}return e},HC=Phaser.Renderer.WebGL.Utils,_p=function(s,t,i,f,C,w){for(var a=HC.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*f),T=i.pathData,e=i.pathIndexes,u=0;u<e.length;u+=3){var y=e[u]*2,d=e[u+1]*2,l=e[u+2]*2,h=T[y+0]-C,r=T[y+1]-w,n=T[d+0]-C,v=T[d+1]-w,o=T[l+0]-C,c=T[l+1]-w,m=t.getX(h,r),p=t.getY(h,r),g=t.getX(n,v),x=t.getY(n,v),E=t.getX(o,c),P=t.getY(o,c);s.batchTri(i,m,p,g,x,E,P,0,0,1,1,a,a,a,2)}},$C=Phaser.Renderer.WebGL.Utils,$o=function(s,t,i,f,C){var w=s.strokeTint,a=$C.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);w.TL=a,w.TR=a,w.BL=a,w.BR=a;var T=t.pathData,e=T.length-1,u=t.lineWidth,y=u/2,d=T[0]-f,l=T[1]-C;t.closePath||(e-=2);for(var h=2;h<e;h+=2){var r=T[h]-f,n=T[h+1]-C;s.batchLine(d,l,r,n,y,y,u,h-2,t.closePath?h===e-1:!1),d=r,l=n}};const KC=Phaser.GameObjects.GetCalcMatrix;var jC=function(s,t,i,f){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var C=s.pipelines.set(t.pipeline),w=KC(t,i,f),a=C.calcMatrix.copyFrom(w.calc),T=t._displayOriginX,e=t._displayOriginY,u=i.alpha*t.alpha;s.pipelines.preBatch(t),t.isFilled&&_p(C,a,t,u,T,e),t.isStroked&&$o(C,t,u,T,e),s.pipelines.postBatch(t)},sa=function(s,t,i,f){var C=i||t.fillColor,w=f||t.fillAlpha,a=(C&16711680)>>>16,T=(C&65280)>>>8,e=C&255;s.fillStyle="rgba("+a+","+T+","+e+","+w+")"},ra=function(s,t,i,f){var C=i||t.strokeColor,w=f||t.strokeAlpha,a=(C&16711680)>>>16,T=(C&65280)>>>8,e=C&255;s.strokeStyle="rgba("+a+","+T+","+e+","+w+")",s.lineWidth=t.lineWidth};const JC=Phaser.Renderer.Canvas.SetTransform;var ZC=function(s,t,i,f){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var C=s.currentContext;if(JC(s,C,t,i,f)){var w=t._displayOriginX,a=t._displayOriginY,T=t.pathData,e=T.length-1,u=T[0]-w,y=T[1]-a;C.beginPath(),C.moveTo(u,y),t.closePath||(e-=2);for(var d=2;d<e;d+=2){var l=T[d]-w,h=T[d+1]-a;C.lineTo(l,h)}C.closePath(),t.isFilled&&(sa(C,t),C.fill()),t.isStroked&&(ra(C,t),C.stroke()),C.restore()}};const QC={renderWebGL:jC,renderCanvas:ZC},qC=Phaser.GameObjects.Shape,_C=Phaser.Utils.Objects.IsPlainObject,lf=Phaser.Utils.Objects.GetValue,tS=Phaser.Geom.Polygon.Earcut;class ln extends qC{constructor(t,i,f,C,w,a,T,e){var u,y,d,l;if(_C(i)){var h=i;i=h.x,f=h.y,C=h.width,w=h.height,a=h.radius,T=h.color,e=h.alpha,u=h.strokeColor,y=h.strokeAlpha,d=h.strokeWidth,l=h.shape}i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C),a===void 0&&(a=0),l===void 0&&(l=0);var r=new Qp;if(super(t,"rexRoundRectangleShape",r),this.setShapeType(l),this.shapeType===0){var n=lf(a,"radius",a);r.setTo(0,0,C,w,n)}else{var n={x:C/2,y:w/2};r.setTo(0,0,C,w,n)}var v=lf(a,"iteration",void 0);this.setIteration(v),this.setPosition(i,f),this.setFillStyle(T,e),u!==void 0&&d===void 0&&(d=2),this.setStrokeStyle(d,u,y),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var f=t.width,C=t.height,w=t.cornerRadius,a,T=this.iteration+1;if(a=w.tl,Da(a))if(a.convex){var e=a.x,u=a.y;Ee(e,u,a.x,a.y,180,270,!1,T,i)}else{var e=0,u=0;Ee(e,u,a.x,a.y,90,0,!0,T,i)}else Vi(0,0,i);if(a=w.tr,Da(a))if(a.convex){var e=f-a.x,u=a.y;Ee(e,u,a.x,a.y,270,360,!1,T,i)}else{var e=f,u=0;Ee(e,u,a.x,a.y,180,90,!0,T,i)}else Vi(f,0,i);if(a=w.br,Da(a))if(a.convex){var e=f-a.x,u=C-a.y;Ee(e,u,a.x,a.y,0,90,!1,T,i)}else{var e=f,u=C;Ee(e,u,a.x,a.y,270,180,!0,T,i)}else Vi(f,C,i);if(a=w.bl,Da(a))if(a.convex){var e=a.x,u=C-a.y;Ee(e,u,a.x,a.y,90,180,!1,T,i)}else{var e=0,u=C;Ee(e,u,a.x,a.y,360,270,!0,T,i)}else Vi(0,C,i);return i.push(i[0],i[1]),this.pathIndexes=tS(i),this}setShapeType(t){return typeof t=="string"&&(t=eS[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){if(i===void 0&&(i=t),this.geom.width===t&&this.geom.height===i)return this;this.geom.setSize(t,i),this.shapeType===1&&this.setRadius({x:t/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var Da=function(s){return s.x>0&&s.y>0};const eS={rectangle:0,circle:1};Object.assign(ln.prototype,QC);const iS=Phaser.Renderer.WebGL.Utils;var sS=function(s,t,i,f){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){i.addToRenderList(t);var C=t.frame,w=C.width,a=C.height,T=iS.getTintAppendFloatAlpha,e=s.pipelines.set(t.pipeline,t),u=e.setTexture2D(C.glTexture,t);s.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,w,a,t.x,t.y,w/t.resolution,a/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,w,a,T(t.tintTopLeft,i.alpha*t._alphaTL),T(t.tintTopRight,i.alpha*t._alphaTR),T(t.tintBottomLeft,i.alpha*t._alphaBL),T(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,f,!1,u),s.pipelines.postBatch(t)}},rS=function(s,t,i,f){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(i.addToRenderList(t),s.batchSprite(t,t.frame,i,f))};const nS={renderWebGL:sS,renderCanvas:rS},aS=Phaser.Display.Color,oS={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(s){return this.context.fillStyle=s,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(s,t,i,f,C,w){var a=this.scene.sys.textures.getFrame(s,t);return a?(i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=a.cutWidth),w===void 0&&(w=a.cutHeight),this.context.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i,f,C,w),this.dirty=!0,this):this},getDataURL(s,t){return this.canvas.toDataURL(s,t)},getPixel(s,t,i){i===void 0&&(i=new aS);var f=this.context.getImageData(s,t,1,1);return i.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),i},setPixel(s,t,i,f,C,w){if(typeof i!="number"){var a=i;i=a.red,f=a.green,C=a.blue,w=a.alpha}w===void 0&&(w=i!==0||f!==0||C!==0?255:0);var T=this.context.createImageData(1,1);return T.data[0]=i,T.data[1]=f,T.data[2]=C,T.data[3]=w,this.context.putImageData(T,s,t),this.dirty=!0,this}};var t0=function(s,t,i,f,C,w,a){var T=s.sys.textures,e=s.renderer;f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=t.width),a===void 0&&(a=t.height);var u;T.exists(i)?u=T.get(i):u=T.createCanvas(i,w,a);var y=u.getSourceImage();y.width!==w&&(y.width=w),y.height!==a&&(y.height=a);var d=y.getContext("2d");d.clearRect(0,0,w,a),d.drawImage(t,f,C,w,a),e.gl&&u&&e.canvasToTexture(y,u.source[0].glTexture,!0,0)};const hS={updateTexture(s,t){s&&(t?s.call(t,this.canvas,this.context):s(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},generateTexture(s,t,i,f,C){var w=this.canvas;return f===void 0?f=w.width:f*=this.resolution,C===void 0?C=w.height:C*=this.resolution,t0(this.scene,w,s,t,i,f,C),this},loadTexture(s,t){var i=this.scene.sys.textures.getFrame(s,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.drawFrame(s,t),this.dirty=!0,this):this}},uf=Phaser.Display.Canvas.CanvasPool,lS=Phaser.GameObjects.GameObject;class na extends lS{constructor(t,i,f,C,w){i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=C,this._height=w,C=Math.max(Math.ceil(C*this.resolution),1),w=Math.max(Math.ceil(w*this.resolution),1),this.canvas=uf.create(this,C,w),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(i,f),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){uf.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,i){return this._width===t&&this._height===i?this:(this._width=t,this._height=i,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=t,this.canvas.height=i,this.frame.setSize(t,i),this.dirty=!0,this)}setSize(t,i){return this.setCanvasSize(t,i),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,i){return this.setSize(t,i),this}}const Ke=Phaser.GameObjects.Components;Phaser.Class.mixin(na,[Ke.Alpha,Ke.BlendMode,Ke.Crop,Ke.Depth,Ke.Flip,Ke.GetBounds,Ke.Mask,Ke.Origin,Ke.Pipeline,Ke.ScrollFactor,Ke.Tint,Ke.Transform,Ke.Visible,nS,oS,hS]);const uS=Phaser.Utils.String.Pad;var St=function(s,t,i){if(s==null)return s;switch(typeof s){case"string":return s;case"number":return`#${uS(Math.floor(s).toString(16),6,"0",1)}`;case"function":return s(t,i);case"object":return s.hasOwnProperty("r")?s.hasOwnProperty("a")?`rgba(${s.r},${s.g},${s.b},${s.a})`:`rgb(${s.r},${s.g},${s.b})`:s.hasOwnProperty("h")?s.hasOwnProperty("a")?`hsla(${s.h},${s.s},${s.l},${s.a})`:`hsl(${s.h},${s.s},${s.l})`:s;default:return s}};const df=Phaser.Math.DegToRad;var dS=function(s,t,i,f,C,w,a){var T=new Qp(t,i,f,C,w),e=T.minWidth,u=T.minHeight,y=f>=e?1:f/e,d=C>=u?1:C/u,l=T.cornerRadius,h,r,n,v,o;s.save(),s.beginPath(),s.translate(t,i),h=l.tl,Ia(h)?(r=h.x*y,n=h.y*d,Ba(h)?(v=r,o=n,xs(s,v,o,r,n,180,270,!1,a)):(v=0,o=0,xs(s,v,o,r,n,90,0,!0,a))):s.lineTo(0,0),h=l.tr,Ia(h)?(r=h.x*y,n=h.y*d,Ba(h)?(v=f-r,o=n,xs(s,v,o,r,n,270,360,!1,a)):(v=f,o=0,xs(s,v,o,r,n,180,90,!0,a))):s.lineTo(f,0),h=l.br,Ia(h)?(r=h.x*y,n=h.y*d,Ba(h)?(v=f-r,o=C-n,xs(s,v,o,r,n,0,90,!1,a)):(v=f,o=C,xs(s,v,o,r,n,270,180,!0,a))):s.lineTo(f,C),h=l.bl,Ia(h)?(r=h.x*y,n=h.y*d,Ba(h)?(v=r,o=C-n,xs(s,v,o,r,n,90,180,!1,a)):(v=0,o=C,xs(s,v,o,r,n,360,270,!0,a))):s.lineTo(0,C),s.closePath(),s.restore()},Ba=function(s){return!s.hasOwnProperty("convex")||s.convex},Ia=function(s){return s.x>0&&s.y>0},xs=function(s,t,i,f,C,w,a,T,e){if(T&&a>w?a-=360:!T&&a<w&&(a+=360),w=df(w),a=df(a),e==null)s.ellipse(t,i,f,C,0,w,a,T);else{e+=1;for(var u,y,d,l=(a-w)/e,h=0;h<=e;h++)d=w+l*h,u=t+f*Math.cos(d),y=i+C*Math.sin(d),s.lineTo(u,y)}},fS=function(s,t,i,f,C,w,a,T,e,u,y,d,l){if(dS(t,i,f,C,w,a,l),T!=null){if(y!=null){var h;d?h=t.createLinearGradient(0,0,C,0):h=t.createLinearGradient(0,0,0,w),h.addColorStop(0,T),h.addColorStop(1,y),T=h}t.fillStyle=T,t.fill()}e!=null&&u>0&&(t.strokeStyle=e,t.lineWidth=u,t.stroke())},e0=function(s,t,i,f,C,w,a,T){if(!(t==null&&i==null)){var e=s.canvas.width,u=s.canvas.height;i==null&&(f=0);var y=f/2;e=Math.max(1,e-f),u=Math.max(1,u-f),fS(s.canvas,s.context,y,y,e,u,C,t,i,f,w,a,T)}};Phaser.Utils.Objects.GetValue;/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var cS=Phaser.Renderer.WebGL.Utils,vS=function(s,t,i,f){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var C=t.frame,w=C.width,a=C.height,T=cS.getTintAppendFloatAlpha,e=s.pipelines.set(t.pipeline,t),u=e.setTexture2D(C.glTexture,t);s.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,w,a,t.x,t.y,w/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,w,a,T(t.tintTopLeft,i.alpha*t._alphaTL),T(t.tintTopRight,i.alpha*t._alphaTR),T(t.tintBottomLeft,i.alpha*t._alphaBL),T(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,f,!1,u),s.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var pS=function(s,t,i,f){t.width===0||t.height===0||(i.addToRenderList(t),s.batchSprite(t,t.frame,i,f))};const mS={renderWebGL:vS,renderCanvas:pS},Ih=Phaser.Display.Canvas.CanvasPool;var gS=function(s,t,i){i===void 0&&(i={});var f=Ih.create(this),C=f.getContext("2d");s.syncFont(f,C);var w=C.measureText(t),a=Math.ceil(w.width*s.baselineX),T=a,e=2*T;if(T=T*s.baselineY|0,f.width=a,f.height=e,C.fillStyle="#f00",C.fillRect(0,0,a,e),C.font=s._font,C.textBaseline="alphabetic",C.fillStyle="#000",C.fillText(s.testString,0,T),i.left=0,a===0||e===0||!C.getImageData(0,0,a,e))return Ih.remove(f),i;for(var u=C.getImageData(0,0,a,e).data,y=!1,d=0;d<a;d++){for(var l=0;l<e;l++){var h=(l*a+d)*4;if(u[h]!==255){i.left=d,y=!0;break}}if(y)break}return Ih.remove(f),i};const yS=Phaser.GameObjects.GameObject;class i0 extends yS{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,f){return this.style.setBackgroundColor(t,i,f)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,f,C,w,a){return this.style.setShadow(t,i,f,C,w,a)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}measureTextMargins(t,i){return gS(this.style,t,i)}}const Ue=Phaser.GameObjects.Components;Phaser.Class.mixin(i0,[Ue.Alpha,Ue.BlendMode,Ue.ComputedSize,Ue.Crop,Ue.Depth,Ue.Flip,Ue.GetBounds,Ue.Mask,Ue.Origin,Ue.Pipeline,Ue.ScrollFactor,Ue.Tint,Ue.Transform,Ue.Visible,mS]);var xS={backgroundColor:["backgroundColor",null,St],backgroundColor2:["backgroundColor2",null,St],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,St],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",St],stroke:["stroke","#fff",St],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",St],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",St],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Ga=Phaser.Display.Canvas.CanvasPool;var ff=function(s){var t=Ga.create(this),i=t.getContext("2d");s.syncFont(t,i);var f=i.measureText(s.testString);if("actualBoundingBoxAscent"in f){var C=f.actualBoundingBoxAscent,w=f.actualBoundingBoxDescent,u={ascent:C,descent:w,fontSize:C+w};return Ga.remove(t),u}var a=Math.ceil(f.width*s.baselineX),T=a,e=2*T;T=T*s.baselineY|0,t.width=a,t.height=e,i.fillStyle="#f00",i.fillRect(0,0,a,e),i.font=s._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s.testString,0,T);var u={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,a,e))return u.ascent=T,u.descent=T+6,u.fontSize=u.ascent+u.descent,Ga.remove(t),u;var y=i.getImageData(0,0,a,e).data,d=y.length,l=a*4,h,r,n=0,v=!1;for(h=0;h<T;h++){for(r=0;r<l;r+=4)if(y[n+r]!==255){v=!0;break}if(!v)n+=l;else break}for(u.ascent=T-h,n=d-l,v=!1,h=e;h>T;h--){for(r=0;r<l;r+=4)if(y[n+r]!==255){v=!0;break}if(!v)n-=l;else break}return u.descent=h-T,u.fontSize=u.ascent+u.descent,Ga.remove(t),u},xe={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const TS=Phaser.Utils.Objects.GetAdvancedValue,je=Phaser.Utils.Objects.GetValue;class Iu{constructor(t,i,f){this.parent=t,f===void 0&&(f=xS),this.propertyMap=f,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==xe.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,f){if(i===void 0&&(i=!0),f===void 0&&(f=!1),t&&t.hasOwnProperty("wrap")){var C=t.wrap;if(C.hasOwnProperty("mode")){var w=C.mode;typeof w=="string"&&(C.mode=cf[w])}else C.hasOwnProperty("width")&&(C.mode=1)}t&&t.rtl&&f&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var a=this.propertyMap;for(var T in a){var e=a[T],u=e[0],y=f?e[1]:this[T],d=e[2];if(T==="wrapCallback"||T==="wrapCallbackScope")this[T]=je(t,u,y);else{var l=TS(t,u,y);d&&(l=d(l)),this[T]=l}}var h=je(t,"font",null);h===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=h;var r=je(t,"fill",null);r!==null&&(this.color=St(r));var n=je(t,"metrics",!1);return n?this.metrics={ascent:je(n,"ascent",0),descent:je(n,"descent",0),fontSize:je(n,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=ff(this)),i?this.parent.updateText():this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=ff(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=je(t,"fontFamily","Courier"),this.fontSize=je(t,"fontSize","16px"),this.fontStyle=je(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,f){return f===void 0&&(f=!0),this.backgroundColor=St(t,this.parent.canvas,this.parent.context),this.backgroundColor2=St(i,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=St(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=St(t,this.parent.canvas,this.parent.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,f,C,w,a){return t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f="#000"),C===void 0&&(C=0),w===void 0&&(w=!1),a===void 0&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=St(f,this.parent.canvas,this.parent.context),this.shadowBlur=C,this.shadowStroke=w,this.shadowFill=a,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,f){return t===void 0&&(t="#000"),i===void 0&&(i=0),f===void 0&&(f=0),this.underlineColor=St(t,this.parent.canvas,this.parent.context),this.underlineThickness=i,this.underlineOffset=f,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=cf[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,i&&(typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=je(i,"fontFamily",this.fontFamily),this.fontSize=je(i,"fontSize",this.fontSize),this.fontStyle=je(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},i=this.propertyMap;for(var f in i)t[f]=this[f];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const cf={none:xe.NO_WRAP,word:xe.WORD_WRAP,char:xe.CHAR_WRAP,character:xe.CHAR_WRAP},CS={draw(s,t,i,f){var C=this.penManager;this.hitAreaManager.clear();var w=this.context;w.save();var a=this.defaultStyle;this.clear(),e0(this,a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),s+=this.startXOffset,t+=this.startYOffset;var T=a.halign,e=a.valign,u,y=a.lineHeight,d=C.lines,l=d.length,h=a.maxLines,r,n,v;h>0&&l>h?(r=h,e==="center"?n=Math.floor((l-r)/2):e==="bottom"?n=l-r:n=0):(r=l,n=0),v=n+r;var o,c,m=this.rtl,p=m?this.parent.width:void 0;e==="center"?c=Math.max((f-r*y)/2,0):e==="bottom"?c=Math.max(f-r*y-2,0):c=0,c+=t;for(var g=n;g<v;g++)if(u=C.getLineWidth(g),u!==0){for(var x=d[g],E=x.length,P=T,S=0;S<E;S++){var M=x[S].prop.align;if(M!==void 0){P=M;break}}P==="center"?o=(i-u)/2:P==="right"?o=m?0:i-u:o=m?i-u:0,o+=s;for(var S=0;S<E;S++)this.drawPen(x[S],o,c,p)}w.restore()},drawPen(s,t,i,f){t+=s.x,i+=s.y+(s.prop.y||0),f!==void 0&&(t=f-t);var C=this.canvas,w=this.context;w.save();var a=this.parser.propToContextStyle(this.defaultStyle,s.prop);if(a.buildFont(),a.syncFont(C,w),a.syncStyle(C,w),a.underlineThickness>0&&s.width>0&&this.drawUnderline(t,i,s.width,a),s.isTextPen&&this.drawText(t,i,s.text,a),s.isImagePen&&this.drawImage(t,i,s.prop.img,a),w.restore(),s.hasAreaMarker&&s.width>0){var T,e=s.prop.area;if(e)T={key:e};else{var u=s.prop.url;T={key:`url:${u}`,url:u}}this.hitAreaManager.add(t,i-this.startYOffset,s.width,this.defaultStyle.lineHeight,T)}},clear(){var s=this.canvas;this.context.clearRect(0,0,s.width,s.height)},drawUnderline(s,t,i,f){t+=f.underlineOffset-f.underlineThickness/2,this.autoRound&&(s=Math.round(s),t=Math.round(t));var C=this.context,w=C.lineCap;C.lineCap="butt",C.strokeStyle=f.underlineColor,C.lineWidth=f.underlineThickness,C.beginPath(),C.moveTo(s,t),C.lineTo(s+i,t),C.stroke(),C.lineCap=w},drawText(s,t,i,f){this.autoRound&&(s=Math.round(s),t=Math.round(t));var C=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(C,f.shadowStroke),C.strokeText(i,s,t)),f.color&&f.color!=="none"&&(f.syncShadow(C,f.shadowFill),C.fillText(i,s,t))},drawImage(s,t,i,f){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,s,t,this.autoRound)}},js=Phaser.Utils.Objects.GetValue,SS=xe.NO_NEWLINE,vf=xe.RAW_NEWLINE;class ES{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=js(t,"text",""),this.x=js(t,"x",0),this.y=js(t,"y",0),this.width=js(t,"width",0);var i=js(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=js(t,"newLineMode",0),this.startIndex=js(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===vf&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==SS&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===vf&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var pr=function(s,t){var i=Array.isArray(s);if(t===void 0?t=i?[]:{}:rs(t),i){t.length=s.length;for(var f=0,C=s.length;f<C;f++)t[f]=s[f]}else for(var w in s)t[w]=s[w];return t};const pf=Phaser.Utils.Objects.GetFastValue,mf=xe.NO_NEWLINE,PS=xe.WRAPPED_NEWLINE;class Gu{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=pf(t,"tagToText",Ui),this.tagToTextScope=pf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,f,C,w,a){var T=this.pensPool.pop();return T==null&&(T=new ES),Js.text=t,Js.x=i,Js.y=f,Js.width=C,Js.prop=w,Js.newLineMode=a,T.resetFromJSON(Js),this.addPen(T),this}addImagePen(t,i,f,C){return this.addTextPen("",t,i,f,C,mf),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,f=t?t.y:0,C=t?pr(t.prop):null;return this.addTextPen("",i,f,0,C,PS),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var f=this.lastLine;f==null&&(f=this.linesPool.pop()||[],this.lines.push(f)),f.push(t),t.newLineMode!==mf&&(f=this.linesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new Gu),t.clear();for(var i=0,f=this.lines.length;i<f;i++)for(var C=this.lines[i],w=0,a=C.length;w<a;w++){var T=C[w];t.addPen(T.text,T.x,T.y,T.width,pr(T.prop),T.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,f=!1,C;for(i=t;i>=0&&(C=this.lines[i],f=C!=null&&C.length>0,!f);i--);if(!f)return 0;var w=C[C.length-1];return w.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var f=i[i.length-1];if(f==null)return 0;var C=f.lastX;return C}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,f=0,C=this.lines.length;f<C;f++)t=this.getLineWidth(f),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,f=this.lines.length;i<f;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,f=0,C=i.length;f<C;f++)t+=i[f].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,f=0,C=this.pens.length;f<C;f++)t+=i[f].rawTextLength;return t}getSliceTagText(t,i,f){if(t===void 0&&(t=0),i===void 0){var C=this.lastPen;if(C==null)return"";i=C.endIndex}f===void 0&&(f=!1);for(var w="",a,T,e,u,y,d,l,h=0,r=this.pens.length;h<r&&(a=this.pens[h],u=a.endIndex,!(!(u<=t)&&(a=this.pens[h],T=f?a.wrapText:a.plainText,d=a.prop,e=a.startIndex,y=e>=t&&u<=i,y||(T=T.substring(t-e,i-e)),this.tagToTextScope?w+=this.tagToText.call(this.tagToTextScope,T,d,l):w+=this.tagToText(T,d,l),l=d,u>=i)));h++);return w}get length(){return this.lines.length}set length(t){this.clear()}}var Js={};const wS=Phaser.Geom.Rectangle;var gf=new ki;class MS{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,i=this.hitAreas.length;t<i;t++)rs(this.hitAreas[t].data);return gf.pushMultiple(this.hitAreas),this}add(t,i,f,C,w){var a=gf.pop();return a===null?a=new wS(t,i,f,C):a.setTo(t,i,f,C),a.data=w,this.hitAreas.push(a),this}getFirst(t,i){for(var f=0,C=this.hitAreas.length;f<C;f++){var w=this.hitAreas[f];if(w.contains(t,i))return w}return null}getByKey(t){for(var i=0,f=this.hitAreas.length;i<f;i++){var C=this.hitAreas[i];if(C.data.key===t)return C}return null}drawBounds(t,i,f){i===void 0&&(i=16777215),f&&t.save().scaleCanvas(f.scaleX,f.scaleY).rotateCanvas(f.rotation).translateCanvas(f.x,f.y);for(var C=0,w=this.hitAreas.length;C<w;C++){var a=this.hitAreas[C];t.lineStyle(1,i).strokeRect(a.x,a.y,a.width,a.height)}return f&&t.restore(),this}}var bS=function(){this.parent.on("pointerdown",AS,this).on("pointerup",RS,this).on("pointermove",Gh,this).on("pointerover",Gh,this).on("pointerout",function(s,t){Gh.call(this,s,null,null,t)},this)},AS=function(s,t,i,f){var C=this.hitAreaManager.getFirst(t,i);if(C!==null){var w=C.data.key;tn.call(this,"areadown",w,s,t,i,f),C.data.isDown=!0}},RS=function(s,t,i,f){var C=this.hitAreaManager.getFirst(t,i);if(C!==null){var w=C.data,a=w.key;if(tn.call(this,"areaup",a,s,t,i,f),w.isDown){tn.call(this,"areaclick",a,s,t,i,f);var T=w.url;T&&window.open(T,"_blank")}w.isDown=!1}},Gh=function(s,t,i,f){if(t===null){this.lastHitAreaKey!==null&&(tn.call(this,"areaout",this.lastHitAreaKey,s,t,i,f),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var C=this.hitAreaManager.getFirst(t,i),w=C?C.data.key:null;if(this.lastHitAreaKey!==w){if(this.lastHitAreaKey!==null){tn.call(this,"areaout",this.lastHitAreaKey,s,t,i,f);var a=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&!!a.data.url&&(this.scene.input.manager.canvas.style.cursor=""),a.isDown=!1}w!==null&&(tn.call(this,"areaover",w,s,t,i,f),this.urlTagCursorStyle&&!!C.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=w}},tn=function(s,t,i,f,C,w){this.parent.emit(`${s}-${t}`,i,f,C,w),this.parent.emit(s,t,i,f,C,w)};const OS=xe.NO_NEWLINE,LS=xe.RAW_NEWLINE,Nh=xe.WRAPPED_NEWLINE,yf=xe.NO_WRAP,FS=xe.WORD_WRAP,DS=xe.CHAR_WRAP,BS=xe.SPLITREGEXP;var s0=function(s,t,i,f,C,w){f<=0&&(i=yf);var a=[];if(!s||!s.length)return a;for(var T=i===yf,e=i===FS,u=s.split(BS),y,d,l,h=0,r=u.length;h<r;h++){if(y=u[h],l=h===r-1?OS:LS,T){var n=t(y);a.push(w.getLine(y,n,l));continue}if(d=h===0?f-C:f,y.length<=100){var n=t(y);if(n<=d){a.push(w.getLine(y,n,l));continue}}var v,o;e?(v=y.split(" "),o=v[v.length-1]==="",o&&(v.length-=1)):v=y;for(var c,m,p,g="",x=0,E,P=e?t(" "):void 0,S=0,M=v.length;S<M;S++){if(c=v[S],m=t(c),p=S===M-1,e&&(!p||o)&&(c+=" ",m+=P),e&&m>f){g!==""?a.push(w.getLine(g,x,Nh)):S===0&&C>0&&a.push(w.getLine("",0,Nh)),a.push(...s0(c,t,DS,f,0,w));var b=a.pop();g=b.text,x=b.width,w.freeLine(b),g===" "&&(g="",x=0);continue}E=x+m,E>d?(a.push(w.getLine(g,x,Nh)),g=c,x=m,d=f):(g+=c,x=E),p&&a.push(w.getLine(g,x,l))}}return a};const kh=Phaser.Utils.Objects.GetValue,IS=xe.NO_WRAP,GS=xe.NO_NEWLINE;class r0{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=kh(t,"context",null),this.canvas=this.context.canvas,this.parser=kh(t,"parser",null),this.defaultStyle=kh(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new MS,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var i=this.context;this.getTextWidth=function(f){return i.measureText(f).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,i,f,C,w){if(w===void 0&&(w=this.penManager),w.clear(),t==="")return w;var a=this.parent.style;if(a.isWrapFitMode){var T=this.parent.padding;f=a.fixedWidth-T.left-T.right}for(var e=this.canvas,u=this.context,y=function(O){return u.measureText(O).width},d=0,l=0,h=a.wrapCallback,r=a.wrapCallbackScope,n=!0,v,o,c,m=this.parser.splitText(t),p,g,x=this.wrapTextLinesPool,E=0,P=m.length;E<P;E++)if(p=this.parser.tagTextToProp(m[E],o),v=p.plainText,o=p.prop,o.img){var S=this.imageManager.getOuterWidth(o.img);f>0&&i!==IS&&f<d+S&&(w.addNewLinePen(),l+=C,d=0),w.addImagePen(d,l,S,pr(o)),d+=S}else if(v!==""){if(u.save(),c=this.parser.propToContextStyle(this.defaultStyle,o),c.buildFont(),c.syncFont(e,u),c.syncStyle(e,u),!h)g=s0(v,y,i,f,d,x);else{g=h.call(r,v,y,f,d),typeof g=="string"&&(g=g.split(`
`));for(var A,M=0,b=g.length;M<b;M++)A=g[M],typeof A=="string"?g[M]=x.getLine(A,y(A),M<b-1?2:0):n=!1}for(var A,M=0,b=g.length;M<b;M++)A=g[M],w.addTextPen(A.text,d,l,A.width,pr(o),A.newLineMode),A.newLineMode!==GS?(d=0,l+=C):d+=A.width;n&&x.freeLines(g),g=null,u.restore()}for(var E=0,P=this.lines.length;E<P;E++){var L=this.lines[E],R=L[L.length-1];R&&(R.width+=this.parser.getStrokeThinkness(this.defaultStyle,R.prop))}return w}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Gu({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,f){var C;if(t==null)C=this.penManager.plainText;else{var w=this.parser.splitText(t,1);C="";for(var a=0,T=w.length;a<T;a++)C+=w[a]}return(i!=null||f!=null)&&(i==null&&(i=0),f==null&&(f=C.length),C=C.substring(i,f)),C}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(t,f.wrapMode,f.wrapWidth,f.lineHeight,i),i}getText(t,i,f,C){if(t==null)return this.penManager.getSliceTagText(i,f,C);var w=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,w),w.getSliceTagText(i,f,C)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var NS={setInteractive:bS};Object.assign(r0.prototype,CS,NS);class xf extends ki{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,i,f){var C=this.pop();return C===null&&(C={}),C.text=t,C.width=i,C.newLineMode=f,C}}const Vh=Phaser.Utils.Objects.GetValue;var Uh=function(s,t){t===void 0&&(t={key:s}),t.hasOwnProperty("key")||(t.key=s);var i=t.key,f=t.frame,C=t.width,w=t.height;if(C===void 0||w===void 0){var a=this.textureManager.getFrame(i,f),T=a?a.cutWidth:0,e=a?a.cutHeight:0;C===void 0&&w===void 0?(C=T,w=e):C===void 0?C=T*(w/e):w===void 0&&(w=e*(C/T))}this.images[s]={key:i,frame:f,width:C,height:w,y:Vh(t,"y",0),left:Vh(t,"left",0),right:Vh(t,"right",0)}},kS=function(s,t,i,f,C){var w=this.get(s);i+=w.left,f+=w.y,C&&(i=Math.round(i),f=Math.round(f));var a=this.textureManager.getFrame(w.key,w.frame);t.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i,f,w.width,w.height)};class Nu{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")Uh.call(this,t,i);else if(Array.isArray(t))for(var f=t,C=0,w=f.length;C<w;C++)Uh.call(this,f[C]);else{var f=t;for(var t in f)Uh.call(this,t,f[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var VS={draw:kS};Object.assign(Nu.prototype,VS);const US=Phaser.Utils.Objects.IsPlainObject,zS=Phaser.DOM.AddToDOM,Tf=Phaser.Display.Canvas.CanvasPool,XS=Phaser.GameObjects.GameObject,ze=Phaser.Utils.Objects.GetValue,YS=Phaser.DOM.RemoveFromDOM,WS=xe.SPLITREGEXP;var Mr=null,zh=null,Xh=null;class HS extends i0{constructor(t,i,f,C,w,a,T){if(US(i)){var e=i;i=ze(e,"x",0),f=ze(e,"y",0),C=ze(e,"text",""),w=ze(e,"style")}if(i===void 0&&(i=0),f===void 0&&(f=0),super(t,a),this.renderer=t.sys.game.renderer,this.setPosition(i,f),this.setOrigin(0,0),this.initPipeline(),this.canvas=Tf.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,w){if(w.hasOwnProperty("align")){var u=w.align;delete w.align,w.halign=u}w.hasOwnProperty("stroke")&&!w.hasOwnProperty("strokeThickness")&&(w.strokeThickness=1)}this.style=new Iu(this,w);var y=ze(w,"images",void 0);y&&this.addImage(y),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var d=ze(w,"sharedPool",!0),l,h,r;d?(Mr||(Mr={},zh=new ki,Xh=new xf,this.scene.game.events.once("destroy",function(){Mr=null,zh=null,Xh=null})),Mr.hasOwnProperty(a)||(Mr[a]=new ki),l=Mr[a],h=zh,r=Xh):(l=new ki,h=new ki,r=new xf),this.canvasText=new r0({parent:this,context:this.context,parser:T,style:this.style,pensPool:l,linesPool:h,wrapTextLinesPool:r}),this.parser=T,this.initRTL(),w&&w.padding&&this.setPadding(w.padding),this.setText(C),this.setUrlTagCursorStyle(ze(w,"urlTagCursorStyle","pointer")),ze(w,"interactive",!1)&&this.setInteractive()}preDestroy(){this.style.rtl&&YS(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Tf.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",zS(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,i,f,C){if(typeof t=="object"){var w=t,a=ze(w,"x",null);a!==null?(t=a,f=a):(t=ze(w,"left",0),f=ze(w,"right",t));var T=ze(w,"y",null);T!==null?(i=T,C=T):(i=ze(w,"top",0),C=ze(w,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),f===void 0&&(f=t),C===void 0&&(C=i);return this.padding.left=t,this.padding.top=i,this.padding.right=f,this.padding.bottom=C,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,f=this.style;t&&i.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var C=this.padding,w,a,T=Math.ceil(i.linesWidth);f.fixedWidth===0?(this.width=T+C.left+C.right,w=T):(this.width=f.fixedWidth,w=this.width-C.left-C.right,w<T&&(w=T)),f.fixedHeight===0?(this.height=i.linesHeight+C.top+C.bottom,a=i.linesHeight):(this.height=f.fixedHeight,a=this.height-C.top-C.bottom,a<i.linesHeight&&(a=i.linesHeight));var e=this.width,u=this.height;this.updateDisplayOrigin();var y=f.resolution;e*=y,u*=y,e=Math.max(Math.ceil(e),1),u=Math.max(Math.ceil(u),1);var d=this.canvas,l=this.context;d.width!==e||d.height!==u?(d.width=e,d.height=u,this.frame.setSize(e,u)):l.clearRect(0,0,e,u),l.save(),l.scale(y,y);var h=this.style.rtl?C.right:C.left,r=C.top;i.draw(h,r,w,a),l.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,f){var C=!!this.input;return XS.prototype.setInteractive.call(this,t,i,f),C||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,i,f){return t=this.canvasText.getText(t,i,f,!0),t.split(WS)}getPlainText(t,i,f){return this.canvasText.getPlainText(t,i,f)}getText(t,i,f,C){return C===void 0&&(C=!1),this.canvasText.getText(t,i,f,C)}getSubString(t,i,f){return this.getText(t,i,f)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}get imageManager(){return this._imageManager||(this._imageManager=new Nu(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}generateTexture(t,i,f,C,w){var a=this.canvas;return C===void 0?C=a.width:C*=this.resolution,w===void 0?w=a.height:w*=this.resolution,t0(this.scene,a,t,i,f,C,w),this}}var Ae=function(s,t){return t===void 0?`\\[${s}\\]`:`\\[${s}=(${t})\\]`},ke=function(s){return`\\[/${s}\\]`};const ku="[-.0-9]+",Vu="[a-z]+|#[0-9abcdef]+",Ko="[^\\]]+",n0="esc",a0=Ae(n0),o0=ke(n0),h0="raw",l0=Ae(h0),u0=ke(h0),d0="b",f0=Ae(d0),c0=ke(d0),v0="i",p0=Ae(v0),m0=ke(v0),g0="weight",y0=Ae(g0,ku),x0=ke(g0),T0="size",C0=Ae(T0,ku),S0=ke(T0),E0="color",P0=Ae(E0,Vu),w0=ke(E0),Uu="u",M0=Ae(Uu),b0=Ae(Uu,Vu),A0=ke(Uu),R0="shadow",O0=Ae(R0),L0=ke(R0),zu="stroke",F0=Ae(zu),D0=Ae(zu,Vu),B0=ke(zu),I0="y",G0=Ae(I0,ku),N0=ke(I0),k0="img",V0=Ae(k0,Ko),U0=ke(k0),z0="area",X0=Ae(z0,Ko),Y0=ke(z0),W0="url",H0=Ae(W0,Ko),$0=ke(W0),K0="align",j0=Ae(K0,Ko),J0=ke(K0),Z0=new RegExp(a0,"i"),su=new RegExp(o0,"i"),Q0=new RegExp(l0,"i"),ru=new RegExp(u0,"i"),$S=new RegExp(f0,"i"),KS=new RegExp(c0,"i"),jS=new RegExp(p0,"i"),JS=new RegExp(m0,"i"),Cf=new RegExp(y0,"i"),ZS=new RegExp(x0,"i"),Sf=new RegExp(C0,"i"),QS=new RegExp(S0,"i"),Ef=new RegExp(P0,"i"),qS=new RegExp(w0,"i"),_S=new RegExp(M0,"i"),Pf=new RegExp(b0,"i"),t2=new RegExp(A0,"i"),e2=new RegExp(O0,"i"),i2=new RegExp(L0,"i"),s2=new RegExp(F0,"i"),wf=new RegExp(D0,"i"),r2=new RegExp(B0,"i"),Mf=new RegExp(G0,"i"),n2=new RegExp(N0,"i"),bf=new RegExp(V0,"i"),a2=new RegExp(U0,"i"),Af=new RegExp(X0,"i"),o2=new RegExp(Y0,"i"),Rf=new RegExp(H0,"i"),h2=new RegExp($0,"i"),Of=new RegExp(j0,"i"),l2=new RegExp(J0,"i"),Lf=new RegExp([l0,u0,a0,o0,f0,c0,p0,m0,y0,x0,C0,S0,P0,w0,M0,b0,A0,O0,L0,F0,D0,B0,G0,N0,V0,U0,X0,Y0,H0,$0,j0,J0].join("|"),"ig");var u2=function(s,t){for(var i=[],f=0,C=!1,w=!1;;){var a=Lf.exec(s);if(!a)break;var T=a[0];if(w)if(su.test(T))w=!1;else continue;else if(C)if(ru.test(T))C=!1;else continue;else Z0.test(T)?w=!0:Q0.test(T)&&(C=!0);var e=Lf.lastIndex,u=e-T.length;if(f<u){var y=s.substring(f,u);i.push(y)}t===void 0&&i.push(T),f=e}var d=s.length;return f<d&&i.push(s.substring(f,d)),i};const Te=!1,Se=!0;var d2={plainText:null,prevProp:null},f2=function(s,t){t==null&&(t={});var i="";if(t.img&&Pt(t,Te,"img"),t.esc)su.test(s)?Pt(t,Te,"esc"):i=s;else if(t.raw)ru.test(s)?Pt(t,Te,"raw"):i=s;else if(Z0.test(s))Pt(t,Se,"esc",!0);else if(su.test(s))Pt(t,Te,"esc");else if(Q0.test(s))Pt(t,Se,"raw",!0);else if(ru.test(s))Pt(t,Te,"raw");else if($S.test(s))Pt(t,Se,"b",!0);else if(KS.test(s))Pt(t,Te,"b");else if(jS.test(s))Pt(t,Se,"i",!0);else if(JS.test(s))Pt(t,Te,"i");else if(Cf.test(s)){var f=s.match(Cf);Pt(t,Se,"weight",f[1])}else if(ZS.test(s))Pt(t,Te,"weight");else if(Sf.test(s)){var f=s.match(Sf);Pt(t,Se,"size",`${f[1]}px`)}else if(QS.test(s))Pt(t,Te,"size");else if(Ef.test(s)){var f=s.match(Ef);Pt(t,Se,"color",f[1])}else if(qS.test(s))Pt(t,Te,"color");else if(_S.test(s))Pt(t,Se,"u",!0);else if(Pf.test(s)){var f=s.match(Pf);Pt(t,Se,"u",f[1])}else if(t2.test(s))Pt(t,Te,"u");else if(e2.test(s))Pt(t,Se,"shadow",!0);else if(i2.test(s))Pt(t,Te,"shadow");else if(s2.test(s))Pt(t,Se,"stroke",!0);else if(wf.test(s)){var f=s.match(wf);Pt(t,Se,"stroke",f[1])}else if(r2.test(s))Pt(t,Te,"stroke");else if(Mf.test(s)){var f=s.match(Mf);Pt(t,Se,"y",parseFloat(f[1]))}else if(n2.test(s))Pt(t,Te,"y");else if(bf.test(s)){var f=s.match(bf);Pt(t,Se,"img",f[1])}else if(a2.test(s))Pt(t,Te,"img");else if(Af.test(s)){var f=s.match(Af);Pt(t,Se,"area",f[1])}else if(o2.test(s))Pt(t,Te,"area");else if(Rf.test(s)){var f=s.match(Rf);Pt(t,Se,"url",f[1])}else if(h2.test(s))Pt(t,Te,"url");else if(Of.test(s)){var f=s.match(Of);Pt(t,Se,"align",f[1])}else l2.test(s)?Pt(t,Te,"align"):i=s;var C=d2;return C.plainText=i,C.prop=t,C},Pt=function(s,t,i,f){return t===Se?s[i]=f:s.hasOwnProperty(i)&&delete s[i],s},c2=function(s,t){var i=p2;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=s.fontFamily,t.hasOwnProperty("size")){var f=t.size;typeof f=="number"&&(f=`${f}px`),i.fontSize=f}else i.fontSize=s.fontSize;i.fontStyle=v2(t),t.hasOwnProperty("color")?i.color=t.color:i.color=s.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=s.stroke,i.strokeThickness=s.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=s.strokeThickness):(i.stroke=s.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=s.shadowColor,i.shadowOffsetX=s.shadowOffsetX,i.shadowOffsetY=s.shadowOffsetY,i.shadowBlur=s.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=s.shadowOffsetX,i.shadowOffsetY=s.shadowOffsetY,i.shadowBlur=s.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=s.underlineColor,i.underlineThickness=s.underlineThickness,i.underlineOffset=s.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=s.underlineThickness,i.underlineOffset=s.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},v2=function(s){var t=s.b,i=s.weight,f=s.i;return t||i||f?f?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},p2=new Iu,m2=function(s,t,i){i==null&&(i=g2);var f=[];for(var C in i)t.hasOwnProperty(C)||f.push(`[/${C}]`);for(var C in t){var w=t[C];if(i[C]!==w)switch(C){case"size":f.push(`[size=${w.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":f.push(`[${C}=${w}]`);break;case"u":w===!0?f.push("[u]"):f.push(`[u=${w}]`);break;default:f.push(`[${C}]`);break}}return f.push(s),f.join("")},g2={};class q0{getStrokeThinkness(t,i){var f;return i.hasOwnProperty("stroke")?f=t.strokeThickness:f=0,f}}var y2={splitText:u2,tagTextToProp:f2,propToContextStyle:c2,propToTagText:m2};Object.assign(q0.prototype,y2);class _0 extends HS{constructor(t,i,f,C,w){var a=new q0(w);super(t,i,f,C,w,"rexBBCodeText",a)}}new Iu;Phaser.Utils.Objects.GetValue;const Na=Phaser.Utils.Objects.GetValue;var yo=function(s,t){return t===void 0?s:s[t]},Ls=function(s,t,i){s===void 0&&(s={}),t===void 0&&(t=0);var f=typeof t;return f==="string"?s[t]=i:f==="number"?(s.left=t,s.right=t,s.top=t,s.bottom=t):(s.left=Na(t,"left",0),s.right=Na(t,"right",0),s.top=Na(t,"top",0),s.bottom=Na(t,"bottom",0)),s};class Xu{constructor(t,i){this.setParent(t),this.type=i,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,i){return!1}}Object.assign(Xu.prototype,Ho);const x2={renderContent(){},render(){if(!this.willRender)return this;var s=this.context;if(s.save(),s.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,i=this.drawY;this.autoRound&&(t=Math.round(t),i=Math.round(i)),s.translate(t,i),s.scale(this.scaleX,this.scaleY),s.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),s.restore(),this}},T2=Phaser.Math.RotateAround;var C2=function(s,t,i,f){return f===void 0?f={}:f===!0&&(Yh===void 0&&(Yh={}),f=Yh),f.x=(s-i.drawX)/i.scaleX,f.y=(t-i.drawY)/i.scaleY,i.rotation!==0&&T2(f,0,0,-i.rotation),f},Yh;const S2=Phaser.Geom.Rectangle;var E2=function(s,t){if(this.width===0||this.height===0)return!1;var i=C2(s,t,this,!0);return P2(this).contains(i.x,i.y)},P2=function(s){ka===void 0&&(ka=new S2);var t=s.drawTLX,i=s.drawTLY;return ka.setTo(t,i,s.drawTRX-t,s.drawBLY-i),ka},ka;const w2=Phaser.Math.RotateAround;var tm=function(s,t,i,f){return f===void 0?f={}:f===!0&&(Wh===void 0&&(Wh={}),f=Wh),f.x=t,f.y=i,s.rotation!==0&&w2(f,0,0,s.rotation),f.x=f.x*s.scaleX+s.drawX,f.y=f.y*s.scaleY+s.drawY,f},Wh;const Ff=Phaser.GameObjects.Components.TransformMatrix;var M2=function(s,t,i,f){f===void 0?f={}:f===!0&&(f=b2);var C=t-s.width*s.originX,w=i-s.height*s.originY;return yn===void 0&&(yn=new Ff,Df=new Ff),s.parentContainer?s.getWorldTransformMatrix(yn,Df):yn.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),yn.transformPoint(C,w,f),f},yn,Df,b2={},A2=function(s,t,i,f,C){var w=tm(t,i,f,!0),a=M2(s,w.x,w.y,C);return a},em=function(s,t,i,f,C){typeof i!="number"&&(C=i,i=0,f=0);var w=t.drawCenterX+i,a=t.drawCenterY+f;return A2(s,t,w,a,C)},R2=function(s,t,i){return em(this.parent,this,s,t,i)},im={contains:E2,getWorldPosition:R2};Object.assign(im,x2);const O2=Phaser.Math.DegToRad,L2=Phaser.Math.RadToDeg,Va=Phaser.Utils.Objects.GetValue;class gr extends Xu{constructor(t,i){super(t,i),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setInitialPosition(t,i){return this.x0=t,this.y0=i,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return L2(this._rotation)}set angle(t){this.rotation=O2(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=Va(t,"width",void 0),f=Va(t,"height",void 0),C=Va(t,"scaleX",void 0),w=Va(t,"scaleY",void 0);return i!==void 0?f===void 0&&w===void 0?this.setWidth(i,!0):this.setWidth(i):C!==void 0&&this.setScaleX(C),f!==void 0?i===void 0&&C===void 0?this.setHeight(f,!0):this.setHeight(f):w!==void 0&&this.setScaleY(w),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(gr.prototype,im);var Os=function(s,t,i){return t.hasOwnProperty(s)?t[s]:i[s]};const Zs=Phaser.Utils.Objects.GetValue;class F2 extends gr{constructor(t,i){super(t,"background"),this.setColor(Zs(i,"color",null),Zs(i,"color2",null),Zs(i,"horizontalGradient",!0)),this.setStroke(Zs(i,"stroke",null),Zs(i,"strokeThickness",2)),this.setCornerRadius(Zs(i,"cornerRadius",0),Zs(i,"cornerIteration",null))}set color(t){t=St(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=St(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,f){return f===void 0&&(f=!0),this.color=t,this.color2=i,this.horizontalGradient=f,this}set stroke(t){t=St(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,Os("color2",t,this),Os("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Os("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,Os("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,i){return this.cornerRadius=t,this.cornerIteration=i,this}renderContent(){e0(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Ts=Phaser.Utils.Objects.GetValue;class D2 extends gr{constructor(t,i){super(t,"innerbounds"),this.setColor(Ts(i,"color",null),Ts(i,"color2",null),Ts(i,"horizontalGradient",!0)),this.setStroke(Ts(i,"stroke",null),Ts(i,"strokeThickness",2))}set color(t){t=St(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=St(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,f){return f===void 0&&(f=!0),this.color=t,this.color2=i,this.horizontalGradient=f,this}set stroke(t){t=St(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Ts(t,"color2",null),Ts(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Ts(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,i=t.left,f=t.top,C=this.parent.width-t.left-t.right,w=this.parent.height-t.top-t.bottom,a=this.context;if(this.color!=null){var T;if(this.color2!=null){var e;this.horizontalGradient?e=a.createLinearGradient(0,0,C,0):e=a.createLinearGradient(0,0,0,w),e.addColorStop(0,this.color),e.addColorStop(1,this.color2),T=e}else T=this.color;a.fillStyle=T,a.fillRect(i,f,C,w)}this.stroke!=null&&this.strokeThickness>0&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.strokeRect(i,f,C,w))}}const pe=Phaser.Utils.Objects.GetValue;class jo{constructor(t,i){this.parent=t,this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(pe(t,"bold",!1)),this.setItalic(pe(t,"italic",!1)),this.setFontSize(pe(t,"fontSize","16px")),this.setFontFamily(pe(t,"fontFamily","Courier")),this.setColor(pe(t,"color","#fff")),this.setStrokeStyle(pe(t,"stroke",null),pe(t,"strokeThickness",0)),this.setShadow(pe(t,"shadowColor",null),pe(t,"shadowOffsetX",0),pe(t,"shadowOffsetY",0),pe(t,"shadowBlur",0)),this.setOffset(pe(t,"offsetX",0),pe(t,"offsetY",0)),this.setSpace(pe(t,"leftSpace",0),pe(t,"rightSpace",0)),this.setAlign(pe(t,"align",void 0)),this.setBackgroundColor(pe(t,"backgroundColor",null)),this.setBackgroundHeight(pe(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(pe(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Os("stroke",t,this),Os("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Os("shadowOffsetX",t,this),Os("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new jo(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=St(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,i){return this.stroke=St(t),i!==void 0&&(this.strokeThickness=i),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=St(t),this}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.shadowOffsetX=t,this.shadowOffsetY=i,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,i,f,C){return this.setShadowColor(t).setShadowOffset(i,f).setShadowBlur(C),this}setBackgroundColor(t){return this.backgroundColor=St(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,i){return this.setOffsetX(t).setOffsetY(i),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,i){return this.setLeftSpace(t).setRightSpace(i),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var i=this.hasFill,f=this.hasStroke;return t.fillStyle=i?this.color:"#000",t.strokeStyle=f?this.stroke:"#000",t.lineWidth=f?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,i){return this.syncFont(t).syncStyle(t),t.measureText(i)}}var B2=function(s,t){s===void 0&&(s=0),t===void 0&&(t=0);var i=this.fixedWidth!==s||this.fixedHeight!==t;return i?(this.fixedWidth=s,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(s>0?s:this.width,t>0?t:this.height),this):this},I2=function(s,t){var i=this.padding,f=i.left,C=i.right,w=i.top,a=i.bottom;return Ls(i,s,t),this.dirty=this.dirty||f!=i.left||C!=i.right||w!=i.top||a!=i.bottom,this},G2=function(s){return yo(this.padding,s)},N2=function(s){return this.textStyle.modify(s),this},k2=function(s){return this.defaultTextStyle.modify(s),this},V2=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},U2=function(s){return this.testString=s,this};const z2=Phaser.Utils.Array.Remove;var X2=function(s){return this.poolManager.free(s),z2(this.children,s),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},Y2=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const W2=Phaser.Utils.Array.Remove;var H2=function(s){return W2(this.children,s),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},$2=function(){return this.setText(),this},sm=function(s,t){var i=Array.isArray(s);return t===void 0||t===this.children.length?i?this.children.push(...s):this.children.push(s):i?this.children.splice(t,0,...s):this.children.splice(t,0,s),this.lastAppendedChildren.length=0,i?this.lastAppendedChildren.push(...s):this.lastAppendedChildren.push(s),this};const Gs="text",rm="image",nm="drawer",am="space",Yu="command";var om=function(s){return s.type===Gs&&s.text===`
`},hm=function(s){return s.type===Gs&&s.text==="\f"},K2=function(s){return s.type===Gs&&s.text===" "},an=function(s){return s.type===Gs},j2=function(s){return s.type===Yu};class lm extends gr{constructor(t,i,f){super(t,Gs),this.updateTextFlag=!1,this.style=new jo(this,f),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var f,C;"actualBoundingBoxAscent"in i?(f=i.actualBoundingBoxAscent,C=i.actualBoundingBoxDescent):(f=0,C=0),this.textHeight=f+C,this.ascent=f,this.descent=C}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,i=this.style;if(i.hasBackgroundColor){t.fillStyle=i.backgroundColor;var f=this.drawTLX,C=this.drawTRX-f,w=i.backgroundBottomY;w==null&&(w=this.drawBLY);var a=i.backgroundHeight;a==null&&(a=w-this.drawTLY);var T=w-a;t.fillRect(f,T,C,a)}var e=i.hasFill,u=i.hasStroke;!e&&!u||(i.syncFont(t).syncStyle(t),u&&(i.syncShadow(t),t.strokeText(this.text,0,0)),e&&(i.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var J2=function(s,t){t&&this.textStyle.modify(t);var i=this.poolManager.allocate(Gs);return i===null?i=new lm(this,s,this.textStyle):i.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),i},Z2=function(s,t){t&&this.textStyle.modify(t);for(var i=[],f=0,C=s.length;f<C;f++){var w=s.charAt(f),a=this.poolManager.allocate(Gs);a===null?a=new lm(this,w,this.textStyle):a.setParent(this).setActive().modifyStyle(this.textStyle).setText(w),i.push(a)}return i},aa=function(s,t){var i=this.createCharChildren(s,t);return this.addChild(i),this},Q2=function(s,t){return s===void 0&&(s=""),this.removeChildren(),aa.call(this,s,t),this.dirty=!0,this},q2=function(s,t,i){var f=this.createCharChildren(t,i);return s=this.getCharChildIndex(s,!0),this.addChild(f,s),this},_2=function(s,t){t===void 0&&(t=1);for(var i=0;i<t;i++){var f=this.getCharChildIndex(s,!0);if(f===void 0)break;this.removeChild(this.children[f])}return this},tE=function(s){var t="";return this.forEachCharChild(function(i){t+=i.text},void 0,s),t};class eE extends gr{constructor(t,i,f){super(t,rm),this.setTexture(i,f)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,i){return this.key=t,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(t,i),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,i=this.frameObj,f=this.frameWidth,C=this.frameHeight;t.drawImage(i.source.image,i.cutX,i.cutY,f,C,0,0,f,C)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var iE=function(s,t,i){var f=this.poolManager.allocate(rm);return f===null?f=new eE(this,s,t):f.setParent(this).setActive().setTexture(s,t),f.modifyPorperties(i),f},um=function(s,t,i){var f=this.createImageChild(s,t,i);return this.addChild(f),this};class sE extends gr{constructor(t,i,f,C){super(t,nm),this.setRenderCallback(i),this.setDrawerSize(f,C)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,i){return t===!0?(this.toLocalPosition=!1,t=void 0,i=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),i===void 0&&(i=t),this.drawerWidth=t,this.drawerHeight=i,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var rE=function(s,t,i){var f=this.poolManager.allocate(nm);return f===null?f=new sE(this,s,t,i):f.setParent(this).setActive().setRenderCallback(s).setDrawerSize(t,i),f},nE=function(s,t,i){var f=this.createDrawerChild(s,t,i);return this.addChild(f),this};class aE extends gr{constructor(t,i){super(t,am),this.setSpaceWidth(i)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}}var oE=function(s){var t=this.poolManager.allocate(am);return t===null?t=new aE(this,s):t.setParent(this).setActive().setSpaceWidth(s),t},dm=function(s){var t=this.createSpaceChild(s);return this.addChild(t),this};class hE extends Xu{constructor(t,i,f,C,w){super(t,Yu),this.setName(i).setParameter(C).setCallback(f,w)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,i){return this.callback=t,this.scope=i,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var lE=function(s,t,i,f){var C=this.poolManager.allocate(Yu);return C===null?C=new hE(this,s,t,i,f):C.setParent(this).setActive().setName(s).setCallback(t,f).setParameter(i),C},yt=function(s,t,i,f){var C=this.createCommandChild(s,t,i,f);return this.addChild(C),this},uE=function(s){return s===void 0?s={}:typeof s=="object"&&(s=Si(s)),this.wrapConfig=s,this},dE=function(s,t,i,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var C=s.length,w=t,a=f.word,T=0;w<C;){var e=s[w];if(!e.renderable){a.push(e),w++;continue}var u=e.type===Gs?e.text:null;if(u!==null&&u!==" "&&u!==`
`&&u!=="\f")a.push(e),T+=e.outerWidth,w++;else{w===t&&(a.push(e),T+=e.outerWidth);break}if(i)break}return f.width=T,f},fm=function(s){for(var t=0,i=s.length;t<i;t++){var f=s[t];if(f.align!==void 0)return f.align}},cm=function(s,t,i){if(!(t===0&&i===0))for(var f=0,C=s.length;f<C;f++){var w=s[f];!w.renderable||(w.x+=t,w.y+=i)}},fE=function(s,t,i){var f=s.hAlign,C=s.vAlign,w,a,T=s.linesHeight;switch(C){case 1:case"center":a=(i-T)/2;break;case 2:case"bottom":a=i-T;break;default:a=0;break}for(var e=s.lines,u=0,y=e.length;u<y;u++){var d=e[u],l=d.width,h=d.children,r=fm(h);switch(r===void 0&&(r=f),r){case 1:case"center":w=(t-l)/2;break;case 2:case"right":w=t-l;break;default:w=0;break}cm(h,w,a)}},Bf=function(){var s=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,i;return"actualBoundingBoxAscent"in s?(t=s.actualBoundingBoxAscent,i=s.actualBoundingBoxDescent):(t=0,i=0),Ua.ascent=t,Ua.descent=i,Ua.height=t+i,Ua},Ua={};const Je=Phaser.Utils.Objects.GetValue;var cE=function(s){var t=Je(s,"start",0);Ls(this.wrapPadding,Je(s,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Je(s,"lineHeight"),w=Je(s,"ascent",C),a;if(C===void 0){var T=Je(s,"useDefaultTextHeight",!1);if(a=Je(s,"maxLines",0),this.fixedHeight>0&&!T){var Y=this.fixedHeight-i;if(a>0)C=Y/a;else{var e=Bf.call(this);C=e.height,w=e.ascent,a=Math.floor((Y-w)/C)}}else{var e=Bf.call(this);C=e.height,w=e.ascent}}else if(this.fixedHeight>0){if(a=Je(s,"maxLines"),a===void 0){var Y=this.fixedHeight-i;a=Math.floor(Y/C)}}else a=Je(s,"maxLines",0);w===void 0&&(w=C);var u=a===0,y=Je(s,"wrapWidth",void 0);y===void 0&&(this.fixedWidth>0?y=this.fixedWidth-f:y=1/0);for(var d=Je(s,"letterSpacing",0),l=Je(s,"hAlign",0),h=Je(s,"vAlign",0),r=Je(s,"charWrap",!1),n={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:w,lineHeight:C,maxLines:a,wrapWidth:y,letterSpacing:d,hAlign:l,vAlign:h,charWrap:r,children:[],lines:[],maxLineWidth:0,linesHeight:0},v=this.children,o=0,c=v.length;o<c;o++)v[o].setActive(!1);y+=d;for(var m=this.padding.left+this.wrapPadding.left,p=this.padding.top+this.wrapPadding.top+w,g=m,x=p,E=y,P=t,S=v.length,M=n.children,b=n.lines,A=[],L=0,R=0,O;P<S;){O=dE(v,P,r,O);var D=O.word,B=D.length,G=O.width+B*d;P+=B;var z=om(D[0]),X=hm(D[0]),U=z||X;if(E<G||U){if(U){var V=D[0];V.setActive().setPosition(g,x),M.push(V),A.push(V)}g=m,x+=C,E=y,b.push({children:A,width:L}),R=Math.max(R,L),L=0,A=[];var N=X||!u&&b.length===a;if(N)break;if(U)continue}E-=G,L+=G;for(var o=0,c=D.length;o<c;o++){var W=D[o];W.setActive(),M.push(W),A.push(W),W.renderable&&(W.setPosition(g,x),g+=W.outerWidth+d)}}A.length>0&&(b.push({children:A,width:L}),R=Math.max(R,L)),n.start+=M.length,n.isLastPage=n.start===S,n.maxLineWidth=R,n.linesHeight=b.length*C;var F=this.fixedWidth>0?this.fixedWidth:n.maxLineWidth+f,I=this.fixedHeight>0?this.fixedHeight:n.linesHeight+i,k=F-f,Y=I-i;fE(n,k,Y),this.setCanvasSize(F,I);for(var o=0,c=M.length;o<c;o++){var W=M[o];!W.renderable||(W.x0=W.x,W.y0=W.y)}return n};const vE=Phaser.Utils.Objects.Merge;var pE=function(s){return s===void 0&&(s={}),cE.call(this,vE(s,this.wrapConfig))},mE=function(s,t,i){var f=s.hAlign,C=s.vAlign,w,a,T=s.rtl,e=s.lines,u=s.lineWidth,y=s.linesWidth;switch(f){case 1:case"center":w=(t-y)/2;break;case 2:case"right":w=t-y;break;default:w=0;break}T&&(w+=u);for(var d=0,l=e.length;d<l;d++){var h=e[T?l-d-1:d],r=h.children,n=h.height,v=fm(r);switch(v===void 0&&(v=C),v){case 1:case"center":a=(i-n)/2;break;case 2:case"bottom":a=i-n;break;default:a=0;break}cm(r,w,a),w+=u}};const Ze=Phaser.Utils.Objects.GetValue;var gE=function(s){var t=Ze(s,"start",0);Ls(this.wrapPadding,Ze(s,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Ze(s,"lineWidth",void 0),w;if(C===void 0)if(w=Ze(s,"maxLines",0),this.fixedWidth>0){var V=this.fixedWidth-f;C=V/w}else C=0;else if(this.fixedWidth>0){if(w=Ze(s,"maxLines",void 0),w===void 0){var V=this.fixedWidth-f;w=Math.floor(V/C)+1}}else w=Ze(s,"maxLines",0);var a=w===0,T=Ze(s,"fixedChildHeight",void 0);if(T===void 0){var e=Ze(s,"charPerLine",void 0);if(e!==void 0){var N=this.fixedHeight-i;T=Math.floor(N/e)}}var u=Ze(s,"wrapHeight",void 0);u===void 0&&(this.fixedHeight>0?u=this.fixedHeight-i:u=1/0);for(var y=Ze(s,"letterSpacing",0),d=Ze(s,"rtl",!0),l=Ze(s,"hAlign",d?2:0),h=Ze(s,"vAlign",0),r={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:C,maxLines:w,fixedChildHeight:T,wrapHeight:u,letterSpacing:y,hAlign:l,vAlign:h,rtl:d,children:[],lines:[],maxLineHeight:0,linesWidth:0},n=this.children,v=0,o=n.length;v<o;v++)n[v].setActive(!1);u+=y;for(var c=this.padding.left+this.wrapPadding.left,m=this.padding.top+this.wrapPadding.top,p=c,g=m,x=u,E=t,P=n.length,S=r.children,M=r.lines,b=[],A=0,L=0;E<P;){var R=n[E];if(E++,!W.renderable){R.setActive(),S.push(R),b.push(R);continue}var O=(T!==void 0?T:R.height)+y,D=om(R),B=hm(R),G=D||B;if(x<O||G){D&&(R.setActive().setPosition(p,g).setOrigin(.5),S.push(R),b.push(R)),p=c,g=m,x=u,M.push({children:b,height:A}),L=Math.max(L,A),A=0,b=[];var z=B||!a&&M.length===w;if(z)break;if(G)continue}x-=O,A+=O,R.setActive().setPosition(p,g).setOrigin(.5),S.push(R),b.push(R),g+=O}b.length>0&&(M.push({children:b,height:A}),L=Math.max(L,A)),r.start+=S.length,r.isLastPage=r.start===P,r.maxLineHeight=L,r.linesWidth=M.length*C;var X=this.fixedWidth>0?this.fixedWidth:r.linesWidth+f,U=this.fixedHeight>0?this.fixedHeight:r.maxLineHeight+i,V=X-f,N=U-i;mE(r,V,N),this.setCanvasSize(X,U);for(var v=0,o=S.length;v<o;v++){var W=S[v];!W.renderable||(W.x0=W.x,W.y0=W.y)}return r};const yE=Phaser.Utils.Objects.Merge;var xE=function(s){return s===void 0&&(s={}),gE.call(this,yE(s,this.wrapConfig))};const If=Phaser.Utils.Objects.GetValue;var TE=function(s){var t=If(this.wrapConfig,"callback");return t||(t=If(s,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,s)};const CE={setVAlign(s){return this.wrapConfig.vAlign=s,this},setHAlign(s){return this.wrapConfig.hAlign=s,this}};var SE=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var s,t=0,i=this.children.length;t<i;t++)s=this.children[t],s.active&&s.render();this.innerBounds.active&&this.innerBounds.render()},EE=function(s,t,i){i===void 0&&(i=!0);for(var f=this.children,C=0,w=0,a=f.length;w<a;w++){var T=f[w];if(!(i&&!T.active)){var e;if(t?e=s.call(this,T,C,f):e=s(T,C,f),C++,e)break}}return this},PE=function(s,t,i){i===void 0&&(i=!0);for(var f=this.children,C=0,w=0,a=f.length;w<a;w++){var T=f[w];if(!(i&&!T.active)&&T.renderable&&!T.removed){var e;if(t?e=s.call(this,T,C,f):e=s(T,C,f),C++,e)break}}return this},wE=function(s,t,i){i===void 0&&(i=!0);for(var f=this.children,C=0,w=0,a=f.length;w<a;w++){var T=f[w];if(!(i&&!T.active)&&an(T)&&!T.removed){var e;if(t?e=s.call(this,T,C,f):e=s(T,C,f),C++,e)break}}return this},ME=function(){return this.children};const bE=Phaser.Utils.Array.GetAll;var AE=function(){return bE(this.children,"active",!0)},RE=function(s,t){return t===void 0&&(t=[]),this.forEachCharChild(function(i){t.push(i)},void 0,s),t},OE=function(){return this.lastAppendedChildren},LE=function(s,t,i,f){typeof t!="number"&&(f=t,t=0,i=0);var C=s.drawCenterX+t,w=s.drawCenterY+i;return tm(s,C,w,f)};const FE=Phaser.Math.Distance.BetweenPointsSquared;var DE=function(s,t){var i={x:s,y:t},f=1/0,C=null;return this.forEachRenderableChild(function(w){var a=FE(i,LE(w,!0));f>a&&(f=a,C=w)}),C},BE=function(s,t,i,f){return typeof s=="number"&&(s=this.getCharChild(s,!0)),em(this,s,t,i,f)},IE=function(){for(var s=this.children,t=0,i=0,f=0,C=s.length;f<C;f++){var w=s[f];if(!(!w.renderable||!w.active||!w.visible)){var a=w.x0!==void 0?w.x0:w.x,T=w.y0!==void 0?w.y0:w.y;t=Math.max(t,a),i=Math.max(i,T)}}var e=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,u=i+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==e||this.height!==u)&&(this.dirty=!0,this.setCanvasSize(e,u)),this},GE=function(s,t){t===void 0&&(t=!0);for(var i=this.children,f=0,C=i.length;f<C;f++){var w=i[f];if(!(t&&!w.active)&&an(w)&&!w.removed){if(s===0)return f;s--}}},NE=function(s,t){t===void 0&&(t=!0);for(var i=this.children,f=0,C=i.length;f<C;f++){var w=i[f];if(!(t&&!w.active)&&an(w)&&!w.removed){if(s===0)return w;s--}}},kE=function(s,t){if(typeof s!="number"&&(s=this.children.indexOf(s),s<0))return null;t===void 0&&(t=!0);var i=this.children;s>=i.length&&(s=i.length);for(var f=0,C=0;C<s;C++){var w=i[C];t&&!w.active||an(w)&&!w.removed&&f++}return f},VE=function(s){return s===void 0&&(s=!0),this.childrenInteractiveEnable!==s&&(this.lastOverChild=null),this.childrenInteractiveEnable=s,this},Wu=function(f,t,i){for(var f=f,C=0,w=f.length;C<w;C++){var a=f[C];if(!(!a.active||!a.renderable)&&a.contains(t,i))return a}return null},UE=function(){return this.on("pointerdown",zE,this).on("pointerdown",XE,this).on("pointermove",Hh,this).on("pointerover",Hh,this).on("pointerout",function(s,t){Hh.call(this,s,null,null,t)},this),this},zE=function(s,t,i,f){if(!!this.childrenInteractiveEnable){var C=Wu(this.children,t,i);!C||this.emit("child.pointerdown",C,s,t,i,f)}},XE=function(s,t,i,f){if(!!this.childrenInteractiveEnable){var C=Wu(this.children,t,i);!C||this.emit("child.pointerup",C,s,t,i,f)}},Hh=function(s,t,i,f){if(!!this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,s,t,i,f),this.lastOverChild=null);return}var C=Wu(this.children,t,i);C!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,s,t,i,f),C!==null&&this.emit("child.pointerover",C,s,t,i,f),this.lastOverChild=C)}};const YE=Phaser.GameObjects.GameObject;var WE=function(s,t,i){var f=!!this.input;return YE.prototype.setInteractive.call(this,s,t,i),f||UE.call(this),this};const HE=Phaser.Utils.Array.BringToTop,$E=Phaser.Utils.Array.SendToBack,KE=Phaser.Utils.Array.MoveUp,jE=Phaser.Utils.Array.MoveDown,JE=Phaser.Utils.Array.MoveAbove,ZE=Phaser.Utils.Array.MoveBelow,QE={moveChildToFist(s){return $E(this.children,s),this},moveChildToLast(s){return HE(this.children,s),this},movechildUp(s){return KE(this.children,s),this},movechildDown(s){return jE(this.children,s),this},movechildAbove(s,t){return JE(this.children,s,t),this},movechildBelow(s,t){return ZE(this.children,s,t),this}},qE={setBackgroundColor(s,t,i){return this.background.setColor(s,t,i),this},setBackgroundStroke(s,t){return this.background.setStroke(s,t),this},setBackgroundCornerRadius(s,t){return this.background.setCornerRadius(s,t),this}},_E={setInnerBoundsColor(s,t,i){return this.innerBounds.setColor(s,t,i),this},setInnerBoundsStroke(s,t){return this.innerBounds.setStroke(s,t),this}};var vm={setFixedSize:B2,setPadding:I2,getPadding:G2,modifyTextStyle:N2,modifyDefaultTextStyle:k2,resetTextStyle:V2,setTestString:U2,removeChild:X2,removeChildren:Y2,popChild:H2,clearContent:$2,addChild:sm,createCharChild:J2,createCharChildren:Z2,setText:Q2,appendText:aa,insertText:q2,removeText:_2,getText:tE,createImageChild:iE,appendImage:um,createDrawerChild:rE,appendDrawer:nE,createSpaceChild:oE,appendSpace:dm,createCommandChild:lE,appendCommand:yt,setWrapConfig:uE,runWordWrap:pE,runVerticalWrap:xE,runWrap:TE,renderContent:SE,forEachChild:EE,forEachRenderableChild:PE,forEachCharChild:wE,getChildren:ME,getActiveChildren:AE,getCharChildren:RE,getLastAppendedChildren:OE,getNearestChild:DE,getCharWorldPosition:BE,setToMinSize:IE,getCharChildIndex:GE,getCharChild:NE,getCharIndex:kE,setChildrenInteractiveEnable:VE,setInteractive:WE};Object.assign(vm,QE,qE,_E,CE);const tP=Phaser.Utils.Objects.GetFastValue;var eP={};class iP{constructor(t){this.pools=tP(t,"pools",eP)}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new ki),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,f=t.length;i<f;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Gf=Phaser.Utils.Objects.IsPlainObject,Xe=Phaser.Utils.Objects.GetValue;class Jo extends na{constructor(t,i,f,C,w,a){Gf(i)?(a=i,i=Xe(a,"x",0),f=Xe(a,"y",0),C=Xe(a,"width",0),w=Xe(a,"height",0)):Gf(C)&&(a=C,C=Xe(a,"width",0),w=Xe(a,"height",0));var T=C===0?1:C,e=w===0?1:w;super(t,i,f,T,e),this.type="rexDynamicText",this.autoRound=!0,this.padding=Ls(),this.wrapPadding=Ls();var u=Xe(a,"style",void 0);this.defaultTextStyle=new jo(null,u),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(Xe(a,"testString","|M\xC9qgy")),this.background=new F2(this,Xe(a,"background",void 0)),this.innerBounds=new D2(this,Xe(a,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new iP(a),this.setFixedSize(C,w),this.setPadding(Xe(a,"padding",0)),this.setWrapConfig(Xe(a,"wrap",void 0)),this.setChildrenInteractiveEnable(Xe(a,"childrenInteractive",!1));var y=Xe(a,"text",void 0);y&&this.setText(y)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,i){return this.setFixedSize(t,i),this}}Object.assign(Jo.prototype,vm);var sP=function(s){return dr(s)?s.sys.sound:s.sound};const rP=Phaser.Utils.Objects.GetValue;class Zo extends Ne{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(rP(i,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=nP[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const nP={no:0,lazy:1,always:2},aP=Phaser.Utils.Objects.GetValue;class oP extends Zo{constructor(t,i){super(t,i);var f=this.scene?"update":"step";this.tickEventName=aP(i,"tickEventName",f),this.isSceneTicker=!hP(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var hP=function(s){return s==="step"||s==="poststep"};const Wi=Phaser.Utils.Objects.GetValue,Nf=Phaser.Math.Clamp;class pm{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Wi(t,"state",xn),this.timeScale=Wi(t,"timeScale",1),this.delay=Wi(t,"delay",0),this.repeat=Wi(t,"repeat",0),this.repeatCounter=Wi(t,"repeatCounter",0),this.repeatDelay=Wi(t,"repeatDelay",0),this.duration=Wi(t,"duration",0),this.nowTime=Wi(t,"nowTime",0),this.justRestart=Wi(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?br:Tn,this.repeatCounter=0,this}stop(){return this.state=xn,this}update(t,i){this.state===xn||this.state===za||i===0||this.timeScale===0||(this.nowTime+=i*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=kf)):(this.nowTime=this.duration,this.state=za):this.nowTime>=0&&(this.state=br))}get t(){var t;switch(this.state){case xn:case Tn:case kf:t=0;break;case br:t=this.nowTime/this.duration;break;case za:t=1;break}return Nf(t,0,1)}set t(t){t=Nf(t,-1,1),t<0?(this.state=Tn,this.nowTime=-this.delay*t):(this.state=br,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===xn}get isDelay(){return this.state===Tn}get isCountDown(){return this.state===br}get isRunning(){return this.state===Tn||this.state===br}get isDone(){return this.state===za}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const xn=0,Tn=1,br=2,kf=3,za=-1;class lP extends oP{constructor(t,i){super(t,i),this.timer=new pm}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Cn=Phaser.Utils.Objects.GetValue,Vf=Phaser.Utils.Objects.GetAdvancedValue,uP=Phaser.Tweens.Builders.GetEaseFunction;class un extends lP{resetFromJSON(t){return this.timer.resetFromJSON(Cn(t,"timer")),this.setEnable(Cn(t,"enable",!0)),this.setTarget(Cn(t,"target",this.parent)),this.setDelay(Vf(t,"delay",0)),this.setDuration(Vf(t,"duration",1e3)),this.setEase(Cn(t,"ease","Linear")),this.setRepeat(Cn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=uP(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var f=this.target,C=this.timer;return C.update(t,i),C.isDelay||this.updateGameObject(f,C),this.emit("update",f,this),C.isDone&&this.complete(),this}updateGameObject(t,i){}}const dP=Phaser.Sound.BaseSound;var Hu=function(s){return s instanceof dP};const Uf=Phaser.Utils.Objects.GetValue,zf=Phaser.Utils.Objects.GetAdvancedValue,fP=Phaser.Math.Linear;class mm extends un{constructor(t,i,f){Hu(t)&&(f=i,i=t,t=void 0),i.active=!0,i.scene=t,i.game=i.manager.game,super(i,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Uf(t,"mode",0)),this.setEnable(Uf(t,"enable",!0)),this.setVolumeRange(zf(t,"volume.start",this.parent.volume),zf(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=cP[t]),this.mode=t,this}setVolumeRange(t,i){return this.volume.start=t,this.volume.end=i,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,i){t.volume=fP(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const cP={stop:1,destroy:2};var Qo=function(s,t,i,f,C){Hu(s)&&(C=f,f=i,i=t,t=s,s=void 0),f===void 0&&(f=1),C===void 0&&(C=0);var w={mode:0,volume:{start:C,end:f},duration:i};typeof t=="string"&&(t=s.sys.sound.add(t));var a;return t.hasOwnProperty("_fade")?(a=t._fade,a.stop().resetFromJSON(w)):(a=new mm(s,t,w),t._fade=a),a.start(),t.isPlaying||t.setVolume(C).play(),t},on=function(s,t,i,f){Hu(s)&&(f=i,i=t,t=s,s=void 0),f===void 0&&(f=!0);var C={mode:f?2:1,volume:{start:t.volume,end:0},duration:i},w;return t.hasOwnProperty("_fade")?(w=t._fade,w.stop().resetFromJSON(C)):(w=new mm(s,t,C),t._fade=w),w.start(),t.isPlaying||t.play(),t};const vP={setBackgroundMusicLoopValue(s){return this.backgroundMusicLoopValue=s,this},setBackgroundMusicFadeTime(s){return this.backgroundMusicFadeTime=s,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(s){return this.backgroundMusic=s,s&&(s.setLoop(this.backgroundMusicLoopValue),s.once("complete",function(){this.backgroundMusic===s&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===s&&(this.backgroundMusic=void 0)},this),s.isPlaying||s.play()),this},playBackgroundMusic(s){return this.backgroundMusic&&this.backgroundMusic.key===s?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.sound.add(s)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(s){return this.backgroundMusic&&Qo(this.backgroundMusic,s,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(s,t){return this.backgroundMusic&&on(this.backgroundMusic,s,t),this},crossFadeBackgroundMusic(s,t){var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(s).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=i,this},setBackgroundMusicVolume(s){return this.backgroundMusicVolume=s,this}},pP={setBackgroundMusic2LoopValue(s){return this.backgroundMusic2LoopValue=s,this},setBackgroundMusic2FadeTime(s){return this.backgroundMusic2FadeTime=s,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(s){return this.backgroundMusic2=s,s&&(s.setLoop(this.backgroundMusic2LoopValue),s.once("complete",function(){this.backgroundMusic2===s&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===s&&(this.backgroundMusic2=void 0)},this),s.isPlaying||s.play()),this},playBackgroundMusic2(s){return this.backgroundMusic2&&this.backgroundMusic2.key===s?this:(this.stopBackgroundMusic2(),this.setCurrentBackgroundMusic2(this.sound.add(s)),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this)},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(s){return this.backgroundMusic2&&Qo(this.backgroundMusic2,s,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(s,t){return this.backgroundMusic2&&on(this.backgroundMusic2,s,t),this},crossFadeBackgroundMusic2(s,t){var i=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(s).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=i,this},setBackgroundMusic2Volume(s){return this.backgroundMusic2Volume=s,this}},Xf=Phaser.Utils.Array.Remove,mP={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(s){var t=this.sound.add(s);return t.setVolume(this.soundEffectsVolume),this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.sound&&Xf(this.soundEffects,t)},this).once("destroy",function(){!this.sound||Xf(this.soundEffects,t)},this).play(),this},fadeInSoundEffect(s){var t=this.getLastSoundEffect();return t&&Qo(t,s,this.soundEffectsVolume,0),this},fadeOutSoundEffect(s,t){var i=this.getLastSoundEffect();return i&&on(i,s,t),this},fadeOutAllSoundEffects(s,t){for(var i=this.soundEffects.length-1;i>=0;i--)on(this.soundEffects[i],s,t);return this},setSoundEffectVolume(s,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setVolume(s)}else this.soundEffectsVolume=s;return this}},Yf=Phaser.Utils.Array.Remove,gP={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(s){var t=this.sound.add(s);return t.setVolume(this.soundEffects2Volume),this.soundEffects2.push(t),t.once("complete",function(){t.destroy(),this.sound&&Yf(this.soundEffects2,t)},this).once("destroy",function(){!this.sound||Yf(this.soundEffects2,t)},this).play(),this},fadeInSoundEffect2(s){var t=this.getLastSoundEffect2();return t&&Qo(t,s,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(s,t){var i=this.getLastSoundEffect2();return i&&on(i,s,t),this},fadeOutAllSoundEffects2(s,t){for(var i=this.soundEffects2.length-1;i>=0;i--)on(this.soundEffects2[i],s,t);return this},setSoundEffect2Volume(s,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setVolume(s)}else this.soundEffects2Volume=s;return this}};var gm={};Object.assign(gm,vP,pP,mP,gP);const Mi=Phaser.Utils.Objects.GetValue;class ym{constructor(t,i){this.sound=sP(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Mi(i,"bgm.volume",1),this.setBackgroundMusicLoopValue(Mi(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Mi(i,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Mi(i,"bgm2.volume",1),this.setBackgroundMusic2LoopValue(Mi(i,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Mi(i,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Mi(i,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Mi(i,"soundEffect2.volume",1);var f=Mi(i,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f);var C=Mi(i,"bgm2.initial",void 0);C&&this.setCurrentBackgroundMusic2(C)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var i=this.soundEffects,f=0,C=i.length;f<C;f++)i[f].setVolume(t)}}Object.assign(ym.prototype,gm);const $h=Phaser.Utils.Objects.GetValue;class yP extends Zo{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=$h(t,"isRunning",!1),this.timeScale=$h(t,"timeScale",1),this.now=$h(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class xP extends yP{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,i){return!this.isRunning||this.timeScale===0?this:(this.tick(i),this)}}var TP=function(s,t){return t===void 0&&(t=.5),s<=t?s=s/t:s=1-(s-t)/(1-t),s};const Wf=Phaser.Math.Clamp;class CP{constructor(t,i){this.setTimeline(t).reset(i)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,i,f,C){return this.target=t,this.onStart=i,this.onProgress=f,this.onComplete=C,this}setDuration(t,i){return i===void 0&&(i=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=i,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Wf(t,0,1),this.yoyo&&(t=TP(t)),t}setProgress(t){t=Wf(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}class SP extends ki{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var i=0,f=t.length;i<f;i++)this.free(t[i]);return this}}const EP=Phaser.Utils.Objects.GetValue,PP=new SP;class wP extends xP{constructor(t,i){super(t,i),this.addedTimers=[],this.timers=[],this.timerPool=EP(i,"pool",PP)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(t):i=new CP(this,t),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(t,i,f,C){var w=this.addTimer({duration:t,onComplete:function(a,T,e){f===void 0&&(f=[]),f.push(e),i.apply(C,f)}});return w}getTimers(t){for(var i=[],f=[this.addedTimers,this.timers],C=0,w=f.length;C<w;C++)for(var a=f[C],T=0,e=a.length;T<e;T++){var u=a[T];u.name===t&&i.push(u)}return i}update(t,i){if(super.update(t,i),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],C=0,w=this.timers.length;C<w;C++){var a=this.timers[C],T=a.update(this.now,this.delta);T?this.timerPool.free(a):f.push(a)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const MP=Phaser.Utils.Objects.GetValue;var bP=function(s,t){var i=MP(t,"sounds");return i!==!1&&(this.soundManager=new ym(s,i)),this.gameObjectManagers={},this.timeline=new wP(this),this.managersScene=s,this},AP=function(s){this.timeline.timeScale=s;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(s);return this},RP=function(){return this.timeline.timeScale},OP=function(s){this.soundManager&&this.soundManager.destroy(),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(s),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0};const LP={hasProperty(s){var t=this.gameObject;if(t.hasOwnProperty(s))return!0;var i=t[s];return i!==void 0},getProperty(s){return this.gameObject[s]},setProperty(s,t){return this.gameObject[s]=t,this},easeProperty(s,t,i,f,C,w,a){var T=this.tweens,e=T[s];e&&e.remove();var u=this.gameObject,y={targets:u,duration:i,ease:f,repeat:C,yoyo:w,onComplete:function(){T[s].remove(),T[s]=null,a&&a(u,s)},onCompleteScope:this};return y[s]=t,e=this.scene.tweens.add(y),e.timeScale=this.timeScale,T[s]=e,this}},FP={hasMethod(s){return typeof this.gameObject[s]=="function"},call(s,...t){if(!this.hasMethod(s))return this;var i=this.gameObject;return i[s].apply(i,t),this}},DP={hasData(s){var t=this.gameObject;return t.data?t.data.has(s):!1},getData(s){return this.gameObject.getData(s)},setData(s,t){return this.gameObject.setData(s,t),this}};class $u{constructor(t,i,f){this.GOManager=t,this.tweens={},this.setGO(i,f)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,i;for(var f in t)i=t[f],i&&i.remove(),t[f]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,i){return t.setName(i),this.gameObject=t,this.name=i,this.freeTweens(),this}setTimeScale(t){var i=this.tweens;for(var f in i){var C=i[f];C&&(C.timeScale=t)}return this}}Object.assign($u.prototype,LP,FP,DP);var Ku=function(s){for(var t in s)return!1;return!0};const BP={tint:0,alpha:1},IP={setGOFadeMode(s){return typeof s=="string"&&(s=BP[s]),this.fadeMode=s,this},setGOFadeTime(s){return this.fadeTime=s,this},hasTintFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&s.setTint!==void 0},hasAlphaFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&s.setAlpha!==void 0},fadeBob(s,t,i,f){var C=s.gameObject;return this.hasTintFadeEffect(C)?(t!==void 0&&s.setProperty("tintGray",255*t),s.easeProperty("tintGray",Math.floor(255*i),this.fadeTime,"Linear",0,!1,f)):this.hasAlphaFadeEffect(C)?(t!==void 0&&s.setProperty("alpha",t),s.easeProperty("alpha",i,this.fadeTime,"Linear",0,!1,f)):f&&f(C),this}};var Hn=function(s){return s>>16&255},$n=function(s){return s>>8&255},Kn=function(s){return s&255};const GP=~(255<<16)&16777215,NP=~(255<<8)&16777215,kP=16776960;var VP=function(s,t){return(t&255)<<16|s&GP},UP=function(s,t){return(t&255)<<8|s&NP},zP=function(s,t){return t&255|s&kP},XP=function(s,t,i,f){return(t&255)<<16|(i&255)<<8|f&255},YP=function(s,t){if(s.hasOwnProperty("tintR"))return s;t===void 0&&(t=16777215);var i=Hn(t),f=$n(t),C=Kn(t);return Object.defineProperty(s,"tint",{get:function(){return t},set:function(w){w=Math.floor(w)&16777215,s.setTint&&s.setTint(w),t!==w&&(t=w,i=Hn(t),f=$n(t),C=Kn(t))}}),Object.defineProperty(s,"tintR",{get:function(){return i},set:function(w){w=Math.floor(w)&255,i!==w&&(i=w,s.tint=VP(t,w))}}),Object.defineProperty(s,"tintG",{get:function(){return f},set:function(w){w=Math.floor(w)&255,f!==w&&(f=w,s.tint=UP(t,w))}}),Object.defineProperty(s,"tintB",{get:function(){return C},set:function(w){w=Math.floor(w)&255,C!==w&&(C=w,s.tint=zP(t,w))}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((i+f+C)/3)},set:function(w){w=Math.floor(w)&255,(i!==w||f!==w||C!==w)&&(i=w,f=w,C=w,s.tint=XP(t,w,w,w))}}),s.tint=t,s};const WP=Phaser.Events.EventEmitter;var HP=function(s){if(s.events)return s;var t=new WP,i=s.x;Object.defineProperty(s,"x",{get:function(){return i},set:function(a){i!==a&&(i=a,t.emit("update",s))}});var f=s.y;Object.defineProperty(s,"y",{get:function(){return f},set:function(a){f!==a&&(f=a,t.emit("update",s))}});var C=s.width;Object.defineProperty(s,"width",{get:function(){return C},set:function(a){C!==a&&(C=a,t.emit("update",s))}});var w=s.height;return Object.defineProperty(s,"height",{get:function(){return w},set:function(a){w!==a&&(w=a,t.emit("update",s))}}),s.events=t,s},$P=function(s,t,i,f,C,w){return w===void 0?w={}:w===!0&&(w=KP),typeof i!="number"&&(i=0,f=0),w.x=C.x+C.width*s+i,w.y=C.y+C.height*t+f,w},KP={},jP=function(s,t,i,f,C,w,a){if(s.hasOwnProperty("vp"))return s;typeof i=="function"&&(a=i,i=void 0),typeof C=="function"&&(a=C,C=void 0),i===void 0&&(i=.5),f===void 0&&(f=.5),C===void 0&&(C=0),w===void 0&&(w=0),a===void 0&&(a=$P),HP(t);var T=t.events;s.vp=t;var e=function(){a(i,f,C,w,t,s)};T.on("update",e),s.once("destroy",function(){T.off("update",e),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return i},set:function(u){i!==u&&(i=u,e())}}),Object.defineProperty(s,"vpy",{get:function(){return f},set:function(u){f!==u&&(f=u,e())}}),Object.defineProperty(s,"vpxOffset",{get:function(){return C},set:function(u){C!==u&&(C=u,e())}}),Object.defineProperty(s,"vpyOffset",{get:function(){return w},set:function(u){w!==u&&(w=u,e())}}),e()};const JP=Phaser.Utils.Array.Remove,ZP={has(s){return this.bobs.hasOwnProperty(s)},exists(s){return this.bobs.hasOwnProperty(s)},get(s){return this.bobs[s]},getGO(s){var t=this.get(s);return t?t.gameObject:null},addGO(s,t){this.remove(s,!0),this.hasTintFadeEffect(t)&&YP(t),this.viewportCoordinateEnable&&jP(t,this.viewport),t.once("destroy",function(){JP(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var i=new this.BobClass(this,t,s);return this.bobs[s]=i,this},add(s,...t){var i=this.createGameObjectCallback,f=this.createGameObjectScope,C=i.call(f,this.scene,...t);this.addGO(s,C);var w=this.get(s);return this.fadeBob(w,0,1),this},forEachGO(s,t){for(var i in this.bobs){var f=this.bobs[i].gameObject,C;if(t?C=s.call(t,f,i,this):C=s(f,i,this),C)break}return this}},QP={remove(s,t){if(!this.has(s))return this;var i=this.get(s);return delete this.bobs[s],this.removedGOs.push(i.gameObject),t?i.destroy():this.fadeBob(i,void 0,0,function(){i.destroy()}),this},removeAll(){var s=this.bobs;for(var t in s)this.remove(t);return this},clear(s){s===void 0&&(s=!0);var t=this.bobs;for(var i in t)s&&t[i].destroy(),delete t[i];return this.removedGOs.length=0,this}},qP={hasProperty(s,t){return this.has(s)?this.get(s).hasProperty(t):!1},getProperty(s,t){if(!!this.has(s))return this.get(s).getProperty(t)},isNumberProperty(s,t){var i=this.getProperty(s,t);return typeof i=="number"},setProperty(s,t,i){return this.has(s)?(this.symbols&&typeof i=="string"&&this.isNumberProperty(s,t)&&(i in this.symbols?i=this.symbols[i]:console.warn(`Can't find symbol ${i}`)),this.get(s).setProperty(t,i),this):this},easeProperty(s,t,i,f,C,w,a,T){return this.has(s)?(f===void 0&&(f=1e3),C===void 0&&(C="Linear"),w===void 0&&(w=0),a===void 0&&(a=!1),this.symbols&&typeof i=="string"&&this.isNumberProperty(s,t)&&(i in this.symbols?i=this.symbols[i]:console.warn(`Can't find symbol ${i}`)),this.get(s).easeProperty(t,i,f,C,w,a,T),this):this},hasTweenTask(s,t){if(!this.has(s))return!1;var i=this.get(s).tweens;return i.hasOwnProperty(t)},getTweenTask(s,t){if(!this.has(s))return null;var i=this.get(s).tweens,f=i[t];return f||null}},_P={hasMethod(s,t){return this.has(s)?this.get(s).hasMethod(t):!1},call(s,t,...i){return this.has(s)?(this.get(s).call(t,...i),this):this}},tw={hasData(s,t){return this.has(s)?this.get(s).hasData(t):!1},getData(s,t){if(!!this.has(s))return this.get(s).getData(t)},setData(s,t,i){return this.has(s)?(this.get(s).setData(t,i),this):this}};var Vt=function(s){return s.displayWidth!==void 0?s.displayWidth:s.width},It=function(s){return s.displayHeight!==void 0?s.displayHeight:s.height};const Hf=Phaser.Geom.Rectangle,Ds=Phaser.Math.Vector2,ew=Phaser.Math.RotateAround;var ju=function(s,t){if(t===void 0?t=new Hf:t===!0&&(Kh===void 0&&(Kh=new Hf),t=Kh),s.getBounds)return s.getBounds(t);var i,f,C,w,a,T,e,u;if(s.parentContainer){var y=s.parentContainer.getBoundsTransformMatrix();nu(s,t),y.transformPoint(t.x,t.y,t),i=t.x,f=t.y,au(s,t),y.transformPoint(t.x,t.y,t),C=t.x,w=t.y,ou(s,t),y.transformPoint(t.x,t.y,t),a=t.x,T=t.y,hu(s,t),y.transformPoint(t.x,t.y,t),e=t.x,u=t.y}else nu(s,t),i=t.x,f=t.y,au(s,t),C=t.x,w=t.y,ou(s,t),a=t.x,T=t.y,hu(s,t),e=t.x,u=t.y;return t.x=Math.min(i,C,a,e),t.y=Math.min(f,w,T,u),t.width=Math.max(i,C,a,e)-t.x,t.height=Math.max(f,w,T,u)-t.y,t},Kh=void 0,nu=function(s,t,i){return t===void 0?t=new Ds:t===!0&&(ai===void 0&&(ai=new Ds),t=ai),s.getTopLeft?s.getTopLeft(t):(t.x=s.x-Vt(s)*s.originX,t.y=s.y-It(s)*s.originY,qo(s,t,i))},au=function(s,t,i){return t===void 0?t=new Ds:t===!0&&(ai===void 0&&(ai=new Ds),t=ai),s.getTopRight?s.getTopRight(t):(t.x=s.x-Vt(s)*s.originX+Vt(s),t.y=s.y-It(s)*s.originY,qo(s,t,i))},ou=function(s,t,i){return t===void 0?t=new Ds:t===!0&&(ai===void 0&&(ai=new Ds),t=ai),s.getBottomLeft?s.getBottomLeft(t):(t.x=s.x-Vt(s)*s.originX,t.y=s.y-It(s)*s.originY+It(s),qo(s,t,i))},hu=function(s,t,i){return t===void 0?t=new Ds:t===!0&&(ai===void 0&&(ai=new Ds),t=ai),s.getBottomRight?s.getBottomRight(t):(t.x=s.x-Vt(s)*s.originX+Vt(s),t.y=s.y-It(s)*s.originY+It(s),qo(s,t,i))},ai=void 0,qo=function(s,t,i){if(i===void 0&&(i=!1),s.rotation!==0&&ew(t,s.x,s.y,s.rotation),i&&s.parentContainer){var f=s.parentContainer.getBoundsTransformMatrix();f.transformPoint(t.x,t.y,t)}return t};const Sn=Phaser.Utils.Objects.GetValue;var xm=function(s,t,i){var f,C,w,a,T;if(typeof i=="number"?f=i:(f=Sn(i,"color"),C=Sn(i,"lineWidth"),w=Sn(i,"fillColor"),a=Sn(i,"fillAlpha",1),T=Sn(i,"padding",0)),Array.isArray(s))for(var e=0,u=s.length;e<u;e++)$f(s[e],t,f,C,w,a,T);else $f(s,t,f,C,w,a,T)},$f=function(s,t,i,f,C,w,a){var T=s.getBounds||s.width!==void 0&&s.height!==void 0;if(!!T){i===void 0&&(i=16777215),f===void 0&&(f=1),C===void 0&&(C=null),w===void 0&&(w=1),a===void 0&&(a=0);var e=nu(s,Ar[0]);e.x-=a,e.y-=a;var u=au(s,Ar[1]);u.x+=a,u.y-=a;var y=hu(s,Ar[2]);y.x+=a,y.y+=a;var d=ou(s,Ar[3]);d.x-=a,d.y+=a,C!==null&&t.fillStyle(C,w).fillPoints(Ar,!0,!0),i!==null&&t.lineStyle(f,i).strokePoints(Ar,!0,!0)}},Ar=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],iw=function(s,t){return this.forEachGO(function(i){i.drawBounds?i.drawBounds(s,t):xm(i,s,t)}),this},Tm={drawGameObjectsBounds:iw};Object.assign(Tm,IP,ZP,QP,qP,_P,tw);const sw=Phaser.Cameras.Scene2D.BaseCamera;var rw=function(s){return s instanceof sw};const Cm=Phaser.Geom.Rectangle;var oa=function(s,t,i){rw(t)||(i=t,t=void 0),i===void 0?i=new Cm:i===!0&&(i=nw);var f=s.sys.scale,C=f.baseSize,w=f.parentSize,a=f.canvasBounds,T=f.displayScale,e=a.x>=0?0:-(a.x*T.x),u=a.y>=0?0:-(a.y*T.y),y;w.width>=a.width?y=C.width:y=C.width-(a.width-w.width)*T.x;var d;return w.height>=a.height?d=C.height:d=C.height-(a.height-w.height)*T.y,i.setTo(e,u,y,d),t&&(i.width/=t.zoomX,i.height/=t.zoomY,i.centerX=t.centerX+t.scrollX,i.centerY=t.centerY+t.scrollY),i},nw=new Cm;const di=Phaser.Utils.Objects.GetValue;class Ju{constructor(t,i){this.scene=t,this.BobClass=di(i,"BobClass",$u),this.setCreateGameObjectCallback(di(i,"createGameObject"),di(i,"createGameObjectScope")),this.setEventEmitter(di(i,"eventEmitter",void 0));var f=di(i,"fade",500);typeof f=="number"?(this.setGOFadeMode(),this.setGOFadeTime(f)):(this.setGOFadeMode(di(f,"mode")),this.setGOFadeTime(di(f,"time",500)));var C=di(i,"viewportCoordinate",!1);C!==!1?(this.setViewportCoordinateEnable(di(i,"enable",!0)),this.setViewport(di(C,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols(di(i,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var i=this.bobs;for(var f in i)i[f].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,i){return this.createGameObjectCallback=t,this.createGameObjectScope=i,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=oa(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return Ku(this.bobs)&&this.removedGOs.length===0}}Object.assign(Ju.prototype,Is,Tm);const Sm={addGameObjectManager(s,t){s===void 0&&(s={}),t===void 0&&(t=Ju),s.createGameObjectScope||(s.createGameObjectScope=this);var i=new t(this.managersScene,s);return this.gameObjectManagers[s.name]=i,this},getGameObjectManager(s){return this.gameObjectManagers[s]},getGameObjectManagerNames(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s}},aw={createGameObject(s,t,...i){return this.getGameObjectManager(s).add(t,...i),this},destroyGameObject(s,t){var i=this.getGameObjectManager(s);return t===void 0?i.removeAll():i.remove(t),this},callGameObjectMethod(s,t,i,...f){return this.getGameObjectManager(s).call(t,i,...f),this},setGameObjectProperty(s,t,i,f){return this.getGameObjectManager(s).setProperty(t,i,f),this},easeGameObjectProperty(s,t,i,f,C,w,a,T){return this.getGameObjectManager(s).easeProperty(t,i,f,C,w,a,T),this},getGameObject(s,t,i){var f=this.getGameObjectManager(s);if(typeof t=="string")return f.getGO(t);var C=t;C===void 0&&(C=f.bobs),i===void 0&&(i={});for(t in C)i[t]=f.getGO(t);return i},addGameObject(s,t,i){var f=this.getGameObjectManager(s);if(typeof t=="string")f.addGO(t,i);else{var C=t;for(t in C)f.addGO(t,C[t])}return this},drawGameObjectsBounds(s,t,i){s instanceof Phaser.GameObjects.Graphics&&(i=t,t=s,s=void 0),s===void 0&&(s=this.getGameObjectManagerNames()),Array.isArray(s)||(s=[s]);for(var f=0,C=s.length;f<C;f++)this.getGameObjectManager(s[f]).drawGameObjectsBounds(t,i);return this}};var ow=function(s){class t extends s{}var i={initManagers:bP,setTimeScale:AP,getTimeScale:RP,destroyManagers:OP};return Object.assign(t.prototype,i,Sm,aw),t},hw=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,lw=/^0x[0-9A-F]+$/i,uw=function(s){return typeof s!="string"||(s===""?s=null:hw.test(s)?s=parseFloat(s):lw.test(s)?s=parseInt(s,16):s==="false"?s=!1:s==="true"&&(s=!0)),s},bo=function(s){return s.replace(dw,"\\$&").replace(fw,"\\x2d")},dw=/[|\\{}()[\]^$+*?.]/g,fw=/-/g;class Em{constructor(t){this.setEventEmitter(de(t,"eventEmitter",void 0)),this.setValueConverter(de(t,"valueConvert",!0)),this.setLoopEnable(de(t,"loop",!1)),this.setMultipleLinesTagEnable(de(t,"multipleLinesTag",!1));var i=de(t,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.setTranslateTagNameCallback(de(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,i){i===void 0&&(i=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=i,t=bo(this.delimiterLeft),i=bo(this.delimiterRight);var f=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${i}`,f),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=uw:t||(t=cw),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,i=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var f=this.reSplit.exec(t);if(!f){if(this.progressIndex<i&&(this.onContent(t.substring(this.progressIndex,i)),this.isPaused)){this.progressIndex=i;break}this.onComplete(),this.isRunning=!1;return}var C=this.reSplit.lastIndex,w=C-f[0].length;if(this.progressIndex<w&&(this.onContent(t.substring(this.progressIndex,w)),this.isPaused)){this.progressIndex=w;break}if(this.onTag(f[1]),this.progressIndex=C,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,i){return this.isPaused?this:(this.pause(),t.once(i,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}const cw=function(s){return s};Object.assign(Em.prototype,Is);var vw=function(s,t){if(s==null)return[];for(var i=s.split(","),f=0,C=i.length;f<C;f++)i[f]=t(i[f]);return i};class pw extends Em{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(de(t,"regex.tag",void 0)),this.setValueExpression(de(t,"regex.value",void 0));var i=de(t,"delimiters","<>");this.setDelimiters(i[0],i[1])}setTagExpression(t){return t||(t=Xa),this.tagExpression=t,this}setValueExpression(t){return t||(t=Xa),this.valueExpression=t,this}setDelimiters(t,i){super.setDelimiters(t,i);var f=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(f,"i"),this.tagExpression!==Xa||this.valueExpression!==Xa){var C=`${this.tagExpression}(=${this.valueExpression})?`,w=`/${this.tagExpression}`;t=bo(this.delimiterLeft),i=bo(this.delimiterRight);var a=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${C})|(${w}))${i}`,a)}return this}onTag(t){var i=t.match(this.reTag),f=i[1],C=f.charAt(0)==="/";if(C&&(f=f.substring(1,f.length)),this.translateTagNameCallback&&(f=this.translateTagNameCallback(f)),this.skipEventFlag=!1,C)this.emit(`-${f}`),this.skipEventFlag||this.emit("-",f),this.lastTagEnd=f;else{var w=vw(i[3],this.valueConverter);this.emit(`+${f}`,...w),this.skipEventFlag||this.emit("+",f,...w),this.lastTagStart=f}}}const Xa="[^=]+";var mw=function(s,t,i){var f="color",C;t.on("start",function(){C=s.textStyle.color}).on(`+${f}`,function(w){s.textStyle.setColor(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setColor(C),t.skipEvent()}).on("complete",function(){s.textStyle.setColor(C)})},gw=function(s,t,i){var f="stroke",C;t.on("start",function(){C=s.textStyle.stroke,s.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(w){w===void 0&&(w=C),s.textStyle.setStrokeStyle(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){s.textStyle.setStrokeStyle(C)})},yw=function(s,t,i){var f="b";t.on("start",function(){s.textStyle.setBold(!1)}).on(`+${f}`,function(){s.textStyle.setBold(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setBold(!1),t.skipEvent()})},xw=function(s,t,i){var f="i";t.on("start",function(){s.textStyle.setItalic(!1)}).on(`+${f}`,function(){s.textStyle.setItalic(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setItalic(!1),t.skipEvent()})},Tw=function(s,t,i){var f="size",C;t.on("start",function(){C=s.textStyle.fontSize}).on(`+${f}`,function(w){s.textStyle.setFontSize(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setFontSize(C),t.skipEvent()}).on("complete",function(){s.textStyle.setFontSize(C)})},Cw=function(s,t,i){var f="y",C;t.on("start",function(){C=s.textStyle.offsetY,s.textStyle.setOffsetY(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),s.textStyle.setOffsetY(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetY(0)})},Sw=function(s,t,i){var f="x",C;t.on("start",function(){C=s.textStyle.offsetY,s.textStyle.setOffsetX(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),s.textStyle.setOffsetX(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetX(0)})},Ew=function(s,t,i){var f="left",C;t.on("start",function(){C=s.textStyle.leftSpace,s.textStyle.setLeftSpace(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),s.textStyle.setLeftSpace(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setLeftSpace(0)})},Pw=function(s,t,i){var f="right",C;t.on("start",function(){C=s.textStyle.rightSpace,s.textStyle.setRightSpace(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),s.textStyle.setRightSpace(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setRightSpace(0)})},ww=function(s,t,i){var f="shadow",C;t.on("start",function(){C=s.textStyle.shadowColor,s.textStyle.setShadowColor(null)}).on(`+${f}`,function(w){w===void 0&&(w=C),s.textStyle.setShadowColor(w),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){s.textStyle.setShadowColor(C)})},Mw=function(s,t,i){var f="align";t.on(`+${f}`,function(C){s.textStyle.setAlign(C),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){s.textStyle.setAlign()})},bw=function(s,t,i){var f="img";t.on(`+${f}`,function(C){var w=s.imageManager.get(C);um.call(s,w.key,w.frame,{width:w.width,hieght:w.height,leftSpace:w.left,rightSpace:w.right}),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Aw=function(s,t,i){var f="space";t.on(`+${f}`,function(C){dm.call(s,C),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Rw=function(s,t,i){var f="speed";t.on(`+${f}`,function(C){Kf(s,C),t.skipEvent()}).on(`-${f}`,function(){Kf(s,void 0),t.skipEvent()})},Ow=function(s){this.typeWriter.setTypingSpeed(s)},Kf=function(s,t){yt.call(s,"speed",Ow,t,s)},Lw=function(s,t,i){var f="se";t.on(`+${f}`,function(C,w){yt.call(s,f,Fw,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2";t.on(`+${f}`,function(C,w){yt.call(s,f,Dw,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Fw=function(s){if(!this.skipSoundEffect){var t=s[0],i=s[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}},Dw=function(s){if(!this.skipSoundEffect){var t=s[0],i=s[1];this.soundManager.playSoundEffect2(t),i&&this.soundManager.fadeInSoundEffect2(i)}},Bw=function(s,t,i){var f="se.fadein";t.on(`+${f}`,function(C){yt.call(s,f,Iw,C,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadein";t.on(`+${f}`,function(C){yt.call(s,f,Gw,C,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Iw=function(s){this.soundManager.fadeInSoundEffect(s)},Gw=function(s){this.soundManager.fadeInSoundEffect2(s)},Nw=function(s,t,i){var f="se.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",yt.call(s,f,kw,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",yt.call(s,f,Vw,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},kw=function(s){this.soundManager.fadeOutSoundEffect(...s)},Vw=function(s){this.soundManager.fadeOutSoundEffect2(...s)},Uw=function(s,t,i){var f="se.volume";t.on(`+${f}`,function(C){yt.call(s,f,zw,C,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.volume";t.on(`+${f}`,function(C){yt.call(s,f,Xw,C,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},zw=function(s){this.soundManager.setSoundEffectVolume(s,!0)},Xw=function(s){this.soundManager.setSoundEffectVolume2(s,!0)},Yw=function(s,t,i){var f="bgm";t.on(`+${f}`,function(C,w){yt.call(s,f,Ww,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){yt.call(s,"bgm.stop",Hw,void 0,s),t.skipEvent()});var f="bgm2";t.on(`+${f}`,function(C,w){yt.call(s,f,$w,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){yt.call(s,"bgm2.stop",Kw,void 0,s),t.skipEvent()})},Ww=function(s){var t=s[0],i=s[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},Hw=function(){this.soundManager.stopBackgroundMusic()},$w=function(s){var t=s[0],i=s[1];this.soundManager.playBackgroundMusic2(t),i&&this.soundManager.fadeInBackgroundMusic2(i)},Kw=function(){this.soundManager.stopBackgroundMusic2()},jw=function(s,t,i){var f="bgm.fadein";t.on(`+${f}`,function(C){yt.call(s,f,Jw,C,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadein";t.on(`+${f}`,function(C){yt.call(s,f,Zw,C,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Jw=function(s){this.soundManager.fadeInBackgroundMusic(s)},Zw=function(s){this.soundManager.fadeInBackgroundMusic2(s)},Qw=function(s,t,i){var f="bgm.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",yt.call(s,f,qw,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",yt.call(s,f,_w,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},qw=function(s){this.soundManager.fadeOutBackgroundMusic(...s)},_w=function(s){this.soundManager.fadeOutBackgroundMusic2(...s)},tM=function(s,t,i){var f="bgm.cross";t.on(`+${f}`,function(C,w){yt.call(s,f,eM,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.cross";t.on(`+${f}`,function(C,w){yt.call(s,f,iM,[C,w],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},eM=function(s){this.soundManager.crossFadeBackgroundMusic(...s)},iM=function(s){this.soundManager.crossFadeBackgroundMusic2(...s)},sM=function(s,t,i){var f="bgm.pause";t.on(`+${f}`,function(){yt.call(s,f,rM,void 0,s),t.skipEvent()}).on(`-${f}`,function(){yt.call(s,"bgm.resume",nM,void 0,s),t.skipEvent()});var f="bgm2.pause";t.on(`+${f}`,function(){yt.call(s,f,aM,void 0,s),t.skipEvent()}).on(`-${f}`,function(){yt.call(s,"bgm2.resume",oM,void 0,s),t.skipEvent()})},rM=function(){this.soundManager.pauseBackgroundMusic()},nM=function(){this.soundManager.resumeBackgroundMusic()},aM=function(){this.soundManager.pauseBackgroundMusic2()},oM=function(){this.soundManager.resumeBackgroundMusic2()},hM=function(s,t,i){var f="camera.fadein";t.on(`+${f}`,function(C,w,a,T){yt.call(s,f,lM,[C,w,a,T],s),t.skipEvent()})},lM=function(s){this.targetCamera.fadeIn(...s)},uM=function(s,t,i){var f="camera.fadeout";t.on(`+${f}`,function(C,w,a,T){yt.call(s,f,dM,[C,w,a,T],s),t.skipEvent()})},dM=function(s){this.targetCamera.fadeOut(...s)},fM=function(s,t,i){var f="camera.shake";t.on(`+${f}`,function(C,w){yt.call(s,f,cM,[C,w],s),t.skipEvent()})},cM=function(s){this.targetCamera.shake(...s)},vM=function(s,t,i){var f="camera.flash";t.on(`+${f}`,function(C,w,a,T){yt.call(s,f,pM,[C,w,a,T],s),t.skipEvent()})},pM=function(s){this.targetCamera.flash(...s)},mM=function(s,t,i){var f="camera.zoom";t.on(`+${f}`,function(C){yt.call(s,f,gM,C,s),t.skipEvent()}).on(`+${f}.to`,function(C,w,a){yt.call(s,"camera.zoom.to",yM,[C,w,a],s),t.skipEvent()})},gM=function(s){this.targetCamera.setZoom(s)},yM=function(s){this.targetCamera.zoomTo(...s)};const jf=Phaser.Math.DegToRad;var xM=function(s,t,i){var f="camera.rotate";t.on(`+${f}`,function(C){C=jf(C),yt.call(s,f,TM,C,s),t.skipEvent()}).on(`+${f}.to`,function(C,w,a){C=jf(C),yt.call(s,"camera.rotate.to",CM,[C,w,a],s),t.skipEvent()})},TM=function(s){this.targetCamera.setRotation(s)},CM=function(s){var t=s[0],i=s[1],f=s[2];this.targetCamera.rotateTo(t,!1,i,f)},SM=function(s,t,i){var f="camera.scroll";t.on(`+${f}`,function(C,w){yt.call(s,f,EM,[C,w],s),t.skipEvent()}).on(`+${f}.to`,function(C,w,a,T){yt.call(s,"camera.scroll.to",PM,[C,w,a,T],s),t.skipEvent()})},EM=function(s){this.targetCamera.setScroll(...s)},PM=function(s){var t=s[0],i=s[1],f=s[2],C=s[3],w=this.targetCamera,a=w.scrollX,T=w.scrollY;w.setScroll(t,i),t+=w.centerX,i+=w.centerY,w.setScroll(a,T),w.pan(t,i,f,C)},wM=function(s,t,i){var f="wait",C="click";t.on(`+${f}`,function(w){Jf(s,w),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()}).on(`+${C}`,function(){Jf(s,"click"),t.skipEvent()}).on(`-${C}`,function(){t.skipEvent()})},MM=function(s){this.typeWriter.wait(s)},Jf=function(s,t){yt.call(s,"wait",MM,t,s)},bM=function(s,t,i){var f="r";t.on(`+${f}`,function(){aa.call(s,`
`),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},AM=function(s,t,i){for(var f=["pagebreak","pb"],C=0,w=f.length;C<w;C++){var a=f[C];t.on(`+${a}`,function(){aa.call(s,"\f"),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})}},RM=function(s,t,i){var f="content.off";t.on(`+${f}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},OM=function(s,t,i){var f="content.on";t.on(`+${f}`,function(){t.setContentOutputEnable(),t.skipEvent()})},LM=function(s,t,i){t.on("content",function(f){if(t.contentOutputEnable)aa.call(s,f);else{var C=`+${t.lastTagStart}`;s.emit(`parser.${C}#content`,t,f)}})},FM=function(s,t,i){t.on("start",function(){s.emit("parser.start",t)}).on("+",function(f,...C){if(!t.skipEventFlag){var w=`+${f}`,a=C;s.emit(`parser.${w}`,t,...C,a),Zf(s,w,a)}}).on("-",function(f){if(!t.skipEventFlag){var C=`-${f}`,w=[];s.emit(`parser.${C}`,t,w),Zf(s,C,w)}}).on("complete",function(){s.emit("parser.complete",t)})},DM=function(s,t){var i=`tag.${t}`;s==null?this.emit(i):this.emit(i,...s)},Zf=function(s,t,i){yt.call(s,t,DM,i,s)};const Qf=[mw,gw,yw,xw,Tw,ww,Mw,Cw,Sw,Ew,Pw,bw,Aw,Rw,Lw,Bw,Nw,Uw,Yw,jw,Qw,tM,sM,hM,uM,fM,vM,mM,xM,SM,wM,bM,AM,RM,OM,LM,FM];var BM=function(s,t,i){for(var f=0,C=Qf.length;f<C;f++)Qf[f](s,t,i)},IM=function(s,t){for(var i=s.commentLineStart,f=t.split(`
`),C=0,w=f.length;C<w;C++){var a=f[C];a===""||(a.trim().length===0||i&&a.startsWith(i))&&(f[C]="")}return f.join("")};const GM=Phaser.Utils.Objects.GetValue;class NM extends pw{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),BM(t,this,i),this.setCommentLineStartSymbol(GM(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(IM(this,t)),this}}const kM={setDefaultTypingSpeed(s){return this.defaultSpeed=s,this},setTypingSpeed(s){return s===void 0&&(s=this.defaultSpeed),this.speed=s,this}},En="page.fadeout";var VM=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(En),this;var s=this.children.filter(function(f){return f.renderable}),t=this.fadeOutPageCallback(s,this.fadeOutPageDuration);if(!t)this.emit(En);else if(t.once)t.once("complete",function(){this.emit(En)},this);else if(t.then){var i=this;t.then(function(){i.emit(En)})}else this.emit(En);return this},Zu=function(s,t){return new Promise(function(i,f){s.once(t,function(){i()})})},Oe=function(s){return Zu(s,"complete")},UM=function(s){return this.children=s,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(s),this.typing(),Oe(this)};const zM="delay",Pm="anim";var wm=function(s){s===void 0&&(s=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(i.renderable){var f=this.animationConfig;if(f.duration>0){var C=this.timeline.addTimer({name:Pm,target:i,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&C.seek(1)}else f.onStart&&f.onStart(i,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",i);var w=this.nextChild;if(w&&!(this.skipSpaceEnable&&K2(w))){if(t+=this.speed+s,s=0,t>0){this.typingTimer=this.timeline.addTimer({name:zM,target:this,duration:t,onComplete:function(a,T,e){a.typingTimer=void 0,wm.call(a,e.remainder)}});break}}}else j2(i)&&i.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},XM=function(){return this.timeline.pause(),this},YM=function(){return this.timeline.resume(),this},WM=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},HM=function(s){return this.isTypingPaused?(s===void 0&&(s=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=s):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(s)),this):this};const xi="_remove.wait",lu="_remove.play",qf=[xi,lu];var Ns=function(s,t,i,f,C){return function(){s.emit(xi,C),t.apply(f,i)}},_f=function(s,t,i,f,C){var w=Ns(s,i,f,C,"custom"),a=t?`wait.${t}`:"wait";s.emit(a,w)},$M=function(s,t,i,f,C){var w=Ns(s,i,f,C,"time"),a;s.once(xi,function(){a&&(a.remove(),a=void 0)}),a=s.timeline.delayCall(t,w),s.emit("wait.time",t)},KM=function(s,t,i,f){var C=s.clickEE;if(!!C){var w=Ns(s,t,i,f,"click");s.once(xi,function(){C.off("pointerdown",w,s)}),C.once("pointerdown",w,s),s.emit("wait.click")}},Ya=function(s,t,i,f,C){var w=Ns(s,i,f,C,"music");t&&(s.once(xi,function(){t.off("complete",w,s)}),t.once("complete",w,s)),s.emit("wait.music",t),t||w()},jM=function(s){switch(s){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},JM=function(s,t,i,f,C){var w=Ns(s,i,f,C,`camera.${t}`),a=s.targetCamera,T,e;switch(t){case"camera.fadein":T=a.fadeEffect,e="camerafadeincomplete";break;case"camera.fadeout":T=a.fadeEffect,e="camerafadeoutcomplete";break;case"camera.flash":T=a.flashEffect,e="cameraflashcomplete";break;case"camera.shake":T=a.shakeEffect,e="camerashakecomplete";break;case"camera.zoom":T=a.zoomEffect,e="camerazoomcomplete";break;case"camera.rotate":T=a.rotateToEffect,e="camerarotatecomplete";break;case"camera.scroll":T=a.panEffect,e="camerapancomplete";break}T.isRunning?(s.once(xi,function(u){a.off(e,w,s)}),a.once(e,w,s),s.emit("wait.camera",t)):(s.emit("wait.camera",t),w())},ZM=function(s,t,i,f,C){var w=Ns(s,i,f,C,"keydown"),a=`keydown-${t.toUpperCase()}`,T=s.scene.input.keyboard;s.once(xi,function(){T.off(a,w,s)}),T.once(a,w,s),s.emit("wait.keydown",t)},QM=function(s,t){var i=t.split(".");return s.gameObjectManagers.hasOwnProperty(i[0])},qM=function(s,t,i,f,C){var w=Ns(s,i,f,C),a=t.split("."),T=a[0],e=s.getGameObjectManager(T),u=`wait.${T}`;switch(a.length){case 1:e.isEmpty?(s.emit(u),w()):(s.once(xi,function(g){e.off("empty",w,s)}),e.once("empty",w,s),s.emit(u));return;case 2:var l=a[1];if(!e.has(l))s.emit(u,l),w();else{var y=e.get(l),d=y.gameObject;s.once(xi,function(){d.off("destroy",w,s)}),d.once("destroy",w,s),s.emit(u,l)}return;case 3:var l=a[1],h=a[2],r=e.getProperty(l,h);if(typeof r=="number"){var n=e.getTweenTask(l,h);n?(s.once(xi,function(){n.off("complete",w,s)}),n.once("complete",w,s),s.emit(u,l,h)):(s.emit(u,l,h),w());return}var v=h,o=v.startsWith("!");if(o&&(v=v.substring(1)),e.hasData(l,v)){var d=e.getGO(l),c=d.getData(v),m=!o;if(c===m)s.emit(u,l,h),w();else{var p=`changedata-${v}`,i=function(E,P,S){P=!!P,P===m&&w.call(s)};s.once(xi,function(){d.off(p,i)}),d.on(p,i),s.emit(u,l,h)}return}}};const _M=Phaser.Input.Keyboard.KeyCodes;var Mm=function(s,t,i,f,C){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var w=0,a=t.length;w<a;w++){var T=t[w];if(T==null||T==="wait")_f(s,void 0,i,f,C);else if(typeof T=="number"||!isNaN(T))$M(s,parseFloat(T),i,f,C);else if(T==="click")KM(s,i,f,C);else if(T==="se"){var e=s.soundManager.getLastSoundEffect();Ya(s,e,i,f,C)}else if(T==="se2"){var e=s.soundManager.getLastSoundEffect2();Ya(s,e,i,f,C)}else if(T==="bgm"){var e=s.soundManager.getBackgroundMusic();Ya(s,e,i,f,C)}else if(T==="bgm2"){var e=s.soundManager.getBackgroundMusic2();Ya(s,e,i,f,C)}else _M.hasOwnProperty(T.toUpperCase())?ZM(s,T,i,f,C):jM(T)?JM(s,T,i,f,C):QM(s,T)?qM(s,T,i,f,C):_f(s,T,i,f,C)}},tb=function(s){return this.ignoreWait?this:(this.pauseTyping(),Mm(this.textPlayer,s,this.resumeTyping,[],this),this)},eb=function(s){return s===void 0&&(s=!0),this.ignoreWait=s,this},ib=function(s){return s===void 0&&(s=!0),this.skipSpaceEnable=s,this},sb=function(s){if(s===void 0&&(s=!0),this.skipTypingAnimation=s,s)for(var t=this.timeline.getTimers(Pm),i=0,f=t.length;i<f;i++)t[i].seek(1);return this},rb=function(s){if(s===void 0&&(s=!0),this.skipSoundEffect=s,s){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},nb=function(){return this.typingTimer&&this.typingTimer.seek(1),this},bm={fadeOutPage:VM,start:UM,typing:wm,pause:XM,resume:YM,pauseTyping:WM,resumeTyping:HM,wait:tb,setIgnoreWait:eb,setSkipSpaceEnable:ib,setSkipTypingAnimation:sb,setSkipSoundEffect:rb,skipCurrentTypingDelay:nb};Object.assign(bm,kM);const Rr=Phaser.Utils.Objects.GetValue;class Am{constructor(t,i){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Rr(i,"onTypingStart",ob)),this.setDefaultTypingSpeed(Rr(i,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(Rr(i,"skipSpace",!1)),this.setAnimationConfig(Rr(i,"animation",void 0)),this.setMinSizeEnable(Rr(i,"minSizeEnable",!1)),this.setFadeOutPageCallback(Rr(i,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=ab),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var ab=function(s){s.setVisible&&s.setVisible()},ob=function(s){for(var t=0,i=s.length;t<i;t++){var f=s[t];f.setVisible&&f.setVisible(!1)}};Object.assign(Am.prototype,Is,bm);class hb extends $u{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const lb={playAnimation(s,t){return this.has(s)||this.add(s),this.get(s).playAnimation(t),this},stopAnimation(s){return this.has(s)?(this.get(s).stopAnimation(),this):this},chainAnimation(s,t){return this.has(s)?(this.get(s).chainAnimation(t),this):this},pauseAnimation(s){return this.has(s)?(this.get(s).pauseAnimation(),this):this}};var Rm={};Object.assign(Rm,lb);class Om extends Ju{constructor(t,i){i===void 0&&(i={}),i.BobClass=hb,super(t,i)}setCreateGameObjectCallback(t,i){return!t||t==="sprite"?t=ub:t==="image"&&(t=db),super.setCreateGameObjectCallback(t,i),this}}var ub=function(s,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),s.add.sprite(0,0,t,i)},db=function(s,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),s.add.image(0,0,t,i)};Object.assign(Om.prototype,Rm);var tc=function(s,t){return s.length===3&&s[0]===t&&s[2]==="play"},fb=function(s,t){return s.length===3&&s[0]===t&&s[2]==="stop"},cb=function(s,t,i){var f=i.name;t.on("+",function(C,...w){if(!t.skipEventFlag){var a=C.split("."),T;if(tc(a,f))T=a[1];else return;yt.call(s,`${f}.play`,vb,[f,T,w],s),t.skipEvent()}}).on("+",function(C){if(!t.skipEventFlag){var w=C.split("."),a;if(fb(w,f))a=w[1];else return;yt.call(s,`${f}.stop`,ec,[f,a],s),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var w=C.split("."),a;if(tc(w,f))a=w[1];else return;yt.call(s,`${f}.stop`,ec,[f,a],s),t.skipEvent()}})},vb=function(s){var t,i,f;[t,i,f]=s;var C=f.shift(),w=this.getGameObjectManager(t);w.playAnimation(i,C),f.length>0&&w.chainAnimation(i,f)},ec=function(s){var t,i;[t,...i]=s;var f=this.getGameObjectManager(t);f.stopAnimation(...i)},pb=function(s,t){return s.length===3&&s[0]===t&&s[2]==="pause"},mb=function(s,t,i){var f=i.name;t.on("+",function(C){if(!t.skipEventFlag){var w=C.split("."),a;if(pb(w,f))a=w[1];else return;yt.call(s,`${f}.pause`,gb,[f,a],s),t.skipEvent()}})},gb=function(s){var t,i;[t,...i]=s;var f=this.getGameObjectManager(t);f.pauseAnimation(...i)},yb=function(s,t){return s.length===3&&s[0]===t&&s[2]==="chain"},xb=function(s,t,i){var f=i.name;t.on("+",function(C){if(!t.skipEventFlag){var w=C.split("."),a;if(yb(w,f))a=w[1];else return;var T=Array.prototype.slice.call(arguments,1);yt.call(s,`${f}.chain`,Tb,[f,a,T],s),t.skipEvent()}})},Tb=function(s){var t,i;[t,...i]=s;var f=this.getGameObjectManager(t);f.chainAnimation(...i)};const Cb=[cb,mb,xb];var Sb=function(s){s===void 0&&(s={}),s.name="sprite",s.parseCallbacks=Cb,this.addGameObjectManager(s,Om)},ic=function(s,t){return s.length===2&&s[0]===t},Eb=function(s,t,i){var f=i.name;t.on("+",function(C,...w){if(!t.skipEventFlag){var a=C.split("."),T;if(ic(a,f))T=a[1];else return;yt.call(s,`${f}.add`,Pb,[f,T,...w],s),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var w=C.split("."),a;if(ic(w,f))a=w[1];else return;yt.call(s,`${f}.remove`,wb,[f,a],s),t.skipEvent()}})},Pb=function(s){var t,i;[t,...i]=s;var f=this.getGameObjectManager(t);f.add(...i)},wb=function(s){var t,i;[t,...i]=s;var f=this.getGameObjectManager(t);f.remove(...i)},Mb=function(s,t,i){var f=i.name;t.on("-",function(C){t.skipEventFlag||C===f&&(yt.call(s,`${f}.removeall`,bb,f,s),t.skipEvent())})},bb=function(s){var t=this.getGameObjectManager(s);t.removeAll()},Ab=function(s,t){return s.length===3&&s[0]===t},Rb=function(s,t,i){var f=i.name;t.on("+",function(C,...w){if(!t.skipEventFlag){var a=C.split("."),T,e;if(Ab(a,f))T=a[1],e=a[2];else return;yt.call(s,`${f}.call`,Ob,[f,T,e,...w],s),t.skipEvent()}})},Ob=function(s){var t,i,f,C;[t,i,f,...C]=s;var w=`${t}.${f}`;if(this.emit(w,i,...C),!(this.listenerCount(w)>0)){var a=this.getGameObjectManager(t);a.hasMethod(i,f)?a.call(i,f,...C):a.setProperty(i,f,C[0])}},Lb={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},Fb=function(s,t){return s.length===4&&s[0]===t&&Lb[s[3]]},Db=function(s,t,i){var f=i.name;s.getGameObjectManager(f),t.on("+",function(C,w,a,T,e){if(!t.skipEventFlag){var u=C.split("."),y,d,l;if(Fb(u,f))y=u[1],d=u[2],l=u[3];else return;typeof T=="number"&&(e=T,T=void 0),yt.call(s,`${f}.ease`,Bb,[f,y,d,w,a,T,e,l],s),t.skipEvent()}})},Bb=function(s){var t,i,f,C,w,a,T,e;[t,i,f,C,w,a,T,e]=s;var u=this.getGameObjectManager(t),y=u.getProperty(i,f);if(typeof y=="number"){e.endsWith("Left")||e.endsWith("Up")?e.startsWith("to")||e.startsWith("yoyo")?C=y-C:e.startsWith("from")&&(u.setProperty(i,f,y-C),C=y):e.endsWith("Right")||e.endsWith("Down")?e.startsWith("to")||e.startsWith("yoyo")?C=y+C:e.startsWith("from")&&(u.setProperty(i,f,y+C),C=y):e==="from"&&(u.setProperty(i,f,C),C=y);var d=e.startsWith("yoyo");u.easeProperty(i,f,C,w,a,T,d)}};const sc=[Eb,Mb,Rb,Db],Ib=Sm.addGameObjectManager,Gb={addGameObjectManager(s,t){s===void 0&&(s={});var i=s.name;i||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),Ib.call(this,s,t);var f=s.parseCallbacks;f?f=[...f,...sc]:f=sc;for(var C=0,w=f.length;C<w;C++)f[C](this,this.parser,s);return this}};var Nb=function(s){return this.clickTarget=s,s?dr(s)?this.clickEE=s.input:this.clickEE=s.setInteractive():this.clickEE=null,this},kb=function(s){return this.targetCamera=s,this},Vb=function(s){var t=this;s?typeof s=="function"?this.nextPageInput=function(i,f,C){var w=Ns(t,i,f,C);s.call(t,w)}:this.nextPageInput=function(i,f,C){Mm(t,s,i,f,C)}:this.nextPageInput=null},Ub=function(s,t){return this.imageManager.add(s,t),this};const zb={play(s){return this.isPlaying?this:(this.removeChildren(),this.parser.start(s),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(s){var t=Oe(this);return this.play(s),t}};Phaser.Utils.Objects.GetValue;var uu=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once("page.fadeout",Xb,this).fadeOutPage(),this)},Xb=function(){var s=this.runWrap(this.lastWrapResult);this.lastWrapResult=s,this.emit("page.start");var t=function(){this.emit(lu),s.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?uu.call(this):this.nextPageInput&&this.nextPageInput(uu,[],this))};this.once(lu,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(s.children)};const Yb={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},Wb={resume(){return this.timeline.resume(),this},resumeTyping(s){return this.typeWriter.resumeTyping(s),this}};var Hb=function(s){return this.typeWriter.wait(s),this};const $b={setDefaultTypingSpeed(s){return this.defaultTypingSpeed=s,this},setTypingSpeed(s){return this.typingSpeed=s,this}};var Kb=function(s){return this.typeWriter.setIgnoreWait(s),this},jb=function(s){return s===void 0&&(s=!0),this.ignoreNextPageInput=s,this},Jb=function(){if(!this.isPlaying||!this.isPageTyping)return this;var s=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(s).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(f)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const Zb={getSprite(s){return this.getGameObject("sprite",s)},addSprite(s,t){return this.addGameObject("sprite",s,t),this}},Qb={setContentOutputEnable(s){return this.parser.setContentOutputEnable(s),this},setContentCallback(s,t){return this.contentCallback=s,this.contentCallbackScope=t,this}};var Lm={setClickTarget:Nb,setTargetCamera:kb,setNextPageInput:Vb,addImage:Ub,typingNextPage:uu,wait:Hb,setIgnoreWait:Kb,setIgnoreNextPageInput:jb,showPage:Jb};Object.assign(Lm,Gb,zb,Yb,Wb,$b,Zb,Qb);var qb=function(s){for(var t=0,i=qf.length;t<i;t++)s.emit(qf[t])};const rc=Phaser.Utils.Objects.IsPlainObject,Cs=Phaser.Utils.Objects.GetValue;class _b extends ow(Jo){constructor(t,i,f,C,w,a){rc(i)?a=i:rc(C)&&(a=C),a===void 0&&(a={});var T=a.text;delete a.text,super(t,i,f,C,w,a),this.type="rexTextPlayer",this.parser=new NM(this,Cs(a,"parser",void 0)),this.typeWriter=new Am(this,Cs(a,"typing",void 0)),this._imageManager=void 0;var e=Cs(a,"images",void 0);e&&this.addImage(e),this.setTargetCamera(Cs(a,"camera",this.scene.sys.cameras.main)),this.initManagers(t,a);var u=Cs(a,"sprites");u!==!1&&u!==null&&Sb.call(this,u),this.setIgnoreNextPageInput(Cs(a,"ignoreNextPageInput",!1)),this.setClickTarget(Cs(a,"clickTarget",this)),this.setNextPageInput(Cs(a,"nextPageInput",null)),this.isPlaying=!1,T&&this.play(T)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Nu(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||(qb(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.targetCamera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(_b.prototype,Lm);const Fm={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},Dm={direction:["direction",void 0]};var bs=function(s,t,i){if(typeof i=="string")s.hasOwnProperty(i)&&(t[i]=s[i]);else{var f=i;if(Array.isArray(f))for(var C=0,w=f.length;C<w;C++)bs(s,t,f[C]);else for(var i in f)bs(s,t,i)}},tA=function(s){s===void 0&&(s={});var t={};return bs(s,t,"inputType"),bs(s,t,"type"),bs(s,t,"style"),bs(s,t,Dm),bs(s,t,Fm),t},Bm=function(s,t,i,f){if(t)return!(i&&!i(s,t)||!nc(s,t)||f&&!f(s,t));for(var C=s.scene.input.manager,w=C.pointersTotal,a=C.pointers,t,T=0;T<w;T++)if(t=a[T],!(i&&!i(s,t))&&!!nc(s,t)&&!(f&&!f(s,t)))return!0;return!1},nc=function(s,t){for(var i=s.scene,f=i.input.cameras.getCamerasBelowPointer(t),C=i.input.manager,w=[s],a,T=0,e=f.length;T<e;T++)if(a=C.hitTest(t,w,f[T]),a.length>0)return!0;return!1},Qr=void 0,eA=function(s){s!==Qr&&(Qr!==void 0&&Qr.close(),Qr=s)},iA=function(s){s===Qr&&(Qr=void 0)};const sA=Phaser.Utils.Objects.GetValue;var Ao=function(s,t,i){i===void 0&&(i={});var f,C;for(var w in s)f=s[w],C=sA(t,w,f[1]),C!==void 0&&(i[f[0]]=C);return i},Im=function(s){s.addEventListener("touchstart",Or,!1),s.addEventListener("touchmove",Or,!1),s.addEventListener("touchend",Or,!1),s.addEventListener("mousedown",Or,!1),s.addEventListener("mouseup",Or,!1),s.addEventListener("mousemove",Or,!1)},Or=function(s){s.stopPropagation()};const jh=Phaser.Utils.Objects.GetValue;var rA=function(s,t){var i,f=jh(t,"inputType",void 0);f===void 0&&(f=jh(t,"type","text")),f==="textarea"?(i=document.createElement("textarea"),i.style.resize="none"):(i=document.createElement("input"),i.type=f);var C=jh(t,"style",void 0),w=i.style;Ao(Dm,C,w),w.position="absolute",w.opacity=0,w.pointerEvents="none",w.zIndex=0,w.transform="scale(0)",Ao(Fm,t,i),Im(i);var a=s.scene.sys.scale,T=a.isFullscreen?a.fullscreenTarget:document.body;return T.appendChild(i),i},nA=function(){return this.isOpened?this:this.readOnly?this:(eA(this),this.isOpened=!0,this.node||(this.node=rA(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},aA=function(s){if(!!s){var t=s.parentElement;t&&t.removeChild(s)}},oA=function(){return this.isOpened?(iA(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),aA(this.node),this.node=void 0,this.emit("close",this),this):this},hA={open:nA,close:oA};const Ss=Phaser.Utils.Objects.GetValue;class Gm extends Ne{constructor(t,i){super(t);var f=Ss(i,"inputType",void 0);f===void 0&&(f=Ss(i,"type","text")),this.setEnterCloseEnable(Ss(i,"enterClose",f!=="textarea"));var C=Ss(i,"onOpen",void 0);C||(C=Ss(i,"onFocus",void 0)),this.onOpenCallback=C;var w=Ss(i,"onClose",void 0);w||(w=Ss(i,"onBlur",void 0)),this.onCloseCallback=w,this.onUpdateCallback=Ss(i,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=tA(i),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){Bm(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){!this.node||(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){!this.node||(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,i),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){!this.node||this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){!this.node||(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(!!this.node)return this.node.style.color}set fontColor(t){!this.node||(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node?(this.node.style[t]=i,this):this}getStyle(t){if(!!this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(Gm.prototype,hA);var lA=function(s,t,i){s=s.replace(" ","");var f=i.previousText;if(s===f)return s;if(isNaN(s)){i.emit("nan",s,i),s=f;var C=i.cursorPosition-1;i.setText(s),i.setCursorPosition(C)}else i.previousText=s;return s},uA=function(s){var t=s.parent,i=s.isOpened?s.selectionStart:null,f=s.isOpened?s.selectionEnd:null,C=s.prevSelectionStart,w=s.prevSelectionEnd;if(!(C===i&&w===f)){var a,T;C===null?(a=i,T=f):(a=Math.min(C,i),T=Math.max(w,f));for(var e=a;e<T;e++){var u=C===null?!1:e>=C&&e<w,y=e>=i&&e<f;if(!(u&&y)){var d=t.getCharChild(e);d&&(u?t.emit("cursorout",d,e,t):t.emit("cursorin",d,e,t))}}s.prevSelectionStart=i,s.prevSelectionEnd=f}},dA=function(s){var t=s.parent,i=t.text,f=s.cursorPosition;if(s.prevCursorPosition!==f){if(s.prevCursorPosition!==null&&s.prevCursorPosition>i.length&&(s.prevCursorPosition=null),s.prevCursorPosition!==null){var C=t.getCharChild(s.prevCursorPosition);C&&t.emit("cursorout",C,s.prevCursorPosition,t)}if(f!=null){var C=t.getCharChild(f);C&&t.emit("cursorin",C,f,t)}t.emit("movecursor",f,s.prevCursorPosition,t),s.prevCursorPosition=f}},ac=function(s){var t=s.prevSelectionStart;if(t!==null){for(var i=s.prevSelectionEnd,f=s.parent,C=t;C<i;C++){var w=f.getCharChild(C);w&&f.emit("cursorout",w,C,f)}s.prevSelectionStart=null,s.prevSelectionEnd=null}},oc=function(s){var t=s.prevCursorPosition;if(t!==null){var i=s.parent,f=i.getCharChild(t);f&&i.emit("cursorout",f,t,i),s.prevCursorPosition=null}};const fA=Phaser.Utils.Objects.GetValue;class cA extends Gm{constructor(t,i){super(t,i),this.setSelectAllWhenFocusEnable(fA(i,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(f,C,w,a){var T=t.getNearestChild(C,w),e=t.getCharIndex(T);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(e),this.cursorMoveStartIndex=e,this.firstClickAfterOpen=!1},this).on("pointermove",function(f,C,w,a){if(!!f.isDown){var T=t.getNearestChild(C,w),e=t.getCharIndex(T);this.cursorMoveStartIndex<e?this.selectText(this.cursorMoveStartIndex,e+1):this.selectText(e,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(i,t,this);f!=null&&(i=f)}return t.text!==i&&(t.setText(i),t.emit("textchange",i,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?(oc(this),uA(this)):(ac(this),dA(this)):(ac(this),oc(this)),this}setNumberInput(){return this.onUpdateCallback=lA,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}}const vA=Phaser.Utils.Objects.GetValue,pA=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var mA=function(s,t){var i=vA(t,"edit");return i===void 0&&(i={}),bs(t,i,pA),new cA(s,i)},As=function(s,t){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var i=t.split("."),f=s,C=0;C<i.length;C++)if(f.hasOwnProperty(i[C]))f=f[i[C]];else return!1;return!0}else return!1},Nm=function(s){return s==null||s===""||s.length===0},gA=function(s,t,i){var f=s;if(!Nm(t)){typeof t=="string"&&(t=t.split("."));for(var C,w=0,a=t.length;w<a;w++){if(C=t[w],f[C]==null||typeof f[C]!="object"){var T;w===a-1?i===void 0?T={}:T=i:T={},f[C]=T}f=f[C]}}return f},hr=function(s,t,i,f){if(f===void 0&&(f="."),typeof s=="object"){if(Nm(t)){if(i==null)return;typeof i=="object"&&(s=i)}else{typeof t=="string"&&(t=t.split(f));var C=t.pop(),w=gA(s,t);w[C]=i}return s}},yA=function(s){var t=!s.textArea;if(!As(s,"wrap.vAlign")){var i=t?"center":"top";hr(s,"wrap.vAlign",i)}if(As(s,"wrap.charWrap")||hr(s,"wrap.charWrap",!0),!As(s,"wrap.maxLines")){var i=t?1:void 0;hr(s,"wrap.maxLines",i)}if(As(s,"wrap.useDefaultTextHeight")||hr(s,"wrap.useDefaultTextHeight",!0),s.edit||(s.edit={}),!As(s.edit,"inputType")){var i=t?"text":"textarea";hr(s.edit,"inputType",i)}return s},du=function(s,t,i,f){if(i===void 0&&(i="."),f===void 0&&(f={}),!s)return f;if(t in s)return Object.assign(f,s[t]);t+=i;for(var C in s)!C.startsWith(t)||(f[C.replace(t,"")]=s[C]);return f},Qu=function(s,t,i){if(i===void 0&&(i={}),Array.isArray(t))for(var f,C=0,w=t.length;C<w;C++)f=t[C],i[f]=s[f];else for(var f in t)i[f]=s[f];return i},qu=function(s,t){for(var i in s)if(!(i in t)||s[i]!==t[i])return!1;for(var i in t)if(!(i in s))return!1;return!0},xA=function(s){Ku(s)||this.setCursorStyle(s).on("cursorin",function(t){var i=this.cursorStyle,f=Qu(t.style,i);qu(i,f)||(t.styleSave=f,t.modifyStyle(i))},this).on("cursorout",function(t){!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},TA=function(s){Ku(s)||this.setFocusStyle(s).on("open",function(){var t=this.background,i=this.focusStyle,f=Qu(t,i);qu(i,f)||(t.styleSave=f,t.modifyStyle(i))},this).on("close",function(){var t=this.background;!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},CA=function(s){var t=s.createCharChild("|");return t.text="",sm.call(s,t),t};function us(){}us.prototype={diff(s,t,i={}){let f=i.callback;typeof i=="function"&&(f=i,i={}),this.options=i;let C=this;function w(h){return f?(setTimeout(function(){f(void 0,h)},0),!0):h}s=this.castInput(s),t=this.castInput(t),s=this.removeEmpty(this.tokenize(s)),t=this.removeEmpty(this.tokenize(t));let a=t.length,T=s.length,e=1,u=a+T;i.maxEditLength&&(u=Math.min(u,i.maxEditLength));let y=[{newPos:-1,components:[]}],d=this.extractCommon(y[0],t,s,0);if(y[0].newPos+1>=a&&d+1>=T)return w([{value:this.join(t),count:t.length}]);function l(){for(let h=-1*e;h<=e;h+=2){let r,n=y[h-1],v=y[h+1],o=(v?v.newPos:0)-h;n&&(y[h-1]=void 0);let c=n&&n.newPos+1<a,m=v&&0<=o&&o<T;if(!c&&!m){y[h]=void 0;continue}if(!c||m&&n.newPos<v.newPos?(r=EA(v),C.pushComponent(r.components,void 0,!0)):(r=n,r.newPos++,C.pushComponent(r.components,!0,void 0)),o=C.extractCommon(r,t,s,h),r.newPos+1>=a&&o+1>=T)return w(SA(C,r.components,t,s,C.useLongestToken));y[h]=r}e++}if(f)(function h(){setTimeout(function(){if(e>u)return f();l()||h()},0)})();else for(;e<=u;){let h=l();if(h)return h}},pushComponent(s,t,i){let f=s[s.length-1];f&&f.added===t&&f.removed===i?s[s.length-1]={count:f.count+1,added:t,removed:i}:s.push({count:1,added:t,removed:i})},extractCommon(s,t,i,f){let C=t.length,w=i.length,a=s.newPos,T=a-f,e=0;for(;a+1<C&&T+1<w&&this.equals(t[a+1],i[T+1]);)a++,T++,e++;return e&&s.components.push({count:e}),s.newPos=a,T},equals(s,t){return this.options.comparator?this.options.comparator(s,t):s===t||this.options.ignoreCase&&s.toLowerCase()===t.toLowerCase()},removeEmpty(s){let t=[];for(let i=0;i<s.length;i++)s[i]&&t.push(s[i]);return t},castInput(s){return s},tokenize(s){return s.split("")},join(s){return s.join("")}};function SA(s,t,i,f,C){let w=0,a=t.length,T=0,e=0;for(;w<a;w++){let y=t[w];if(y.removed){if(y.value=s.join(f.slice(e,e+y.count)),e+=y.count,w&&t[w-1].added){let d=t[w-1];t[w-1]=t[w],t[w]=d}}else{if(!y.added&&C){let d=i.slice(T,T+y.count);d=d.map(function(l,h){let r=f[e+h];return r.length>l.length?r:l}),y.value=s.join(d)}else y.value=s.join(i.slice(T,T+y.count));T+=y.count,y.added||(e+=y.count)}}let u=t[a-1];return a>1&&typeof u.value=="string"&&(u.added||u.removed)&&s.equals("",u.value)&&(t[a-2].value+=u.value,t.pop()),t}function EA(s){return{newPos:s.newPos,components:s.components.slice(0)}}const PA=new us;function wA(s,t,i){return PA.diff(s,t,i)}const hc=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,lc=/\S/,km=new us;km.equals=function(s,t){return this.options.ignoreCase&&(s=s.toLowerCase(),t=t.toLowerCase()),s===t||this.options.ignoreWhitespace&&!lc.test(s)&&!lc.test(t)};km.tokenize=function(s){let t=s.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let i=0;i<t.length-1;i++)!t[i+1]&&t[i+2]&&hc.test(t[i])&&hc.test(t[i+2])&&(t[i]+=t[i+2],t.splice(i+1,2),i--);return t};const Vm=new us;Vm.tokenize=function(s){let t=[],i=s.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(let f=0;f<i.length;f++){let C=i[f];f%2&&!this.options.newlineIsToken?t[t.length-1]+=C:(this.options.ignoreWhitespace&&(C=C.trim()),t.push(C))}return t};const MA=new us;MA.tokenize=function(s){return s.split(/(\S.+?[.!?])(?=\s+|$)/)};const bA=new us;bA.tokenize=function(s){return s.split(/([{}:;,]|\s+)/)};const AA=Object.prototype.toString,jn=new us;jn.useLongestToken=!0;jn.tokenize=Vm.tokenize;jn.castInput=function(s){const{undefinedReplacement:t,stringifyReplacer:i=(f,C)=>typeof C>"u"?t:C}=this.options;return typeof s=="string"?s:JSON.stringify(fu(s,null,null,i),i,"  ")};jn.equals=function(s,t){return us.prototype.equals.call(jn,s.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function fu(s,t,i,f,C){t=t||[],i=i||[],f&&(s=f(C,s));let w;for(w=0;w<t.length;w+=1)if(t[w]===s)return i[w];let a;if(AA.call(s)==="[object Array]"){for(t.push(s),a=new Array(s.length),i.push(a),w=0;w<s.length;w+=1)a[w]=fu(s[w],t,i,f,C);return t.pop(),i.pop(),a}if(s&&s.toJSON&&(s=s.toJSON()),typeof s=="object"&&s!==null){t.push(s),a={},i.push(a);let T=[],e;for(e in s)s.hasOwnProperty(e)&&T.push(e);for(T.sort(),w=0;w<T.length;w+=1)e=T[w],a[e]=fu(s[e],t,i,f,e);t.pop(),i.pop()}else a=s;return a}const cu=new us;cu.tokenize=function(s){return s.slice()};cu.join=cu.removeEmpty=function(s){return s};const RA=Phaser.Utils.Array.Remove;var OA=function(s,t){var i=s.text;if(t!==i){if(RA(s.children,s.lastInsertCursor),t==="")s.removeChildren();else for(var f=wA(i,t),C=0,w=0,a=f.length;w<a;w++){var T=f[w];T.removed?s.removeText(C,T.count):(T.added&&s.insertText(C,T.value),C+=T.count)}s.children.push(s.lastInsertCursor),s.runWordWrap()}};const uc=Phaser.Utils.Objects.IsPlainObject;class LA extends Jo{constructor(t,i,f,C,w,a){uc(i)?a=i:uc(C)&&(a=C),a===void 0&&(a={}),yA(a);var T=a.text;T&&delete a.text;var e=du(a.background,"focus"),u=du(a.style,"cursor");super(t,i,f,C,w,a),this.type="rexCanvasInput",this._text="",this.textEdit=mA(this,a),a.focusStyle&&Object.assign(e,a.focusStyle),TA.call(this,e),a.cursorStyle&&Object.assign(u,a.cursorStyle),xA.call(this,u);var y=a.onAddChar;y&&this.on("addchar",y);var d=a.onCursorOut;d&&this.on("cursorout",d);var l=a.onCursorIn;l&&this.on("cursorin",l);var h=a.onMoveCursor;h&&this.on("movecursor",h),this.setParseTextCallback(a.parseTextCallback),this.lastInsertCursor=CA(this),T?this.setText(T):this.runWordWrap()}addChild(t,i){if(super.addChild(t,i),Array.isArray(t))for(var f=t,C=0,w=f.length;C<w;C++){var t=f[C];an(t)&&this.emit("addchar",t,i+C,this)}else an(t)&&this.emit("addchar",t,i,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(OA(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,i){return this.width===t&&this.height===i?this:(super.setSize(t,i),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=FA),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}}var FA=function(s){return s},Um=function(s){return Uo(s).loop.delta};Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const DA=Phaser.GameObjects.GetCalcMatrix;var BA=function(s,t,i,f){t.updateData(),i.addToRenderList(t);var C=s.pipelines.set(t.pipeline),w=DA(t,i,f),a=C.calcMatrix.copyFrom(w.calc),T=t._displayOriginX,e=t._displayOriginY,u=i.alpha*t.alpha;s.pipelines.preBatch(t);for(var y=t.geom,d=0,l=y.length;d<l;d++)y[d].webglRender(C,a,u,T,e);s.pipelines.postBatch(t)};const IA=Phaser.Renderer.Canvas.SetTransform;var GA=function(s,t,i,f){t.updateData(),i.addToRenderList(t);var C=s.currentContext;if(IA(s,C,t,i,f)){for(var w=t._displayOriginX,a=t._displayOriginY,T=t.geom,e=0,u=T.length;e<u;e++)T[e].canvasRender(C,w,a);C.restore()}};const NA={renderWebGL:BA,renderCanvas:GA},kA=Phaser.GameObjects.Shape,VA=Phaser.Utils.Array.Remove;class yr extends kA{constructor(t,i,f,C,w){i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=C),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,f),this.setSize(C,w),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,i,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==f,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,f=t.length;i<f;i++){var C=t[i];C.dirty&&C.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,rs(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}deleteShape(t){var i=this.getShape(t);return i&&(delete this.shapes[t],VA(this.geom,i)),this}}Object.assign(yr.prototype,NA);const UA={setBoxFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==s||this.boxFillAlpha!==t,this.boxFillColor=s,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==s||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=s,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(s,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.boxLineWidth!==s||this.boxStrokeColor!==t||this.boxStrokeAlpha!==i,this.boxLineWidth=s,this.boxStrokeColor=t,this.boxStrokeAlpha=i,this},setUncheckedBoxStrokeStyle(s,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==s||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==i,this.uncheckedBoxLineWidth=s,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=i,this},setCheckerStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==s||this.checkAlpha!==t,this.checkerColor=s,this.checkAlpha=t,this},setBoxShape(s){return s===void 0&&(s=!1),this.isCircleShape===s?this:(this.isCircleShape=s,this.isSizeChanged=!0,this.dirty=!0,this)}},zA={setBoxSize(s){return this.dirty=this.dirty||this.boxSize!==s,this.boxSize=s,this},setCheckerSize(s){return this.dirty=this.dirty||this.checkerSize!==s,this.checkerSize=s,this}};var XA=function(s,t){return s==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=s,this.fillAlpha=t),this},YA=function(s,t,i){return s==null||t==null?this.isStroked=!1:(i===void 0&&(i=1),this.isStroked=!0,this.lineWidth=s,this.strokeColor=t,this.strokeAlpha=i),this};const WA={fillStyle:XA,lineStyle:YA};class _o{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,i,f,C,w){}canvasRender(t,i,f){}updateData(){this.dirty=!1}}Object.assign(_o.prototype,WA,Ho);const HA=Phaser.Geom.Polygon.Earcut;class ha extends _o{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=HA(this.pathData),super.updateData(),this}webglRender(t,i,f,C,w){this.isFilled&&_p(t,i,this,f,C,w),this.isStroked&&$o(t,this,f,C,w)}canvasRender(t,i,f){var C=this.pathData,w=C.length-1,a=C[0]-i,T=C[1]-f;t.beginPath(),t.moveTo(a,T),this.closePath||(w-=2);for(var e=2;e<w;e+=2){var u=C[e]-i,y=C[e+1]-f;t.lineTo(u,y)}this.closePath&&t.closePath(),this.isFilled&&(sa(t,this),t.fill()),this.isStroked&&(ra(t,this),t.stroke())}}const dc=Phaser.Math.DegToRad;class th extends ha{constructor(t,i,f,C,w,a,T,e){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),a===void 0&&(a=360),T===void 0&&(T=!1),e===void 0&&(e=!1),super(),this.setCenterPosition(t,i),this.setRadius(f,C),this.setAngle(w,a,T),this.setPie(e),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,i){return i===void 0&&(i=t),this.x=t,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,i){return i===void 0&&(i=t),this.radiusX=t,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,i,f){return f===void 0&&(f=!1),this.startAngle=t,this.endAngle=i,this.anticlockwise=f,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Ee(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,i,f){t.beginPath();var C=this.x-i,w=this.y-f,a=dc(this.startAngle),T=dc(this.endAngle);this.pie&&(t.moveTo(C,w),t.lineTo(C+Math.cos(a)*this.radiusX,w+Math.sin(a)*this.radiusY)),t.ellipse(C,w,this.radiusX,this.radiusY,0,a,T,this.anticlockwise),this.pie&&t.lineTo(C,w),this.isFilled&&(sa(t,this),t.fill()),this.isStroked&&(ra(t,this),t.stroke())}}class vu extends th{constructor(t,i,f){super(t,i,f,f,0,360)}}class $A extends ha{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),i=0,f=t.length;i<f;i++)this.pathData.push(t[i].x,t[i].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class KA extends th{constructor(t,i,f,C){super(t,i,f,C,0,360)}}class jA extends ha{constructor(t,i,f,C){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=0),super(),this.setP0(t,i),this.setP1(f,C)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var JA=function(s,t,i){return i.length=0,s!=null&&i.push(s,t),i};const fc=Phaser.Math.Interpolation.QuadraticBezier;var cc=function(s,t,i,f,C,w){for(var a=w.length,T=w[a-2],e=w[a-1],u=1,y=C-1;u<=y;u++){var d=u/y;w.push(fc(d,T,s,i),fc(d,e,t,f))}return w},zm=function(s){var t=s.length;if(t<2)return s;var i=s[t-2],f=s[t-1];return s.push(i),s.push(f),s};const ZA={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(s,t){return this.restorePathData(),this.accumulationLengths=void 0,JA(s,t,this.pathData),this.firstPointX=s,this.firstPointY=t,this.lastPointX=s,this.lastPointY=t,this},lineTo(s,t,i){return i===void 0&&(i=!1),i&&(s+=this.lastPointX,t+=this.lastPointY),Vi(s,t,this.pathData),this.lastPointX=s,this.lastPointY=t,this},verticalLineTo(s,t){return this.lineTo(s,this.lastPointY,t),this},horizontalLineTo(s,t){return this.lineTo(this.lastPointX,s,t),this},ellipticalArc(s,t,i,f,C,w,a){return a===void 0&&(a=!1),Ee(s,t,i,f,C,w,a,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(s,t,i,f,C,w){return this.ellipticalArc(s,t,i,i,f,C,w),this},quadraticBezierTo(s,t,i,f){return cc(s,t,i,f,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=f,this.lastCX=s,this.lastCY=t,this},smoothQuadraticBezierTo(s,t){var i=this.lastPointX*2-this.lastCX,f=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(i,f,s,t),this},cubicBezierCurveTo(s,t,i,f,C,w){return cc(s,t,i,f,C,w,this.iterations,this.pathData),this.lastPointX=C,this.lastPointY=w,this.lastCX=i,this.lastCY=f,this},smoothCubicBezierCurveTo(s,t,i,f){var C=this.lastPointX*2-this.lastCX,w=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(C,w,s,t,i,f),this},close(){return this.closePath=!0,this},end(){return zm(this.pathData),this}},QA=Phaser.Math.RotateAround;var qA=function(s,t,i,f){for(var C={x:0,y:0},w=0,a=f.length-1;w<a;w+=2)C.x=f[w],C.y=f[w+1],QA(C,s,t,i),f[w]=C.x,f[w+1]=C.y;return f},_A=function(s,t,i,f,C){for(var w=0,a=C.length-1;w<a;w+=2){var T=C[w]-s,e=C[w+1]-t;T*=i,e*=f,C[w]=T+s,C[w+1]=e+t}return C},Xm=function(s,t,i){for(var f=0,C=i.length-1;f<C;f+=2)i[f]+=s,i[f+1]+=t;return i};const tR=Phaser.Math.DegToRad,eR=Phaser.Math.RotateAround,iR={rotateAround(s,t,i){if(this.pathData.length===0)return this;i=tR(i),qA(s,t,i,this.pathData);var f=this.pathData.length;if(this.lastPointX=this.pathData[f-2],this.lastPointY=this.pathData[f-1],this.lastCX!==void 0){var C={x:this.lastCX,y:this.lastCY};eR(C,s,t,i),this.lastCX=C.x,this.lastCY=C.y}return this},scale(s,t,i,f){if(this.pathData.length===0)return this;if(_A(s,t,i,f,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var C=this.lastCX-s,w=this.lastCY-t;C*=i,w*=f,this.lastCX=C+s,this.lastCY=w+t}return this},offset(s,t){return Xm(s,t,this.pathData),this}};var sR=function(s,t,i,f){i===void 0&&(i=0),f===void 0&&(f=t.length),s.length=f-i;for(var C=0,w=s.length;C<w;C++)s[C]=t[C+i];return s};const rR={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(sR(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},nR=Phaser.Math.Distance.Between,aR=Phaser.Math.Wrap,oR=Phaser.Math.Linear;var vc=function(s,t,i,f,C){if(f===void 0&&(f=i,i=0),i=pc(i),f=pc(f),i!==f){var w=t[t.length-1],a=w*i,T=w*f;i<f?Jh(s,t,a,T,C):(Jh(s,t,a,w,C),Jh(s,t,0,T,C)),zm(C)}},Jh=function(s,t,i,f,C){for(var w=i>0,a=0,T=t.length;a<T;a++){var e=a*2,u=t[a];if(w){if(u<i)continue;if(u==i)w=!1;else{var y=u-t[a-1],d=1-(u-i)/y;C.push(Wa(s,e-2,e,d)),C.push(Wa(s,e-1,e+1,d)),w=!1}}if(u<=f){if(C.push(s[e]),C.push(s[e+1]),u===f)break}else{var y=u-t[a-1],d=1-(u-f)/y;C.push(Wa(s,e-2,e,d)),C.push(Wa(s,e-1,e+1,d));break}}},Wa=function(s,t,i,f){var C=s[t],w=s[i];return oR(C,w,f)},pc=function(s){return s===0?0:s%1===0?1:aR(s,0,1)};const hR={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var s=this.accumulationLengths,t=this.pathData,i,f,C,w,a,T=0,e=0,u=t.length;e<u;e+=2)C=t[e],w=t[e+1],a=i===void 0?0:nR(i,f,C,w),T+=a,s.push(T),i=C,f=w;return this.totalPathLength=T,this},setDisplayPathSegment(s,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,vc(this.pathDataSave,this.accumulationLengths,s,t,this.pathData),this},appendFromPathSegment(s,t,i){return t===void 0?this.pathData.push(...s.pathData):(s.updateAccumulationLengths(),vc(s.pathData,s.accumulationLengths,t,i,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},lR={draw(s,t,i){var f=this.toPoints();return t&&s.fillPoints(f,this.closePath,this.closePath),i&&s.strokePoints(f,this.closePath,this.closePath),this}};var uR=function(s,t){t===void 0&&(t=[]);for(var i=0,f=s.length-1;i<f;i+=2)t.push({x:s[i],y:s[i+1]});return t};const dR=Phaser.Geom.Polygon;var fR=function(s,t){return t===void 0&&(t=new dR),t.setTo(s),t};class Ym{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return uR(this.pathData)}toPolygon(t){return fR(this.pathData,t)}}Object.assign(Ym.prototype,ZA,iR,rR,hR,lR);class en extends ha{constructor(){super(),this.builder=new Ym(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}lineTo(t,i,f){return this.builder.lineTo(t,i,f),this.dirty=!0,this}verticalLineTo(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}horizontalLineTo(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}ellipticalArc(t,i,f,C,w,a,T){return this.builder.ellipticalArc(t,i,f,C,w,a,T),this.dirty=!0,this}arc(t,i,f,C,w,a){return this.builder.arc(t,i,f,C,w,a),this.dirty=!0,this}quadraticBezierTo(t,i,f,C){return this.builder.quadraticBezierTo(t,i,f,C),this.dirty=!0,this}smoothQuadraticBezierTo(t,i){return this.builder.smoothQuadraticBezierTo(t,i),this.dirty=!0,this}cubicBezierCurveTo(t,i,f,C,w,a){return this.builder.cubicBezierCurveTo(t,i,f,C,w,a),this.dirty=!0,this}smoothCubicBezierCurveTo(t,i,f,C){return this.builder.smoothCubicBezierCurveTo(t,i,f,C),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,i,f){return this.builder.rotateAround(t,i,f),this.dirty=!0,this}scale(t,i,f,C){return this.builder.scale(t,i,f,C),this.dirty=!0,this}offset(t,i){return this.builder.offset(t,i),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,i,f){return this.builder.appendFromPathSegment(t.builder,i,f),this}copyPathFrom(t,i,f){return this.builder.clear().appendFromPathSegment(t.builder,i,f),this}setDisplayPathSegment(t,i){return this.builder.setDisplayPathSegment(t,i),this}}const cR=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class vR extends _o{constructor(t,i,f,C){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,i),this.setSize(f,C)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}updateData(){this.pathData.length=0;var t=this.x,i=t+this.width,f=this.y,C=f+this.height;return this.pathData.push(t,f),this.pathData.push(i,f),this.pathData.push(i,C),this.pathData.push(t,C),this.pathData.push(t,f),super.updateData(),this}webglRender(t,i,f,C,w){if(this.isFilled){var a=t.fillTint,T=cR(this.fillColor,this.fillAlpha*f);a.TL=T,a.TR=T,a.BL=T,a.BR=T,t.batchFillRect(-C+this.x,-w+this.y,this.width,this.height)}this.isStroked&&$o(t,this,f,C,w)}canvasRender(t,i,f){this.isFilled&&(sa(t,this),t.fillRect(-i,-f,this.width,this.height)),this.isStroked&&(ra(t,this),t.beginPath(),t.rect(-i,-f,this.width,this.height),t.stroke())}}const Ha=Phaser.Utils.Objects.GetValue;class Ro extends ha{constructor(t,i,f,C,w,a){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=f),w===void 0&&(w=0),a===void 0&&(a=6),super(),this.setTopLeftPosition(t,i),this.setSize(f,C),this.setRadius(w),this.setIterations(a),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var i=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==i,this._convexTL=i,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var i=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==i,this._convexTR=i,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var i=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==i,this._convexBL=i,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var i=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==i,this._convexBR=i,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=Ha(t,"tl",0),this.radiusTR=Ha(t,"tr",0),this.radiusBL=Ha(t,"bl",0),this.radiusBR=Ha(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var i=this.width,f=this.height,C,w=this.iterations+1;if(C=this.radiusTL,C>0)if(this._convexTL){var a=C,T=C;Ee(a,T,C,C,180,270,!1,w,t)}else{var a=0,T=0;Ee(a,T,C,C,90,0,!0,w,t)}else Vi(0,0,t);if(C=this.radiusTR,C>0)if(this._convexTR){var a=i-C,T=C;Ee(a,T,C,C,270,360,!1,w,t)}else{var a=i,T=0;Ee(a,T,C,C,180,90,!0,w,t)}else Vi(i,0,t);if(C=this.radiusBR,C>0)if(this._convexBR){var a=i-C,T=f-C;Ee(a,T,C,C,0,90,!1,w,t)}else{var a=i,T=f;Ee(a,T,C,C,270,180,!0,w,t)}else Vi(i,f,t);if(C=this.radiusBL,C>0)if(this._convexBL){var a=C,T=f-C;Ee(a,T,C,C,90,180,!1,w,t)}else{var a=0,T=f;Ee(a,T,C,C,360,270,!0,w,t)}else Vi(0,f,t);return t.push(t[0],t[1]),Xm(this.x,this.y,t),super.updateData(),this}}const pR=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class mR extends _o{constructor(t,i,f,C,w,a){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),a===void 0&&(a=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,i),this.setP1(f,C),this.setP2(w,a)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,i){return this.dirty=this.dirty||this.x2!==t||this.y2!==i,this.x2=t,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,i,f,C,w){if(this.isFilled){var a=pR(this.fillColor,this.fillAlpha*f),T=this.x0-C,e=this.y0-w,u=this.x1-C,y=this.y1-w,d=this.x2-C,l=this.y2-w,h=i.getX(T,e),r=i.getY(T,e),n=i.getX(u,y),v=i.getY(u,y),o=i.getX(d,l),c=i.getY(d,l);t.batchTri(h,r,n,v,o,c,a,a,a)}this.isStroked&&$o(t,this,f,C,w)}canvasRender(t,i,f){var C=this.x1-i,w=this.y1-f,a=this.x2-i,T=this.y2-f,e=this.x3-i,u=this.y3-f;t.beginPath(),t.moveTo(C,w),t.lineTo(a,T),t.lineTo(e,u),t.closePath(),this.isFilled&&(sa(t,this),t.fill()),this.isStroked&&(ra(t,this),t.stroke())}}const gR={buildShapes(){this.addShape(new Ro().setName("box")).addShape(new en().setName("checker"))},updateShapes(){var s=this.width/2,t=this.height/2,i=Math.min(s,t),f=i*2,C=s-i,w=t-i,a=this.boxLineWidth,T=Math.max(f/10,2),e=this.getShape("box"),u=this.getShape("checker");if(this.isSizeChanged){var l=f*(1-this.boxSize)/2,y=a/2,d=f*this.boxSize-a;e.setTopLeftPosition(C+y+l,w+y+l).setSize(d,d),this.isCircleShape?e.setRadius(d/2):e.setRadius(0);var l=f*(1-this.checkerSize)/2,h=f*this.checkerSize/4,r=h*1,n=h*2,v=h*3;u.startAt(r,n).lineTo(n,v).lineTo(v,r).offset(C+l,w+l).end()}this.checked?(e.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(a,this.boxStrokeColor,this.boxStrokeAlpha),u.lineStyle(T,this.checkerColor)):(e.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(a,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),u.lineStyle()),this.checked&&u.setDisplayPathSegment(this.checkerAnimProgress)}},Es=Phaser.Utils.Objects.GetValue,yR=Phaser.Math.Linear;class xr extends un{constructor(t,i){super(t,i),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=Es(t,"key","value");var f=i[this.propertyKey];return this.fromValue=Es(t,"from",f),this.toValue=Es(t,"to",f),this.setEase(Es(t,"ease",this.ease)),this.setDuration(Es(t,"duration",this.duration)),this.setRepeat(Es(t,"repeat",0)),this.setDelay(Es(t,"delay",0)),this.setRepeatDelay(Es(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),i[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,i){var f=i.t;f=this.easeFn(f),t[this.propertyKey]=yR(this.fromValue,this.toValue,f)}}const xR={setCheckerAnimationDuration(s){return s===void 0&&(s=0),this.checkerAnimDuration=s,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new xr(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var Wm={};Object.assign(Wm,UA,zA,gR,xR);const ae=Phaser.Utils.Objects.GetValue,mc=Phaser.Utils.Objects.IsPlainObject,Zh=23730,TR=16777215;class Hm extends yr{constructor(t,i,f,C,w,a,T){mc(i)?(T=i,i=ae(T,"x",0),f=ae(T,"y",0),C=ae(T,"width",2),w=ae(T,"height",2),a=ae(T,"color",Zh)):mc(a)&&(T=a,a=ae(T,"color",Zh)),super(t,i,f,C,w),this.type="rexCheckbox",a===void 0&&(a=Zh),this.setBoxShape(ae(T,"circleBox",!1)),this.setBoxFillStyle(a,ae(T,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(ae(T,"uncheckedColor",null),ae(T,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(ae(T,"boxLineWidth",4),ae(T,"boxStrokeColor",a),ae(T,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,ae(T,"uncheckedBoxStrokeColor",this.boxStrokeColor),ae(T,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(ae(T,"checkerColor",TR),ae(T,"checkerAlpha",1)),this.setBoxSize(ae(T,"boxSize",1)),this.setCheckerSize(ae(T,"checkerSize",1)),this.setCheckerAnimationDuration(ae(T,"animationDuration",150)),this.buildShapes();var e=ae(T,"checked");e===void 0&&(e=ae(T,"value",!1)),this.setValue(e)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(Hm.prototype,Wm);const gc=Phaser.Utils.Objects.GetValue;class CR extends Hm{constructor(t,i,f,C,w,a,T){super(t,i,f,C,w,a,T),this._click=new Fs(this,gc(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(gc(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}const SR={setTrackFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==s||this.trackFillAlpha!==t,this.trackFillColor=s,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==s||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=s,this.falseValueTrackFillAlpha=t,this},setThumbStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==s||this.checkAlpha!==t,this.thumbColor=s,this.thumbAlpha=t,this}},ER={setTrackSize(s,t){return this.dirty=this.dirty||this.trackWidth!==s||this.trackHeight!==t,this.trackWidth=s,this.trackHeight=t,this},setTrackRadius(s){return this.dirty=this.dirty||this.trackRadius!==s,this.trackRadius=s,this},setThumbSize(s,t){return t===void 0&&(t=s),this.dirty=this.dirty||this.thumbWidth!==s||this.thumbHeight!==t,this.thumbWidth=s,this.thumbHeight=t,this},setThumbRadius(s){return this.dirty=this.dirty||this.thumbRadius!==s,this.thumbRadius=s,this}},PR={setThumbPosition(s,t){return t===void 0&&(t=1-s),this.thumbLeftX=s,this.thumbRightX=t,this},setRTL(s){return s===void 0&&(s=!0),this.rtl=s,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Qh=function(s,t,i){return(t-s)*i+s},wR=function(s,t,i){var f=Qh(Hn(s),Hn(t),i),C=Qh($n(s),$n(t),i),w=Qh(Kn(s),Kn(t),i);return(f&255)<<16|(C&255)<<8|w&255};const yc=Phaser.Math.Linear,MR={buildShapes(){this.addShape(new Ro().setName("track")).addShape(new Ro().setName("thumb"))},updateShapes(){var s=this.width,t=this.height,i=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,f=this.getShape("track");if(this.isSizeChanged){var C=s*this.trackWidth,w=t*this.trackHeight,a=(s-C)/2,T=(t-w)/2,e=t*this.trackRadius;f.setTopLeftPosition(a,T).setSize(C,w).setRadius(e)}var u=wR(this.falseValueTrackColor,this.trackFillColor,i),y=yc(this.falseValueTrackFillAlpha,this.trackFillAlpha,i);f.fillStyle(u,y);var d=this.getShape("thumb");if(this.isSizeChanged){var l=s*this.thumbWidth,h=t*this.thumbHeight,r=t*this.thumbRadius;d.setSize(l,h).setRadius(r)}var n=yc(this.thumbLeftX,this.thumbRightX,i)*s;this.rtl&&(n=s-n);var v=t/2;d.setCenterPosition(n,v),d.fillStyle(this.thumbColor,this.thumbAlpha)}},bR={setToggleAnimationDuration(s){return s===void 0&&(s=0),this.toggleAnimDuration=s,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new xr(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var $m={};Object.assign($m,SR,ER,PR,MR,bR);var AR=function(s){var t=.3*Hn(s)+.59*$n(s)+.11*Kn(s);return(t&255)<<16|(t&255)<<8|t&255};const oe=Phaser.Utils.Objects.GetValue,xc=Phaser.Utils.Objects.IsPlainObject,qh=23730,RR=16777215;class Km extends yr{constructor(t,i,f,C,w,a,T){xc(i)?(T=i,i=oe(T,"x",0),f=oe(T,"y",0),C=oe(T,"width",2),w=oe(T,"height",2),a=oe(T,"color",qh)):xc(a)&&(T=a,a=oe(T,"color",qh)),super(t,i,f,C,w),this.type="rexToggleSwitch",a===void 0&&(a=qh),this.setTrackFillStyle(a,oe(T,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(oe(T,"falseValueTrackColor",AR(a)),oe(T,"falseValueTrackFillAlpha",1)),this.setThumbStyle(oe(T,"thumbColor",RR),oe(T,"thumbAlpha",1)),this.setTrackSize(oe(T,"trackWidth",.9),oe(T,"trackHeight",.5)),this.setTrackRadius(oe(T,"trackRadius",this.trackHeight*.5));var e=oe(T,"thumbHeight",void 0),u=oe(T,"thumbWidth",e);u===void 0&&(u=this.trackHeight*.9),this.setThumbSize(u,e),this.setThumbRadius(oe(T,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(oe(T,"thumbLeft",.3),oe(T,"thumbRight",void 0)),this.setRTL(oe(T,"rtl",!1)),this.setToggleAnimationDuration(oe(T,"animationDuration",150)),this.buildShapes(),this.setValue(oe(T,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,i){i===void 0&&(i=this.toggleAnimDuration);var f=this.toggleAnimDuration;return this.toggleAnimDuration=i,this.value=t,this.toggleAnimDuration=f,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(Km.prototype,$m);const Tc=Phaser.Utils.Objects.GetValue;class OR extends Km{constructor(t,i,f,C,w,a,T){super(t,i,f,C,w,a,T),this._click=new Fs(this,Tc(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Tc(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}const LR={loadFromURL(s,t){var i=this,f=new Image;return f.onload=function(){i.width!==f.width||i.height!==f.height?i.resize(f.width,f.height):i.clear(),i.context.drawImage(f,0,0),i.updateTexture(),t&&t(),f.onload=null,f.src="",f.remove()},f.src=s,this},loadFromURLPromise(s){var t=this;return new Promise(function(i,f){t.loadFromURL(s,i)})},loadFromFile(s,t){var i=URL.createObjectURL(s);return this.loadFromURL(i,function(){URL.revokeObjectURL(i),t&&t()}),this},loadFromFilePromise(s){var t=this;return new Promise(function(i,f){t.loadFromFile(s,i)})}};class eh extends na{}Object.assign(eh.prototype,LR);Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const FR=Phaser.Math.Linear,Cc=Phaser.Math.Percent,DR={setValue(s,t,i){return s==null?this:(t!==void 0&&(s=Cc(s,t,i)),this.value=s,this)},addValue(s,t,i){return t!==void 0&&(s=Cc(s,t,i)),this.value+=s,this},getValue(s,t){var i=this.value;return s!==void 0&&(i=FR(s,t,i)),i}},BR=Phaser.Math.Percent;var IR=function(s){return this.easeValuePropName=s,this},GR=function(s){return this.easeValueDuration=s,this},NR=function(s){return this.easeFunction=s,this},kR=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},VR=function(s,t,i){return s==null?this:(t!==void 0&&(s=BR(s,t,i)),this.easeValueTask===void 0&&(this.easeValueTask=new xr(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:s,duration:this.easeValueDuration,ease:this.easeFunction}),this)},UR=function(s,t,i,f){return i===void 0&&(i=-1),f===void 0&&(f=0),this.easeValueTask===void 0&&(this.easeValueTask=new xr(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:s,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:i,repeatDelay:f}),this};const zR={setEaseValuePropName:IR,setEaseValueDuration:GR,setEaseValueFunction:NR,stopEaseValue:kR,easeValueTo:VR,easeValueRepeat:UR},Pn=Phaser.Utils.Objects.GetValue,XR=Phaser.Math.Clamp;function Tr(s){class t extends s{bootProgressBase(f){this.eventEmitter=Pn(f,"eventEmitter",this);var C=Pn(f,"valuechangeCallback",null);if(C!==null){var w=Pn(f,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",C,w)}return this.setEaseValuePropName("value").setEaseValueDuration(Pn(f,"easeValue.duration",0)).setEaseValueFunction(Pn(f,"easeValue.ease","Linear")),this}get value(){return this._value}set value(f){f=XR(f,0,1);var C=this._value,w=C!=f;this.dirty=this.dirty||w,this._value=f,w&&this.eventEmitter.emit("valuechange",this._value,C,this.eventEmitter)}}return Object.assign(t.prototype,DR,zR),t}const YR=Phaser.Math.RadToDeg,WR={buildShapes(){this.addShape(new vu().setName("track")).addShape(new th().setName("bar")).addShape(new vu().setName("center"))},updateShapes(){var s=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,f=this.radius-t,C=this.getShape("track");this.trackColor!=null&&t>0?C.setCenterPosition(s,s).setRadius(i).lineStyle(t,this.trackColor):C.reset();var w=this.getShape("bar");if(this.barColor!=null&&i>0){var a,T,e;if(this.value===1)a=!1,T=0,e=361;else{a=this.anticlockwise,T=YR(this.startAngle);var u=360*(a?1-this.value:this.value);e=u+T}w.setCenterPosition(s,s).setRadius(i).setAngle(T,e,a).lineStyle(t,this.barColor)}else w.reset();var y=this.getShape("center");this.centerColor&&f>0?y.setCenterPosition(s,s).setRadius(f).fillStyle(this.centerColor):y.reset()}},bi=Phaser.Utils.Objects.GetValue,HR=Phaser.Utils.Objects.IsPlainObject,$R=Phaser.Math.Clamp,KR=Phaser.Math.DegToRad(270);class jm extends Tr(yr){constructor(t,i,f,C,w,a,T){HR(i)&&(T=i,i=bi(T,"x",0),f=bi(T,"y",0),C=bi(T,"radius",1),w=bi(T,"barColor",void 0),a=bi(T,"value",0)),C===void 0&&(C=1);var e=C*2;super(t,i,f,e,e),this.type="rexCircularProgress",this.bootProgressBase(T),this.setRadius(C),this.setTrackColor(bi(T,"trackColor",void 0)),this.setBarColor(w),this.setCenterColor(bi(T,"centerColor",void 0)),this.setThickness(bi(T,"thickness",.2)),this.setStartAngle(bi(T,"startAngle",KR)),this.setAnticlockwise(bi(T,"anticlockwise",!1)),this.buildShapes(),this.setValue(a)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=$R(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}}Object.assign(jm.prototype,WR);var _h=function(s,t,i,f,C,w,a,T,e,u,y,d){u===void 0&&(u=0),y===void 0&&(y=2*Math.PI),d===void 0&&(d=!1),t.beginPath(),t.ellipse(i,f,C,w,0,u,y,d),a!=null&&(t.fillStyle=a,t.fill()),T!=null&&(t.strokeStyle=T,t.lineWidth=e,t.stroke())},jR=function(s,t,i,f,C,w,a,T,e,u,y){e===void 0&&T!=null&&(e=2),u===void 0&&(u="start"),y===void 0&&(y="alphabetic"),t.font=w,t.textAlign=u,t.textBaseline=y,t.fillStyle=a,t.strokeStyle=T,t.lineWidth=e,t.lineCap="round",t.lineJoin="round",T!=null&&T!=="none"&&e>0&&t.strokeText(C,i,f),a!=null&&a!=="none"&&t.fillText(C,i,f)},JR=function(){var s=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,f=this.radius-t,C=this.canvas,w=this.context;if(this.trackColor&&t>0&&(w.save(),_h(C,w,s,s,i,i,void 0,this.trackColor,t),w.restore()),this.barColor&&i>0){var a,T,e;if(this.value===1)a=!1,T=0,e=2*Math.PI;else{a=this.anticlockwise,T=this.startAngle;var u=2*Math.PI*(a?1-this.value:this.value);e=u+T}w.save(),_h(C,w,s,s,i,i,void 0,this.barColor,t,T,e,a),w.restore()}if(this.centerColor&&f>0){var y;this.centerColor2?(y=this.context.createRadialGradient(s,s,0,s,s,f),y.addColorStop(0,this.centerColor),y.addColorStop(1,this.centerColor2)):y=this.centerColor,w.save(),_h(C,w,s,s,f,f,y),w.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(w.save(),jR(C,w,s,s,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),w.restore())};const me=Phaser.Utils.Objects.GetValue,ZR=Phaser.Utils.Objects.IsPlainObject,QR=Phaser.Math.Clamp,qR=Phaser.Math.DegToRad(270);class hG extends Tr(na){constructor(t,i,f,C,w,a,T){ZR(i)&&(T=i,i=me(T,"x",0),f=me(T,"y",0),C=me(T,"radius",1),w=me(T,"barColor",void 0),a=me(T,"value",0));var e=C*2;super(t,i,f,e,e),this.type="rexCircularProgressCanvas",this.bootProgressBase(T),this.setRadius(C),this.setTrackColor(me(T,"trackColor",void 0)),this.setBarColor(w),this.setCenterColor(me(T,"centerColor",void 0)),this.setThickness(me(T,"thickness",.2)),this.setStartAngle(me(T,"startAngle",qR)),this.setAnticlockwise(me(T,"anticlockwise",!1)),this.setTextColor(me(T,"textColor",void 0)),this.setTextStrokeColor(me(T,"textStrokeColor",void 0),me(T,"textStrokeThickness",void 0));var u=me(T,"textFont",void 0);u?this.setTextFont(u):this.setTextFont(me(T,"textSize","16px"),me(T,"textFamily","Courier"),me(T,"textStyle","")),this.setTextFormatCallback(me(T,"textFormatCallback",void 0),me(T,"textFormatCallbackScope",void 0)),this.setValue(a)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=QR(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,i){return this.centerColor=t,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,i){return i===void 0&&(i=2),this.textStrokeColor=t,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,i,f){var C;return i===void 0?C=t:C=f+" "+t+" "+i,this.textFont=C,this}setTextFormatCallback(t,i){return this.textFormatCallback=t,this.textFormatCallbackScope=i,this}updateTexture(){return this.clear(),JR.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(t):i=this.textFormatCallback.call(this.textFormatCallbackScope,t),i}}var _R=function(){var s=this.skewX,t=this.width-Math.abs(s),i=this.height,f=this.getShape("trackFill");f.fillStyle(this.trackColor),f.isFilled&&tl(f,0,0,t,i,s).close();var C=this.getShape("bar");if(C.fillStyle(this.barColor),C.isFilled){var w,a;this.rtl?(w=t*(1-this.value),a=t):(w=0,a=t*this.value),tl(C,w,0,a,i,s).close()}var T=this.getShape("trackStroke");T.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),T.isStroked&&tl(T,0,0,t,i,s).end()},tl=function(s,t,i,f,C,w){return w>=0?s.startAt(t+w,i).lineTo(f+w,i).lineTo(f,C).lineTo(t,C).lineTo(t+w,i):s.startAt(t,i).lineTo(f,i).lineTo(f-w,C).lineTo(t-w,C).lineTo(t,i),s};const Me=Phaser.Utils.Objects.GetValue,el=Phaser.Utils.Objects.IsPlainObject;class tO extends Tr(yr){constructor(t,i,f,C,w,a,T,e){el(i)?(e=i,i=Me(e,"x",0),f=Me(e,"y",0),C=Me(e,"width",2),w=Me(e,"height",2),a=Me(e,"barColor",void 0),T=Me(e,"value",0)):el(C)?(e=C,C=Me(e,"width",2),w=Me(e,"height",2),a=Me(e,"barColor",void 0),T=Me(e,"value",0)):el(a)&&(e=a,a=Me(e,"barColor",void 0),T=Me(e,"value",0)),super(t,i,f,C,w,e),this.type="rexLineProgress",this.bootProgressBase(e),this.addShape(new en().setName("trackFill")).addShape(new en().setName("bar")).addShape(new en().setName("trackStroke")),this.setTrackColor(Me(e,"trackColor",void 0)),this.setBarColor(a),this.setTrackStroke(Me(e,"trackStrokeThickness",2),Me(e,"trackStrokeColor",void 0)),this.setSkewX(Me(e,"skewX",0)),this.setRTL(Me(e,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}}var eO={updateShapes:_R};Object.assign(tO.prototype,eO);var il=function(s,t,i,f,C,w,a){a===void 0&&(a="round"),t.beginPath(),t.lineJoin=a;var T=i[0];t.moveTo(T.x,T.y);for(var e=1,u=i.length;e<u;e++)T=i[e],t.lineTo(T.x,T.y);t.closePath(),f!=null&&(t.fillStyle=f,t.fill()),C!=null&&(t.strokeStyle=C,t.lineWidth=w,t.stroke())},iO=function(){var s=this.skewX,t=this.width-Math.abs(s),i=this.height,f=this.canvas,C=this.context;(this.trackColor||this.trackStrokeColor)&&Sc(0,0,t,i,s,this.trackPoints);var w,a;if(this.barColor&&(this.rtl?(w=t*(1-this.value),a=t):(w=0,a=t*this.value),Sc(w,0,a,i,s,this.barPoints)),this.trackColor&&(C.save(),il(f,C,this.trackPoints,this.trackColor),C.restore()),this.barColor){C.save();var T;if(this.barColor2){var e;if(this.isHorizontalGradient){var u=i/2;e=C.createLinearGradient(w,u,a,u)}else{var y=t/2;e=C.createLinearGradient(y,0,y,i)}e.addColorStop(0,this.rtl?this.barColor:this.barColor2),e.addColorStop(1,this.rtl?this.barColor2:this.barColor),T=e}else T=this.barColor;il(f,C,this.barPoints,T),C.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(C.save(),il(f,C,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),C.restore())},Sc=function(s,t,i,f,C,w){w===void 0&&(w=[]),w.length=4;for(var a=0;a<4;a++)w[a]||(w[a]={});var T;return C>=0?(T=w[0],T.x=s+C,T.y=t,T=w[1],T.x=i+C,T.y=t,T=w[2],T.x=i,T.y=f,T=w[3],T.x=s,T.y=f):(T=w[0],T.x=s,T.y=t,T=w[1],T.x=i,T.y=t,T=w[2],T.x=i-C,T.y=f,T=w[3],T.x=s-C,T.y=f),w};const ge=Phaser.Utils.Objects.GetValue,sl=Phaser.Utils.Objects.IsPlainObject;class sO extends Tr(na){constructor(t,i,f,C,w,a,T,e){sl(i)?(e=i,i=ge(e,"x",0),f=ge(e,"y",0),C=ge(e,"width",2),w=ge(e,"height",2),a=ge(e,"barColor",void 0),T=ge(e,"value",0)):sl(C)?(e=C,C=ge(e,"width",2),w=ge(e,"height",2),a=ge(e,"barColor",void 0),T=ge(e,"value",0)):sl(a)&&(e=a,a=ge(e,"barColor",void 0),T=ge(e,"value",0)),super(t,i,f,C,w),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(e),this.setTrackColor(ge(e,"trackColor",void 0)),this.setBarColor(a,ge(e,"barColor2",void 0),ge(e,"isHorizontalGradient",void 0)),this.setTrackStroke(ge(e,"trackStrokeThickness",2),ge(e,"trackStrokeColor",void 0)),this.setSkewX(ge(e,"skewX",0)),this.setRTL(ge(e,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,i,f){return f===void 0&&(f=!0),this.barColor=t,this.barColor2=i,this.isHorizontalGradient=f,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),iO.call(this),super.updateTexture(),this}}Phaser.Math.Wrap;const Lr=Phaser.Math.Linear;var rO=function(){var s=this.getShape("triangle"),t=this.padding,i=this.width-t.right,f=0+t.left,C=this.height-t.bottom,w=0+t.top,a=(f+i)/2,T=(w+C)/2,e={0:{a:{x:f,y:w},b:{x:i,y:T},c:{x:f,y:C}},1:{a:{x:f,y:w},b:{x:a,y:C},c:{x:i,y:w}},2:{a:{x:i,y:w},b:{x:f,y:T},c:{x:i,y:C}},3:{a:{x:f,y:C},b:{x:a,y:w},c:{x:i,y:C}}},u,y,d,l,h,r;if(this.previousDirection===void 0){var n=e[this.direction],v=n.a,o=n.b,c=n.c;u=v.x,y=v.y,d=o.x,l=o.y,h=c.x,r=c.y}else{var m=e[this.previousDirection],p=e[this.direction],g=this.easeDirectionProgress;u=Lr(m.a.x,p.a.x,g),y=Lr(m.a.y,p.a.y,g),d=Lr(m.b.x,p.b.x,g),l=Lr(m.b.y,p.b.y,g),h=Lr(m.c.x,p.c.x,g),r=Lr(m.c.y,p.c.y,g)}s.startAt(u,y).lineTo(d,l).lineTo(h,r),this.arrowOnly?s.end():s.close()};const nO=Phaser.Math.DegToRad,$a=nO(120);var aO=function(t){var t=this.getShape("triangle"),i=this.width/2,f=this.height/2,C=Math.min(i,f)*this.radius,w=this.verticeRotation;t.startAt(i+C*Math.cos(w+$a),f+C*Math.sin(w+$a)).lineTo(i+C*Math.cos(w),f+C*Math.sin(w)).lineTo(i+C*Math.cos(w-$a),f+C*Math.sin(w-$a)),this.arrowOnly?t.end():t.close()};const oO={buildShapes(){this.addShape(new en().setName("triangle"))},updateShapes(){var s=this.getShape("triangle");this.arrowOnly?s.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):s.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?rO.call(this):aO.call(this)}},hO={setEaseDuration(s){return s===void 0&&(s=0),this.easeDuration=s,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new xr(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},Fr=Phaser.Utils.Objects.GetValue,lO=Phaser.Utils.Objects.IsPlainObject,uO=Phaser.Math.DegToRad,dO=Phaser.Math.RadToDeg;class Jm extends yr{constructor(t,i,f,C,w,a,T){var e,u,y,d,l,h,r,n;if(lO(i)){var v=i;i=v.x,f=v.y,C=v.width,w=v.height,a=v.color,T=v.alpha,e=v.strokeColor,u=v.strokeAlpha,y=v.strokeWidth,d=v.arrowOnly,l=v.direction,h=v.easeDuration,r=v.padding,n=v.radius}i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C),d===void 0&&(d=!1),l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=0),n===void 0&&(n=void 0),super(t,i,f,C,w),this.type="rexTriangle",this.setFillStyle(a,T),e!==void 0&&y===void 0&&(y=2),this.setStrokeStyle(y,e,u),this.setArrowOnly(d),this.setDirection(l,h),this.setPadding(r),this.setRadius(n),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=cO(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,i){return i!==void 0&&this.setEaseDuration(i),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,i,f,C){if(typeof t=="object"){var w=t,a=Fr(w,"x",null);a!==null?(t=a,f=a):(t=Fr(w,"left",0),f=Fr(w,"right",t));var T=Fr(w,"y",null);T!==null?(i=T,C=T):(i=Fr(w,"top",0),C=Fr(w,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),f===void 0&&(f=t),C===void 0&&(C=i);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=i||this.padding.right!=f||this.padding.bottom!=C,this.padding.left=t,this.padding.top=i,this.padding.right=f,this.padding.bottom=C,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return dO(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=uO(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const fO={right:0,down:1,left:2,up:3};var cO=function(s){return typeof s=="string"&&(s=fO[s]),s=s%4,s};Object.assign(Jm.prototype,oO,hO);const vO=Phaser.GameObjects.Zone,pO=Phaser.Utils.Array.Add,mO=Phaser.Utils.Array.Remove;class la extends vO{constructor(t,i,f,C,w){i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=1),super(t,i,f,C,w),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var i,f=this.children.length-1;f>=0;f--)i=this.children[f],!i.parentContainer&&!i.displayList&&i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var i=this;return pO(this.children,t,0,function(f){f.once("destroy",i.onChildDestroy,i)},this),this}remove(t,i){var f=this;return mO(this.children,t,function(C){C.off("destroy",f.onChildDestroy,f),i&&C.destroy()}),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i=this,f,C=0,w=this.children.length;C<w;C++)f=this.children[C],f.off("destroy",i.onChildDestroy,i),t&&f.destroy();return this.children.length=0,this}}const Ec=Phaser.GameObjects.Components;Phaser.Class.mixin(la,[Ec.Alpha,Ec.Flip]);var Ei=function(s,t){var i;if(t===void 0)s.hasOwnProperty("rexContainer")&&(i=s.rexContainer.parent);else for(i=Ei(s);i&&i.name!==t;)i=Ei(i);return i},gO=function(s){for(var t=Ei(s);t;)s=t,t=Ei(t);return s};const yO=Phaser.Math.DegToRad,xO=Phaser.Math.RadToDeg;var Lt=function(s){if(!s.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return xO(this.rotation)},set:function(i){this.rotation=yO(i)}}),Object.defineProperty(t,"displayWidth",{get:function(){return s.width*this.scaleX},set:function(i){this.scaleX=i/s.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return s.height*this.scaleY},set:function(i){this.scaleY=i/s.height}}),s.rexContainer=t}return s.rexContainer};const TO={setParent(s,t){t===void 0&&(t=this);var i=Lt(s);return t?(i.parent=t,i.self=s):(i.parent=null,i.self=null),this},getParent(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),Ei(s,t)},getTopmostParent(s){return s===void 0&&(s=this),gO(s)}},wn=Phaser.Utils.Objects.GetValue,Zm=la.prototype.add;var rl=function(s,t){this.setParent(s);var i=Lt(s);return Qm(i,t),this.resetChildState(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),Zm.call(this,s),this.addToParentContainer(s),this.addToRenderLayer(s),this},nl=function(s,t){this.setParent(s);var i=Lt(s);return Qm(i,t),i.x=s.x,i.y=s.y,i.rotation=s.rotation,i.scaleX=s.scaleX,i.scaleY=s.scaleY,i.alpha=s.alpha,i.visible=s.visible,i.active=s.active,this.updateChildPosition(s).updateChildAlpha(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),Zm.call(this,s),this.addToRenderLayer(s),this},Qm=function(s,t){t===void 0&&(t=!0),typeof t=="boolean"?(s.syncPosition=t,s.syncRotation=t,s.syncScale=t,s.syncAlpha=t,s.syncScrollFactor=t):(s.syncPosition=wn(t,"syncPosition",!0),s.syncRotation=wn(t,"syncRotation",!0),s.syncScale=wn(t,"syncScale",!0),s.syncAlpha=wn(t,"syncAlpha",!0),s.syncScrollFactor=wn(t,"syncScrollFactor",!0))};const CO={add(s){return Array.isArray(s)?this.addMultiple(s):rl.call(this,s),this},pin(s,t){return Array.isArray(s)?this.addMultiple(s,t):rl.call(this,s,t),this},addMultiple(s){for(var t=0,i=s.length;t<i;t++)rl.call(this,s[t]);return this},addLocal(s){return Array.isArray(s)?this.addMultiple(s):nl.call(this,s),this},pinLocal(s,t){return Array.isArray(s)?this.addMultiple(s,t):nl.call(this,s,t),this},addLocalMultiple(s){for(var t=0,i=s.length;t<i;t++)nl.call(this,s[t]);return this}},Pc=la.prototype.remove,SO=la.prototype.clear,EO={remove(s,t){return Ei(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),Pc.call(this,s,t),this)},unpin(s,t){return Ei(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),Pc.call(this,s,t),this)},clear(s){for(var t=this.children,i=0,f=t.length;i<f;i++){var C=t[i];this.setParent(C,null),s||this.removeFromRenderLayer(C)}return SO.call(this,s),this}},PO={getLocalState(s){return Lt(s)},resetChildState(s){return this.resetChildPositionState(s).resetChildVisibleState(s).resetChildAlphaState(s).resetChildActiveState(s),this},resetChildrenState(s){for(var t=0,i=s.length;t<i;t++)this.resetChildState(s[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},wc=Phaser.Math.RotateAround,wO={worldToLocal(s){return s.x-=this.x,s.y-=this.y,wc(s,0,0,-this.rotation),s.x/=this.scaleX,s.y/=this.scaleY,s},localToWorld(s){return s.x*=this.scaleX,s.y*=this.scaleY,wc(s,0,0,this.rotation),s.x+=this.x,s.y+=this.y,s}};var Jn=function(s,t){return s===t?1:s/t};const MO={updateChildPosition(s){s.isRexContainerLite&&(s.syncChildrenEnable=!1);var t=Lt(s),i=t.parent;return t.syncPosition&&(s.x=t.x,s.y=t.y,i.localToWorld(s)),t.syncRotation&&(s.rotation=t.rotation+i.rotation),t.syncScale&&(s.scaleX=t.scaleX*i.scaleX,s.scaleY=t.scaleY*i.scaleY),s.isRexContainerLite&&(s.syncChildrenEnable=!0,s.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(s){var t=Lt(s),i=t.parent;return t.x=s.x,t.y=s.y,i.worldToLocal(t),t.scaleX=Jn(s.scaleX,i.scaleX),t.scaleY=Jn(s.scaleY,i.scaleY),t.rotation=s.rotation-i.rotation,this},setChildPosition(s,t,i){return s.x=t,s.y=i,this.resetChildPositionState(s),this},setChildLocalPosition(s,t,i){var f=Lt(s);return f.x=t,f.y=i,this.updateChildPosition(s),this},resetLocalPositionState(){var s=Lt(this).parent;return s&&s.resetChildPositionState(this),this}},bO=Phaser.Math.DegToRad,AO={updateChildRotation(s){var t=Lt(s),i=t.parent;return t.syncRotation&&(s.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(s){var t=Lt(s),i=t.parent;return t.rotation=s.rotation-i.rotation,this},setChildRotation(s,t){return s.rotation=t,this.resetChildRotationState(s),this},setChildAngle(s,t){return s.angle=t,this.resetChildRotationState(s),this},setChildLocalRotation(s,t){var i=Lt(s);return i.rotation=t,this.updateChildRotation(s),this},setChildLocalAngle(s,t){var i=Lt(s);return i.rotation=bO(t),this.updateChildRotation(s),this},resetLocalRotationState(){var s=Lt(this).parent;return s&&s.resetChildRotationState(this),this}},RO={updateChildScale(s){var t=Lt(s),i=t.parent;return t.syncScale&&(s.scaleX=i.scaleX*t.scaleX,s.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(s){var t=Lt(s),i=t.parent;return t.scaleX=Jn(s.scaleX,i.scaleX),t.scaleY=Jn(s.scaleY,i.scaleY),this},setChildScale(s,t,i){return i===void 0&&(i=t),s.scaleX=t,s.scaleY=i,this.resetChildScaleState(s),this},setChildLocalScale(s,t,i){i===void 0&&(i=t);var f=Lt(s);return f.scaleX=t,f.scaleY=i,this.updateChildScale(s),this},setChildDisplaySize(s,t,i){return s.setDisplaySize(t,i),this.resetChildScaleState(s),this},resetLocalScaleState(){var s=Lt(this).parent;return s&&s.resetChildScaleState(this),this}},OO={updateChildVisible(s){var t=Lt(s),i=t.parent,f=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return s.visible=i.visible&&t.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(s){var t=Lt(s);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=s.visible,this},setChildVisible(s,t){return this.setChildLocalVisible(s,t),this},setChildLocalVisible(s,t){t===void 0&&(t=!0);var i=Lt(s);return i.visible=t,this.updateChildVisible(s),this},setChildMaskVisible(s,t){t===void 0&&(t=!0);var i=Lt(s);return i.maskVisible=t,this.updateChildVisible(s),this},resetLocalVisibleState(){var s=Lt(this).parent;return s&&s.resetChildVisibleState(this),this}},LO={updateChildAlpha(s){var t=Lt(s),i=t.parent;return t.syncAlpha&&(s.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(s){var t=Lt(s),i=t.parent;return t.alpha=Jn(s.alpha,i.alpha),this},setChildAlpha(s,t){return s.alpha=t,this.resetChildAlphaState(s),this},setChildLocalAlpha(s,t){var i=Lt(s);return i.alpha=t,this.updateChildAlpha(s),this},resetLocalAlphaState(){var s=Lt(this).parent;return s&&s.resetChildAlphaState(this),this}},FO={updateChildActive(s){var t=Lt(s),i=t.parent;return s.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(s){var t=Lt(s);return t.active=s.active,this},setChildActive(s,t){return s.active=t,this.resetChildActiveState(s),this},setChildLocalActive(s,t){t===void 0&&(t=!0);var i=Lt(s);return i.active=t,this.updateChildActive(s),this},resetLocalActiveState(){var s=Lt(this).parent;return s&&s.resetChildActiveState(this),this}},DO={updateChildScrollFactor(s){var t=Lt(s),i=t.parent;return t.syncScrollFactor&&s.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},BO={updateChildMask(s){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==s&&(s.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(s){return this.mask=s,this},clearMask(s){return s===void 0&&(s=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),s&&this.mask&&this.mask.destroy(),this}};var sn=function(s,t){if(s.length<=1)return s;t===void 0&&(t=!1);var i=s[0].scene,f=i.sys.displayList;return f.depthSort(),t?s.sort(function(C,w){return f.getIndex(w)-f.getIndex(C)}):s.sort(function(C,w){return f.getIndex(C)-f.getIndex(w)}),s};const IO={setDepth(s,t){if(this.depth=s,!t&&this.children)for(var i=this.getAllChildren(),f=0,C=i.length;f<C;f++)i[f].depth=s;return this},swapDepth(s){var t=this.depth,i=s.depth;return this.setDepth(i),s.setDepth(t),this},incDepth(s){if(this.depth+=s,this.children)for(var t=this.getAllChildren(),i=0,f=t.length;i<f;i++)t[i].depth+=s;return this},bringToTop(){var s=this.displayList,t=this.getAllChildren([this]);sn(t,!1);for(var i=0,f=t.length;i<f;i++){var C=t[i];s.exists(C)&&s.bringToTop(C)}return this},moveDepthBelow(s){var t=this.displayList;if(s.displayList!==t)return this;var i=this.getAllChildren([this]);sn(i,!1);for(var f=0,C=i.length;f<C;f++){var w=i[f];if(t.exists(w)){t.moveBelow(s,w);break}}return this},moveDepthAbove(s){var t=this.displayList;if(s.displayList!==t)return this;var i=this.getAllChildren([this]);sn(i,!0);for(var f=0,C=i.length;f<C;f++){var w=i[f];if(t.exists(w)){t.moveAbove(s,w);break}}return this}};var qm=function(s,t){var i=t(s);if(!i&&s.isRexContainerLite)for(var f=s.children,C=0,w=f.length;C<w;C++)qm(f[C],t)},al=function(s,t){for(var i=[s];i.length>0;){var f=i.shift(),C=t(f);!C&&f.isRexContainerLite&&i.push(...f.children)}};const Qs=Phaser.Utils.Array,GO={getChildren(s){if(!s)s=this.children;else for(var t=0,i=this.children.length;t<i;t++)s.push(this.children[t]);return s},getAllChildren(s){s===void 0&&(s=[]);var t=this;return al(t,function(i){i!==t&&s.push(i)}),s},getAllVisibleChildren(s){s===void 0&&(s=[]);var t=this;return al(t,function(i){if(i!==t){if(!i.visible)return!0;s.push(i)}}),s},bfs(s,t){return t===void 0&&(t=this),al(t,s),this},dfs(s,t){return t===void 0&&(t=this),qm(t,s),this},contains(s){var t=Ei(s);return t?t===this?!0:this.contains(t):!1},getByName(s,t){if(t){for(var i=[this],f,C;i.length;){f=i.shift();for(var w=0,a=f.children.length;w<a;w++){if(C=f.children[w],C.name===s)return C;C.isRexContainerLite&&i.push(C)}}return null}else return Qs.GetFirst(this.children,"name",s)},getRandom(s,t){return Qs.GetRandom(this.children,s,t)},getFirst(s,t,i,f){return Qs.GetFirstElement(this.children,s,t,i,f)},getAll(s,t,i,f){return Qs.GetAll(this.children,s,t,i,f)},count(s,t,i,f){return Qs.CountAllMatching(this.children,s,t,i,f)},swap(s,t){return Qs.Swap(this.children,s,t),this},setAll(s,t,i,f){return Qs.SetAll(this.children,s,t,i,f),this}};var ol=function(s){for(var t=[],i=0,f=s.length;i<f;i++){var C=s[i];!C.hasOwnProperty("rexContainer")||t.push(C.rexContainer)}return t},NO=function(s){for(var t=0,i=s.length;t<i;t++){var f=s[t].scene;if(f)return f}return null},Mc=function(s,t,i){if(!i.parent){s.remove();return}var f=i.parent,C=i.self;switch(t){case"x":case"y":f.updateChildPosition(C);break;case"angle":case"rotation":f.updateChildRotation(C);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":f.updateChildScale(C);break;case"alpha":f.updateChildAlpha(C);break;default:f.updateChildPosition(C),f.updateChildRotation(C),f.updateChildScale(C),f.updateChildAlpha(C);break}};const kO={tweenChild(s){var t=s.targets;Array.isArray(t)||(t=[t]);var i=this.scene||NO(t);if(!!i){s.targets=ol(t);var f=i.tweens.add(s);return f.on("update",Mc),f}},tweenSelf(s){return s.targets=[this],this.tweenChild(s)},createTweenChildConfig(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=ol(t));var i=s.onUpdate;return s.onUpdate=function(f,C){i&&i(f,C),Mc(f,void 0,C)},s},tween(s){var t=this.scene;return s.targets||(s.targets=this),t.tweens.add(s)},timelineChild(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=ol(t));for(var i=s.tweens,f=0,C=i.length;f<C;f++)i[f]=this.createTweenChildConfig(i[f]);var w=this.scene.tweens.timeline(s);return w}},VO={addToContainer(s){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return sn(t),s.add(t),this._setParentContainerFlag=!1,this},addToLayer(s){return this.addToContainer(s),this},removeFromContainer(){if(!this.parentContainer)return this;var s=this.getAllChildren([this]).filter(function(t){return!!t.scene});return s.length===0?this:(this._setParentContainerFlag=!0,s.length>1&&(sn(s),s.reverse()),this.parentContainer.remove(s),this._setParentContainerFlag=!1,this)},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var s=this.getParent();s;){var t=s.parentContainer;if(t)return t;s=s.getParent()}return null},addToParentContainer(s){if(!s.displayList)return this;var t=this.getParentContainer();return t?(s.isRexContainerLite?s.addToContainer(t):t.add(s),this):this}},UO={enableLayer(){if(this.privateRenderLayer)return this;var s=this.scene.add.layer();return this.moveDepthBelow(s),this.addToLayer(s),this.privateRenderLayer=s,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var s=this.getParent();s;){var t=s.privateRenderLayer;if(t)return t;s=s.getParent()}return null},addToRenderLayer(s){if(!s.displayList)return this;var t=this.getRenderLayer();if(!t)return this;s.isRexContainerLite?s.addToLayer(t):t.add(s);var i=Lt(s);return i.layer=t,this},removeFromRenderLayer(s){var t=Lt(s),i=t.layer;return i?(i.remove(s),t.layer=null,this):this}},bc=Phaser.Geom.Rectangle,zO=Phaser.Geom.Rectangle.Union;var XO=function(s,t){t===void 0?t=new bc:t===!0&&(hl===void 0&&(hl=new bc),t=hl),t.setTo(0,0,0,0);for(var i,f=!0,C=0,w=s.length;C<w;C++)if(i=s[C],!!i.getBounds){var a=ju(i,!0);f?(t.setTo(a.x,a.y,a.width,a.height),f=!1):zO(a,t,t)}return t},hl,qs=Phaser.Utils.Objects.GetValue,_m=function(s){if(!!s){var t=s.gameObjects,i=s.renderTexture,f=qs(s,"x",void 0),C=qs(s,"y",void 0),w=qs(s,"width",void 0),a=qs(s,"height",void 0),T=qs(s,"originX",0),e=qs(s,"originY",0),u=qs(s,"padding",0),y,d;if(w===void 0||a===void 0||f===void 0||C===void 0){var l=XO(t,!0),h=f!==void 0&&C!==void 0;h?(w=Math.max(f-l.left,l.right-f)*2,a=Math.max(C-l.top,l.bottom-C)*2,T=.5,e=.5):(f=l.x,C=l.y,w=l.width,a=l.height,T=0,e=0),y=l.x,d=l.y}else y=f+(0-T)*w,d=C+(0-e)*a;y-=u,d-=u,w+=u*2,a+=u*2;var r=!i;if(r){var n=t[0].scene;i=n.add.renderTexture(0,0,w,a)}i.setPosition(f,C),(i.width!==w||i.height!==a)&&i.setSize(w,a),i.setOrigin(T,e),i.camera.setScroll(y,d),t=sn(pr(t)),i.draw(t);var v=s.saveTexture;return v&&i.saveTexture(v),r&&v&&i.destroy(),i}};const YO={snapshot(s){var t=this.scaleX,i=this.scaleY,f=t===1&&i===1;f||this.setScale(1),s===void 0&&(s={}),s.gameObjects=this.getAllVisibleChildren(),s.x=this.x,s.y=this.y,s.originX=this.originX,s.originY=this.originY;var C=_m(s),w=!!C.scene;return f||(this.setScale(t,i),w&&C.setScale(t,i)),w?C:this}},Ac=Phaser.Utils.Objects.GetValue;var WO=function(s,t){var i=Ac(t,"drawContainer",!0),f=Ac(t,"children");return f===void 0&&(f=this.getAllVisibleChildren([this])),i||(f=f.filter(function(C){return!C.isRexContainerLite})),xm(f,s,t),this};const HO=Phaser.Math.RotateAround;var $O=function(s,t,i){i===void 0&&(i=t);var f={x:(t-s.originX)*s.displayWidth,y:(i-s.originY)*s.displayHeight};return HO(f,0,0,s.rotation),s.originX=t,s.originY=i,s.x=s.x+f.x,s.y=s.y+f.y,s},KO=function(s,t){this.syncChildrenEnable=!1,$O(this,s,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),f=0,C=i.length;f<C;f++)this.resetChildPositionState(i[f]);return this},tg={changeOrigin:KO,drawBounds:WO};Object.assign(tg,TO,CO,EO,PO,wO,MO,AO,RO,OO,LO,FO,DO,BO,IO,GO,kO,VO,UO,YO);class wi extends la{constructor(t,i,f,C,w,a){Array.isArray(C)&&(a=C,C=void 0,w=void 0),super(t,i,f,C,w),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,a&&this.add(a)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Ei(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Ei(this);return t?t.setParentContainerFlag:!1}}Object.assign(wi.prototype,tg);var ih=function(s){return s.hasOwnProperty("rexSizer")||(s.rexSizer={}),s.rexSizer};function jO(s){return s===void 0&&(s=this),ih(s)}var JO=function(s){var t=ih(s);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},ZO=function(s){return s===void 0&&(s=oa(this.scene)),this.left=Math.max(this.left,s.left),this.right=Math.min(this.right,s.right),this.top=Math.max(this.top,s.top),this.bottom=Math.min(this.bottom,s.bottom),this};const Ye=Phaser.Display.Align,dn={center:Ye.CENTER,left:Ye.LEFT_CENTER,right:Ye.RIGHT_CENTER,top:Ye.TOP_CENTER,bottom:Ye.BOTTOM_CENTER,"left-top":Ye.TOP_LEFT,"left-center":Ye.LEFT_CENTER,"left-bottom":Ye.BOTTOM_LEFT,"center-top":Ye.TOP_CENTER,"center-center":Ye.CENTER,"center-bottom":Ye.BOTTOM_CENTER,"right-top":Ye.TOP_RIGHT,"right-center":Ye.RIGHT_CENTER,"right-bottom":Ye.BOTTOM_RIGHT};var pu=new Phaser.GameObjects.Zone({sys:{queueDepthSort:Ui,events:{once:Ui}}},0,0,1,1);pu.setOrigin(0);var ds={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},_u=function(s){var t=It(s);return s.y+t-t*s.originY},td=function(s){var t=Vt(s);return s.x-t*s.originX+t*.5},ed=function(s,t){var i=It(s);return s.y=t-i+i*s.originY,s},id=function(s,t){var i=Vt(s),f=i*s.originX;return s.x=t+f-i*.5,s},QO=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),id(s,td(t)+i),ed(s,_u(t)+f),s},sd=function(s){var t=Vt(s);return s.x-t*s.originX},rd=function(s,t){var i=Vt(s);return s.x=t+i*s.originX,s},qO=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),rd(s,sd(t)-i),ed(s,_u(t)+f),s},nd=function(s){var t=Vt(s);return s.x+t-t*s.originX},ad=function(s,t){var i=Vt(s);return s.x=t-i+i*s.originX,s},_O=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),ad(s,nd(t)+i),ed(s,_u(t)+f),s},od=function(s,t){var i=It(s),f=i*s.originY;return s.y=t+f-i*.5,s},t3=function(s,t,i){return id(s,t),od(s,i)},hd=function(s){var t=It(s);return s.y-t*s.originY+t*.5},e3=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),t3(s,td(t)+i,hd(t)+f),s},i3=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),rd(s,sd(t)-i),od(s,hd(t)+f),s},s3=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),ad(s,nd(t)+i),od(s,hd(t)+f),s},ld=function(s){var t=It(s);return s.y-t*s.originY},ud=function(s,t){var i=It(s);return s.y=t+i*s.originY,s},r3=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),id(s,td(t)+i),ud(s,ld(t)-f),s},n3=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),rd(s,sd(t)-i),ud(s,ld(t)-f),s},a3=function(s,t,i,f){return i===void 0&&(i=0),f===void 0&&(f=0),ad(s,nd(t)+i),ud(s,ld(t)-f),s},Yi=[];Yi[ds.BOTTOM_CENTER]=QO;Yi[ds.BOTTOM_LEFT]=qO;Yi[ds.BOTTOM_RIGHT]=_O;Yi[ds.CENTER]=e3;Yi[ds.LEFT_CENTER]=i3;Yi[ds.RIGHT_CENTER]=s3;Yi[ds.TOP_CENTER]=r3;Yi[ds.TOP_LEFT]=n3;Yi[ds.TOP_RIGHT]=a3;var eg=function(s,t,i,f,C){return Yi[i](s,t,f,C)},ua=function(s,t,i,f,C,w){pu.setPosition(t,i).setSize(f,C),eg(s,pu,w)};const Dr=Phaser.Utils.Objects.GetValue,o3=Phaser.GameObjects.Group;var h3=function(s,t){var i=s.scene,f,C,w,a,T;if(typeof t=="number")f=t;else{f=Dr(t,"color"),C=Dr(t,"lineWidth");var e=Dr(t,"name",!1);e&&(w=Dr(e,"createTextCallback",l3),a=Dr(e,"createTextCallbackScope",void 0),T=Dr(e,"align","left-top"),typeof T=="string"&&(T=dn[T]))}if(f===void 0&&(f=16777215),C===void 0&&(C=1),w&&!s.children){s.children=new o3(i),s.once("destroy",function(n,v){n.children.destroy(!v),n.children=void 0});var u=s.clear.bind(s);s.clear=function(){u(),s.children.clear(!1,!0)}}for(var y=this.getAllShownChildren([this]),d,l,h=0,r=y.length;h<r;h++){if(d=y[h],d.getBounds||d.width!==void 0&&d.height!==void 0)_s=ju(d,_s);else continue;f!=null&&s.lineStyle(C,f).strokeRectShape(_s),d.name&&w&&(a?l=w.call(a,i):l=w(i),l&&(l.setText(d.name),s.children.add(l),ua(l,_s.x,_s.y,_s.width,_s.height,T)))}return this},l3=function(s,t,i){return s.add.text(0,0,"")},_s=void 0;const Ka=Phaser.Utils.Objects.GetValue;var fn=function(s,t){return t===void 0&&(t={}),typeof s=="number"?(t.left=s,t.right=s,t.top=s,t.bottom=s):(t.left=Ka(s,"left",0),t.right=Ka(s,"right",0),t.top=Ka(s,"top",0),t.bottom=Ka(s,"bottom",0)),t};const u3=wi.prototype.add;var da=function(s){return u3.call(this,s),this.sizerEventsEnable&&(s.emit("sizer.add",s,this),this.emit("add",s,this)),this};const d3={addBackground(s,t,i){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(i=t,t=void 0),t===void 0&&(t=0),da.call(this,s),this.backgroundChildren.push(s);var f=this.getSizerConfig(s);return f.padding=fn(t),i!==void 0&&this.addChildrenMap(i,s),this},isBackground(s){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(s)!==-1}},f3=Phaser.Utils.Array.Remove,c3=wi.prototype.remove;var fa=function(s,t){return this.isBackground(s)&&f3(this.backgroundChildren,s),c3.call(this,s,t),!t&&this.sizerEventsEnable&&(s.emit("sizer.remove",s,this),this.emit("remove",s,this)),this},Zn=function(s,t){var i;if(t===void 0)s.hasOwnProperty("rexContainer")&&(i=s.rexContainer.parent,i&&!i.isRexSizer&&(i=null));else for(i=Zn(s);i&&i.name!==t;)i=Zn(i);return i},v3=function(s){for(var t=Zn(s);t;)s=t,t=Zn(t);return s};const ca={getParentSizer(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),Zn(s,t)},getTopmostSizer(s){return s===void 0&&(s=this),v3(s)}},p3=Phaser.Utils.Array.Remove,m3={removeFromParentSizer(){var s=ca.getParentSizer(gameObject);return s&&s.remove(this),this},removeBackground(s,t){return this.backgroundChildren===void 0?this:this.getParentSizer(s)!==this?this:(p3(this.backgroundChildren,s),fa.call(this,s,t),this)},removeAllBackgrounds(s){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],s);return this}};var Rc=function(s,t){return this.childrenMap[s]=t,this},g3=function(s){if(typeof s=="object"){var t=s;for(var s in this.childrenMap)if(this.childrenMap[s]===t)return delete this.childrenMap[s],this}return delete this.childrenMap[s],this},y3=function(s,t){if(typeof s=="string"&&(s=s.split(".")),s.length!==0){var i=s.shift(),f=null;if(i.charAt(0)==="#")i=i.substring(1),f=this.getByName(i,t);else if(i.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[i]);else{var C=i.match(x3);if(C!=null&&this.childrenMap){var w=this.childrenMap[C[1]];w&&(f=w[C[2]])}}return s.length===0?f:f&&f.childrenMap?f.getElement(s):null}};const x3=/(\S+)\[(\d+)\]/i,T3={getInnerPadding(s){return yo(this.space,s)},setInnerPadding(s,t){return Ls(this.space,s,t),this},getOuterPadding(s){return yo(this.getSizerConfig(this).padding,s)},setOuterPadding(s,t){return Ls(this.getSizerConfig(this).padding,s,t),this},getChildOuterPadding(s,t){return typeof s=="string"&&(s=this.getElement(s)),yo(this.getSizerConfig(s).padding,t)},setChildOuterPadding(s,t,i){return typeof s=="string"&&(s=this.getElement(s)),Ls(this.getSizerConfig(s).padding,t,i),this}};var dd=function(s){return s===void 0&&(s=Math.max(this.childrenWidth,this.minWidth)),s},C3=function(s){var t,i;for(var f in this.sizerChildren)t=this.sizerChildren[f],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,s),i=t.resolveWidth(i),t.resolveChildrenWidth(i))},fd=function(s){var t=Math.max(this.childrenHeight,this.minHeight);return s===void 0&&(s=t),s},S3=function(s,t){},E3=function(s){var t;return s.isRexSizer?t=Math.max(s.minWidth,s.childrenWidth):s.minWidth!==void 0?t=s.minWidth:t=Vt(s),t},P3=function(s){var t;return s.isRexSizer?t=Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?t=s.minHeight:t=It(s),t},w3=function(s,t){return t},M3=function(s,t){return t},b3=function(){return 0},A3=function(){return 0},R3=function(s){s===void 0&&(s=[]);for(var t=s.length,i=this.getChildrenSizers(s),f=s.length,C=t;C<f;C++)i[C].getAllChildrenSizers(s);return s},O3=function(s){return s===void 0&&(s=[]),s};const L3={getShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,i,f=0,C=t.length;f<C;f++)i=t[f],!(i.rexSizer&&i.rexSizer.hidden)&&s.push(i);return s},getAllShownChildren(s){s===void 0&&(s=[]);for(var t=[this];t.length>0;){var i=t.shift();i.rexSizer&&i.rexSizer.hidden||(i!==this&&s.push(i),i.isRexContainerLite&&t.push(...i.children))}return s}};var va=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var s=this.getChildrenSizers(),t,i=0,f=s.length;i<f;i++)t=s[i],!t.ignoreLayout&&t.preLayout()},F3=function(){var s=this.scaleX,t=this.scaleY,i=s===1&&t===1;return i||this.setScale(1),this.runLayout(),i||this.setScale(s,t),this},D3=function(s,t,i){if(this.ignoreLayout)return this;var f=!s;return f&&this.preLayout(),t=this.resolveWidth(t),f&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),i=this.resolveHeight(i),this.postResolveSize(t,i),this.resize(t,i),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},B3=function(){},I3=function(s,t,i){return this._anchor&&this._anchor.updatePosition(),this},ig=function(s){var t,i;for(var f in this.sizerChildren)t=this.sizerChildren[f],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(i=this.getExpandedChildWidth(t,s),t.isRexSizer&&(i=t.resolveWidth(i)),t.runWidthWrap(i));return this};class G3 extends Ne{constructor(t,i){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(i)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var i,f;t.x!==void 0?(i=null,f=t.x):t.left!==void 0?(i=0,f=t.left):t.right!==void 0?(i=1,f=t.right):t.centerX!==void 0&&(i=.5,f=t.centerX);var C,w;t.y!==void 0?(C=null,w=t.y):t.top!==void 0?(C=0,w=t.top):t.bottom!==void 0?(C=1,w=t.bottom):t.centerY!==void 0&&(C=.5,w=t.centerY);var a,T;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),a=parseFloat(f[0])/100,T=f[1]===""?0:parseFloat(f[1]));var e,u;w!==void 0&&(w=w.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),e=parseFloat(w[0])/100,u=w[1]===""?0:parseFloat(w[1]));var y=t.width,d,l;y!==void 0&&(y=y.split("%"),d=parseFloat(y[0])/100,l=y[1]===""?0:parseFloat(y[1]));var h=t.height,r,n;h!==void 0&&(h=h.split("%"),r=parseFloat(h[0])/100,n=h[1]===""?0:parseFloat(h[1])),this.setAlign(i,C),this.setPercentage(a,e),this.setOffset(T,u),this.setSizePercentage(d,r),this.setSizePadding(l,n);var v=t.onResizeCallback,o=t.onResizeCallbackScope;v!==void 0&&this.setResizeCallback(v,o);var c=t.onUpdateViewportCallback,m=t.onUpdateViewportCallbackScope;return c!==void 0&&this.setUpdateViewportCallback(c,m),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,i){return this.alignX=t,this.alignY=i,this}setPercentage(t,i){return this.percentageX=t,this.percentageY=i,this}setOffset(t,i){return this.offsetX=t,this.offsetY=i,this}setSizePercentage(t,i){return this.percentageWidth=t,this.percentageHeight=i,this}setSizePadding(t,i){return this.paddingWidth=t,this.paddingHeight=i,this}setResizeCallback(t,i){return this.onResizeCallback=t,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(t,i){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,i=this.onResizeCallbackScope,f=this.anchorWidth,C=this.anchorHeight;if(!(f===void 0&&C===void 0||!t)){var w=this.parent;f===void 0&&(f=w.width),C===void 0&&(C=w.height),i?t.call(i,f,C,w,this):t(f,C,w,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=oa(this.scene,t,this.viewport);var i=this.viewport,f=this.onUpdateViewportCallback,C=this.onUpdateViewportCallbackScope;f&&(C?f.call(C,i,this.parent,this):f(i,this.parent,this))}}var N3=function(s){s===void 0&&(s={});var t=s.hasOwnProperty("width"),i=s.hasOwnProperty("height"),f=s.hasOwnProperty("onResizeCallback");return(t||i)&&!f&&(s.onResizeCallback=function(C,w,a){t&&a.setMinWidth(C),i&&a.setMinHeight(w),a.layout()}),this._anchor===void 0?this._anchor=new G3(this,s):this._anchor.resetFromJSON(s),this};const k3=Phaser.Utils.Objects.GetValue,Br=Phaser.Utils.Objects.GetAdvancedValue,Oc=Phaser.Math.Linear;class Qn extends un{constructor(t,i){super(t,i),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(k3(t,"mode",0)),this.setScaleRange(Br(t,"start",void 0),Br(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=V3[t]),this.mode=t,this}setScaleRange(t,i){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Br(t,"x",this.parent.scaleX),this.startY=Br(t,"y",this.parent.scaleY)),typeof i=="number"?(this.endX=i,this.endY=i):(this.endX=Br(i,"x",void 0),this.endY=Br(i,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var i=this.repeat;return this.mode===2&&i!==-1&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateGameObject(t,i){var f=i.t;i.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(t.scaleX=Oc(this.startX,this.endX,f)),this.hasScaleY&&(t.scaleY=Oc(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const V3={stop:0,destroy:1,yoyo:2};var cd=function(s,t,i,f,C){f===void 0&&(f="Cubic");var w,a;switch(i){case 0:case"x":w={x:0},a={x:s.scaleX};break;case 1:case"y":w={y:0},a={y:s.scaleY};break;default:w=0,a=s.scale;break}var T={mode:0,start:w,end:a,duration:t,ease:f};return C===void 0?C=new Qn(s,T):C.resetFromJSON(T),C.restart(),C},sg=function(s,t,i,f,C,w){f===void 0&&(f="Linear"),C instanceof Qn&&(w=C,C=void 0),C===void 0&&(C=!0);var a={};switch(a.mode=C?1:0,i){case 0:case"x":a.end={x:0};break;case 1:case"y":a.end={y:0};break;default:a.end=0;break}return a.duration=t,a.ease=f,w===void 0?w=new Qn(s,a):w.resetFromJSON(a),w.restart(),w},U3=function(s,t,i,f,C,w,a){i===void 0&&(i=1.2),f===void 0&&(f=0),w===void 0&&(w="Cubic");var T,e;switch(C){case 0:case"x":T={x:s.scaleX},e={x:i};break;case 1:case"y":T={y:s.scaleX},e={y:i};break;default:T=s.scaleX,e=i;break}var u={mode:2,start:T,end:e,duration:t/2,ease:w,repeat:f};return a===void 0?a=new Qn(s,u):a.resetFromJSON(u),a.restart(),a};const ll=Phaser.Utils.Objects.IsPlainObject;var ul=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var i=ca.getParentSizer(s);i&&i.resetChildPositionState(s)})};const vd={popUp(s,t,i){if(ll(s)){var f=s;s=f.duration,t=f.orientation,i=f.ease}var C=this._scaleBehavior===void 0;return this._scaleBehavior=cd(this,s,t,i,this._scaleBehavior),C&&ul(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(s,t,i){return this.popUp(s,t,i),Oe(this._scaleBehavior)},scaleDownDestroy(s,t,i,f){if(ll(s)){var C=s;s=C.duration,t=C.orientation,i=C.ease,f=C.destroy}var w=this._scaleBehavior===void 0;return this._scaleBehavior=sg(this,s,t,i,f,this._scaleBehavior),w&&ul(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(s,t,i,f){return this.scaleDownDestroy(s,t,i,f),Oe(this._scaleBehavior)},scaleDown(s,t,i){return this.scaleDownDestroy(s,t,i,!1),this},scaleDownPromise(s,t,i){return this.scaleDown(s,t,i),Oe(this._scaleBehavior)},scaleYoyo(s,t,i,f,C){if(ll(s)){var w=s;s=w.duration,t=w.peakValue,i=w.repeat,f=w.orientation,C=w.ease}var a=this._scaleBehavior===void 0;return this._scaleBehavior=U3(this,s,t,i,f,C,this._scaleBehavior),a&&ul(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(s,t,i,f,C){return this.scaleYoyo(s,t,i,f,C),Oe(this._scaleBehavior)}},z3=Phaser.Utils.Objects.GetValue,Lc=Phaser.Utils.Objects.GetAdvancedValue,X3=Phaser.Math.Linear;class mu extends un{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(z3(t,"mode",0)),this.setAlphaRange(Lc(t,"start",this.parent.alpha),Lc(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=Y3[t]),this.mode=t,this}setAlphaRange(t,i){return this.alphaStart=t,this.alphaEnd=i,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,i){var f=i.t;i.isOddIteration&&(f=1-f),t.alpha=X3(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const Y3={stop:0,destroy:1,yoyo:2},W3=Phaser.Utils.Objects.IsPlainObject;var pd=function(s,t,i,f){var C,w;W3(i)?(C=i.start,w=i.end):w=i,C===void 0&&(C=0),w===void 0&&(w=1);var a={mode:0,start:C,end:w,duration:t};return f===void 0?f=new mu(s,a):f.resetFromJSON(a),f.restart(),f},md=function(s,t,i,f){i instanceof mu&&(f=i,i=void 0),i===void 0&&(i=!0);var C={mode:i?1:0,end:0,duration:t};return f===void 0?f=new mu(s,C):f.resetFromJSON(C),f.restart(),f};const Fc=Phaser.Utils.Objects.IsPlainObject;var Dc=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var i=ca.getParentSizer(s);i&&i.resetChildAlphaState(s)})};const H3={fadeIn(s,t){if(Fc(s)){var i=s;s=i.duration,t=i.alpha}var f=this._fade===void 0;return this._fade=pd(this,s,t,this._fade),f&&Dc(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(s,t){return this.fadeIn(s,t),Oe(this._fade)},fadeOutDestroy(s,t){if(Fc(s)){var i=s;s=i.duration,t=i.destroy}var f=this._fade===void 0;return this._fade=md(this,s,t,this._fade),f&&Dc(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(s,t){return this.fadeOutDestroy(s,t),Oe(this._fade)},fadeOut(s){return this.fadeOutDestroy(s,!1),this},fadeOutPromise(s){return this.fadeOut(s),Oe(this._fade)}},$3=Phaser.Utils.Objects.GetValue,Ir=Phaser.Utils.Objects.GetAdvancedValue,Bc=Phaser.Math.Linear;class Oo extends un{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode($3(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=Ir(t,"x",void 0),f=Ir(t,"y",void 0);this.setTargetPosition(i,f)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=K3[t]),this.mode=t,this}setTargetPosition(t,i){if(typeof t=="number"||typeof i=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var f=t;this.startX=Ir(f,"startX",void 0),this.startY=Ir(f,"startY",void 0),this.endX=Ir(f,"endX",void 0),this.endY=Ir(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,i){var f=i.t;i.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(t.x=Bc(this.startX,this.endX,f)),this.hasMoveY&&(t.y=Bc(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const K3={stop:0,destroy:1,yoyo:2};var Lo=function(s,t){if(typeof s=="number")return s;var i=s[0],f=parseFloat(s.substr(2));switch(i){case"+":return t+f;case"-":return t-f;case"*":return t*f;case"/":return t/f}},j3=function(s,t,i,f,C,w,a){w instanceof Oo&&(a=w,w=void 0),w===void 0&&(w=!1);var T={};return T.mode=w?1:0,i!==void 0&&(T.startX=s.x,T.endX=Lo(i,s.x)),f!==void 0&&(T.startY=s.y,T.endY=Lo(f,s.y)),T.duration=t,T.ease=C===void 0?"Linear":C,a===void 0?a=new Oo(s,T):a.resetFromJSON(T),a.restart(),a},J3=function(s,t,i,f,C,w,a){w instanceof Oo&&(a=w,w=void 0),w===void 0&&(w=!1);var T={};return T.mode=w?1:0,i!==void 0&&(T.startX=Lo(i,s.x),T.endX=s.x),f!==void 0&&(T.startY=Lo(f,s.y),T.endY=s.y),T.duration=t,T.ease=C===void 0?"Linear":C,a===void 0?a=new Oo(s,T):a.resetFromJSON(T),a.restart(),a};const Ic=Phaser.Utils.Objects.IsPlainObject,Gc=Phaser.Math.Distance.Between;var Nc=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var i=ca.getParentSizer(s);i&&i.resetChildPositionState(s)})};const Z3={moveFrom(s,t,i,f,C){if(Ic(s)){var w=s;t=w.x,i=w.y,w.hasOwnProperty("speed")?s=Gc(t,i,this.x,this.y)*1e3/w.speed:s=w.duration,f=w.ease}var a=this._easeMove===void 0;return this._easeMove=J3(this,s,t,i,f,C,this._easeMove),a&&Nc(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(s,t,i,f,C){return this.moveFrom(s,t,i,f,C),Oe(this._easeMove)},moveFromDestroy(s,t,i,f){return this.moveFrom(s,t,i,f,!0),this},moveFromDestroyPromise(s,t,i,f){return this.moveFromDestroy(s,t,i,f),Oe(this._easeMove)},moveTo(s,t,i,f,C){if(Ic(s)){var w=s;t=w.x,i=w.y,w.hasOwnProperty("speed")?s=Gc(t,i,this.x,this.y)*1e3/w.speed:s=w.duration,f=w.ease}var a=this._easeMove===void 0;return this._easeMove=j3(this,s,t,i,f,C,this._easeMove),a&&Nc(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(s,t,i,f,C){return this.moveTo(s,t,i,f,C),Oe(this._easeMove)},moveToDestroy(s,t,i,f){return this.moveTo(s,t,i,f,!0),this},moveToDestroyPromise(s,t,i,f){return this.moveToDestroy(s,t,i,f,!0),Oe(this._easeMove)},moveStop(s){return this._easeMove?(this._easeMove.stop(s),this):this}},ei=Phaser.Utils.Objects.GetValue;class Q3 extends Zo{constructor(t,i){super(t,i),this.timer=new pm,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(ei(t,"timer")),this.setEnable(ei(t,"enable",!0)),this.setMode(ei(t,"mode",1)),this.isRunning=ei(t,"isRunning",!1),this.setMagnitudeMode(ei(t,"magnitudeMode",1)),this.setAxisMode(ei(t,"axis",0)),this.setDuration(ei(t,"duration",500)),this.setMagnitude(ei(t,"magnitude",10)),this.ox=ei(t,"ox",void 0),this.oy=ei(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=q3[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=t6[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=_3[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,i){if(typeof t!="number"){var f=t;i=ei(f,"magnitude",void 0),t=ei(f,"duration",void 0)}return i!==void 0&&this.setMagnitude(i),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,i){return this.start(t,i),this}update(t,i){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(t,i),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var C=this.magnitude;this.magnitudeMode===1&&(C*=1-this.timer.t);var w=Math.random()*Math.PI*2,a=this.ox+Math.cos(w)*C,T=this.oy+Math.sin(w)*C;switch(this.axisMode){case 1:f.x=a;break;case 2:f.y=T;break;default:f.x=a,f.y=T;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const q3={effect:0,behavior:1},_3={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},t6={constant:0,decay:1},e6=Phaser.Utils.Objects.IsPlainObject;var i6=function(s,t){t.on("complete",function(){s.emit("shake.complete",s)})};const s6={shake(s,t,i){if(e6(s)){var f=s;s=f.duration,t=f.magnitude,i=f.magnitudeMode}return this._shake===void 0&&(this._shake=new Q3(this,{mode:0,magnitudeMode:1}),i6(this,this._shake)),s!==void 0&&this._shake.setDuration(s),t!==void 0&&this._shake.setMagnitude(t),i!==void 0&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(s,t){return this.shake(s,t),Oe(this._shake)}},kc=Phaser.Utils.Objects.IsPlainObject;class r6 extends Ne{constructor(t,i){super(t,i),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var i=this.easeTasks[t];return i===void 0&&(i=new xr(this.parent),this.easeTasks[t]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),i}easeTo(t,i,f,C){if(kc(t)){var w=t;t=w.key,i=w.value,f=w.duration,C=w.ease;var a=w.speed;f===void 0&&a!==void 0&&(f=Math.abs(i-this.parent.data.values[t])/a*1e3)}f===void 0&&(f=1e3),C===void 0&&(C="Linear");var T=this.getEaseTask(t);return T.restart({key:t,to:i,duration:f,ease:C}),this}easeFrom(t,i,f,C){if(kc(t)){var w=t;t=w.key,i=w.value,f=w.duration,C=w.ease;var a=w.speed;f===void 0&&a!==void 0&&(f=Math.abs(i-this.parent.data.values[t])/a*1e3)}f===void 0&&(f=1e3),C===void 0&&(C="Linear");var T=this.getEaseTask(t);return T.restart({key:t,from:i,duration:f,ease:C}),this}stopEase(t,i){i===void 0&&(i=!0);var f=this.easeTasks[t];return f&&f.stop(i),this}stopAll(t){t===void 0&&(t=!0);for(var i in this.easeTasks)this.stopEase(i,t);return this}}var n6=function(s,t){t.on("complete",function(i){s.emit(`easedata.${i}.complete`,s),s.emit("easedata.complete",i,s)})};const a6={easeDataTo(s,t,i,f){return this._easeData||(this._easeData=new r6(this),n6(this,this._easeData)),this._easeData.easeTo(s,t,i,f),this},easeDataToPromise(s,t,i,f){return this.easeDataTo(s,t,i,f),Zu(this._easeData,`complete-${s}`)},stopEaseData(s,t){return this._easeData?(this._easeData.stopEase(s,t),this):this},stopAllEaseData(s){return this._easeData?(this._easeData.stopAll(s),this):this}};var lr=function(s){ng(s,!1)},ur=function(s){ng(s,!0)},rg=function(s){if(!s)return!1;var t=ih(s);return!t.hidden},ng=function(s,t){if(!!s){var i=ih(s);i.hidden=t;var f=Ei(s);f?f.setChildVisible(s,!t):s.setVisible(!t)}};const o6={show(s){return s===void 0&&(s=this),lr(s),this},hide(s){return s===void 0&&(s=this),ur(s),this},isShow(s){return s===void 0&&(s=this),rg(s)}},h6=["next","exit","enter"];class ag{constructor(t){var i=de(t,"states",void 0);i&&this.addStates(i);var f=de(t,"extend",void 0);if(f)for(var C in f)(!this.hasOwnProperty(C)||this[C]===void 0)&&(this[C]=f[C]);var w=de(t,"eventEmitter",void 0),a=de(t,"EventEmitterClass",void 0);this.setEventEmitter(w,a),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(de(t,"enable",!0)),this.start(de(t,"start",void 0));var i=de(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var i="exit_"+this._prevState,f=this[i];f&&f.call(this),this.emit(i,this)}if(this._stateLock=!1,this._state!=null){var C="enter_"+this._state,w=this[C];w&&w.call(this),this.emit(C,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(typeof i=="string"?t=i:t=i.call(this)),this.goto(t),this}get stateProperties(){return h6}addState(t,i){typeof t!="string"&&(i=t,t=i.name);for(var f=this.stateProperties,C=0,w=f.length;C<w;C++){var a=f[C],T=i[a];T&&(this[`${a}_${t}`]=T)}return this}addStates(t){if(Array.isArray(t))for(var i=0,f=t.length;i<f;i++)this.addState(t[i]);else for(var C in t)this.addState(C,t[C]);return this}runMethod(t,i,f,C,w,a){var T=this[t+"_"+this.state];if(!!T){var e=arguments.length;switch(e){case 1:return T.call(this);case 2:return T.call(this,i);case 3:return T.call(this,i,f);case 4:return T.call(this,i,f,C);case 5:return T.call(this,i,f,C,w);case 6:return T.call(this,i,f,C,w,a)}for(var u=new Array(e-1),y=1;y<e;y++)u[y-1]=arguments[y];return T.apply(this,u)}}}Object.assign(ag.prototype,Is);var dl=function(s,t,i,f,C){C===void 0&&(C=!1);var w=s._events[t];if(!w)return!1;for(var a=0,T=w.length;a<T;a++){var e=w[a];if(e.fn===i&&e.context===f&&e.once===C)return!0}return!1};const l6=["next","exit","enter","update","preupdate","postupdate"];class Cr extends ag{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=de(t,"scene",void 0),this}get stateProperties(){return l6}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}startUpdate(t){t||(t=this._scene);var i=t.sys.events;return dl(i,"update",this.update,this)?this:(this._scene=t,i.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var i=t.sys.events;return dl(i,"preupdate",this.preupdate,this)?this:(this._scene=t,i.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var i=t.sys.events;return dl(i,"postupdate",this.postupdate,this)?this:(this._scene=t,i.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}class u6 extends Cr{constructor(t,i){super(i),this.parent=t;var f=i.initState||"IDLE";this.start(f)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var i=t.runTransitionInCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var i=t.runTransitionOutCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}}var og=function(s,t,i,f,C){var w=s.scene,a=w.sys.events,T=w.time.delayedCall(t,a.once,["postupdate",function(){i.call(f,C)}],a);return T};const d6={delayCall(s,t,i){return this.delayCallTimer=og(this,s,t,i),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},f6={setTransitInTime(s){return this.transitInTime=s,this},setTransitOutTime(s){return this.transitOutTime=s,this},setTransitInCallback(s){return s||(s=Ui),this.transitInCallback=s,this},setTransitOutCallback(s){return s||(s=Ui),this.transitOutCallback=s,this}},c6={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(s,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?s:this.parent;var i=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=i,this}},v6={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(s,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?s:this.parent;var i=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=i,this}};var hg={};Object.assign(hg,d6,f6,c6,v6);const Gr=Phaser.Utils.Objects.GetValue;class sh extends Ne{constructor(t,i){super(t,i),this.setTransitInTime(Gr(i,"duration.in",200)),this.setTransitOutTime(Gr(i,"duration.out",200)),this.setTransitInCallback(Gr(i,"transitIn")),this.setTransitOutCallback(Gr(i,"transitOut")),this.oneShotMode=Gr(i,"destroy",!1),this.delayCallTimer=void 0,this._state=new u6(this,{eventEmitter:!1,initState:Gr(i,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(sh.prototype,hg);const p6=Phaser.GameObjects.Rectangle;class m6 extends p6{constructor(t,i,f){super(t,0,0,2,2,i,1),this.setAlpha(f),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,i=t.sys.scale.gameSize,f=t.sys.cameras.main,C=i.width,w=i.height,a=1/f.zoom,T=C/2,e=w/2,u=C*a,y=w*a;(this.x!==T||this.y!==e)&&this.setPosition(T,e),(this.width!==u||this.height!==y)&&this.setSize(u,y).setOrigin(.5)}}const fl=Phaser.Utils.Objects.GetValue;class lg extends Ne{constructor(t,i){super(t,{eventEmitter:!1}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setHitAreaMode(fl(t,"hitAreaMode",0)),this.setEnable(fl(t,"enable",!0)),this.setStopMode(fl(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,i,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerup",function(t,i,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointermove",function(t,i,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerover",function(t,i,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerout",function(t,i){this.stopAllLevels&&i.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=g6[t]);var i=this.parent;return i.input&&i.removeInteractive(),t===0?i.setInteractive():i.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var g6={default:0,fullWindow:1};const Vc=Phaser.Utils.Objects.GetValue;class y6 extends m6{constructor(t,i){var f=Vc(i,"color",0),C=Vc(i,"alpha",.8);super(t,f,C),this.touchEventStop=new lg(this,{hitAreaMode:1})}}var x6=function(s,t){var i=s.scene,f=new y6(i,t);return i.add.existing(f),s.isRexContainerLite?(s.moveDepthBelow(f),s.pin(f,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1})):i.children.moveBelow(f,s),f};const ja={popUp(s,t){s._modalScaleSave!==void 0?(s.scaleX=s._modalScaleSave,s.scaleY=s._modalScaleSave):s._modalScaleSave=s.scaleX,cd(s,t)},scaleDown(s,t){sg(s,t,void 0,void 0,!1)},fadeIn(s,t){s._modalAlphaSave!==void 0?s.alpha=s._modalAlphaSave:s._modalAlphaSave=s.alpha,pd(s,t)},fadeOut(s,t){md(s,t,!1)}};var T6=function(s,t){s._modalAlphaSave!==void 0?s.alpha=s._modalAlphaSave:s._modalAlphaSave=s.alpha,pd(s,t,s.alpha)},C6=function(s,t){md(s,t,!1)},qn=function(s,t,i,f,C){if(!s||f&&!f(s,t,i))return!1;var w=ju(s,!0);return!(!w.contains(t,i)||C&&!C(s,t,i))};const Hi=Phaser.Utils.Objects.GetValue;class S6 extends sh{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=Ps.popUp),i.transitOut==null&&(i.transitOut=Ps.scaleDown),i.destroy=Hi(i,"destroy",!0),super(t,i);var f=Hi(i,"cover");this.cover=f!==!1?x6(t,f):void 0,this.cover&&(this.setCoverTransitInCallback(Hi(f,"transitIn",T6)),this.setCoverTransitOutCallback(Hi(f,"transitOut",C6)));var C=Hi(i,"touchOutsideClose",!1),w=Hi(i,"duration.hold",-1),a=Hi(i,"timeOutClose",w>=0),T=Hi(i,"anyTouchClose",!1),e=Hi(i,"manualClose",!1);e&&(C=!1,T=!1,a=!1),T&&(C=!1),a?this.setDisplayTime(w):this.setDisplayTime(-1),T?this.once("open",this.anyTouchClose,this):C&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&qn(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),i=this.cover;return i&&this.coverTransitInCallback&&this.coverTransitInCallback(i,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),i=this.cover;return i&&this.coverTransitOutCallback&&this.coverTransitOutCallback(i,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ps[t]),t){case Ps.popUp:t=ja.popUp;break;case Ps.fadeIn:t=ja.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ps[t]),t){case Ps.scaleDown:t=ja.scaleDown;break;case Ps.fadeOut:t=ja.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}}const Ps={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var E6=function(s,t){var i=new S6(s,t);return i.on("open",function(){s.emit("modal.open",i)}),i.on("close",function(f){s.emit("modal.close",f,i)}),s.on("modal.requestClose",i.requestClose,i),i},P6=function(s,t){s.emit("modal.requestClose",t)},pa=function(s){return s&&typeof s=="function"};const w6={modal(s,t){return pa(s)&&(t=s,s=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,s),this._modalBehavior=E6(this,s)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(s){var t=this;return new Promise(function(i,f){t.modal(s,i)})},modalClose(s){return P6(this,s),this}};var gd=function(s,t,i,f){if(t)return qn(s,t.worldX,t.worldY,i,f);for(var C=s.scene.input.manager,w=C.pointersTotal,a=C.pointers,T=0;T<w;T++)if(t=a[T],qn(s,t.worldX,t.worldY,i,f))return!0;return!1};const M6=Phaser.GameObjects.GameObject;var yd=function(s){return s instanceof M6},b6=function(s,t){return(yd(s)||typeof s=="string")&&(t=s,s=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),gd(t,s)},hs=function(s){return Object.prototype.toString.call(s)==="[object Array]"},gu=function(s,t,i,f,C){return qn(s,t,i,A6(f),R6(C))},Uc=function(s){var t=s.rexSizer&&s.rexSizer.hidden;return!t},A6=function(s){return s?function(t,i,f){return Uc(t)?(s(t,i,f),!0):!1}:Uc},R6=function(s){return s},O6=function(s,t,i,f,C){if(pa(i)||(C=i,i=void 0,f=void 0),C===void 0&&(this.sizerChildren?C=this.sizerChildren:C=this.children),hs(C)){for(var w,a=0,T=C.length;a<T;a++)if(w=C[a],gu(w,s,t,i,f))return w}else{var w;for(var e in C)if(w=C[e],gu(w,s,t,i,f))return w}return null},Pi=function(s,t,i){!s||t===void 0&&i===void 0||(s.resize?(t===void 0&&(t=s.width),i===void 0&&(i=s.height),s.resize(t,i)):(t!==void 0&&(s.displayWidth=t),i!==void 0&&(s.displayHeight=i)))},L6=function(s,t){return t===void 0?t={}:t===!0&&(t=F6),t.x=s.x,t.y=s.y,t.scaleX=s.scaleX,t.scaleY=s.scaleY,t.width=s.width,t.height=s.height,t.displayWidth=s.displayWidth,t.displayHeight=s.displayHeight,t},F6={},ma=function(s){this.sizerEventsEnable&&(L6(s,this.getChildPrevState(s)),this.layoutedChildren.push(s))},ga=function(s,t,i,f,C,w,a,T){ua(s,t,i,f,C,w),a!==void 0&&(s.x+=a),T!==void 0&&(s.y+=T),this.resetChildPositionState(s),this.sizerEventsEnable&&s.emit("sizer.postlayout",s,this)};const D6=Phaser.Display.Align.CENTER;var B6=function(){if(this.backgroundChildren!==void 0)for(var s=this.backgroundChildren,t=this.left,i=this.top,f=this.width,C=this.height,w,a,T,e,u,y,d,l=0,h=s.length;l<h;l++)w=s[l],a=w.rexSizer,!a.hidden&&(T=a.padding,ma.call(this,w),e=t+T.left,u=i+T.top,y=f-T.left-T.right,d=C-T.top-T.bottom,Pi(w,y,d),ga.call(this,w,e,u,y,d,D6))},I6=function(s,t){var i=typeof s;if(i==="string"){var f=s;if(s=this.getElement(f),!s)return console.error(`Can get element '${f}'`),this}else(s===void 0||i!="object")&&(t=s,s=this);return t===void 0&&(t=!0),s.input&&s.input._dragTopmostSizer?s.input.draggable=t:t&&(s.setInteractive(),s.scene.input.setDraggable(s),s.on("drag",function(C,w,a){var T=this.getTopmostSizer();T.x+=w-s.x,T.y+=a-s.y,T.emit("sizer.drag",C,w,a)},this).on("dragstart",function(C,w,a){var T=this.getTopmostSizer();T.emit("sizer.dragstart",C,w,a)},this).on("dragend",function(C,w,a,T){var e=this.getTopmostSizer();e.emit("sizer.dragend",C,w,a,T)},this),s.input._dragTopmostSizer=!0),this};const ug={onClick(s,t,i,f){return s?(typeof s=="function"&&(f=i,i=t,t=s,s=this),s._click===void 0&&(s._click=new Fs(s,f)),s._click.on("click",t,i),this):this},offClick(s,t,i){return typeof s=="function"&&(i=t,t=s,s=this),s._click===void 0?this:(s._click.off("click",t,i),this)},enableClick(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._click===void 0?this:(s._click.setEnable(t),this)},disableClick(s){return s&&typeof s!="object"&&(s=this),s._click===void 0?this:(s._click.setEnable(!1),this)}},Ja=Phaser.Utils.Objects.GetValue;class G6 extends Ne{constructor(t,i){super(t,i),this._enable=void 0;var f=Ja(i,"inputConfig",void 0);f&&t.setInteractive(f),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(Ja(t,"enable",!0)),this.setMode(Ja(t,"mode",1)),this.setClickInterval(Ja(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=N6[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var i=this.parent,f=i.input?Bm:gd;return f(i,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,i){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,i),this;var f=this.lastClickTime;return f!==void 0&&t-f<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,i),this)}}const N6={press:0,pointerdown:0,release:1,pointerup:1},k6={onClickOutside(s,t,i,f){return s?(typeof s=="function"&&(f=i,i=t,t=s,s=this),s._clickOutside===void 0&&(s._clickOutside=new G6(s,f)),s._clickOutside.on("clickoutside",t,i),this):this},offClickOutside(s,t,i){return typeof s=="function"&&(i=t,t=s,s=this),s._clickOutside===void 0?this:(s._clickOutside.off("clickoutside",t,i),this)},enableClickOutside(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._clickOutside===void 0?this:(s._clickOutside.setEnable(t),this)},disableClickOutside(s){return s&&typeof s!="object"&&(s=this),s._clickOutside===void 0?this:(s._clickOutside.setEnable(!1),this)}};class V6 extends Cr{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const cl=Phaser.Utils.Objects.GetValue;class Fo extends Ne{constructor(t,i){super(t,i),this._enable=void 0,this.cooldown=new V6,this.parent.setInteractive(cl(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(cl(t,"enable",!0)),this.setCooldown(cl(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,i,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,i){this.cooldown.update(t,i),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const U6={isPointerInBounds(s){return s===void 0?s=this:typeof s=="string"&&(s=this.getElement(s)),s?gd(s):!1},onTouching(s,t,i,f){return s?(typeof s=="function"&&(f=i,i=t,t=s,s=this),s._inTouching===void 0&&(s._inTouching=new Fo(s,f)),s._inTouching.on("intouch",t,i),this):this},offTouching(s,t,i){return typeof s=="function"&&(i=t,t=s,s=this),s._inTouching===void 0?this:(s._inTouching.off("intouch",t,i),this)},onTouchingEnd(s,t,i,f){return s?(typeof s=="function"&&(f=i,i=t,t=s,s=this),s._inTouching===void 0&&(s._inTouching=new Fo(s,f)),s._inTouching.on("touchend",t,i),this):this},offTouchingEnd(s,t,i){return typeof s=="function"&&(i=t,t=s,s=this),s._inTouching===void 0?this:(s._inTouching.off("touchend",t,i),this)},enableTouching(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._inTouching===void 0?this:(s._inTouching.setEnable(t),this)},disableTouching(s){return s&&typeof s!="object"&&(s=this),s._inTouching===void 0?this:(s._inTouching.setEnable(!1),this)}};var dg=function(s,t,i){for(var f,C=0,w=s.length;C<w;C++)if(f=s[C],!!gu(f,t,i))return f.pointToChild(t,i);return null},zi=function(s,t,i,f,C,w,a){var T;C===void 0?T=f:T=dg(i,f,C),T&&s.emit(t,T,w,a)};const z6=Phaser.Utils.Objects.GetValue;var X6=function(s){var t=z6(s,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",Y6,this))},Y6=function(s,t,i,f){var C=this._childrenInteractive;zi(C.eventEmitter,`${C.eventNamePrefix}down`,C.targetSizers,s.worldX,s.worldY,s,f)};const W6=Phaser.Utils.Objects.GetValue;var H6=function(s){var t=W6(s,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",$6,this))},$6=function(s,t,i,f){var C=this._childrenInteractive;zi(C.eventEmitter,`${C.eventNamePrefix}up`,C.targetSizers,s.worldX,s.worldY,s,f)};const K6=Phaser.Utils.Objects.GetValue;var j6=function(s){var t=K6(s,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",zc,this).on("pointerover",zc,this).on("pointerout",J6,this))},zc=function(s,t,i,f){var C=this._childrenInteractive,w=dg(C.targetSizers,s.worldX,s.worldY),a=C.lastOverChild;w&&a&&w===a||(C.lastOverChild=w,zi(C.eventEmitter,`${C.eventNamePrefix}out`,C.targetSizers,a,void 0,s,f),zi(C.eventEmitter,`${C.eventNamePrefix}over`,C.targetSizers,w,void 0,s,f))},J6=function(s,t){var i=this._childrenInteractive,f=i.lastOverChild;i.lastOverChild=null,zi(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,f,void 0,s,t)};const Z6=Phaser.Utils.Objects.GetValue;var Q6=function(s){var t=Z6(s,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new Fs(this,t),this._click.on("click",function(f,C,w,a){zi(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,w.worldX,w.worldY,w,a)},this)}};const vl=Phaser.Utils.Objects.GetValue;class xd extends Zo{constructor(t,i){var f=gp(t);f===t&&(t=void 0),super(f,i),this.gameObject=t,t&&t.setInteractive(vl(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(vl(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(vl(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=pl,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){if(!!this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(t.x,t.y):!0;!f||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=Xc,this.gameObject===void 0&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;!i||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=pl,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointer===t;!f&&i||(f&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Xc&&this.onDragEnd(),this.pointer=void 0,this.tracerState=pl,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=q6,this}}const pl=0,Xc=1,q6="IDLE",tr=Phaser.Utils.Objects.GetValue,_6=Phaser.Math.Distance.Between;class fg extends xd{constructor(t,i){super(t,i);var f=this,C={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var w=f.lastPointer;f.x=w.x,f.y=w.y,f.worldX=w.worldX,f.worldY=w.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=er},eventEmitter:!1};this.setRecongizedStateObject(new Cr(C))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(tr(t,"time",250)),this.setTapInterval(tr(t,"tapInterval",200)),this.setDragThreshold(tr(t,"threshold",9)),this.setTapOffset(tr(t,"tapOffset",10));var i=tr(t,"taps",void 0);return i!==void 0?this.setTaps(i):(this.setMaxTaps(tr(t,"maxTaps",void 0)),this.setMinTaps(tr(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case er:this.state=Nr;break;case Nr:var t=this.lastPointer,i=_6(t.upX,t.upY,t.x,t.y);i>this.tapOffset&&(this.state=kr,this.state=Nr);break;case kr:this.state=Nr;break}}onDragEnd(){this.state===Nr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=kr))}onDrag(){this.state!==er&&this.pointer.getDistance()>this.dragThreshold&&(this.state=er)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===Nr){var f=this.lastPointer;if(f.isDown){var C=t-f.downTime;C>this.holdTime&&(this.state=er)}else{var w=t-f.upTime;w>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=kr:this.state=er)}}}postUpdate(t,i){!this.isRunning||!this.enable||this.state===kr&&(this.state=er)}get isTapped(){return this.state===kr}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return i===void 0&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}const er="IDLE",Nr="BEGIN",kr="RECOGNIZED",Yc=Phaser.Utils.Objects.GetValue;class cg extends xd{constructor(t,i){super(t,i);var f=this,C={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var w=f.lastPointer;f.x=w.x,f.y=w.y,f.worldX=w.worldX,f.worldY=w.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Za},eventEmitter:!1};this.setRecongizedStateObject(new Cr(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Yc(t,"threshold",9)),this.setHoldTime(Yc(t,"time",251)),this}onDragStart(){this.state=Wc,this.holdTime===0&&(this.state=ml)}onDragEnd(){this.state=Za}onDrag(){this.state!==Za&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Za)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===Wc){var f=t-this.pointer.downTime;f>=this.holdTime&&(this.state=ml)}}get isPressed(){return this.state===ml}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Za="IDLE",Wc="BEGIN",ml="RECOGNIZED";Phaser.Utils.Objects.GetValue;const t5=Phaser.Math.Distance.Between,e5=Phaser.Math.Angle.Between,i5={getDt:function(){var s=Um(this.scene);return s},getVelocity:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=t5(t.x,t.y,s.x,s.y),f=i/(this.getDt()*.001);return f},getVelocityX:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(s.x-t.x),f=i/(this.getDt()*.001);return f},getVelocityY:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(s.y-t.y),f=i/(this.getDt()*.001);return f},getVelocityAngle:function(){var s=this.pointer.position,t=this.pointer.prevPosition,i=e5(t.x,t.y,s.x,s.y);return i}},gl=Phaser.Utils.Objects.GetValue,s5=Phaser.Math.RadToDeg;class Td extends xd{constructor(t,i){super(t,i);var f=this,C={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var w=f.lastPointer;f.x=w.x,f.y=w.y,f.worldX=w.worldX,f.worldY=w.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=yl},eventEmitter:!1};this.setRecongizedStateObject(new Cr(C)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(gl(t,"threshold",10)),this.setVelocityThreshold(gl(t,"velocityThreshold",1e3)),this.setDirectionMode(gl(t,"dir","8dir")),this}onDragStart(){this.state=Hc}onDragEnd(){this.state=yl}onDrag(){this.state===Hc&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=xl))}postUpdate(t,i){!this.isRunning||!this.enable||this.state===xl&&(this.state=yl)}get isSwiped(){return this.state===xl}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=fp[t]),this.dirMode=t,this}updateDirectionStates(){var t=s5(this.getVelocityAngle());return cp(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Td.prototype,i5);const yl="IDLE",Hc="BEGIN",xl="RECOGNIZED",Tl=Phaser.Utils.Objects.GetValue,r5=Phaser.Utils.Array.SpliceOne,n5=Phaser.Math.Distance.Between,a5=Phaser.Math.Angle.Between;class vg{constructor(t,i){var f=t.input.manager.pointersTotal-1;f<2&&t.input.addPointer(2-f),this.scene=t,this.setEventEmitter(Tl(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(Tl(t,"enable",!0)),this.bounds=Tl(t,"bounds",void 0),this.tracerState=Qa,this.pointers.length=0,rs(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,rs(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!i){var f=this.pointers.indexOf(t);if(f===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Qa:this.tracerState=bn,this.onDrag1Start();break;case bn:this.tracerState=Ai,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!i){var f=this.pointers.indexOf(t);if(f!==-1)switch(delete this.movedState[t.id],r5(this.pointers,f),this.tracerState){case bn:this.tracerState=Qa,this.onDrag1End();break;case Ai:this.tracerState=bn,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointers.indexOf(t)!==-1;if(!(!f&&i)){if(f&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case bn:this.onDrag1();break;case Ai:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Ai&&this.onDrag2End(),this.pointers.length=0,rs(this.movedState),this.tracerState=Qa,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Ai)return 0;var t=this.pointers[0],i=this.pointers[1];return n5(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==Ai)return 0;var t=this.pointers[0],i=this.pointers[1];return a5(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,f=t.prevPosition;Mn.x=i.x-f.x,Mn.y=i.y-f.y}else Mn.x=0,Mn.y=0;return Mn}get centerX(){if(this.tracerState!==Ai)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==Ai)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==Ai)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==Ai)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=o5,this}}Object.assign(vg.prototype,Is);var Mn={};const Qa=0,bn=1,Ai=2,o5="IDLE";Phaser.Utils.Objects.GetValue;const h5=Phaser.Math.RotateAround;var $c=function(s,t,i,f){return h5(s,t,i,f),s.rotation+=f,s},l5=function(s,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var i=this.movementCenterX,f=this.movementCenterY,C=vp(this.centerX,this.centerY,t,!0),w=C.x,a=C.y,T=this.rotation;if(Array.isArray(s))for(var e=s,u=0,y=e.length;u<y;u++)s=e[u],s.x+=i,s.y+=f,$c(s,w,a,T);else s.x+=i,s.y+=f,$c(s,w,a,T);return this};const u5=Phaser.Utils.Objects.GetValue,Cl=Phaser.Math.Angle.WrapDegrees,Kc=Phaser.Math.Angle.ShortestBetween,Sl=Phaser.Math.RadToDeg,d5=Phaser.Math.DegToRad;class f5 extends vg{constructor(t,i){super(t,i);var f=this,C={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=jc},eventEmitter:!1};this.setRecongizedStateObject(new Cr(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(u5(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Cl(Sl(this.angleBetween)),this.state=Jc,this.dragThreshold===0&&(this.state=qa)}onDrag2End(){this.state=jc}onDrag2(){switch(this.state){case Jc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Cl(Sl(this.angleBetween));this.angle=Kc(this.prevAngle,t),this.prevAngle=t,this.state=qa}break;case qa:var t=Cl(Sl(this.angleBetween));this.angle=Kc(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===qa}get rotation(){return d5(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var c5={spinObject:l5};Object.assign(f5.prototype,c5);const jc="IDLE",Jc="BEGIN",qa="RECOGNIZED",v5=Phaser.Utils.Objects.GetValue;var p5=function(s){var t=v5(s,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._tap=new fg(this,t),this._tap.on("tap",function(f,C,w){zi(i.eventEmitter,`${i.eventNamePrefix}${f.tapsCount}tap`,i.targetSizers,f.worldX,f.worldY,w)},this)}};const m5=Phaser.Utils.Objects.GetValue;var g5=function(s){var t=m5(s,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._press=new cg(this,t),this._press.on("pressstart",function(f,C,w){zi(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,f.worldX,f.worldY,w)},this).on("pressend",function(f,C,w){zi(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,f.worldX,f.worldY,w)},this)}};const y5=Phaser.Utils.Objects.GetValue;var x5=function(s){var t=y5(s,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Td(this,t),this._swipe.on("swipe",function(f,C,w){var a=f.left?"left":f.right?"right":f.up?"up":"down";zi(i.eventEmitter,`${i.eventNamePrefix}swipe${a}`,i.targetSizers,f.worldX,f.worldY,w)},this)}};const El=Phaser.Utils.Objects.GetValue;var T5=function(s,t){return s.setInteractive(),s._childrenInteractive={targetSizers:El(t,"targets",[s]),eventEmitter:El(t,"eventEmitter",s),eventNamePrefix:El(t,"inputEventPrefix","child.")},X6.call(s,t),H6.call(s,t),j6.call(s,t),Q6.call(s,t),p5.call(s,t),g5.call(s,t),x5.call(s,t),s},C5=function(s){return T5(this,s),this},S5=function(){for(var s=this.getAllChildren([this]),t=0,i=s.length;t<i;t++){var f=s[t];f.emit.apply(f,arguments)}return this},pg={getSizerConfig:jO,getChildPrevState:JO,pushIntoBounds:ZO,drawBounds:h3,resolveWidth:dd,resolveChildrenWidth:C3,resolveHeight:fd,postResolveSize:S3,getChildWidth:E3,getChildHeight:P3,getExpandedChildWidth:w3,getExpandedChildHeight:M3,getChildrenWidth:b3,getChildrenHeight:A3,addChildrenMap:Rc,addElement:Rc,removeChildrenMap:g3,getElement:y3,getAllChildrenSizers:R3,getChildrenSizers:O3,preLayout:va,layout:F3,runLayout:D3,layoutChildren:B3,runWidthWrap:ig,layoutBackgrounds:B6,postLayout:I3,setAnchor:N3,isInTouching:b6,pointToChild:O6,setDraggable:I6,setChildrenInteractive:C5,broadcastEvent:S5};Object.assign(pg,T3,d3,m3,ca,vd,H3,Z3,s6,a6,ug,k6,U6,o6,w6,L3);const Vr=Phaser.Utils.Objects.GetValue;class Sr extends wi{constructor(t,i,f,C,w,a){super(t,i,f,1,1),this.isRexSizer=!0,this.setMinSize(C,w),this.setName(Vr(a,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var T=Vr(a,"anchor",void 0);T&&this.setAnchor(T),this.setInnerPadding(Vr(a,"space",0));var e=Vr(a,"draggable",!1);e&&this.setDraggable(e),this.setSizerEventsEnable(Vr(a,"sizerEvents",!1)),this.setDirty(!0),Vr(a,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!!this.scene){if(t)for(var i=this.getAllChildrenSizers([this]),f=0,C=i.length;f<C;f++)i[f].sizerEventsEnable=!1;super.destroy(t),rs(this.backgroundChildren),rs(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,i){return this.setMinWidth(t).setMinHeight(i),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Vt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Vt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Vt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-It(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+It(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+It(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(Sr.prototype,pg);var E5=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,i,f,C;for(var w in t)i=t[w],f=i.rexSizer.padding,C=this.getChildWidth(i)+f.left+f.right,s=Math.max(C,s);return s+this.space.left+this.space.right},P5=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,i,f,C;for(var w in t)i=t[w],C=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?i.minHeight:It(i),f=i.rexSizer.padding,C+=f.top+f.bottom,s=Math.max(C,s);return s+this.space.top+this.space.bottom},w5=function(s,t){t===void 0&&(t=this.width);var i,f=s.rexSizer;if(f.expandWidth){var C=t-this.space.left-this.space.right,w=f.padding;i=C-w.left-w.right}return i},M5=function(s,t){t===void 0&&(t=this.height);var i,f=s.rexSizer;if(f.expandHeight){var C=t-this.space.top-this.space.bottom,w=f.padding;i=C-w.top-w.bottom}return i},b5=function(s){s===void 0&&(s=[]);var t=this.sizerChildren,i;for(var f in t)i=t[f],i.isRexSizer&&s.push(i);return s},Cd=function(s,t){s.width<s.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${s.constructor.name}`),s.height<s.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${s.constructor.name}`)},A5=function(){var s,t,i,f=this.innerLeft,C=this.innerTop,w=this.innerWidth,a=this.innerHeight,T,e,u,y,d,l,h=this.sizerChildren;for(var r in h)s=h[r],!s.rexSizer.hidden&&(t=s.rexSizer,i=t.padding,ma.call(this,s),s.isRexSizer?(s.runLayout(this,this.getExpandedChildWidth(s),this.getExpandedChildHeight(s)),Cd(s,this)):(d=void 0,l=void 0,t.expandWidth&&(d=w-i.left-i.right),t.expandHeight&&(l=a-i.top-i.bottom),Pi(s,d,l)),T=f+i.left,u=w-i.left-i.right,e=C+i.top,y=a-i.top-i.bottom,ga.call(this,s,T,e,u,y,t.align,t.alignOffsetX,t.alignOffsetY))};const Zc=Phaser.Utils.Objects.IsPlainObject,Ri=Phaser.Utils.Objects.GetValue,Qc=Phaser.Display.Align.CENTER,R5=Phaser.Utils.String.UUID;var O5=function(s,t,i,f,C,w,a,T,e){if(da.call(this,s),Zc(t)){var y=t;t=Ri(y,"key",void 0),i=Ri(y,"align",Qc),T=Ri(y,"offsetX",0),e=Ri(y,"offsetY",0),f=Ri(y,"padding",0),C=Ri(y,"expand",!0),s.isRexSizer||(w=Ri(y,"minWidth",s._minWidth),a=Ri(y,"minHeight",s._minHeighted))}var u=t!==void 0;u||(t=R5()),typeof i=="string"&&(i=dn[i]),i===void 0&&(i=Qc),T===void 0&&(T=0),e===void 0&&(e=0),f===void 0&&(f=0),C===void 0&&(C=!0),s.isRexSizer||(w===void 0&&(w=s._minWidth),a===void 0&&(a=s._minHeight));var y=this.getSizerConfig(s);return y.align=i,y.alignOffsetX=T,y.alignOffsetY=e,y.padding=fn(f),Zc(C)?(y.expandWidth=Ri(C,"width",!1),y.expandHeight=Ri(C,"height",!1)):(y.expandWidth=C,y.expandHeight=C),s.isRexSizer||(y.expandWidth&&(s.minWidth=w===void 0?Vt(s):w),y.expandHeight&&(s.minHeight=a===void 0?It(s):a)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=s,u&&this.addChildrenMap(t,s),this};const L5={add:O5},F5=wi.prototype.clear;var rh=function(s){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!s&&this.sizerEventsEnable,i;if(t&&(i=this.getChildren([])),F5.call(this,s),t)for(var f,C=0,w=i.length;C<w;C++)f=i[C],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this};const D5={remove(s,t){var i;if(typeof s=="string"){if(i=s,s=this.sizerChildren[i],!s)return this}else{if(this.getParentSizer(s)!==this)return this;i=this.childToKey(s)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),fa.call(this,s,t),this},removeAll(s){for(var t in this.sizerChildren)this.remove(t,s);return this},clear(s){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return rh.call(this,s),this}};var mg={getChildrenWidth:E5,getChildrenHeight:P5,getExpandedChildWidth:w5,getExpandedChildHeight:M5,getChildrenSizers:b5,layoutChildren:A5};Object.assign(mg,L5,D5);var nh=function(s,t){if(Array.isArray(s))return s.indexOf(t);for(var i in s)if(s[i]===t)return i;return null};const qc=Phaser.Utils.Objects.IsPlainObject,Ur=Phaser.Utils.Objects.GetValue;class fs extends Sr{constructor(t,i,f,C,w,a){qc(i)?(a=i,i=Ur(a,"x",0),f=Ur(a,"y",0),C=Ur(a,"width",void 0),w=Ur(a,"height",void 0)):qc(C)&&(a=C,C=Ur(a,"width",void 0),w=Ur(a,"height",void 0)),super(t,i,f,C,w,a),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var i=t;if(this.sizerChildren.hasOwnPropery(i))return i}else return nh(this.sizerChildren,t);return null}}Object.assign(fs.prototype,mg);var B5=Phaser.Math.Distance.Between,Do=function(s,t,i){var f=s.width/2;return B5(f,f,t,i)<=f};const I5=Phaser.Math.Angle.Between,G5=Phaser.Math.Angle.Normalize;var _c=function(s,t,i){if(!!this.enable&&!!s.isDown){var f=this.sizerChildren.knob;if(!!Do(f,t,i)){var C=f.width/2,w=f.startAngle,a=I5(C,C,t,i),T=f.anticlockwise?w-a:a-w,e=G5(T)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-e)<.1?this.value=e:this.easeValueTo(e)}}},N5=function(){var s=this.sizerChildren.knob;s.on("pointerdown",_c,this).on("pointermove",_c,this).setInteractive()};const tv=Phaser.Math.Angle.Between,k5=Phaser.Math.Angle.Wrap;var V5=function(s,t,i){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;!Do(f,t,i)||gg.call(this,s)}},U5=function(s,t,i){if(!!this.enable&&!!s.isDown){var f=this.sizerChildren.knob;switch(this.panState){case Sd:Do(f,t,i)&&gg.call(this,s);break;case xg:Do(f,t,i)?X5.call(this):yg.call(this);break}}},z5=function(s,t,i){!this.enable||this.panPointer!==s||yg.call(this)},gg=function(s){this.panPointer=s,this.panState=xg},yg=function(){this.panPointer=void 0,this.panState=Sd},X5=function(){var s=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,f=tv(i.x,i.y,s.x,s.y),C=tv(i.x,i.y,t.x,t.y),w=i.anticlockwise?f-C:C-f,a=k5(w)/(Math.PI*2);this.stopEaseValue(),this.value+=a};const Sd=0,xg=1;var Y5=function(){var s=this.sizerChildren.knob;s.on("pointerdown",V5,this).on("pointermove",U5,this).on("pointerup",z5,this).setInteractive(),this.panPointer=void 0,this.panState=Sd},W5=function(s,t){return this.textFormatCallback=s,this.textFormatCallbackScope=t,this},Tg=function(s){s===void 0&&(s=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(s):t=this.textFormatCallback.call(this.textFormatCallbackScope,s),t},H5=function(s){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(Tg.call(this,s)),t.layout&&t.layout()),this};const $5={setTextFormatCallback:W5,getFormatText:Tg,updateText:H5},fi=Phaser.Utils.Objects.GetValue,K5=Phaser.Math.Snap.To;class j5 extends Tr(fs){constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexKnob",this.bootProgressBase(i);var f=fi(i,"background",void 0),C=fi(i,"text",void 0);f&&this.addBackground(f),C&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(fi(i,"textFormatCallback",void 0),fi(i,"textFormatCallbackScope",void 0)));var w=new jm(t,i);w.setDepth(fi(i,"knobDepth",0)),w._value=-1,t.add.existing(w),this.add(w,"knob"),C&&(this.add(C,"text","center",0,!1),t.children.moveBelow(w,C)),this.addChildrenMap("background",f),this.addChildrenMap("knob",w),this.addChildrenMap("text",C),this.setEnable(fi(i,"enable",void 0)),this.setGap(fi(i,"gap",void 0)),this.setValue(fi(i,"value",0),fi(i,"min",void 0),fi(i,"max",void 0));var a=fi(i,"input",0);switch(typeof a=="string"&&(a=J5[a]),a){case 0:Y5.call(this);break;case 1:N5.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=K5(t,this.gap));var i=this.value;this.sizerChildren.knob.value=t;var f=this.value;i!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,i,this.eventEmitter))}}const J5={pan:0,drag:0,click:1,none:-1};Object.assign(j5.prototype,$5);const Z5={arc:th,circle:vu,curve:$A,ellipse:KA,line:jA,lines:en,rectangle:vR,roundRectangle:Ro,triangle:mR},ev=Phaser.Utils.Objects.GetValue,Q5=Phaser.Utils.Objects.IsPlainObject,q5=function(){for(var s=this.getShapes(),t=0,i=s.length;t<i;t++)s[t].lineStyle().fillStyle()},_5={createShape(s,t){var i=Z5[s],f=new i;return t&&f.setName(t),f},buildShapes(s){var t=ev(s,"create",void 0);if(Q5(t)){var i=t;for(var f in i){var C=i[f];switch(typeof C){case"number":for(var w=0;w<C;w++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,C));break;default:for(var a=C,w=0,T=a.length;w<T;w++)this.addShape(this.createShape(f,a[w]));break}}}else if(Array.isArray(t))for(var i=t,w=0,T=i.length;w<T;w++){var e=i[w];this.addShape(this.createShape(e.type,e.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(ev(s,"update"))},setUpdateShapesCallback(s){return s===void 0&&(s=q5),this.dirty=this.dirty||this.updateCallback!==s,this.updateCallback=s,this},updateShapes(){this.updateCallback.call(this)}},iv=Phaser.GameObjects.Components.TransformMatrix,tL=Phaser.Math.TransformXY;var eL=function(s,t,i,f,C){f===void 0&&(f=s.scene.cameras.main),C===void 0?C={}:C===!0&&(C=iL);var w=f.scrollX,a=f.scrollY,T=t+w*s.scrollFactorX-w,e=i+a*s.scrollFactorY-a;return s.parentContainer?(_a===void 0&&(_a=new iv,sv=new iv),s.getWorldTransformMatrix(_a,sv),_a.applyInverse(T,e,C)):tL(T,e,s.x,s.y,s.rotation,s.scaleX,s.scaleY,C),C.x+=s.displayOriginX,C.y+=s.displayOriginY,C},_a,sv,iL={};const An=Phaser.Utils.Objects.GetValue,sL=Phaser.Utils.Objects.IsPlainObject;class Cg extends yr{constructor(t,i,f,C,w,a){sL(i)&&(a=i,i=An(a,"x",0),f=An(a,"y",0),C=An(a,"width",2),w=An(a,"height",2)),super(t,i,f,C,w),this.type=An(a,"type","rexCustomShapes"),this.buildShapes(a)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,i,f,C){return typeof f=="boolean"&&(C=f,f=void 0),eL(this,t,i,f,C)}}Object.assign(Cg.prototype,_5);const Rn=Phaser.Utils.Objects.GetValue,rL=Phaser.Utils.Objects.IsPlainObject;class lG extends Tr(Cg){constructor(t,i,f,C,w,a){rL(i)&&(a=i,i=Rn(a,"x",0),f=Rn(a,"y",0),C=Rn(a,"width",2),w=Rn(a,"height",2)),a===void 0&&(a={}),a.type||(a.type="rexCustomProgress"),super(t,i,f,C,w,a),this.bootProgressBase(a),this.setValue(Rn(a,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}const nL={setTransitionStartCallback(s,t){return this.onStartCallback=s,this.onStartCallbackScope=t,this},setTransitionProgressCallback(s,t){return this.onProgressCallback=s,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(s,t){return this.onCompleteCallback=s,this.onCompleteCallbackScope=t,this}},aL=Phaser.Utils.Objects.IsPlainObject,ii=Phaser.Utils.Objects.GetValue;var oL={out:0,in:1};const hL={setTransitionDirection(s){return typeof s=="string"&&(s=oL[s]),this.dir=s,this},setDuration(s){return this.duration=s,this},setEaseFunction(s){return this.easeFunction=s,this},setNextTexture(s,t){return this.nextImage.setTexture(s,t),this},transit(s,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),aL(s)){var i=s;s=ii(i,"key",void 0),t=ii(i,"frame",void 0),this.setDuration(ii(i,"duration",this.duration)).setEaseFunction(ii(i,"ease",this.easeFunction)).setTransitionDirection(ii(i,"dir",this.dir));var f=ii(i,"mask",void 0);f&&this.setMaskGameObject(f),this.setMaskEnable(f===!0);var C=ii(i,"onStart",void 0),w=ii(i,"onProgress",void 0),a=ii(i,"onComplete",void 0);(C!==void 0||w!==void 0||a!==void 0)&&this.setTransitionStartCallback(C,ii(i,"onStartScope",void 0)).setTransitionProgressCallback(w,ii(i,"onProgressScope",void 0)).setTransitionCompleteCallback(a,ii(i,"onCompleteScope",void 0))}return this.setNextTexture(s,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new xr(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var rv=function(s,t,i,f,C){switch(this.clear().fillStyle(16777215),this.shape){case 1:var w=Math.min(s,t)/2;this.fillCircle(-s*(f-.5),-t*(C-.5),w+i);break;default:this.fillRect(-(s*f)-i,-(t*C)-i,s+2*i,t+2*i);break}};const lL=Phaser.GameObjects.Graphics;class yu extends lL{constructor(t,i,f){i===void 0&&(i=0),typeof i=="string"&&(i=uL[i]),f===void 0&&(f=0),super(t.scene),this.parent=t,this.shape=i,this.padding=f,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,i){var f=this.parent;return t===void 0&&(t=f.x),i===void 0&&(i=f.y),super.setPosition(t,i),this}resize(t,i,f){var C=this.parent;return t===void 0&&(t=C.width),i===void 0&&(i=C.height),f===void 0&&(f=this.padding),this.width===t&&this.height===i&&this.paddingSave===f?this:(this.width=t,this.height=i,this.originX=C.originX,this.originY=C.originY,this.paddingSave=f,rv.call(this,t,i,f,C.originX,C.originY),this)}setOrigin(t,i){i===void 0&&(i=t);var f=this.parent;return t===void 0&&(t=f.originX),i===void 0&&(i=f.originY),this.originX===t&&this.originY===i?this:(this.originX=t,this.originY=i,rv.call(this,this.width,this.height,this.paddingSave,t,i),this)}}const uL={rectangle:0,circle:1},dL={setMaskGameObject(s){if(!s)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(s===!0&&this.maskGameObject instanceof yu)return this;if(this.maskGameObject===s)return this;this.removeMaskGameObject()}return s===!0&&(s=new yu(this)),this.maskGameObject=s,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(s,t,i){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(s.setMask(this.childrenMask),i&&this.childrenMask.setInvertAlpha()):s.clearMask(),this},setCurrentImageMaskEnable(s,t){return this.setImageMaskEnable(this.currentImage,s,t),this},setNextImageMaskEnable(s,t){return this.setImageMaskEnable(this.nextImage,s,t),this},setCellImagesMaskEnable(s,t){for(var i=this.getCellImages(),f=0,C=i.length;f<C;f++)this.setImageMaskEnable(i[f],s,t);return this},setMaskEnable(s,t){return this.setImageMaskEnable(this.backImage,s,t),this.setImageMaskEnable(this.frontImage,s,t),this.setCellImagesMaskEnable(s,t),this}};var fL=function(s,t){t===void 0&&(t=",");var i;return s==="__BASE"?i=function(f,C){return`${f}${t}${C}`}:i=function(f,C){return`${s}_${f}${t}${C}`},i},cL=function(s,t,i,f,C,w){i==null&&(i="__BASE"),w||(w=fL(i,w));for(var a=s.sys.textures.get(t),T=a.source[0].isRenderTexture,e=typeof i=="object"?i:a.get(i),u=e.width,y=e.height,d,l,h,r=u/f,n=y/C,v=0,o=0,c=0;c<C;c++){v=0;for(var m=0;m<f;m++)h=w(m,c),d=v+e.cutX,T?l=y-o-n+e.cutY:l=o+e.cutY,a.add(h,0,d,l,r,n),v+=r;o+=n}return{getFrameNameCallback:w,cellWidth:r,cellHeight:n,columns:f,rows:C}};const $i=Phaser.Utils.Objects.GetValue,vL=Phaser.GameObjects.Image,pL=Phaser.Utils.Objects.IsPlainObject,mL=Phaser.Math.RotateAround;var gL=function(s,t,i,f){pL(t)&&(f=t,t=$i(f,"columns",1),i=$i(f,"rows",1));var C=$i(f,"onCreateImage");if(!C){var w=$i(f,"ImageClass",vL);C=function(B,G,z){return new w(B,0,0,G,z)}}for(var a=$i(f,"originX",.5),T=$i(f,"originY",.5),e=$i(f,"add",!0),u=$i(f,"align",e),y=$i(f,"objectPool",void 0),d=s.scene,l=s.texture,h=s.frame,r=cL(d,l,h,t,i),n=r.getFrameNameCallback,v=s.scaleX,o=s.scaleY,c=s.rotation,m=s.getTopLeft(),p=m.x,g=m.y,x=[],E=r.cellWidth*v,P=r.cellHeight*o,S=0;S<i;S++)for(var M=0;M<t;M++){var b,A=n(M,S);y&&y.length>0?b=y.pop().setTexture(l,A):b=C(d,l,A),e&&d.add.existing(b);var L=p+E*M,R=g+P*S,O=L+a*E,D=R+T*P;u&&(b.setOrigin(a,T).setPosition(O,D).setScale(v,o).setRotation(c),mL(b,p,g,c)),x.push(b)}return x};const yL={gridCutImage(s,t,i,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var C=gL(s,t,i,f),w,a=0,T=C.length;a<T;a++)w=C[a],w.setVisible(!0),this.add(w);return this.cellImages=C,this.setChildLocalVisible(s,!1),C},gridCutCurrentImage(s,t,i){return this.gridCutImage(this.currentImage,s,t,i)},gridCutNextImage(s,t,i){return this.gridCutImage(this.nextImage,s,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var s=this.cellImages[0].texture,t=this.cellImages,i,f,C=0,w=t.length;C<w;C++)i=t[C],this.setChildLocalAlpha(i,1).setChildLocalScale(i,1).setChildLocalVisible(i,!1),i.clearMask(),f=i.frame.name,i.setTexture(),s.remove(f);return this.imagesPool.push(...t),t.length=0,this}},Sg={setFlipX(s){return this.flipX=s,this},setFlipY(s){return this.flipY=s,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(s,t){return this.flipX=s,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var Eg={};Object.assign(Eg,nL,hL,dL,yL,Sg);var xL=function(s,t,i,f){},TL=function(s,t,i,f){s.setChildLocalAlpha(t,1-f).setChildLocalAlpha(i,f)},CL=function(s,t,i,f){s.setChildLocalAlpha(t,1)};const nv=Phaser.Utils.Objects.IsPlainObject,Ce=Phaser.Utils.Objects.GetValue,SL=Phaser.Math.Clamp;class EL extends wi{constructor(t,i,f,C,w,a){nv(i)?(a=i,i=Ce(a,"x",0),f=Ce(a,"y",0),C=Ce(a,"key",void 0),w=Ce(a,"frame",void 0)):nv(w)&&(a=w,w=void 0);var T=Ce(a,"back",void 0),e=Ce(a,"front",void 0);T||(T=t.add.image(i,f,C,w)),e||(e=t.add.image(i,f,C,w));var u=Ce(a,"width",e.width),y=Ce(a,"height",e.height);super(t,i,f,u,y),this.type="rexTransitionImage",T.setVisible(!1),this.addMultiple([T,e]),this.backImage=T,this.frontImage=e,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var d=Ce(a,"onStart",void 0),l=Ce(a,"onProgress",void 0),h=Ce(a,"onComplete",void 0),r=Ce(a,"dir",0);d===void 0&&l===void 0&&h===void 0&&(d=xL,l=TL,h=CL,r=0),this.setTransitionStartCallback(d,Ce(a,"onStartScope",void 0)).setTransitionProgressCallback(l,Ce(a,"onProgressScope",void 0)).setTransitionCompleteCallback(h,Ce(a,"onCompleteScope",void 0)).setTransitionDirection(r).setDuration(Ce(a,"duration",1e3)).setEaseFunction(Ce(a,"ease","Linear"));var n=Ce(a,"mask",void 0);n&&this.setMaskGameObject(n),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=SL(t,0,1),this._t!==t){this._t=t;var i=this.currentImage,f=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Pl(this.onStartCallback,this.onStartCallbackScope,this,i,f,t)),Pl(this.onProgressCallback,this.onProgressCallbackScope,this,i,f,t),t===1){Pl(this.onCompleteCallback,this.onCompleteCallbackScope,this,i,f,t);var C=f.texture.key,w=f.frame.name;this.frontImage.setTexture(C,w),this.backImage.setTexture(C,w),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,i){return super.setOrigin(t,i),this.backImage.setOrigin(t,i),this.frontImage.setOrigin(t,i),this.maskGameObject&&this.maskGameObject.setOrigin(t,i),this}setTexture(t,i){return this.frontImage.setTexture(t,i),this.backImage.setTexture(t,i).setVisible(!1),this}}var Pl=function(s,t,i,f,C,w){!s||(t?s.call(t,i,f,C,w):s(i,f,C,w))};Object.assign(EL.prototype,Eg);var PL=function(s,t,i){if(i===void 0?i={}:i===!0&&(i=wL),s.width<=t.width&&s.height<=t.height)return i.width=s.width,i.height=s.height,i;var f=s.width/s.height;i.width=Math.min(s.width,t.width),i.height=Math.min(s.height,t.height);var C=i.width/i.height;return C<f?i.height=i.width/f:C>f&&(i.width=i.height*f),i},wL={};const av=Phaser.Utils.Objects.IsPlainObject,ir=Phaser.Utils.Objects.GetValue;class ML extends wi{constructor(t,i,f,C,w,a){av(i)?(a=i,i=ir(a,"x",0),f=ir(a,"y",0),C=ir(a,"key",void 0),w=ir(a,"frame",void 0)):av(w)&&(a=w,w=void 0);var T=ir(a,"image");T?T.setPosition(i,f).setOrigin(.5):(T=t.add.image(i,f,C,w),C===void 0&&T.setVisible(!1)),super(t,i,f,1,1),this.type="rexImageBox",this.add(T),this.image=T;var e=ir(a,"width",T.width),u=ir(a,"height",T.height);this.resize(e,u)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}scaleImage(){var t=this.image,i=PL(t,{width:this.width,height:this.height},!0);return t.setDisplaySize(i.width,i.height),this.resetChildScaleState(t),this}resize(t,i){return super.resize(t,i),this.scaleImage(),this}setTexture(t,i){var f=this.image;return f.setTexture(t,i),t!==null?(this.setChildVisible(f,!0),this.scaleImage()):this.setChildVisible(f,!1),this}}Object.assign(ML.prototype,Sg);var Ed=function(s,t){if(this.scene.sys.scale.autoRound&&(s=Math.floor(s),t=Math.floor(t)),this.width===s&&this.height===t)return this;var i=this.node.style;return i.width=`${s}px`,i.height=`${t}px`,this.updateSize(),this};const ov={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},hv={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},bL={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},lv=Phaser.Utils.Objects.GetValue;var Pg=function(s,t,i,f){var C=lv(f,"preventDefault",!1),w=lv(f,"preTest");for(let a in i)t.addEventListener(a,function(T){(!w||w(s,a))&&s.emit(i[a],s,T),C&&T.preventDefault()})};const AL=Phaser.GameObjects.DOMElement,uv=Phaser.Utils.Objects.IsPlainObject,Ki=Phaser.Utils.Objects.GetValue;class wg extends AL{constructor(t,i,f,C,w,a){uv(i)?(a=i,i=Ki(a,"x",0),f=Ki(a,"y",0),C=Ki(a,"width",0),w=Ki(a,"height",0)):uv(C)&&(a=C,C=Ki(a,"width",0),w=Ki(a,"height",0)),a===void 0&&(a={});var T,e=Ki(a,"type","text");e==="textarea"?(T=document.createElement("textarea"),T.style.resize="none"):(T=document.createElement("input"),T.type=e),Ao(ov,a,T);var u=Ki(a,"style",void 0);u=Ao(hv,a,u);var y=T.style;for(var d in a)d in ov||d in hv||d in y&&(u[d]=a[d]);u["box-sizing"]="border-box",super(t,i,f,T,u),this.type="rexInputText",this.resize(C,w),Pg(this,T,bL),Im(T),Ki(a,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return t===void 0?this.node.select():this.node.setSelectionRange(t,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node.style[t]=i,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var RL={resize:Ed};Object.assign(wg.prototype,RL);Phaser.Utils.Objects.GetValue;var OL=function(s,t){return s===void 0&&(s=0),new Promise(function(i,f){setTimeout(function(){i(t)},s)})},LL=function({game:s,fileInput:t,closeDelay:i}){return Zu(Uo(s).events,"focus").then(function(){return OL(i)}).then(function(){var f={files:t.files};return Promise.resolve(f)})};Phaser.Utils.Objects.GetValue;var Mg=function(s){return this.setOrigin(s.originX,s.originY),this.setPosition(s.x,s.y),this.resize(s.displayWidth,s.displayHeight),this},FL=function(s,t,i){if(i===void 0)switch(t){case"image":case"svg":i="textures";break;case"animation":i="json";break;case"tilemapTiledJSON":case"tilemapCSV":i="tilemap";break;case"glsl":i="shader";break;default:i=t;break}s=Uo(s);var f;return i==="textures"?f=s.textures:f=s.cache[i],f},bg=function(s,t,i,f,C,w){var a=FL(s,i,C);a.exists(f)&&a.remove(f);var T=window.URL.createObjectURL(t),e=s.load;w&&e.once(`filecomplete-${i}-${f}`,function(u,y,d){w(d)}),e[i](f,T),e.start()},DL=function(s,t,i,f,C){var w=this.scene;return bg(w,s,t,i,f,C),this},BL=function(s,t,i,f){var C=this.scene;return new Promise(function(w,a){var T=function(e){w(e)};bg(C,s,t,i,f,T)})};const Ag={loadFile:DL,loadFilePromise:BL},IL=Phaser.GameObjects.DOMElement,dv=Phaser.Utils.Objects.IsPlainObject,Oi=Phaser.Utils.Objects.GetValue;class Rg extends IL{constructor(t,i,f,C,w,a){dv(i)?(a=i,i=Oi(a,"x",0),f=Oi(a,"y",0),C=Oi(a,"width",0),w=Oi(a,"height",0)):dv(C)&&(a=C,C=Oi(a,"width",0),w=Oi(a,"height",0));var T=document.createElement("input");T.type="file";var e=T.style;e.display="none";var u=document.createElement("label");u.appendChild(T);var y=Oi(a,"style",void 0);super(t,i,f,u,y),this.type="rexFileChooser",this.resetFromJSON(a),this.resize(C,w);var d=this;T.onchange=function(){d.emit("change",d)},this.setCloseDelay(Oi(a,"closeDelay",200)),T.onclick=function(){LL({game:t,fileInput:T,closeDelay:d.closeDelay}).then(function(){d.emit("select",d)})}}resetFromJSON(t){return this.setAccept(Oi(t,"accept","")),this.setMultiple(Oi(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}}var GL={resize:Ed,syncTo:Mg};Object.assign(Rg.prototype,GL,Ag);const NL={setDropEnable(s){return s===void 0&&(s=!0),this.dropEnable=s,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},kL={addFilter(s,t){return this.filters||(this.filters={}),this.filters[s]=t,this},addFilters(s){this.filters||(this.filters={});for(var t in s)this.filters[t]=s[t];return this}};var Og={resize:Ed,syncTo:Mg};Object.assign(Og,NL,kL,Ag);const VL={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},UL=Phaser.GameObjects.DOMElement,fv=Phaser.Utils.Objects.IsPlainObject,ji=Phaser.Utils.Objects.GetValue;class zL extends UL{constructor(t,i,f,C,w,a){fv(i)?(a=i,i=ji(a,"x",0),f=ji(a,"y",0),C=ji(a,"width",0),w=ji(a,"height",0)):fv(C)&&(a=C,C=ji(a,"width",0),w=ji(a,"height",0)),a===void 0&&(a={});var T=document.createElement("div"),e=ji(a,"style",void 0);super(t,i,f,T,e),this.type="rexFileDropZone",this.resize(C,w),this._files=[],this.setDropEnable(ji(a,"dropEnable",!0));var u=ji(a,"filters");u&&this.addFilters(u),Pg(this,T,VL,{preventDefault:!0,preTest(y){return y.dropEnable}}),this.on("drop",function(y,d){if(this._files=d.dataTransfer.files,this._files&&this.filters)for(var l in this.filters){for(var h=this.filters[l],r=[],n=0,v=this._files.length;n<v;n++){var o=this._files[n];h(o)&&r.push(o)}r.length>0&&this.emit(`drop.${l}`,r)}},this)}get files(){return this._files}}Object.assign(zL.prototype,Og);var XL=function(s){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,YL(this,s)),this},YL=function(s,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var f=!1;i.animation===void 0?i.animation={}:i.animation===!1&&(f=!0,i.animation={});var C=i.animation;f&&(C.duration=0);var w=C.onProgress;C.onProgress=function(T){w&&w(T),s.needRedraw()};var a=C.onComplete;return C.onComplete=function(T){a&&a(T),s.needRedraw()},t},WL=function(s){if(this.chart!==void 0)if(typeof s=="string"){for(var t=this.chart.data.datasets,i,f=0,C=t.length;f<C;f++)if(i=t[f],i.label===s)return i}else return this.chart.data.datasets[s]},HL=function(s,t){var i=this.getChartDataset(s);if(i!==void 0){if(typeof t=="string"){var f=this.chart.data.labels;if(t=f.indexOf(t),t===-1)return}return i.data[t]}},$L=function(s,t,i){if(this.chart===void 0)return this;var f=this.getChartDataset(s);if(typeof t=="string"){var C=this.chart.data.labels;if(t=C.indexOf(t),t===-1)return this}return f.data[t]=i,this},KL=function(){return this.chart===void 0?this:(this.chart.update(),this)};class jL extends eh{constructor(t,i,f,C,w,a){super(t,i,f,C,w),this.type="rexChart",this.chart=void 0,a!==void 0&&this.setChart(a)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,i){if(t===this.width&&i===this.height)return this;if(super.resize(t,i),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}}var JL={setChart:XL,getChartDataset:WL,getChartData:HL,setChartData:$L,updateChart:KL};Object.assign(jL.prototype,JL);var ZL=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,i=this.sizerChildren,f,C,w;if(this.orientation===0)for(var a=this.space.item,T=!0,e=0,u=i.length;e<u;e++)f=i[e],!f.rexSizer.hidden&&(f.rexSizer.proportion===0||s?w=this.getChildWidth(f):w=0,C=f.rexSizer.padding,w+=C.left+C.right,T?T=!1:w+=a,t+=w);else for(var e=0,u=i.length;e<u;e++)f=i[e],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(C=f.rexSizer.padding,w=this.getChildWidth(f)+C.left+C.right,t=Math.max(w,t)));return t+this.space.left+this.space.right},QL=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,i=this.sizerChildren,f,C,w;if(this.orientation===0)for(var a=0,T=i.length;a<T;a++)f=i[a],!f.rexSizer.hidden&&(C=f.rexSizer.padding,w=this.getChildHeight(f)+C.top+C.bottom,t=Math.max(w,t));else for(var e=this.space.item,u=!0,a=0,T=i.length;a<T;a++)f=i[a],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(f.rexSizer.proportion===0||s?w=this.getChildHeight(f):w=0,C=f.rexSizer.padding,w+=C.top+C.bottom,u?u=!1:w+=e,t+=w));return t+this.space.top+this.space.bottom},qL=function(s,t){t===void 0&&(t=this.width);var i,f=s.rexSizer,C=f.padding;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(i=f.proportion*this.proportionLength);else if(f.expand){var w=t-this.space.left-this.space.right;i=w-C.left-C.right}return i},_L=function(s,t){t===void 0&&(t=this.height);var i,f=s.rexSizer,C=f.padding;if(this.orientation===0){if(f.expand){var w=t-this.space.top-this.space.bottom;i=w-C.top-C.bottom}}else f.proportion>0&&this.proportionLength>0&&(i=f.proportion*this.proportionLength);return i},t4=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,i,f=0,C=t.length;f<C;f++)i=t[f],i.isRexSizer&&s.push(i);return s},e4=function(){this.hasRatioFitChild=!1;for(var s=this.sizerChildren,t=0,i=s.length;t<i;t++){var f=s[t];f.rexSizer.hidden||!f.rexSizer.fitRatio||(Pi(f,1,1),this.hasRatioFitChild=!0)}return this._childrenProportion=void 0,this.proportionLength=void 0,va.call(this),this},i4=function(s,t){if(this.hasRatioFitChild){var i;this.orientation===0?i=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):s-this.getInnerPadding("left")-this.getInnerPadding("right");for(var f=this.sizerChildren,C,w,a=0,T=f.length;a<T;a++){var e=f[a];if(!e.rexSizer.hidden){var u=e.rexSizer.fitRatio;!u||(this.orientation===0?(w=i-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),C=w*u):(C=i-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),w=C/u),Pi(e,C,w),e.isRexSizer&&e.setMinSize(C,w))}}this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(s,!0)}};const s4=Phaser.Math.Wrap;var r4=function(){for(var s=this.sizerChildren,t,i,f,C=this.innerLeft,w=this.innerTop,a=this.innerWidth,T=this.innerHeight,e=C,u=w,y,d,l,h,r,n,v,o=this.startChildIndex,c=0,m=s.length;c<m;c++)o===0?v=c:v=s4(c+o,0,m),this.rtl&&(v=m-v-1),t=s[v],!t.rexSizer.hidden&&(i=t.rexSizer,f=i.padding,ma.call(this,t),t.isRexSpace?(r=0,n=0):(r=this.getExpandedChildWidth(t),n=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,r,n),Cd(t,this)):Pi(t,r,n),r===void 0&&(r=Vt(t)),n===void 0&&(n=It(t)),this.orientation===0?(y=e+f.left,i.proportion===0||this.proportionLength===0?l=r:l=i.proportion*this.proportionLength,d=u+f.top,h=T-f.top-f.bottom):(y=e+f.left,l=a-f.left-f.right,d=u+f.top,i.proportion===0||this.proportionLength===0?h=n:h=i.proportion*this.proportionLength),ga.call(this,t,y,d,l,h,i.align),this.orientation===0?e+=l+f.left+f.right+this.space.item:u+=h+f.top+f.bottom+this.space.item)},n4=function(t){var t=dd.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var i=t-this.childrenWidth;i>0?(i=t-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},a4=function(t){var t=fd.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var i=t-this.childrenHeight;i>0?(i=t-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t};const o4=Phaser.GameObjects.Zone;class h4 extends o4{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var l4=function(s,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var f=-1,C=1/0,w=0,a=i.length;w<a;w++){var T=i[w],e;this.orientation===0?e=Math.abs(T.left-s):e=Math.abs(T.top-t),C>e&&(C=e,f=w)}var T=i[i.length-1],e;return this.orientation===0?e=Math.abs(T.right-s):e=Math.abs(T.bottom-t),C>e&&(C=e,f=w+1),f};const Lg=Phaser.Utils.Objects.IsPlainObject,Ji=Phaser.Utils.Objects.GetValue,cv=Phaser.Display.Align.CENTER,u4={min:0,full:-1};var wl=function(s,t,i,f,C,w,a,T,e,u){da.call(this,s);var y=s.isRexSpace,d=typeof t;if(t===null)return this;if(d!=="number"){if(d==="string")t=u4[t];else if(Lg(t)){var l=t;t=Ji(l,"proportion",void 0),i=Ji(l,"align",cv),f=Ji(l,"padding",0),C=Ji(l,"expand",!1),w=Ji(l,"key",void 0),a=Ji(l,"index",void 0),s.isRexSizer||(T=Ji(l,"minWidth",void 0),e=Ji(l,"minHeight",void 0)),u=Ji(l,"fitRatio",0)}}typeof i=="string"&&(i=dn[i]),t===void 0&&(t=y?1:0),i===void 0&&(i=cv),f===void 0&&(f=0),C===void 0&&(C=!1),T===void 0&&(y?T=0:s.isRexSizer||(T=s._minWidth)),e===void 0&&(y?e=0:s.isRexSizer||(e=s._minHeight)),u===void 0&&(u=0);var l=this.getSizerConfig(s);return l.proportion=t,l.align=i,l.padding=fn(f),l.expand=C,l.fitRatio=t===0?u:0,a===void 0||a>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(a,0,s),s.isRexSizer||(t>0&&(this.orientation===0?s.minWidth=T===void 0?Vt(s):T:s.minHeight=e===void 0?It(s):e),C&&(this.orientation===0?s.minHeight=e:s.minWidth=T)),w!==void 0&&this.addChildrenMap(w,s),this};const d4={add:wl,addSpace(s){return this.insertSpace(void 0,s),this},insertSpace(s,t){return t===void 0&&(t=1),wl.call(this,new h4(this.scene),{proportion:t,minWidth:0,minHeight:0,index:s}),this},insert(s,t,i,f,C,w,a,T){return Lg(i)&&(i.index=s),wl.call(this,t,i,f,C,w,a,s,T),this},insertAtPosition(s,t,i,f,C,w,a,T,e){var u=l4.call(this,s,t);return u===-1&&(u=void 0),this.insert(u,i,f,C,w,a,T,e),this}},f4=Phaser.Utils.Array.Remove,c4={remove(s,t){return this.getParentSizer(s)!==this?this:(f4(this.sizerChildren,s),fa.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,rh.call(this,s),this}},v4={getChildAlign(s){return this.getSizerConfig(s).align},setChildAlign(s,t){return typeof t=="string"&&(t=dn[t]),this.getSizerConfig(s).align=t,this}},p4={getChildProportion(s){return this.getSizerConfig(s).proportion},setChildProportion(s,t){return this.getSizerConfig(s).proportion=t,this}},m4={getChildExpand(s){return this.getSizerConfig(s).expand},setChildExpand(s,t){return this.getSizerConfig(s).expand=t,this}};var Fg={getChildrenWidth:ZL,getChildrenHeight:QL,getExpandedChildWidth:qL,getExpandedChildHeight:_L,getChildrenSizers:t4,preLayout:e4,postResolveSize:i4,layoutChildren:r4,resolveWidth:n4,resolveHeight:a4};Object.assign(Fg,d4,c4,v4,p4,m4);var g4=function(){for(var s=0,t=this.sizerChildren,i,f,C=0,w=t.length;C<w;C++)i=t[C],!i.rexSizer.hidden&&(f=i.rexSizer.proportion,f>0&&(s+=f));return s},y4={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},ah=function(s){return typeof s=="string"&&(s=y4[s]),s};const Ml=Phaser.Utils.Objects.IsPlainObject,si=Phaser.Utils.Objects.GetValue;class kt extends Sr{constructor(t,i,f,C,w,a,T){Ml(i)?(T=i,i=si(T,"x",0),f=si(T,"y",0),C=si(T,"width",void 0),w=si(T,"height",void 0),a=si(T,"orientation",0)):Ml(C)?(T=C,C=si(T,"width",void 0),w=si(T,"height",void 0),a=si(T,"orientation",0)):Ml(a)&&(T=a,a=si(T,"orientation",0)),a===void 0&&(a=0),super(t,i,f,C,w,T),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(a),this.setItemSpacing(si(T,"space.item",0)),this.setStartChildIndex(si(T,"startChildIndex",0)),this.setRTL(si(T,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=ah(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=g4.call(this)),this._childrenProportion}}Object.assign(kt.prototype,Fg);var Dg=function(){return Array.prototype.reduce.call(arguments,x4,0)},x4=function(s,t){return s+t},T4=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,i,f=this.sizerChildren,C,w,a,T,e=0;e<this.columnCount;e++){if(T=this.columnProportions[e],i=0,T===0||s){for(var u=0;u<this.rowCount;u++)C=f[u*this.columnCount+e],C&&(C.rexSizer.hidden||(w=C.rexSizer.padding,a=this.getChildWidth(C)+w.left+w.right,i=Math.max(i,a)));t+=i}this.columnWidth[e]=i}var y=this.space,d=Math.max(y.indentLeftOdd,y.indentLeftEven);return t+Dg(y.left,d,...y.column,y.right)},C4=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,i,f=this.sizerChildren,C,w,a,T,e=0;e<this.rowCount;e++){if(T=this.rowProportions[e],i=0,T===0||s){for(var u=0;u<this.columnCount;u++)C=f[e*this.columnCount+u],C&&(C.rexSizer.hidden||(a=C.isRexSizer?Math.max(C.minHeight,C.childrenHeight):C.hasOwnProperty("minHeight")?C.minHeight:It(C),w=C.rexSizer.padding,a+=w.top+w.bottom,i=Math.max(i,a)));t+=i}this.rowHeight[e]=i}var y=this.space,d=Math.max(y.indentTopOdd,y.indentTopEven);return t+Dg(y.top,d,...y.row,y.bottom)},S4=function(s,t){var i,f=s.rexSizer;if(f.expand){var C=f.padding;i=t-C.left-C.right}return i},E4=function(s,t){var i,f=s.rexSizer;if(f.expand){var C=f.padding;i=t-C.top-C.bottom}return i},P4=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,i,f=0,C=t.length;f<C;f++)i=t[f],i&&i.isRexSizer&&s.push(i);return s},w4=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,va.call(this),this},M4=function(){for(var s,t,i,f=this.innerLeft,C=this.innerTop,w,a=C,T,e,u,y,d,l,h=this.space.column,r=this.space.row,n=this.space.indentLeftOdd,v=this.space.indentLeftEven,o=this.space.indentTopOdd,c=this.space.indentTopEven,m,p,g,x,E=0;E<this.rowCount;E++){p=this.getRowHeight(E),g=E%2?v:n,w=f+g;for(var P=0;P<this.columnCount;P++){if(m=this.getColumnWidth(P),s=this.getChildAt(P,E),!s||s.rexSizer.hidden){w+=m+h[P];continue}ma.call(this,s),d=this.getExpandedChildWidth(s,m),l=this.getExpandedChildHeight(s,p),s.isRexSizer?(s.runLayout(this,d,l),Cd(s,this)):Pi(s,d,l),t=s.rexSizer,i=t.padding,T=w+i.left,u=m-i.left-i.right,x=P%2?c:o,e=a+x+i.top,y=p-i.top-i.bottom,ga.call(this,s,T,e,u,y,t.align),w+=m+h[P]}a+=p+r[E]}},b4=function(t){var t=dd.call(this,t);if(this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var f=t-this.getChildrenWidth(!1);f>=0&&(this.proportionWidthLength=f/i)}else this.proportionWidthLength=0}return t},A4=function(t){var t=fd.call(this,t);if(this.proportionHeightLength===void 0){var i=this.totalRowProportions;if(i>0){var f=t-this.getChildrenHeight(!1);f>=0&&(this.proportionHeightLength=f/i)}else this.proportionHeightLength=0}return t},R4=function(s){var t,i,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(f=this.getColumnWidth(parseInt(C)%this.columnCount),i=this.getExpandedChildWidth(t,f),i=t.resolveWidth(i),t.resolveChildrenWidth(i))},O4=function(s){var t,i,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(f=this.getColumnWidth(parseInt(C)%this.columnCount),i=this.getExpandedChildWidth(t,f),t.isRexSizer&&(i=t.resolveWidth(i)),t.runWidthWrap(i));return this};const L4=Phaser.Utils.Objects.IsPlainObject,zr=Phaser.Utils.Objects.GetValue,vv=Phaser.Display.Align.CENTER;var pv=function(s,t,i,f,C){if(typeof s=="number"||typeof t=="number")if(s===void 0){for(var w,a=0;a<f;a++)if(w=t*f+a,!i[w])return w}else if(t===void 0){for(var w,a=0;a<C;a++)if(w=a*f+s,!i[w])return w}else{var w=t*f+s;if(!i[w])return w}else if(t===!0){for(var w,a=0;a<f;a++)for(var T=0;T<C;T++)if(w=T*f+a,!i[w])return w}else for(var a=0,e=i.length;a<e;a++)if(!i[a])return a;return null},F4=function(s,t,i,f,C,w,a){if(da.call(this,s),L4(t)){var e=t;t=zr(e,"column",void 0),i=zr(e,"row",void 0),f=zr(e,"align",vv),C=zr(e,"padding",0),w=zr(e,"expand",!1),a=zr(e,"key",void 0)}var T=pv(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(T===null){if(typeof t=="number"&&typeof i=="number")return this;i===!0||typeof i=="number"?this.addEmptyColumn():this.addEmptyRow(),T=pv(t,i,this.sizerChildren,this.columnCount,this.rowCount)}typeof f=="string"&&(f=dn[f]),f===void 0&&(f=vv),C===void 0&&(C=0),w===void 0&&(w=!0);var e=this.getSizerConfig(s);return e.align=f,e.padding=fn(C),e.expand=w,this.sizerChildren[T]=s,a!==void 0&&this.addChildrenMap(a,s),this};const D4={add:F4};var Kr=function(s,t,i,f){i===void 0&&(i=0),f===void 0&&(f=s.length-1);for(var C=i;C<=f;C++)s[C]=t;return s};const B4={remove(s,t){if(this.getParentSizer(s)!==this)return this;var i=this.sizerChildren.indexOf(s);return i!==-1&&(this.sizerChildren[i]=null),fa.call(this,s,t),this},removeAt(s,t,i){var f=this.getChildAt(s,t);return f&&this.remove(f,i),this},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];!i||this.remove(i,s)}return this},clear(s){return Kr(this.sizerChildren,null),rh.call(this,s),this}},mv=Phaser.Utils.Objects.GetValue;var I4=function(s,t,i,f,C){if(i===void 0&&(i=0),f===void 0&&(f=0),this.columnCount=s,this.rowCount=t,this.gridCount=s*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=s*t,Kr(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=s,typeof i=="number")Kr(this.columnProportions,i);else for(var w=0;w<s;w++)this.columnProportions[w]=i[w]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof f=="number")Kr(this.rowProportions,f);else for(var w=0;w<t;w++)this.rowProportions[w]=f[w]||0;this.columnWidth=[],this.columnWidth.length=s,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=s-1;var a=mv(C,"column",0);if(typeof a=="number")Kr(this.space.column,a);else for(var w=0,T=this.space.column.length;w<T;w++)this.space.column[w]=a[w]||0;this.space.row=[],this.space.row.length=t-1;var e=mv(C,"row",0);if(typeof e=="number")Kr(this.space.row,e);else for(var w=0,T=this.space.row.length;w<T;w++)this.space.row[w]=e[w]||0;return this},Bg=function(s,t,i){t===void 0&&(t=this.rowProportions[0]||0),i===void 0&&(i=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var f=[s*this.columnCount,0],C=0;C<this.columnCount;C++)f.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,f),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(s,0,i),this},G4=function(s,t){return Bg.call(this,this.rowCount,s,t),this},Ig=function(s,t,i){t===void 0&&(t=this.columnProportions[0]||0),i===void 0&&(i=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var f=this.rowCount-1;f>=0;f--){var C=f*this.columnCount+s;this.sizerChildren.splice(C,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(s,0,i),this},N4=function(s,t){return Ig.call(this,this.columnCount,s,t),this},Gg={getChildrenWidth:T4,getChildrenHeight:C4,getExpandedChildWidth:S4,getExpandedChildHeight:E4,getChildrenSizers:P4,preLayout:w4,layoutChildren:M4,resolveWidth:b4,resolveHeight:A4,resolveChildrenWidth:R4,runWidthWrap:O4,resetGrid:I4,inseryEmptyRow:Bg,addEmptyRow:G4,insertEmptyColumn:Ig,addEmptyColumn:N4};Object.assign(Gg,D4,B4);var k4=function(){for(var s=0,t,i=0;i<this.columnCount;i++)t=this.columnProportions[i],t>0&&(s+=t);return s},V4=function(){for(var s=0,t,i=0;i<this.rowCount;i++)t=this.rowProportions[i],t>0&&(s+=t);return s};const to=Phaser.Utils.Objects.IsPlainObject,Ut=Phaser.Utils.Objects.GetValue;class cn extends Sr{constructor(t,i,f,C,w,a,T,e,u,y){to(i)?(y=i,i=Ut(y,"x",0),f=Ut(y,"y",0),C=Ut(y,"width",void 0),w=Ut(y,"height",void 0),a=Ut(y,"column",y.col||0),T=Ut(y,"row",0),e=Ut(y,"columnProportions",0),u=Ut(y,"rowProportions",0)):to(C)?(y=C,C=Ut(y,"width",void 0),w=Ut(y,"height",void 0),a=Ut(y,"column",y.col||0),T=Ut(y,"row",0),e=Ut(y,"columnProportions",0),u=Ut(y,"rowProportions",0)):to(a)?(y=a,a=Ut(y,"column",y.col||0),T=Ut(y,"row",0),e=Ut(y,"columnProportions",0),u=Ut(y,"rowProportions",0)):to(e)&&(y=e,e=Ut(y,"columnProportions",0),u=Ut(y,"rowProportions",0)),super(t,i,f,C,w,y),this.type="rexGridSizer",this.resetGrid(a,T,e,u,Ut(y,"space",void 0)),this.setIndentLeft(Ut(y,"space.indentLeftOdd",0),Ut(y,"space.indentLeftEven",0)),this.setIndentTop(Ut(y,"space.indentTopOdd",0),Ut(y,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var d=Ut(y,"createCellContainerCallback");if(d)for(var f=0,l=this.rowCount;f<l;f++)for(var i=0,h=this.columnCount;i<h;i++){var r={column:i,row:f},n=d(t,i,f,r);n&&this.add(n,r)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIndentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setColumnProportion(t,i){return t>=this.columnProportions.length?this:(this.columnProportions[t]=i,this)}setRowProportion(t,i){return t>=this.rowProportions.length?this:(this.rowProportions[t]=i,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=k4.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=V4.call(this)),this._totalRowProportions}getChildAt(t,i){return this.sizerChildren[i*this.columnCount+t]}childToGridIndex(t,i){if(!t)return null;var f=this.sizerChildren.indexOf(t);return f===-1?null:(i===void 0&&(i={}),i.x=f%this.columnCount,i.y=Math.floor(f/this.columnCount),i)}getColumnWidth(t){var i=this.columnProportions[t],f=i===0?this.columnWidth[t]:i*this.proportionWidthLength;return f}getRowHeight(t){var i=this.rowProportions[t],f=i===0?this.rowHeight[t]:i*this.proportionHeightLength;return f}}Object.assign(cn.prototype,Gg);var U4=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},z4=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},X4=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,i,f=0,C=t.length;f<C;f++)i=t[f],i!==`
`&&i.isRexSizer&&s.push(i);return s},Y4=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,va.call(this),this},W4=function(){for(var s=this.innerWidth,t=this.justifyPercentage,i=this.space.item,f=this.space.line,C=this.space.indentLeftOdd,w=this.space.indentLeftEven,a=this.space.indentTopOdd,T=this.space.indentTopEven,e,u,y,d=0,l,h,r=this.innerLeft,n=this.innerTop,v,o,c,m,p=this.widthWrapResult.lines,g,x,E,P,S=n,M=0,b=p.length;M<b;M++){switch(g=p[M],x=g.children,this.rtl&&x.reverse(),l=M%2?w:C,P=r+l,E=s-g.width,this.align){case 0:break;case 1:P+=E;break;case 2:P+=E/2;break;case 3:d=bl(s,E,t,x.length);break;case 4:d=bl(s,E,t,x.length),d===0&&(P+=E);break;case 5:d=bl(s,E,t,x.length),d===0&&(P+=E/2);break}for(var A=!0,L=0,R=x.length;L<R;L++)e=x[L],!e.rexSizer.hidden&&(u=e.rexSizer,y=u.padding,ma.call(this,e),v=P+y.left,A?A=!1:v+=i,h=L%2?T:a,o=S+h+y.top,c=Vt(e),m=It(e),P=v+c+y.right+d,ga.call(this,e,v,o,c,m,u.align));S+=g.height+f}},bl=function(s,t,i,f){return t/s<=i?t/(f-1):0},H4=function(s,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var i=this.sizerChildren,f=this.space.item,C=this.space.line,w=this.space.indentLeftOdd,a=this.space.indentLeftEven,T=this.space.indentTopOdd,e=this.space.indentTopEven,u,y,d,l=0,h,r=t.lines,n=void 0,v,o=0,c=i.length;o<c;o++){if(u=i[o],u===`
`)u=void 0,y=0,v=!0;else{if(u.rexSizer.hidden)continue;u.isRexSizer&&u.layout(),y=$4(u),v=l<y||n===void 0}if(v){n&&(n.width=s-(l+f),t.width=Math.max(t.width,n.width),t.height+=n.height+C),n={children:[],height:0},r.push(n);var h=r.length%2?w:a;l=s-h}l-=y+f,u&&(n.children.push(u),d=K4(u),n.height=Math.max(n.height,d))}return n&&(n.width=s-(l+f),t.width=Math.max(t.width,n.width),t.height+=n.height),t.height+=Math.max(T,e),t},$4=function(s){var t=s.rexSizer.padding;return Vt(s)+t.left+t.right},K4=function(s){var t=s.rexSizer.padding;return It(s)+t.top+t.bottom},j4=function(s){var t=s-this.space.left-this.space.right;this.widthWrapResult=H4.call(this,t,this.widthWrapResult),ig.call(this,s)};const gv=Phaser.Math.Distance.Between;var J4=function(s,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var f=-1,C=1/0,w=0,a=i.length;w<a;w++){var T=i[w];if(!(Math.abs(T.centerY-t)>T.height/2)){var u=gv(T.left,T.centerY,s,t);C>u&&(C=u,f=w);var e=i[w+1];if(!(e&&e.y===T.y)){var u=gv(T.right,T.centerY,s,t);C>u&&(C=u,f=w+1)}}}return f};const Z4=Phaser.Utils.Objects.IsPlainObject,Al=Phaser.Utils.Objects.GetValue,Q4=Phaser.Display.Align.CENTER;var Rl=function(s,t,i,f){if(s===`
`)return this.addNewLine(),this;if(da.call(this,s),Z4(t)){var C=t;t=Al(C,"padding",0),i=Al(C,"key",void 0),f=Al(C,"index",void 0)}t===void 0&&(t=0);var C=this.getSizerConfig(s);return C.align=Q4,C.padding=fn(t),f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(f,0,s),i!==void 0&&this.addChildrenMap(i,s),this};const q4={add(s,t,i){if(hs(s))for(var f=s,C=0,w=f.length;C<w;C++)Rl.call(this,f[C],t);else Rl.call(this,s,t,i);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(s,t,i,f){return Rl.call(this,t,i,f,s),this},insertAtPosition(s,t,i,f,C){var w=J4.call(this,s,t);return w===-1&&(w=void 0),this.insert(w,i,f,C),this}},_4=Phaser.Utils.Array.Remove,tF={remove(s,t){return this.getParentSizer(s)!==this?this:(_4(this.sizerChildren,s),fa.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,rh.call(this,s),this}};var Ng={getChildrenWidth:U4,getChildrenHeight:z4,getChildrenSizers:X4,preLayout:Y4,layoutChildren:W4,runWidthWrap:j4};Object.assign(Ng,q4,tF);var eF=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,i,f,C=0,w=s.length;C<w;C++)i=s[C],i!==`
`&&(f=this.getChildWidth(i),t=Math.max(f,t));return t},iF=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,i,f,C=0,w=s.length;C<w;C++)i=s[C],i!==`
`&&(f=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:It(i),t=Math.max(f,t));return t};const yv=Phaser.Utils.Objects.IsPlainObject,Re=Phaser.Utils.Objects.GetValue;class ya extends Sr{constructor(t,i,f,C,w,a){yv(i)?(a=i,i=Re(a,"x",0),f=Re(a,"y",0),C=Re(a,"width",void 0),w=Re(a,"height",void 0)):yv(C)&&(a=C,C=Re(a,"width",void 0),w=Re(a,"height",void 0)),super(t,i,f,C,w,a),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(Re(a,"orientation",0)),this.setItemSpacing(Re(a,"space.item",0)),this.setLineSpacing(Re(a,"space.line",0)),this.setIntentLeft(Re(a,"space.indentLeftOdd",0),Re(a,"space.indentLeftEven",0)),this.setIntentTop(Re(a,"space.indentTopOdd",0),Re(a,"space.indentTopEven",0)),this.setAlign(Re(a,"align",0)),this.setJustifyPercentage(Re(a,"justifyPercentage",.25)),this.setRTL(Re(a,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=ah(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIntentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setAlign(t){return typeof t=="string"&&(t=sF[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=eF.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=iF.call(this)),this._maxChildHeight}}const sF={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(ya.prototype,Ng);var hn=function(s,t,i,f){var C=new yu(t,i,f);if(s&&!s.isRexSizer){var w=C.createGeometryMask();s.setMask(w),this.once("destroy",function(){s.setMask(),w.destroy()})}return this.pin(C),C},eo=function(s,t,i){if(!!s){var f=t==null,C=i==null;return f&&C||(f||(s.displayWidth=t),C||(s.displayHeight=i),f&&(s.scaleX=s.scaleY),C&&(s.scaleY=s.scaleX)),s}},rF=function(s){s===void 0?s={}:typeof s=="string"&&(s={text:s});var t=s.text||"";this.setText(t);var i=this.childrenMap.icon;if(i){s.icon===void 0?this.hide(i):this.show(i);var f=s.iconSize;f&&(this.setChildDisplaySize(i,f,f),this.iconWidth!==void 0&&this.setIconSize(f)),this.setIconTexture(s.icon,s.iconFrame)}var C=this.childrenMap.action;if(C){s.action===void 0?this.hide(C):this.show(C);var w=s.actionSize;w&&(this.setChildDisplaySize(C,w,w),this.actionWidth!==void 0&&this.setActionSize(w)),this.setActionTexture(s.action,s.actionFrame)}return this},nF={resetDisplayContent:rF};const ye=Phaser.Utils.Objects.GetValue;class vn extends kt{constructor(t,i){super(t,i),this.type="rexLabel";var f=ye(i,"background",void 0),C=ye(i,"icon",void 0),w=ye(i,"iconMask",void 0),a=ye(i,"text",void 0),T=ye(i,"action",void 0),e=ye(i,"actionMask",void 0),u=ye(i,"align",void 0);if(f&&this.addBackground(f),(u==="right"||u==="bottom"||u==="center")&&this.addSpace(),C){var y=ye(i,"space.icon",0),d;this.orientation===0?(a||T)&&(d={right:y}):(a||T)&&(d={bottom:y});var l=ye(i,"squareFitIcon",!1)?1:0;if(this.add(C,{proportion:0,padding:d,fitRatio:l}),w&&(w=hn.call(this,C,C,1)),!l){var h=ye(i,"iconSize",void 0);this.setIconSize(ye(i,"iconWidth",h),ye(i,"iconHeight",h))}}if(a){var r=ye(i,"space.text",0),n=ye(i,"expandTextWidth",!1),v=ye(i,"expandTextHeight",!1),o,d,c;this.orientation===0?(o=n?1:0,T&&(d={right:r}),c=v):(o=v?1:0,T&&(d={bottom:r}),c=n),this.add(a,{proportion:o,expand:c,padding:d})}if(T){var l=ye(i,"squareFitAction",!1)?1:0;if(this.add(T,{proportion:0,fitRatio:l}),e&&(e=hn.call(this,T,T,1)),!l){var m=ye(i,"actionSize");this.setActionSize(ye(i,"actionWidth",m),ye(i,"actionHeight",m))}}u==="center"&&this.addSpace(),this.addChildrenMap("background",f),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",w),this.addChildrenMap("text",a),this.addChildrenMap("action",T),this.addChildrenMap("actionMask",e)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var i=this.childrenMap.text;i!==void 0&&i.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setIconTexture(t,i){var f=this.childrenMap.icon;return f===void 0?this:(f.setTexture(t,i),this.iconWidth!==void 0&&(eo(f,this.iconWidth,this.iconHeight),this.resetChildScaleState(f)),this)}setTexture(t,i){return this.setIconTexture(t,i),this}setIconSize(t,i){return i===void 0&&(i=t),this.iconWidth=t,this.iconHeight=i,this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}setActionTexture(t,i){var f=this.childrenMap.action;return f===void 0?this:(f.setTexture(t,i),this.actionWidth!==void 0&&(eo(f,this.actionWidth,this.actionHeight),this.resetChildScaleState(f)),this)}get actionTexture(){var t=this.childrenMap.action;if(t!==void 0)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t!==void 0)return t.frame}setActionSize(t,i){return i===void 0&&(i=t),this.actionWidth=t,this.actionHeight=i,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&eo(t,this.iconWidth,this.iconHeight);var i=this.childrenMap.action;i&&this.actionWidth!==void 0&&eo(i,this.actionWidth,this.actionHeight),super.preLayout()}runLayout(t,i,f){if(this.ignoreLayout)return this;super.runLayout(t,i,f);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var w=this.childrenMap.actionMask;return w&&(w.setPosition(),this.resetChildPositionState(w)),this}resize(t,i){super.resize(t,i);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(vn.prototype,nF);var is=function(s,t){var i=new ln(s,t);return s.add.existing(i),i},aF=function(s,t){var i=is(s,t);return i};const Xr=Phaser.Utils.Objects.GetValue,oF=Phaser.GameObjects.Text,hF=Phaser.GameObjects.BitmapText;var lF=function(s,t){var i=Xr(t,"$type");i===void 0&&Xr(t,"key")&&(i="bitmaptext");var f;switch(i){case"bitmaptext":var C=Xr(t,"key"),w=Xr(t,"size");w===void 0&&(w=Xr(t,"fontSize")),f=new hF(s,0,0,C,"",w);var a=Xr(t,"color");a!==void 0&&f.setTint(a);break;case"text":f=new oF(s,0,0,"",t);break;default:f=new _0(s,0,0,"",t);break}return s.add.existing(f),f};const uF=Phaser.GameObjects.BitmapText;var kg=function(s){return s instanceof uF};const dF=Phaser.GameObjects.Text;var Pd=function(s){return s instanceof dF},fF=function(s){var t=function(i){var f=s.padding,C=i-f.left-f.right,w=s.style;return Pd(s)?(w.wordWrapWidth=C,w.maxLines=0):(w.wrapMode===0&&(w.wrapMode=1),w.wrapWidth=C,w.maxLines=0),w.fixedWidth=i,w.fixedHeight=0,s.updateText(),s.minHeight=s.height,s};return t},cF=function(s){var t=function(i){return s.setFixedSize(i,0).runWordWrap(),s.minHeight=s.height,s};return t},vF=function(s){var t=function(i){return s.setMaxWidth(i),s.minHeight=s.height,s};return t},pF=function(s){return s instanceof Jo},mF=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=pF(s)?cF(s):kg(s)?vF(s):fF(s),s};const gF=Phaser.GameObjects.Image;var Bo=function(s,t){var i=new gF(s,0,0,"");return s.add.existing(i),i};const On=Phaser.Utils.Objects.GetValue;var wd=function(s,t,i){t=t?Si(t):{};var f=On(i,"background",aF),C=On(i,"text",lF),w=On(i,"icon",Bo),a=On(i,"action",Bo);if(f?t.background=f(s,t.background):delete t.background,C){var T=On(t,"wrapText",!1);T&&(T===!0&&(T="word"),hr(t,"text.wrap.mode",T),t.expandTextWidth=!0),t.text=C(s,t.text),T&&(t.text=mF(t.text))}else delete t.text;return w&&t.icon!==null?t.icon=w(s,t.icon):delete t.icon,a&&t.action!==null?t.action=a(s,t.action):delete t.action,t};class yF extends vn{constructor(t,i,f){i=wd(t,i,f),super(t,i),this.type="rexSimpleLabel"}}Phaser.Utils.Objects.GetValue;const Nt=Phaser.Utils.Objects.GetValue,xF=Phaser.Utils.Objects.IsPlainObject;var TF=function(s,t){var i=Nt(t,"background",void 0),f=Nt(t,"icon",void 0),C=Nt(t,"iconMask",void 0),w=Nt(t,"nameText",void 0),a=Nt(t,"valueText",void 0),T=Nt(t,"bar",void 0),e=Nt(t,"action",void 0),u=Nt(t,"actionMask",void 0);xF(T)&&(T=new sO(s,T),s.add.existing(T),w&&s.children.moveBelow(T,w),a&&s.children.moveBelow(T,a));var y=w||a||T;if(i&&this.addBackground(i),f){var d=void 0;this.orientation===0?(y||e)&&(d={right:Nt(t,"space.icon",0),top:Nt(t,"space.iconTop",0),bottom:Nt(t,"space.iconBottom",0)}):(y||e)&&(d={bottom:Nt(t,"space.icon",0),left:Nt(t,"space.iconLeft",0),right:Nt(t,"space.iconRight",0)}),this.add(f,{proportion:0,padding:d}),C&&(C=hn.call(this,f,f,1))}if(y){var l=new kt(s,{orientation:1}),h;if(w||a){if(h=new kt(s,{orientation:0}),w){w.text===""&&w.setText(" "),w.setOrigin(0,w.originY);var d={left:Nt(t,"space.name",0)};h.add(w,{padding:d})}if(a){a.text===""&&a.setText(" "),a.setOrigin(1,a.originY),h.addSpace();var d={right:Nt(t,"space.value",0)};h.add(a,{padding:d}),this.setValueTextFormatCallback(Nt(t,"valueTextFormatCallback",CF),Nt(t,"valueTextFormatCallbackScope",void 0))}l.add(h,{expand:!0})}if(T){var d={top:h?Nt(t,"space.bar",0):0,bottom:Nt(t,"space.barBottom",0),left:Nt(t,"space.barLeft",0),right:Nt(t,"space.barRight",0)};l.add(T,{expand:!0,padding:d})}var d=void 0;e&&(d={right:Nt(t,"space.text",0)});var r=Nt(t,"align.text","bottom");this.add(l,{proportion:1,align:r,padding:d})}if(e){var d;this.orientation===0?d={top:Nt(t,"space.actionTop",0),bottom:Nt(t,"space.actionBottom",0)}:d={left:Nt(t,"space.actionLeft",0),right:Nt(t,"space.actionRight",0)},this.add(e,{proportion:0,padding:d}),u&&(u=hn.call(this,e,e,1))}this.addChildrenMap("background",i),this.addChildrenMap("icon",f),this.addChildrenMap("iconMask",C),this.addChildrenMap("name",w),this.addChildrenMap("value",a),this.addChildrenMap("bar",T),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",u)},CF=function(s,t,i){return s.toString()};const SF=Phaser.Math.Clamp,EF={setValueTextFormatCallback(s,t){return this.valueTextFormatCallback=s,this.valueTextFormatCallbackScope=t,this},getFormatValueText(s,t,i){s===void 0&&(s=this.value),t===void 0&&(t=this.minValue),i===void 0&&(i=this.maxValue);var f;return this.valueTextFormatCallbackScope?f=this.valueTextFormatCallback(s,t,i):f=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,s,t,i),f},updateValueText(s,t,i){var f=this.childrenMap.value;return f&&this.valueTextFormatCallback&&(f.setText(this.getFormatValueText(s,t,i)),f.layout&&f.layout()),this},setValue(s,t,i){return s=SF(s,t,i),this.value=s,this.minValue=t,this.maxValue=i,this.updateValueText(s,t,i),this.setBarValue(s,t,i),this}};class PF extends kt{constructor(t,i){super(t,i),this.type="rexNameValueLabel",TF.call(this,t,i)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var i=this.childrenMap.name;i!==void 0&&i.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var i=this.childrenMap.value;i!==void 0&&i.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var i=this.childrenMap.bar;i!==void 0&&i.setValue(t)}setBarValue(t,i,f){var C=this.childrenMap.bar;return C===void 0?this:(C.setValue(t,i,f),this)}easeBarValueTo(t,i,f){var C=this.childrenMap.bar;return C===void 0?this:(C.easeValueTo(t,i,f),this)}setTexture(t,i){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,i),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,i,f){if(this.ignoreLayout)return this;super.runLayout(t,i,f);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var w=this.childrenMap.actionMask;return w&&(w.setPosition(),this.resetChildPositionState(w)),this}resize(t,i){super.resize(t,i);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(PF.prototype,EF);const io=kt.prototype.add,xv=kt.prototype.addSpace;var Ol=function(s){var t=!s.isRexSpace,i=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&xv.call(this),io.call(this,s,{proportion:i,expand:!0});var C=!this.buttonsExpand&&this.buttonsAlign==="center";C&&xv.call(this),this.hasTailSpace=C}else io.call(this,s,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var w=this.sizerChildren.length-1;io.call(this,s,{index:w,proportion:i,expand:!0})}else io.call(this,s,{proportion:i,expand:!0});return t&&this.buttonGroup.add(s),this};const wF={addButton(s){if(hs(s))for(var t=s,i=0,f=t.length;i<f;i++)Ol.call(this,t[i]);else Ol.call(this,s);return this},addButtons(s){for(var t=0,i=s.length;t<i;t++)Ol.call(this,s[t]);return this}},MF=kt.prototype.remove,bF=kt.prototype.clear;var Ll=function(s,t){return this.getParentSizer(s)!==this?this:(this.buttonGroup.remove(s),MF.call(this,s,t),this)};const AF={remove(s,t){if(hs(s))for(var i=s,f=0,C=i.length;f<C;f++)Ll.call(this,i[f],t);else Ll.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,bF.call(this,s),this},removeButton(i,t){var i=this.getButton(i);return i?(this.remove(i,t),this):this},clearButtons(s){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Ll.call(this,t[i],s);return this}},RF={add(s){if(this.buttons.push(s),this.buttonsType){var t=s.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=s,this.dataManager.set(t,void 0).set(t,!1)}return s._buttonBehavior=new Fs(s,this.clickConfig),s._buttonBehavior.on("click",function(i,f,C,w){this.fireEvent("button.click",f,C,w)},this).on("enable",function(i,f){this.fireEvent("button.enable",f)},this).on("disable",function(i,f){this.fireEvent("button.disable",f)},this),s.on("pointerover",function(i,f,C,w){this.fireEvent("button.over",s,i,w)},this).on("pointerout",function(i,f){this.fireEvent("button.out",s,i,f)},this),this},addMultiple(s){for(var t=0,i=s.length;t<i;t++)this.add(gameObject[t]);return this}},OF=Phaser.Utils.Array.Remove,LF={remove(s){if(OF(this.buttons,s),this.buttonsType){var t=s.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var s in this.buttonMap)delete this.buttonMap[s],this.dataManager.remove(s);return this}};var FF=function(s,t,...i){var f;if(typeof t=="number"){if(f=t,t=this.buttons[f],!t)return}else if(f=this.buttons.indexOf(t),f===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(s,t,f,...i),this.groupName!==void 0?this.eventEmitter.emit(s,t,this.groupName,f,...i):this.eventEmitter.emit(s,t,f,...i)};const jr=Phaser.Utils.Objects.GetValue;var Tv=function(s){var t=jr(s,"dataManager",void 0);if(t===void 0){var i=this.parent;i.setDataEnabled(),t=i.data}this.dataManager=t;var f,C;f=jr(s,"setValueCallback",void 0),C=jr(s,"setValueCallbackScope",void 0),f===void 0&&(f=jr(s,"setButtonStateCallback",void 0),C=jr(s,"setButtonStateCallbackScope",void 0)),this.setValueCallback=f,this.setValueCallbackScope=C,t.events.on("changedata",function(w,a,T,e){var u=this.buttonMap[a];if(!!u){var y=this.setValueCallback,d=this.setValueCallbackScope;y&&(d?y.call(d,u,T,e):y(u,T,e)),this.fireEvent("button.statechange",u,T,e)}},this)};const DF={setButtonsType(s){s===void 0&&(s={});var t=jr(s,"buttonsType",s.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(s);break;case"checkboxes":this.setCheckboxesType(s);break}return this},setRadioType(s){Tv.call(this,s);var t=void 0,i=this.parent,f=this.buttons,C=this.dataManager;return Object.defineProperty(i,"value",{get:function(){return t},set:function(w){w!==t&&(t=w,f.forEach(function(a){var T=a.name,e=C.get(T);T===w?e||C.set(T,!0):e&&C.set(T,!1)}))},enumerable:!0,configurable:!0}),i.on("button.click",function(w){i.value=w.name}),this},setCheckboxesType(s){Tv.call(this,s);var t=this.parent,i=this.dataManager;return t.on("button.click",function(f){i.toggle(f.name)}),this},clearAllButtonsState(){for(var s in this.buttonMap)this.dataManager.set(s,!1);return this},getAllButtonsState(){var s={};for(var t in this.buttonMap)s[t]=this.dataManager.get(t);return s},setSelectedButtonName(s){return this.parent.value=s,this},getSelectedButtonName(){return this.parent.value},setButtonState(s,t){return t===void 0&&(t=!0),this.dataManager.set(s,t),this},getButtonState(s){return this.dataManager.get(s)}};var BF=function(s,t){if(s)if(hs(s)){for(var i,f=0,C=s.length;f<C;f++)if(i=Cv(s[f],t),i)return i}else{var i;for(var w in s)if(i=Cv(s[w],t),i)return i}else return null},Cv=function(s,t){return s?s.hasOwnProperty("name")?s.name===t?s:null:GetElementByName(s,t):null};const oh={getButton(s){var t=this.buttons,i,f=typeof s;switch(f){case"number":i=t[s];break;case"string":i=BF(t,s);break;default:i=s,t.indexOf(i)===-1&&(i=void 0);break}return i},setButtonEnable(s,t){var i=this.buttons;if(s===void 0||typeof s=="boolean"){t=s;for(var f=0,C=i.length;f<C;f++)i[f]._buttonBehavior.setEnable(t)}else this.getButton(s)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(s){var t=this.buttons;if(s===void 0||typeof s=="boolean")for(var i=0,f=t.length;i<f;i++)t[i]._buttonBehavior.toggleEnable();else this.getButton(s)._buttonBehavior.toggleEnable();return this},getButtonEnable(s){return s===void 0&&(s=0),this.getButton(s)._buttonBehavior.enable},emitButtonClick(s){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",s),this},showButton(s){return lr(this.getButton(s)),this},hideButton(s){return ur(this.getButton(s)),this},isButtonShown(s){return rg(this.getButton(s)),this},forEachButtton(s,t){for(var i=this.buttons,f=0,C=i.length;f<C;f++)t?s.call(t,i[f],f,i):s(i[f],f,i);return this}};class hh{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var IF={fireEvent:FF};Object.assign(hh.prototype,RF,LF,DF,oh,IF);const Md={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(s){return this.buttonGroup.setSelectedButtonName(s),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(s,t){return this.buttonGroup.setButtonState(s,t),this},getButtonState(s){return this.buttonGroup.getButtonState(s)}},sr=Phaser.Utils.Objects.GetValue;class Be extends kt{constructor(t,i){i===void 0&&(i={});var f=i.space;typeof f=="number"&&(i.space={item:f}),super(t,i),this.type="rexButtons",this.buttonGroup=new hh({parent:this,eventEmitter:sr(i,"eventEmitter",this),groupName:sr(i,"groupName",void 0),clickConfig:sr(i,"click",void 0)}).setButtonsType(i);var C=sr(i,"background",void 0),w=sr(i,"buttons",void 0);this.buttonsExpand=sr(i,"expand",!1),this.buttonsAlign=sr(i,"align",void 0),C&&this.addBackground(C),w&&this.addButtons(w),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Be.prototype,wF,AF,oh,Md);const GF=cn.prototype.add,NF={addButton(s,t,i){return GF.call(this,s,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(s),this},addButtons(s,t){for(var i=0,f=s;i<f;i++)this.addButton(s[i],void 0,t);return this}},kF=cn.prototype.remove,VF=cn.prototype.clear;var Fl=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),kF.call(this,i,t),this):this};const UF={remove(s,t){if(hs(s))for(var i=s,f=0,C=i.length;f<C;f++)Fl.call(this,i[f],t);else Fl.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,VF.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Fl.call(this,t[i],s);return this}},Li=Phaser.Utils.Objects.GetValue;class Vg extends cn{constructor(t,i){i===void 0&&(i={});var f=Li(i,"row",0),C=Li(i,"column",i.col||0),w=Li(i,"createCellContainerCallback"),a=Li(i,"buttons",void 0),T=Li(i,"expand",!0),e=T?1:0;if(w&&(i.createCellContainerCallback=void 0),a!==void 0){f=Math.max(f,a.length);for(var u=0,y=a.length;u<y;u++)C=Math.max(C,a[u].length)}i.row=f,i.column=C,i.columnProportions=e,i.rowProportions=e,super(t,i),this.type="rexGridButtons",this.buttonGroup=new hh({parent:this,eventEmitter:Li(i,"eventEmitter",this),groupName:Li(i,"groupName",void 0),clickConfig:Li(i,"click",void 0)}).setButtonsType(i);var d=Li(i,"background",void 0);if(this.buttonsExpand=T,Li(i,"space",void 0),d&&this.addBackground(d),a)for(var l,h,r=0,n=a.length;r<n;r++){l=a[r];for(var v=0,o=l.length;v<o;v++)h=l[v],h&&this.addButton(h,v,r)}else if(w)for(var c=0;c<f;c++)for(var m=0;m<C;m++){var h=w(t,m,c);h&&this.addButton(h,m,c)}this.addChildrenMap("background",d),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Vg.prototype,NF,UF,oh,Md);const Ug=ya.prototype.add;var so=function(s){return Ug.call(this,s),this.buttonGroup.add(s),this};const zF={addButton(s){if(hs(s))for(var t=s,i=0,f=t.length;i<f;i++)so.call(this,t[i]);else so.call(this,s);return this},addButtons(s){if(hs(s[0]))for(var t=s,i,f=0,C=t.length-1;f<=C;f++){i=t[f];for(var w=0,a=i.length;w<a;w++)so.call(this,i[w]);f>C&&Ug.addNewLine(this)}else for(var w=0,a=s.length;w<a;w++)so.call(this,s[w]);return this}},XF=ya.prototype.remove,YF=ya.prototype.clear;var Dl=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),XF.call(this,i,t),this):this};const WF={remove(s,t){if(hs(s))for(var i=s,f=0,C=i.length;f<C;f++)Dl.call(this,i[f],t);else Dl.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,YF.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Dl.call(this,t[i],s);return this}},Yr=Phaser.Utils.Objects.GetValue;class _n extends ya{constructor(t,i){i===void 0&&(i={});var f=i.space;typeof f=="number"&&(i.space={item:f,line:f}),super(t,i),this.type="rexFixWidthButtons",this.buttonGroup=new hh({parent:this,eventEmitter:Yr(i,"eventEmitter",this),groupName:Yr(i,"groupName",void 0),clickConfig:Yr(i,"click",void 0)}).setButtonsType(i);var C=Yr(i,"background",void 0),w=Yr(i,"buttons",void 0);this.buttonsAlign=Yr(i,"align",void 0),C&&this.addBackground(C),w&&this.addButtons(w),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(_n.prototype,zF,WF,oh,Md);const HF={setAccept(s){return this.childrenMap.fileChooser.setAccept(s),this},setMultiple(s){return this.childrenMap.fileChooser.setMultiple(s),this},loadFile(s,t,i,f,C){return this.childrenMap.fileChooser.loadFile(s,t,i,f,C),this},loadFilePromise(s,t,i,f){return this.childrenMap.fileChooser.loadFilePromise(s,t,i,f)}},Sv=Phaser.Utils.Objects.GetValue;class $F extends vn{constructor(t,i){super(t,i),this.type="rexFileSelectorButton";var f=new Rg(t);t.add.existing(f),this.addBackground(f),this.addChildrenMap("fileChooser",f),this.setAccept(Sv(i,"accept","")),this.setMultiple(Sv(i,"multiple",!1)),f.on("change",function(C){var w=C.files;w.length!==0&&(w=Array.from(w),this.emit("select",w,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign($F.prototype,HF);const KF={getChoice(s){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(s)},getAction(s){return this.childrenMap.actionsSizer.getButton(s)},getToolbar(s){return this.childrenMap.toolbarSizer.getButton(s)},getLeftToolbar(s){return this.childrenMap.leftToolbarSizer.getButton(s)},setChoiceEnable(s,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(s,t),this},setActionEnable(s,t){return this.childrenMap.actionsSizer.setButtonEnable(s,t),this},setToolbarEnable(s,t){return this.childrenMap.toolbarSizer.setButtonEnable(s,t),this},setLeftToolbarEnable(s,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(s,t),this},toggleChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(s),this},toggleActionEnable(s){return this.childrenMap.actionsSizer.toggleButtonEnable(s),this},toggleToolbarEnable(s){return this.childrenMap.toolbarSizer.toggleButtonEnable(s),this},toggleLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(s),this},getChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(s):!1},getActionEnable(s){return this.childrenMap.actionsSizer.getButtonEnable(s)},getToolbarEnable(s){return this.childrenMap.toolbarSizer.getButtonEnable(s)},getLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.getButtonEnable(s)},emitChoiceClick(s){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(s),this},emitActionClick(s){return this.childrenMap.actionsSizer.emitButtonClick(s),this},emitToolbarClick(s){return this.childrenMap.toolbarSizer.emitButtonClick(s),this},emitLeftToolbarClick(s){return this.childrenMap.leftToolbarSizer.emitButtonClick(s),this},showChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.showButton(s),this},showAction(s){return this.childrenMap.actionsSizer.showButton(s),this},showToolbar(s){return this.childrenMap.toolbarSizer.showButton(s),this},showLeftToolbar(s){return this.childrenMap.leftToolbarSizer.showButton(s),this},hideChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(s),this},hideAction(s){return this.childrenMap.actionsSizer.hideButton(s),this},hideToolbar(s){return this.childrenMap.toolbarSizer.hideButton(s),this},hideLeftToolbar(s){return this.childrenMap.leftToolbarSizer.hideButton(s),this},addChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.addButton(s),this},addAction(s){return this.childrenMap.actionsSizer.addButton(s),this},addToolbar(s){return this.childrenMap.toolbarSizer.addButton(s),this},addLeftToolbar(s){return this.childrenMap.leftToolbarSizer.addButton(s),this},removeChoice(s,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(s,t),this},removeAction(s,t){return this.childrenMap.actionsSizer.removeButton(s,t),this},removeToolbar(s,t){return this.childrenMap.toolbarSizer.removeButton(s,t),this},removeLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.removeButton(s,t),this},clearChoices(s){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(s),this},clearActions(s){return this.childrenMap.actionsSizer.clearButtons(s),this},clearToolbar(s){return this.childrenMap.toolbarSizer.clearButtons(s),this},clearLeftToolbar(s){return this.childrenMap.leftToolbarSizer.clearButtons(s),this},forEachChoice(s,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(s,t),this},forEachAction(s,t){return this.childrenMap.actionsSizer.forEachButtton(s,t),this},forEachToolbar(s,t){return this.childrenMap.toolbarSizer.forEachButtton(s,t),this},forEachLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.forEachButtton(s,t),this},setAllButtonsEnable(s){return s===void 0&&(s=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(s),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(s),this.childrenMap.actionsSizer&&this.setActionEnable(s),this.childrenMap.choicesSizer&&this.setChoiceEnable(s),this},getChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s?s.getAllButtonsState():{}},getChoicesButtonState(s){var t=this.childrenMap.choicesSizer;return s===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(s):!1},setChoicesButtonState(s,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(s,t),this},clearChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s&&s.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var s=this.childrenMap.choicesSizer;return s?s.getSelectedButtonName():""},setChoicesSelectedButtonName(s){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(s),this}},jF={onCreateModalBehavior(s){s.on("button.click",function(t,i,f,C,w){if(i==="actions"){var a={index:f,text:t.text,button:t,dialog:s};s.modalClose(a)}})}};var zg={};Object.assign(zg,KF,jF);const ct=Phaser.Utils.Objects.GetValue;class JF extends kt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexDialog",this.eventEmitter=ct(i,"eventEmitter",this);var f=ct(i,"background",void 0),C=ct(i,"title",void 0),w=ct(i,"toolbar",void 0),a=ct(i,"toolbarBackground",void 0),T=ct(i,"leftToolbar",void 0),e=ct(i,"leftToolbarBackground",void 0),u=ct(i,"content",void 0),y=ct(i,"description",void 0),d,l=ct(i,"choices",void 0),h=ct(i,"choicesBackground",void 0),r,n=ct(i,"actions",void 0),v=ct(i,"actionsBackground",void 0),o=ct(i,"click",void 0);f&&this.addBackground(f);var c;w&&(c=new Be(t,{groupName:"toolbar",background:a,buttons:w,orientation:0,space:{item:ct(i,"space.toolbarItem",0)},click:o,eventEmitter:this.eventEmitter}));var m;if(T&&(m=new Be(t,{groupName:"leftToolbar",background:e,buttons:T,orientation:0,space:{item:ct(i,"space.leftToolbarItem",0)},click:o,eventEmitter:this.eventEmitter})),C||w||T){var p=!!C&&ct(i,"expand.title",!0),g=ct(i,"align.title","center"),x=C&&!p&&g==="center"||!C&&(w||T),E=!x,P;E?P=new kt(t,{orientation:0}):P=new fs(t);var S=E?!0:{height:!0};if(m&&P.add(m,{align:"left",expand:S}),C){E&&!p&&g==="right"&&P.addSpace();var b={left:ct(i,"space.titleLeft",0),right:ct(i,"space.titleRight",0)},A=p?1:0;P.add(C,{align:g,proportion:A,expand:S,padding:b}),E&&!p&&g==="left"&&P.addSpace()}c&&(E&&!C&&P.addSpace(),P.add(c,{align:"right",expand:S}));var M=ct(i,"space.title",0),b;(u||y||l||n)&&(b={bottom:M});var A=ct(i,"proportion.title",0);this.add(P,{padding:b,proportion:A,expand:!0})}if(u){var L=ct(i,"align.content","center"),R=ct(i,"space.content",0),b={left:ct(i,"space.contentLeft",0),right:ct(i,"space.contentRight",0),bottom:y||l||n?R:0},A=ct(i,"proportion.content",0),O=ct(i,"expand.content",!0);this.add(u,{align:L,padding:b,proportion:A,expand:O})}if(y){var L=ct(i,"align.description","center"),D=ct(i,"space.description",0),b={left:ct(i,"space.descriptionLeft",0),right:ct(i,"space.descriptionRight",0),bottom:l||n?D:0},A=ct(i,"proportion.description",0),O=ct(i,"expand.description",!0);this.add(y,{align:L,padding:b,proportion:A,expand:O})}if(l){var B=ct(i,"choicesType","").split("-"),G=Ln(B,"wrap")?_n:Ln(B,"grid")?Vg:Be,z=Ln(B,"radio")?"radio":Ln(B,"checkboxes")?"checkboxes":void 0,X={left:ct(i,"space.choicesBackgroundLeft",0),right:ct(i,"space.choicesBackgroundRight",0),top:ct(i,"space.choicesBackgroundTop",0),bottom:ct(i,"space.choicesBackgroundBottom",0)},U=ct(i,"space.choice",0);G===Be?X.item=U:G===_n?(X.item=U,X.line=ct(i,"space.choiceLine",U)):(X.column=ct(i,"space.choiceColumn",U),X.row=ct(i,"space.choiceRow",U));var V={width:ct(i,"choicesWidth",void 0),height:ct(i,"choicesHeight",void 0),groupName:"choices",buttonsType:z,background:h,buttons:l,space:X,click:o,eventEmitter:this.eventEmitter,setValueCallback:ct(i,"choicesSetValueCallback",void 0),setValueCallbackScope:ct(i,"choicesSetValueCallbackScope",void 0)};G===Be&&(V.orientation=Ln(B,"x")?0:1),d=new G(t,V);var N=ct(i,"space.choices",0),b={left:ct(i,"space.choicesLeft",0),right:ct(i,"space.choicesRight",0),bottom:n?N:0},L=ct(i,"align.choices","center"),A=ct(i,"proportion.choices",0),O=ct(i,"expand.choices",!0);this.add(d,{align:L,padding:b,proportion:A,expand:O})}if(n){r=new Be(t,{groupName:"actions",background:v,buttons:n,orientation:0,space:{item:ct(i,"space.action",0)},expand:ct(i,"expand.actions",!1),align:ct(i,"align.actions","center"),click:o,eventEmitter:this.eventEmitter});var b={left:ct(i,"space.actionsLeft",0),right:ct(i,"space.actionsRight",0)},A=ct(i,"proportion.action",0);this.add(r,{align:"center",padding:b,proportion:A,expand:!0})}Fn(this,"click"),Fn(this,"over"),Fn(this,"out"),Fn(this,"enable"),Fn(this,"disable"),this.addChildrenMap("background",f),this.addChildrenMap("title",C),this.addChildrenMap("toolbar",w),this.addChildrenMap("leftToolbar",T),this.addChildrenMap("content",u),this.addChildrenMap("description",y),this.addChildrenMap("choices",d?d.buttons:void 0),this.addChildrenMap("actions",r?r.buttons:void 0),this.addChildrenMap("choicesSizer",d),this.addChildrenMap("actionsSizer",r),this.addChildrenMap("toolbarSizer",c),this.addChildrenMap("leftToolbarSizer",m)}}var Ln=function(s,t){return s.indexOf(t)!==-1},Ev={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},Fn=function(s,t){s.on(`button.${t}`,function(i,f,C,w,a){!Ev.hasOwnProperty(f)||s.emit(`${Ev[f]}.${t}`,i,C,w,a)})};Object.assign(JF.prototype,zg);var Xg=function(s,t,i){var f=new yF(s,t,i);return s.add.existing(f),f};const Yg={v:0,vertical:0,y:0,h:1,horizontal:1,x:1},ZF=Phaser.Utils.Objects.GetValue;var bd=function(s,t){var i=ZF(s,"scrollMode",0);return typeof i=="string"&&(i=Yg[i]),i};const Pv=Phaser.Math.Percent;var Wg=function(s,t,i){var f;return s.y===t.y?f=Pv(i.x,s.x,t.x):s.x===t.x&&(f=Pv(i.y,s.y,t.y)),f},QF=function(s,t,i){if(!!this.enable){Bl.x=t,Bl.y=i;var f,C;this.reverseAxis?(f=this.getEndPoint(),C=this.getStartPoint()):(f=this.getStartPoint(),C=this.getEndPoint()),this.value=Wg(f,C,Bl)}},Bl={},wv=function(s,t,i){if(!!this.enable&&!!s.isDown){Il.x=s.worldX,Il.y=s.worldY;var f,C;this.reverseAxis?(f=this.getEndPoint(),C=this.getStartPoint()):(f=this.getStartPoint(),C=this.getEndPoint());var w=Wg(f,C,Il);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-w)<.1?this.value=w:this.easeValueTo(w)}},Il={},Hg=function(s,t){t===void 0&&(t=qF);var i=this.childrenMap.thumb,f=i.x,C=i.y;return ua(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,s),t.x=i.x,t.y=i.y,i.x=f,i.y=C,t},qF={};const _F=Phaser.Display.Align.LEFT_CENTER,tD=Phaser.Display.Align.TOP_CENTER;var eD=function(s){if(s===void 0&&(s=iD),this.childrenMap.thumb){var t=this.orientation===0?_F:tD;Hg.call(this,t,s)}else this.orientation===0?(s.x=this.innerLeft+1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerTop+1);return s},iD={};const sD=Phaser.Display.Align.RIGHT_CENTER,rD=Phaser.Display.Align.BOTTOM_CENTER;var nD=function(s){if(s===void 0&&(s=aD),this.childrenMap.thumb){var t=this.orientation===0?sD:rD;Hg.call(this,t,s)}else this.orientation===0?(s.x=this.innerRight-1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerBottom-1);return s},aD={};const Mv=Phaser.Math.Linear;var oD=function(s,t,i,f){return f===void 0&&(f=hD),f.x=Mv(t.x,i.x,s),f.y=Mv(t.y,i.y,s),f},hD={},lD=function(s){var t=this.childrenMap.thumb;if(t===void 0)return this;s===void 0&&(s=this.value);var i,f;return this.reverseAxis?(i=this.getEndPoint(),f=this.getStartPoint()):(i=this.getStartPoint(),f=this.getEndPoint()),oD(s,i,f,t),this.resetChildPositionState(t),this};const uD=Phaser.Display.Align.LEFT_CENTER,dD=Phaser.Display.Align.TOP_CENTER,fD=Phaser.Display.Align.RIGHT_CENTER,cD=Phaser.Display.Align.BOTTOM_CENTER;var vD=function(s){var t=this.childrenMap.indicator;if(t===void 0)return this;s===void 0&&(s=this.value);var i=this.reverseAxis,f,C,w=this.childrenMap.thumb;if(w)if(this.orientation===0){var a=Vt(w);if(i){var T=w.x-a*w.originX;f=this.right-T}else{var T=w.x-a*w.originX,e=T+a;f=e-this.left}}else{var u=It(w);if(i){var y=w.y-u*w.originY;C=this.bottom-y}else{var y=w.y-u*w.originY,d=y+u;C=d-this.top}}else this.orientation===0?f=this.width*s:C=this.height*s;Pi(t,f,C);var l;i?l=this.orientation===0?fD:cD:l=this.orientation===0?uD:dD,eg(t,this,l),this.resetChildPositionState(t)};const ci=Phaser.Utils.Objects.GetValue,ro=Phaser.Utils.Objects.IsPlainObject,pD=Phaser.Math.Clamp,mD=Phaser.Math.Snap.To;class ta extends Tr(kt){constructor(t,i){super(t,i),this.type="rexSlider",this.bootProgressBase(i),this.reverseAxis=ci(i,"reverseAxis",!1);var f=ci(i,"background",void 0),C=ci(i,"track",void 0),w=ci(i,"indicator",void 0),a=ci(i,"thumb",void 0);f&&(ro(f)&&(f=is(t,f)),this.addBackground(f)),C&&(ro(C)&&(C=is(t,C)),this.add(C,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),w&&(ro(w)&&(w=is(t,w)),this.pin(w)),a&&(ro(a)&&(a=is(t,a)),this.pin(a));var T=ci(i,"input",0);switch(typeof T=="string"&&(T=gD[T]),T){case 0:a&&(a.setInteractive(),this.scene.input.setDraggable(a),a.on("drag",QF,this).on("dragstart",function(e){this.eventEmitter.emit("inputstart",e)},this).on("dragend",function(e){this.eventEmitter.emit("inputend",e)},this));break;case 1:this.on("pointerdown",wv,this).on("pointermove",wv,this).on("pointerdown",function(e){this.eventEmitter.emit("inputstart",e)},this).on("pointerup",function(e){this.eventEmitter.emit("inputend",e)},this).on("pointerover",function(e){e.isDown&&this.eventEmitter.emit("inputstart",e)},this).on("pointerout",function(e){e.isDown&&this.eventEmitter.emit("inputend",e)},this).setInteractive();break}this.addChildrenMap("background",f),this.addChildrenMap("track",C),this.addChildrenMap("indicator",w),this.addChildrenMap("thumb",a),this.setEnable(ci(i,"enable",void 0)),this.setGap(ci(i,"gap",void 0)),this.setValue(ci(i,"value",0),ci(i,"min",void 0),ci(i,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,i,f){return t&&i!==void 0&&(t=t/(f-i)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=mD(t,this.gap));var i=this._value;this._value=pD(t,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}runLayout(t,i,f){return this.ignoreLayout?this:(super.runLayout(t,i,f),this.updateThumb(),this.updateIndicator(),this)}}const gD={pan:0,drag:0,click:1,none:-1};var yD={getStartPoint:eD,getEndPoint:nD,updateThumb:lD,updateIndicator:vD};Object.assign(ta.prototype,yD);const We=Phaser.Utils.Objects.GetValue;class xD extends kt{constructor(t,i){super(t,i),this.type="rexScrollBar";var f=We(i,"background",void 0),C=We(i,"buttons",void 0),w=We(C,"top",We(C,"left",void 0)),a=We(C,"bottom",We(C,"right",void 0)),T,e=We(i,"slider",void 0);if(f&&this.addBackground(f),w){this.add(w);var u=new Fo(w);u.on("intouch",function(){if(!!this.enable){var v=T.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=v}},this)}if(e){e.orientation=this.orientation,e.eventEmitter=this,e.value=null;var y;if(this.orientation===0){var d=We(e,"width",void 0);y=d===void 0?1:0}else{var l=We(e,"height",void 0);y=l===void 0?1:0}T=new ta(t,e),t.add.existing(T),this.add(T,{proportion:y})}if(a){this.add(a);var u=new Fo(a);u.on("intouch",function(){if(!!this.enable){var o=T.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=o}},this)}var h=[w,a];this.addChildrenMap("background",f),this.addChildrenMap("slider",T),this.addChildrenMap("buttons",h);var r=We(i,"valuechangeCallback",null);if(r!==null){var n=We(i,"valuechangeCallbackScope",void 0);this.on("valuechange",r,n)}this.setEnable(We(i,"enable",void 0)),this.setValue(We(i,"value",0)),this.setScrollStep(We(C,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,i,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,f),this}addValue(t,i,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,f),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class TD extends xD{constructor(t,i){i===void 0&&(i={});var f=pr(i);i={slider:f},i.orientation=f.orientation,delete f.orientation,i.background=f.background,delete f.background,i.buttons=f.buttons,delete f.buttons,super(t,i);var C=this.childrenMap.slider;this.addChildrenMap("track",C.childrenMap.track),this.addChildrenMap("indicator",C.childrenMap.indicator),this.addChildrenMap("thumb",C.childrenMap.thumb)}}class CD extends Cr{constructor(t,i){super(i),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,i=this.parent,f=i.dragState;return f.isDown&&(t=i.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,i){this.next()}next_DRAGBEGIN(){var t,i=this.parent,f=i.dragState;return f.isDown?t=f.pointer.getDistance()>=i.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,i){this.next()}next_DRAG(){var t,i=this.parent,f=i.dragState;return f.isUp&&(i.outOfBounds?t="BACK":i.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,i){var f=this.parent,C=f.dragState;C.justMoved&&f.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,i=this.parent,f=i.dragState;return f.isDown?t="DRAG":i.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,i){this.parent.sliding(t,i),this.next()}next_BACK(){var t,i=this.parent,f=i.dragState;return f.isDown?t="DRAG":i.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,i){this.parent.pullBack(t,i),this.next()}}const no=Phaser.Utils.Objects.GetValue,SD=Phaser.Math.Distance.Between;class ED extends Ne{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(no(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(no(t,"enable",!0)),this.holdThreshold=no(t,"holdThreshold",50),this.pointerOutReleaseEnable=no(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Um(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=SD(this.preX,this.preY,this.x,this.y),i=t/(this.dt*.001);return i}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,i,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=i,this.localY=f)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,i,f){!this.enable||!t.isDown||this.pointer!==t||(this.localX=i,this.localY=f)}preupdate(t,i){if(!!this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const Gl=Phaser.Utils.Objects.GetValue;class PD{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Gl(t,"value",0)),this.setSpeed(Gl(t,"speed",0)),this.setAcceleration(Gl(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class wD{constructor(){this.value,this.dir,this.movement=new PD}init(t,i,f,C,w){return this.value=t,this.end=w,w!==void 0?this.dir=t<w:this.dir=i,this.movement.setSpeed(f).setAcceleration(-C),this}stop(){this.movement.reset()}update(t){var i=this.movement.getDeltaValue(t);return this.dir||(i=-i),this.end===void 0?this.value+=i:i===0?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const ce=Phaser.Utils.Objects.GetValue,MD=Phaser.Math.Clamp;class bD extends Ne{constructor(t,i){super(t,i);var f=ce(i,"enable",!0);this._state=new CD(this,{enable:f,eventEmitter:!1});var C={inputConfig:ce(i,"inputConfig",void 0),enable:f,pointerOutRelease:ce(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new ED(t,C),this._enable=void 0,this._value=void 0,this._slowDown=new wD;var w=ce(i,"valuechangeCallback",null);if(w!==null){var a=ce(i,"valuechangeCallbackScope",void 0);this.on("valuechange",w,a)}if(w=ce(i,"overmaxCallback",null),w!==null){var a=ce(i,"overmaxCallbackScope",void 0);this.on("overmax",w,a)}if(w=ce(i,"overminCallback",null),w!==null){var a=ce(i,"overminCallbackScope",void 0);this.on("overmin",w,a)}this.resetFromJSON(i),this.boot()}resetFromJSON(t){this.setOrientationMode(ce(t,"orientation",0)),this.setDragThreshold(ce(t,"threshold",10)),this.setSlidingDeceleration(ce(t,"slidingDeceleration",5e3)),this.setBackDeceleration(ce(t,"backDeceleration",2e3));var i=ce(t,"dragRate",1);i=i*(ce(t,"dragReverse",!1)?-1:1),this.setDragRate(i);var f=ce(t,"bounds",void 0);return f?this.setBounds(f):this.setBounds(ce(t,"max",0),ce(t,"min",0)),this.setValue(ce(t,"value",this.maxValue||0)),this.setEnable(ce(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=AD[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,i){if(Array.isArray(t)){var f=t;t=f[0],i=f[1]}return t<i?(this.minValue=t,this.maxValue=i):(this.minValue=i,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var i=this._value,f=this.overMax(t),C=this.overMin(t);f&&this.emit("overmax",t,i),C&&this.emit("overmin",t,i),this.backEnable||(f&&(t=this.maxValue),C&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,i)}}setValue(t,i){return i===void 0&&(i=!1),i&&(t=MD(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,i){return this.setValue(this.value+t,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,i=this.dragSpeed;if(i===0){this._slowDown.stop(),this._state.next();return}var f=this.slidingDeceleration;this._slowDown.init(t,i>0,Math.abs(i),f)}sliding(t,i){i*=.001;var f=this._slowDown.update(i).value;this.overMax(f)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(f)?(this.value=this.minValue,this._slowDown.stop()):this.value=f}onPullBack(){var t=this.value,i=this.outOfMinBound?this.minValue:this.maxValue,f=Math.abs(i-t),C=this.backDeceleration,w=Math.sqrt(2*C*f);this._slowDown.init(t,void 0,w,C,i)}pullBack(t,i){i*=.001,this.value=this._slowDown.update(i).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const AD={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},ao=Phaser.Utils.Objects.GetValue;class RD extends Ne{constructor(t,i){if(super(t,i),this.parent!==this.scene?this.focusMode=ao(i,"focus",!1):this.focusMode=!1,this.setSpeed(ao(i,"speed",.1)),this.setEnable(ao(i,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(ao(i,"inputConfig",void 0)).on("wheel",function(C,w,a,T,e){!this.enable||this.scroll(a)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,i,f,C,w,a){!this.enable||this.scroll(C)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const ve=Phaser.Utils.Objects.GetValue;var OD=function(s,t){var i=s.scene,f=bd(t),C=new kt(i,{orientation:f}),w=ve(t,"child.gameObject",void 0),a=0,T=ve(t,"slider",void 0),e,u=0,y=ve(T,"position",0);typeof y=="string"&&(y=LD[y]);var d=y===0,l=ve(t,"scroller",!0),h,r=ve(t,"mouseWheelScroller",!1),n;if(w){var v=ve(t,"space.child",0);if(s.childMargin={},typeof v!="number"){var o=v;f===0?(a={left:ve(o,"left",0),right:ve(o,"right",0)},s.childMargin.top=ve(o,"top",0),s.childMargin.bottom=ve(o,"bottom",0)):(a={top:ve(o,"top",0),bottom:ve(o,"bottom",0)},s.childMargin.top=ve(o,"left",0),s.childMargin.bottom=ve(o,"right",0))}else T&&(f===0?a=d?{right:v}:{left:v}:a=d?{bottom:v}:{top:v}),s.childMargin.top=0,s.childMargin.bottom=0;T?(T===!0&&(T={}),T.orientation=C.orientation===0?1:0,e=new TD(i,T),u=ve(t,"space.slider",0),s.hideUnscrollableSlider=ve(T,"hideUnscrollableSlider",!1),s.adaptThumbSizeMode=ve(T,"adaptThumbSize",!1),s.minThumbSize=ve(T,"minThumbSize",void 0)):(s.adaptThumbSizeMode=!1,s.minThumbSize=void 0),l&&(l===!0&&(l={}),l.orientation=f,h=new bD(w,l)),r&&(n=new RD(w,r)),e&&!d&&C.add(e,{proportion:0,align:"center",padding:u,expand:!0});var c=ve(t,"child.proportion",1),m=ve(t,"child.expand",!0);C.add(w,{proportion:c,align:"center",padding:a,expand:m}),e&&d&&C.add(e,{proportion:0,align:"center",padding:u,expand:!0})}return e&&e.on("valuechange",function(p){s.t=p,s.emit("scroll",s)}),h&&h.on("valuechange",function(p){s.childOY=p,s.emit("scroll",s)}),n&&n.on("scroll",function(p){s.addChildOY(-p,!0)}),s.addChildrenMap("child",w),s.addChildrenMap("slider",e),s.addChildrenMap("scroller",h),s.addChildrenMap("mouseWheelScroller",n),C},LD={right:0,left:1,bottom:0,top:1},FD=function(){var s=this.topChildOY,t=this.bottomChildOY,i=this.childrenMap.scroller,f=this.childrenMap.slider;return i&&i.setBounds(t,s),f&&f.setEnable(t!==s),this.updateController(),f&&(this.hideUnscrollableSlider&&this.setChildVisible(f,this.isOverflow),this.adaptThumbSizeMode&&DD.call(this)),this},DD=function(){var s=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,i=t.childrenMap.track,f=t.childrenMap.thumb,C=this.minThumbSize;if(this.scrollMode===0){var w=i.displayHeight*s;C!==void 0&&w<C&&(w=C),Pi(f,void 0,w)}else{var a=i.displayWidth*s;C!==void 0&&a<C&&(a=C),Pi(f,a,void 0)}BD.call(this)},BD=function(){var s=this.childrenMap.slider,t=s.minWidth,i=s.minHeight;s.minWidth=s.width,s.minHeight=s.height,s.layout(),s.minWidth=t,s.minHeight=i},ID=function(){var s=this.childrenMap.scroller,t=this.childrenMap.slider;s&&s.setValue(this.childOY),t&&t.setValue(this.t)};const Fi=Phaser.Utils.Objects.GetValue,bv=Phaser.Math.Clamp;class Ad extends kt{constructor(t,i){i===void 0&&(i={});var f=bd(i);i.orientation=f===0?1:0,super(t,i),this.type=Fi(i,"type","rexScrollable");var C=Fi(i,"background",void 0),w=OD(this,i),a=Fi(i,"header",void 0),T=Fi(i,"footer",void 0);if(C&&this.addBackground(C),a){var e=Fi(i,"align.header","center"),u=Fi(i,"space.header",0),y;f===0?y={bottom:u}:y={right:u};var d=Fi(i,"expand.header",!0);this.add(a,{proportion:0,align:e,padding:y,expand:d})}if(w&&this.add(w,{proportion:1,align:"center",padding:0,expand:!0}),T){var e=Fi(i,"align.footer","center"),l=Fi(i,"space.footer",0),y;f===0?y={top:l}:y={left:l};var d=Fi(i,"expand.footer",!0);this.add(T,{proportion:0,align:e,padding:y,expand:d})}this.addChildrenMap("background",C),this.addChildrenMap("header",a),this.addChildrenMap("footer",T),this.runLayoutFlag=!1}runLayout(t,i,f){return this.ignoreLayout?this:(super.runLayout(t,i,f),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var i=this.childMargin;if(i.top!==0||i.bottom!==0){var f=this.childrenMap.child,C=f.topChildOY-f.bottomChildOY,w=C+i.top+i.bottom,a=w*t-i.top;t=a/C}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,i=this.childMargin;if(i.top!==0||i.bottom!==0){var f=this.childrenMap.child,C=f.topChildOY-f.bottomChildOY,w=C+i.top+i.bottom,a=C*t+i.top;t=a/w}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,i){return i===void 0&&(i=!1),i&&(t=bv(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,i){return this.setChildOY(this.childOY+t,i),this}setT(t,i){return i===void 0&&(i=!1),i&&(t=bv(t,0,1)),this.t=t,this}addT(t,i){return this.setT(this.t+t,i),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var i=this.childrenMap.slider;!i||i.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var i=this.childrenMap.scroller;!i||i.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var i=this.childrenMap.mouseWheelScrollerEnable;!i||i.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=t,this}}var GD={resizeController:FD,updateController:ID};Object.assign(Ad.prototype,GD);const oi=0,Ti=1,Ci=2;var lh=function(s){var t;return kg(s)?t=Ci:Pd(s)?t=oi:t=Ti,t},Rd=function(s,t,i){var f=lh(s);switch(f){case oi:i=s.getWrappedText(t);break;case Ti:i=s.getPenManager(t,i);break;case Ci:s.maxWidth>0?i=s.setText(t).getTextBounds().wrappedText.split(`
`):i=t.split(`
`);break}return i},ND=function(s){return s!==void 0&&(this.text=s),this.lines=Rd(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},$g=function(s){return(s-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Kg=function(s){return s*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},kD=function(s){var t=s+this.visibleLinesCount+1,i;switch(this.textObjectType){case oi:i=this.lines.slice(s,t).join(`
`);break;case Ti:var f=this.lines.getLineStartIndex(s),C=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(f,C,!0);break;case Ci:i=this.lines.slice(s,t).join(`
`);break}return i},jg=function(s,t){var i=lh(s);switch(i){case oi:var w=s.style,f=w.wordWrapWidth,C=w.wordWrapCallback;w.wordWrapWidth=0,w.wordWrapCallback=void 0,s.setText(t),w.wordWrapWidth=f,w.wordWrapCallback=C;break;case Ti:var w=s.style,a=w.wrapMode;w.wrapMode=0,s.setText(t),w.wrapMode=a;break;case Ci:var T=s._maxWidth;s._maxWidth=0,s.setText(t),s._maxWidth=T;break}},Jg=function(){var s=this.textObject.rexSizer;this.textObject.y+=s.offsetY-s.preOffsetY,s.preOffsetY=s.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&VD.call(this)},VD=function(){if(!!this.textObject.setCrop){var s=this.textObject.rexSizer.offsetY,t,i;s<=0?(t=-s,i=this.height):(t=0,i=this.height-s),this.textObject.setCrop(0,t,this.width,i)}},UD=function(){var s=Math.max(Math.floor($g.call(this,-this.textOY)),0),t=Kg.call(this,s)+this.textOY,i=kD.call(this,s);return jg(this.textObject,i),this.textObject.rexSizer.offsetY=t,Jg.call(this),this},zD=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,va.call(this),this},XD=function(s,t,i){if(i+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===i)){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case oi:case Ti:s.setFixedSize(t,i);var f=s.style,C=Math.max(t,0);this.textObjectType===oi?f.wordWrapWidth=C:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=C);break;case Ci:s.setMaxWidth(t);break}this.setText()}},YD=function(){var s,t,i,f=this.left,C=this.top,w,a,T,e;s=this.textObject,s.rexSizer.hidden||(t=s.rexSizer,i=t.padding,w=f+i.left,a=C+i.top,T=this.width-i.left-i.right,e=this.height-i.top-i.bottom,XD.call(this,s,T,e),ua(s,w,a,T,e,t.align),t.preOffsetY=0,Jg.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const WD={setText:ND,updateTextObject:UD,preLayout:zD,layoutChildren:YD},Av=Phaser.Utils.Objects.IsPlainObject,Qe=Phaser.Utils.Objects.GetValue,HD=Phaser.Display.Align.TOP_LEFT;class Zg extends Sr{constructor(t,i,f,C,w,a){Av(i)?(a=i,i=Qe(a,"x",0),f=Qe(a,"y",0),C=Qe(a,"width",void 0),w=Qe(a,"height",void 0)):Av(C)&&(a=C,C=Qe(a,"width",void 0),w=Qe(a,"height",void 0)),super(t,i,f,C,w,a),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=Qe(a,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Qe(a,"clamplTextOY",!0)),this.alwaysScrollable=Qe(a,"alwaysScrollable",!1);var T=Qe(a,"background",void 0),e=Qe(a,"text",void 0);e===void 0&&(e=$D(t)),this.textCropEnable=Qe(a,"textCrop",!!e.setCrop);var u=Qe(a,"textMask",!this.textCropEnable);T&&this.addBackground(T),this.add(e),this.sizerChildren=[e];var y=this.getSizerConfig(e);y.align=HD,y.padding=fn(0),y.expand=!0,this.textObject=e,this.textObjectType=lh(e),y.preOffsetY=0,y.offsetY=0,u&&(this.textMask=hn.call(this,this.textObject,this)),this.addChildrenMap("background",T),this.addChildrenMap("text",e)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case oi:this.lines.length=0;break;case Ti:this.lines.destroy();break;case Ci:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case oi:case Ti:var i=this.textObject.style;t=i.metrics.fontSize+i.strokeThickness;break;case Ci:var f=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case oi:case Ti:t=this.textObject.lineSpacing;break;case Ci:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor($g.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Kg.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var i=this.topTextOY,f=this.bottomTextOY,C=this.textOYExceedTop(t),w=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:C?t=i:w&&(t=f)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=C,w&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=w}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var $D=function(s){return s.add.text(0,0,"")};Object.assign(Zg.prototype,WD);var KD=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textObjectHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.textHeight}})},jD=function(s){var t=this.childrenMap.child;return t.setText(s),this.resizeController(),this},JD=function(s){return this.setText(this.text+s),this};const Zi=Phaser.Utils.Objects.GetValue;class ZD extends Ad{constructor(t,i){i===void 0&&(i={});var f=Zi(i,"text",void 0),C=Zi(i,"textWidth",void 0),w=Zi(i,"textHeight",void 0),a=Zi(i,"textCrop",!!f.setCrop),T=Zi(i,"textMask",!a),e=Zi(i,"content",""),u=new Zg(t,{width:C,height:w,text:f,textMask:T,textCrop:a&&!T,content:e,clamplTextOY:Zi(i,"clamplChildOY",!1),alwaysScrollable:Zi(i,"alwaysScrollable",!1)});t.add.existing(u);var y=C===void 0?1:0,d=w===void 0;KD(u),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:u,proportion:y,expand:d};var l=Zi(i,"space",void 0);l&&(l.child=l.text),super(t,i),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var QD={setText:jD,appendText:JD};Object.assign(ZD.prototype,QD);Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const oo=Phaser.Utils.Objects.GetValue;var xa=function(s,t,i){var f=oo(s,`proportion.${t}`,i.proportion),C=oo(s,`align.${t}`,"center"),w=oo(s,`space.${t}`,void 0);if(typeof w=="number"&&i.paddingKey){var a=w;w={},w[i.paddingKey]=a}var T=oo(s,`expand.${t}`,!0);return{proportion:f,align:C,padding:w,expand:T}},uh=function(s){return xa(s,"header",{proportion:0,paddingKey:"bottom"})},dh=function(s){return xa(s,"leftSide",{proportion:0,paddingKey:"right"})},fh=function(s){return xa(s,"content",{proportion:1})},ch=function(s){return xa(s,"rightSide",{proportion:0,paddingKey:"left"})},vh=function(s){return xa(s,"footer",{proportion:0,paddingKey:"top"})},ns=function(s){return{proportion:1,align:"center",padding:0,expand:!0}},as=function(s,t){var i=new kt(s,{orientation:t});return s.add.existing(i),i},qD=function(s){var t=this.scene,i=s.header;i&&this.add(i,uh(s));var f=as(t,0);this.add(f,ns());var C=s.leftSide;C&&f.add(C,dh(s));var w=s.content;w&&f.add(w,fh(s));var a=s.rightSide;a&&f.add(a,ch(s));var T=s.footer;T&&this.add(T,vh(s))},_D=function(s){var t=this.scene,i=s.header;i&&this.add(i,uh(s));var f=as(t,0);this.add(f,ns());var C=s.leftSide;C&&f.add(C,dh(s));var w=as(t,1);f.add(w,ns());var a=as(t,0);w.add(a,ns());var T=s.content;T&&a.add(T,fh(s));var e=s.rightSide;e&&a.add(e,ch(s));var u=s.footer;u&&w.add(u,vh(s))},tB=function(s){var t=this.scene,i=s.header;i&&this.add(i,uh(s));var f=as(t,0);this.add(f,ns());var C=as(t,1);f.add(C,ns());var w=as(t,0);C.add(w,ns());var a=s.leftSide;a&&w.add(a,dh(s));var T=s.content;T&&w.add(T,fh(s));var e=s.footer;e&&C.add(e,vh(s));var u=s.rightSide;u&&f.add(u,ch(s))},eB=function(s){var t=this.scene,i=s.header;i&&this.add(i,uh(s));var f=as(t,0);this.add(f,ns());var C=s.leftSide;C&&f.add(C,dh(s));var w=as(t,1);f.add(w,ns());var a=s.content;a&&w.add(a,fh(s));var T=s.footer;T&&w.add(T,vh(s));var e=s.rightSide;e&&f.add(e,ch(s))};const Rv=Phaser.Utils.Objects.GetValue,Ov=[qD,_D,tB,eB];var iB=function(s){this.clear(!0);var t=Rv(s,"background",void 0);t&&this.addBackground(t);var i=Rv(s,"layoutMode",0);typeof i=="string"&&(i=sB[i.toUpperCase()]);var f=Ov[i]||Ov[0];f.call(this,s),this.addChildrenMap("background",s.background),this.addChildrenMap("header",s.header),this.addChildrenMap("leftSide",s.leftSide),this.addChildrenMap("content",s.content),this.addChildrenMap("rightSide",s.rightSide),this.addChildrenMap("footer",s.footer)};const sB={FFF:0,LFF:1,FFR:2,LFR:3};class rB extends kt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexHolyGrail",this.build(i)}}var nB={build:iB};Object.assign(rB.prototype,nB);const aB={getButtonsSizer(s){return this.childrenMap[`${s}ButtonsSizer`]},getButton(s,t){var i=this.getButtonsSizer(s);return i?i.getButton(t):void 0},setButtonEnable(s,t,i){return this.getButtonsSizer(s).setButtonEnable(t,i),this},setLeftButtonEnable(s,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(s,t),this},setRightButtonEnable(s,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(s,t),this},setTopButtonEnable(s,t){return this.childrenMap.topButtonsSizer.setButtonEnable(s,t),this},setBottomButtonEnable(s,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(s,t),this},toggleButtonEnable(s,t){return this.getButtonsSizer(s).toggleButtonEnable(t),this},toggleLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(s),this},toggleRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(s),this},toggleTopButtonEnable(s){return this.childrenMap.topButtonsSizer.toggleButtonEnable(s),this},toggleBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(s),this},getButtonEnable(s,t){return this.getButtonsSizer(s).getButtonEnable(t)},getLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.getButtonEnable(s)},getRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.getButtonEnable(s)},getTopButtonEnable(s){return this.childrenMap.topButtonsSizer.getButtonEnable(s)},getBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.getButtonEnable(s)},emitButtonClick(s,t){var i=this.getButtonsSizer(s);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(s){return this.childrenMap.leftButtonsSizer.emitButtonClick(s),this},emitRightButtonClick(s){return this.childrenMap.rightButtonsSizer.emitButtonClick(s),this},emitTopButtonClick(s){return this.childrenMap.topButtonsSizer.emitButtonClick(s),this},emitBottomButtonClick(s){return this.childrenMap.bottomButtonsSizer.emitButtonClick(s),this},getLeftButton(s){return this.childrenMap.leftButtonsSizer.getButton(s)},getRightButton(s){return this.childrenMap.rightButtonsSizer.getButton(s)},getTopButton(s){return this.childrenMap.topButtonsSizer.getButton(s)},getBottomButton(s){return this.childrenMap.bottomButtonsSizer.getButton(s)},showButton(s,t){return lr(this.getButton(s,t)),this},showLeftButton(s){return lr(this.getLeftButton(s)),this},showRightButton(s){return lr(this.getRightButton(s)),this},showTopButton(s){return lr(this.getTopButton(s)),this},showBottomButton(s){return lr(this.getBottomButton(s)),this},hideButton(s,t){return ur(this.getButton(s,t)),this},hideLeftButton(s){return ur(this.getLeftButton(s)),this},hideRightButton(s){return ur(this.getRightButton(s)),this},hideTopButton(s){return ur(this.getTopButton(s)),this},hideBottomButton(s){return ur(this.getBottomButton(s)),this},addButton(s,t){return this.getButtonsSizer(s).addButton(t),this},addLeftButton(s){return this.addButton("left",s),this},addRightButton(s){return this.addButton("right",s),this},addTopButton(s){return this.addButton("top",s),this},removeButton(s,t,i){return this.getButtonsSizer(s).removeButton(t,i),this},removeLeftButton(s,t){return this.removeButton("left",s,t),this},removeRightButton(s,t){return this.removeButton("right",s,t),this},removeTopButton(s,t){return this.removeButton("top",s,t),this},removeBottomButton(s,t){return this.removeButton("bottom",s,t),this},clearButtons(s,t){return this.getButtonsSizer(s).clearButtons(t),this},clearLeftButtons(s){return this.clearButtons("left",s),this},clearRightButtons(s){return this.clearButtons("right",s),this},clearTopButtons(s){return this.clearButtons("top",s),this},clearBottomButtonss(s){return this.clearButtons("bottom",s),this},forEachButton(s,t,i){return this.getButtonsSizer(s).forEachButtton(t,i),this},forEachLeftButton(s,t){return this.childrenMap.leftButtonsSizer.forEachButtton(s,t),this},forEachRightButton(s,t){return this.childrenMap.rightButtonsSizer.forEachButtton(s,t),this},forEachTopButton(s,t){return this.childrenMap.topButtonsSizer.forEachButtton(s,t),this},forEachBottomButton(s,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(s,t),this}},re=Phaser.Utils.Objects.GetValue;class oB extends cn{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,super(t,i),this.type="rexTabs",this.eventEmitter=re(i,"eventEmitter",this);var f=re(i,"background",void 0),C=re(i,"panel",void 0),w=re(i,"leftButtons",void 0),a=re(i,"leftButtonsBackground",void 0),T,e=re(i,"rightButtons",void 0),u=re(i,"rightButtonsBackground",void 0),y,d=re(i,"topButtons",void 0),l=re(i,"topButtonsBackground",void 0),h,r=re(i,"bottomButtons",void 0),n=re(i,"bottomButtonsBackground",void 0),v,o=re(i,"click",void 0);if(f&&this.addBackground(f),C&&this.add(C,1,1,"center",0,!0),w){var c=re(i,"space.leftButtonsOffset",0),m=re(i,"space.leftButton",0);T=new Be(t,{groupName:"left",background:a,buttons:w,orientation:1,space:{item:m},align:re(i,"align.leftButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={top:c};this.add(T,0,1,"top",p,!1)}if(e){var g=re(i,"space.rightButtonsOffset",0),x=re(i,"space.rightButton",0);y=new Be(t,{groupName:"right",background:u,buttons:e,orientation:1,space:{item:x},align:re(i,"align.rightButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={top:g};this.add(y,2,1,"top",p,!1)}if(d){var E=re(i,"space.topButtonsOffset",0),P=re(i,"space.topButton",0);h=new Be(t,{groupName:"top",background:l,buttons:d,orientation:0,space:{item:P},align:re(i,"align.topButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={left:E};this.add(h,1,0,"left",p,!1)}if(r){var S=re(i,"space.bottomButtonsOffset",0),M=re(i,"space.bottomButton",0);v=new Be(t,{groupName:"bottom",background:n,buttons:r,orientation:0,space:{item:M},align:re(i,"align.bottomButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={left:S};this.add(v,1,2,"left",p,!1)}this.addChildrenMap("background",f),this.addChildrenMap("panel",C),this.addChildrenMap("leftButtons",w),this.addChildrenMap("rightButtons",e),this.addChildrenMap("topButtons",d),this.addChildrenMap("bottomButtons",r),this.addChildrenMap("leftButtonsSizer",T),this.addChildrenMap("rightButtonsSizer",y),this.addChildrenMap("topButtonsSizer",h),this.addChildrenMap("bottomButtonsSizer",v)}}Object.assign(oB.prototype,aB);class Qg{constructor(t,i){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,i),this}setCellContainerAlign(t){return typeof t=="string"&&(t=dn[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var i=this.parent;this._deltaHeight===0&&t!==0?i.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&i.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==t;if(this._deltaHeight=t,f){i.resetTotalRowsHeight();var C=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(C,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(Qg.prototype,Ho);const Lv=Phaser.Utils.Objects.GetValue,hB=Phaser.Utils.Array.SpliceOne;class lB{constructor(t,i){this.parent=t,this.cells=[],this.cellPool=new ki,this.resetFromJSON(i)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var i=t.cellHeight;i===void 0&&(i=30);var f=t.cellWidth;return f===void 0&&(f=30),this.setDefaultCellHeight(i),this.setDefaultCellWidth(f),this.initCells(Lv(t,"cellsCount",0)),this.setColumnCount(Lv(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var i=this.cells;i.length=t;for(var f=0;f<t;f++)i[f]=null;return this}insertNewCells(t,i){var f=this.cells;if(t===f.length){var C=t+i;f.legth=C;for(var w=t;w<C;w++)f[w]=null}else{var a=[];a.length=i;for(var w=0;w<i;w++)a[w]=null;this.cells.splice(t,0,...a)}return this.resetTotalRowsHeight(),this}removeCells(t,i){for(var f=t+i,C=t;C<f;C++)this.freeCell(C);return f===this.cells.length?this.cells.length=t:(i===1?hB(this.cells,t):this.cells.splice(t,i),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,i){if(this.defaultCellHeightMode){var T=t/this.defaultCellHeight;return i?T=Math.ceil(T):T=Math.floor(T),T}for(var f=this.rowCount,C=t,w,a,T=0;;)if(a=this.getRowHeight(T),C-=a,w=T>=0&&T<f,C>0&&w)T+=1;else{if(C===0)return T;if(i){var e=T;T+=1,w=T>=0&&T<f,w||(T=e)}return T}}widthToColIndex(t,i){var f=t/this.defaultCellWidth;return i?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(t,i){return t>=this.colCount?null:i*this.colCount+t}rowIndexToHeight(t,i){if(this.defaultCellHeightMode)return(i-t+1)*this.defaultCellHeight;for(var f,C=0,w=t;w<=i;w++)f=this.getRowHeight(w),C+=f;return C}colIndexToWidth(t,i){return(i-t+1)*this.defaultCellWidth}getRowHeight(t){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var f=0,C,w=0;w<i;w++)C=this.getCellHeight(this.colRowToCellIndex(w,t)),f<C&&(f=C);return f}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var i;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var f=this.getCell(t,!1),C=f?f.deltaHeight:0;i=this.defaultCellHeight+C}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,i){if(!this.isValidCellIdx(t))return null;if(i===void 0&&(i=!0),this.cells[t]===null&&i){var f=this.newCell(t);this.cells[t]=f}return this.cells[t]}newCell(t){var i=this.cellPool.pop();return i===null?i=new Qg(this):i.setParent(this),i.index=t,i}buildCellIndex(t){t===void 0&&(t=0);for(var i=this.cells,f,C=t,w=i.length;C<w;C++)f=i[C],f&&(f.index=C);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var uB=function(s){var t=this.table,i=this.topTableOY,f=this.bottomTableOY,C=s>this.topTableOY,w=s<this.bottomTableOY;if(this.clampTableOXY){var a=t.rowCount,T=t.heightToRowIndex(this.instHeight,!0);a<T?s=0:C?s=i:w&&(s=f)}return this._tableOY!==s&&(this._tableOY=s),C&&(this.execeedTopState||this.emit("execeedtop",this,s,i)),this.execeedTopState=C,w&&(this.execeedBottomState||this.emit("execeedbottom",this,s,f)),this.execeedBottomState=w,this},dB=function(s){var t=this.table,i=this.leftTableOX,f=this.rightTableOX,C=s>this.leftTableOX,w=s<this.rightTableOX;if(this.clampTableOXY){var a=t.colCount,T=t.widthToColIndex(this.instWidth,!0);a<T?s=0:C?s=i:w&&(s=f)}return this._tableOX!==s&&(this._tableOX=s),C&&(this.execeedLeftState||this.emit("execeedleft",this,s,i)),this.execeedLeftState=C,w&&(this.execeedRightState||this.emit("execeedright",this,s,f)),this.execeedRightState=w,this},Od=function(s){return s.hasOwnProperty("geometryMask")?s.geometryMask:s.bitmapMask};const fB=Phaser.Geom.Intersects.RectangleToRectangle,cB=Phaser.Geom.Rectangle.Overlaps;var vB=function(s,t,i){if(!!t){i===void 0&&(i=s.getAllChildren());for(var f=s.getBounds(),C=Od(t),w,a,T,e=0,u=i.length;e<u;e++)if(w=i[e],!w.hasOwnProperty("isRexContainerLite")&&w!==C&&!!pB(w))if(w.getBounds)switch(a=w.getBounds(a),T=mB(f,a),T){case 4:gB(s,w);break;case 0:fB(f,a)||cB(f,a)?Nl(s,w,t):yB(s,w);break;default:Nl(s,w,t);break}else Nl(s,w,t)}},pB=function(s){if(!s.displayList)return!1;for(;;){var t=s.rexContainer;if(t)if(t.visible){var i=t.parent;if(i){s=i;continue}else return!0}else return!1;else return s.visible}},mB=function(s,t){var i=0,f=t.top,C=t.bottom,w=t.left,a=t.right;return i+=s.contains(w,f)?1:0,i+=s.contains(w,C)?1:0,i+=s.contains(a,f)?1:0,i+=s.contains(a,C)?1:0,i},gB=function(s,t,i){s.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},Nl=function(s,t,i){s.setChildMaskVisible(t,!0),t.setMask&&t.setMask(i)},yB=function(s,t,i){s.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const kl=Phaser.Utils.Objects.GetValue,xB={update:0,everyTick:1},qg={setupChildrenMask(s){return s===!1?this:(this.setMaskUpdateMode(kl(s,"updateMode",0)),this.enableChildrenMask(kl(s,"padding",0)),this.setMaskLayer(kl(s,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(s){return typeof s=="string"&&(s=xB[s]),this.maskUpdateMode=s,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(s){var t=hn.call(this,null,this,0,s);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(s){return s===void 0&&(s=!0),this.maskChildrenFlag=s,this},setMaskLayer(s){return this.maskLayer=s,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):vB(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var s=Od(this.childrenMask);return s.setPosition().resize(),this.resetChildPositionState(s),this}};var TB=function(){if(this.cellsCount!==0){var s=this.table,t=s.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var i=t,f=s.widthToColIndex(-this.tableOX);f<=0&&(f=0);for(var C=f,w=s.colRowToCellIndex(C,i),a=this.bottomBound,T=this.rightBound,e=s.cellsCount-1,u=s.colCount-1,y=this.getCellTLX(C),d=y,l=this.getCellTLY(i);l<a&&w<=e;){if(this.table.isValidCellIdx(w)){var h=s.getCell(w,!0);this.visibleCells.set(h),this.preVisibleCells.contains(h)||this.showCell(h);var r,n;if(this.scrollMode===0?(r=d,n=l):(r=l,n=d),h.cellContainerAlign==null)h.setXY(r,n);else{var v=h.getContainer();ua(v,r,n,h.width,h.height,h.cellContainerAlign),h.setXY(v.x,v.y)}}d<T&&C<u?(d+=s.getColWidth(C),C+=1):(d=y,l+=s.getRowHeight(i),C=f,i+=1),w=s.colRowToCellIndex(C,i)}}},_g=function(s){var t=null,i=s.getContainer();if(i?(t=i,s.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",s,t,this),this.cellContainersPool){var i=s.getContainer();i?t===null?this.cellContainersPool.add(i):t!==i&&(this.cellContainersPool.add(i),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},CB=function(s){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,i=this.tableOX+this.table.colIndexToWidth(0,s-1)+t;return i},SB=function(s){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,i=this.tableOY+this.table.rowIndexToHeight(0,s-1)+t;return i},EB=function(){var s=this.preVisibleCells,t=this.visibleCells;s.iterate(function(i){t.contains(i)||this.hideCell(i)},this)},ty=function(s){if(this.emit("cellinvisible",s),this.cellContainersPool){var t=s.popContainer();t&&this.cellContainersPool.killAndHide(t)}s.destroyContainer()},PB=function(s){return s===void 0&&(s=!1),s&&(Fv.call(this),this.hideCells()),Fv.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Fv=function(){var s=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=s,this.visibleCells.clear()},wB=function(s){var t=this.table.getCell(s,!1);return t&&this.visibleCells.contains(t)},ey=function(s,t){t-=this.y+this.topLeftY,s-=this.x+this.topLeftX;var i=this.tableOY-(this.scrollMode===0?t:s),f=this.tableOX-(this.scrollMode===0?s:t),C=this.table,w=C.heightToRowIndex(-i),a=C.widthToColIndex(-f),T=C.colRowToCellIndex(a,w);return T===null||!this.isCellVisible(T)?null:T},MB=function(s,t){var i=ey.call(this,s,t);if(i!==null)return this.getCellContainer(i)},bB=function(s,t){return this.visibleCells.each(s,t),this},AB=function(s,t){return this.visibleCells.iterate(s,t),this},RB=function(s,t){return this.table.cells.slice().forEach(s,t),this},OB=function(s,t){return this.table.cells.forEach(s,t),this},LB=function(s){var t=this.cellsCount;return t===s?this:(t>s?this.removeCells(s,t-s):this.insertNewCells(t,s-t),this)};const FB=Phaser.Math.Clamp;var DB=function(s,t){return typeof s=="object"&&(s=s.index),t===void 0&&(t=1),t<=0?this:(s=FB(s,0,this.cellsCount),this.table.insertNewCells(s,t),this)},BB=function(s,t){if(typeof s=="object"&&(s=s.index),t===void 0&&(t=1),s<0&&(t+=s,s=0),t<=0)return this;if(s>this.cellsCount)return this;for(var i,f=s,C=s+t;f<C;f++)i=this.getCell(f,!1),i&&(this.visibleCells.contains(i)&&(ty.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(s,t),this},IB=function(s){return this.table.colCount===s?this:(this.table.setColumnCount(s),this)},GB=function(s,t){return this.setCellsCount(s*t),this.table.setColumnCount(s),this},NB=function(s){var t=this.table.getCell(s,!1);return!t||!t.container?this:(_g.call(this,t),this)},iy={setTableOY:uB,setTableOX:dB,showCells:TB,showCell:_g,getCellTLX:CB,getCellTLY:SB,hideCells:EB,hideCell:ty,updateTable:PB,isCellVisible:wB,pointToCellIndex:ey,pointToCellContainer:MB,eachVisibleCell:bB,iterateVisibleCell:AB,eachCell:RB,iterateCell:OB,setCellsCount:LB,insertNewCells:DB,removeCells:BB,setColumnCount:IB,setGridSize:GB,updateVisibleCell:NB};Object.assign(iy,qg);const kB=Phaser.GameObjects.Group,Dv=Phaser.Structs.Set,Di=Phaser.Utils.Objects.GetValue;class sy extends wi{constructor(t,i,f,C,w,a){a===void 0&&(a={}),super(t,i,f,C,w),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Dv,this.preVisibleCells=new Dv,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var T=Di(a,"reuseCellContainer",!1);T&&(this.cellContainersPool=new kB(t));var e=Di(a,"cellVisibleCallback",null);if(e!==null){var u=Di(a,"cellVisibleCallbackScope",void 0);this.on("cellvisible",e,u)}if(e=Di(a,"cellInvisibleCallback",null),e!==null){var u=Di(a,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",e,u)}Di(a,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Di(a,"mask",void 0)),this.setScrollMode(Di(a,"scrollMode",0)),this.setClampMode(Di(a,"clamplTableOXY",!0));var y,d,l,h=this.scrollMode===0;if(h?(y=a.cellWidth,d=a.cellHeight,l=a.columns):(y=a.cellHeight,d=a.cellWidth,l=Di(a,"rows",a.columns)),l||(l=1),this.expandCellSize=y===void 0,this.expandCellSize){var C=h?this.width:this.height;y=C/l}a.cellWidth=y,a.cellHeight=d,a.columns=l,this.table=new lB(this,a),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=VB[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,i){return this.setTableOY(i).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,i){return this.addTableOY(i).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var i=this.table.getCell(t,!1),f;return i&&(f=i.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,i){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.height=i,this}setCellWidth(t,i){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.width=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,i=this.tableWidth,f=this.instWidth;return i>f?t=i-f:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,i){return this.width===t&&this.height===i?this:(super.resize(t,i),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(sy.prototype,iy);const VB={v:0,vertical:0,h:1,horizontal:1};var UB=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.tableOY},set:function(t){s.tableOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTableOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTableOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.instHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.tableHeight}})},zB=function(s){s.on("cellvisible",function(t,a,f){var C=this.createCellContainerCallback,w=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var a;w?a=C.call(w,t,a,f):a=C(t,a,f),a&&(t.cellContainerAlign==null&&a.setOrigin&&a.setOrigin(0),a.isRexSizer&&a.layout()),t.item=void 0,t.items=void 0,t.setContainer(a)},this)},Xi=function(s,t,i,f,C,w,a){var T;if(C===void 0?T=f:T=i.pointToCellIndex(f,C),T!=null){var e=i.getCellContainer(T);e&&s.emit(t,e,T,w,a)}},XB=function(s,t){s.on("pointerdown",function(i,f,C,w){Xi(this.eventEmitter,"cell.down",s,i.worldX,i.worldY,i,w)},this).on("pointerup",function(i,f,C,w){Xi(this.eventEmitter,"cell.up",s,i.worldX,i.worldY,i,w)},this)},YB=function(s,t){s.on("pointermove",Bv,this).on("pointerover",Bv,this).on("pointerout",WB,this)},Bv=function(s,t,i,f){var C=this.childrenMap.child,w=C.pointToCellIndex(s.worldX,s.worldY);if(w!==C.input.lastOverCellIndex){var a=C.input.lastOverCellIndex;C.input.lastOverCellIndex=w,Xi(this.eventEmitter,"cell.out",C,a,void 0,s,f),Xi(this.eventEmitter,"cell.over",C,w,void 0,s,f)}},WB=function(s,t){var i=this.childrenMap.child,f=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Xi(this.eventEmitter,"cell.out",i,f,void 0,s,t)};const HB=Phaser.Utils.Objects.GetValue;var $B=function(s,t){var i=HB(t,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.threshold=10,s._click=new Fs(s,i),s._click.on("click",function(f,C,w,a){Xi(this.eventEmitter,"cell.click",C,w.worldX,w.worldY,w,a)},this))};const KB=Phaser.Utils.Objects.GetValue;var jB=function(s,t){var i=KB(t,"tap",void 0);i!==!1&&(s._tap=new fg(s,i),s._tap.on("tap",function(f,C,w){var a=`cell.${f.tapsCount}tap`;Xi(this.eventEmitter,a,f.gameObject,f.worldX,f.worldY,w)},this))};const JB=Phaser.Utils.Objects.GetValue;var ZB=function(s,t){var i=JB(t,"press",void 0);i!==!1&&(s._press=new cg(s,i),s._press.on("pressstart",function(f,C,w){Xi(this.eventEmitter,"cell.pressstart",s,f.worldX,f.worldY,w)},this).on("pressend",function(f,C,w){Xi(this.eventEmitter,"cell.pressend",s,f.worldX,f.worldY,w)},this))};const QB=Phaser.Utils.Objects.GetValue;var qB=function(s,t){var i=QB(t,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",s._swipe=new Td(s,i),s._swipe.on("swipe",function(f,C,w){var a=f.left?"left":f.right?"right":f.up?"up":"down";Xi(this.eventEmitter,`cell.swipe${a}`,s,f.worldX,f.worldY,w)},this))},_B=function(s,t){s.setInteractive(),XB.call(this,s,t),YB.call(this,s,t),$B.call(this,s,t),jB.call(this,s,t),ZB.call(this,s,t),qB.call(this,s,t)},tI=function(s){s===void 0?this.items=[]:this.items=s;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const Bi=Phaser.Utils.Objects.GetValue;class eI extends Ad{constructor(t,i){i===void 0&&(i={});var f=bd(i),C=Bi(i,"table",void 0);C===void 0&&(C={}),C.scrollMode=f,C.clamplTableOXY=Bi(i,"clamplChildOY",!1);var w=Bi(C,"width",void 0),a=Bi(C,"height",void 0),T=new sy(t,0,0,w,a,C);t.add.existing(T);var e,u;f===0?(e=w===void 0?1:0,u=a===void 0):(e=a===void 0?1:0,u=w===void 0),UB(T),T.minWidth=w===void 0?0:void 0,T.minHeight=a===void 0?0:void 0,i.type="rexGridTable",i.child={gameObject:T,proportion:e,expand:u};var y=Bi(i,"space",void 0);y&&(y.child=y.table),super(t,i),this.addChildrenMap("table",T),this.addChildrenMap("tableLayer",T.maskLayer),this.eventEmitter=Bi(i,"eventEmitter",this);var d=Bi(i,"createCellContainerCallback",Ui),l=Bi(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(d,l),zB.call(this,T),this.resizeControllerFlag=!1;var h=f===0?"cellheightchange":"cellwidthchange";T.on(h,function(){this.resizeControllerFlag=!0},this),Bi(C,"interactive",!0)&&_B.call(this,T,C),this.setItems(Bi(i,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,i){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(t){var i=this.childrenMap.child;return i.getCell(t)}getCellContainer(t){var i=this.childrenMap.child;return i.getCellContainer(t)}updateVisibleCell(t){var i=this.childrenMap.child;return i.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var iI={setItems:tI};Object.assign(eI.prototype,iI);var Ld=function(s,t){return s.sameOrientation?s.orientation=t.orientation:s.orientation=t.orientation===0?1:0,s},sI=function(s,t){s.popUp(Ld(s.root.easeIn,s))},rI=function(s,t){s.scaleDown(Ld(s.root.easeOut,s))};const nI={setTransitInCallback(s){return s===void 0&&(s=sI),this.transitInCallback=s,this},setTransitOutCallback(s){return s===void 0&&(s=rI),this.transitOutCallback=s,this}},aI={delayCall(s,t,i){return this.timer=og(this,s,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var oI=function(s,t){var f=this.childrenMap.subMenu;if(f&&f.parentButton===s)return this;this.collapseSubMenu();var i;this.root.toggleOrientation?i=this.orientation===0?1:0:i=this.orientation;var f=new this.constructor(this.scene,{items:t,orientation:i,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:s});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,s,this),this},hI=function(){var s=this.root;s.emit("collapse",this,this.parentButton,s);var t=s.easeOut.duration;return s.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},lI=function(){var s=this.childrenMap.subMenu;return s===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(s),s.collapse(),this)},ry={expandSubMenu:oI,collapse:hI,collapseSubMenu:lI};Object.assign(ry,nI,aI);var uI=function(s,t,i,f){var C;return i&&(t.scene=s,f?C=i.call(f,t):C=i(t),t.scene=void 0),C},dI=function(s,t,i,f){var C,w=[],a;if(t&&i)for(var T=0,e=t.length;T<e;T++)C=t[T],C.scene=s,f?a=i.call(f,C,T,t):a=i(C,T,t),C.scene=void 0,w.push(a);return w},fI=function(s){s.on(s.root.expandEventName,function(t,i){if(!this._isPassedEvent){var f=this.root.childrenKey,C=this.items[i][f];C&&this.expandSubMenu(t,C)}},s).on("button.click",function(t,i,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,i,f,C),this.root._isPassedEvent=!1)},s).on("button.over",function(t,i,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,i,f,C),this.root._isPassedEvent=!1)},s).on("button.out",function(t,i,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,i,f,C),this.root._isPassedEvent=!1)},s)},Iv=function(s,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=ah(t.orientation)===s.orientation:t.sameOrientation=!0,t.destroy=!1,t},cI=function(){var s=this.root,t=s.easeIn.duration;s.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const De=Phaser.Utils.Objects.GetValue;class vI extends Be{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var f=i._rootMenu,C=i._parentMenu,w=i._parentButton,a=De(i,"popup",!0),T=De(i,"items",void 0),e=De(i,"createBackgroundCallback",void 0),u=De(i,"createBackgroundCallbackScope",void 0);i.background=uI(t,T,e,u);var y=De(i,"createButtonCallback",void 0),d=De(i,"createButtonCallbackScope",void 0);if(i.buttons=dI(t,T,y,d),super(t,i),this.type="rexMenu",this.items=T,this.root=f===void 0?this:f,this.isRoot=this.root===this,this.parentMenu=C,this.parentButton=w,this.timer=void 0,this.isRoot){this.isPopUpMode=a;var l=i.bounds;l===void 0&&(l=oa(t)),this.bounds=l,this.subMenuSide=[this.y<l.centerY?Tu:To,this.x<l.centerX?xu:xo];var h=De(i,"subMenuSide",void 0);h!==void 0&&(typeof h=="string"&&(h=pI[h]),this.subMenuSide[this.orientation]=h),this.toggleOrientation=De(i,"toggleOrientation",!1),this.expandEventName=De(i,"expandEvent","button.click"),this.easeIn=Iv(this,De(i,"easeIn",0)),this.easeOut=Iv(this,De(i,"easeOut",0)),this.setTransitInCallback(De(i,"transitIn")),this.setTransitOutCallback(De(i,"transitOut")),this.createBackgroundCallback=e,this.createBackgroundCallbackScope=u,this.createButtonCallback=y,this.createButtonCallbackScope=d,this.childrenKey=De(i,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=De(i,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var r=0,n=0;if(!this.root.easeIn.sameOrientation){var v=Ld(this.root.easeIn,this).orientation,o=C?C.orientation:this.orientation,h=this.root.subMenuSide[o];v===0&&h===xo&&(r=1),v===1&&h===To&&(n=1)}if(a&&this.setOrigin(r,n).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var h=this.root.subMenuSide[C.orientation];switch(h){case xo:this.alignTop(w.top).alignRight(w.left);break;case xu:this.alignTop(w.top).alignLeft(w.right);break;case To:this.alignLeft(w.left).alignBottom(w.top);break;case Tu:this.alignLeft(w.left).alignTop(w.bottom);break}}fI(this),a&&(this.pushIntoBounds(this.root.bounds),cI.call(this))}destroy(t){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const xo=2,xu=0,To=3,Tu=1,pI={up:To,down:Tu,left:xo,right:xu};Object.assign(vI.prototype,ry);var mI={setWrapEnable(s){return s===void 0&&(s=!0),this.listWrapEnable=s,this},setCreateButtonCallback(s){return this.listCreateButtonCallback=s,this},setCreateListBackgroundCallback(s){return this.listCreateBackgroundCallback=s,this},setButtonClickCallback(s){return this.listOnButtonClick=s,this},setButtonOverCallback(s){return this.listOnButtonOver=s,this},setButtonOutCallback(s){return this.listOnButtonOut=s,this},setListExpandDirection(s){return typeof s=="string"&&(s=gI[s]),this.listExpandDirection=s,this},setListEaseInDuration(s){return s===void 0&&(s=0),this.listEaseInDuration=s,this},setListEaseOutDuration(s){return s===void 0&&(s=0),this.listEaseOutDuration=s,this},setListTransitInCallback(s){return this.listTransitInCallback=s,this},settListTransitOutCallback(s){return this.listTransitOutCallback=s,this},setListBounds(s){return this.listBounds=s,this},setListWidth(s){return this.listWidth=s,this},setListHeight(s){return this.listHeight=s,this},setListSize(s,t){return this.setListWidth(s).setListHeight(t),this},setListAlignmentMode(s){return this.listAlignMode=s,this},setListSpace(s){return s===void 0&&(s={}),this.listSpace=s,this},setListDraggable(s){return s===void 0&&(s=!0),this.listDraggable=s,this}};const gI={down:0,up:1};var yI=function(){var s=this.scene,t,i=this.listCreateBackgroundCallback;i&&(t=i.call(this,s),s.add.existing(t));var f=[],C=this.listCreateButtonCallback;if(C)for(var w=this.options,a=0,T=w.length;a<T;a++){var e=C.call(this,s,w[a],a,w);s.add.existing(e),f.push(e)}var u=this.listWidth;u===void 0&&(this.listAlignMode==="text"?u=this.getElement("text").width:u=this.width);var y=this.listHeight,d;return this.listWrapEnable?d=new _n(s,{width:u,height:y,background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}):d=new Be(s,{width:u,height:y,orientation:"y",background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(d),d},xI=function(s,t,i,f,C){f===void 0&&(f="Linear");var w={};switch(w.mode=0,i){case 0:case"x":w.end={x:0};break;case 1:case"y":w.end={y:0};break;default:w.end=0;break}return w.duration=t,w.ease=f,C===void 0?C=new Qn(s,w):C.resetFromJSON(w),C.restart(),C},TI=function(s,t,i,f,C){return As(s,t)?de(s,t):i&&As(s,i)?de(s,i):f&&As(s,f)?de(s,f):C};const Dn=Phaser.Utils.Objects.GetValue;var CI=function(s,t){var i=Dn(t,"expandDirection",void 0);typeof i=="string"&&(i=SI[i]);var f=TI(t,"alignTarget","alignTargetX"),C=Dn(t,"alignTargetY",f),w=Dn(t,"alignOffsetX",0),a=Dn(t,"alignOffsetY",0),T=Dn(t,"bounds"),e=i===0,u=i===1,y=!e&&!u,d=e||y?0:1;s.setOrigin(0,d);var l=f.getTopLeft().x,h=C.getBottomLeft().y;s.setPosition(l+w,h+a);var r=T;r||(r=oa(s.scene)),y&&s.getBottomLeft().y>r.bottom&&(h=C.getTopLeft().y,s.setOrigin(0,1).setPosition(l+w,h+a))};const SI={down:0,up:1},Gv=Phaser.Utils.Objects.GetValue;class ny extends sh{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=function(w,a){cd(w,a,"y","Cubic")}),i.transitOut==null&&(i.transitOut=function(w,a){xI(w,a,"y","Linear")}),i.manualClose=!0,i.clickOutsideClose=!0,i.destroy=!0,super(t,i),CI(t,i),t.isRexSizer&&t.layout();var f=Gv(i,"touchOutsideClose",!1),C=Gv(i,"anyTouchClose",!1);C&&(f=!1),C?this.once("open",this.anyTouchClose,this):f&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&qn(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var EI=function(){if(this.listPanel)return this;var s=yI.call(this);s.on("button.over",function(i,f,C,w){this.listOnButtonOver&&this.listOnButtonOver.call(this,i,f,C,w),this.emit("button.over",this,s,i,f,C,w)},this).on("button.out",function(i,f,C,w){this.listOnButtonOut&&this.listOnButtonOut.call(this,i,f,C,w),this.emit("button.out",this,s,i,f,C,w)},this);var t=new ny(s,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:this.getElement(this.listAlignMode),alignTargetY:this,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){s.on("button.click",function(i,f,C,w){this.listOnButtonClick&&this.listOnButtonClick.call(this,i,f,C,w),this.emit("button.click",this,s,i,f,C,w)},this),this.emit("list.open",this,s)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=s,this.dropDownBehavior=t,this.pin(s),this},PI=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},wI=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},ay={openListPanel:EI,closeListPanel:PI,toggleListPanel:wI};Object.assign(ay,mI);const he=Phaser.Utils.Objects.GetValue;class oy extends vn{constructor(t,i){super(t,i),this.type="rexDropDownList",this.timer=void 0,this.setOptions(he(i,"options"));var f=he(i,"list");this.setWrapEnable(he(f,"wrap",!1)),this.setCreateButtonCallback(he(f,"createButtonCallback")),this.setCreateListBackgroundCallback(he(f,"createBackgroundCallback")),this.setButtonClickCallback(he(f,"onButtonClick")),this.setButtonOverCallback(he(f,"onButtonOver")),this.setButtonOutCallback(he(f,"onButtonOut")),this.setListExpandDirection(he(f,"expandDirection")),this.setListEaseInDuration(he(f,"easeIn",500)),this.setListEaseOutDuration(he(f,"easeOut",100)),this.setListTransitInCallback(he(f,"transitIn")),this.settListTransitOutCallback(he(f,"transitOut")),this.setListSize(he(f,"width"),he(f,"height")),this.setListAlignmentMode(he(f,"alignParent","text")),this.setListBounds(he(f,"bounds")),this.setListSpace(he(f,"space")),this.setListDraggable(he(f,"draggable",!1)),this.setValueChangeCallback(he(i,"setValueCallback"),he(i,"setValueCallbackScope")),this.setValue(he(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,i){return this.valueChangeCallback=t,this.valueChangeCallbackScope=i,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t;var f=this.valueChangeCallback,C=this.valueChangeCallbackScope;f&&(C?f.call(C,this,t,i):f(this,t,i))}}}Object.assign(oy.prototype,ay);var MI=function(s,t){s===void 0&&(s=this.startLineIndex),t===void 0&&(t=s+this.pageLinesCount);var i;switch(this.textObjectType){case oi:case Ci:i=this.lines.slice(s,t).join(`
`);break;case Ti:var f=this.lines.getLineStartIndex(s),C=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(f,C,!0);break}return i},Vl=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s};const bI={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(i){var t=this.totalLinesCount;this.sections.push(Vl(i));var i=this.sections.join(`
`);this.lines=Rd(this.parent,i,this.lines);for(var f=this.totalLinesCount-t,C=Math.ceil(f/this.pageLinesCount),w=0;w<C;w++)this.pageStartIndexes.push(t+w*this.pageLinesCount);return this},setText(s,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var i=Vl(s).split(this.pageBreak),f=0,C=i.length;f<C;f++)this.appendPage(i[f]);return this},appendText(s){var t=this.content+Vl(s);return this.setText(t,!1),this}},AI=Phaser.Math.Clamp,RI={getPage(s){return s===void 0&&(s=this.pageIndex),this.setPageIndex(s).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(s){return s=AI(s,0,this.pageCount-1),this.pageIndex=s,this.startLineIndex=this.pageStartIndexes[s],this.endLineIndex=this.pageStartIndexes[s+1],this}},OI={showPage(s){return this.displayText(this.getPage(s)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(s){jg(this.parent,s)}};var hy={getLines:MI};Object.assign(hy,bI,RI,OI);const Bn=Phaser.Utils.Objects.GetValue,LI=Phaser.Math.Clamp;class FI extends Ne{constructor(t,i){super(t,{eventEmitter:!1}),this.textObjectType=lh(this.parent),this.pageStartIndexes=[],this.lines=Rd(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(t){return this.setMaxLines(Bn(t,"maxLines",void 0)),this.setPageBreak(Bn(t,"pageBreak",`\f
`)),this.setText(Bn(t,"text","")),this.setStartLineIndex(Bn(t,"start",0)),this.setPageIndex(Bn(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case oi:this.lines.length=0;break;case Ti:this.lines.destroy();break;case Ci:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=LI(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case oi:case Ti:var i=this.parent.style.maxLines;i>0?t=i:t=this.totalLinesCount;break;case Ci:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(FI.prototype,hy);Phaser.Utils.Objects.GetFastValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const DI=fs.prototype.add;var Nv=function(s,t,i,f,C,w,a,T,e){return s.setVisible(!1),DI.call(this,s,t,i,f,C,w,a,T,e),this};const BI={add:Nv,addPage:Nv};var II=function(s){return s===void 0?null:this.sizerChildren.hasOwnProperty(s)?this.sizerChildren[s]:null};const kv=wi.prototype.setChildVisible;var GI=function(s,t){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(kv.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),s&&!this.sizerChildren.hasOwnProperty(s)&&this.emit("createpage",s,this),this._currentKey=s;var f=this.currentPage;return f&&(kv.call(this,f,!0),this.emit("pagevisible",f,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&f.setAlpha(0).fadeIn(t,1)),this},NI=function(s){return this.sizerChildren.hasOwnProperty(s)},ly={getPage:II,swapPage:GI,hasPage:NI};Object.assign(ly,BI);const Vv=Phaser.Utils.Objects.GetValue;class uy extends fs{constructor(t,i){super(t,i),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Vv(i,"swapMode",0)),this.setFadeInDuration(Vv(i,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=kI[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(uy.prototype,ly);const kI={invisible:0,destroy:1},dy=Phaser.Math.Vector3,VI=Phaser.Math.Matrix4;var Uv=new dy,zv=new dy,Xv=new VI,UI=function(s,t,i,f,C,w,a){t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),a===void 0&&(a=0),Uv.set(t,i,f),zv.set(C,w,a),Xv.fromRotationXYTranslation(zv,Uv,!0);for(var T=0,e=s.vertices.length;T<e;T++)s.vertices[T].transformMat4(Xv)};const zI=Phaser.GameObjects.Mesh,XI=Phaser.Utils.Objects.IsPlainObject,rr=Phaser.Utils.Objects.GetValue,YI=Phaser.Geom.Mesh.GenerateGridVerts,Ul=Phaser.Math.RadToDeg,Co=Phaser.Math.DegToRad,fy=45,WI=1+1/Math.sin(Co(fy));class cy extends zI{constructor(t,i,f,C,w,a){XI(i)&&(a=i,i=rr(a,"x",0),f=rr(a,"y",0),C=rr(a,"key",null),w=rr(a,"frame",null)),super(t,i,f,C,w),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(WI),this.hideCCW=rr(a,"hideCCW",!0);var T=rr(a,"gridWidth",32),e=rr(a,"gridHeight",T);this.resetVerts(T,e)}get originX(){return .5}get originY(){return .5}get displayOriginX(){return this.width*.5}get displayOriginY(){return this.height*.5}resetPerspective(){return this.setPerspective(this.width,this.height,fy),this}resetVerts(t,i){if(t!==void 0&&(this.gridWidth=t),i!==void 0&&(this.gridHeight=i),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,C=this.frame.cutHeight;YI({mesh:this,texture:this.texture.key,frame:this.frame.name,width:f/this.height,height:C/this.height,widthSegments:Math.ceil(f/this.gridWidth),heightSegments:Math.ceil(C/this.gridHeight),flipY:this.frame.source.isRenderTexture});var w=this.transformInfo;return w&&this.transformVerts(w.x,w.y,w.z,w.rotateX,w.rotateY,w.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Ul(this.rotationX)}set angleX(t){this.rotationX=Co(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Ul(this.rotationY)}set angleY(t){this.rotationY=Co(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Ul(this.rotationZ)}set angleZ(t){this.rotationZ=Co(t)}transformVerts(t,i,f,C,w,a){return t===void 0&&(t=0),i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),a===void 0&&(a=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=i,this.transformInfo.rotateX=C,this.transformInfo.rotateY=w,this.transformInfo.rotateZ=a,UI(this,t,i,f,C,w,a),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var i=this.vertices,f=0,C=i.length;f<C;f++)i[f].color=t}setTint(t){return this.tint=t,this}}const HI=Phaser.GameObjects.RenderTexture,$I=Phaser.Utils.Objects.IsPlainObject,ho=Phaser.Utils.Objects.GetValue;class KI extends cy{constructor(t,i,f,C,w,a){$I(i)&&(a=i,i=ho(a,"x",0),f=ho(a,"y",0),C=ho(a,"width",32),w=ho(a,"height",32));var T=new HI(t,i,f,C,w).setOrigin(.5);super(t,i,f,T.texture.key,null,a),this.type="rexPerspectiveRenderTexture",this.rt=T}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,i){return i===void 0&&(i={}),i.gameObjects=t,i.renderTexture=this.rt,_m(i),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var yi=function(s,t,i,f){if(Array.isArray(s))for(var C=!1,w=0,a=s.length;w<a;w++){var T=s[w];if(!(f&&!T)&&(i?C=t.call(i,T,w,s):C=t(T,w,s),C))return}else{var C=!1;for(var e in s){var T=s[e];if(!(f&&!T)&&(i?C=t.call(i,T,e,s):C=t(T,e,s),C))return}}};const zl=Phaser.Math.RadToDeg,Xl=Phaser.Math.DegToRad;class jI extends wi{constructor(t,i,f,C,w,a){super(t,i,f,C,w),this.faces=a,yi(a,function(T){T.setPosition(i,f),this.add(T)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return zl(this.rotationX)}set angleX(t){this.rotationX=Xl(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return zl(this.rotationY)}set angleY(t){this.rotationY=Xl(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return zl(this.rotationZ)}set angleZ(t){this.rotationZ=Xl(t)}setDebug(t,i){return yi(this.faces,function(f){f.setDebug(t,i)},null,!0),this}panX(t){return yi(this.faces,function(i){i.panX(t)},null,!0),this}panY(t){return yi(this.faces,function(i){i.panY(t)},null,!0),this}panZ(t){return yi(this.faces,function(i){i.panZ(t)},null,!0),this}transformVerts(t,i,f,C,w,a){return yi(this.faces,function(T){T.transformVerts(t,i,f,C,w,a)},null,!0),this}forEachFace(t,i,f){return yi(this.faces,t,i,f),this}}const JI=Phaser.Utils.Objects.IsPlainObject,ZI={key:"__WHITE"},QI={image:cy,rendertexture:KI};var Yv=function(s,t){t===void 0&&(t=ZI);var i;return JI(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),i=new QI[t.type](s,t),s.add.existing(i)):i=t,i},qI=function(s,t,i){var f;if(i===void 0){f=[];for(var C,w,a=0,T=t.length;a<T;a++)w=t[a],w?C=Yv(s,w):C=null,f.push(C)}else{f={};for(var C,e,a=0,T=i.length;a<T;a++)e=i[a],t.hasOwnProperty(e)?C=Yv(s,t[e]):C=null,f[e]=C}return f};const _I=Phaser.Math.DegToRad,Wv=_I(180);var t9=function(s,t){var i=t.back;i&&(s.orientation===0?i.transformVerts(0,0,0,0,Wv,0):i.transformVerts(0,0,0,Wv,0,0))};const Yl=Phaser.Utils.Objects.GetValue,e9=Phaser.Math.Linear;class i9 extends un{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Yl(t,"ease","Cubic")),this.setFrontToBackDirection(Yl(t,"frontToBack",0)),this.setBackToFrontDirection(Yl(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Hv[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Hv[t]),this.endAngleBF=t===0?-180:180,this}start(t,i){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var f=i+1,C=this.parent;return C.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*f):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*f),super.start(),this}flip(t,i){return this.isRunning?this:(t===void 0&&(t=this.duration),i===void 0&&(i=0),this.start(t,i),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+i+1)%2,this)}flipRight(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,i),this}flipLeft(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,i),this}updateGameObject(t,i){var f=this.easeFn(i.t),C=e9(this.startAngle,this.endAngle,f);t.orientation===0?t.angleY=C:t.angleX=C}}const Hv={right:0,"left-to-right":0,left:1,"right-to-left":1},s9=Phaser.Utils.Objects.IsPlainObject,nr=Phaser.Utils.Objects.GetValue,r9=["back","front"];class n9 extends jI{constructor(t,i,f,C){s9(i)&&(C=i,i=nr(C,"x",0),f=nr(C,"y",0));var w=qI(t,C,r9),a=w.back,T=w.front,e=nr(C,"width"),u=nr(C,"height");if(e===void 0||u===void 0){if(e===void 0){var y=T?T.width:0,d=a?a.width:0;e=Math.max(y,d)}if(u===void 0){var l=T?T.height:0,h=a?a.height:0;u=Math.max(l,h)}}super(t,i,f,e,u,w),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,yi(w,function(n,v){this[`${v}Face`]=n},this);var r=nr(C,"flip",void 0);r!==!1&&(this.flip=new i9(this,r)),this.setOrientation(nr(C,"orientation",0)),t9(this,w),this.setFace(nr(C,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,yi(this.faces,function(i){i.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,yi(this.faces,function(i){i.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,yi(this.faces,function(i){i.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=a9[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=o9[t]),this.currentFaceIndex=t;var i=t===1,f=i?180:0;this.orientation===0?this.angleY=f:this.angleX=f}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const a9={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},o9={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;Phaser.Utils.Objects.GetValue;const h9=Phaser.Utils.Objects.GetValue;var l9=function(s){var t=this.scene;this.setSnapshotPadding(h9(s,"snapshotPadding",0)),s=pr(s),delete s.width,delete s.height,s.front={width:1,height:1},s.back={width:1,height:1};var i=new n9(t,s);t.add.existing(i);var f=i.flip;if(f){var C=this;f.on("start",function(){C.enterPerspectiveMode()}).on("complete",function(){C.exitPerspectiveMode()})}return i};const u9=["front","back"],d9={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var s=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,s),this.setChildVisible(this.childrenMap.back,!s),this},setSnapshotPadding(s){return this.snapshotPadding=s,this},snapshotFace(s){typeof s=="number"&&(s=u9[s]);var t=this.perspectiveCard.faces[s],i=this.childrenMap[s];t.rt.clear();var f=i.visible;i.visible=!0;var C=i.isRexContainerLite?i.getAllVisibleChildren():i;return t.snapshot(C,{padding:this.snapshotPadding}),i.visible=f,this}},$v=Phaser.Utils.Objects.GetValue;class f9 extends fs{constructor(t,i){super(t,i),this.type="rexPerspectiveCard";var f=i.back,C=$v(i,"expand.back",!0);this.add(f,{key:"back",expand:C});var w=i.front,a=$v(i,"expand.front",!0);this.add(w,{key:"front",expand:a}),this.perspectiveCard=l9.call(this,i),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var i=t===0,f=this.childrenMap.front,C=this.childrenMap.back;this.setChildVisible(f,i),this.setChildVisible(C,!i)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,i,f,C,w,a){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,i,f,C,w,a),this}forEachFace(t,i,f){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,i,f),this}}Object.assign(f9.prototype,d9);var c9=function(s){var t=this.getElement("tabs.buttons");if(!(s>=t.length))return t[s].name},v9=function(s){for(var t=this.getElement("tabs.buttons"),i=0,f=t.length;i<f;i++)if(t[i].name===s)return i};const p9=Phaser.Utils.Objects.IsPlainObject,Wl=Phaser.Utils.Objects.GetValue,m9=Phaser.Utils.String.UUID;var g9=function(s,t,i){if(p9(s)){var f=s;s=Wl(f,"key"),t=Wl(f,"tab"),i=Wl(f,"page")}return s||(s=m9()),t.name=s,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:s}),this},y9=function(s,t){var i;if(typeof s=="number"?i=s:i=this.getPageIndex(s),i!=null){var f;t!==void 0&&(f=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(i),f!==void 0&&(this.childrenMap.pages.fadeInDuration=f)}return this},x9=function(s){return this.swapPage(0,s),this},T9=function(s){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,s),this};const C9={swapPage:y9,swapFirstPage:x9,swapLastPage:T9};var S9=function(s,t){typeof s=="number"&&(s=this.getPageKey(s));var i=this.childrenMap.tabs,f=i.getByName(s),C=this.childrenMap.pages,w=C.getElement(s);return!f||!w?this:(C.removeChildrenMap(s),i.removeButton(f,t),C.remove(w,t),this)};const E9={removePage:S9};var P9=function(s){return typeof s=="number"&&(s=this.getPageKey(s)),this.childrenMap.pages.getPage(s)},w9=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),this.getElement("tabs.buttons")[t]},vy={getPageKey:c9,getPageIndex:v9,addPage:g9,getPage:P9,getTab:w9};Object.assign(vy,C9,E9);const ar=Phaser.Utils.Objects.GetValue,lo=kt.prototype.add;class py extends kt{constructor(t,i){i===void 0&&(i={});var f=ar(i,"tabPosition","top"),C=f==="left"||f==="right"?"x":"y";i.orientation=C,super(t,i),this.type="rexTabPages";var w=ar(i,"background",void 0);w&&this.addBackground(w);var a=ar(i,"pages"),T=new uy(t,a);t.add.existing(T);var e=C==="y",u=e?ar(i,"wrapTabs",!1):!1,y=ar(i,"tabs",void 0);y===void 0&&(y={});var d=u?_n:Be;y.orientation=e?"x":"y",y.buttonsType="radio";var l=new d(t,y);t.add.existing(l);var h=u?!0:ar(i,"expand.tabs",!1),r=ar(i,"align.tabs","left");switch(f){case"top":case"left":lo.call(this,l,{proportion:0,expand:h,align:r}),lo.call(this,T,{proportion:1,expand:!0});break;case"bottom":case"right":lo.call(this,T,{proportion:1,expand:!0}),lo.call(this,l,{proportion:0,expand:h,align:r});break}this.addChildrenMap("background",w),this.addChildrenMap("tabs",l),this.addChildrenMap("pages",T),l.on("button.click",function(n){var v=n.name;T.hasPage(v)&&T.swapPage(v)}),l.on("button.statechange",function(n,v,o,c){var m=o?"tab.focus":"tab.blur";this.emit(m,n,n.name)},this),T.on("pagevisible",function(n,v,o){this.emit("page.focus",n,v)}),T.on("pageinvisible",function(n,v,o){this.emit("page.blur",n,v)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(py.prototype,vy);class M9 extends sh{constructor(t,i){i===void 0&&(i={}),i.destroy=!1,super(t,i)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const b9={expand(s){if(this.expanded===!0)return this;s===void 0&&(s=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,i=this.childrenMap.child;this.show(i);var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return f.layout(),t.emit("folder.expand",s,this),i.emit("folder.expand",s,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,s),this},collapse(s){if(this.expanded===!1)return this;s===void 0&&(s=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,i=this.childrenMap.child;return t.emit("folder.collapse",s,this),i.emit("folder.collapse",s,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(i,1,1).hide(i);var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();f.layout(),this.emit("collapse.complete",this)},this).requestClose(null,s),this},toggle(s){return this.expanded?this.collapse(s):this.expand(s),this}};var A9=function(s,t){vd.popUp.call(s,t,this.expandDirection)},R9=function(s,t){vd.scaleDown.call(s,t,this.expandDirection)};const O9={setTransitionDuration(s){return this.transitionDuration=s,this.childTransition.setTransitInTime(s).setTransitOutTime(s),this},setExpandCallback(s){return s===void 0&&(s=A9.bind(this)),this.childTransition.setTransitInCallback(s),this},setCollapseCallback(s){return s===void 0&&(s=R9.bind(this)),this.childTransition.setTransitOutCallback(s),this}},vi=Phaser.Utils.Objects.GetValue;class my extends kt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var f=i.background,C=i.title,w=i.child;f&&this.addBackground(f);var a=this.orientation===1?"left":"top",d=vi(i,"align.title",a),l=vi(i,"expand.title",!0);this.add(C,{proportion:0,align:d,expand:l});var T=vi(i,"toggleByTarget",void 0),e=vi(i,"toggleClickConfig");T===void 0&&(T=C),T&&ug.onClick.call(T,function(){this.toggle()},this,e),this.childTransition=new M9(w);var u=vi(i,"customChildOrigin",!1);if(!u){var y=this.rtl?1:0;w.setOrigin(y)}var d=vi(i,"align.child","left"),l=vi(i,"expand.child",!0),h=l?1:0;this.add(w,{proportion:h,align:d,expand:l}),this.addChildrenMap("title",C),this.addChildrenMap("child",w),this.addChildrenMap("background",f);var r=i.transition;this.setTransitionDuration(vi(r,"duration",200)),this.setExpandCallback(vi(r,"expandCallback",void 0)),this.setCollapseCallback(vi(r,"collapseCallback",void 0)),this.reLayoutTarget=vi(i,"reLayoutTarget",void 0);var n=i.onExpandStart;n&&this.on("expand.start",n);var v=i.onExpandComplete;v&&this.on("expand.complete",v);var o=i.onCollapseStart;o&&this.on("collapse.start",o);var c=i.onCollapseComplete;c&&this.on("collapse.complete",c)}}Object.assign(my.prototype,b9,O9);var L9=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,i=t.rexSizer;return i.hidden?s=0:this.scrollMode===0?s=this.getChildWidth(t):s=0,s},F9=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,i=t.rexSizer;return i.hidden||this.scrollMode===0?s=0:s=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:It(t),s},D9=function(s){return s===void 0&&(s=[]),this.child&&this.child.isRexSizer&&s.push(this.child),s},B9=function(){var s=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:s+=this.childOY,this.child.setPosition(s,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},I9=function(){var s=this.child,t,i;s.rexSizer.hidden||(this.scrollMode===0?t=this.width:i=this.height,s.isRexSizer?s.runLayout(this,t,i):Pi(s,t,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},gy={getChildrenWidth:L9,getChildrenHeight:F9,getChildrenSizers:D9,resetChildPosition:B9,layoutChildren:I9};Object.assign(gy,qg);const Kv=Phaser.Utils.Objects.IsPlainObject,pi=Phaser.Utils.Objects.GetValue,G9=Phaser.Display.Align.TOP_LEFT;class N9 extends Sr{constructor(t,i,f,C,w,a){Kv(i)?(a=i,i=pi(a,"x",0),f=pi(a,"y",0),C=pi(a,"width",void 0),w=pi(a,"height",void 0)):Kv(C)&&(a=C,C=pi(a,"width",void 0),w=pi(a,"height",void 0)),super(t,i,f,C,w,a),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(pi(a,"scrollMode",!0)),this.setClampMode(pi(a,"clamplChildOY",!0));var T=pi(a,"child",void 0),e=pi(a,"expand",!0);T.setOrigin&&T.setOrigin(0),this.add(T),this.sizerChildren=[T];var u=this.getSizerConfig(T);u.align=G9,u.expand=e,this.child=T,this.setupChildrenMask(pi(a,"mask",void 0)),this.maskGameObject=Od(this.childrenMask)}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Yg[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?It(this.child):Vt(this.child)}get childWidth(){return this.scrollMode===0?Vt(this.child):It(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var i=this.topChildOY,f=this.bottomChildOY,C=this.childOYExceedTop(t),w=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:C?t=i:w&&(t=f)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=C,w&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=w}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(N9.prototype,gy);Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;var Ta=function(s,t,i){i===void 0&&(i=!0),i?t=t?Si(t):{}:t||(t={});var f=new LA(s,t);return s.add.existing(f),f};const Ii=Phaser.Utils.Objects.GetValue,k9=Phaser.Display.Color,V9=Phaser.Display.Color.ColorToRGBA,U9=Phaser.Display.Color.HSVToRGB,or=Phaser.Math.Clamp;class z9 extends kt{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorComponents",this.colorObject=new k9;var f=Ii(i,"background",void 0),C=Ii(i,"formatLabel",void 0);yd(C)||(C=Xg(t,C).resetDisplayContent());var w=[];if(i.inputText0&&i.inputText1&&i.inputText2)w.push(i.inputText0),w.push(i.inputText1),w.push(i.inputText2);else for(var a=Ii(i,"inputText"),T=0;T<3;T++){var e=Ta(t,a).setMaxLength(3).setNumberInput();w.push(e)}f&&this.addBackground(f);var y=Ii(i,"proportion.formatLabel",0),u=!!C.isRexContainerLite,d=Ii(i,"expand.formatLabel",u);this.add(C,{proportion:y,expand:d});for(var y=Ii(a,"width")===void 0?1:0,d=Ii(a,"height")===void 0,T=0,l=w.length;T<l;T++)this.add(w[T],{proportion:y,expand:d});this.addChildrenMap("background",f),this.addChildrenMap("formatLabel",C),this.addChildrenMap("components",w),this.onClick(C,this.toggleColorFormat,this);for(var T=0,l=w.length;T<l;T++)w[T].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var h=Ii(i,"valuechangeCallback",null);if(h!==null){var r=Ii(i,"valuechangeCallbackScope",void 0);this.on("valuechange",h,r)}C.setText("RGB"),this.setValue(Ii(i,"value",16777215))}get value(){return this._value}set value(t){t=or(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(V9(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,i,f,C;return this.colorFormat==="RGB"?(i=this.colorObject.red,f=this.colorObject.green,C=this.colorObject.blue):(i=Math.floor(this.colorObject.h*360),f=Math.floor(this.colorObject.s*100),C=Math.floor(this.colorObject.v*100)),t[0].setValue(i),t[1].setValue(f),t[2].setValue(C),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var i=or(t[0].value,0,255),f=or(t[1].value,0,255),C=or(t[2].value,0,255);this.colorObject.setTo(i,f,C)}else{var w=or(t[0].value,0,359)/360,a=or(t[1].value,0,100)/100,T=or(t[2].value,0,100)/100;this.colorObject.setFromRGB(U9(w,a,T))}return this}}var X9=function(s,t){if(t===!1)return null;if(yd(t))return t;var i=new ln(s,t);return s.add.existing(i),i};const jv=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],Y9=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var Cu={},Jv;for(var uo=0,W9=jv.length;uo<W9;uo++)Jv=jv[uo].toLowerCase(),Cu[Jv]=Y9[uo];var H9=function(s){return s=s.toLowerCase(),Cu.hasOwnProperty(s)?Cu[s]:null},$9=function(s){return typeof s!="string"||(s.startsWith("#")?s=parseInt(s.substring(1),16):s.startsWith("0x")?s=parseInt(s.substring(2),16):s=H9(s)),s};const K9=Phaser.Utils.String.Pad;var Zv=function(s,t){t===void 0&&(t="0x");var i=s.toString(16).toUpperCase();return i=K9(i,6,0,1),i=t+i,i},j9=function(s,t){!s||(s.setTint?s.setTint(t):s.setFillStyle&&s.setFillStyle(t))};const ri=Phaser.Utils.Objects.GetValue,J9=Phaser.Utils.Objects.IsPlainObject,Z9=Phaser.Math.Clamp;class Q9 extends kt{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorInputLite";var f=ri(i,"background",void 0),C=ri(i,"swatch"),w;J9(C)&&(w=ri(C,"size"));var a=X9(t,ri(i,"swatch")),T=ri(i,"inputText",!0),e;if(T&&(e=Ta(t,T)),f&&this.addBackground(f),a){w=ri(i,"swatchSize",w);var u;w!==void 0?(Pi(a,w,w),u=!1):u=ri(i,"squareExpandSwatch",!0);var y=u?1:0;this.add(a,{proportion:0,expand:!1,fitRatio:y})}if(e){var d=ri(T,"width")===void 0?1:0,l=ri(T,"height")===void 0;this.add(e,{proportion:d,expand:l})}this.addChildrenMap("background",f),this.addChildrenMap("swatch",a),this.addChildrenMap("inputText",e),e&&e.on("close",function(){this.setValue(e.value)},this);var h=ri(i,"valuechangeCallback",null);if(h!==null){var r=ri(i,"valuechangeCallbackScope",void 0);this.on("valuechange",h,r)}this.setValue(ri(i,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=$9(t),t==null){var f=this.childrenMap.inputText;f&&f.setText(Zv(this._value));return}}else t=Z9(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var i=this.childrenMap.swatch;i&&j9(i,t);var f=this.childrenMap.inputText;f&&f.setText(Zv(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}}var q9={setCreateColorPickerBackgroundCallback(s){return this.colorPickerCreateBackgroundCallback=s,this},setColorPickerHPalettePosition(s){return this.colorPickerHPalettePosition=s,this},setColorPickerExpandDirection(s){return typeof s=="string"&&(s=_9[s]),this.colorPickerExpandDirection=s,this},setColorPickerEaseInDuration(s){return s===void 0&&(s=0),this.colorPickerEaseInDuration=s,this},setColorPickerEaseOutDuration(s){return s===void 0&&(s=0),this.colorPickerEaseOutDuration=s,this},setColorPickerTransitInCallback(s){return this.colorPickerTransitInCallback=s,this},setColorPickerTransitOutCallback(s){return this.colorPickerTransitOutCallback=s,this},setColorPickerBounds(s){return this.colorPickerBounds=s,this},setColorPickerWidth(s){return this.colorPickerWidth=s,this},setColorPickerHeight(s){return this.colorPickerHeight=s,this},setColorPickerSize(s,t){return this.setColorPickerWidth(s).setColorPickerHeight(t),this},setColorPickerSpace(s){return s===void 0&&(s={}),this.colorPickerSpace=s,this},setColorComponentsHeight(s){return this.colorComponentsHeight=s,this},setColorComponentsFormatLabelConfig(s){return this.colorComponentsFormatLabelConfig=s,this},setColorComponentsInputTextConfig(s){return this.colorComponentsInputTextConfig=s,this},setColorComponentsSpace(s){return s===void 0&&(s={}),this.colorComponentsSpace=s,this}};const _9={down:0,up:1},yy=Phaser.Display.Color,Io=Phaser.Math.Percent;var t8=function(s,t,i){i===void 0&&(i=!1);var f=s.width,C=s.height,w=new yy;if(i)for(var a=0;a<C;a++){var T=Io(a,0,C);w.setFromHSV(T,1,1),t.fillStyle=w.rgba,t.fillRect(0,a,f,1)}else for(var e=0;e<f;e++){var T=Io(e,0,f);w.setFromHSV(T,1,1),t.fillStyle=w.rgba,t.fillRect(e,0,1,C)}},e8=function(s,t,i){for(var f=s.width,C=s.height,w=t.getImageData(0,0,f,C),a=w.data,T=new yy,e=0;e<C;e++)for(var u=0;u<f;u++){var y=Io(u,0,f),d=1-Io(e,0,C);T.setFromHSV(i,y,d);var l=(e*f+u)*4;a[l]=T.red,a[l+1]=T.green,a[l+2]=T.blue,a[l+3]=255}t.putImageData(w,0,0)};const i8=Phaser.Display.Color,Qv=Phaser.Math.Percent,s8=Phaser.Display.Color.ColorToRGBA,r8=Phaser.Display.Color.HSVToRGB;class n8 extends eh{constructor(t,i,f,C,w,a){i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=2),super(t,i,f,C,w),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new i8,this.setOrientation(a),this.setSize(C,w)}setOrientation(t){return this.orientation=ah(t),this}updateTexture(){return t8(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,i){return t===void 0?this.hue:(this.orientation===0?this.hue=Qv(t,0,this.width):this.hue=Qv(i,0,this.height),this.hue)}getColor(t,i){if(t===void 0)return this.color;var f=this.getHue(t,i);return this.colorObject.setFromRGB(r8(f,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(Hl===void 0&&(Hl={}),i=Hl),this.colorObject.setFromRGB(s8(t)),this.orientation===0?(i.x=this.width*this.colorObject.h,i.y=this.height/2):(i.x=this.width/2,i.y=this.height*this.colorObject.h),i}}var Hl=void 0,a8=Phaser.Math.RotateAround,xy=function(s,t,i,f){f===void 0?f={}:f===!0&&($l===void 0&&($l={}),f=$l),t-=s.width*s.originX,i-=s.height*s.originY;var C={x:t*s.scaleX,y:i*s.scaleY};return a8(C,0,0,-s.rotation),f.x=s.x+t,f.y=s.y+i,f},$l;class o8 extends fs{constructor(t,i){i===void 0&&(i={}),super(t,i);var f=i.width!=null?1:0,C=new n8(t).setOrientation(f);t.add.existing(C),this.type="rexColorPicker.HPalette",C.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var w=new ln(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(w),this.add(C,{key:"paletteCanvas",expand:!0}).add(w,{key:"marker",expand:!1})}resize(t,i){if(this.width===t&&this.height===i)return this;super.resize(t,i);var f=Math.min(t,i);return this.childrenMap.marker.setSize(f,f),this}onPaletteCanvasPointerDown(t,i,f,C){if(!!t.isDown){var w=this.childrenMap.paletteCanvas,a=w.getColor(i,f);this.setMarkerPosition(a),this.emit("input",a)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,C=i.colorToLocalPosition(t,!0);return xy(i,C.x,C.y,f),this.resetChildPositionState(f),this}getHue(t,i){var f=this.childrenMap.paletteCanvas;return f.getHue(t,i)}}const h8=Phaser.Display.Color,qv=Phaser.Math.Percent,_v=Phaser.Display.Color.ColorToRGBA,l8=Phaser.Display.Color.HSVToRGB;class u8 extends eh{constructor(t,i,f,C,w,a){i===void 0&&(i=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=2),super(t,i,f,C,w),this.type="rexColorPicker.SVPaletteCanvas",a===void 0&&(a=1),this.colorObject=new h8,this.setHue(a),this.setSize(C,w)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return e8(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,i){if(t===void 0)return this.colorObject.color;var f=qv(t,0,this.width),C=1-qv(i,0,this.height);return this.colorObject.setFromRGB(l8(this.hue,f,C)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(_v(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(Kl===void 0&&(Kl={}),i=Kl),this.colorObject.setFromRGB(_v(t)),i.x=this.width*this.colorObject.s,i.y=this.height*(1-this.colorObject.v),i}}var Kl=void 0;class d8 extends fs{constructor(t,i){super(t,i);var f=new u8(t);t.add.existing(f),this.type="rexColorPicker.SVPalette",f.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var C=new ln(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(C),this.add(f,{key:"paletteCanvas",expand:!0}).add(C,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,i,f,C){if(!!t.isDown){var w=this.childrenMap.paletteCanvas,a=w.getColor(i,f);this.setMarkerPosition(a),this.emit("input",a)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var i=this.childrenMap.paletteCanvas;return i.setHue(t),this}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,C=i.colorToLocalPosition(t,!0);return xy(i,C.x,C.y,f),this.resetChildPositionState(f),this}}const mi=Phaser.Utils.Objects.GetValue;class f8 extends kt{constructor(t,i){super(t,i),this.type="rexColorPicker",this.freezePalettes=!1;var f=mi(i,"hPalette.position",0);typeof f=="string"&&(f=c8[f]);var C=f===0||f===2?1:0;this.setOrientation(C);var w=mi(i,"background",void 0),a,T;if(this.orientation===0){var a=mi(i,"hPalette.width",void 0);a===void 0&&(a=mi(i,"hPalette.size",10))}else T=mi(i,"hPalette.height",void 0),T===void 0&&(T=mi(i,"hPalette.size",10));var e=new o8(t,{width:a,height:T});t.add.existing(e);var u=mi(i,"svPalette.width",void 0),y=mi(i,"svPalette.height",void 0),d=new d8(t,{width:u,height:y});t.add.existing(d),w&&this.addBackground(w);var l={proportion:0,expand:!0},h,r;this.orientation===0?(h=u===void 0?1:0,r=y===void 0):(h=y===void 0?1:0,r=u===void 0);var n={proportion:h,expand:r};f===0||f===3?this.add(d,n).add(e,l):this.add(e,l).add(d,n),e.on("input",function(){d.setHue(e.getHue()),this.setValue(d.color,!0)},this),d.on("input",function(){this.setValue(d.color,!0)},this),this.addChildrenMap("background",w),this.addChildrenMap("hPalette",e),this.addChildrenMap("svPalette",d);var v=mi(i,"valuechangeCallback",null);if(v!==null){var o=mi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",v,o)}this.setValue(mi(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,i,this)}}setValue(t,i){return this.freezePalettes=!!i,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,i,f){return this.ignoreLayout?this:(super.runLayout(t,i,f),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}}var c8={bottom:0,left:1,top:2,right:3};const jl=Phaser.Utils.Objects.GetValue;class v8 extends kt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexColorInput.ColorPickerPanel";var f=jl(i,"background",void 0),C=new f8(t,{hPalette:i.hPalette||{},svPalette:i.svPalette||{},space:{item:jl(i,"space.hPalette",8)}});t.add.existing(C);var w;i.colorComponents&&(w=new z9(t,i.colorComponents),t.add.existing(w)),f&&(this.addBackground(f),new lg(f,{stopAllLevels:!1})),this.add(C,{proportion:1,expand:!0}),w&&this.add(w,{proportion:0,expand:!0}),this.addChildrenMap("background",f),this.addChildrenMap("colorPicker",C),this.addChildrenMap("colorComponents",w),C.on("valuechange",function(a){this.setValue(a)},this),w&&w.on("valuechange",function(a){this.setValue(a)},this),this.setValue(jl(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var i=this.childrenMap.colorPicker;i.setValue(t);var f=this.childrenMap.colorComponents;f&&f.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var p8=function(t){var t=this.scene,i,f=this.colorPickerCreateBackgroundCallback;f&&(i=f.call(this,t),t.add.existing(i));var C=this.colorPickerWidth;C===void 0&&(C=this.width);var w=this.colorPickerHeight;w===void 0&&(w=C);var a;this.colorComponentsHeight>0?a={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:a=!1;var T=new v8(t,{width:C,height:w,background:i,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:a,value:this.value});return t.add.existing(T),T},m8=function(){if(!this.colorPicker){var s=p8.call(this).layout(),t=new ny(s,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){s.on("valuechange",function(i){this.setValue(i)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=s,this.dropDownBehavior=t,this.pin(s),this}},Ty={openColorPicker:m8};Object.assign(Ty,q9);const be=Phaser.Utils.Objects.GetValue;class Cy extends Q9{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexColorInput",i.hasOwnProperty("colorPicker")||(i.colorPicker={background:{color:0}});var f=i.colorPicker,C=f!==!1&&f!==null;if(C){this.setColorPickerSize(be(f,"width",160),be(f,"height",170));var w,a=be(f,"background");a?w=function(h){return is(h,a)}:w=be(f,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(w),this.setColorPickerHPalettePosition(be(f,"hPalettePosition",0)),this.setColorPickerExpandDirection(be(f,"expandDirection")),this.setColorPickerEaseInDuration(be(f,"easeIn",200)),this.setColorPickerEaseOutDuration(be(f,"easeOut",200)),this.setColorPickerTransitInCallback(be(f,"transitIn")),this.setColorPickerTransitOutCallback(be(f,"transitOut")),this.setColorPickerBounds(be(f,"bounds"));var T=be(f,"space");T===void 0&&(T={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(T)}var e=i.colorComponents,u=e!==!1&&e!==null;if(C&&u){this.setColorComponentsHeight(be(e,"height",30)),this.setColorComponentsFormatLabelConfig(be(e,"formatLabel"));var y=be(e,"inputText");y||(y=be(i,"inputText")),this.setColorComponentsInputTextConfig(y);var d=be(e,"space");d===void 0&&(d={item:8}),this.setColorComponentsSpace(d)}var l=this.childrenMap.swatch;l&&C&&this.onClick(l,this.openColorPicker,this)}}Object.assign(Cy.prototype,Ty);class Sy extends vn{constructor(t,i){i=wd(t,i),super(t,i),this.type="rexTweaker.Title"}setTitle(t){return t=t?Si(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class g8 extends Sy{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTweaker.FolderTitle";var f=new Jm(t,i.expandedIcon);t.add.existing(f),this.addSpace().add(f,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",f)}setExpandedState(t){t===void 0&&(t=!0);var i=t?"down":"right",f=this.childrenMap.expandedIcon;return f.setDirection(i),this}}var Ey=function(s,t){var i=new By(s,t);return s.add.existing(i),i},Fd=function(s,t,i){return is(s,i)};const y8={setBindingTarget(s){var t=this.childrenMap.child;return t.setBindingTarget(s),this}},x8={getMaxInputRowTitleWidth(){var s=this.childrenMap.child,t=s.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(s){s-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(s),this}};class Py extends my{constructor(t,i){super(t,i),this.type="rexTweaker.Folder"}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}}Object.assign(Py.prototype,y8,x8);const Wr=Phaser.Utils.Objects.GetValue;var T8=function(s,t,i){var f=Wr(i,"title")||{},C=new g8(s,f);s.add.existing(C),C.on("folder.expand",function(){C.setExpandedState(!0)}).on("folder.collapse",function(){C.setExpandedState(!1)});var w={root:Wr(i,"root"),styles:Wr(i,"tweaker"),space:Wr(i,"space")||{}},a=Ey(s,w),T=Wr(i,"background"),e=Fd(s,t,T),u=new Py(s,{orientation:1,title:C,child:a,background:e,transition:{duration:Wr(i,"transition.duration",200)}});return s.add.existing(u),u};const tp=Phaser.Utils.Objects.GetValue;var C8=function(s){var t=this.scene,i=tp(this.styles,"folder")||{};i.tweaker=this.styles,i.root=this.root;var f=T8(t,s,i);delete i.tweaker,delete i.root,this.add(f,{expand:!0}),f.setTitle(s);var C=tp(s,"expanded",!0);C?f.expand(0):f.collapse(0);var w=f.getElement("child");return s.key&&this.root.addChildrenMap(s.key,w),w};const S8={setBindingTarget(s){for(var t=this.childrenMap.pages.children,i=0,f=t.length;i<f;i++)t[i].setBindingTarget(s);return this}},E8={getMaxInputRowTitleWidth(){for(var s=0,t=this.childrenMap.pages.children,i=0,f=t.length;i<f;i++)s=Math.max(s,t[i].getMaxInputRowTitleWidth());return s+this.getInnerPadding("left")},setInputRowTitleWidth(s){s-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,i=0,f=t.length;i<f;i++)t[i].setInputRowTitleWidth(s);return this}};class wy extends py{constructor(t,i){super(t,i),this.type="rexTweaker.TabPages"}}Object.assign(wy.prototype,S8,E8);var P8=function(s,t){var i=new w8(s,t);return s.add.existing(i),i};class w8 extends ln{constructor(t,i){i===void 0&&(i={}),super(t,i);var f=du(i,"active");for(var C in f){var w=M8[C]||C,a=f[C];delete f[C],f[w]=a}this.activeStyle=f}modifyStyle(t){for(var i in t)this[i]=t[i];return this}setActiveState(t){if(t===void 0&&(t=!0),this.activeState===t)return this;if(this.activeState=t,t){var i=this.activeStyle,f=Qu(this,i);if(qu(i,f))return;this.styleSave=f,this.modifyStyle(i)}else{if(!this.styleSave)return this;this.modifyStyle(this.styleSave),this.styleSave=void 0}return this}}const M8={color:"fillColor",alpha:"fillAlpha",strokeColor:"strokeColor",strokeAlpha:"strokeAlpha",strokeWidth:"lineWidth"};var b8=function(s,t){var i=new _0(s,0,0,"",t);return s.add.existing(i),i},A8=function(s,t,i){return i===void 0&&(i=!0),i?t=t?Si(t):{}:t||(t={}),t.background=P8(s,t.background),t.text=b8(s,t.text),t.icon!==null&&(t.icon=Bo(s,t.icon)),t.action!==null&&(t.action=Bo(s,t.action)),t},Dd=function(s,t){t=A8(s,t);var i=new R8(s,t);return s.add.existing(i),i};class R8 extends vn{setActiveState(t){return this.childrenMap.background.setActiveState(t),this}}const fo=Phaser.Utils.Objects.GetValue;var O8=function(s,t,i){var f=new wy(s,i);s.add.existing(f);for(var C=fo(i,"tab"),w={root:fo(i,"root"),styles:fo(i,"tweaker")},a=fo(t,"pages")||[],T=0,e=a.length;T<e;T++){var u=a[T];f.addPage({key:u.title,tab:Dd(s,C).setActiveState(!1).resetDisplayContent({text:u.title}),page:Ey(s,w)})}return f.on("tab.focus",function(y,d){y.setActiveState(!0)}).on("tab.blur",function(y,d){y.setActiveState(!1)}),f};const ep=Phaser.Utils.Objects.GetValue;var L8=function(s){var t=this.scene,i=ep(this.styles,"tab")||{};i.tweaker=this.styles,i.root=this.root;var f=O8(t,s,i);delete i.tweaker,delete i.root,this.add(f,{expand:!0});for(var C=ep(s,"pages")||[],w=[],a=0,T=0,e=C.length;T<e;T++){var u=f.getPage(T),y=C[T].show;y&&(a=T);var d=C[T].key;d&&this.root.addChildrenMap(d,u),w.push(u)}return f.swapPage(a,0),w};const So="string",My="number",by="range",Ay="list",F8="buttons",Ry="boolean",D8="toggleSwitch",B8="color";var I8=function(s,t,i){if(i.view)return i.view;if(i.options)return Ay;if(!s)return So;var f=s[t];switch(typeof f){case"number":return G8(i,"min","max")?by:My;case"string":return So;case"boolean":return Ry;default:return So}},G8=function(s,...t){for(var i=0,f=t.length;i<f;i++)if(s[t[i]]===void 0)return!1;return!0};const N8={setupBinding(){var s=this.childrenMap.inputField;return s.on("valuechange",function(t){!this.bindingTarget||!this.autoUpdateEnable||(this.bindingTarget[this.bindTargetKey]=t)},this),this},setAutoUpdateEnable(s){return s===void 0&&(s=!0),this.autoUpdateEnable=s,this},setBindingTarget(s,t){return this.bindingTarget=s,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(s){return this.bindTargetKey=s,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var s=this.childrenMap.inputField;return s.syncValue(this.bindingTarget[this.bindTargetKey]),this}},k8={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(!!this.bindingTarget){var s=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==s&&t.syncValue(s)}}},V8={getMinTitleWidth(){var s=this.childrenMap.title;if(!s)return 0;var t=s.rexSizer.padding,i=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return i+this.getInnerPadding("left")},setMinTitleWidth(s){var t=this.childrenMap.title;if(!t)return this;var i=t.rexSizer.padding;return s-=i.left+i.right,t.minWidth=s,this}},Jl=Phaser.Utils.Objects.GetValue;class Bd extends kt{constructor(t,i){super(t,i),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var f=i.inputTitle,C=i.inputField,w=i.background,u=Jl(i,"proportion.title",0),a=Jl(i,"space.title",0),T;this.orientation===0?T={right:a}:T={bottom:a},this.add(f,{proportion:u,expand:!0,padding:T});var e=i.parentOrientation===1?1:0,u=Jl(i,"proportion.inputField",e);this.add(C,{proportion:u,expand:!0}),w&&this.addBackground(w),this.addChildrenMap("title",f),this.addChildrenMap("inputField",C),this.addChildrenMap("background",w),this.setupBinding()}destroy(t){!this.scene||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Bd.prototype,N8,k8,V8);var Oy=function(s,t,i){var f=new Sy(s,i);return s.add.existing(f),f};class ks extends kt{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(t){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(t,this._value,this.bindingTarget,this.bindingKey)}set value(t){if(this._value!==t){var i=this._value;this._value=t,this.syncValueFlag||this.emit("valuechange",t,i,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(t){return this.value=t,this}syncValue(t){return this.syncValueFlag=!0,this.value=t,this.syncValueFlag=!1,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}setValidateCallback(t){return this.validateCallback=t,this}}class U8 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.TextInput";var f=i.inputText,C=Ta(t,f);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var i=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(i),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var ip=function(s,t,i){var f=new U8(s,i);return s.add.existing(f),f.setInputTextReadOnly(!!t.inputTextReadOnly),f};class z8 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.NumberInput";var f=i.inputNumber||i.inputText,C=Ta(t,f).setNumberInput();this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var i=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(i),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var X8=function(s,t,i){var f=new z8(s,i);return s.add.existing(f),f.setInputTextReadOnly(!!t.inputTextReadOnly),f},Y8=function(s,t){var i=new ta(s,t);return s.add.existing(i),i};const Zl=Phaser.Utils.Objects.GetValue,W8=Phaser.Math.Linear,H8=Phaser.Math.Snap.Floor;class $8 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.RangeInput";var f=i.slider,C=this.orientation===0?"track.height":"track.width",w=Zl(f,C),a=Y8(t,f),y=i.parentOrientation===1?2:0,d=Zl(i,"proportion.range.slider",y),T=w===void 0;this.add(a,{proportion:d,expand:T});var e=i.inputNumber||i.inputText,u=Ta(t,e).setNumberInput(),y=i.parentOrientation===1?1:0,d=Zl(i,"proportion.range.inputText",y);this.add(u,{proportion:d,expand:!0}),this.addChildrenMap("slider",a),this.addChildrenMap("inputText",u),u.on("close",function(){this.setValue(u.value)},this),a.on("valuechange",function(){var l=W8(this.minValue,this.maxValue,a.value);this.step&&(l=H8(l,this.step,this.minValue)),this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var i=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(i),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,i,f){return this.minValue=t,this.maxValue=i,this.step=f,this.childrenMap.slider.setGap(f,t,i),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var K8=function(s,t,i){var f=new $8(s,i);return s.add.existing(f),f.setRange(t.min,t.max,t.step),f.setInputTextReadOnly(!!t.inputTextReadOnly),f},j8=function(s,t,i){i===void 0&&(i=!0),i?t=t?Si(t):{}:t||(t={});var f=t.label||t.button,C=t.button||t.label;delete t.label,delete t.button;var w=wd(s,f);return w.list=t,w.list.createButtonCallback=function(a,T){var e=Dd(a,C).resetDisplayContent({text:T.text});return e},w.list.onButtonOver=function(a,T,e,u){a.setActiveState(!0)},w.list.onButtonOut=function(a,T,e,u){a.setActiveState(!1)},w},J8=function(s,t){t=j8(s,t);var i=new oy(s,t);return s.add.existing(i),i},Ly=function(s,t){for(var i=0,f=s.length;i<f;i++){var C=s[i];if(C.value===t)return C.text}},Fy=function(s,t){for(var i=0,f=s.length;i<f;i++){var C=s[i];if(C.text===t)return C.value}};class Z8 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.ListInput";var f=J8(t,i.list);this.add(f,{proportion:1,expand:!0}),this.addChildrenMap("list",f),f.on("button.click",function(C,w,a,T,e,u){var y=Fy(f.options,a.text);this.setValue(y)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var i=this.childrenMap.list,f=Ly(i.options,t);i.resetDisplayContent({text:f}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}}var Q8=function(s,t,i){var f=new Z8(s,i);return s.add.existing(f),f.setOptions(t.options),f},Dy=function(s,t){var i=new Be(s,t);return s.add.existing(i),i},q8=function(s,t){for(var i=0,f=s.length;i<f;i++){var C=s[i];!C||C.setActiveState(C.text===t)}};const _8=Phaser.Utils.Objects.GetValue;class t7 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.ButtonsInput";var f=i.button?Si(i.button):{},C=_8(f,"expand",!0);C&&(f.align="center"),delete f.expand;var w=Dy(t,{expand:C});w.buttonConfig=f,this.add(w,{proportion:1,expand:!0}),this.addChildrenMap("list",w),w.on("button.click",function(a,T,e,u){var y=Fy(w.options,a.text);this.setValue(y)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var i=this.childrenMap.list,f=Ly(i.options,t);q8(i.childrenMap.buttons,f),super.value=t}}setOptions(t){var i=this.childrenMap.list;i.options=t;var f=this.scene,C=i.buttonConfig;i.clearButtons(!0);for(var w=0,a=t.length;w<a;w++){var T=t[w],e=Dd(f,C).setActiveState(!1).resetDisplayContent({text:T.text});i.addButton(e)}return this}}var e7=function(s,t,i){var f=new t7(s,i);return s.add.existing(f),f.setOptions(t.options),f},i7=function(s,t){var i=new CR(s,t);return s.add.existing(i),i};const s7=Phaser.Utils.Objects.GetValue;class r7 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.CheckboxInput";var f=i.checkbox,C=i7(t,f),w=s7(f,"size");w!==void 0&&C.setSize(w,w);var a=w!==void 0?0:1;this.add(C,{proportion:0,expand:!1,fitRatio:a}),this.addChildrenMap("checkbox",C),C.on("valuechange",function(T){this.setValue(T)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.checkbox.setValue(t),super.value=t)}}var n7=function(s,t,i){var f=new r7(s,i);return s.add.existing(f),f},a7=function(s,t){var i=new OR(s,t);return s.add.existing(i),i};const o7=Phaser.Utils.Objects.GetValue;class h7 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var f=i.toggleSwitch,C=a7(t,f),w=o7(f,"size");w!==void 0&&C.setSize(w,w);var a=w!==void 0?0:1;this.addSpace().add(C,{proportion:0,expand:!1,fitRatio:a}),this.addChildrenMap("toggleSwitch",C),C.on("valuechange",function(T){this.setValue(T)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.toggleSwitch.setValue(t),super.value=t)}}var l7=function(s,t,i){var f=new h7(s,i);return s.add.existing(f),f},u7=function(s,t,i){i===void 0&&(i=!0),i?t=t?Si(t):{}:t||(t={});var f=new Cy(s,t);return s.add.existing(f),f};class d7 extends ks{constructor(t,i){i===void 0&&(i={}),super(t),this.type="rexTweaker.ColorInput";var f=i.colorInput,C=u7(t,f);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",C),C.on("valuechange",function(w){this.setValue(w)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.colorInput.setValue(t),super.value=t)}}var f7=function(s,t,i){var f=new d7(s,i);return s.add.existing(f),f},c7=function(s,t,i){var f=t.view,C;switch(f){case So:C=ip;break;case My:C=X8;break;case by:C=K8;break;case Ay:C=Q8;break;case F8:C=e7;break;case Ry:C=n7;break;case D8:C=l7;break;case B8:C=f7;break;default:C=pa(f)?f:ip;break}var w=C(s,t,i,w);return w.setTextFormatCallback(t.format),w};const sp=Phaser.Utils.Objects.GetValue;var v7=function(s,t,i){var f=sp(i,"title")||{},C=Oy(s,t,f),w=c7(s,t,i),a=sp(i,"background")||{},T=is(s,a),e=new Bd(s,{...t,...i,inputTitle:C,inputField:w,background:T});return s.add.existing(e),e.setTitle(t),e};Phaser.Utils.Objects.GetValue;var p7=function(s,t,i){arguments.length===1?(i=s,s=i.bindingTarget,t=i.bindingKey):i===void 0&&(i={}),i.title||(i.title=t),i.view||(i.view=I8(s,t,i));var f=this.styles.inputRow||{};f.parentOrientation=this.styles.orientation;var C=v7(this.scene,i,f),w=C.childrenMap.inputField,a;return this.orientation===1?a=0:(a=this.itemWidth>0?0:1,C.setMinWidth(this.itemWidth)),this.add(C,{proportion:a,expand:!0}),i.onValueChange&&w.on("valuechange",i.onValueChange),i.onValidate&&w.setValidateCallback(i.onValidate),C.setAutoUpdateEnable(i.autoUpdate),C.setBindingTarget(s,t),i.monitor&&C.startMonitorTarget(),i.key&&this.root.addChildrenMap(i.key,C),this};const Ql=Phaser.Utils.Objects.GetValue;var m7=function(s,t,i){for(var f=Ql(i,"title")||{},C=Oy(s,t,f),w=t.buttons,a=Ql(i,"button")||{},T=[],e=0,u=w.length;e<u;e++){var y=Xg(s,a);T.push(y);var d=w[e];y.resetDisplayContent({text:d.label}),y.callback=d.callback}var l=Dy(s,{buttons:T,expand:T.length===1}),h=Ql(i,"background")||{},r=is(s,h),n=new Bd(s,{...i,inputTitle:C,inputField:l,background:r});return s.add.existing(n),n.setTitle(t),l.on("button.click",function(v){v.callback(n.bindingTarget)}),n};const g7=Phaser.Utils.Objects.GetValue;var rp=function(s){var t=this.scene;s===void 0&&(s={}),s.hasOwnProperty("label")&&(s.buttons=[{label:s.label,callback:s.callback}],delete s.label,delete s.callback);var i=s.bindingTarget;delete s.bindingTarget;var f=g7(this.styles,"inputRow")||{},C=m7(t,s,f);return this.add(C,{expand:!0}),i&&C.setBindingTarget(i),s.key&&this.root.addChildrenMap(s.key,C),this};const y7=Phaser.Utils.Objects.GetValue;var x7=function(s){var t=this.scene,i=y7(this.styles,"separator"),f=Fd(t,s,i);return this.add(f,{expand:!0}),this},T7=function(s){for(var t=this.sizerChildren,i=0,f=t.length;i<f;i++){var C=t[i];!C.setBindingTarget||C.setBindingTarget(s)}return this},C7=function(){for(var s=0,t=this.sizerChildren,i=0,f=t.length;i<f;i++){var C=t[i];C.rexSizer.hidden||(C.getMinTitleWidth?s=Math.max(s,C.getMinTitleWidth()):C.getMaxInputRowTitleWidth&&(s=Math.max(s,C.getMaxInputRowTitleWidth())))}return s+this.getInnerPadding("left")},S7=function(s){s-=this.getInnerPadding("left");for(var t=this.sizerChildren,i=0,f=t.length;i<f;i++){var C=t[i];C.rexSizer.hidden||(C.setMinTitleWidth?C.setMinTitleWidth(s):C.setInputRowTitleWidth&&C.setInputRowTitleWidth(s))}return this},E7={addFolder:C8,addTab:L8,addInput:p7,addButton:rp,addButtons:rp,addSeparator:x7,setBindingTarget:T7,getMaxInputRowTitleWidth:C7,setInputRowTitleWidth:S7};const co=Phaser.Utils.Objects.GetValue;class By extends kt{constructor(t,i){if(i===void 0&&(i={}),i.orientation===void 0&&(i.orientation=1),super(t,i),this.type="rexTweakerShell",this.root=i.root||this,this.styles=co(i,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=co(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var f=co(i,"inputRow.alignTitle");if(f===void 0){var C=co(this.styles,"inputRow.proportion.title");f=!C}else f&&hr(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=f}else this.alignInputRowTitle=!1;var w=Fd(t,void 0,i.background);w&&this.addBackground(w)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}}Object.assign(By.prototype,E7);var P7=function(){return function(s,t,i,f){t!=="panel"&&i.setChildVisible(s,!0)}},w7=function(){return function(s,t,i,f){t!=="panel"&&i.setChildVisible(s,!1)}};const M7={show:P7,hide:w7};var b7=function(s,t){return t===void 0&&(t=1),function(i,f,C,w){f!=="panel"&&C.fadeChild(i,w?0:s,t)}},A7=function(s,t){return t===void 0&&(t=0),function(i,f,C,w){f!=="panel"&&C.fadeChild(i,w?0:s,t)}};const R7={show:b7,hide:A7};var np=function(s,t){return function(i,f,C,w){f!=="panel"&&C.moveChild(i,w?0:s,t)}};const O7={show:np,hide:np};var ap=function(s,t){return function(i,f,C,w){f==="panel"&&C.moveChild(i,w?0:s,t)}};const L7={show:ap,hide:ap},ql={visible:M7,fade:R7,move:O7,"move-panel":L7};var F7=function(s){var t,i;[t,...i]=typeof s=="string"?[s]:s;var f,C;return ql.hasOwnProperty(t)?(f=ql[t].show.apply(null,i),C=ql[t].hide.apply(null,i)):(f=Ui,C=Ui),{show:f,hide:C}};const D7={showChild(s,t){var i=this.sizerChildren[s];return i&&(this.emit("showchild",i,s,this,t),this.resetChildState(i)),this},hideChild(s,t){var i=this.sizerChildren[s];return i&&(this.emit("hidechild",i,s,this,t),this.resetChildState(i)),this},swapChild(s,t){return this.currentChildKey===s||(this.currentChildKey==="panel"||s==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=s,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(s,t))),this},showPanel(s){return this.swapChild("panel",s),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var s=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(s),this},toggleRightSide(){var s=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(s),this},toggleTopSide(){var s=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(s),this},toggleBottomSide(){var s=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(s),this}},B7=wi.prototype.setChildVisible,I7={setChildVisible(s,t){var i;if(typeof s=="string"){var i=s;s=this.sizerChildren[i]}else i=nh(this.sizerChildren,s);return t===void 0&&(t=this.currentChildKey===i),B7.call(this,s,t),this}},G7={fadeChild(s,t,i){var f;return typeof s=="string"?(f=s,s=this.sizerChildren[f]):f=nh(this.sizerChildren,s),t===void 0&&(t=500),i===void 0&&(i=this.currentChildKey===f?1:0),s.fadeIn(t,{start:s.alpha,end:i}),this},fadeChildPromise(s,t,i){return typeof s=="string"&&(s=this.sizerChildren[key]),this.fadeChild(s,t,i),s._fade?Oe(s._fade):Promise.resolve()}},N7={moveChild(s,t,i,f){var C;typeof s=="string"?(C=s,s=this.sizerChildren[C]):C=nh(this.sizerChildren,s),t===void 0&&(t=500);var w=this.currentChildKey===C;if(f===void 0)switch(C){case"leftSide":case"rightSide":f=Vt(s);break;case"topSide":case"bottomSide":f=It(s);break;default:if(w)switch(this.previousChildKey){case"leftSide":case"rightSide":f=Vt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=It(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=Vt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=It(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var a,T,e,u;if(w)switch(C){case"panel":switch(this.previousChildKey){case"leftSide":a=!0;break;case"rightSide":T=!0;break;case"topSide":e=!0;break;case"bottomSide":u=!0;break}break;case"leftSide":T=!0;break;case"rightSide":a=!0;break;case"topSide":u=!0;break;case"bottomSide":e=!0;break}else switch(C){case"panel":switch(this.currentChildKey){case"leftSide":T=!0;break;case"rightSide":a=!0;break;case"topSide":u=!0;break;case"bottomSide":e=!0;break}break;case"leftSide":a=!0;break;case"rightSide":T=!0;break;case"topSide":e=!0;break;case"bottomSide":u=!0;break}return a?s.moveTo(t,`-=${f}`,void 0,i):T?s.moveTo(t,`+=${f}`,void 0,i):e?s.moveTo(t,void 0,`-=${f}`,i):u?s.moveTo(t,void 0,`+=${f}`,i):s.moveTo(0),this},moveChildPromise(s,t,i,f){return typeof s=="string"&&(s=this.sizerChildren[key]),this.moveChild(s,t,i,f),s._easeMove?Oe(s._easeMove):Promise.resolve()}};var Iy={};Object.assign(Iy,I7,G7,N7);const He=Phaser.Utils.Objects.GetValue;class k7 extends fs{constructor(t,i){super(t,i),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=He(i,"showChildCallback",void 0);if(f)if(pa(f)){var C=He(i,"showChildCallbackScope",void 0);this.on("showchild",f,C);var w=He(i,"hideChildCallback",void 0),a=He(i,"hideChildCallbackScope",void 0);this.on("hidechild",w,a)}else{var T=F7(f);this.on("showchild",T.show),this.on("hidechild",T.hide)}var e=He(i,"background",void 0),u=He(i,"panel",void 0),y=He(i,"leftSide",void 0),d=He(i,"rightSide",void 0),l=He(i,"topSide",void 0),h=He(i,"bottomSide",void 0);if(e&&this.addBackground(e),u&&this.add(u,"panel","center",0,!0),y){var r=He(i,"expand.left",!0);this.add(y,"leftSide","left-top",0,{height:r})}if(d){var r=He(i,"expand.right",!0);this.add(d,"rightSide","right-top",0,{height:r})}if(l){var r=He(i,"expand.top",!0);this.add(l,"topSide","left-top",0,{width:r})}if(h){var r=He(i,"expand.bottom",!0);this.add(h,"bottomSide","left-bottom",0,{width:r})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(k7.prototype,D7,Iy);Phaser.Utils.Objects.GetValue;Phaser.Math.Distance.Between;Phaser.Math.RotateAroundDistance;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetAdvancedValue;Phaser.Math.Linear;Phaser.Math.RotateAround;Phaser.Geom.Mesh.Vertex;Phaser.Geom.Mesh.Face;Phaser.GameObjects.Mesh;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var qr=void 0,V7=function(s){s!==qr&&(qr!==void 0&&qr.close(),qr=s)},U7=function(s){s===qr&&(qr=void 0)};const Qi=Phaser.Utils.Objects.GetValue,z7=Phaser.Utils.Objects.Clone;var X7=function(s,t){t===void 0&&(t={}),t=z7(t);var i=s.scene,f=s.style,C=Qi(t,"backgroundColor",f.backgroundColor);C===null&&(C="transparent"),t.text=Qi(t,"text",s.text),t.fontFamily=Qi(t,"fontFamily",f.fontFamily),t.fontSize=Qi(t,"fontSize",f.fontSize),t.color=Qi(t,"color",f.color),t.backgroundColor=C,t.direction=Qi(t,"rtl",f.rtl)?"rtl":"ltr",t.align=Qi(t,"align",Y7(f)),t.direction==="rtl"&&Pd(s)&&(t.align="right");var w=new wg(i,s.x,s.y,Qi(t,"width",s.width),Qi(t,"height",s.height),t);w.setOrigin(s.originX,s.originY).setScrollFactor(s.scrollFactorX,s.scrollFactorY);var a=s.parentContainer;return a?a.add(w):i.add.existing(w),w},Y7=function(s){return s.hasOwnProperty("align")?s.align:s.hasOwnProperty("halign")?s.halign:"left"};const vo=Phaser.Utils.Objects.GetValue,W7=Phaser.Utils.Objects.Merge;var H7=function(s,t){s===void 0&&(s={}),s=W7(s,this.openConfig),V7(this),pa(s)&&(t=s,s=void 0),t===void 0&&(t=vo(s,"onClose",void 0));var i=vo(s,"onOpen",void 0),f=vo(s,"onTextChanged",void 0);return this.inputText=X7(this.parent,s).on("textchange",function(C){var w=C.text;f?f(this.parent,w):this.parent.text=w},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,vo(s,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),i&&i(this.parent),this.emit("open",this.parent)},[],this),this},$7=function(){return U7(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},K7={open:H7,close:$7};const j7=Phaser.Utils.Objects.GetValue;class J7 extends Ne{constructor(t,i){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(i);var f=j7(i,"clickEnable",!0);f&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(J7.prototype,K7);class Z7 extends rt.Scene{constructor(){super("options");$(this,"soundVolume");$(this,"musicVolume");$(this,"info");$(this,"soundLabel");$(this,"musicLabel");$(this,"backLabel");$(this,"soundSample");$(this,"musicSample");$(this,"previousSoundVolume",0);$(this,"previousMusicVolume",0);$(this,"cursors");$(this,"arrow");$(this,"activeItem",0);$(this,"arrowY",460);$(this,"arrowX",400);$(this,"lastUpdate",0);this.info={soundVolume:1,musicVolume:.5}}preload(){var f,C;Ge(this),this.load.image("arrow","assets/arrow.webp");let i=window.localStorage.getItem("ra8bit.audio");if(i!=null){let w=JSON.parse(i);this.info=w}((f=this.info)==null?void 0:f.musicVolume)===void 0&&(this.info.musicVolume=.5),((C=this.info)==null?void 0:C.soundVolume)===void 0&&(this.info.soundVolume=1),globalThis.musicVolume=this.info.musicVolume,globalThis.soundVolume=this.info.soundVolume,this.previousSoundVolume=globalThis.soundVolume,this.previousMusicVolume=globalThis.musicVolume}saveSettings(){this.info.musicVolume=globalThis.musicVolume,this.info.soundVolume=globalThis.soundVolume;let i=JSON.stringify(this.info);window.localStorage.setItem("ra8bit.audio",i)}playSound(){this.soundSample.play({volume:globalThis.soundVolume,delay:.2})}playMusic(){this.musicSample.play({volume:globalThis.musicVolume})}create(){const{width:i,height:f}=this.scale;this.input.setDefaultCursor("url(assets/hand.cur), pointer"),Go(this),this.soundSample=_i(this,"jump",!1,!1),this.musicSample=_i(this,"theme",!1,!1),this.add.image(i/2,128,"logo").setDisplaySize(306,131).setOrigin(.5),this.soundVolume=new ta(this,{x:i/2,y:300,width:500,height:48,orientation:"x",value:globalThis.soundVolume,background:this.add.rectangle(0,0,200,20,2239324),track:this.add.rectangle(0,0,180,16,20384),thumb:this.add.rectangle(100,0,64,64,10072254),valuechangeCallback:function(C){globalThis.soundVolume=C},space:{top:4,bottom:4},enable:!0,input:"drag"}).layout(),this.add.existing(this.soundVolume),this.soundLabel=this.add.bitmapText(i/2,240,"press_start","Sound Volume",24).setTint(16777215).setOrigin(.5,.1).setInteractive().on("pointerdown",()=>{this.highlightActive(0)}).on("pointerup",()=>{}),this.musicVolume=new ta(this,{x:i/2,y:500,width:500,height:48,orientation:"x",value:globalThis.musicVolume,background:this.add.rectangle(0,0,200,20,2239324),track:this.add.rectangle(0,0,180,16,20384),thumb:this.add.rectangle(100,0,64,64,10072254),valuechangeCallback:function(C){globalThis.musicVolume=C},space:{top:4,bottom:4},enable:!0,input:"drag"}).layout(),this.musicLabel=this.add.bitmapText(i/2,440,"press_start","Music Volume",24).setTint(16777215).setOrigin(.5,.1).setInteractive().on("pointerdown",()=>{this.highlightActive(1)}).on("pointerup",()=>{}),this.add.existing(this.musicVolume),this.backLabel=this.add.bitmapText(i/2,620,"press_start","Back",32).setOrigin(.5).setTint(16777215),this.backLabel.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.continueGame()}).on("pointerdown",()=>{this.highlightActive(2)}),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.saveSettings()}),this.previousSoundVolume=globalThis.soundVolume,this.previousMusicVolume=globalThis.musicVolume}highlightActive(i){switch(i){case 0:this.soundLabel.setTint(16741120),this.musicLabel.setTint(16777215),this.backLabel.setTint(16777215);break;case 1:this.soundLabel.setTint(16777215),this.musicLabel.setTint(16741120),this.backLabel.setTint(16777215);break;case 2:this.soundLabel.setTint(16777215),this.musicLabel.setTint(16777215),this.backLabel.setTint(16741120);break}this.activeItem=i}update(i,f){var w,a,T,e,u,y,d,l,h;if(i<this.lastUpdate)return;let C=!1;if(Mu(this)&&(C=!0),this.lastUpdate=i+120,((w=this.cursors)==null?void 0:w.down.isDown)||Vo(this))this.activeItem--;else if(((a=this.cursors)==null?void 0:a.up.isDown)||ko(this))this.activeItem++;else if(((T=this.cursors)==null?void 0:T.shift.isDown)||((e=this.cursors)==null?void 0:e.space.isDown)||_e(this,-1))switch(this.activeItem){case 2:this.continueGame();break;case 0:this.playSound();break;case 1:this.playMusic();break}else if(bu(this)||((u=this.cursors)==null?void 0:u.right.isDown))switch(this.activeItem){case 0:{let r=this.soundVolume.getValue();r+=.05,r>1&&(r=1),this.soundVolume.setValue(r);break}case 1:{let r=this.musicVolume.getValue();r+=.05,r>1&&(r=1),this.musicVolume.setValue(r);break}}else if(Au(this)||((y=this.cursors)==null?void 0:y.left.isDown))switch(this.activeItem){case 0:{let r=this.soundVolume.getValue();r-=.05,r>1&&(r=1),this.soundVolume.setValue(r);break}case 1:{let r=this.musicVolume.getValue();r-=.05,r>1&&(r=1),this.musicVolume.setValue(r);break}}this.activeItem<0?this.activeItem=2:this.activeItem>2&&(this.activeItem=0),this.highlightActive(this.activeItem),C?((d=this.arrow)==null||d.setVisible(!0),(l=this.arrow)==null||l.setPosition(this.arrowX,this.arrowY+64*this.activeItem)):(h=this.arrow)==null||h.setVisible(!1),this.previousSoundVolume!=globalThis.soundVolume&&(this.previousSoundVolume=globalThis.soundVolume,this.playSound()),this.previousMusicVolume!=globalThis.musicVolume&&(this.previousMusicVolume=globalThis.musicVolume,this.playMusic())}destroy(){this.soundLabel.destroy(),this.musicLabel.destroy(),this.backLabel.destroy()}continueGame(){this.musicSample.stop(),this.soundSample.stop(),this.scene.stop(),this.scene.start("hoppa")}createArrow(){this.arrow=this.add.image(this.arrowX,this.arrowY,"arrow"),this.arrow.setRotation(30),this.arrow.setVisible(!1)}}class Q7 extends rt.Scene{constructor(){super("help");$(this,"line1");$(this,"line2");$(this,"line3");$(this,"line4");$(this,"line5");$(this,"cursors")}preload(){Ge(this)}init(){var i;this.cursors=(i=this.input.keyboard)==null?void 0:i.createCursorKeys(),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}create(){const{width:i,height:f}=this.scale;this.add.image(i/2,f/2-150,"logo").setDisplaySize(460,196).setOrigin(.5,.5),this.createIntro(),this.input.on("pointerdown",()=>{this.continueGame()}),this.input.on("keydown",()=>{this.continueGame()})}clearLines(){var i;this.line1.destroy(),this.line2.destroy(),this.line3.destroy(),this.line4.destroy(),(i=this.line5)==null||i.destroy(),this.line5=void 0}update(){var i;(_e(this,-1)||((i=this.cursors)==null?void 0:i.space.isDown))&&this.continueGame()}createIntro(){const{width:i,height:f}=this.scale;this.line1=this.add.bitmapText(i*.5,f/2,"press_start","If you allow Hoppa to connect",32).setTint(16777215).setOrigin(.5),this.line2=this.add.bitmapText(i*.5,f/2+48,"press_start","Hoppa will check your Balance for",32).setTint(16777215).setOrigin(.5),this.line3=this.add.bitmapText(i*.5,f/2+96,"press_start","RBIT tokens and RA8BIT NFTS",32).setTint(16777215).setOrigin(.5),this.line4=this.add.bitmapText(i*.5,f/2+144,"press_start","But now it runs in demo mode",32).setTint(16777215).setOrigin(.5),this.time.delayedCall(12e3,()=>{this.clearLines(),this.createKeys()})}createKeys(){const{width:i,height:f}=this.scale;this.line1=this.add.bitmapText(i*.5,f/2,"press_start","Use CURSOR or WASD keys to move",32).setTint(16777215).setOrigin(.5),this.line2=this.add.bitmapText(i*.5,f/2+48,"press_start","Use SPACEBAR to jump",32).setTint(16777215).setOrigin(.5),this.line3=this.add.bitmapText(i*.5,f/2+96,"press_start","Use SHIFT to throw",32).setTint(16777215).setOrigin(.5),this.line4=this.add.bitmapText(i*.5,f/2+144,"press_start","Use I to open Inventory",32).setTint(16777215).setOrigin(.5),this.line5=this.add.bitmapText(i*.5,f/2+192,"press_start","Or use touchpad/gamepad",32).setTint(16777215).setOrigin(.5),this.time.delayedCall(6e3,()=>{this.clearLines(),this.createIntro()})}destroy(){var i;this.line1.destroy(),this.line2.destroy(),this.line3.destroy(),this.line4.destroy(),(i=this.line5)==null||i.destroy()}continueGame(){this.scene.stop(),this.scene.start("hoppa")}}class q7 extends zp{constructor(){super("story");$(this,"cursors");$(this,"chapter",1);$(this,"image");$(this,"scroller");$(this,"scrollText",[]);$(this,"spacing",["","","","","",""])}preload(){this.load.image("story1","assets/story1.webp"),this.load.image("story2","assets/story2.webp"),this.load.image("story3","assets/story3.webp"),this.load.image("story4","assets/story4.webp"),this.load.image("story5","assets/story5.webp"),Ge(this)}create(){var C;const{width:i,height:f}=this.scale;this.cursors=(C=this.input.keyboard)==null?void 0:C.createCursorKeys(),this.input.setDefaultCursor("none"),Eu(this,"spectacle"),this.image=this.add.image(i/2,f/2,"story1").setOrigin(.5,.5).setVisible(!0),this.chapter=1,this.nextStory(),this.scrollText=this.spacing.concat(this.content),this.scroller=this.add.dynamicBitmapText(i/2,0,"press_start",this.scrollText,22),this.scroller.setCenterAlign(),this.scroller.setOrigin(.5,.5),this.scroller.setTint(16777215),this.scroller.setVisible(!1),this.scroller.scrollY=-1900,this.input.on("pointerdown",()=>{this.startGame()}),this.input.on("keydown",()=>{this.startGame()})}destroy(){this.image.destroy(),this.scroller.destroy(),Ie(this),mr(this)}nextStory(){const{width:i,height:f}=this.scale;this.time.delayedCall(5e3,()=>{this.cameras.main.fadeOut(1e3,0,0,0),this.cameras.main.once(rt.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.image.destroy(),this.chapter++,this.chapter<6?(this.image=this.add.image(i/2,f/2,"story"+this.chapter).setOrigin(.5,.5),this.cameras.main.fadeIn(1e3,0,0,0),this.cameras.main.once(rt.Cameras.Scene2D.Events.FADE_IN_COMPLETE,()=>{this.nextStory()})):(this.cameras.main.fadeIn(100,0,0,0),this.scroller.setVisible(!0))})})}update(i,f){this.scroller.visible&&(this.scroller.scrollY+=.05*f,this.scroller.scrollY>2100&&this.startGame()),(_e(this,-1)||this.cursors.space.isDown)&&this.startGame()}startGame(){const i=this.sound.get("spectacle");this.tweens.add({targets:i,volume:0,duration:500,onComplete:()=>{Ie(this),this.scene.stop(),this.scene.start("start")}})}}class _7 extends rt.Scene{constructor(){super("wallet");$(this,"image");$(this,"line1");$(this,"line2");$(this,"line3");$(this,"line4");$(this,"line5");$(this,"status");$(this,"delayedRun");$(this,"countdownActive",!0);$(this,"txLock",!1);$(this,"changeEvents",0);$(this,"countdownText");$(this,"countdown",0)}preload(){this.load.image("bg","assets/storyx.webp"),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()}),Ge(this)}endScene(){this.txLock||this.startGame()}updateCountdown(){this.countdown--,this.countdown<=0?(this.endScene(),this.countdownText.setText("")):(this.countdownActive&&this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),this.countdownText.setText(""+this.countdown))}create(){var w;const{width:i,height:f}=this.scale;this.changeEvents=globalThis.changeEvent,this.input.setDefaultCursor("url(assets/hand.cur), pointer"),this.countdown=10,this.countdownText=this.add.bitmapText(i-64,f-64,"press_start",""+this.countdown,22).setOrigin(1,1).setTint(3145809),this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),globalThis.noWallet?this.line1=this.add.bitmapText(i*.5,f/2+150,"press_start","It seems you dont have a crypto wallet (yet)",22).setTint(16777215).setOrigin(.5):XT()&&(this.line1=this.add.bitmapText(i*.5,f/2+150,"press_start","You are allowed access Level 1",22).setTint(16777215).setOrigin(.5)),this.line2=this.add.bitmapText(i*.5,f/2+190,"press_start","Unlimited play only for RBITS holders",22).setTint(16777215).setOrigin(.5),this.line3=this.add.bitmapText(i*.5,f/2+240,"press_start","And Ra8bit NFT holders",22).setTint(16777215).setOrigin(.5),this.status=this.add.bitmapText(i*.5,64,"press_start","",18).setTint(16741120).setOrigin(.5),globalThis.chainId!=56&&!globalThis.noWallet&&this.status.setText("Your wallet is not connected to the Binance Smart Chain!"),this.line4=this.add.bitmapText(i*.5-256,f/2+320,"press_start","Give me free $RA8BIT!",16).setTint(16777215).setDropShadow(2,2,16711680).setOrigin(.5);let C="Please confirm the TX and standby";globalThis.chainId!=56?C="You are not connected to the Binance Smart Chain":globalThis.noWallet&&(C="Please install MetaMask or TrustWallet first"),this.line4.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.line5.setTint(2239324),this.status.setText(C),globalThis.chainId==56&&!globalThis.noWallet&&(this.txLock=!0,(async()=>{const T=await kT();this.status.setText(T),this.txLock=!1,this.delayedStart()})())}).on("pointerdown",()=>{this.line4.setTint(10072254)}),this.line5=this.add.bitmapText(i*.5+256,f/2+320,"press_start","Give me free $RBITS!",16).setTint(16777215).setDropShadow(2,2,16711680).setOrigin(.5),this.line5.setInteractive({cursor:"pointer"}).on("pointerup",()=>{var a;(a=this.delayedRun)==null||a.remove(!1),this.line5.setTint(2239324),this.status.setText(C),globalThis.chainId==56&&!globalThis.noWallet&&(this.txLock=!0,(async()=>{const e=await VT();this.status.setText(e),this.txLock=!1,this.delayedStart()})())}).on("pointerdown",()=>{this.line5.setTint(10072254)}),this.image=this.add.image(i/2,f/2,"bg").setOrigin(.5,.5).setVisible(!0),this.input.on("keydown",()=>{this.txLock||this.startGame()}),(w=this.input.keyboard)==null||w.once("keydown-ESC",()=>{this.scene.stop(),this.scene.start("hoppa-select")}),this.delayedRun=this.time.delayedCall(this.countdown*1e3,()=>{this.endScene()})}delayedStart(){this.time.delayedCall(3e3,()=>{this.startGame()})}destroy(){this.line1.destroy(),this.line2.destroy(),this.line3.destroy(),this.line4.destroy(),this.line5.destroy(),this.status.destroy(),this.image.destroy(),this.countdownText.destroy()}update(){globalThis.changeEvent!=this.changeEvents?(this.scene.restart(),this.changeEvents=globalThis.changeEvent):_e(this,-1)&&this.startGame()}startGame(){this.cameras.main.fadeOut(),this.scene.stop(),this.scene.start("player-select")}}class tG extends rt.Scene{constructor(){super("inventory");$(this,"player");$(this,"grid",[]);$(this,"gridIndex",0);$(this,"numCols",5);$(this,"graphics");$(this,"bgGraphics");$(this,"lastUpdate",0);$(this,"text");$(this,"statusText");$(this,"bgImage");$(this,"balances",[]);$(this,"innerBorder",8);$(this,"outerBorder",4);$(this,"sceneEnding",!1);$(this,"cardInfo",["","Skin Change Approved!","Dead End!","Power Up! Hit em hard!","Power Up! Throw droppings!","Power Up! Smash those bricks!","Power Up! Need more speed!","Surprise!","Warp to any level!","Another voice!"])}init(i){this.player=i.player,this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()}),this.balances=new Array(10).fill(0);let f=window.localStorage.getItem("ra8bit.cards");f!=null&&(this.balances=JSON.parse(f))}destroy(){var i,f,C;(i=this.text)==null||i.destroy(),(f=this.statusText)==null||f.destroy(),this.graphics.destroy(),this.bgGraphics.destroy(),this.bgImage.destroy(),(C=this.statusText)==null||C.destroy(),this.grid.forEach(w=>{w.destroy()}),this.input.setDefaultCursor("none"),this.grid=[],this.gridIndex=0,this.sceneEnding=!1}preload(){this.load.audio("card-1",["assets/card-1.mp3","assets/card-1.m4a"]),this.load.audio("card-2",["assets/card-2.mp3","assets/card-2.m4a"]),this.load.audio("card-3",["assets/card-3.mp3","assets/card-3.m4a"]),this.load.audio("card-4",["assets/card-4.mp3","assets/card-4.m4a"]),this.load.audio("card-5",["assets/card-5.mp3","assets/card-5.m4a"]),this.load.audio("card-6",["assets/card-6.mp3","assets/card-6.m4a"]),this.load.audio("card-7",["assets/card-7.mp3","assets/card-7.m4a"]),this.load.audio("card-8",["assets/card-8.mp3","assets/card-8.m4a"]),this.load.audio("card-9",["assets/card-9.mp3","assets/card-9.m4a"]),this.load.image("inv","assets/inventory.webp"),this.load.atlas("cards","assets/cards.webp","assets/cards.json")}update(i,f){var e;if(this.player===void 0)return;let C=this.gridIndex,w=!1;this.player.isLeft()?(C=this.gridIndex-1,w=!0):this.player.isRight()?(C=this.gridIndex+1,w=!0):this.player.isUp()?(C=this.gridIndex+this.numCols,w=!0):this.player.isDown()&&(C=this.gridIndex-this.numCols,w=!0),C<0?C=0:C>this.grid.length-1&&(C=this.grid.length-1);let a=this.gridIndex;a>this.grid.length-1?a=this.grid.length-1:a<0&&(a=0),this.gridIndex=a;const T=this.grid[this.gridIndex];if(this.player.isSpace()){const u=T.getData("id");this.openItem(u)}if(w){const u=128+this.innerBorder/2;this.graphics.clear(),this.graphics.lineStyle(this.innerBorder,16777215),this.graphics.strokeRect(T.x-64,T.y-64,128,128),this.graphics.lineStyle(this.outerBorder,1507327),this.graphics.strokeRect(T.x-u/2,T.y-u/2,u,u);const y=T.getData("id");(e=this.text)==null||e.destroy(),this.text=this.add.bitmapText(640,640-48-44,"press_start",this.cardInfo[y],32).setTint(16741120).setOrigin(.5),this.time.delayedCall(8e3,()=>{var d;(d=this.text)==null||d.destroy(),this.text=void 0})}(this.player.isShift()||this.player.isR2())&&this.endScene(),!(i<this.lastUpdate)&&(this.gridIndex=C,this.lastUpdate=i+120)}create(){var o,c,m;const{width:i,height:f}=this.scale;this.input.setDefaultCursor("url(assets/hand.cur), pointer"),this.cameras.main.setBackgroundColor("rgba(0, 0, 0, 0.8)"),this.bgImage=this.add.image(i/2,f/2,"inv").setOrigin(.5,.5),this.bgGraphics=this.add.graphics(),this.bgGraphics.lineStyle(this.innerBorder,65528),this.bgGraphics.strokeRect(40,60,1200,600),(o=this.input.keyboard)==null||o.on("keydown-I",p=>{this.endScene()}),(c=this.input.keyboard)==null||c.on("keydown-ESC",p=>{this.endScene()});let C=`Press I or R2 [exit]
Press A or Space [select]
Arrows [navigate]
B on virtual [exit]`;this.statusText=this.add.bitmapText(1e3,96,"press_start",C,16).setTint(1507327).setOrigin(.5),this.player.setJoystick(this,i),this.graphics=this.add.graphics();const w=128,a=16,T=this.numCols,e=2,u=9,y=T*w+(T-1)*a,d=e*w+(e-1)*a,l=(this.cameras.main.width-y)/2,h=(this.cameras.main.height-d)/2,r=this.graphics,n=this;let v=1;for(let p=0;p<e;p++)for(let g=0;g<T;g++){const x=l+g*(w+a),E=h+p*(w+a),P=this.add.sprite(x,E,"cards",`${v}.webp`);if(P.setData("id",v),P.name=`card-${v}`,P.setInteractive({useHandCursor:!0}),P.setAlpha(.1),P.on("pointerdown",function(){const S=P.getData("id");n.openItem(S)}),P.on("pointerover",()=>{var b;let S=w+this.innerBorder/2;r.lineStyle(this.innerBorder,16777215),r.strokeRect(x-w/2,E-w/2,w,w),r.lineStyle(this.outerBorder,1507327),r.strokeRect(x-S/2,E-S/2,S,S),this.gridIndex=v-1;const M=P.getData("id");(b=this.text)==null||b.destroy(),this.text=this.add.bitmapText(i*.5,640-48-44,"press_start",this.cardInfo[M],32).setTint(16741120).setOrigin(.5),this.time.delayedCall(8e3,()=>{var A;(A=this.text)==null||A.destroy(),this.text=void 0})}),P.on("pointerout",()=>{var S;r.clear(),(S=this.text)==null||S.destroy(),this.text=this.add.bitmapText(640,640-48-44,"press_start","Select a hoppa card to buy",32).setTint(16741120).setOrigin(.5)}),this.grid.push(P),v++,v>u)break}(m=this.text)==null||m.destroy(),this.text=this.add.bitmapText(640,640-48-44,"press_start","Select a hoppa card to buy",32).setTint(16741120).setOrigin(.5),this.scene.bringToTop("inventory"),this.player.pokeVirtualStick(this,i)}openItem(i){}endScene(){this.sceneEnding||(this.player.unpokeVirtualStick(this),this.scene.stop()),this.sceneEnding=!0}}class Hr{constructor(t,i){$(this,"scene");$(this,"banner");$(this,"text");$(this,"graphics");$(this,"bannerHeight",0);$(this,"bannerWidth",0);const{background:f,text:C,textColor:w,textSize:a,margin:T,x:e,y:u,expand:y}=i;this.scene=t,Nn.exports.Display.Color.ValueToColor(w),this.text=t.add.bitmapText(e+T,u+T,"press_start",C,a).setTint(w).setOrigin(0,0);const l=this.text.getTextBounds(!0).global,h=y?t.scale.width:l.width+T*2;this.graphics=this.scene.add.graphics(),this.graphics.fillStyle(f[0],1),this.graphics.fillRect(e,u,h,l.height+T*2),f.length>1&&(this.graphics.fillStyle(f[1],1),this.graphics.fillRect(e,u,h,(l.height+T*2)/2)),this.banner=this.scene.add.container(e,u,[this.graphics,this.text]),this.banner.setSize(h,l.height+T*2),this.bannerHeight=l.height+T*2,this.bannerWidth=l.width}destroy(){this.graphics.destroy(),this.text.destroy()}getBannerWidth(){return this.bannerWidth}getBannerHeight(){return this.bannerHeight}setText(t){this.text.setText(t)}}class eG{constructor(t){$(this,"banner1");$(this,"banner2");$(this,"banner3");$(this,"banner4");$(this,"banner5");$(this,"banner6");$(this,"parsedItems");$(this,"items",[`{
        "title": "Crypto Investors Panic Over 'Meme Coin Apocalypse'",
        "text": "As meme coins continue to flood the market, experts warn of a looming 'meme coin apocalypse'. Panic selling ensues."
    }`,`{
        "title": "Bitcoin Plummets After Influencer Reveals Doge Investment",
        "text": "Bitcoin's price drops as popular influencer admits to selling BTC to invest in Dogecoin."
    }`,`{
        "title": "Crypto Mining Causes Alien Invasion",
        "text": "Experts link recent surge in extraterrestrial activity to massive energy consumption required for cryptocurrency mining."
    }`,`{
        "title": "Crypto Investors Struggle to Keep Up with New Coins",
        "text": "As new cryptocurrencies emerge daily, investors struggle to keep track.Some resort to buying every new coin just in case."
    }`,`{
        "title": "Elon Musk's Dog Launches Own Cryptocurrency",
        "text": "In a surprise move, Elon Musk's dog has launched its own cryptocurrency,'Dogecoin for Dogs'. The market eagerly awaits."
    }`,`{
      "title": "Dogecoin hits $1",
      "text": "In a stunning turn of events, Dogecoin has reached the $1 mark, leaving many investors speechless."
    }`,`{
      "title": "Local man loses life savings",
      "text": "A local man is devastated after losing his entire life savings to a cryptocurrency scam."
    }`,`{
      "title": "Ethereum creator found",
      "text": "The real Vitalik Buterin has been found living in a remote village in Russia."
    }`,`{
      "title": "Bitcoin price crashes",
      "text": "Bitcoin has experienced a massive price crash, leaving many investors in a state of panic."
    }`,`{
      "title": "Crypto exchange hacked",
      "text": "A major cryptocurrency exchange has been hacked, resulting in the loss of millions of dollars worth of assets."
    }`,`{
      "title": "NFT of cat meme sells for $500k",
      "text": "In a sign of the times, an NFT of a cat meme has sold for half a million dollars."
    }`,`{
      "title": "Crypto mining farm discovered",
      "text": "Authorities have uncovered a massive cryptocurrency mining farm operating illegally in a rural area."
    }`,`{
      "title": "Crypto regulations introduced",
      "text": "New regulations governing the use of cryptocurrencies have been introduced by the government."
    }`,`{
      "title": "Bitcoin billionaire goes bankrupt",
      "text": "A well-known Bitcoin billionaire has declared bankruptcy after losing his entire fortune to bad investments."
    }`,`{
      "title": "Ethereum flips Bitcoin",
      "text": "For the first time ever, ETH has surpassed BTC in market capitalization, causing shockwaves throughout the industry."
    }`,`{
      "title": "Crypto conference cancelled",
      "text": "A major cryptocurrency conference has been cancelled due to concerns over COVID-19."
    }`,`{
      "title": "Local business accepts Bitcoin",
      "text": "A local business has started accepting Bitcoin as a form of payment, much to the delight of crypto enthusiasts."
    }`,`{
      "title": "Crypto startup raises $10 million",
      "text": "A new cryptocurrency startup has raised $10 million in funding from a group of prominent investors."
    }`,`{
      "title": "Crypto investment fund launched",
      "text": "A new investment fund focused on cryptocurrencies has been launched, attracting interest from institutional investors."
    }`,`{
      "title": "Bitcoin price hits all-time high",
      "text": "Bitcoin has reached a new all-time high, prompting predictions of even further growth in the coming months."
    }`,`{
      "title": "Crypto market crashes",
      "text": "The entire cryptocurrency market has experienced a major crash, wiping out billions of dollars in value."
    }`,`{
      "title": "Crypto millionaire gives back",
      "text": "A wealthy crypto investor has pledged to donate a portion of his fortune to charity."
    }`,`{
      "title": "Crypto exchange goes offline",
      "text": "A major cryptocurrency exchange has gone offline, leaving many users unable to access their funds."
    }`,`{
      "title": "Crypto wallet hacked",
      "text": "A popular cryptocurrency wallet has been hacked, resulting in the theft of millions of dollars worth of assets."
    }`,`{
      "title": "Crypto ad banned",
      "text": "A controversial cryptocurrency ad has been banned from airing on television."
    }`,`{
      "title": "Crypto used for money laundering",
      "text": "Authorities have uncovered a major money laundering operation using cryptocurrencies."
    }`,`{
      "title": "Bitcoin accepted at major retailer",
      "text": "A major retailer has started accepting Bitcoin as a form of payment, signaling a shift towards mainstream adoption."
    }`,`{
      "title": "Crypto mining now profitable",
      "text": "After months of losses, cryptocurrency mining has become profitable again due to rising prices."
    }`,`{
      "title": "Crypto artist gains fame",
      "text": "A little-known artist who creates NFTs has gained widespread fame and fortune in the crypto community."
    }`,`{
      "title": "Crypto used to buy real estate",
      "text": "A luxury real estate property has been purchased using Bitcoin, marking a significant milestone for the industry."
    }`,`{
      "title": "Crypto investor becomes youngest billionaire",
      "text": "A teenage crypto investor has become the youngest billionaire in history after a massive price surge in his portfolio."
    }`,`{
      "title": "Crypto used to fundraise for charity",
      "text": "A charity fundraiser using cryptocurrencies has raised millions of dollars for a worthy cause."
    }`,`{
      "title": "Crypto exchange expands to new markets",
      "text": "A major cryptocurrency exchange has announced plans to expand its services to new markets in the coming months."
    }`,`{
      "title": "Dogecoin founder adopts Shiba Inu",
      "text": "Believes it will bring luck to new crypto venture."
    }`,`{
      "title": "Crypto enthusiasts turn to potato mining",
      "text": "Tubers discovered to be more valuable than expected."
    }`,`{
      "title": "Man loses fortune on NFT of his own sneeze",
      "text": "Bidding war leaves him with nothing but allergies."
    }`,`{
      "title": "Crypto bros trade pizza for Dogecoin",
      "text": "Say it's the ultimate currency for fast food purchases."
    }`,`{
      "title": "Experts predict rise of Purr-fect coin",
      "text": "Cat lovers eagerly await feline-themed crypto."
    }`,`{
      "title": "Crypto millionaire buys moon with Bitcoin",
      "text": "Elon Musk denies any involvement, calls it 'lunacy'."
    }`,`{
      "title": "Bitcoin now accepted at Area 51 gift shop",
      "text": "Alien merchandise sales skyrocket as crypto gains popularity."
    }`,`{
      "title": "Woman turns NFT collection into wedding ring",
      "text": "Says it's a symbol of love and decentralization."
    }`,`{
    "title": "Crypto investor becomes space tourist",
    "text": "Says crypto profits were out of this world."
  }`,`{
    "title": "Blockchain used to track Bigfoot sightings",
    "text": "Crypto enthusiasts turn their attention to cryptozoology."
  }`,`{
    "title": "Investor loses fortune on meme crypto",
    "text": "Says he didn't realize it was just a joke."
  }`,`{
    "title": "Crypto used to buy naming rights for newborn",
    "text": "Parents hope it will pay for college someday."
  }`,`{
    "title": "Dogecoin now accepted at pet stores",
    "text": "Dogecoin holders rejoice, can now buy dog food with DOGE."
  }`,`{
    "title": "Bitcoin mine discovered in abandoned pizza shop",
    "text": "Crypto miners say it's the cheesiest find of the century."
  }`,`{
    "title": "Crypto expert predicts rise of 'HODL coin'",
    "text": "Says it's the ultimate hodler's dream come true."
  }`,`{
    "title": "Investor accidentally sends crypto to wrong address",
    "text": "Says he should have used copy and paste instead of typing it out."
  }`,`{
    "title": "Crypto used to buy pirate treasure map",
    "text": "Investor says he's taking a chance on X marks the spot."
  }`,`{
    "title": "Crypto used to buy entire town",
    "text": "Investor says he plans to rename it Crypto City."
  }`,`{
    "title": "Crypto guru predicts end of fiat currency",
    "text": "Says it's time for the dollar to be decentralize or die."
  }`,`{
    "title": "Crypto used to fund search for Bigfoot",
    "text": "Investors hope to find the cryptozoological creature and profit from it."
  }`,`{
    "title": "Crypto investor builds mansion entirely out of Bitcoin",
    "text": "Says it's the ultimate symbol of crypto success."
  }`,`{
    "title": "Investor loses fortune on 'Meme of the Month' crypto",
    "text": "Says he should have known better than to invest in a meme."
  }`,`{
    "title": "Institutional Money Pours In",
    "text": "Large financial firms invest billions in Bitcoin and other cryptos."
   }`,`{
    "title": "Crypto Adoption Skyrockets",
    "text": "Major retailers announce plans to accept cryptocurrencies as payment."
   }`,`{
    "title": "Crypto Becomes Safe Haven",
    "text": "As stock market plunges, investors flock to Bitcoin and other cryptos."
   }`,`{
    "title": "DeFi Revolutionizes Finance",
    "text": "Decentralized finance projects attract billions in investment."
   }`,`{
    "title": "Crypto Regulations Favorable",
    "text": "New regulations support the growth of the crypto industry."
   }`,`{
    "title": "Crypto Industry Booms",
    "text": "Record-breaking volumes and market caps show crypto is here to stay."
   }`,`{
    "title": "Major companies accept crypto",
    "text": "Experts predict widespread adoption within next 5 years"
  }`,`{
    "title": "Crypto mining profits soar",
    "text": "Rising demand for mining hardware drives up prices"
  }`,`{
    "title": "Decentralized exchange booms",
    "text": "Trading volume exceeds centralized exchanges for first time"
  }`,`{
    "title": "Crypto hedge funds outperform",
    "text": "Investors flock to high-risk, high-reward crypto funds"
  }`,`{
    "title": "Central banks explore crypto",
    "text": "Industry insiders predict crypto will replace SWIFT within a decade"
  }`,`{
    "title": "Crypto community celebrates",
    "text": "Major scaling solution goes live; Fees drop to all-time lows"
  }`,`{
    "title": "Crypto regulations become lenient",
    "text": "Governments embrace the industry; Investors embrace bullish sentiment"
  }`,`{
    "title": "Crypto projects see massive adoption",
    "text": "NFTs explode in popularity; Artists and creators earn millions"
  }`,`{
    "title": "Altcoin market sees massive bull run",
    "text": "Newly-minted crypto millionaires emerge as coins like Dogecoin skyrocket"
  }`,`{
    "title": "Crypto market reaches new all-time high",
    "text": "Investors rejoice as Bitcoin hits $100K"
  }`,`{
    "title": "Ethereum 2.0 goes live",
    "text": "Scalability and security upgrades drive price surge"
  }`,`{
    "title": "Institutional adoption skyrockets",
    "text": "Major banks and corporations invest billions in crypto"
  }`,`{
    "title": "Crypto regulation clears uncertainty",
    "text": "Investors gain confidence as governments embrace crypto"
  }`,`{
    "title": "Crypto exchange breaks trading volume record",
    "text": "Market volatility leads to surge in trading activity"
  }`,`{
    "title": "New crypto unicorn emerges",
    "text": "Startup reaches $1 billion valuation in record time"
  }`,`{
    "title": "Crypto payments go mainstream",
    "text": "Major retailers accept Bitcoin and other cryptocurrencies"
  }`,`{
    "title": "Crypto market cap hits $5 trillion",
    "text": "Experts predict continued growth in 2023"
  }`,`{
    "title": "Crypto market dominates finance",
    "text": "Traditional finance industry struggles to keep up"
  }`,`{
    "title": "Bitcoin named 'asset of the year'",
    "text": "Investors reap massive profits from cryptocurrency"
  }`,`{
    "title": "Crypto influencer predicts",
    "text": "Moon will be reached by December."
  }`,`{
    "title": "Crypto conference attendee",
    "text": "Mistakes Elon Musk for Satoshi Nakamoto."
  }`,`{
    "title": "Crypto trader admits",
    "text": "Lost all savings on Dogecoin."
  }`,`{
    "title": "Crypto exchange hacked",
    "text": "Hackers stole $100M in worthless tokens."
  }`,`{
    "title": "Crypto investor",
    "text": "Pays $1M for a tweet from Elon Musk about Bitcoin."
  }`,`{
    "title": "Crypto startup founder",
    "text": "Tells investors 'we'll make you rich!' in whitepaper."
  }`,`{
    "title": "Crypto whale",
    "text": "Sells entire portfolio for a single NFT of a banana."
  }`,`{
    "title": "Bitcoin pizza guy' revealed to be a time traveler",
    "text": "'I thought it was 2010, I had no idea Bitcoin would be worth so much,' he explains."
   }`,`{
    "title": "Crypto investors shocked",
    "text": "ICO was Nigerian Prince scam"
  }`,`{
    "title": "Investor millionaire accident",
    "text": "buys wrong coin, makes fortune"
  }`,`{
    "title": "Ethereum Smart Contracts: The Future of Finance?",
    "text": "Ethereum's smart contract capabilities have the potential to revolutionize the financial industry."
  }`,`{
    "title": "Ethereum Smart Contracts: The Lawyers' Nightmare",
    "text": "Ethereum's smart contracts: the future of finance or the lawyers' nightmare? As the code rules, legal disputes drop."
  }`,`{
    "title": "Crypto Zombies Rise, Bitcoin Leads the Horde",
    "text": "Crypto zombies rise from the grave, led by Bitcoin's undead army. HODLers stock up on weapons and memes."
  }`,`{
    "title": "Ethereum Gas Fees Skyrocket, Turn to Bike-Powered Mining",
    "text": "Ethereum gas fees skyrocket, prompting crypto users to turn to bike-powered mining. Green energy or sweaty desperation?"
  }`,`{
    "title": "Crypto Investors Go Bananas for Monkeycoin",
    "text": "Crypto investors go bananas for Monkeycoin. As the market swings, will they hold on or fling their poo?"
  }`,`{
    "title": "Crypto Influencers Fight to Be Queen Bee of Honeycoin",
    "text": "Crypto influencers fight to be queen bee of Honeycoin. The hive is buzzing, as they compete for sweet success."
  }`,`{
    "title": "Crypto Experts Discover New Altcoin: Chuck Norriscoin",
    "text": "Crypto experts discover new altcoin: Chuck Norriscoin. The value can't be measured in dollars, only roundhouse kicks."
  }`,`{
    "title": "Crypto Exchange Hacked, Hackers Steal All the Garlicoin",
    "text": "Crypto exchange hacked, hackers steal all the Garlicoin. Italian grandmothers everywhere are outraged."
  }`,`{
    "title": "Crypto Investors Panic Sell, Stock Up on Ramen Noodles",
    "text": "Crypto investors panic sell, stocking up on Ramen noodles. The college student diet goes mainstream."
  }`,`{
    "title": "AI Develops Sense of Humor, Humans Still Dont Find it Funny",
    "text": "AI develops sense of humor, humans still don't find it funny. Looks like the robots still have some work to do!"
  }`,`{
  "title": "Crypto Investor Buys Lamborghini, Forgets Keys on Blockchain",
  "text": "Crypto investor buys Lamborghini, forgets keys on blockchain. Looks like he needs to mine some more memory."
  }`]);this.banner3=new Hr(t,{background:[0],text:this.getTime(),textColor:16777215,textSize:10,margin:4,x:4,y:320,expand:!1}),this.banner4=new Hr(t,{background:[16706330],text:"This is some news",textColor:0,textSize:10,margin:4,x:4+30,y:320,expand:!0}),this.banner2=new Hr(t,{background:[14606046],text:"This is a headline",textColor:0,textSize:22,margin:8,x:4,y:320-this.banner4.getBannerHeight()-1,expand:!0}),this.banner1=new Hr(t,{background:[14101540,8591896],text:"BREAKING NEWS",textColor:16777215,textSize:18,margin:8,x:4,y:320-this.banner2.getBannerHeight()+2,expand:!1}),this.banner5=new Hr(t,{background:[14101540],text:"LIVE",textColor:16777215,textSize:18,margin:8,x:4,y:16,expand:!1}),this.banner6=new Hr(t,{background:[3552565],text:"RBITS NEWSROOM",textColor:11316396,textSize:16,margin:8,x:500,y:334,expand:!1}),this.parsedItems=this.items.map(f=>JSON.parse(f)),this.fetchNews(),t.time.addEvent({delay:1e4,loop:!0,callback:this.fetchNews,callbackScope:this})}destroy(){this.banner1.destroy(),this.banner2.destroy(),this.banner3.destroy(),this.banner4.destroy(),this.banner5.destroy(),this.banner6.destroy()}fetchNews(){let t=this.parsedItems[lp(0,this.items.length-1)];this.banner2.setText(t.title.toUpperCase()),this.banner4.setText(t.text.toUpperCase()),this.banner3.setText(this.getTime())}getTime(){return new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}class iG extends rt.Scene{constructor(){super("ad");$(this,"v");$(this,"news");$(this,"adEnding",!1)}init(){this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.removeAd(),this.destroy()})}preload(){this.loadVideo()}create(){this.input.setDefaultCursor("none"),Ie(this),this.loadAd(),this.playAd(),this.time.delayedCall(5e3,()=>{this.news=new eG(this)}),this.input.on("pointerdown",this.startGame,this),this.input.on("keydown",this.startGame,this)}update(i,f){var w,a,T;_e(this,-1)&&this.startGame(),(w=this.v)!=null&&w.isPaused()&&((a=this.v)==null||a.setPaused(!1)),(((T=this.v)==null?void 0:T.getProgress())||0)>=.9806&&this.startGame()}destroy(){var i,f,C;(i=this.v)==null||i.stop(),(f=this.v)==null||f.destroy(),(C=this.news)==null||C.destroy(),this.input.off("pointerdown",this.startGame,this),this.input.off("keydown",this.startGame,this),this.adEnding=!1}chooseAd(){return"assets/ad-"+rt.Math.Between(0,25)+".mp4"}loadVideo(){this.load.video("ad",this.chooseAd(),"loadeddata",!1,!1)}removeAd(){this.cache.video.has("ad")&&this.cache.video.remove("ad")}loadAd(){const{width:i,height:f}=this.scale;this.v=this.add.video(i/2,f/2,"ad")}playAd(){var i,f;(i=this.v)==null||i.play(!0),(f=this.v)==null||f.setPaused(!1)}startGame(){var i;this.adEnding||(this.adEnding=!0,this.cameras.main.fadeOut(100,0,0,0),this.cameras.main.once(rt.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.stop(),this.scene.start(globalThis.adReturn)}),(i=this.v)==null||i.setPaused())}}class sG extends rt.Scene{constructor(){super("halloffame");$(this,"fontface","press_start");$(this,"title");$(this,"cellPaddingTop",10);$(this,"cellPaddingBottom",10);$(this,"cellPaddingLeft",10);$(this,"cellPaddingRight",10);$(this,"countdownText");$(this,"countdown",0);$(this,"hsv");$(this,"hsvIndex",0);$(this,"cursors");$(this,"rowTints",[16711680,16737792,16776960,3394611,3368652,10040268,16724940,10066329,16777215,16737792]);$(this,"highscores",[]);$(this,"bitmapTexts",[])}init(){var i;this.cursors=(i=this.input.keyboard)==null?void 0:i.createCursorKeys(),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}preload(){this.load.bitmapFont("press_start","assets/press_start_2p.webp","assets/press_start_2p.fnt"),this.input.setDefaultCursor("none")}create(){const{width:i,height:f}=this.scale;this.title=this.add.bitmapText(i/2,16,this.fontface,"HALL OF FAME",82).setTint(16776960).setDropShadow(2,2,16711680,.5).setOrigin(.5,0),this.countdown=16,this.countdownText=this.add.bitmapText(i-64,f-64,this.fontface,""+this.countdown,22).setOrigin(1,1).setTint(3145809),this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),this.hsv=rt.Display.Color.HSVColorWheel(),this.input.on("pointerdown",()=>{this.endScene()}),this.getHallOfFame(),this.time.delayedCall(this.countdown*1e3,this.endScene,void 0,this)}update(i,f){var a;const C=this.hsv[this.hsvIndex].color,w=this.hsv[359-this.hsvIndex].color;this.hsvIndex++,this.hsvIndex>=360&&(this.hsvIndex=0),this.title.setTint(C,w,C,w),(_e(this,-1)||((a=this.cursors)==null?void 0:a.space.isDown))&&this.endScene()}destroy(){this.title.destroy(),this.countdownText.destroy(),this.bitmapTexts.forEach(i=>{i.destroy()}),this.highscores=[],this.bitmapTexts=[]}updateCountdown(){this.countdown--,this.countdown<=0?this.scene.stop():this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),this.countdownText.setText(""+this.countdown)}endScene(){this.scene.stop(),this.scene.start(globalThis.adReturn)}getOrdinal(i){let f=i%10,C=i%100;return f==1&&C!=11?i+"st":f==2&&C!=12?i+"nd":f==3&&C!=13?i+"rd":i+"th"}limit(i="",f=0){return i.substring(0,f)}parseEntry(i,f,C){const w=parseInt(f);let a=this.limit(C,3);return{address:i,score:w,name:a}}createUI(){const i=this.scale.width,f=this.scale.height,C=500,w=this.highscores.length*50+this.cellPaddingTop+this.cellPaddingBottom,a=(i-C)/2,T=16+(f-w)/2,e=a+this.cellPaddingLeft,u=T+this.cellPaddingTop,y="RANK";this.bitmapTexts.push(this.add.bitmapText(e,u,this.fontface,y,24));const d=a+C-this.cellPaddingRight,l=T+this.cellPaddingTop,h="SCORE";this.bitmapTexts.push(this.add.bitmapText(d,l,this.fontface,h,24).setOrigin(1,0));const r=a+C/2,n=T+this.cellPaddingTop,v="NAME";this.bitmapTexts.push(this.add.bitmapText(r,n,this.fontface,v,24).setOrigin(.5,0));for(let o=0;o<this.highscores.length;o++){const c=T+(o+1)*50,m=a+this.cellPaddingLeft,p=this.getOrdinal(o+1);this.bitmapTexts.push(this.add.bitmapText(m,c,this.fontface,p,24).setTint(this.rowTints[o]));const g=a+C-this.cellPaddingRight,x=this.highscores[o].score>0?this.highscores[o].score.toString():"";this.bitmapTexts.push(this.add.bitmapText(g,c,this.fontface,x,24).setOrigin(1,0).setTint(this.rowTints[o]).setDropShadow(2,2,0,.5));const E=a+C/2,P=this.highscores[o].name;this.bitmapTexts.push(this.add.bitmapText(E,c,this.fontface,P,24).setOrigin(.5,0).setTint(this.rowTints[o]).setDropShadow(2,2,0,.5))}}getHallOfFame(){globalThis.chainId==56&&!globalThis.noWallet&&(async()=>{const f=await zT();if(this.scene.isActive(this.scene.key)){this.highscores=[];for(let C=0;C<f.length;C++){let w=f[C],a=this.parseEntry(w[0],w[1],w[2]);this.highscores.push(a)}this.createUI()}})()}}class rG extends rt.Scene{constructor(){super({key:"enter-hall"});$(this,"fontface","press_start");$(this,"initials",["?","?","?"]);$(this,"letterValues",[0,0,0]);$(this,"alphabet","?ABCDEFGHIJKLMNOPQRSTUVWXYZ ");$(this,"currentInitialIndex");$(this,"lastUpdate",0);$(this,"bitmapLetters",[]);$(this,"bitmapCursor");$(this,"sounds");$(this,"title");$(this,"scoreText");$(this,"statusText");$(this,"countdownText");$(this,"countdown",0);$(this,"countdownActive",!0);$(this,"hsv");$(this,"hsvIndex",0);$(this,"spacing",72);$(this,"startPosition",0);$(this,"sceneEnding",!1);$(this,"isReady",[0,0,0]);$(this,"touchInputTimer");$(this,"info");this.currentInitialIndex=0}init(){const i=window.localStorage.getItem("ra8bit.stats");if(i!=null){const f=JSON.parse(i);this.info=f}this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()}),this.sounds=new Map}preload(){Ge(this),this.input.setDefaultCursor("url(assets/hand.cur), pointer")}create(){var T,e;const{width:i,height:f}=this.scale,C=i/2-75,w=f/2+200,a=((T=this.info)==null?void 0:T.highScorePoints)||0;this.startPosition=C,this.hsv=rt.Display.Color.HSVColorWheel(),this.sounds=Go(this),this.countdown=32,this.countdownText=this.add.bitmapText(i-64,f-64,this.fontface,""+this.countdown,22).setOrigin(1,1).setTint(3145809),this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),this.title=this.add.bitmapText(i/2,64,this.fontface,"NEW HIGHSCORE",82).setTint(16776960).setDropShadow(2,2,16711680,.5).setOrigin(.5,0),this.statusText=this.add.bitmapText(i/2,f-64,this.fontface,"",14).setOrigin(.5,0),this.scoreText=this.add.bitmapText(i/2,196,this.fontface,this.formatScore(a),72).setOrigin(.5,0);for(let u=0;u<3;u++){const y=this.add.bitmapText(C+u*this.spacing,w,this.fontface,this.initials[u],72);y.setOrigin(.5),this.bitmapLetters.push(y)}this.bitmapCursor=this.add.bitmapText(C,w+35,this.fontface,"_",72),this.bitmapCursor.setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown",this.handleKeyDown,this),this.input.on("pointerdown",this.handlePointerDown,this),this.input.on("wheel",this.handleWheel,this),Bt(this.sounds,"winneris"),this.time.delayedCall(4e3,()=>{Bt(this.sounds,"hiscore")},void 0,this)}handleKeyDown(i){const f=String.fromCharCode(i.keyCode).toUpperCase();f>="A"&&f<="Z"||f==="?"||f===" "?(this.updateInitial(f),this.confirmed(),this.incLetter()):i.keyCode===37?(this.decLetter(),this.unconfirmed()):i.keyCode===39?(this.incLetter(),this.unconfirmed()):i.keyCode==38?(this.nextLetter(this.currentInitialIndex,-1),this.unconfirmed()):i.keyCode==40?(this.nextLetter(this.currentInitialIndex,1),this.unconfirmed()):i.keyCode==13?(this.confirmed(),this.incLetter()):i.keyCode==8?(this.decLetter(),this.unconfirmed()):i.keyCode==27&&this.endScene()}handlePointerDown(i){i.isDown&&i.wasTouch||(this.confirmed(),this.incLetter())}updateInitial(i){this.initials[this.currentInitialIndex]=i,this.updateLetters()}update(i,f){const C=this.hsv[this.hsvIndex].color,w=this.hsv[359-this.hsvIndex].color;if(this.hsvIndex++,this.hsvIndex>=360&&(this.hsvIndex=0),this.title.setTint(C,w,C,w),!(i<this.lastUpdate)&&(this.lastUpdate=i+120,ko(this)&&this.nextLetter(this.currentInitialIndex,-1),Vo(this)&&this.nextLetter(this.currentInitialIndex,1),Au(this)&&(this.currentInitialIndex--,this.currentInitialIndex<0&&(this.currentInitialIndex=0),this.unconfirmed()),bu(this)&&(this.currentInitialIndex++,this.currentInitialIndex>2&&(this.currentInitialIndex=2),this.unconfirmed()),_e(this,-1)&&(this.confirmed(),this.incLetter()),this.input.activePointer.isDown&&this.input.activePointer.wasTouch)){let a=this.input.activePointer.position.y>0?1:-1;const T=this.nearestLeter(this.input.activePointer);T>=0&&(this.touchInputNotDone(),this.nextLetter(T,a),this.confirmedX(T),this.isInputDone()&&(this.stopCountdown(),this.touchInputTimer=this.time.addEvent({delay:3e3,callback:this.inputDone,callbackScope:this})))}}destroy(){var i,f;for(let C=0;C<3;C++)this.bitmapLetters[C].destroy();this.bitmapCursor.destroy(),this.title.destroy(),this.countdownText.destroy(),this.scoreText.destroy(),this.statusText.destroy(),Ie(this),mr(this),this.sounds.clear(),this.isReady[0]=0,this.isReady[1]=0,this.isReady[2]=0,(i=this.touchInputTimer)==null||i.remove(!1),(f=this.touchInputTimer)==null||f.destroy(),this.sceneEnding=!1}touchInputNotDone(){var i,f;(i=this.touchInputTimer)==null||i.remove(!1),(f=this.touchInputTimer)==null||f.destroy(),this.touchInputTimer=void 0}handleWheel(i,f,C,w,a){const T=this.nearestLeter(i);T!=-1&&(w<0?this.nextLetter(T,1):this.nextLetter(T,-1),this.unconfirmedX(T))}updateCountdown(){this.countdown--,this.countdown<=0?this.endScene():this.countdownActive&&this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),this.countdownText.setText(""+this.countdown)}formatScore(i){return i.toLocaleString()}inputDone(){this.countdownText.setVisible(!1),this.bitmapCursor.setVisible(!1),this.countdown=10,this.countdownText.setText(""+this.countdown),this.time.addEvent({delay:1e3,callback:this.updateCountdown,callbackScope:this}),this.statusText.setText("Please confirm the transaction to save your score"),globalThis.chainId==56&&!globalThis.noWallet?(async()=>{var w;const C=await UT(this.initials.join(""),((w=this.info)==null?void 0:w.highScorePoints)||0);this.scene.isActive("enter-hall")&&(this.statusText.setText(C),C==="OK"?this.statusText.setText("Saved data on chain"):this.statusText.setText(C))})():this.statusText.setText("You are not connected to the Binance Smart Chain"),this.time.delayedCall(10*1e3,this.endScene,void 0,this)}isInputDone(){return this.isReady[0]==1&&this.isReady[1]==1&&this.isReady[2]==1}endScene(){this.sceneEnding||(globalThis.adReturn="hoppa",this.scene.stop(),this.scene.start("halloffame"),this.sceneEnding=!0)}nearestLeter(i){let f=5e3,C=0;for(let w=0;w<3;w++){const a=rt.Math.Distance.BetweenPoints(i,this.bitmapLetters[w]);a<f&&(f=a,C=w)}return f<35?C:-1}updateLetters(){for(let i=0;i<3;i++)this.bitmapLetters[i].setText(this.initials[i])}nextLetter(i,f){this.letterValues[i]+=f,this.letterValues[i]<0?this.letterValues[i]=this.alphabet.length-1:this.letterValues[i]>=this.alphabet.length&&(this.letterValues[i]=0),this.initials[i]=this.alphabet.charAt(this.letterValues[i]),this.updateLetters()}incLetter(){this.currentInitialIndex++,this.currentInitialIndex>2&&(this.currentInitialIndex=2),this.isInputDone()&&this.inputDone()}decLetter(){this.currentInitialIndex--,this.currentInitialIndex<0&&(this.currentInitialIndex=0),this.isInputDone()&&this.inputDone()}stopCountdown(){this.countdownActive=!1,this.countdownText.setText("")}confirmed(){this.bitmapCursor.setX(this.startPosition+this.currentInitialIndex*this.spacing),this.bitmapLetters[this.currentInitialIndex].setTint(3145809),this.bitmapCursor.setTint(3145809),Bt(this.sounds,"blip"),this.isReady[this.currentInitialIndex]=1}confirmedX(i){this.bitmapCursor.setX(this.startPosition+i*this.spacing),this.bitmapLetters[i].setTint(3145809),this.bitmapCursor.setTint(3145809),Bt(this.sounds,"blip"),this.isReady[i]=1}unconfirmed(){this.bitmapCursor.setX(this.startPosition+this.currentInitialIndex*this.spacing),this.bitmapLetters[this.currentInitialIndex].setTint(16777215),this.bitmapCursor.setTint(16777215),this.isReady[this.currentInitialIndex]=0}unconfirmedX(i){this.bitmapCursor.setX(this.startPosition+i*this.spacing),this.bitmapLetters[i].setTint(16777215),this.bitmapCursor.setTint(16777215),this.isReady[i]=0}}class nG extends rt.Scene{constructor(){super("hoppa-select");$(this,"rotate");$(this,"startSinglePlayerLabel");$(this,"disconnectLabel");$(this,"text");$(this,"cursors");$(this,"arrow");$(this,"activeItem",0);$(this,"arrowY",460);$(this,"arrowX",300);$(this,"lastUpdate",0)}init(){var i;this.cursors=(i=this.input.keyboard)==null?void 0:i.createCursorKeys(),this.events.once(rt.Scenes.Events.SHUTDOWN,()=>{this.destroy()})}preload(){Ge(this),this.load.image("arrow","assets/arrow.webp"),globalThis.adReturn="hoppa-select"}create(){const{width:i,height:f}=this.scale;this.add.image(i/2,f/2-172,"logo").setDisplaySize(460,196).setOrigin(.5,.5),this.text=this.add.bitmapText(i*.5,f/2,"press_start","A RBITS Production",48).setTint(12632256).setOrigin(.5),this.input.setDefaultCursor("url(assets/hand.cur), pointer"),this.createArrow(),this.startSinglePlayerLabel=this.add.bitmapText(i*.5,f/2+108,"press_start","Start",48).setTint(16777215).setOrigin(.5),this.disconnectLabel=this.add.bitmapText(i*.5,f/2+196,"press_start","Disconnect",48).setTint(16777215).setOrigin(.5),this.startSinglePlayerLabel.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.continueGame()}).on("pointerdown",()=>{this.highlightActive(0)}),this.disconnectLabel.setInteractive({cursor:"pointer"}).on("pointerup",()=>{this.scene.stop(),this.scene.start("hoppa")}).on("pointerdown",()=>{this.highlightActive(2)}),this.scale.width<this.scale.height&&this.printWarning(i,f),globalThis.noWallet&&this.disconnectLabel.setText("Quit"),this.time.delayedCall(1e4,()=>{this.scene.stop();const C=rt.Math.Between(0,5);let w="ad";!globalThis.noWallet&&globalThis.chainId==56&&C<2&&(w="halloffame"),this.scene.start(w)})}createArrow(){this.arrow=this.add.image(this.arrowX,this.arrowY,"arrow"),this.arrow.setRotation(30),this.arrow.setVisible(!1)}highlightActive(i){var f,C,w,a,T,e;switch(i){case 0:(f=this.startSinglePlayerLabel)==null||f.setTint(16741120),(C=this.disconnectLabel)==null||C.setTint(16777215);break;case 1:(w=this.startSinglePlayerLabel)==null||w.setTint(16777215),(a=this.disconnectLabel)==null||a.setTint(16777215);break;case 2:(T=this.startSinglePlayerLabel)==null||T.setTint(16777215),(e=this.disconnectLabel)==null||e.setTint(16741120);break}this.activeItem=i}update(i,f){var w,a,T,e,u,y,d;if(i<this.lastUpdate)return;let C=!1;if(Mu(this)&&(C=!0),this.lastUpdate=i+120,((w=this.cursors)==null?void 0:w.down.isDown)||Vo(this))this.activeItem--;else if(((a=this.cursors)==null?void 0:a.up.isDown)||ko(this))this.activeItem++;else if(((T=this.cursors)==null?void 0:T.shift.isDown)||((e=this.cursors)==null?void 0:e.space.isDown)||_e(this,-1))switch(this.activeItem){case 0:this.continueGame();break;case 2:this.scene.stop(),this.scene.start("hoppa-select");break}this.activeItem<0?this.activeItem=2:this.activeItem>2&&(this.activeItem=0),this.highlightActive(this.activeItem),C?((u=this.arrow)==null||u.setVisible(!0),(y=this.arrow)==null||y.setPosition(this.arrowX,this.arrowY+64*this.activeItem)):(d=this.arrow)==null||d.setVisible(!1)}destroy(){var i,f;this.startSinglePlayerLabel.destroy(),(i=this.rotate)==null||i.destroy(),this.text.destroy(),this.disconnectLabel.destroy(),(f=this.arrow)==null||f.destroy(),Ie(this),mr(this)}printWarning(i,f){this.rotate=this.add.bitmapText(i*.5,f/2+348,"press_start","!rotate your device!",18).setTint(16741120).setOrigin(.5)}continueGame(){this.scene.stop(),this.scene.start("story")}}const aG={type:rt.WEBGL,scale:{mode:rt.Scale.FIT,autoCenter:rt.Scale.CENTER_BOTH},width:1280,height:720,render:{pixelArt:!0,antialias:!1,antialiasGL:!1},physics:{default:"matter",matter:{gravity:{y:2},debug:!1,runner:{isFixed:!0,fps:60}}},fps:{target:30,forceSetTimeOut:!1},input:{activePointers:4,gamepad:!0},scene:[$T,u1,iG,d1,nG,_7,sG,rG,tG,q7,Z7,Q7,Wx,l1,h1,HT,f1,KT,WT]};window.addEventListener("load",()=>{window.setTimeout(()=>{new rt.Game(aG)},3e3)});
